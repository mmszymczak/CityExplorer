{"version":3,"sources":["scripts/app.js"],"names":["angular","module","userService","user","id","connected","picture","first_name","last_name","full_name","profile_link","happy","service","$inject","googleMapPositionService","$q","$window","onReady","apiReady","promise","activate","tag","document","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","secTag","secondScriptTag","initMap","resolve","defer","this","GeolocationService","errorHandling","markerPosition","lat","lng","position","latitude","longitude","currentLocation","positionFlag","getCurrentPosition","deferred","then","geoplugin_longitude","geoplugin_latitude","geoPosition","coords","navigator","geolocation","reject","actualPosition","geoposition","err","errorFunc","factory","firebaseService","$firebaseArray","firebaseUrl","addComment","placeId","obj","placeRef","Firebase","push","getPlaceComments","commentsArr","placeCommentsRef","addUser","userObj","userRef","update","addToTrip","item","userId","excursionRef","updateTripElement","place","fireId","getExcursionPlaces","excursionArr","removePlaceFromTrip","$id","remove","addToFavorite","facovritePlacesRef","getFavoritePlaces","favoriteArr","removeFavoritePlace","fireBase","FacebookService","$rootScope","$location","$timeout","cacheService","getUploadedPhotos","FB","api","type","fields","response","error","setRange","range","rangeDistance","getMoreData","request","getDetails","getComments","limit","getMuseums","q","center","distance","getBars","getCafes","getClubs","queries","fullArray","forEach","query","getHotels","getRestaurants","getUserData","logout","message","saveUserData","loginResponse","name","loadUserPlaces","result","saveFavorite","saveTrip","data","link","url","checkLoginState","getLoginStatus","statusChangeCallback","warnFunc","status","location","href","login","feed","feedback","infoFunc","toastr","msg","info","warning","successFunc","success","catcher","categories","getFavorite","self","favorite","getTrip","excursion","tripArr","saveCache","category","list","getCache","clearCache","numLoadings","config","$broadcast","when","responseError","$httpProvider","interceptors","spinner","restrict","$scope","element","$on","removeClass","addClass","directive","ceNgViewContainer","templateUrl","ceNavBar","controller","controllerAs","navBarController","logoutFB","navBarVm","ceGoogleMapRoutes","$localStorage","linkFunc","scope","calculateAndDisplayRoute","directionsService","directionsDisplay","pointA","endLocation","PointB","selectedMode","getElementById","value","approvedToShow","waypoints","showOnMap","length","google","maps","LatLng","pop","route","origin","destination","avoidTolls","avoidHighways","travelMode","TravelMode","DirectionsStatus","OK","calculateDistance","routes","legs","setDirections","actualPos","myOptions","zoom","map","Map","DirectionsService","DirectionsRenderer","addEventListener","tempDist","tempDur","duration","Math","round","$watch","favchanged","ceGoogleMapPosition","actualCity","geoplugin_city","actualCountry","geoplugin_countryName","mapTypeId","MapTypeId","ROADMAP","myMarker","Marker","draggable","event","addListener","evt","latLng","toFixed","setCenter","setMap","ceGoogleMap","pointB","text","ceFooter","$anchorScroll","moveToTop","ceElementComments","ElementCommentsController","$routeParams","initForm","resetForm","form","$setPristine","$setUntouched","elemComVm","comment","rate","surname","makeDate","d","Date","year","getFullYear","month","getMonth","day","getDate","fullDate","sendComment","submitted","actualPlace","readyToUse","showComments","isComment","arr","commentsArray","userInfo","readOnly","commentRate","TripPlannerController","initGoogleMapApi","tripVm","googleMapApiReady","removeFromTrip","onDropComplete","index","otherObj","otherIndex","indexOf","addToMap","trip","clearObjBeforeUpdate","checkDisable","onMap","limitToCheck","includes","cleaned","cut","wordwise","max","tail","parseInt","substr","lastspace","lastIndexOf","charAt","filter","ShowResultsController","checkActualCategory","resultVm","actualCategory","getCacheService","totalItems","listByCategory","checkFBState","routeTypeRequest","capitalLetter","toUpperCase","slice","method","loadCheckSave","loadMoreData","pagingNext","concat","paging","next","undefined","awesomeThing","rank","random","numberPerPage","maxSize","currentPage","MainController","mainVm","logInFB","fbService","FavoritePlacesController","favoriteVm","favoriteList","removeFavorite","ElementInfoController","showPosts","infoVm","isPosts","elemInfo","posts","detailsRequest","checkFavoriteState","checkTripState","tripBtnState","addFavorite","favoriteBtnState","itemId","CategoryController","categoryVm","ready","rangeModel","findQuery","window","fbAsyncInit","init","appId","cookie","xfbml","version","bootstrap","s","js","fjs","routeConfig","$routeProvider","otherwise","redirectTo","constant","$logProvider","toastrConfig","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","run","$templateCache","put"],"mappings":"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","file":"scripts/app-f99e6344d1.js","sourcesContent":["(function() {\n    'use strict';\n\n    angular\n        .module('project', ['ngAnimate', 'ngCookies', 'infinite-scroll', 'firebase', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria', 'ngRoute', 'toastr', 'ngStorage', 'ngDraggable']);\n})();\n\n(function(){\r\n    'use strict';\r\n\r\n    angular\r\n        .module('project')\r\n        .service('userService', userService);\r\n\r\n    userService.$inject = [];\r\n\r\n    function userService() {\r\n        //  when user logged in whole informations load here\r\n        var user = {\r\n            id: null,\r\n            connected: false,\r\n            picture: '',\r\n            first_name: '',\r\n            last_name: '',\r\n            full_name: '',\r\n            profile_link: '',\r\n            happy: false\r\n        };\r\n        return {user: user};\r\n    }\r\n\r\n})();\r\n\n(function() {\n\n    'use strict';\n\n    angular\n        .module('project')\n        .service('googleMapPositionService', googleMapPositionService);\n\n    googleMapPositionService.$inject = ['$q', '$window'];\n\n    function googleMapPositionService($q, $window) {\n        var apiReady = $q.defer();\n\n        activate();\n\n        this.onReady = onReady;\n\n        function onReady() {\n            return apiReady.promise;\n        }\n\n        function activate() {\n            var tag = document.createElement('script');\n            tag.src = \"https://maps.googleapis.com/maps/api/js?callback=initMap\";\n            var firstScriptTag = document.getElementsByTagName('script')[0];\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n            var secTag = document.createElement('script');\n            secTag.src = \"http://www.geoplugin.net/javascript.gp\";\n            var secondScriptTag = document.getElementsByTagName('script')[0];\n            secondScriptTag.parentNode.insertBefore(secTag, secondScriptTag);\n\n            $window.initMap = apiReady.resolve;\n        }\n    }\n})();\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .factory('GeolocationService', GeolocationService);\n\n    GeolocationService.$inject = ['$q', '$window', 'googleMapPositionService', 'errorHandling'];\n\n    function GeolocationService($q, $window, googleMapPositionService, errorHandling) {\n        var currentLocation = {\n            getCurrentPosition: getCurrentPosition,\n            actualPosition: actualPosition,\n            markerPosition: markerPosition,\n            positionFlag: false\n        };\n\n        return currentLocation;\n\n        function markerPosition(lat, lng) {\n            var position = {};\n            position.latitude = lat;\n            position.longitude = lng;\n            currentLocation['position'] = position;\n            currentLocation.positionFlag = true;\n        }\n\n        function getCurrentPosition() {\n            var deferred = $q.defer();\n            googleMapPositionService.onReady()\n            .then(function(){\n                var lng = geoplugin_longitude(),\n                    lat = geoplugin_latitude(),\n                    geoPosition = {\n                        coords: {\n                            latitude: lat,\n                            longitude: lng\n                        }\n                    };\n                if (!$window.navigator.geolocation) {\n                    deferred.reject('Geolocation not supported.');\n                } else {\n                    $window.navigator.geolocation.getCurrentPosition(\n                        function (position) {\n                            deferred.resolve(position);\n                        },\n                        function () {\n                            deferred.resolve(geoPosition);\n                        });\n                }\n            });\n            return deferred.promise;\n        }\n\n        function actualPosition() {\n            var position = {};\n            var deferred = $q.defer();\n            if(!currentLocation.positionFlag){\n                getCurrentPosition()\n                    .then(function(geoposition){\n                    position.latitude = geoposition.coords.latitude;\n                    position.longitude = geoposition.coords.longitude;\n                    currentLocation['position'] = position;\n                    deferred.resolve(position);\n                    })\n                    .catch(function(err){\n                        errorHandling.errorFunc(err);\n                    });\n            }else{\n                deferred.resolve(currentLocation.position);\n            }\n            return deferred.promise;\n        }\n\n    }\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .factory('firebaseService', firebaseService);\n\n    firebaseService.$inject = ['$firebaseArray', '$q', 'firebaseUrl', 'userService'];\n\n    function firebaseService($firebaseArray, $q, firebaseUrl, userService) {\n        var fireBase = {\n            addComment: addComment,\n            getPlaceComments: getPlaceComments,\n            addUser: addUser,\n            addToFavorite: addToFavorite,\n            getFavoritePlaces: getFavoritePlaces,\n            removeFavoritePlace: removeFavoritePlace,\n            addToTrip: addToTrip,\n            getExcursionPlaces: getExcursionPlaces,\n            removePlaceFromTrip: removePlaceFromTrip,\n            updateTripElement: updateTripElement\n        };\n        return fireBase;\n\n        function addComment(placeId, obj) {\n            var defer = $q.defer();\n            var placeRef = new Firebase(firebaseUrl+'comments/'+placeId);\n\n            placeRef.push(obj);\n            defer.resolve();\n\n            return defer.promise;\n        }\n\n        function getPlaceComments(placeId) {\n            var defer = $q.defer();\n            var commentsArr = [];\n            var placeCommentsRef = new Firebase(firebaseUrl+'comments/'+placeId);\n\n            commentsArr = $firebaseArray(placeCommentsRef);\n            defer.resolve(commentsArr);\n\n            return defer.promise;\n        }\n\n        function addUser(userObj) {\n            var defer = $q.defer();\n            var userRef = new Firebase(firebaseUrl+'users/'+userObj.id);\n\n            userRef.update(userObj);\n            defer.resolve();\n\n            return defer.promise;\n        }\n\n        function addToTrip(item) {\n            var defer = $q.defer();\n            var userId = userService.user.id;\n            var excursionRef = new Firebase(firebaseUrl+'users/'+userId+'/excursion');\n\n            excursionRef.push(item);\n            defer.resolve();\n\n            return defer.promise;\n        }\n\n        function updateTripElement(place) {\n            var defer = $q.defer();\n            var userId = userService.user.id;\n            var excursionRef = new Firebase(firebaseUrl+'users/'+userId+'/excursion/'+place.fireId);\n\n            excursionRef.update(place);\n            defer.resolve();\n\n            return defer.promise;\n        }\n\n        function getExcursionPlaces(userObj){\n            var defer = $q.defer();\n            var excursionArr = [];\n            var excursionRef = new Firebase(firebaseUrl+'users/'+userObj.id+'/excursion');\n\n            excursionArr = $firebaseArray(excursionRef);\n            defer.resolve(excursionArr);\n\n            return defer.promise;\n        }\n\n        function removePlaceFromTrip(userObj, place) {\n            var excursionRef = new Firebase(firebaseUrl+'users/'+userObj.id+'/excursion/'+place.$id);\n            excursionRef.remove();\n        }\n\n        function addToFavorite(item) {\n            var defer = $q.defer();\n            var userId = userService.user.id;\n            var facovritePlacesRef = new Firebase(firebaseUrl+'users/'+userId+'/favorites');\n\n            facovritePlacesRef.push(item);\n            defer.resolve();\n\n            return defer.promise;\n        }\n\n        function getFavoritePlaces(userObj){\n            var defer = $q.defer();\n            var favoriteArr = [];\n            var facovritePlacesRef = new Firebase(firebaseUrl+'users/'+userObj.id+'/favorites');\n\n            favoriteArr = $firebaseArray(facovritePlacesRef);\n            defer.resolve(favoriteArr);\n\n            return defer.promise;\n        }\n\n        function removeFavoritePlace(userObj, place) {\n            var facovritePlacesRef = new Firebase(firebaseUrl+'users/'+userObj.id+'/favorites/'+place.$id);\n            facovritePlacesRef.remove();\n        }\n    }\n\n})();\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .factory('FacebookService', FacebookService);\n\n    FacebookService.$inject = ['$rootScope', '$window', '$location', 'errorHandling', 'firebaseService', '$timeout', 'GeolocationService', '$q', 'userService', 'cacheService'];\n\n    function FacebookService($rootScope, $window, $location, errorHandling, firebaseService, $timeout, GeolocationService, $q, userService, cacheService) {\n        var service = {\n            checkLoginState: checkLoginState,\n            login: login,\n            logout: logout,\n            setRange: setRange,\n            rangeDistance: 500,\n            getMuseums: getMuseums,\n            getBars: getBars,\n            getCafes: getCafes,\n            getClubs: getClubs,\n            getHotels: getHotels,\n            getRestaurants: getRestaurants,\n            getDetails: getDetails,\n            getComments: getComments,\n            getMoreData: getMoreData,\n            getUploadedPhotos: getUploadedPhotos,\n            loginResponse: ''\n        };\n\n        return service;\n\n        function getUploadedPhotos(id) {\n            var deferred = $q.defer();\n            FB.api(\n                '/'+id+'/photos',\n                'GET',\n                {\"type\":\"uploaded\",\"fields\":\"id,name,source\"},\n                function(response) {\n                    if (!response || response.error) {\n                        deferred.reject('An error occurred while retrieving data');\n                    } else {\n                        deferred.resolve(response);\n                    }\n                }\n            );\n            return deferred.promise;\n        }\n\n        function setRange(range) {\n            service.rangeDistance = range;\n        }\n\n        function getMoreData(request) {\n            var deferred = $q.defer();\n            FB.api(request,\n                function(response) {\n                    if (!response || response.error) {\n                        deferred.reject('An error occurred while retrieving data');\n                    } else {\n                        deferred.resolve(response);\n                    }\n                }\n            );\n            return deferred.promise;\n        }\n\n        function getDetails(id) {\n            var deferred = $q.defer();\n            FB.api(\n                '/'+id,\n                'GET',\n                {\"fields\":[\"name\",\"price_range\",\"engagement\",\n                \"restaurant_specialties\",\"restaurant_services\",\n                \"website\",\"payment_options\",\"phone\",\"about\",\n                \"category\", \"description\", \"food_styles\",\n                \"general_info\",\"location\",\"link\",\"picture.type(large)\"]},\n                function(response) {\n                    if (!response || response.error) {\n                        deferred.reject('An error occurred while retrieving data');\n                    } else {\n                        deferred.resolve(response);\n                    }\n                }\n            );\n            return deferred.promise;\n        }\n\n        function getComments(id) {\n            var deferred = $q.defer();\n            FB.api(\n                '/'+id+'/posts',\n                'GET',\n                {\"limit\":\"3\"},\n                function(response) {\n                    if (!response || response.error) {\n                        deferred.reject('An error occurred while retrieving data');\n                    } else {\n                        deferred.resolve(response);\n                    }\n                }\n            );\n            return deferred.promise;\n        }\n\n        function getMuseums() {\n            var deferred = $q.defer();\n            GeolocationService.actualPosition()\n            .then(function(position){\n                FB.api(\n                    '/search',\n                    'GET',\n                    {\"q\":\"muzeum\",\n                    \"type\":\"place\",\n                    \"center\": position.latitude+\",\"+position.longitude ,\n                    \"distance\": service.rangeDistance,\n                    \"fields\":[\"hours\",\"description\",\"name\", \"location\", \"picture.type(large)\"]},\n                    function(response) {\n                        if (!response || response.error) {\n                            deferred.reject('An error occurred while retrieving data');\n                        } else {\n                            deferred.resolve(response);\n                        }\n                    }\n                );\n            });\n            return deferred.promise;\n        }\n\n        function getBars() {\n            var deferred = $q.defer();\n            GeolocationService.actualPosition()\n            .then(function(position){\n                FB.api(\n                    '/search',\n                    'GET',\n                    {\"q\":\"bar\",\n                    \"type\":\"place\",\n                    \"center\": position.latitude+\",\"+position.longitude ,\n                    \"distance\": service.rangeDistance,\n                    \"fields\":[\"hours\",\"description\",\"name\", \"location\", \"picture.type(large)\"]},\n                    function(response) {\n                        if (!response || response.error) {\n                            deferred.reject('An error occurred while retrieving data');\n                        } else {\n                            deferred.resolve(response);\n                        }\n                    }\n                );\n            });\n            return deferred.promise;\n        }\n\n        function getCafes() {\n            var deferred = $q.defer();\n            GeolocationService.actualPosition()\n            .then(function(position){\n                FB.api(\n                    '/search',\n                    'GET',\n                    {\"q\":\"cafe\",\n                    \"type\":\"place\",\n                    \"center\": position.latitude+\",\"+position.longitude ,\n                    \"distance\": service.rangeDistance,\n                    \"fields\":[\"hours\",\"description\",\"name\", \"location\", \"picture.type(large)\"]},\n                    function(response) {\n                        if (!response || response.error) {\n                            deferred.reject('An error occurred while retrieving data');\n                        } else {\n                            deferred.resolve(response);\n                        }\n                    }\n                );\n            });\n            return deferred.promise;\n        }\n\n        function getClubs(){    /// danceing party\n            var queries = ['club', 'disco', 'nightclub', 'dance', 'discotheque', 'party'];\n            var fullArray = [];\n            var deferred = $q.defer();\n            GeolocationService.actualPosition()\n            .then(function(position){\n                angular.forEach(queries, function(query){\n                    FB.api(\n                        '/search',\n                        'GET', {\n                        \"q\": query,\n                        \"type\":\"place\",\n                        \"center\": position.latitude+\",\"+position.longitude ,\n                        \"distance\": service.rangeDistance,\n                        \"fields\":[\"hours\",\"description\",\"name\", \"location\", \"picture.type(large)\"]\n                        },\n                        function(response) {\n                            if (!response || response.error) {\n                                deferred.reject('An error occurred while retrieving data');\n                            } else {\n                                fullArray.push(response);\n                                deferred.resolve(response);\n                            }\n                        }\n                    );\n                });\n            });\n            return deferred.promise;\n        }\n\n        function getHotels(){\n            var deferred = $q.defer();\n            GeolocationService.actualPosition()\n            .then(function(position){\n                FB.api(\n                    '/search',\n                    'GET',\n                    {\"q\":\"hotel\",\n                    \"type\":\"place\",\n                    \"center\": position.latitude+\",\"+position.longitude ,\n                    \"distance\": service.rangeDistance,\n                    \"fields\":[\"hours\",\"description\",\"name\", \"location\", \"picture.type(large)\"]},\n                    function(response) {\n                        if (!response || response.error) {\n                            deferred.reject('An error occurred while retrieving data');\n                        } else {\n                            deferred.resolve(response);\n                        }\n                    }\n                );\n            });\n            return deferred.promise;\n        }\n\n        function getRestaurants(){\n            var deferred = $q.defer();\n            GeolocationService.actualPosition()\n            .then(function(position){\n                FB.api(\n                    '/search',\n                    'GET',\n                    {\"q\":\"restaurant\",\n                    \"type\":\"place\",\n                    \"center\": position.latitude+\",\"+position.longitude ,\n                    \"distance\": service.rangeDistance,\n                    \"fields\":[\"hours\",\"description\",\"name\", \"location\", \"picture.type(large)\"]},\n                    function(response) {\n                        if (!response || response.error) {\n                            deferred.reject('An error occurred while retrieving data');\n                        } else {\n                            deferred.resolve(response);\n                        }\n                    }\n                );\n            });\n            return deferred.promise;\n        }\n\n        function getUserData() {\n            var deferred = $q.defer();\n            FB.api(\n                '/me',\n                'GET',\n                {\"fields\":[\"id\",\"name\",\"picture\",\"first_name\",\"last_name\",\"hometown\",\"location\",\"link\"]},\n                function(response) {\n                    if (!response || response.error) {\n                        deferred.reject('An error occurred while retrieving data');\n                        logout(response.error.message);\n                        errorHandling.error('Something goes wrong...');\n                    } else {\n                        deferred.resolve(response);\n                    }\n                }\n            );\n            deferred.promise.then(function(response){\n                var user = saveUserData(response);\n                service.loginResponse = 'Thanks for logging in, ' + response.name + '!';\n                return user;\n            }).then(function(userObj){\n                firebaseService.addUser(userObj);\n                loadUserPlaces(userObj);\n            });\n            return deferred.promise;\n        }\n\n        function loadUserPlaces(userObj) {\n            firebaseService.getFavoritePlaces(userObj)\n                .then(function(result){\n                    cacheService.saveFavorite(result);\n                });\n            firebaseService.getExcursionPlaces(userObj)\n                .then(function(result){\n                    cacheService.saveTrip(result);\n                });\n        }\n\n        function saveUserData(data){\n            userService.user.id = data.id;\n            userService.user.first_name = data.first_name;\n            userService.user.last_name = data.last_name;\n            userService.user.full_name = data.name;\n            userService.user.profile_link = data.link;\n            userService.user.picture = data.picture.data.url;\n            userService.user.happy = true;\n\n            return userService.user;\n        }\n\n        function checkLoginState() {\n            var deferred = $q.defer();\n            FB.getLoginStatus(function(response) {\n                statusChangeCallback(response)\n                .then(function(){\n                    deferred.resolve();\n                })\n                .catch(function(){\n                    errorHandling.warnFunc('Please login to continue.');\n                    deferred.reject();\n                });\n            });\n            return deferred.promise;\n        }\n\n        function statusChangeCallback(response) {\n            var deferred = $q.defer();\n            if (response.status === 'connected') {\n                if(!userService.user.happy){\n                    getUserData().then(function(){\n                        deferred.resolve();\n                    });\n                }else{ deferred.resolve(); }\n\n                userService.user.connected = true;\n            } else {\n                $window.location.href = '#/';\n                deferred.reject();\n            }\n            return deferred.promise;\n        }\n\n        function login(){\n            FB.login(function(response){\n                if (response.status === 'connected') {\n                    statusChangeCallback(response);\n                }\n            });\n        }\n\n        function logout(feed) {\n            var feedback = feed || 'You have been logged out.';\n            FB.logout(function() {\n                $timeout(function(){\n                    userService.user.connected = false;\n                    $window.location.href = '#/';\n                    errorHandling.infoFunc(feedback);\n                },0);\n            });\n        }\n\n    }\n\n})();\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .factory('errorHandling', errorHandling);\n\n    errorHandling.$inject = ['toastr'];\n\n    function errorHandling(toastr) {\n        var catcher = {\n            errorFunc: errorFunc,\n            infoFunc: infoFunc,\n            warnFunc: warnFunc,\n            successFunc: successFunc\n        };\n        return catcher;\n\n        function errorFunc(msg) {\n            toastr.error(msg, \"Error occurred!\");\n        }\n\n        function infoFunc(msg) {\n            toastr.info(msg, \"Information\");\n        }\n\n        function warnFunc(msg) {\n            toastr.warning(msg, \"Warning\");\n        }\n\n        function successFunc(msg) {\n            toastr.success(msg, \"Success\");\n        }\n    }\n\n\n})();\n\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .service('cacheService', cacheService);\n\n    cacheService.$inject = ['categories'];\n\n    function cacheService(categories) {\n\n        var self = this;\n        self.list = {};\n        self.favorite = [];\n        self.excursion = [];\n\n        self.getCache = getCache;\n        self.saveCache = saveCache;\n        self.clearCache = clearCache;\n        self.saveFavorite = saveFavorite;\n        self.getFavorite = getFavorite;\n        self.getTrip = getTrip;\n        self.saveTrip = saveTrip;\n\n        clearCache();\n\n        function getFavorite() {\n            return self.favorite;\n        }\n\n        function saveFavorite(favoriteArr) {\n            self.favorite = favoriteArr;\n        }\n\n        function getTrip() {\n            return self.excursion;\n        }\n\n        function saveTrip(tripArr) {\n            self.excursion = tripArr;\n        }\n\n        function saveCache(category, list){\n            self.list[category] = list;\n        }\n\n        function getCache() {\n            return self.list;\n        }\n\n        function clearCache() {\n            categories.forEach(function(item){\n                self.list[item] = [];\n            });\n        }\n\n    }\n\n})();\n\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('project')\r\n        .factory('httpInterceptor', function ($q, $rootScope) {\r\n\r\n            var numLoadings = 0;\r\n            return {\r\n                request: function (config) {\r\n                    numLoadings++;\r\n                    $rootScope.$broadcast(\"loader_show\");\r\n                    return config || $q.when(config)\r\n                },\r\n                response: function (response) {\r\n                    if ((--numLoadings) === 0) {\r\n                        $rootScope.$broadcast(\"loader_hide\");\r\n                    }\r\n                    return response || $q.when(response);\r\n                },\r\n                responseError: function (response) {\r\n                    if (!(--numLoadings)) {\r\n                        $rootScope.$broadcast(\"loader_hide\");\r\n                    }\r\n                    return $q.reject(response);\r\n                }\r\n            };\r\n        })\r\n        .config(function ($httpProvider) {\r\n            $httpProvider.interceptors.push('httpInterceptor');\r\n        });\r\n})();\r\n\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('project')\r\n        .directive(\"spinner\", spinner);\r\n\r\n        function spinner() {\r\n            return {\r\n                restrict: 'A',\r\n                link: function($scope, element) {\r\n                    $scope.$on(\"loader_show\", function () {\r\n                        return element.removeClass('hide');\r\n                    });\r\n                    return $scope.$on(\"loader_hide\", function () {\r\n                        return element.addClass('hide');\r\n                    });\r\n                }\r\n            }\r\n        }\r\n})();\r\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .directive('ceNgViewContainer', ceNgViewContainer);\n\n    function ceNgViewContainer() {\n        var directive = {\n            restrict: 'E',\n            templateUrl: 'app/components/ngviewContainer/ngviewContainer.html'\n        };\n        return directive;\n    }\n\n})();\n\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('project')\r\n        .directive('ceNavBar', ceNavBar);\r\n\r\n    function ceNavBar() {\r\n        var directive = {\r\n            restrict: 'E',\r\n            templateUrl: 'app/components/navbar/navbar.html',\r\n            controller: 'navBarController',\r\n            controllerAs: 'navBarVm'\r\n        };\r\n        return directive;\r\n    }\r\n\r\n})();\r\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .controller('navBarController', navBarController);\n\n    navBarController.$inject = ['userService', 'FacebookService'];\n\n    function navBarController(userService, FacebookService){\n        var navBarVm = this;\n\n        navBarVm.user = userService.user;\n        navBarVm.logoutFB = logoutFB;\n\n        function logoutFB() {\n            FacebookService.logout();\n        }\n    }\n\n\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .directive('ceGoogleMapRoutes', ceGoogleMapRoutes);\n\n    ceGoogleMapRoutes.$inject = ['GeolocationService', '$localStorage', 'cacheService'];\n\n    function ceGoogleMapRoutes(GeolocationService, $localStorage, cacheService) {\n        var directive = {\n            restrict: 'E',\n            templateUrl: 'app/components/googleMapRoutes/googleMapRoutes.html',\n            scope: {\n                favchanged: '='\n            },\n            link: linkFunc\n        };\n        return directive;\n\n        function linkFunc(scope){\n\n            scope.$watch('favchanged', initMap, true);\n            scope.distance = {};\n\n            function initMap() {\n                GeolocationService.actualPosition()\n                .then(function(actualPos){\n                    var pointA = new google.maps.LatLng(actualPos.latitude, actualPos.longitude),\n\n                        myOptions = {\n                            zoom: 18,\n                            center: pointA\n                        },\n\n                        map = new google.maps.Map(document.getElementById(\"map_favorite\"), myOptions),\n                        directionsService = new google.maps.DirectionsService,\n                        directionsDisplay = new google.maps.DirectionsRenderer({\n                            map: map\n                        });\n\n                    return [directionsService, directionsDisplay, pointA];\n                }).then(function(result){\n                    calculateAndDisplayRoute(result[0],result[1],result[2]);\n\n                    document.getElementById('mode').addEventListener('change', function() {\n                        calculateAndDisplayRoute(result[0],result[1],result[2]);\n                    });\n                });\n\n                function calculateAndDisplayRoute(directionsService, directionsDisplay, pointA) {\n                    var selectedMode = document.getElementById('mode').value;\n                    var approvedToShow = [],\n                        endLocation, PointB,\n                        waypoints = [];\n\n                    cacheService.excursion.forEach(function(element){\n                        if(element.showOnMap) {\n                            approvedToShow.push(element);\n                        }\n                    });\n\n                    endLocation = approvedToShow[approvedToShow.length-1];\n\n                    if (endLocation) {\n                        PointB = new google.maps.LatLng(endLocation.location.latitude, endLocation.location.longitude)\n                    } else {\n                        PointB = ''\n                    }\n\n                    approvedToShow.forEach(function(element) {\n                        waypoints.push({\n                            location: new google.maps.LatLng(element.location.latitude, element.location.longitude)\n                        });\n                    });\n\n                    waypoints.pop();\n\n                    directionsService.route({\n                        origin: pointA,\n                        destination: PointB,\n                        waypoints: waypoints,\n                        avoidTolls: true,\n                        avoidHighways: false,\n                        travelMode: google.maps.TravelMode[selectedMode]\n                    }, function (response, status) {\n                        if (status == google.maps.DirectionsStatus.OK) {\n                            calculateDistance(response.routes[0].legs);\n                            directionsDisplay.setDirections(response);\n                        }\n                    });\n                }\n            }\n\n            function calculateDistance(response) {\n                var tempDist = null, tempDur = null;\n                response.forEach(function(element) {\n                    tempDist += element.distance.value;\n                    tempDur += element.duration.value;\n                });\n                scope.distance.value = Math.round((tempDist/1000) * 100) / 100 + \" km\";\n                scope.distance.duration = Math.round((tempDur/60) * 100) / 100 + \"min\";\n            }\n        }\n    }\n\n})();\n\n\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('project')\r\n        .directive('ceGoogleMapPosition', ceGoogleMapPosition);\r\n\r\n    ceGoogleMapPosition.$inject = ['GeolocationService', 'cacheService'];\r\n\r\n    function ceGoogleMapPosition(GeolocationService, cacheService) {\r\n        var directive = {\r\n            restrict: 'E',\r\n            templateUrl: 'app/components/googleMapPosition/googleMapPosition.html',\r\n\r\n            link: function(scope){\r\n\r\n                GeolocationService.actualPosition()\r\n                .then(function(position){\r\n                    scope.actualCity = geoplugin_city();\r\n                    scope.actualCountry = geoplugin_countryName();\r\n\r\n                    var map = new google.maps.Map(document.getElementById(\"map_canvas\"), {\r\n                        zoom: 12,\r\n                        center: new google.maps.LatLng(position.latitude, position.longitude),\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP\r\n                    });\r\n\r\n                    var myMarker = new google.maps.Marker({\r\n                        position: new google.maps.LatLng(position.latitude, position.longitude),\r\n                        draggable: true\r\n                    });\r\n\r\n                    google.maps.event.addListener(myMarker, 'dragend', function (evt) {\r\n                        GeolocationService.markerPosition(evt.latLng.lat().toFixed(3), evt.latLng.lng().toFixed(3));\r\n                        cacheService.clearCache();\r\n                    });\r\n\r\n                    map.setCenter(myMarker.position);\r\n                    myMarker.setMap(map);\r\n                });\r\n            }\r\n        };\r\n        return directive;\r\n    }\r\n\r\n})();\r\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .directive('ceGoogleMap', ceGoogleMap);\n\n    ceGoogleMap.$inject = ['GeolocationService'];\n\n    function ceGoogleMap(GeolocationService) {\n        var directive = {\n            restrict: 'E',\n            templateUrl: 'app/components/googleMap/googlemap.html',\n            scope: {\n                position: '='\n            },\n            link: linkFunc\n        };\n        return directive;\n\n        function linkFunc(scope){\n\n            scope.$watch('position', initMap, true);\n\n            scope.distance = {};\n\n            function initMap(position) {\n                GeolocationService.actualPosition()\n                .then(function(actualPos){\n                    var pointA = new google.maps.LatLng(actualPos.latitude, actualPos.longitude),\n                        pointB = new google.maps.LatLng(position.lat,position.lng),\n\n                        myOptions = {\n                            zoom: 18,\n                            center: pointA\n                        },\n\n                        map = new google.maps.Map(document.getElementById(\"map\"), myOptions),\n                        directionsService = new google.maps.DirectionsService,\n                        directionsDisplay = new google.maps.DirectionsRenderer({\n                            map: map\n                        });\n\n                    // get route from A to B\n                    return [directionsService, directionsDisplay, pointA, pointB];\n                }).then(function(result){\n                    calculateAndDisplayRoute(result[0],result[1],result[2],result[3]);\n\n                    document.getElementById('mode').addEventListener('change', function() {\n                        calculateAndDisplayRoute(result[0],result[1],result[2],result[3]);\n                    });\n                });\n\n                function calculateAndDisplayRoute(directionsService, directionsDisplay, pointA, pointB) {\n                    var selectedMode = document.getElementById('mode').value;\n                    directionsService.route({\n                        origin: pointA,\n                        destination: pointB,\n                        avoidTolls: true,\n                        avoidHighways: false,\n                        travelMode: google.maps.TravelMode[selectedMode]\n                    }, function (response, status) {\n                        if (status == google.maps.DirectionsStatus.OK) {\n                            scope.distance.value = response.routes[0].legs[0].distance.text;\n                            scope.distance.duration = response.routes[0].legs[0].duration.text;\n                            directionsDisplay.setDirections(response);\n                        }\n                    });\n                }\n            }\n        }\n    }\n\n})();\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .directive('ceFooter', ceFooter);\n\n    ceFooter.$inject = [];\n\n    function ceFooter() {\n        var directive = {\n            restrict: 'E',\n            templateUrl: 'app/components/footer/footer.html',\n            controller: ['$scope', '$anchorScroll', function($scope, $anchorScroll) {\n                $scope.moveToTop = function() {\n                    $anchorScroll();\n                };\n            }]\n        }\n        return directive;\n    }\n\n})();\n\n(function(){\r\n    'use strict';\r\n\r\n    angular\r\n        .module('project')\r\n        .directive('ceElementComments', ceElementComments);\r\n\r\n    function ceElementComments() {\r\n        var directive = {\r\n            restrict: 'E',\r\n            templateUrl: 'app/components/comments/comments.html',\r\n            controller: 'ElementCommentsController',\r\n            controllerAs: 'elemComVm'\r\n        };\r\n        return directive;\r\n    }\r\n\r\n})();\r\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .controller('ElementCommentsController', ElementCommentsController);\n\n    ElementCommentsController.$inject = ['userService', '$routeParams', 'firebaseService'];\n\n    function ElementCommentsController(userService, $routeParams, firebaseService) {\n        var elemComVm = this;\n\n        elemComVm.actualPlace = $routeParams.element;\n        elemComVm.userInfo = userService.user;\n        elemComVm.showComments = showComments;\n        elemComVm.isComment = false;\n\n        elemComVm.readOnly = true;\n        elemComVm.commentRate = 3;\n        elemComVm.sendComment = sendComment;\n        elemComVm.commentsArray = [];\n        elemComVm.initForm = initForm;\n        elemComVm.resetForm = resetForm;\n        elemComVm.makeDate = makeDate;\n        elemComVm.submitted=true;\n        elemComVm.readyToUse = true;\n\n        activate();\n\n        function activate() {\n           initForm();\n        }\n\n        function resetForm(form) {\n            form.$setPristine();\n            form.$setUntouched();\n        }\n\n        function initForm() {\n            elemComVm.comment = {\n                text: '',\n                rate: 0,\n                surname: '',\n                name: ''\n            };\n        }\n\n        function makeDate() {\n            var d = new Date(),\n                year = d.getFullYear(),\n                month = d.getMonth() + 1,\n                day = d.getDate(),\n                fullDate = year+'-'+month+'-'+day;\n\n            return fullDate;\n        }\n\n        function sendComment(comment) {\n            comment['picture'] = userService.user.picture;\n            comment['date'] = makeDate();\n            elemComVm.submitted=false;\n\n            firebaseService.addComment(elemComVm.actualPlace, comment);\n            initForm();\n            elemComVm.readyToUse = false;\n        }\n\n        function showComments() {\n            if(!elemComVm.isComment){\n                firebaseService.getPlaceComments(elemComVm.actualPlace)\n                    .then(function(arr){\n                        elemComVm.commentsArray = arr;\n                    });\n                elemComVm.isComment = true;\n            }else{\n                elemComVm.isComment = false;\n            }\n        }\n    }\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .controller('TripPlannerController', TripPlannerController);\n\n    TripPlannerController.$inject = ['FacebookService', 'userService', 'googleMapPositionService', 'cacheService', 'firebaseService'];\n\n    function TripPlannerController(FacebookService, userService, googleMapPositionService, cacheService, firebaseService) {\n        var tripVm = this;\n\n        tripVm.excursion = [];\n        tripVm.user = userService.user;\n        tripVm.removeFromTrip = removeFromTrip;\n        tripVm.googleMapApiReady = false;\n\n        tripVm.onDropComplete = onDropComplete;\n        tripVm.addToMap = addToMap;\n\n        tripVm.limitToCheck = 9;\n        tripVm.checkDisable = checkDisable;\n\n        activate();\n\n        function activate() {\n            FacebookService.checkLoginState()\n                .then(function(){\n                    initGoogleMapApi();\n                    getExcursionPlaces();\n                });\n        }\n\n        function getExcursionPlaces() {\n            if(cacheService.excursion.length === 0){\n                firebaseService.getExcursionPlaces(userService.user)\n                    .then(function(result){\n                        tripVm.excursion = result;\n                        cacheService.saveTrip(result);\n                    });\n            } else {\n                tripVm.excursion = cacheService.getTrip();\n            }\n        }\n\n        function initGoogleMapApi() {\n            googleMapPositionService.onReady()\n            .then(function(){\n                tripVm.googleMapApiReady = true;\n            });\n        }\n\n        function removeFromTrip(item) {\n            firebaseService.removePlaceFromTrip(userService.user, item);\n        }\n\n        function onDropComplete(index, obj){\n            var otherObj = tripVm.excursion[index],\n                otherIndex = tripVm.excursion.indexOf(obj);\n            tripVm.excursion[index] = obj;\n            tripVm.excursion[otherIndex] = otherObj;\n        }\n\n        function addToMap(id) {\n            tripVm.excursion.forEach(function(element) {\n                if(element.id === id && element.trip){\n                    if(element.showOnMap){\n                        element.showOnMap = false;\n                    } else {\n                        element.showOnMap = true;\n                    }\n                    firebaseService.updateTripElement(clearObjBeforeUpdate(element));\n                }\n            });\n        }\n\n        function checkDisable(id){\n            var onMap = [];\n            tripVm.excursion.forEach(function(element) {\n                if(element.showOnMap) { onMap.push(element.id); }\n            });\n            return tripVm.limitToCheck === onMap.length && !onMap.includes(id);\n        }\n\n        function clearObjBeforeUpdate(obj) {\n            var cleaned = {\n                fireId: obj.$id,\n                category: obj.category,\n                id: obj.id,\n                location: obj.location,\n                name: obj.name,\n                picture: obj.picture,\n                showOnMap: obj.showOnMap || false,\n                trip: obj.trip\n            };\n            return cleaned;\n        }\n\n    }\n\n})();\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .filter('cut', cut);\n\n    function cut() {\n        return function (value, wordwise, max, tail) {\n            if (!value) return '';\n\n            max = parseInt(max, 10);\n            if (!max) return value;\n            if (value.length <= max) return value;\n\n            value = value.substr(0, max);\n            if (wordwise) {\n                var lastspace = value.lastIndexOf(' ');\n                if (lastspace != -1) {\n                  if (value.charAt(lastspace-1) == '.' || value.charAt(lastspace-1) == ',') {\n                    lastspace = lastspace - 1;\n                  }\n                  value = value.substr(0, lastspace);\n                }\n            }\n\n            return value + (tail || ' ');\n        };\n    }\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .controller('ShowResultsController', ShowResultsController);\n\n    ShowResultsController.$inject = ['$q', 'categories', '$location', '$window', 'errorHandling', 'cacheService', 'FacebookService', '$routeParams'];\n\n    function ShowResultsController($q, categories, $location, $window, errorHandling, cacheService, FacebookService, $routeParams) {\n        var resultVm = this;\n\n        resultVm.listByCategory = {};\n        resultVm.actualCategory = '';\n        resultVm.loadMoreData = loadMoreData;\n        resultVm.pagingNext = '';\n\n        activate();\n\n        resultVm.numberPerPage = 9;\n        resultVm.maxSize = 5;\n        resultVm.totalItems = null;\n        resultVm.currentPage = 1;\n\n        function activate() {\n            checkActualCategory($routeParams.item)\n                .then(function(route){\n                    resultVm.actualCategory = route;\n                    getCacheService();\n                    resultVm.totalItems = resultVm.listByCategory[route].length;\n                    checkFBState();\n                })\n                .catch(function(response){\n                    errorHandling.errorFunc(response);\n                });\n        }\n\n        function checkActualCategory(route){\n            var deferred = $q.defer();\n            if (categories.indexOf(route) > -1) {\n                deferred.resolve(route);\n            } else {\n                //$location.path('category'); dlaczemu po tym przekierowaniu robi milion zapytan do FBapi :C idk\n                deferred.reject('Actual category didnt exist in our service, please change category.');\n            }\n            return deferred.promise;\n        }\n\n        function checkFBState() {\n            FacebookService.checkLoginState()\n                .then(function(){\n                    routeTypeRequest();\n                });\n        }\n\n        function routeTypeRequest() {\n            var capitalLetter = resultVm.actualCategory.charAt(0).toUpperCase() + resultVm.actualCategory.slice(1);\n            var method = 'get'+capitalLetter+'s';\n\n            resultVm.route = resultVm.actualCategory;\n            if(resultVm.listByCategory[resultVm.actualCategory].length === 0){\n                FacebookService[method]()\n                    .then( function(response){\n                        loadCheckSave(response);\n                    })\n                    .catch(function(err){\n                        errorHandling.errorFunc(err);\n                    });\n            }\n        }\n\n        function loadMoreData() {\n            if(typeof resultVm.pagingNext != 'undefined') {\n                FacebookService.getMoreData(resultVm.pagingNext)\n                    .then(function(response){\n                        loadCheckSave(response);\n                    })\n                    .catch(function(err){\n                        errorHandling.errorFunc(err);\n                    });\n            }\n        }\n\n        function loadCheckSave(response){\n            resultVm.listByCategory[resultVm.actualCategory] = resultVm.listByCategory[resultVm.actualCategory].concat(response.data);\n            cacheService.saveCache(resultVm.actualCategory, resultVm.listByCategory[resultVm.actualCategory]);\n            resultVm.totalItems = resultVm.listByCategory[resultVm.actualCategory].length;\n            if(response.paging){\n                resultVm.pagingNext = response.paging.next;\n            }else{ resultVm.pagingNext = undefined; }\n        }\n\n        function getCacheService() {\n            resultVm.listByCategory = cacheService.getCache();\n\n            angular.forEach(resultVm.listByCategory, function(awesomeThing) {\n                awesomeThing.rank = Math.random();\n            });\n        }\n\n    }\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .controller('MainController', MainController);\n\n    MainController.$inject = ['$scope', 'FacebookService', 'userService', 'googleMapPositionService'];\n\n    function MainController($scope, FacebookService, userService, googleMapPositionService) {\n        var mainVm = this;\n\n        mainVm.list = [];\n\n        mainVm.logInFB = logInFB;\n        mainVm.user = userService.user;\n        mainVm.fbService = FacebookService;\n        mainVm.googleMapApiReady = false;\n\n        activate();\n\n        function activate() {\n            FacebookService.checkLoginState();\n            initGoogleMapApi();\n        }\n\n        function initGoogleMapApi() {\n            googleMapPositionService.onReady()\n            .then(function(){\n                mainVm.googleMapApiReady = true;\n            });\n        }\n\n        function logInFB() {\n            FacebookService.login();\n        }\n\n    }\n\n})();\n\n\n(function() {\n    'use strict';\n\n    angular\n        .module('project')\n        .controller('FavoritePlacesController', FavoritePlacesController);\n\n    FavoritePlacesController.$inject = ['$rootScope', 'cacheService', 'FacebookService', 'userService', 'googleMapPositionService', 'firebaseService'];\n\n    function FavoritePlacesController($rootScope, cacheService, FacebookService, userService, googleMapPositionService, firebaseService) {\n        var favoriteVm = this;\n\n        favoriteVm.favoriteList = [];\n        favoriteVm.user = userService.user;\n\n        favoriteVm.removeFavorite = removeFavorite;\n        favoriteVm.getFavoritePlaces = getFavoritePlaces;\n\n        activate();\n\n        function activate() {\n            FacebookService.checkLoginState()\n                .then(function(){\n                    getFavoritePlaces();\n                });\n        }\n\n        function getFavoritePlaces() {\n            if(cacheService.favorite.length === 0){\n                firebaseService.getFavoritePlaces(userService.user)\n                    .then(function(result){\n                        favoriteVm.favoriteList = result;\n                        cacheService.saveFavorite(result);\n                    });\n            } else {\n                favoriteVm.favoriteList = cacheService.getFavorite();\n            }\n        }\n\n        function removeFavorite(item) {\n            firebaseService.removeFavoritePlace(userService.user, item);\n        }\n\n    }\n\n})();\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .controller('ElementInfoController', ElementInfoController);\n\n    ElementInfoController.$inject = ['cacheService', '$routeParams', 'errorHandling', 'FacebookService', 'userService', 'googleMapPositionService', 'firebaseService'];\n\n    function ElementInfoController(cacheService, $routeParams, errorHandling, FacebookService, userService, googleMapPositionService, firebaseService) {\n        var infoVm = this;\n\n        infoVm.elemInfo = [];\n\n        infoVm.actualCategory = $routeParams.item;\n        infoVm.position = {};\n        infoVm.googleMapApiReady = false;\n        infoVm.isPosts = false;\n        infoVm.showPosts = showPosts;\n\n        infoVm.addFavorite = addFavorite;\n        infoVm.addToTrip = addToTrip;\n        infoVm.favoriteBtnState = false;\n        infoVm.tripBtnState = false;\n\n        activate();\n\n        function activate() {\n            checkFBState();\n            initGoogleMapApi();\n        }\n\n        function showPosts(){\n            if(!infoVm.isPosts){\n                infoVm.isPosts = true;\n                if(typeof infoVm.elemInfo.posts == 'undefined' || infoVm.elemInfo.posts.length == 0){\n                    FacebookService.getComments($routeParams.element)\n                        .then(function(response){\n                            infoVm.elemInfo['posts'] = response;\n                        })\n                        .catch(function(err){\n                            errorHandling.errorFunc(err);\n                        });\n                }\n            }else{\n                infoVm.isPosts = false;\n            }\n        }\n\n        function initGoogleMapApi() {\n            googleMapPositionService.onReady().then(function(){\n                infoVm.googleMapApiReady = true;\n            });\n        }\n\n        function checkFBState() {\n            FacebookService.checkLoginState()\n                .then(function(){\n                    detailsRequest();\n                    checkFavoriteState($routeParams.element);\n                    checkTripState($routeParams.element);\n                });\n        }\n\n        function detailsRequest() {\n            FacebookService.getDetails($routeParams.element)\n                .then(function(response){\n                    infoVm.elemInfo = response;\n                    return response;\n                })\n                .then(function(data){\n                    infoVm.position.lng = data.location.longitude;\n                    infoVm.position.lat = data.location.latitude;\n                })\n                .catch(function(err){\n                    errorHandling.errorFunc(err);\n                });\n        }\n\n        function addToTrip(item) {\n            item.trip = true;\n            item.showOnMap = false;\n            infoVm.tripBtnState = true;\n            firebaseService.addToTrip(item);\n        }\n\n        function addFavorite(item) {\n            item.favorite = true;\n            infoVm.favoriteBtnState = true;\n            firebaseService.addToFavorite(item);\n        }\n\n        function checkFavoriteState(itemId) {\n            cacheService.favorite.forEach(function(element) {\n                if (element.id === itemId && element.favorite) {\n                    infoVm.favoriteBtnState = true;\n                }\n            });\n        }\n\n        function checkTripState(itemId) {\n            cacheService.excursion.forEach(function(element) {\n                if (element.id === itemId && element.trip) {\n                    infoVm.tripBtnState = true;\n                }\n            });\n        }\n\n    }\n\n})();\n\n(function(){\n    'use strict';\n\n    angular\n        .module('project')\n        .controller('CategoryController', CategoryController);\n\n    CategoryController.$inject = ['FacebookService', 'errorHandling', 'categories', 'cacheService'];\n\n    function CategoryController(FacebookService, errorHandling, categories, cacheService) {\n        var categoryVm = this;\n\n        categoryVm.rangeModel = FacebookService.rangeDistance;\n        categoryVm.categories = categories;\n        categoryVm.setRange = setRange;\n        categoryVm.ready = false;\n        categoryVm.findQuery = findQuery;\n\n        activate();\n\n        function activate() {\n            FacebookService.checkLoginState()\n                .then(function(){\n                    categoryVm.ready = true;\n                });\n        }\n\n        function setRange() {\n            cacheService.clearCache();\n            FacebookService.setRange(categoryVm.rangeModel);\n        }\n\n        function findQuery() {\n\n        }\n    }\n\n})();\n\n(function(){\n    'use strict';\n\n    window.fbAsyncInit = function() {\n        FB.init({\n            appId: '1174712949207842',\n            cookie: true,  // to allow the server to access the session\n            status: true,\n            xfbml: true,  // parse social plugins on this page\n            version: 'v2.5' // use graph api version 2.5\n        });\n\n        angular.element(document).ready(function() {\n            angular.bootstrap(document, ['project']);\n        });\n    };\n\n    // Load the SDK asynchronously\n    (function(d, s, id) {\n        var js, fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) return;\n        js = d.createElement(s); js.id = id;\n        js.src = \"//connect.facebook.net/en_US/sdk.js\";\n        fjs.parentNode.insertBefore(js, fjs);\n    }(document, 'script', 'facebook-jssdk'));\n\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n    .module('project')\n    .config(routeConfig);\n\n    function routeConfig($routeProvider) {\n        $routeProvider\n        .when('/', {\n            templateUrl: 'app/main/main.html',\n            controller: 'MainController',\n            controllerAs: 'mainVm'\n        })\n        .when('/category', {\n            templateUrl: 'app/category/category.html',\n            controller: 'CategoryController',\n            controllerAs: 'categoryVm'\n        })\n        .when('/category/:item?', {\n            templateUrl: 'app/showResults/showResults.html',\n            controller: 'ShowResultsController',\n            controllerAs: 'resultVm'\n        })\n        .when('/category/:item?/:element?', {\n            templateUrl: 'app/elementInfo/elementInfo.html',\n            controller: 'ElementInfoController',\n            controllerAs: 'infoVm'\n        })\n        .when('/favorite', {\n            templateUrl: 'app/favoritePlaces/favorite.html',\n            controller: 'FavoritePlacesController',\n            controllerAs: 'favoriteVm'\n        })\n        .when('/trip', {\n            templateUrl: 'app/tripPlanner/tripPlanner.html',\n            controller: 'TripPlannerController',\n            controllerAs: 'tripVm'\n        })\n        .when('/query', {\n            templateUrl: 'app/findQuery/findQuery.html',\n            controller: 'findQueryController',\n            controllerAs: 'queryVm'\n        })\n        .otherwise({\n            redirectTo: '/'\n        });\n  }\n\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('project')\r\n    .constant('categories', ['museum', 'bar', 'cafe', 'club', 'hotel', 'restaurant'])\r\n    .constant('firebaseUrl', 'https://cityexplorer.firebaseio.com/');\r\n\r\n})();\r\n\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('project')\r\n        .config(config);\r\n\r\n    config.$inject = ['$logProvider', 'toastrConfig'];\r\n\r\n    function config($logProvider, toastrConfig) {\r\n        // Enable log\r\n        $logProvider.debugEnabled(true);\r\n\r\n        // Set options third-party lib\r\n        toastrConfig.allowHtml = true;\r\n        toastrConfig.timeOut = 3000;\r\n        toastrConfig.positionClass = 'toast-bottom-right';\r\n        toastrConfig.preventDuplicates = true;\r\n        toastrConfig.progressBar = true;\r\n    }\r\n\r\n})();\r\n\nangular.module(\"project\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/category/category.html\",\"<div class=\\\"container category-wrapper\\\"><div class=row><div class=\\\"category-info text-center\\\"><h1 class=h1-responsive>Select a category to see the results,<br>you can change the search area if necessary.</h1></div><div class=\\\"range-slider-wrapper card col-md-12\\\"><h1 class=h1-responsive>Change the search area</h1><input type=range min=100 max=2000 step=100 ng-model=categoryVm.rangeModel ng-change=categoryVm.setRange()><h2 class=h2-responsive>{{categoryVm.rangeModel}} meters</h2></div><div class=category-wrapper__items><div class=\\\"col-sm-6 col-md-4\\\" ng-if=categoryVm.ready ng-repeat=\\\"item in categoryVm.categories\\\"><div class=\\\"card hoverable\\\"><div class=card-image><div class=\\\"view overlay hm-white-slight z-depth-1\\\"><img ng-src=../../assets/images/{{item}}.jpg class=img-responsive alt=\\\"\\\"> <a ng-href=#/category/{{item}}><div class=\\\"mask waves-effect\\\"></div></a></div></div><a ng-href=#/category/{{item}}><div class=card__content><h1 class=\\\"h1-responsive vartical-align\\\">{{item}}</h1></div></a></div></div></div><div class=\\\"query-wrapper md-form card col-md-12\\\"><h1 class=h1-responsive>Type query to find your results</h1><form ng-submit=categoryVm.findQuery()><input type=text id=form1 class=form-control ng-model=categoryVm.query> <button type=submit class=\\\"btn btn-primary btn-sm\\\">Find</button></form></div></div></div>\");\n$templateCache.put(\"app/elementInfo/elementInfo.html\",\"<div class=jumbotron><div class=\\\"filter {{infoVm.actualCategory}}\\\"><div class=item-header><h1>{{infoVm.elemInfo.name}}</h1></div><div class=\\\"row info-wrapper\\\"><div class=\\\"col-sm-12 col-md-6 info-block\\\"><div><img class=pull-right ng-src={{infoVm.elemInfo.picture.data.url}}><h3 class=likes>{{infoVm.elemInfo.engagement.social_sentence}}</h3><button type=button class=\\\"btn btn-success btn-xs\\\" ng-click=infoVm.addFavorite(infoVm.elemInfo) ng-if=!infoVm.favoriteBtnState>Add to favorite!</button> <button type=button class=\\\"btn btn-success btn-xs\\\" ng-click=infoVm.addToTrip(infoVm.elemInfo) ng-if=!infoVm.tripBtnState>Add to trip!</button><div class=caption><h3>{{infoVm.elemInfo.name}}</h3><h4>{{infoVm.elemInfo.category}}</h4><p>{{infoVm.elemInfo.about}}</p><p>Phone number: {{infoVm.elemInfo.phone}}</p><p>{{infoVm.elemInfo.price_range}}</p></div></div></div><div class=\\\"col-sm-12 col-md-6 map-block\\\" ng-if=infoVm.googleMapApiReady><ce-google-map position=infoVm.position></ce-google-map><div class=links><a ng-href={{infoVm.elemInfo.link}}>Facebook page</a><br><a href={{infoVm.elemInfo.website}}>Website</a></div></div><div class=\\\"col-sm-12 col-md-12 via-posts\\\"><h3 class=show-comments ng-click=infoVm.showPosts()><span class=caret></span> Show last posts <span class=caret></span></h3></div><div class=\\\"col-sm-12 col-md-12 via-posts\\\"><div class=page-post ng-repeat=\\\"post in infoVm.elemInfo.posts.data\\\" ng-if=infoVm.isPosts><div class=post><div class=post-img><img ng-src={{infoVm.elemInfo.picture.data.url}}></div><span class=post-author>{{infoVm.elemInfo.name}}</span><br><span class=post-date>{{post.created_time.substring(0,10)}}</span></div><div class=post-content><p>{{post.message}}</p></div></div></div></div><ce-element-comments></ce-element-comments></div></div>\");\n$templateCache.put(\"app/favoritePlaces/favorite.html\",\"<div class=\\\"container favorite-places\\\"><div class=\\\"favorite-places__description text-center\\\"><h1>Favorite places!</h1><h2>This list represents the places that you added in the past to favorites.</h2></div><ul class=\\\"collection favorite-places__list\\\"><li class=\\\"collection-item avatar\\\" ng-repeat=\\\"item in favoriteVm.favoriteList\\\"><div class=collection-item__body><img ng-src={{item.picture.data.url}} alt=\\\"\\\" class=circle><div class=title-wrapper><span class=title>{{ item.name }}</span><br><span>{{item.location.country}}, {{item.location.city}}, {{item.location.street}}</span></div><div class=\\\"secondary-content collection-item__body__buttons\\\"><a class=\\\"btn-floating btn-large waves-effect waves-light blue\\\" href=#/category//{{item.id}}><i class=\\\"fa fa-info\\\" aria-hidden=true></i> </a><a class=\\\"btn-floating btn-large waves-effect waves-light red\\\" ng-click=favoriteVm.removeFavorite(item)><i class=material-icons>delete_forever</i></a></div></div></li></ul></div>\");\n$templateCache.put(\"app/findQuery/findQuery.html\",\"\");\n$templateCache.put(\"app/main/main.html\",\"<!-- Carousel --><div id=carousel1 class=\\\"carousel slide carousel-fade hoverable\\\"><!-- Indicators --><ol class=carousel-indicators><li data-target=#carousel1 data-slide-to=0 class=active></li><li data-target=#carousel1 data-slide-to=1></li><li data-target=#carousel1 data-slide-to=2></li><li data-target=#carousel1 data-slide-to=3></li><li data-target=#carousel1 data-slide-to=4></li><li data-target=#carousel1 data-slide-to=5></li></ol><div class=\\\"landing-wrapper verticalcenter text-center\\\"><div class=landing-header><h1 class=h1-responsive>City explorer easily opens up possibilities.</h1><br><h2 class=h2-responsive>Log in with Facebook and search for places around you!</h2><div class=ladning-hash><h3 class=h3-responsive>#discover #find #explore #reveal #detect</h3></div></div></div><!-- Wrapper for slides --><div class=\\\"carousel-inner z-depth-2\\\" role=listbox><!-- First slide --><div class=\\\"item active\\\"><div class=\\\"view overlay hm-blue-slight\\\"><a><img src=../../assets/images/museum.jpg class=img-responsive alt=slide1><div class=\\\"mask waves-effect waves-light\\\"></div></a><div class=\\\"carousel-caption hidden-xs\\\"><div class=\\\"animated fadeInDown\\\"><h2 class=divider-new>MUSEUM</h2></div></div></div></div><!-- /.item --><!-- Second slide --><div class=item><div class=\\\"view overlay hm-blue-slight\\\"><a><img src=../../assets/images/bar.jpg class=img-responsive alt=slide2><div class=\\\"mask waves-effect waves-light\\\"></div></a><div class=\\\"carousel-caption hidden-xs\\\"><div class=\\\"animated fadeInDown\\\"><h2 class=divider-new>BAR</h2></div></div></div></div><!-- /.item --><!-- Third slide --><div class=item><div class=\\\"view overlay hm-blue-slight\\\"><a><img src=../../assets/images/cafe.jpg class=img-responsive alt=slide3><div class=\\\"mask waves-effect waves-light\\\"></div></a><div class=\\\"carousel-caption hidden-xs\\\"><div class=\\\"animated fadeInDown\\\"><h2 class=divider-new>CAFE</h2></div></div></div></div><!-- /.item --><!-- Fourth slide --><div class=item><div class=\\\"view overlay hm-blue-slight\\\"><a><img src=../../assets/images/club.jpg class=img-responsive alt=slide4><div class=\\\"mask waves-effect waves-light\\\"></div></a><div class=\\\"carousel-caption hidden-xs\\\"><div class=\\\"animated fadeInDown\\\"><h2 class=divider-new>CLUB</h2></div></div></div></div><!-- /.item --><!-- Fifth slide --><div class=item><div class=\\\"view overlay hm-blue-slight\\\"><a><img src=../../assets/images/hotel.jpg class=img-responsive alt=slide5><div class=\\\"mask waves-effect waves-light\\\"></div></a><div class=\\\"carousel-caption hidden-xs\\\"><div class=\\\"animated fadeInDown\\\"><h2 class=divider-new>HOTEL</h2></div></div></div></div><!-- /.item --><!-- Sixth slide --><div class=item><div class=\\\"view overlay hm-blue-slight\\\"><a><img src=../../assets/images/restaurant.jpg class=img-responsive alt=slide6><div class=\\\"mask waves-effect waves-light\\\"></div></a><div class=\\\"carousel-caption hidden-xs\\\"><div class=\\\"animated fadeInDown\\\"><h2 class=divider-new>RESTAURANT</h2></div></div></div></div><!-- /.item --></div><!-- /.carousel-inner --><!-- Controls --> <a class=\\\"left carousel-control new-control\\\" href=#carousel1 role=button data-slide=prev ng-non-bindable><span class=\\\"fa fa fa-angle-left waves-effect waves-light\\\"></span> <span class=sr-only>Previous</span> </a><a class=\\\"right carousel-control new-control\\\" href=#carousel1 role=button data-slide=next ng-non-bindable><span class=\\\"fa fa fa-angle-right waves-effect waves-light\\\"></span> <span class=sr-only>Next</span></a></div><!-- /.carousel --><div class=container><div class=main-wrapper><div id=login-status ng-if=mainVm.user.connected><h1 class=h1-responsive>{{mainVm.fbService.loginResponse}}</h1></div><div class=\\\"logout-status text-center\\\" ng-if=!mainVm.user.connected><h1 class=\\\"logout-status-header h1-responsive\\\">To get results and see the action you need to log in facebook account</h1><section class=login-form-wrap><h1>Sign in with facebook account</h1><form class=login-form><input type=submit value=Login ng-click=mainVm.logInFB()></form></section></div><div class=\\\"main-wrapper--info text-center\\\" ng-if=mainVm.user.connected><h2 class=h2-responsive>Now you can start exploring bunch of places around!</h2><h3 class=h3-responsive>1. If your current position agrees with a point on the map, select any of the tabs category below to get the results of your area</h3><h3 class=h3-responsive>2. If necessary, or you want to see the results from another location in the world, simply <b>drag and drop</b> the marker at any place that you interested in.</h3></div><div class=\\\"col-md-12 col-sm-12 mapper card-panel hoverable wow fadeInUp\\\" ng-if=mainVm.googleMapApiReady><ce-google-map-position></ce-google-map-position></div></div><div class=col-md-6><!--Image Card--><div class=\\\"card hoverable\\\"><div class=card-image><div class=\\\"view overlay hm-white-slight z-depth-1\\\"><img src=../../assets/images/museum.jpg class=img-responsive alt=\\\"\\\"> <a href=#/category/museum><div class=\\\"mask waves-effect\\\"></div></a></div></div><div class=card-content><h1 class=\\\"h1-responsive divider-new\\\">Museum</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id amet, quisquam modi nobis nostrum iusto incidunt dolore assumenda delectus officia quia, sequi eum perspiciatis architecto. Ullam voluptatum, facere nihil quidem.</p></div><!--Buttons--><div class=\\\"card-btn text-center\\\"><a href=#/category/museum class=\\\"museum btn btn-md waves-effect waves-light\\\" ng-if=mainVm.user.connected>See now!</a></div><!--/.Buttons--></div><!--Image Card--></div><div class=col-md-6><!--Image Card--><div class=\\\"card hoverable\\\"><div class=card-image><div class=\\\"view overlay hm-white-slight z-depth-1\\\"><img src=../../assets/images/bar.jpg class=img-responsive alt=\\\"\\\"> <a href=#/category/bar><div class=\\\"mask waves-effect\\\"></div></a></div></div><div class=card-content><h1 class=\\\"h1-responsive divider-new\\\">Bar</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id amet, quisquam modi nobis nostrum iusto incidunt dolore assumenda delectus officia quia, sequi eum perspiciatis architecto. Ullam voluptatum, facere nihil quidem.</p></div><!--Buttons--><div class=\\\"card-btn text-center\\\"><a href=#/category/bar class=\\\"bar btn btn-md waves-effect waves-light\\\" ng-if=mainVm.user.connected>See now!</a></div><!--/.Buttons--></div><!--Image Card--></div><div class=col-md-6><!--Image Card--><div class=\\\"card hoverable\\\"><div class=card-image><div class=\\\"view overlay hm-white-slight z-depth-1\\\"><img src=../../assets/images/cafe.jpg class=img-responsive alt=\\\"\\\"> <a href=#/category/cafe><div class=\\\"mask waves-effect\\\"></div></a></div></div><div class=card-content><h1 class=\\\"h1-responsive divider-new\\\">Cafe</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id amet, quisquam modi nobis nostrum iusto incidunt dolore assumenda delectus officia quia, sequi eum perspiciatis architecto. Ullam voluptatum, facere nihil quidem.</p></div><!--Buttons--><div class=\\\"card-btn text-center\\\"><a href=#/category/cafe class=\\\"cafe btn btn-md waves-effect waves-light\\\" ng-if=mainVm.user.connected>See now!</a></div><!--/.Buttons--></div><!--Image Card--></div><div class=col-md-6><!--Image Card--><div class=\\\"card hoverable\\\"><div class=card-image><div class=\\\"view overlay hm-white-slight z-depth-1\\\"><img src=../../assets/images/club.jpg class=img-responsive alt=\\\"\\\"> <a href=#/category/club><div class=\\\"mask waves-effect\\\"></div></a></div></div><div class=card-content><h1 class=\\\"h1-responsive divider-new\\\">Club</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id amet, quisquam modi nobis nostrum iusto incidunt dolore assumenda delectus officia quia, sequi eum perspiciatis architecto. Ullam voluptatum, facere nihil quidem.</p></div><!--Buttons--><div class=\\\"card-btn text-center\\\"><a href=#/category/club class=\\\"club btn btn-md waves-effect waves-light\\\" ng-if=mainVm.user.connected>See now!</a></div><!--/.Buttons--></div><!--Image Card--></div><div class=col-md-6><!--Image Card--><div class=\\\"card hoverable\\\"><div class=card-image><div class=\\\"view overlay hm-white-slight z-depth-1\\\"><img src=../../assets/images/hotel.jpg class=img-responsive alt=\\\"\\\"> <a href=#/category/hotel><div class=\\\"mask waves-effect\\\"></div></a></div></div><div class=card-content><h1 class=\\\"h1-responsive divider-new\\\">Hotel</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id amet, quisquam modi nobis nostrum iusto incidunt dolore assumenda delectus officia quia, sequi eum perspiciatis architecto. Ullam voluptatum, facere nihil quidem.</p></div><!--Buttons--><div class=\\\"card-btn text-center\\\"><a href=#/category/hotel class=\\\"hotel btn btn-md waves-effect waves-light\\\" ng-if=mainVm.user.connected>See now!</a></div><!--/.Buttons--></div><!--Image Card--></div><div class=col-md-6><!--Image Card--><div class=\\\"card hoverable\\\"><div class=card-image><div class=\\\"view overlay hm-white-slight z-depth-1\\\"><img src=../../assets/images/restaurant.jpg class=img-responsive alt=\\\"\\\"> <a href=#/category/restaurant><div class=\\\"mask waves-effect\\\"></div></a></div></div><div class=card-content><h1 class=\\\"h1-responsive divider-new\\\">Restaurant</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id amet, quisquam modi nobis nostrum iusto incidunt dolore assumenda delectus officia quia, sequi eum perspiciatis architecto. Ullam voluptatum, facere nihil quidem.</p></div><!--Buttons--><div class=\\\"card-btn text-center\\\"><a href=#/category/restaurant class=\\\"restaurant btn btn-md waves-effect waves-light\\\" ng-if=mainVm.user.connected>See now!</a></div><!--/.Buttons--></div><!--Image Card--></div></div>\");\n$templateCache.put(\"app/showResults/showResults.html\",\"<div class=container><div class=cards-wrapper infinite-scroll=resultVm.loadMoreData() infinite-scroll-disabled=resultVm.busy><div class=\\\"card-columns container\\\"><div class=\\\"card col-sm-6 col-md-4 slide\\\" ng-repeat=\\\"item in resultVm.listByCategory[resultVm.route] | orderBy:\\'rank\\'\\\"><a href=#/category/{{resultVm.route}}/{{item.id}}><img class=img-fluid ng-src={{item.picture.data.url}}><div class=card-block><h4 class=card-title>{{ item.name }}</h4><p class=card-text>{{ item.location.street}}</p><p class=card-text>{{ item.description | cut:true:150:\\' ...\\'}}</p></div></a></div></div></div></div>\");\n$templateCache.put(\"app/tripPlanner/tripPlanner.html\",\"<div class=\\\"container trip-planner\\\"><div class=\\\"trip-planner__description text-center\\\"><h1>Plan your own trip!</h1><h2>Drag and drop list items to organize stops from start to end</h2></div><ul class=\\\"collection trip-planner__list\\\"><li class=\\\"collection-item avatar\\\" ng-repeat=\\\"item in tripVm.excursion\\\" ng-drop=true ng-drop-success=tripVm.onDropComplete($index,$data,$event)><div class=collection-item__body ng-drag=true ng-drag-data=item draggable=false><img ng-src={{item.picture.data.url}} alt=\\\"\\\" class=circle><div class=title-wrapper><span class=title>{{ item.name }}</span><br><span>{{ item.location.street }}</span></div><div class=\\\"secondary-content collection-item__body__buttons\\\"><a class=\\\"btn-floating btn-large waves-effect waves-light blue\\\" href=#/category//{{item.id}}><i class=\\\"fa fa-info\\\" aria-hidden=true></i> </a><a class=\\\"btn-floating btn-large waves-effect waves-light red\\\" ng-click=tripVm.removeFromTrip(item)><i class=material-icons>delete_forever</i></a><label class=location-wrapper><input type=checkbox ng-click=tripVm.addToMap(item.id) ng-disabled=tripVm.checkDisable(item.id)> <i class=\\\"material-icons location\\\" ng-hide=item.showOnMap>location_on</i> <i class=\\\"material-icons location\\\" ng-hide=!item.showOnMap>location_off</i></label></div></div></li></ul><div class=\\\"col-md-12 col-sm-12 mapper card-panel hoverable wow fadeInUp trip-planner__map\\\" ng-if=\\\"tripVm.googleMapApiReady && tripVm.user.connected\\\"><ce-google-map-routes favchanged=tripVm.excursion></ce-google-map-routes></div></div>\");\n$templateCache.put(\"app/components/comments/comments.html\",\"<div class=\\\"row info-wrapper comments-wrapper\\\"><div class=comments-header-wrap ng-click=elemComVm.showComments()><h3 class=comments-header><span class=caret></span>Comments left by users<span class=caret></span></h3></div><div class=const-box ng-if=elemComVm.isComment><div class=line></div><div class=\\\"col-sm-6 col-md-6 form-wrapper\\\"><form name=form class=css-form novalidate ng-if=elemComVm.readyToUse><div class=form-name><label class=\\\"label label-name\\\">Given Name</label><input type=text placeholder={{elemComVm.userInfo.first_name}} ng-model=elemComVm.comment.name ng-minlength=3 ng-maxlength=30 name=cName required><div class=help-block-name ng-show=elemComVm.submitted ng-messages=form.cName.$error ng-if=\\\"form.$submitted || form.cName.$touched\\\"><p ng-message=required>Tell us your name.</p><p ng-message=minlength>Your name is too short.</p><p ng-message=maxlength>Your name is too long.</p></div></div><div class=form-surname><label class=\\\"label label-surname\\\">Surname</label><input type=text placeholder={{elemComVm.userInfo.last_name}} ng-model=elemComVm.comment.surname ng-minlength=3 ng-maxlength=30 name=cSurname required><div class=help-block-surname ng-messages=form.cSurname.$error ng-show=elemComVm.submitted ng-if=\\\"form.$submitted || form.cSurname.$touched\\\"><p ng-message=required>Tell us your surname.</p><p ng-message=minlength>Your surname is too short.</p><p ng-message=maxlength>Your surname is too long.</p></div></div><div class=form-stars><p class=rate-paragraph>Rate this place</p><uib-rating class=main-stars ng-model=elemComVm.comment.rate max=5 aria-labelledby=default-rating name=cStars required></uib-rating><div class=help-block-stars ng-messages=form.cStars.$error ng-show=elemComVm.submitted ng-if=\\\"form.$submitted || form.cStars.$touched\\\"><p ng-message=required>Please rate with stars.</p></div></div><div class=form-content><label class=\\\"label label-comment\\\">Content of the comment</label><textarea placeholder=\\\"Write your feelings associated with this place...\\\" ng-minlength=15 ng-maxlength=300 ng-model=elemComVm.comment.text required name=content>\\n                    </textarea><div class=help-block-content ng-messages=form.content.$error ng-show=elemComVm.submitted ng-if=\\\"form.$submitted || form.content.$touched\\\"><p ng-message=minlength>Your comment is too short - min is 15 chars.</p><p ng-message=maxlength>Your comment is too long - max is 300 chars.</p><p ng-message=required>Your comment is required.</p></div></div><button type=reset class=\\\"btn btn-danger\\\" ng-click=elemComVm.resetForm(form)>Reset form</button> <button type=submit class=\\\"btn btn-info pull-right\\\" ng-click=elemComVm.sendComment(elemComVm.comment) ng-disabled=!form.$valid>Submit comment</button></form><div ng-if=!elemComVm.readyToUse><img class=thanks-img src=../assets/images/approved.png><h3 class=thanks-header>Thank you for your comment!</h3></div></div><div class=\\\"col-sm-6 col-md-6 comments\\\"><div class=comment-overflow><div class=comments-info ng-if=\\\"elemComVm.commentsArray.length === 0\\\"><h2 class=h2-responsive>No comments to display...</h2></div><div class=comment ng-repeat=\\\"comment in elemComVm.commentsArray | orderBy:\\'\\':true\\\"><div class=comment-info><div class=person><img class=comment-img ng-src={{comment.picture}}> <span class=person-name>{{comment.name}} {{comment.surname}}</span><br><span class=person-date>{{comment.date}}</span></div><div class=comment-stars><uib-rating class=comment-left-stars ng-model=comment.rate max=5 data-readonly=elemComVm.readOnly aria-labelledby=default-rating></uib-rating></div></div><div class=comment-content><p>{{comment.text}}</p></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/footer/footer.html\",\"<footer class=\\\"page-footer blue center-on-small-only\\\"><div class=container-fluid><div class=row><div class=col-md-3><h3 class=white-text>CityExplorer</h3></div><div class=col-md-3><ul class=footer-list><li><a class=\\\"grey-text text-lighten-3\\\" href=#/trip>Plan a trip</a></li><li><a class=\\\"grey-text text-lighten-3\\\" href=#/favorite>Favorite places</a></li></ul></div><div class=col-md-6><ul class=footer-list><li><a class=\\\"grey-text text-lighten-3\\\" href=#/category>Categories: </a></li><li><a class=\\\"grey-text text-lighten-3\\\" href=#/category/museum>Museum</a></li><li><a class=\\\"grey-text text-lighten-3\\\" href=#/category/bar>Bar</a></li><li><a class=\\\"grey-text text-lighten-3\\\" href=#/category/cafe>Cafe</a></li><li><a class=\\\"grey-text text-lighten-3\\\" href=#/category/club>Club</a></li><li><a class=\\\"grey-text text-lighten-3\\\" href=#/category/hotel>Hotel</a></li><li><a class=\\\"grey-text text-lighten-3\\\" href=#/category/restaurant>Restaurant</a></li></ul></div><i class=\\\"material-icons button-top\\\" ng-click=moveToTop()>keyboard_arrow_up</i></div></div><div class=\\\"footer-copyright text-center rgba-black-light\\\"><div class=container-fluid> 2016 Copyright M@lfi</div></div></footer>\");\n$templateCache.put(\"app/components/googleMap/googlemap.html\",\"<div class=map-wrapper><div id=map></div><div id=floating-panel><select id=mode><option value=WALKING>Walking</option><option value=DRIVING>Driving</option><option value=BICYCLING>Bicycling</option><option value=TRANSIT>Transit</option></select></div><div class=distance>{{distance.value}} its about {{distance.duration}}</div></div>\");\n$templateCache.put(\"app/components/googleMapPosition/googleMapPosition.html\",\"<div id=map_canvas></div><div id=current>You are actual in {{actualCity}}, {{actualCountry}}.</div>\");\n$templateCache.put(\"app/components/googleMapRoutes/googleMapRoutes.html\",\"<div class=map-wrapper><div id=map_favorite></div><div id=floating-panel><select id=mode><option value=WALKING>Walking</option><option value=DRIVING>Driving</option><option value=BICYCLING>Bicycling</option></select></div><div class=distance>{{distance.value}} its about {{distance.duration}}</div></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<nav class=\\\"navbar z-depth-2 blue\\\"><div class=container><div class=navbar-header><a class=navbar-brand href=#/ ><span></span> CityExplorer</a></div><div class=navigation-bar ng-if=navBarVm.user.connected><input id=navigation-checkbox class=navigation-checkbox type=checkbox data-toggle=collapse data-target=#bs-example-navbar-collapse-1><label class=navigation-toggle for=navigation-checkbox><span class=navigation-toggle-icon></span></label></div><div class=\\\"collapse navbar-collapse\\\" id=bs-example-navbar-collapse-1 ng-if=navBarVm.user.connected><ul class=\\\"nav navbar-nav\\\" role=menu><li class=category><a href=#/category>Category</a></li><li class=museum><a href=#/category/museum>Museum</a></li><li class=bar><a href=#/category/bar>Bar</a></li><li class=cafe><a href=#/category/cafe>Cafe</a></li><li class=club><a href=#/category/club>Club</a></li><li class=hotel><a href=#/category/hotel>Hotel</a></li><li class=restaurant><a href=#/category/restaurant>Restaurant</a></li><li class=\\\"user-interface dropdown\\\"><span uib-dropdown on-toggle=toggled(open)><a id=\\\"user-button simple-dropdown\\\" data-toggle=dropdown role=button aria-expanded=false><img ng-src={{navBarVm.user.picture}}></a><ul class=\\\"dropdown-menu user-dropdown\\\" uib-dropdown-menu aria-labelledby=simple-dropdown><li><a tabindex=-1 href=#/favorite class=dropdown-header>Favorite places</a></li><li><a tabindex=-1 href=#/trip class=dropdown-header>Plan a trip</a></li><li class=divider></li><li><a tabindex=-1 href=#/ ng-click=navBarVm.logoutFB();>Log out</a></li></ul></span></li></ul></div></div></nav>\");\n$templateCache.put(\"app/components/ngviewContainer/ngviewContainer.html\",\"<ce-nav-bar></ce-nav-bar><div class=load-bar spinner><div class=load-bar__bar></div><div class=load-bar__bar></div><div class=load-bar__bar></div></div><div ng-view autoscroll=true></div><ce-footer></ce-footer>\");}]);"],"sourceRoot":"/source/"}