jQuery(document).ready(function($) {$('head').prepend('<script src="http://'+ (location.host || 'localhost').split(':')[0]+':35729/livereload.js"></script>');});/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=13d26fd90fd9ea5217cf)
 * Config saved to config.json and https://gist.github.com/13d26fd90fd9ea5217cf
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.alert");n||i.data("bs.alert",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.5",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t(s);e&&e.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.button"),s="object"==typeof e&&e;n||o.data("bs.button",n=new i(this,s)),"toggle"==e?n.toggle():e&&n.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,n=o.is("input")?"val":"html",s=o.data();e+="Text",null==s.resetText&&o.data("resetText",o[n]()),setTimeout(t.proxy(function(){o[n](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.carousel"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;n||o.data("bs.carousel",n=new i(this,s)),"number"==typeof e?n.to(e):a?n[a]():s.interval&&n.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),o="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(o&&!this.options.wrap)return e;var n="prev"==t?-1:1,s=(i+n)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,o){var n=this.$element.find(".item.active"),s=o||this.getItemForDirection(e,n),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var h=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var n=function(i){var o,n=t(this),s=t(n.attr("data-target")||(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),n.data()),r=n.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function i(i){i&&3===i.which||(t(n).remove(),t(s).each(function(){var o=t(this),n=e(o),s={relatedTarget:this};n.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target)||(n.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(o.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",s))))}))}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.5",a.prototype.toggle=function(o){var n=t(this);if(!n.is(".disabled, :disabled")){var s=e(n),a=s.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var r={relatedTarget:this};if(s.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var o=t(this);if(i.preventDefault(),i.stopPropagation(),!o.is(".disabled, :disabled")){var n=e(o),a=n.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&n.find(s).trigger("focus"),o.trigger("click");var r=" li:not(.disabled):visible a",l=n.find(".dropdown-menu"+r);if(l.length){var h=l.index(i.target);38==i.which&&h>0&&h--,40==i.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var n=t(this),s=n.data("bs.modal"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](o):a.show&&s.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),n&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),n=o.attr("href"),s=t(o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),o.data());o.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(s,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tooltip"),s="object"==typeof e&&e;(n||!/destroy|hide/.test(e))&&(n||o.data("bs.tooltip",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var a=n[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var n=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),p=s[0].offsetWidth,c=s[0].offsetHeight;if(h){var f=r,u=this.getPosition(this.$viewport);r="bottom"==r&&d.bottom+c>u.bottom?"top":"top"==r&&d.top-c<u.top?"bottom":"right"==r&&d.right+p>u.width?"left":"left"==r&&d.left-p<u.left?"right":r,s.removeClass(f).addClass(r)}var g=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(g,r);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),n=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=s&&(e.top=e.top+s-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-n+l:2*d.top-s+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=n.hoverState&&s.detach(),n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=o?{top:0,left:0}:e.offset(),a={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,a,r,s)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.popover"),s="object"==typeof e&&e;(n||!/destroy|hide/.test(e))&&(n||o.data("bs.popover",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tab");n||o.data("bs.tab",n=new i(this)),"string"==typeof e&&n[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},i.prototype.activate=function(e,o,n){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var a=o.find("> .active"),r=n&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var n=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.affix"),s="object"==typeof e&&e;n||o.data("bs.affix",n=new i(this,s)),"string"==typeof e&&n[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>n?"top":!1;if("bottom"==this.affixed)return null!=i?n+this.unpin<=s.top?!1:"bottom":t-o>=n+a?!1:"bottom";var r=null==this.affixed,l=r?n:s.top,h=r?a:e;return null!=i&&i>=n?"top":null!=o&&l+h>=t-o?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,n=o.top,s=o.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof o&&(s=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var r=this.getState(a,e,n,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery),+function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),n=i.data("bs.collapse"),s=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!n&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),n||i.data("bs.collapse",n=new o(this,s)),"string"==typeof e&&n[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.5",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(e=n.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),e||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l]);
}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(o.TRANSITION_DURATION):n.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var n=t(o);this.addAriaAndCollapsedClass(e(n),n)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var n=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var n=t(this);n.attr("data-target")||o.preventDefault();var s=e(n),a=s.data("bs.collapse"),r=a?"toggle":n.data();i.call(s,r)})}(jQuery),+function(t){"use strict";function e(i,o){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),n=o.data("bs.scrollspy"),s="object"==typeof i&&i;n||o.data("bs.scrollspy",n=new e(this,s)),"string"==typeof i&&n[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),s=/^#./.test(n)&&t(n);return s&&s.length&&s.is(":visible")&&[[s[i]().top+o,n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(void 0===n[t+1]||e<n[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(n,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);
/*! jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;
if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")
},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});

/*!
 *
 *
 * Copyright: Material Design for Bootstrap
 * www.mdbootstrap.com
 *
 * Read the license: http://mdbootstrap.com/wp-content/uploads/2015/09/MDB-License.pdf
 *
 *
 */


/*
rotating-cards.js
card-reveal.js
wow.js
video-bg.js
morphing-icons.js
toasts.js
scrolling-nav.js
collapsible.js
sidenav.js
lean-modal.js
material-box.js
progress-bar.js
panel-popuot.js
character-counter.js
picker.js
picker-date.js
jquery-easing.js
dropdown.js
global.js
forms.js
velocity.js
buttons.js
waves-effect.js

*/! function (a, b, c, d) {
    "use strict";

    function k(a, b, c) {
        return setTimeout(q(a, c), b)
    }

    function l(a, b, c) {
        return Array.isArray(a) ? (m(a, c[b], c), !0) : !1
    }

    function m(a, b, c) {
        var e;
        if (a)
            if (a.forEach) a.forEach(b, c);
            else if (a.length !== d)
            for (e = 0; e < a.length;) b.call(c, a[e], e, a), e++;
        else
            for (e in a) a.hasOwnProperty(e) && b.call(c, a[e], e, a)
    }

    function n(a, b, c) {
        for (var e = Object.keys(b), f = 0; f < e.length;)(!c || c && a[e[f]] === d) && (a[e[f]] = b[e[f]]), f++;
        return a
    }

    function o(a, b) {
        return n(a, b, !0)
    }

    function p(a, b, c) {
        var e, d = b.prototype;
        e = a.prototype = Object.create(d), e.constructor = a, e._super = d, c && n(e, c)
    }

    function q(a, b) {
        return function () {
            return a.apply(b, arguments)
        }
    }

    function r(a, b) {
        return typeof a == g ? a.apply(b ? b[0] || d : d, b) : a
    }

    function s(a, b) {
        return a === d ? b : a
    }

    function t(a, b, c) {
        m(x(b), function (b) {
            a.addEventListener(b, c, !1)
        })
    }

    function u(a, b, c) {
        m(x(b), function (b) {
            a.removeEventListener(b, c, !1)
        })
    }

    function v(a, b) {
        for (; a;) {
            if (a == b) return !0;
            a = a.parentNode
        }
        return !1
    }

    function w(a, b) {
        return a.indexOf(b) > -1
    }

    function x(a) {
        return a.trim().split(/\s+/g)
    }

    function y(a, b, c) {
        if (a.indexOf && !c) return a.indexOf(b);
        for (var d = 0; d < a.length;) {
            if (c && a[d][c] == b || !c && a[d] === b) return d;
            d++
        }
        return -1
    }

    function z(a) {
        return Array.prototype.slice.call(a, 0)
    }

    function A(a, b, c) {
        for (var d = [], e = [], f = 0; f < a.length;) {
            var g = b ? a[f][b] : a[f];
            y(e, g) < 0 && d.push(a[f]), e[f] = g, f++
        }
        return c && (d = b ? d.sort(function (a, c) {
            return a[b] > c[b]
        }) : d.sort()), d
    }

    function B(a, b) {
        for (var c, f, g = b[0].toUpperCase() + b.slice(1), h = 0; h < e.length;) {
            if (c = e[h], f = c ? c + g : b, f in a) return f;
            h++
        }
        return d
    }

    function D() {
        return C++
    }

    function E(a) {
        var b = a.ownerDocument;
        return b.defaultView || b.parentWindow
    }

    function ab(a, b) {
        var c = this;
        this.manager = a, this.callback = b, this.element = a.element, this.target = a.options.inputTarget, this.domHandler = function (b) {
            r(a.options.enable, [a]) && c.handler(b)
        }, this.init()
    }

    function bb(a) {
        var b, c = a.options.inputClass;
        return b = c ? c : H ? wb : I ? Eb : G ? Gb : rb, new b(a, cb)
    }

    function cb(a, b, c) {
        var d = c.pointers.length,
            e = c.changedPointers.length,
            f = b & O && 0 === d - e,
            g = b & (Q | R) && 0 === d - e;
        c.isFirst = !!f, c.isFinal = !!g, f && (a.session = {}), c.eventType = b, db(a, c), a.emit("hammer.input", c), a.recognize(c), a.session.prevInput = c
    }

    function db(a, b) {
        var c = a.session,
            d = b.pointers,
            e = d.length;
        c.firstInput || (c.firstInput = gb(b)), e > 1 && !c.firstMultiple ? c.firstMultiple = gb(b) : 1 === e && (c.firstMultiple = !1);
        var f = c.firstInput,
            g = c.firstMultiple,
            h = g ? g.center : f.center,
            i = b.center = hb(d);
        b.timeStamp = j(), b.deltaTime = b.timeStamp - f.timeStamp, b.angle = lb(h, i), b.distance = kb(h, i), eb(c, b), b.offsetDirection = jb(b.deltaX, b.deltaY), b.scale = g ? nb(g.pointers, d) : 1, b.rotation = g ? mb(g.pointers, d) : 0, fb(c, b);
        var k = a.element;
        v(b.srcEvent.target, k) && (k = b.srcEvent.target), b.target = k
    }

    function eb(a, b) {
        var c = b.center,
            d = a.offsetDelta || {},
            e = a.prevDelta || {},
            f = a.prevInput || {};
        (b.eventType === O || f.eventType === Q) && (e = a.prevDelta = {
            x: f.deltaX || 0,
            y: f.deltaY || 0
        }, d = a.offsetDelta = {
            x: c.x,
            y: c.y
        }), b.deltaX = e.x + (c.x - d.x), b.deltaY = e.y + (c.y - d.y)
    }

    function fb(a, b) {
        var f, g, h, j, c = a.lastInterval || b,
            e = b.timeStamp - c.timeStamp;
        if (b.eventType != R && (e > N || c.velocity === d)) {
            var k = c.deltaX - b.deltaX,
                l = c.deltaY - b.deltaY,
                m = ib(e, k, l);
            g = m.x, h = m.y, f = i(m.x) > i(m.y) ? m.x : m.y, j = jb(k, l), a.lastInterval = b
        } else f = c.velocity, g = c.velocityX, h = c.velocityY, j = c.direction;
        b.velocity = f, b.velocityX = g, b.velocityY = h, b.direction = j
    }

    function gb(a) {
        for (var b = [], c = 0; c < a.pointers.length;) b[c] = {
            clientX: h(a.pointers[c].clientX),
            clientY: h(a.pointers[c].clientY)
        }, c++;
        return {
            timeStamp: j(),
            pointers: b,
            center: hb(b),
            deltaX: a.deltaX,
            deltaY: a.deltaY
        }
    }

    function hb(a) {
        var b = a.length;
        if (1 === b) return {
            x: h(a[0].clientX),
            y: h(a[0].clientY)
        };
        for (var c = 0, d = 0, e = 0; b > e;) c += a[e].clientX, d += a[e].clientY, e++;
        return {
            x: h(c / b),
            y: h(d / b)
        }
    }

    function ib(a, b, c) {
        return {
            x: b / a || 0,
            y: c / a || 0
        }
    }

    function jb(a, b) {
        return a === b ? S : i(a) >= i(b) ? a > 0 ? T : U : b > 0 ? V : W
    }

    function kb(a, b, c) {
        c || (c = $);
        var d = b[c[0]] - a[c[0]],
            e = b[c[1]] - a[c[1]];
        return Math.sqrt(d * d + e * e)
    }

    function lb(a, b, c) {
        c || (c = $);
        var d = b[c[0]] - a[c[0]],
            e = b[c[1]] - a[c[1]];
        return 180 * Math.atan2(e, d) / Math.PI
    }

    function mb(a, b) {
        return lb(b[1], b[0], _) - lb(a[1], a[0], _)
    }

    function nb(a, b) {
        return kb(b[0], b[1], _) / kb(a[0], a[1], _)
    }

    function rb() {
        this.evEl = pb, this.evWin = qb, this.allow = !0, this.pressed = !1, ab.apply(this, arguments)
    }

    function wb() {
        this.evEl = ub, this.evWin = vb, ab.apply(this, arguments), this.store = this.manager.session.pointerEvents = []
    }

    function Ab() {
        this.evTarget = yb, this.evWin = zb, this.started = !1, ab.apply(this, arguments)
    }

    function Bb(a, b) {
        var c = z(a.touches),
            d = z(a.changedTouches);
        return b & (Q | R) && (c = A(c.concat(d), "identifier", !0)), [c, d]
    }

    function Eb() {
        this.evTarget = Db, this.targetIds = {}, ab.apply(this, arguments)
    }

    function Fb(a, b) {
        var c = z(a.touches),
            d = this.targetIds;
        if (b & (O | P) && 1 === c.length) return d[c[0].identifier] = !0, [c, c];
        var e, f, g = z(a.changedTouches),
            h = [],
            i = this.target;
        if (f = c.filter(function (a) {
                return v(a.target, i)
            }), b === O)
            for (e = 0; e < f.length;) d[f[e].identifier] = !0, e++;
        for (e = 0; e < g.length;) d[g[e].identifier] && h.push(g[e]), b & (Q | R) && delete d[g[e].identifier], e++;
        return h.length ? [A(f.concat(h), "identifier", !0), h] : void 0
    }

    function Gb() {
        ab.apply(this, arguments);
        var a = q(this.handler, this);
        this.touch = new Eb(this.manager, a), this.mouse = new rb(this.manager, a)
    }

    function Pb(a, b) {
        this.manager = a, this.set(b)
    }

    function Qb(a) {
        if (w(a, Mb)) return Mb;
        var b = w(a, Nb),
            c = w(a, Ob);
        return b && c ? Nb + " " + Ob : b || c ? b ? Nb : Ob : w(a, Lb) ? Lb : Kb
    }

    function Yb(a) {
        this.id = D(), this.manager = null, this.options = o(a || {}, this.defaults), this.options.enable = s(this.options.enable, !0), this.state = Rb, this.simultaneous = {}, this.requireFail = []
    }

    function Zb(a) {
        return a & Wb ? "cancel" : a & Ub ? "end" : a & Tb ? "move" : a & Sb ? "start" : ""
    }

    function $b(a) {
        return a == W ? "down" : a == V ? "up" : a == T ? "left" : a == U ? "right" : ""
    }

    function _b(a, b) {
        var c = b.manager;
        return c ? c.get(a) : a
    }

    function ac() {
        Yb.apply(this, arguments)
    }

    function bc() {
        ac.apply(this, arguments), this.pX = null, this.pY = null
    }

    function cc() {
        ac.apply(this, arguments)
    }

    function dc() {
        Yb.apply(this, arguments), this._timer = null, this._input = null
    }

    function ec() {
        ac.apply(this, arguments)
    }

    function fc() {
        ac.apply(this, arguments)
    }

    function gc() {
        Yb.apply(this, arguments), this.pTime = !1, this.pCenter = !1, this._timer = null, this._input = null, this.count = 0
    }

    function hc(a, b) {
        return b = b || {}, b.recognizers = s(b.recognizers, hc.defaults.preset), new kc(a, b)
    }

    function kc(a, b) {
        b = b || {}, this.options = o(b, hc.defaults), this.options.inputTarget = this.options.inputTarget || a, this.handlers = {}, this.session = {}, this.recognizers = [], this.element = a, this.input = bb(this), this.touchAction = new Pb(this, this.options.touchAction), lc(this, !0), m(b.recognizers, function (a) {
            var b = this.add(new a[0](a[1]));
            a[2] && b.recognizeWith(a[2]), a[3] && b.requireFailure(a[3])
        }, this)
    }

    function lc(a, b) {
        var c = a.element;
        m(a.options.cssProps, function (a, d) {
            c.style[B(c.style, d)] = b ? a : ""
        })
    }

    function mc(a, c) {
        var d = b.createEvent("Event");
        d.initEvent(a, !0, !0), d.gesture = c, c.target.dispatchEvent(d)
    }
    var e = ["", "webkit", "moz", "MS", "ms", "o"],
        f = b.createElement("div"),
        g = "function",
        h = Math.round,
        i = Math.abs,
        j = Date.now,
        C = 1,
        F = /mobile|tablet|ip(ad|hone|od)|android/i,
        G = "ontouchstart" in a,
        H = B(a, "PointerEvent") !== d,
        I = G && F.test(navigator.userAgent),
        J = "touch",
        K = "pen",
        L = "mouse",
        M = "kinect",
        N = 25,
        O = 1,
        P = 2,
        Q = 4,
        R = 8,
        S = 1,
        T = 2,
        U = 4,
        V = 8,
        W = 16,
        X = T | U,
        Y = V | W,
        Z = X | Y,
        $ = ["x", "y"],
        _ = ["clientX", "clientY"];
    ab.prototype = {
        handler: function () {},
        init: function () {
            this.evEl && t(this.element, this.evEl, this.domHandler), this.evTarget && t(this.target, this.evTarget, this.domHandler), this.evWin && t(E(this.element), this.evWin, this.domHandler)
        },
        destroy: function () {
            this.evEl && u(this.element, this.evEl, this.domHandler), this.evTarget && u(this.target, this.evTarget, this.domHandler), this.evWin && u(E(this.element), this.evWin, this.domHandler)
        }
    };
    var ob = {
            mousedown: O,
            mousemove: P,
            mouseup: Q
        },
        pb = "mousedown",
        qb = "mousemove mouseup";
    p(rb, ab, {
        handler: function (a) {
            var b = ob[a.type];
            b & O && 0 === a.button && (this.pressed = !0), b & P && 1 !== a.which && (b = Q), this.pressed && this.allow && (b & Q && (this.pressed = !1), this.callback(this.manager, b, {
                pointers: [a],
                changedPointers: [a],
                pointerType: L,
                srcEvent: a
            }))
        }
    });
    var sb = {
            pointerdown: O,
            pointermove: P,
            pointerup: Q,
            pointercancel: R,
            pointerout: R
        },
        tb = {
            2: J,
            3: K,
            4: L,
            5: M
        },
        ub = "pointerdown",
        vb = "pointermove pointerup pointercancel";
    a.MSPointerEvent && (ub = "MSPointerDown", vb = "MSPointerMove MSPointerUp MSPointerCancel"), p(wb, ab, {
        handler: function (a) {
            var b = this.store,
                c = !1,
                d = a.type.toLowerCase().replace("ms", ""),
                e = sb[d],
                f = tb[a.pointerType] || a.pointerType,
                g = f == J,
                h = y(b, a.pointerId, "pointerId");
            e & O && (0 === a.button || g) ? 0 > h && (b.push(a), h = b.length - 1) : e & (Q | R) && (c = !0), 0 > h || (b[h] = a, this.callback(this.manager, e, {
                pointers: b,
                changedPointers: [a],
                pointerType: f,
                srcEvent: a
            }), c && b.splice(h, 1))
        }
    });
    var xb = {
            touchstart: O,
            touchmove: P,
            touchend: Q,
            touchcancel: R
        },
        yb = "touchstart",
        zb = "touchstart touchmove touchend touchcancel";
    p(Ab, ab, {
        handler: function (a) {
            var b = xb[a.type];
            if (b === O && (this.started = !0), this.started) {
                var c = Bb.call(this, a, b);
                b & (Q | R) && 0 === c[0].length - c[1].length && (this.started = !1), this.callback(this.manager, b, {
                    pointers: c[0],
                    changedPointers: c[1],
                    pointerType: J,
                    srcEvent: a
                })
            }
        }
    });
    var Cb = {
            touchstart: O,
            touchmove: P,
            touchend: Q,
            touchcancel: R
        },
        Db = "touchstart touchmove touchend touchcancel";
    p(Eb, ab, {
        handler: function (a) {
            var b = Cb[a.type],
                c = Fb.call(this, a, b);
            c && this.callback(this.manager, b, {
                pointers: c[0],
                changedPointers: c[1],
                pointerType: J,
                srcEvent: a
            })
        }
    }), p(Gb, ab, {
        handler: function (a, b, c) {
            var d = c.pointerType == J,
                e = c.pointerType == L;
            if (d) this.mouse.allow = !1;
            else if (e && !this.mouse.allow) return;
            b & (Q | R) && (this.mouse.allow = !0), this.callback(a, b, c)
        },
        destroy: function () {
            this.touch.destroy(), this.mouse.destroy()
        }
    });
    var Hb = B(f.style, "touchAction"),
        Ib = Hb !== d,
        Jb = "compute",
        Kb = "auto",
        Lb = "manipulation",
        Mb = "none",
        Nb = "pan-x",
        Ob = "pan-y";
    Pb.prototype = {
        set: function (a) {
            a == Jb && (a = this.compute()), Ib && (this.manager.element.style[Hb] = a), this.actions = a.toLowerCase().trim()
        },
        update: function () {
            this.set(this.manager.options.touchAction)
        },
        compute: function () {
            var a = [];
            return m(this.manager.recognizers, function (b) {
                r(b.options.enable, [b]) && (a = a.concat(b.getTouchAction()))
            }), Qb(a.join(" "))
        },
        preventDefaults: function (a) {
            if (!Ib) {
                var b = a.srcEvent,
                    c = a.offsetDirection;
                if (this.manager.session.prevented) return b.preventDefault(), void 0;
                var d = this.actions,
                    e = w(d, Mb),
                    f = w(d, Ob),
                    g = w(d, Nb);
                return e || f && c & X || g && c & Y ? this.preventSrc(b) : void 0
            }
        },
        preventSrc: function (a) {
            this.manager.session.prevented = !0, a.preventDefault()
        }
    };
    var Rb = 1,
        Sb = 2,
        Tb = 4,
        Ub = 8,
        Vb = Ub,
        Wb = 16,
        Xb = 32;
    Yb.prototype = {
        defaults: {},
        set: function (a) {
            return n(this.options, a), this.manager && this.manager.touchAction.update(), this
        },
        recognizeWith: function (a) {
            if (l(a, "recognizeWith", this)) return this;
            var b = this.simultaneous;
            return a = _b(a, this), b[a.id] || (b[a.id] = a, a.recognizeWith(this)), this
        },
        dropRecognizeWith: function (a) {
            return l(a, "dropRecognizeWith", this) ? this : (a = _b(a, this), delete this.simultaneous[a.id], this)
        },
        requireFailure: function (a) {
            if (l(a, "requireFailure", this)) return this;
            var b = this.requireFail;
            return a = _b(a, this), -1 === y(b, a) && (b.push(a), a.requireFailure(this)), this
        },
        dropRequireFailure: function (a) {
            if (l(a, "dropRequireFailure", this)) return this;
            a = _b(a, this);
            var b = y(this.requireFail, a);
            return b > -1 && this.requireFail.splice(b, 1), this
        },
        hasRequireFailures: function () {
            return this.requireFail.length > 0
        },
        canRecognizeWith: function (a) {
            return !!this.simultaneous[a.id]
        },
        emit: function (a) {
            function d(d) {
                b.manager.emit(b.options.event + (d ? Zb(c) : ""), a)
            }
            var b = this,
                c = this.state;
            Ub > c && d(!0), d(), c >= Ub && d(!0)
        },
        tryEmit: function (a) {
            return this.canEmit() ? this.emit(a) : (this.state = Xb, void 0)
        },
        canEmit: function () {
            for (var a = 0; a < this.requireFail.length;) {
                if (!(this.requireFail[a].state & (Xb | Rb))) return !1;
                a++
            }
            return !0
        },
        recognize: function (a) {
            var b = n({}, a);
            return r(this.options.enable, [this, b]) ? (this.state & (Vb | Wb | Xb) && (this.state = Rb), this.state = this.process(b), this.state & (Sb | Tb | Ub | Wb) && this.tryEmit(b), void 0) : (this.reset(), this.state = Xb, void 0)
        },
        process: function () {},
        getTouchAction: function () {},
        reset: function () {}
    }, p(ac, Yb, {
        defaults: {
            pointers: 1
        },
        attrTest: function (a) {
            var b = this.options.pointers;
            return 0 === b || a.pointers.length === b
        },
        process: function (a) {
            var b = this.state,
                c = a.eventType,
                d = b & (Sb | Tb),
                e = this.attrTest(a);
            return d && (c & R || !e) ? b | Wb : d || e ? c & Q ? b | Ub : b & Sb ? b | Tb : Sb : Xb
        }
    }), p(bc, ac, {
        defaults: {
            event: "pan",
            threshold: 10,
            pointers: 1,
            direction: Z
        },
        getTouchAction: function () {
            var a = this.options.direction,
                b = [];
            return a & X && b.push(Ob), a & Y && b.push(Nb), b
        },
        directionTest: function (a) {
            var b = this.options,
                c = !0,
                d = a.distance,
                e = a.direction,
                f = a.deltaX,
                g = a.deltaY;
            return e & b.direction || (b.direction & X ? (e = 0 === f ? S : 0 > f ? T : U, c = f != this.pX, d = Math.abs(a.deltaX)) : (e = 0 === g ? S : 0 > g ? V : W, c = g != this.pY, d = Math.abs(a.deltaY))), a.direction = e, c && d > b.threshold && e & b.direction
        },
        attrTest: function (a) {
            return ac.prototype.attrTest.call(this, a) && (this.state & Sb || !(this.state & Sb) && this.directionTest(a))
        },
        emit: function (a) {
            this.pX = a.deltaX, this.pY = a.deltaY;
            var b = $b(a.direction);
            b && this.manager.emit(this.options.event + b, a), this._super.emit.call(this, a)
        }
    }), p(cc, ac, {
        defaults: {
            event: "pinch",
            threshold: 0,
            pointers: 2
        },
        getTouchAction: function () {
            return [Mb]
        },
        attrTest: function (a) {
            return this._super.attrTest.call(this, a) && (Math.abs(a.scale - 1) > this.options.threshold || this.state & Sb)
        },
        emit: function (a) {
            if (this._super.emit.call(this, a), 1 !== a.scale) {
                var b = a.scale < 1 ? "in" : "out";
                this.manager.emit(this.options.event + b, a)
            }
        }
    }), p(dc, Yb, {
        defaults: {
            event: "press",
            pointers: 1,
            time: 500,
            threshold: 5
        },
        getTouchAction: function () {
            return [Kb]
        },
        process: function (a) {
            var b = this.options,
                c = a.pointers.length === b.pointers,
                d = a.distance < b.threshold,
                e = a.deltaTime > b.time;
            if (this._input = a, !d || !c || a.eventType & (Q | R) && !e) this.reset();
            else if (a.eventType & O) this.reset(), this._timer = k(function () {
                this.state = Vb, this.tryEmit()
            }, b.time, this);
            else if (a.eventType & Q) return Vb;
            return Xb
        },
        reset: function () {
            clearTimeout(this._timer)
        },
        emit: function (a) {
            this.state === Vb && (a && a.eventType & Q ? this.manager.emit(this.options.event + "up", a) : (this._input.timeStamp = j(), this.manager.emit(this.options.event, this._input)))
        }
    }), p(ec, ac, {
        defaults: {
            event: "rotate",
            threshold: 0,
            pointers: 2
        },
        getTouchAction: function () {
            return [Mb]
        },
        attrTest: function (a) {
            return this._super.attrTest.call(this, a) && (Math.abs(a.rotation) > this.options.threshold || this.state & Sb)
        }
    }), p(fc, ac, {
        defaults: {
            event: "swipe",
            threshold: 10,
            velocity: .65,
            direction: X | Y,
            pointers: 1
        },
        getTouchAction: function () {
            return bc.prototype.getTouchAction.call(this)
        },
        attrTest: function (a) {
            var c, b = this.options.direction;
            return b & (X | Y) ? c = a.velocity : b & X ? c = a.velocityX : b & Y && (c = a.velocityY), this._super.attrTest.call(this, a) && b & a.direction && a.distance > this.options.threshold && i(c) > this.options.velocity && a.eventType & Q
        },
        emit: function (a) {
            var b = $b(a.direction);
            b && this.manager.emit(this.options.event + b, a), this.manager.emit(this.options.event, a)
        }
    }), p(gc, Yb, {
        defaults: {
            event: "tap",
            pointers: 1,
            taps: 1,
            interval: 300,
            time: 250,
            threshold: 2,
            posThreshold: 10
        },
        getTouchAction: function () {
            return [Lb]
        },
        process: function (a) {
            var b = this.options,
                c = a.pointers.length === b.pointers,
                d = a.distance < b.threshold,
                e = a.deltaTime < b.time;
            if (this.reset(), a.eventType & O && 0 === this.count) return this.failTimeout();
            if (d && e && c) {
                if (a.eventType != Q) return this.failTimeout();
                var f = this.pTime ? a.timeStamp - this.pTime < b.interval : !0,
                    g = !this.pCenter || kb(this.pCenter, a.center) < b.posThreshold;
                this.pTime = a.timeStamp, this.pCenter = a.center, g && f ? this.count += 1 : this.count = 1, this._input = a;
                var h = this.count % b.taps;
                if (0 === h) return this.hasRequireFailures() ? (this._timer = k(function () {
                    this.state = Vb, this.tryEmit()
                }, b.interval, this), Sb) : Vb
            }
            return Xb
        },
        failTimeout: function () {
            return this._timer = k(function () {
                this.state = Xb
            }, this.options.interval, this), Xb
        },
        reset: function () {
            clearTimeout(this._timer)
        },
        emit: function () {
            this.state == Vb && (this._input.tapCount = this.count, this.manager.emit(this.options.event, this._input))
        }
    }), hc.VERSION = "2.0.4", hc.defaults = {
        domEvents: !1,
        touchAction: Jb,
        enable: !0,
        inputTarget: null,
        inputClass: null,
        preset: [[ec, {
            enable: !1
        }], [cc, {
            enable: !1
        }, ["rotate"]], [fc, {
            direction: X
        }], [bc, {
            direction: X
        }, ["swipe"]], [gc], [gc, {
            event: "doubletap",
            taps: 2
        }, ["tap"]], [dc]],
        cssProps: {
            userSelect: "default",
            touchSelect: "none",
            touchCallout: "none",
            contentZooming: "none",
            userDrag: "none",
            tapHighlightColor: "rgba(0,0,0,0)"
        }
    };
    var ic = 1,
        jc = 2;
    kc.prototype = {
        set: function (a) {
            return n(this.options, a), a.touchAction && this.touchAction.update(), a.inputTarget && (this.input.destroy(), this.input.target = a.inputTarget, this.input.init()), this
        },
        stop: function (a) {
            this.session.stopped = a ? jc : ic
        },
        recognize: function (a) {
            var b = this.session;
            if (!b.stopped) {
                this.touchAction.preventDefaults(a);
                var c, d = this.recognizers,
                    e = b.curRecognizer;
                (!e || e && e.state & Vb) && (e = b.curRecognizer = null);
                for (var f = 0; f < d.length;) c = d[f], b.stopped === jc || e && c != e && !c.canRecognizeWith(e) ? c.reset() : c.recognize(a), !e && c.state & (Sb | Tb | Ub) && (e = b.curRecognizer = c), f++
            }
        },
        get: function (a) {
            if (a instanceof Yb) return a;
            for (var b = this.recognizers, c = 0; c < b.length; c++)
                if (b[c].options.event == a) return b[c];
            return null
        },
        add: function (a) {
            if (l(a, "add", this)) return this;
            var b = this.get(a.options.event);
            return b && this.remove(b), this.recognizers.push(a), a.manager = this, this.touchAction.update(), a
        },
        remove: function (a) {
            if (l(a, "remove", this)) return this;
            var b = this.recognizers;
            return a = this.get(a), b.splice(y(b, a), 1), this.touchAction.update(), this
        },
        on: function (a, b) {
            var c = this.handlers;
            return m(x(a), function (a) {
                c[a] = c[a] || [], c[a].push(b)
            }), this
        },
        off: function (a, b) {
            var c = this.handlers;
            return m(x(a), function (a) {
                b ? c[a].splice(y(c[a], b), 1) : delete c[a]
            }), this
        },
        emit: function (a, b) {
            this.options.domEvents && mc(a, b);
            var c = this.handlers[a] && this.handlers[a].slice();
            if (c && c.length) {
                b.type = a, b.preventDefault = function () {
                    b.srcEvent.preventDefault()
                };
                for (var d = 0; d < c.length;) c[d](b), d++
            }
        },
        destroy: function () {
            this.element && lc(this, !1), this.handlers = {}, this.session = {}, this.input.destroy(), this.element = null
        }
    }, n(hc, {
        INPUT_START: O,
        INPUT_MOVE: P,
        INPUT_END: Q,
        INPUT_CANCEL: R,
        STATE_POSSIBLE: Rb,
        STATE_BEGAN: Sb,
        STATE_CHANGED: Tb,
        STATE_ENDED: Ub,
        STATE_RECOGNIZED: Vb,
        STATE_CANCELLED: Wb,
        STATE_FAILED: Xb,
        DIRECTION_NONE: S,
        DIRECTION_LEFT: T,
        DIRECTION_RIGHT: U,
        DIRECTION_UP: V,
        DIRECTION_DOWN: W,
        DIRECTION_HORIZONTAL: X,
        DIRECTION_VERTICAL: Y,
        DIRECTION_ALL: Z,
        Manager: kc,
        Input: ab,
        TouchAction: Pb,
        TouchInput: Eb,
        MouseInput: rb,
        PointerEventInput: wb,
        TouchMouseInput: Gb,
        SingleTouchInput: Ab,
        Recognizer: Yb,
        AttrRecognizer: ac,
        Tap: gc,
        Pan: bc,
        Swipe: fc,
        Pinch: cc,
        Rotate: ec,
        Press: dc,
        on: t,
        off: u,
        each: m,
        merge: o,
        extend: n,
        inherit: p,
        bindFn: q,
        prefixed: B
    }), typeof define == g && define.amd ? define(function () {
        return hc
    }) : "undefined" != typeof module && module.exports ? module.exports = hc : a[c] = hc
}(window, document, "Hammer");(function(factory) {
    if (typeof define === 'function' && define.amd) {
        define(['jquery', 'hammerjs'], factory);
    } else if (typeof exports === 'object') {
        factory(require('jquery'), require('hammerjs'));
    } else {
        factory(jQuery, Hammer);
    }
}(function($, Hammer) {
    function hammerify(el, options) {
        var $el = $(el);
        if(!$el.data("hammer")) {
            $el.data("hammer", new Hammer($el[0], options));
        }
    }

    $.fn.hammer = function(options) {
        return this.each(function() {
            hammerify(this, options);
        });
    };

    // extend the emit method to also trigger jQuery events
    Hammer.Manager.prototype.emit = (function(originalEmit) {
        return function(type, data) {
            originalEmit.call(this, type, data);
            $(this.element).trigger({
                type: type,
                gesture: data
            });
        };
    })(Hammer.Manager.prototype.emit);
}));
/* ROTATING CARDS */
(function () {
    var cards = document.querySelectorAll(".card1.effect__click");
    for (var i = 0, len = cards.length; i < len; i++) {
        var card1 = cards[i];
        clickListener(card1);
    }

    function clickListener(card) {
        card.addEventListener("click", function () {
            var c = this.classList;
            c.contains("flipped") === true ? c.remove("flipped") : c.add("flipped");
        });
    }
})();/* CARD REVEAL */

(function ($) {
    $(document).ready(function () {

        $(document).on('click.card', '.card', function (e) {
            if ($(this).find('.card-reveal').length) {
                if ($(e.target).is($('.card-reveal .card-title')) || $(e.target).is($('.card-reveal .card-title i'))) {
                    // Make Reveal animate down and display none
                    $(this).find('.card-reveal').velocity({
                        translateY: 0
                    }, {
                        duration: 225,
                        queue: false,
                        easing: 'easeInOutQuad',
                        complete: function () {
                            $(this).css({
                                display: 'none'
                            });
                        }
                    });
                } else if ($(e.target).is($('.card .activator')) ||
                    $(e.target).is($('.card .activator i'))) {
                    $(this).find('.card-reveal').css({
                        display: 'block'
                    }).velocity("stop", false).velocity({
                        translateY: '-100%'
                    }, {
                        duration: 300,
                        queue: false,
                        easing: 'easeInOutQuad'
                    });
                }
            }


        });

    });
}(jQuery));//WOW SCRIPT - REVEAL ANIMATIONS WHEN SCROLLING

(function() {
  var MutationObserver, Util, WeakMap, getComputedStyle, getComputedStyleRX,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  Util = (function() {
    function Util() {}

    Util.prototype.extend = function(custom, defaults) {
      var key, value;
      for (key in defaults) {
        value = defaults[key];
        if (custom[key] == null) {
          custom[key] = value;
        }
      }
      return custom;
    };

    Util.prototype.isMobile = function(agent) {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(agent);
    };

    Util.prototype.createEvent = function(event, bubble, cancel, detail) {
      var customEvent;
      if (bubble == null) {
        bubble = false;
      }
      if (cancel == null) {
        cancel = false;
      }
      if (detail == null) {
        detail = null;
      }
      if (document.createEvent != null) {
        customEvent = document.createEvent('CustomEvent');
        customEvent.initCustomEvent(event, bubble, cancel, detail);
      } else if (document.createEventObject != null) {
        customEvent = document.createEventObject();
        customEvent.eventType = event;
      } else {
        customEvent.eventName = event;
      }
      return customEvent;
    };

    Util.prototype.emitEvent = function(elem, event) {
      if (elem.dispatchEvent != null) {
        return elem.dispatchEvent(event);
      } else if (event in (elem != null)) {
        return elem[event]();
      } else if (("on" + event) in (elem != null)) {
        return elem["on" + event]();
      }
    };

    Util.prototype.addEvent = function(elem, event, fn) {
      if (elem.addEventListener != null) {
        return elem.addEventListener(event, fn, false);
      } else if (elem.attachEvent != null) {
        return elem.attachEvent("on" + event, fn);
      } else {
        return elem[event] = fn;
      }
    };

    Util.prototype.removeEvent = function(elem, event, fn) {
      if (elem.removeEventListener != null) {
        return elem.removeEventListener(event, fn, false);
      } else if (elem.detachEvent != null) {
        return elem.detachEvent("on" + event, fn);
      } else {
        return delete elem[event];
      }
    };

    Util.prototype.innerHeight = function() {
      if ('innerHeight' in window) {
        return window.innerHeight;
      } else {
        return document.documentElement.clientHeight;
      }
    };

    return Util;

  })();

  WeakMap = this.WeakMap || this.MozWeakMap || (WeakMap = (function() {
    function WeakMap() {
      this.keys = [];
      this.values = [];
    }

    WeakMap.prototype.get = function(key) {
      var i, item, j, len, ref;
      ref = this.keys;
      for (i = j = 0, len = ref.length; j < len; i = ++j) {
        item = ref[i];
        if (item === key) {
          return this.values[i];
        }
      }
    };

    WeakMap.prototype.set = function(key, value) {
      var i, item, j, len, ref;
      ref = this.keys;
      for (i = j = 0, len = ref.length; j < len; i = ++j) {
        item = ref[i];
        if (item === key) {
          this.values[i] = value;
          return;
        }
      }
      this.keys.push(key);
      return this.values.push(value);
    };

    return WeakMap;

  })());

  MutationObserver = this.MutationObserver || this.WebkitMutationObserver || this.MozMutationObserver || (MutationObserver = (function() {
    function MutationObserver() {
      if (typeof console !== "undefined" && console !== null) {
        console.warn('MutationObserver is not supported by your browser.');
      }
      if (typeof console !== "undefined" && console !== null) {
        console.warn('WOW.js cannot detect dom mutations, please call .sync() after loading new content.');
      }
    }

    MutationObserver.notSupported = true;

    MutationObserver.prototype.observe = function() {};

    return MutationObserver;

  })());

  getComputedStyle = this.getComputedStyle || function(el, pseudo) {
    this.getPropertyValue = function(prop) {
      var ref;
      if (prop === 'float') {
        prop = 'styleFloat';
      }
      if (getComputedStyleRX.test(prop)) {
        prop.replace(getComputedStyleRX, function(_, _char) {
          return _char.toUpperCase();
        });
      }
      return ((ref = el.currentStyle) != null ? ref[prop] : void 0) || null;
    };
    return this;
  };

  getComputedStyleRX = /(\-([a-z]){1})/g;

  this.WOW = (function() {
    WOW.prototype.defaults = {
      boxClass: 'wow',
      animateClass: 'animated',
      offset: 0,
      mobile: true,
      live: true,
      callback: null,
      scrollContainer: null
    };

    function WOW(options) {
      if (options == null) {
        options = {};
      }
      this.scrollCallback = bind(this.scrollCallback, this);
      this.scrollHandler = bind(this.scrollHandler, this);
      this.resetAnimation = bind(this.resetAnimation, this);
      this.start = bind(this.start, this);
      this.scrolled = true;
      this.config = this.util().extend(options, this.defaults);
      if (options.scrollContainer != null) {
        this.config.scrollContainer = document.querySelector(options.scrollContainer);
      }
      this.animationNameCache = new WeakMap();
      this.wowEvent = this.util().createEvent(this.config.boxClass);
    }

    WOW.prototype.init = function() {
      var ref;
      this.element = window.document.documentElement;
      if ((ref = document.readyState) === "interactive" || ref === "complete") {
        this.start();
      } else {
        this.util().addEvent(document, 'DOMContentLoaded', this.start);
      }
      return this.finished = [];
    };

    WOW.prototype.start = function() {
      var box, j, len, ref;
      this.stopped = false;
      this.boxes = (function() {
        var j, len, ref, results;
        ref = this.element.querySelectorAll("." + this.config.boxClass);
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          box = ref[j];
          results.push(box);
        }
        return results;
      }).call(this);
      this.all = (function() {
        var j, len, ref, results;
        ref = this.boxes;
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          box = ref[j];
          results.push(box);
        }
        return results;
      }).call(this);
      if (this.boxes.length) {
        if (this.disabled()) {
          this.resetStyle();
        } else {
          ref = this.boxes;
          for (j = 0, len = ref.length; j < len; j++) {
            box = ref[j];
            this.applyStyle(box, true);
          }
        }
      }
      if (!this.disabled()) {
        this.util().addEvent(this.config.scrollContainer || window, 'scroll', this.scrollHandler);
        this.util().addEvent(window, 'resize', this.scrollHandler);
        this.interval = setInterval(this.scrollCallback, 50);
      }
      if (this.config.live) {
        return new MutationObserver((function(_this) {
          return function(records) {
            var k, len1, node, record, results;
            results = [];
            for (k = 0, len1 = records.length; k < len1; k++) {
              record = records[k];
              results.push((function() {
                var l, len2, ref1, results1;
                ref1 = record.addedNodes || [];
                results1 = [];
                for (l = 0, len2 = ref1.length; l < len2; l++) {
                  node = ref1[l];
                  results1.push(this.doSync(node));
                }
                return results1;
              }).call(_this));
            }
            return results;
          };
        })(this)).observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    };

    WOW.prototype.stop = function() {
      this.stopped = true;
      this.util().removeEvent(this.config.scrollContainer || window, 'scroll', this.scrollHandler);
      this.util().removeEvent(window, 'resize', this.scrollHandler);
      if (this.interval != null) {
        return clearInterval(this.interval);
      }
    };

    WOW.prototype.sync = function(element) {
      if (MutationObserver.notSupported) {
        return this.doSync(this.element);
      }
    };

    WOW.prototype.doSync = function(element) {
      var box, j, len, ref, results;
      if (element == null) {
        element = this.element;
      }
      if (element.nodeType !== 1) {
        return;
      }
      element = element.parentNode || element;
      ref = element.querySelectorAll("." + this.config.boxClass);
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        box = ref[j];
        if (indexOf.call(this.all, box) < 0) {
          this.boxes.push(box);
          this.all.push(box);
          if (this.stopped || this.disabled()) {
            this.resetStyle();
          } else {
            this.applyStyle(box, true);
          }
          results.push(this.scrolled = true);
        } else {
          results.push(void 0);
        }
      }
      return results;
    };

    WOW.prototype.show = function(box) {
      this.applyStyle(box);
      box.className = box.className + " " + this.config.animateClass;
      if (this.config.callback != null) {
        this.config.callback(box);
      }
      this.util().emitEvent(box, this.wowEvent);
      this.util().addEvent(box, 'animationend', this.resetAnimation);
      this.util().addEvent(box, 'oanimationend', this.resetAnimation);
      this.util().addEvent(box, 'webkitAnimationEnd', this.resetAnimation);
      this.util().addEvent(box, 'MSAnimationEnd', this.resetAnimation);
      return box;
    };

    WOW.prototype.applyStyle = function(box, hidden) {
      var delay, duration, iteration;
      duration = box.getAttribute('data-wow-duration');
      delay = box.getAttribute('data-wow-delay');
      iteration = box.getAttribute('data-wow-iteration');
      return this.animate((function(_this) {
        return function() {
          return _this.customStyle(box, hidden, duration, delay, iteration);
        };
      })(this));
    };

    WOW.prototype.animate = (function() {
      if ('requestAnimationFrame' in window) {
        return function(callback) {
          return window.requestAnimationFrame(callback);
        };
      } else {
        return function(callback) {
          return callback();
        };
      }
    })();

    WOW.prototype.resetStyle = function() {
      var box, j, len, ref, results;
      ref = this.boxes;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        box = ref[j];
        results.push(box.style.visibility = 'visible');
      }
      return results;
    };

    WOW.prototype.resetAnimation = function(event) {
      var target;
      if (event.type.toLowerCase().indexOf('animationend') >= 0) {
        target = event.target || event.srcElement;
        return target.className = target.className.replace(this.config.animateClass, '').trim();
      }
    };

    WOW.prototype.customStyle = function(box, hidden, duration, delay, iteration) {
      if (hidden) {
        this.cacheAnimationName(box);
      }
      box.style.visibility = hidden ? 'hidden' : 'visible';
      if (duration) {
        this.vendorSet(box.style, {
          animationDuration: duration
        });
      }
      if (delay) {
        this.vendorSet(box.style, {
          animationDelay: delay
        });
      }
      if (iteration) {
        this.vendorSet(box.style, {
          animationIterationCount: iteration
        });
      }
      this.vendorSet(box.style, {
        animationName: hidden ? 'none' : this.cachedAnimationName(box)
      });
      return box;
    };

    WOW.prototype.vendors = ["moz", "webkit"];

    WOW.prototype.vendorSet = function(elem, properties) {
      var name, results, value, vendor;
      results = [];
      for (name in properties) {
        value = properties[name];
        elem["" + name] = value;
        results.push((function() {
          var j, len, ref, results1;
          ref = this.vendors;
          results1 = [];
          for (j = 0, len = ref.length; j < len; j++) {
            vendor = ref[j];
            results1.push(elem["" + vendor + (name.charAt(0).toUpperCase()) + (name.substr(1))] = value);
          }
          return results1;
        }).call(this));
      }
      return results;
    };

    WOW.prototype.vendorCSS = function(elem, property) {
      var j, len, ref, result, style, vendor;
      style = getComputedStyle(elem);
      result = style.getPropertyCSSValue(property);
      ref = this.vendors;
      for (j = 0, len = ref.length; j < len; j++) {
        vendor = ref[j];
        result = result || style.getPropertyCSSValue("-" + vendor + "-" + property);
      }
      return result;
    };

    WOW.prototype.animationName = function(box) {
      var animationName;
      try {
        animationName = this.vendorCSS(box, 'animation-name').cssText;
      } catch (_error) {
        animationName = getComputedStyle(box).getPropertyValue('animation-name');
      }
      if (animationName === 'none') {
        return '';
      } else {
        return animationName;
      }
    };

    WOW.prototype.cacheAnimationName = function(box) {
      return this.animationNameCache.set(box, this.animationName(box));
    };

    WOW.prototype.cachedAnimationName = function(box) {
      return this.animationNameCache.get(box);
    };

    WOW.prototype.scrollHandler = function() {
      return this.scrolled = true;
    };

    WOW.prototype.scrollCallback = function() {
      var box;
      if (this.scrolled) {
        this.scrolled = false;
        this.boxes = (function() {
          var j, len, ref, results;
          ref = this.boxes;
          results = [];
          for (j = 0, len = ref.length; j < len; j++) {
            box = ref[j];
            if (!(box)) {
              continue;
            }
            if (this.isVisible(box)) {
              this.show(box);
              continue;
            }
            results.push(box);
          }
          return results;
        }).call(this);
        if (!(this.boxes.length || this.config.live)) {
          return this.stop();
        }
      }
    };

    WOW.prototype.offsetTop = function(element) {
      var top;
      while (element.offsetTop === void 0) {
        element = element.parentNode;
      }
      top = element.offsetTop;
      while (element = element.offsetParent) {
        top += element.offsetTop;
      }
      return top;
    };

    WOW.prototype.isVisible = function(box) {
      var bottom, offset, top, viewBottom, viewTop;
      offset = box.getAttribute('data-wow-offset') || this.config.offset;
      viewTop = (this.config.scrollContainer && this.config.scrollContainer.scrollTop) || window.pageYOffset;
      viewBottom = viewTop + Math.min(this.element.clientHeight, this.util().innerHeight()) - offset;
      top = this.offsetTop(box);
      bottom = top + box.clientHeight;
      return top <= viewBottom && bottom >= viewTop;
    };

    WOW.prototype.util = function() {
      return this._util != null ? this._util : this._util = new Util();
    };

    WOW.prototype.disabled = function() {
      return !this.config.mobile && this.util().isMobile(navigator.userAgent);
    };

    return WOW;

  })();

}).call(this);// VIDEO BACKGROUND

$( document ).ready(function() {

    scaleVideoContainer();

    initBannerVideoSize('.video-container .poster img');
    initBannerVideoSize('.video-container .filter');
    initBannerVideoSize('.video-container video');

    $(window).on('resize', function() {
        scaleVideoContainer();
        scaleBannerVideoSize('.video-container .poster img');
        scaleBannerVideoSize('.video-container .filter');
        scaleBannerVideoSize('.video-container video');
    });

});

function scaleVideoContainer() {

    var height = $(window).height() + 5;
    var unitHeight = parseInt(height) + 'px';
    $('.homepage-hero-module').css('height',unitHeight);

}

function initBannerVideoSize(element){

    $(element).each(function(){
        $(this).data('height', $(this).height());
        $(this).data('width', $(this).width());
    });

    scaleBannerVideoSize(element);

}

function scaleBannerVideoSize(element){

    var windowWidth = $(window).width(),
    windowHeight = $(window).height() + 5,
    videoWidth,
    videoHeight;

    /* console.log(windowHeight); */

    $(element).each(function(){
        var videoAspectRatio = $(this).data('height')/$(this).data('width');

        $(this).width(windowWidth);

        if(windowWidth < 1000){
            videoHeight = windowHeight;
            videoWidth = videoHeight / videoAspectRatio;
            $(this).css({'margin-top' : 0, 'margin-left' : -(videoWidth - windowWidth) / 2 + 'px'});

            $(this).width(videoWidth).height(videoHeight);
        }

        $('.homepage-hero-module .video-container video').addClass('fadeIn animated');

    });
}// MORPHING HAMBURGER ICON
(function () {
    $('.hamburger-menu').on('click', function () {
        $(this).toggleClass('animate')
        $('.bar').toggleClass('animate');
    })
})();/*
 * Toastr
 * Copyright 2012-2015
 * Authors: John Papa, Hans Fjllemark, and Tim Ferrell.
 * All Rights Reserved.
 * Use, reproduction, distribution, and modification of this code is subject to the terms and
 * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
 *
 * ARIA Support: Greta Krafsig
 *
 * Project: https://github.com/CodeSeven/toastr
 */
/* global define */
(function (define) {
    define(['jquery'], function ($) {
        return (function () {
            var $container;
            var listener;
            var toastId = 0;
            var toastType = {
                error: 'error',
                info: 'info',
                success: 'success',
                warning: 'warning'
            };

            var toastr = {
                clear: clear,
                remove: remove,
                error: error,
                getContainer: getContainer,
                info: info,
                options: {},
                subscribe: subscribe,
                success: success,
                version: '2.1.2',
                warning: warning
            };

            var previousToast;

            return toastr;

            ////////////////

            function error(message, title, optionsOverride) {
                return notify({
                    type: toastType.error,
                    iconClass: getOptions().iconClasses.error,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function getContainer(options, create) {
                if (!options) { options = getOptions(); }
                $container = $('#' + options.containerId);
                if ($container.length) {
                    return $container;
                }
                if (create) {
                    $container = createContainer(options);
                }
                return $container;
            }

            function info(message, title, optionsOverride) {
                return notify({
                    type: toastType.info,
                    iconClass: getOptions().iconClasses.info,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function subscribe(callback) {
                listener = callback;
            }

            function success(message, title, optionsOverride) {
                return notify({
                    type: toastType.success,
                    iconClass: getOptions().iconClasses.success,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function warning(message, title, optionsOverride) {
                return notify({
                    type: toastType.warning,
                    iconClass: getOptions().iconClasses.warning,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function clear($toastElement, clearOptions) {
                var options = getOptions();
                if (!$container) { getContainer(options); }
                if (!clearToast($toastElement, options, clearOptions)) {
                    clearContainer(options);
                }
            }

            function remove($toastElement) {
                var options = getOptions();
                if (!$container) { getContainer(options); }
                if ($toastElement && $(':focus', $toastElement).length === 0) {
                    removeToast($toastElement);
                    return;
                }
                if ($container.children().length) {
                    $container.remove();
                }
            }

            // internal functions

            function clearContainer (options) {
                var toastsToClear = $container.children();
                for (var i = toastsToClear.length - 1; i >= 0; i--) {
                    clearToast($(toastsToClear[i]), options);
                }
            }

            function clearToast ($toastElement, options, clearOptions) {
                var force = clearOptions && clearOptions.force ? clearOptions.force : false;
                if ($toastElement && (force || $(':focus', $toastElement).length === 0)) {
                    $toastElement[options.hideMethod]({
                        duration: options.hideDuration,
                        easing: options.hideEasing,
                        complete: function () { removeToast($toastElement); }
                    });
                    return true;
                }
                return false;
            }

            function createContainer(options) {
                $container = $('<div/>')
                    .attr('id', options.containerId)
                    .addClass(options.positionClass)
                    .attr('aria-live', 'polite')
                    .attr('role', 'alert');

                $container.appendTo($(options.target));
                return $container;
            }

            function getDefaults() {
                return {
                    tapToDismiss: true,
                    toastClass: 'toast',
                    containerId: 'toast-container',
                    debug: false,

                    showMethod: 'fadeIn', //fadeIn, slideDown, and show are built into jQuery
                    showDuration: 300,
                    showEasing: 'swing', //swing and linear are built into jQuery
                    onShown: undefined,
                    hideMethod: 'fadeOut',
                    hideDuration: 1000,
                    hideEasing: 'swing',
                    onHidden: undefined,
                    closeMethod: false,
                    closeDuration: false,
                    closeEasing: false,

                    extendedTimeOut: 1000,
                    iconClasses: {
                        error: 'toast-error',
                        info: 'toast-info',
                        success: 'toast-success',
                        warning: 'toast-warning'
                    },
                    iconClass: 'toast-info',
                    positionClass: 'toast-top-right',
                    timeOut: 5000, // Set timeOut and extendedTimeOut to 0 to make it sticky
                    titleClass: 'toast-title',
                    messageClass: 'toast-message',
                    escapeHtml: false,
                    target: 'body',
                    closeHtml: '<button type="button">&times;</button>',
                    newestOnTop: true,
                    preventDuplicates: false,
                    progressBar: false
                };
            }

            function publish(args) {
                if (!listener) { return; }
                listener(args);
            }

            function notify(map) {
                var options = getOptions();
                var iconClass = map.iconClass || options.iconClass;

                if (typeof (map.optionsOverride) !== 'undefined') {
                    options = $.extend(options, map.optionsOverride);
                    iconClass = map.optionsOverride.iconClass || iconClass;
                }

                if (shouldExit(options, map)) { return; }

                toastId++;

                $container = getContainer(options, true);

                var intervalId = null;
                var $toastElement = $('<div/>');
                var $titleElement = $('<div/>');
                var $messageElement = $('<div/>');
                var $progressElement = $('<div/>');
                var $closeElement = $(options.closeHtml);
                var progressBar = {
                    intervalId: null,
                    hideEta: null,
                    maxHideTime: null
                };
                var response = {
                    toastId: toastId,
                    state: 'visible',
                    startTime: new Date(),
                    options: options,
                    map: map
                };

                personalizeToast();

                displayToast();

                handleEvents();

                publish(response);

                if (options.debug && console) {
                    console.log(response);
                }

                return $toastElement;

                function escapeHtml(source) {
                    if (source == null)
                        source = "";

                    return new String(source)
                        .replace(/&/g, '&amp;')
                        .replace(/"/g, '&quot;')
                        .replace(/'/g, '&#39;')
                        .replace(/</g, '&lt;')
                        .replace(/>/g, '&gt;');
                }

                function personalizeToast() {
                    setIcon();
                    setTitle();
                    setMessage();
                    setCloseButton();
                    setProgressBar();
                    setSequence();
                }

                function handleEvents() {
                    $toastElement.hover(stickAround, delayedHideToast);
                    if (!options.onclick && options.tapToDismiss) {
                        $toastElement.click(hideToast);
                    }

                    if (options.closeButton && $closeElement) {
                        $closeElement.click(function (event) {
                            if (event.stopPropagation) {
                                event.stopPropagation();
                            } else if (event.cancelBubble !== undefined && event.cancelBubble !== true) {
                                event.cancelBubble = true;
                            }
                            hideToast(true);
                        });
                    }

                    if (options.onclick) {
                        $toastElement.click(function (event) {
                            options.onclick(event);
                            hideToast();
                        });
                    }
                }

                function displayToast() {
                    $toastElement.hide();

                    $toastElement[options.showMethod](
                        {duration: options.showDuration, easing: options.showEasing, complete: options.onShown}
                    );

                    if (options.timeOut > 0) {
                        intervalId = setTimeout(hideToast, options.timeOut);
                        progressBar.maxHideTime = parseFloat(options.timeOut);
                        progressBar.hideEta = new Date().getTime() + progressBar.maxHideTime;
                        if (options.progressBar) {
                            progressBar.intervalId = setInterval(updateProgress, 10);
                        }
                    }
                }

                function setIcon() {
                    if (map.iconClass) {
                        $toastElement.addClass(options.toastClass).addClass(iconClass);
                    }
                }

                function setSequence() {
                    if (options.newestOnTop) {
                        $container.prepend($toastElement);
                    } else {
                        $container.append($toastElement);
                    }
                }

                function setTitle() {
                    if (map.title) {
                        $titleElement.append(!options.escapeHtml ? map.title : escapeHtml(map.title)).addClass(options.titleClass);
                        $toastElement.append($titleElement);
                    }
                }

                function setMessage() {
                    if (map.message) {
                        $messageElement.append(!options.escapeHtml ? map.message : escapeHtml(map.message)).addClass(options.messageClass);
                        $toastElement.append($messageElement);
                    }
                }

                function setCloseButton() {
                    if (options.closeButton) {
                        $closeElement.addClass('toast-close-button').attr('role', 'button');
                        $toastElement.prepend($closeElement);
                    }
                }

                function setProgressBar() {
                    if (options.progressBar) {
                        $progressElement.addClass('toast-progress');
                        $toastElement.prepend($progressElement);
                    }
                }

                function shouldExit(options, map) {
                    if (options.preventDuplicates) {
                        if (map.message === previousToast) {
                            return true;
                        } else {
                            previousToast = map.message;
                        }
                    }
                    return false;
                }

                function hideToast(override) {
                    var method = override && options.closeMethod !== false ? options.closeMethod : options.hideMethod;
                    var duration = override && options.closeDuration !== false ?
                        options.closeDuration : options.hideDuration;
                    var easing = override && options.closeEasing !== false ? options.closeEasing : options.hideEasing;
                    if ($(':focus', $toastElement).length && !override) {
                        return;
                    }
                    clearTimeout(progressBar.intervalId);
                    return $toastElement[method]({
                        duration: duration,
                        easing: easing,
                        complete: function () {
                            removeToast($toastElement);
                            if (options.onHidden && response.state !== 'hidden') {
                                options.onHidden();
                            }
                            response.state = 'hidden';
                            response.endTime = new Date();
                            publish(response);
                        }
                    });
                }

                function delayedHideToast() {
                    if (options.timeOut > 0 || options.extendedTimeOut > 0) {
                        intervalId = setTimeout(hideToast, options.extendedTimeOut);
                        progressBar.maxHideTime = parseFloat(options.extendedTimeOut);
                        progressBar.hideEta = new Date().getTime() + progressBar.maxHideTime;
                    }
                }

                function stickAround() {
                    clearTimeout(intervalId);
                    progressBar.hideEta = 0;
                    $toastElement.stop(true, true)[options.showMethod](
                        {duration: options.showDuration, easing: options.showEasing}
                    );
                }

                function updateProgress() {
                    var percentage = ((progressBar.hideEta - (new Date().getTime())) / progressBar.maxHideTime) * 100;
                    $progressElement.width(percentage + '%');
                }
            }

            function getOptions() {
                return $.extend({}, getDefaults(), toastr.options);
            }

            function removeToast($toastElement) {
                if (!$container) { $container = getContainer(); }
                if ($toastElement.is(':visible')) {
                    return;
                }
                $toastElement.remove();
                $toastElement = null;
                if ($container.children().length === 0) {
                    $container.remove();
                    previousToast = undefined;
                }
            }

        })();
    });
}(typeof define === 'function' && define.amd ? define : function (deps, factory) {
    if (typeof module !== 'undefined' && module.exports) { //Node
        module.exports = factory(require('jquery'));
    } else {
        window.toastr = factory(window.jQuery);
    }
}));
/* SCROLLING NAVBAR */
//jQuery to collapse the navbar on scroll
$(window).scroll(function () {
    if ($(".navbar").offset().top > 50) {
        $(".navbar-fixed-top").addClass("top-nav-collapse");
    } else {
        $(".navbar-fixed-top").removeClass("top-nav-collapse");
    }
});

//jQuery for page scrolling feature - requires jQuery Easing plugin
$(function () {
    $('a.page-scroll').bind('click', function (event) {
        var $anchor = $(this);
        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1500, 'easeInOutExpo');
        event.preventDefault();
    });
});
/* COLLAPSIBLE */

(function ($) {
    $.fn.collapsible = function (options) {
        var defaults = {
            accordion: undefined
        };

        options = $.extend(defaults, options);


        return this.each(function () {

            var $this = $(this);

            var $panel_headers = $(this).find('> li > .collapsible-header');

            var collapsible_type = $this.data("collapsible");

            // Turn off any existing event handlers
            $this.off('click.collapse', '.collapsible-header');
            $panel_headers.off('click.collapse');


            /****************
            Helper Functions
            ****************/

            // Accordion Open
            function accordionOpen(object) {
                $panel_headers = $this.find('> li > .collapsible-header');
                if (object.hasClass('active')) {
                    object.parent().addClass('active');
                } else {
                    object.parent().removeClass('active');
                }
                if (object.parent().hasClass('active')) {
                    object.siblings('.collapsible-body').stop(true, false).slideDown({
                        duration: 350,
                        easing: "easeOutQuart",
                        queue: false,
                        complete: function () {
                            $(this).css('height', '');
                        }
                    });
                } else {
                    object.siblings('.collapsible-body').stop(true, false).slideUp({
                        duration: 350,
                        easing: "easeOutQuart",
                        queue: false,
                        complete: function () {
                            $(this).css('height', '');
                        }
                    });
                }

                $panel_headers.not(object).removeClass('active').parent().removeClass('active');
                $panel_headers.not(object).parent().children('.collapsible-body').stop(true, false).slideUp({
                    duration: 350,
                    easing: "easeOutQuart",
                    queue: false,
                    complete: function () {
                        $(this).css('height', '');
                    }
                });
            }

            // Expandable Open
            function expandableOpen(object) {
                if (object.hasClass('active')) {
                    object.parent().addClass('active');
                } else {
                    object.parent().removeClass('active');
                }
                if (object.parent().hasClass('active')) {
                    object.siblings('.collapsible-body').stop(true, false).slideDown({
                        duration: 350,
                        easing: "easeOutQuart",
                        queue: false,
                        complete: function () {
                            $(this).css('height', '');
                        }
                    });
                } else {
                    object.siblings('.collapsible-body').stop(true, false).slideUp({
                        duration: 350,
                        easing: "easeOutQuart",
                        queue: false,
                        complete: function () {
                            $(this).css('height', '');
                        }
                    });
                }
            }

            /**
             * Check if object is children of panel header
             * @param  {Object}  object Jquery object
             * @return {Boolean} true if it is children
             */
            function isChildrenOfPanelHeader(object) {

                var panelHeader = getPanelHeader(object);

                return panelHeader.length > 0;
            }

            /**
             * Get panel header from a children element
             * @param  {Object} object Jquery object
             * @return {Object} panel header object
             */
            function getPanelHeader(object) {

                return object.closest('li > .collapsible-header');
            }

            /*****  End Helper Functions  *****/



            if (options.accordion || collapsible_type === "accordion" || collapsible_type === undefined) { // Handle Accordion
                // Add click handler to only direct collapsible header children
                $panel_headers = $this.find('> li > .collapsible-header');
                $panel_headers.on('click.collapse', function (e) {
                    var element = $(e.target);

                    if (isChildrenOfPanelHeader(element)) {
                        element = getPanelHeader(element);
                    }

                    element.toggleClass('active');
                    accordionOpen(element);
                });
                // Open first active
                accordionOpen($panel_headers.filter('.active').first());
            } else { // Handle Expandables
                $panel_headers.each(function () {
                    // Add click handler to only direct collapsible header children
                    $(this).on('click.collapse', function (e) {
                        var element = $(e.target);
                        if (isChildrenOfPanelHeader(element)) {
                            element = getPanelHeader(element);
                        }
                        element.toggleClass('active');
                        expandableOpen(element);
                    });
                    // Open any bodies that have the active class
                    if ($(this).hasClass('active')) {
                        expandableOpen($(this));
                    }

                });
            }

        });
    };

    $(document).ready(function () {
        $('.collapsible').collapsible();
    });
}(jQuery));/* SIDE NAV */

(function ($) {

    var methods = {
        init: function (options) {
            var defaults = {
                menuWidth: 240,
                edge: 'left',
                closeOnClick: false
            };
            options = $.extend(defaults, options);

            $(this).each(function () {
                var $this = $(this);
                var menu_id = $("#" + $this.attr('data-activates'));

                // Set to width
                if (options.menuWidth != 240) {
                    menu_id.css('width', options.menuWidth);
                }

                // Add Touch Area
                $('body').append($('<div class="drag-target"></div>'));

                if (options.edge == 'left') {
                    menu_id.css('left', -1 * (options.menuWidth + 10));
                    $('.drag-target').css({
                        'left': 0
                    }); // Add Touch Area
                } else {
                    menu_id.addClass('right-aligned') // Change text-alignment to right
                        .css('right', -1 * (options.menuWidth + 10))
                        .css('left', '');
                    $('.drag-target').css({
                        'right': 0
                    }); // Add Touch Area
                }

                // If fixed sidenav, bring menu out
                if (menu_id.hasClass('fixed')) {
                    if (window.innerWidth > 992) {
                        menu_id.css('left', 0);
                    }
                }

                // Window resize to reset on large screens fixed
                if (menu_id.hasClass('fixed')) {
                    $(window).resize(function () {
                        if (window.innerWidth > 992) {
                            // Close menu if window is resized bigger than 992 and user has fixed sidenav
                            if ($('#sidenav-overlay').css('opacity') !== 0 && menuOut) {
                                removeMenu(true);
                            } else {
                                menu_id.removeAttr('style');
                                menu_id.css('width', options.menuWidth);
                            }
                        } else if (menuOut === false) {
                            if (options.edge === 'left')
                                menu_id.css('left', -1 * (options.menuWidth + 10));
                            else
                                menu_id.css('right', -1 * (options.menuWidth + 10));
                        }

                    });
                }

                // if closeOnClick, then add close event for all a tags in side sideNav
                if (options.closeOnClick === true) {
                    menu_id.on("click.itemclick", "a:not(.collapsible-header)", function () {
                        removeMenu();
                    });
                }

                function removeMenu(restoreNav) {
                    panning = false;
                    menuOut = false;

                    // Reenable scrolling
                    $('body').css('overflow', '');

                    $('#sidenav-overlay').velocity({
                        opacity: 0
                    }, {
                        duration: 200,
                        queue: false,
                        easing: 'easeOutQuad',
                        complete: function () {
                            $(this).remove();
                        }
                    });
                    if (options.edge === 'left') {
                        // Reset phantom div
                        $('.drag-target').css({
                            width: '',
                            right: '',
                            left: '0'
                        });
                        menu_id.velocity({
                            left: -1 * (options.menuWidth + 10)
                        }, {
                            duration: 200,
                            queue: false,
                            easing: 'easeOutCubic',
                            complete: function () {
                                if (restoreNav === true) {
                                    // Restore Fixed sidenav
                                    menu_id.removeAttr('style');
                                    menu_id.css('width', options.menuWidth);
                                }
                            }

                        });
                    } else {
                        // Reset phantom div
                        $('.drag-target').css({
                            width: '',
                            right: '0',
                            left: ''
                        });
                        menu_id.velocity({
                            right: -1 * (options.menuWidth + 10)
                        }, {
                            duration: 200,
                            queue: false,
                            easing: 'easeOutCubic',
                            complete: function () {
                                if (restoreNav === true) {
                                    // Restore Fixed sidenav
                                    menu_id.removeAttr('style');
                                    menu_id.css('width', options.menuWidth);
                                }
                            }
                        });
                    }
                }



                // Touch Event
                var panning = false;
                var menuOut = false;

                $('.drag-target').on('click', function () {
                    removeMenu();
                });

                $('.drag-target').hammer({
                    prevent_default: false
                }).bind('pan', function (e) {

                    if (e.gesture.pointerType == "touch") {

                        var direction = e.gesture.direction;
                        var x = e.gesture.center.x;
                        var y = e.gesture.center.y;
                        var velocityX = e.gesture.velocityX;

                        // Disable Scrolling
                        $('body').css('overflow', 'hidden');

                        // If overlay does not exist, create one and if it is clicked, close menu
                        if ($('#sidenav-overlay').length === 0) {
                            var overlay = $('<div id="sidenav-overlay"></div>');
                            overlay.css('opacity', 0).click(function () {
                                removeMenu();
                            });
                            $('body').append(overlay);
                        }

                        // Keep within boundaries
                        if (options.edge === 'left') {
                            if (x > options.menuWidth) {
                                x = options.menuWidth;
                            } else if (x < 0) {
                                x = 0;
                            }
                        }

                        if (options.edge === 'left') {
                            // Left Direction
                            if (x < (options.menuWidth / 2)) {
                                menuOut = false;
                            }
                            // Right Direction
                            else if (x >= (options.menuWidth / 2)) {
                                menuOut = true;
                            }

                            menu_id.css('left', (x - options.menuWidth));
                        } else {
                            // Left Direction
                            if (x < (window.innerWidth - options.menuWidth / 2)) {
                                menuOut = true;
                            }
                            // Right Direction
                            else if (x >= (window.innerWidth - options.menuWidth / 2)) {
                                menuOut = false;
                            }
                            var rightPos = -1 * (x - options.menuWidth / 2);
                            if (rightPos > 0) {
                                rightPos = 0;
                            }

                            menu_id.css('right', rightPos);
                        }




                        // Percentage overlay
                        var overlayPerc;
                        if (options.edge === 'left') {
                            overlayPerc = x / options.menuWidth;
                            $('#sidenav-overlay').velocity({
                                opacity: overlayPerc
                            }, {
                                duration: 50,
                                queue: false,
                                easing: 'easeOutQuad'
                            });
                        } else {
                            overlayPerc = Math.abs((x - window.innerWidth) / options.menuWidth);
                            $('#sidenav-overlay').velocity({
                                opacity: overlayPerc
                            }, {
                                duration: 50,
                                queue: false,
                                easing: 'easeOutQuad'
                            });
                        }
                    }

                }).bind('panend', function (e) {

                    if (e.gesture.pointerType == "touch") {
                        var velocityX = e.gesture.velocityX;
                        panning = false;
                        if (options.edge === 'left') {
                            // If velocityX <= 0.3 then the user is flinging the menu closed so ignore menuOut
                            if ((menuOut && velocityX <= 0.3) || velocityX < -0.5) {
                                menu_id.velocity({
                                    left: 0
                                }, {
                                    duration: 300,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('#sidenav-overlay').velocity({
                                    opacity: 1
                                }, {
                                    duration: 50,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('.drag-target').css({
                                    width: '50%',
                                    right: 0,
                                    left: ''
                                });
                            } else if (!menuOut || velocityX > 0.3) {
                                // Enable Scrolling
                                $('body').css('overflow', '');
                                // Slide menu closed
                                menu_id.velocity({
                                    left: -1 * (options.menuWidth + 10)
                                }, {
                                    duration: 200,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('#sidenav-overlay').velocity({
                                    opacity: 0
                                }, {
                                    duration: 200,
                                    queue: false,
                                    easing: 'easeOutQuad',
                                    complete: function () {
                                        $(this).remove();
                                    }
                                });
                                $('.drag-target').css({
                                    width: '10px',
                                    right: '',
                                    left: 0
                                });
                            }
                        } else {
                            if ((menuOut && velocityX >= -0.3) || velocityX > 0.5) {
                                menu_id.velocity({
                                    right: 0
                                }, {
                                    duration: 300,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('#sidenav-overlay').velocity({
                                    opacity: 1
                                }, {
                                    duration: 50,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('.drag-target').css({
                                    width: '50%',
                                    right: '',
                                    left: 0
                                });
                            } else if (!menuOut || velocityX < -0.3) {
                                // Enable Scrolling
                                $('body').css('overflow', '');
                                // Slide menu closed
                                menu_id.velocity({
                                    right: -1 * (options.menuWidth + 10)
                                }, {
                                    duration: 200,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('#sidenav-overlay').velocity({
                                    opacity: 0
                                }, {
                                    duration: 200,
                                    queue: false,
                                    easing: 'easeOutQuad',
                                    complete: function () {
                                        $(this).remove();
                                    }
                                });
                                $('.drag-target').css({
                                    width: '10px',
                                    right: 0,
                                    left: ''
                                });
                            }
                        }

                    }
                });

                $this.click(function () {
                    if (menuOut === true) {
                        menuOut = false;
                        panning = false;
                        removeMenu();
                    } else {

                        // Disable Scrolling
                        $('body').css('overflow', 'hidden');

                        if (options.edge === 'left') {
                            $('.drag-target').css({
                                width: '50%',
                                right: 0,
                                left: ''
                            });
                            menu_id.velocity({
                                left: 0
                            }, {
                                duration: 300,
                                queue: false,
                                easing: 'easeOutQuad'
                            });
                        } else {
                            $('.drag-target').css({
                                width: '50%',
                                right: '',
                                left: 0
                            });
                            menu_id.velocity({
                                right: 0
                            }, {
                                duration: 300,
                                queue: false,
                                easing: 'easeOutQuad'
                            });
                            menu_id.css('left', '');
                        }

                        var overlay = $('<div id="sidenav-overlay"></div>');
                        overlay.css('opacity', 0)
                            .click(function () {
                                menuOut = false;
                                panning = false;
                                removeMenu();
                                overlay.velocity({
                                    opacity: 0
                                }, {
                                    duration: 300,
                                    queue: false,
                                    easing: 'easeOutQuad',
                                    complete: function () {
                                        $(this).remove();
                                    }
                                });

                            });
                        $('body').append(overlay);
                        overlay.velocity({
                            opacity: 1
                        }, {
                            duration: 300,
                            queue: false,
                            easing: 'easeOutQuad',
                            complete: function () {
                                menuOut = true;
                                panning = false;
                            }
                        });
                    }

                    return false;
                });
            });


        },
        show: function () {
            this.trigger('click');
        },
        hide: function () {
            $('#sidenav-overlay').trigger('click');
        }
    };


    $.fn.sideNav = function (methodOrOptions) {
        if (methods[methodOrOptions]) {
            return methods[methodOrOptions].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof methodOrOptions === 'object' || !methodOrOptions) {
            // Default to "init"
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + methodOrOptions + ' does not exist on jQuery.sideNav');
        }
    }; // Plugin end
}(jQuery));/* LEAN MODAL */

(function ($) {
    var _stack = 0,
        _lastID = 0,
        _generateID = function () {
            _lastID++;
            return 'materialize-lean-overlay-' + _lastID;
        };

    $.fn.extend({
        openModal: function (options) {

            $('body').css('overflow', 'hidden');

            var defaults = {
                    opacity: 0.5,
                    in_duration: 350,
                    out_duration: 250,
                    ready: undefined,
                    complete: undefined,
                    dismissible: true,
                    starting_top: '4%'
                },
                overlayID = _generateID(),
                $modal = $(this),
                $overlay = $('<div class="lean-overlay"></div>'),
                lStack = (++_stack);

            // Store a reference of the overlay
            $overlay.attr('id', overlayID).css('z-index', 1000 + lStack * 2);
            $modal.data('overlay-id', overlayID).css('z-index', 1000 + lStack * 2 + 1);

            $("body").append($overlay);

            // Override defaults
            options = $.extend(defaults, options);

            if (options.dismissible) {
                $overlay.click(function () {
                    $modal.closeModal(options);
                });
                // Return on ESC
                $(document).on('keyup.leanModal' + overlayID, function (e) {
                    if (e.keyCode === 27) { // ESC key
                        $modal.closeModal(options);
                    }
                });
            }

            $modal.find(".modal-close").on('click.close', function (e) {
                $modal.closeModal(options);
            });

            $overlay.css({
                display: "block",
                opacity: 0
            });

            $modal.css({
                display: "block",
                opacity: 0
            });

            $overlay.velocity({
                opacity: options.opacity
            }, {
                duration: options.in_duration,
                queue: false,
                ease: "easeOutCubic"
            });
            $modal.data('associated-overlay', $overlay[0]);

            // Define Bottom Sheet animation
            if ($modal.hasClass('bottom-sheet')) {
                $modal.velocity({
                    bottom: "0",
                    opacity: 1
                }, {
                    duration: options.in_duration,
                    queue: false,
                    ease: "easeOutCubic",
                    // Handle modal ready callback
                    complete: function () {
                        if (typeof (options.ready) === "function") {
                            options.ready();
                        }
                    }
                });
            } else {
                $.Velocity.hook($modal, "scaleX", 0.7);
                $modal.css({
                    top: options.starting_top
                });
                $modal.velocity({
                    top: "10%",
                    opacity: 1,
                    scaleX: '1'
                }, {
                    duration: options.in_duration,
                    queue: false,
                    ease: "easeOutCubic",
                    // Handle modal ready callback
                    complete: function () {
                        if (typeof (options.ready) === "function") {
                            options.ready();
                        }
                    }
                });
            }


        }
    });

    $.fn.extend({
        closeModal: function (options) {
            var defaults = {
                    out_duration: 250,
                    complete: undefined
                },
                $modal = $(this),
                overlayID = $modal.data('overlay-id'),
                $overlay = $('#' + overlayID);

            options = $.extend(defaults, options);

            // Disable scrolling
            $('body').css('overflow', '');

            $modal.find('.modal-close').off('click.close');
            $(document).off('keyup.leanModal' + overlayID);

            $overlay.velocity({
                opacity: 0
            }, {
                duration: options.out_duration,
                queue: false,
                ease: "easeOutQuart"
            });


            // Define Bottom Sheet animation
            if ($modal.hasClass('bottom-sheet')) {
                $modal.velocity({
                    bottom: "-100%",
                    opacity: 0
                }, {
                    duration: options.out_duration,
                    queue: false,
                    ease: "easeOutCubic",
                    // Handle modal ready callback
                    complete: function () {
                        $overlay.css({
                            display: "none"
                        });

                        // Call complete callback
                        if (typeof (options.complete) === "function") {
                            options.complete();
                        }
                        $overlay.remove();
                        _stack--;
                    }
                });
            } else {
                $modal.velocity({
                    top: options.starting_top,
                    opacity: 0,
                    scaleX: 0.7
                }, {
                    duration: options.out_duration,
                    complete: function () {

                        $(this).css('display', 'none');
                        // Call complete callback
                        if (typeof (options.complete) === "function") {
                            options.complete();
                        }
                        $overlay.remove();
                        _stack--;
                    }
                });
            }
        }
    });

    $.fn.extend({
        leanModal: function (option) {
            return this.each(function () {

                var defaults = {
                        starting_top: '4%'
                    },
                    // Override defaults
                    options = $.extend(defaults, option);

                // Close Handlers
                $(this).click(function (e) {
                    options.starting_top = ($(this).offset().top - $(window).scrollTop()) / 1.15;
                    var modal_id = $(this).attr("href") || '#' + $(this).data('target');
                    $(modal_id).openModal(options);
                    e.preventDefault();
                }); // done set on click
            }); // done return
        }
    });
})(jQuery);/* MATERIALBOX */

(function ($) {

    $.fn.materialbox = function () {

        return this.each(function () {

            if ($(this).hasClass('initialized')) {
                return;
            }

            $(this).addClass('initialized');

            var overlayActive = false;
            var doneAnimating = true;
            var inDuration = 275;
            var outDuration = 200;
            var origin = $(this);
            var placeholder = $('<div></div>').addClass('material-placeholder');
            var originalWidth = 0;
            var originalHeight = 0;
            origin.wrap(placeholder);


            origin.on('click', function () {
                var placeholder = origin.parent('.material-placeholder');
                var windowWidth = window.innerWidth;
                var windowHeight = window.innerHeight;
                var originalWidth = origin.width();
                var originalHeight = origin.height();


                // If already modal, return to original
                if (doneAnimating === false) {
                    returnToOriginal();
                    return false;
                } else if (overlayActive && doneAnimating === true) {
                    returnToOriginal();
                    return false;
                }


                // Set states
                doneAnimating = false;
                origin.addClass('active');
                overlayActive = true;

                // Set positioning for placeholder

                placeholder.css({
                    width: placeholder[0].getBoundingClientRect().width,
                    height: placeholder[0].getBoundingClientRect().height,
                    position: 'relative',
                    top: 0,
                    left: 0
                });



                // Set css on origin
                origin.css({
                        position: 'absolute',
                        'z-index': 1000
                    })
                    .data('width', originalWidth)
                    .data('height', originalHeight);

                // Add overlay
                var overlay = $('<div id="materialbox-overlay"></div>')
                    .css({
                        opacity: 0
                    })
                    .click(function () {
                        if (doneAnimating === true)
                            returnToOriginal();
                    });
                // Animate Overlay
                $('body').append(overlay);
                overlay.velocity({
                    opacity: 1
                }, {
                    duration: inDuration,
                    queue: false,
                    easing: 'easeOutQuad'
                });


                // Add and animate caption if it exists
                if (origin.data('caption') !== "") {
                    var $photo_caption = $('<div class="materialbox-caption"></div>');
                    $photo_caption.text(origin.data('caption'));
                    $('body').append($photo_caption);
                    $photo_caption.css({
                        "display": "inline"
                    });
                    $photo_caption.velocity({
                        opacity: 1
                    }, {
                        duration: inDuration,
                        queue: false,
                        easing: 'easeOutQuad'
                    });
                }



                // Resize Image
                var ratio = 0;
                var widthPercent = originalWidth / windowWidth;
                var heightPercent = originalHeight / windowHeight;
                var newWidth = 0;
                var newHeight = 0;

                if (widthPercent > heightPercent) {
                    ratio = originalHeight / originalWidth;
                    newWidth = windowWidth * 0.9;
                    newHeight = windowWidth * 0.9 * ratio;
                } else {
                    ratio = originalWidth / originalHeight;
                    newWidth = (windowHeight * 0.9) * ratio;
                    newHeight = windowHeight * 0.9;
                }

                // Animate image + set z-index
                if (origin.hasClass('responsive-img')) {
                    origin.velocity({
                        'max-width': newWidth,
                        'width': originalWidth
                    }, {
                        duration: 0,
                        queue: false,
                        complete: function () {
                                origin.css({
                                        left: 0,
                                        top: 0
                                    })
                                    .velocity({
                                        height: newHeight,
                                        width: newWidth,
                                        left: $(document).scrollLeft() + windowWidth / 2 - origin.parent('.material-placeholder').offset().left - newWidth / 2,
                                        top: $(document).scrollTop() + windowHeight / 2 - origin.parent('.material-placeholder').offset().top - newHeight / 2
                                    }, {
                                        duration: inDuration,
                                        queue: false,
                                        easing: 'easeOutQuad',
                                        complete: function () {
                                            doneAnimating = true;
                                        }
                                    });
                            } // End Complete
                    }); // End Velocity
                } else {
                    origin.css('left', 0)
                        .css('top', 0)
                        .velocity({
                            height: newHeight,
                            width: newWidth,
                            left: $(document).scrollLeft() + windowWidth / 2 - origin.parent('.material-placeholder').offset().left - newWidth / 2,
                            top: $(document).scrollTop() + windowHeight / 2 - origin.parent('.material-placeholder').offset().top - newHeight / 2
                        }, {
                            duration: inDuration,
                            queue: false,
                            easing: 'easeOutQuad',
                            complete: function () {
                                doneAnimating = true;
                            }
                        }); // End Velocity
                }

            }); // End origin on click


            // Return on scroll
            $(window).scroll(function () {
                if (overlayActive) {
                    returnToOriginal();
                }
            });

            // Return on ESC
            $(document).keyup(function (e) {

                if (e.keyCode === 27 && doneAnimating === true) { // ESC key
                    if (overlayActive) {
                        returnToOriginal();
                    }
                }
            });


            // This function returns the modaled image to the original spot
            function returnToOriginal() {

                doneAnimating = false;

                var placeholder = origin.parent('.material-placeholder');
                var windowWidth = window.innerWidth;
                var windowHeight = window.innerHeight;
                var originalWidth = origin.data('width');
                var originalHeight = origin.data('height');

                origin.velocity("stop", true);
                $('#materialbox-overlay').velocity("stop", true);
                $('.materialbox-caption').velocity("stop", true);


                $('#materialbox-overlay').velocity({
                    opacity: 0
                }, {
                    duration: outDuration, // Delay prevents animation overlapping
                    queue: false,
                    easing: 'easeOutQuad',
                    complete: function () {
                        // Remove Overlay
                        overlayActive = false;
                        $(this).remove();
                    }
                });

                // Resize Image
                origin.velocity({
                    width: originalWidth,
                    height: originalHeight,
                    left: 0,
                    top: 0
                }, {
                    duration: outDuration,
                    queue: false,
                    easing: 'easeOutQuad'
                });

                // Remove Caption + reset css settings on image
                $('.materialbox-caption').velocity({
                    opacity: 0
                }, {
                    duration: outDuration, // Delay prevents animation overlapping
                    queue: false,
                    easing: 'easeOutQuad',
                    complete: function () {
                        placeholder.css({
                            height: '',
                            width: '',
                            position: '',
                            top: '',
                            left: ''
                        });

                        origin.css({
                            height: '',
                            top: '',
                            left: '',
                            width: '',
                            'max-width': '',
                            position: '',
                            'z-index': ''
                        });

                        // Remove class
                        origin.removeClass('active');
                        doneAnimating = true;
                        $(this).remove();
                    }
                });

            }
        });
    };

    $(document).ready(function () {
        $('.materialboxed').materialbox();
    });

}(jQuery));/* PROGRESS BAR */
var bar = $('.progress-bar-animated');
$(function () {
    $(bar).each(function () {
        bar_width = $(this).attr('aria-valuenow');
        $(this).width(bar_width + '%');
    });
});

/* PANEL */

function upTo(el, tagName) {
    tagName = tagName.toLowerCase();
    while (el && el.parentNode) {
        el = el.parentNode;
        if (el.tagName && el.tagName.toLowerCase() == tagName) {
            return el;
        }
    }

    // Many DOM methods return null if they don't 
    // find the element they are searching for
    // It would be OK to omit the following and just
    // return undefined
    return null;
}
//Add / remove active class to LI element inside popout 
var selector = '.popout .panel-heading';
var parentSelector = '.popout .panel .active';

$(selector).on('click', function () {

    parentDiv = upTo(this, 'DIV');
    console.log(parentDiv);
    if ($(this).hasClass('active')) {

        $(selector).removeClass('active');
        $(".popout .panel").removeClass('active');

    } else {
        $(selector).removeClass('active');
        $(".popout .panel").removeClass('active');
        $(this).addClass('active');
        $(parentDiv).addClass('active');
    }
});//Collapse other tabs for popout 
$(function () {
    var active = true;

    $('#accordion').on('show.bs.collapse', function () {
        if (active) $('#accordion .in').collapse('hide');
    });

});
/* CHARACTER COUNTER */

(function ($) {

    $.fn.characterCounter = function () {
        return this.each(function () {

            var itHasLengthAttribute = $(this).attr('length') !== undefined;

            if (itHasLengthAttribute) {
                $(this).on('input', updateCounter);
                $(this).on('focus', updateCounter);
                $(this).on('blur', removeCounterElement);

                addCounterElement($(this));
            }

        });
    };

    function updateCounter() {
        var maxLength = +$(this).attr('length'),
            actualLength = +$(this).val().length,
            isValidLength = actualLength <= maxLength;

        $(this).parent().find('span[class="character-counter"]')
            .html(actualLength + '/' + maxLength);

        addInputStyle(isValidLength, $(this));
    }

    function addCounterElement($input) {
        var $counterElement = $('<span/>')
            .addClass('character-counter')
            .css('float', 'right')
            .css('font-size', '12px')
            .css('height', 1);

        $input.parent().append($counterElement);
    }

    function removeCounterElement() {
        $(this).parent().find('span[class="character-counter"]').html('');
    }

    function addInputStyle(isValidLength, $input) {
        var inputHasInvalidClass = $input.hasClass('invalid');
        if (isValidLength && inputHasInvalidClass) {
            $input.removeClass('invalid');
        } else if (!isValidLength && !inputHasInvalidClass) {
            $input.removeClass('valid');
            $input.addClass('invalid');
        }
    }

    $(document).ready(function () {
        $('input, textarea').characterCounter();
    });

}(jQuery));/*!
 * pickadate.js v3.5.0, 2014/04/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */

(function ( factory ) {

    // AMD.
    if ( typeof define == 'function' && define.amd )
        define( 'picker', ['jquery'], factory )

    // Node.js/browserify.
    else if ( typeof exports == 'object' )
        module.exports = factory( require('jquery') )

    // Browser globals.
    else this.Picker = factory( jQuery )

}(function( $ ) {

var $window = $( window )
var $document = $( document )
var $html = $( document.documentElement )


/**
 * The picker constructor that creates a blank picker.
 */
function PickerConstructor( ELEMENT, NAME, COMPONENT, OPTIONS ) {

    // If theres no element, return the picker constructor.
    if ( !ELEMENT ) return PickerConstructor


    var
        IS_DEFAULT_THEME = false,


        // The state of the picker.
        STATE = {
            id: ELEMENT.id || 'P' + Math.abs( ~~(Math.random() * new Date()) )
        },


        // Merge the defaults and options passed.
        SETTINGS = COMPONENT ? $.extend( true, {}, COMPONENT.defaults, OPTIONS ) : OPTIONS || {},


        // Merge the default classes with the settings classes.
        CLASSES = $.extend( {}, PickerConstructor.klasses(), SETTINGS.klass ),


        // The element node wrapper into a jQuery object.
        $ELEMENT = $( ELEMENT ),


        // Pseudo picker constructor.
        PickerInstance = function() {
            return this.start()
        },


        // The picker prototype.
        P = PickerInstance.prototype = {

            constructor: PickerInstance,

            $node: $ELEMENT,


            /**
             * Initialize everything
             */
            start: function() {

                // If its already started, do nothing.
                if ( STATE && STATE.start ) return P


                // Update the picker states.
                STATE.methods = {}
                STATE.start = true
                STATE.open = false
                STATE.type = ELEMENT.type


                // Confirm focus state, convert into text input to remove UA stylings,
                // and set as readonly to prevent keyboard popup.
                ELEMENT.autofocus = ELEMENT == getActiveElement()
                ELEMENT.readOnly = !SETTINGS.editable
                ELEMENT.id = ELEMENT.id || STATE.id
                if ( ELEMENT.type != 'text' ) {
                    ELEMENT.type = 'text'
                }


                // Create a new picker component with the settings.
                P.component = new COMPONENT(P, SETTINGS)


                // Create the picker root with a holder and then prepare it.
                P.$root = $( PickerConstructor._.node('div', createWrappedComponent(), CLASSES.picker, 'id="' + ELEMENT.id + '_root" tabindex="0"') )
                prepareElementRoot()


                // If theres a format for the hidden input element, create the element.
                if ( SETTINGS.formatSubmit ) {
                    prepareElementHidden()
                }


                // Prepare the input element.
                prepareElement()


                // Insert the root as specified in the settings.
                if ( SETTINGS.container ) $( SETTINGS.container ).append( P.$root )
                else $ELEMENT.after( P.$root )


                // Bind the default component and settings events.
                P.on({
                    start: P.component.onStart,
                    render: P.component.onRender,
                    stop: P.component.onStop,
                    open: P.component.onOpen,
                    close: P.component.onClose,
                    set: P.component.onSet
                }).on({
                    start: SETTINGS.onStart,
                    render: SETTINGS.onRender,
                    stop: SETTINGS.onStop,
                    open: SETTINGS.onOpen,
                    close: SETTINGS.onClose,
                    set: SETTINGS.onSet
                })


                // Once were all set, check the theme in use.
                IS_DEFAULT_THEME = isUsingDefaultTheme( P.$root.children()[ 0 ] )


                // If the element has autofocus, open the picker.
                if ( ELEMENT.autofocus ) {
                    P.open()
                }


                // Trigger queued the start and render events.
                return P.trigger( 'start' ).trigger( 'render' )
            }, //start


            /**
             * Render a new picker
             */
            render: function( entireComponent ) {

                // Insert a new component holder in the root or box.
                if ( entireComponent ) P.$root.html( createWrappedComponent() )
                else P.$root.find( '.' + CLASSES.box ).html( P.component.nodes( STATE.open ) )

                // Trigger the queued render events.
                return P.trigger( 'render' )
            }, //render


            /**
             * Destroy everything
             */
            stop: function() {

                // If its already stopped, do nothing.
                if ( !STATE.start ) return P

                // Then close the picker.
                P.close()

                // Remove the hidden field.
                if ( P._hidden ) {
                    P._hidden.parentNode.removeChild( P._hidden )
                }

                // Remove the root.
                P.$root.remove()

                // Remove the input class, remove the stored data, and unbind
                // the events (after a tick for IE - see `P.close`).
                $ELEMENT.removeClass( CLASSES.input ).removeData( NAME )
                setTimeout( function() {
                    $ELEMENT.off( '.' + STATE.id )
                }, 0)

                // Restore the element state
                ELEMENT.type = STATE.type
                ELEMENT.readOnly = false

                // Trigger the queued stop events.
                P.trigger( 'stop' )

                // Reset the picker states.
                STATE.methods = {}
                STATE.start = false

                return P
            }, //stop


            /**
             * Open up the picker
             */
            open: function( dontGiveFocus ) {

                // If its already open, do nothing.
                if ( STATE.open ) return P

                // Add the active class.
                $ELEMENT.addClass( CLASSES.active )
                aria( ELEMENT, 'expanded', true )

                // * A Firefox bug, when `html` has `overflow:hidden`, results in
                //   killing transitions :(. So add the opened state on the next tick.
                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289
                setTimeout( function() {

                    // Add the opened class to the picker root.
                    P.$root.addClass( CLASSES.opened )
                    aria( P.$root[0], 'hidden', false )

                }, 0 )

                // If we have to give focus, bind the element and doc events.
                if ( dontGiveFocus !== false ) {

                    // Set it as open.
                    STATE.open = true

                    // Prevent the page from scrolling.
                    if ( IS_DEFAULT_THEME ) {
                        $html.
                            css( 'overflow', 'hidden' ).
                            css( 'padding-right', '+=' + getScrollbarWidth() )
                    }

                    // Pass focus to the root elements jQuery object.
                    // * Workaround for iOS8 to bring the pickers root into view.
                    P.$root[0].focus()

                    // Bind the document events.
                    $document.on( 'click.' + STATE.id + ' focusin.' + STATE.id, function( event ) {

                        var target = event.target

                        // If the target of the event is not the element, close the picker picker.
                        // * Dont worry about clicks or focusins on the root because those dont bubble up.
                        //   Also, for Firefox, a click on an `option` element bubbles up directly
                        //   to the doc. So make sure the target wasn't the doc.
                        // * In Firefox stopPropagation() doesnt prevent right-click events from bubbling,
                        //   which causes the picker to unexpectedly close when right-clicking it. So make
                        //   sure the event wasnt a right-click.
                        if ( target != ELEMENT && target != document && event.which != 3 ) {

                            // If the target was the holder that covers the screen,
                            // keep the element focused to maintain tabindex.
                            P.close( target === P.$root.children()[0] )
                        }

                    }).on( 'keydown.' + STATE.id, function( event ) {

                        var
                            // Get the keycode.
                            keycode = event.keyCode,

                            // Translate that to a selection change.
                            keycodeToMove = P.component.key[ keycode ],

                            // Grab the target.
                            target = event.target


                        // On escape, close the picker and give focus.
                        if ( keycode == 27 ) {
                            P.close( true )
                        }


                        // Check if there is a key movement or enter keypress on the element.
                        else if ( target == P.$root[0] && ( keycodeToMove || keycode == 13 ) ) {

                            // Prevent the default action to stop page movement.
                            event.preventDefault()

                            // Trigger the key movement action.
                            if ( keycodeToMove ) {
                                PickerConstructor._.trigger( P.component.key.go, P, [ PickerConstructor._.trigger( keycodeToMove ) ] )
                            }

                            // On enter, if the highlighted item isnt disabled, set the value and close.
                            else if ( !P.$root.find( '.' + CLASSES.highlighted ).hasClass( CLASSES.disabled ) ) {
                                P.set( 'select', P.component.item.highlight ).close()
                            }
                        }


                        // If the target is within the root and enter is pressed,
                        // prevent the default action and trigger a click on the target instead.
                        else if ( $.contains( P.$root[0], target ) && keycode == 13 ) {
                            event.preventDefault()
                            target.click()
                        }
                    })
                }

                // Trigger the queued open events.
                return P.trigger( 'open' )
            }, //open


            /**
             * Close the picker
             */
            close: function( giveFocus ) {

                // If we need to give focus, do it before changing states.
                if ( giveFocus ) {
                    // ....ah yes! It wouldve been incomplete without a crazy workaround for IE :|
                    // The focus is triggered *after* the close has completed - causing it
                    // to open again. So unbind and rebind the event at the next tick.
                    P.$root.off( 'focus.toOpen' )[0].focus()
                    setTimeout( function() {
                        P.$root.on( 'focus.toOpen', handleFocusToOpenEvent )
                    }, 0 )
                }

                // Remove the active class.
                $ELEMENT.removeClass( CLASSES.active )
                aria( ELEMENT, 'expanded', false )

                // * A Firefox bug, when `html` has `overflow:hidden`, results in
                //   killing transitions :(. So remove the opened state on the next tick.
                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289
                setTimeout( function() {

                    // Remove the opened and focused class from the picker root.
                    P.$root.removeClass( CLASSES.opened + ' ' + CLASSES.focused )
                    aria( P.$root[0], 'hidden', true )

                }, 0 )

                // If its already closed, do nothing more.
                if ( !STATE.open ) return P

                // Set it as closed.
                STATE.open = false

                // Allow the page to scroll.
                if ( IS_DEFAULT_THEME ) {
                    $html.
                        css( 'overflow', '' ).
                        css( 'padding-right', '-=' + getScrollbarWidth() )
                }

                // Unbind the document events.
                $document.off( '.' + STATE.id )

                // Trigger the queued close events.
                return P.trigger( 'close' )
            }, //close


            /**
             * Clear the values
             */
            clear: function( options ) {
                return P.set( 'clear', null, options )
            }, //clear


            /**
             * Set something
             */
            set: function( thing, value, options ) {

                var thingItem, thingValue,
                    thingIsObject = $.isPlainObject( thing ),
                    thingObject = thingIsObject ? thing : {}

                // Make sure we have usable options.
                options = thingIsObject && $.isPlainObject( value ) ? value : options || {}

                if ( thing ) {

                    // If the thing isnt an object, make it one.
                    if ( !thingIsObject ) {
                        thingObject[ thing ] = value
                    }

                    // Go through the things of items to set.
                    for ( thingItem in thingObject ) {

                        // Grab the value of the thing.
                        thingValue = thingObject[ thingItem ]

                        // First, if the item exists and theres a value, set it.
                        if ( thingItem in P.component.item ) {
                            if ( thingValue === undefined ) thingValue = null
                            P.component.set( thingItem, thingValue, options )
                        }

                        // Then, check to update the element value and broadcast a change.
                        if ( thingItem == 'select' || thingItem == 'clear' ) {
                            $ELEMENT.
                                val( thingItem == 'clear' ? '' : P.get( thingItem, SETTINGS.format ) ).
                                trigger( 'change' )
                        }
                    }

                    // Render a new picker.
                    P.render()
                }

                // When the method isnt muted, trigger queued set events and pass the `thingObject`.
                return options.muted ? P : P.trigger( 'set', thingObject )
            }, //set


            /**
             * Get something
             */
            get: function( thing, format ) {

                // Make sure theres something to get.
                thing = thing || 'value'

                // If a picker state exists, return that.
                if ( STATE[ thing ] != null ) {
                    return STATE[ thing ]
                }

                // Return the submission value, if that.
                if ( thing == 'valueSubmit' ) {
                    if ( P._hidden ) {
                        return P._hidden.value
                    }
                    thing = 'value'
                }

                // Return the value, if that.
                if ( thing == 'value' ) {
                    return ELEMENT.value
                }

                // Check if a component item exists, return that.
                if ( thing in P.component.item ) {
                    if ( typeof format == 'string' ) {
                        var thingValue = P.component.get( thing )
                        return thingValue ?
                            PickerConstructor._.trigger(
                                P.component.formats.toString,
                                P.component,
                                [ format, thingValue ]
                            ) : ''
                    }
                    return P.component.get( thing )
                }
            }, //get



            /**
             * Bind events on the things.
             */
            on: function( thing, method, internal ) {

                var thingName, thingMethod,
                    thingIsObject = $.isPlainObject( thing ),
                    thingObject = thingIsObject ? thing : {}

                if ( thing ) {

                    // If the thing isnt an object, make it one.
                    if ( !thingIsObject ) {
                        thingObject[ thing ] = method
                    }

                    // Go through the things to bind to.
                    for ( thingName in thingObject ) {

                        // Grab the method of the thing.
                        thingMethod = thingObject[ thingName ]

                        // If it was an internal binding, prefix it.
                        if ( internal ) {
                            thingName = '_' + thingName
                        }

                        // Make sure the thing methods collection exists.
                        STATE.methods[ thingName ] = STATE.methods[ thingName ] || []

                        // Add the method to the relative method collection.
                        STATE.methods[ thingName ].push( thingMethod )
                    }
                }

                return P
            }, //on



            /**
             * Unbind events on the things.
             */
            off: function() {
                var i, thingName,
                    names = arguments;
                for ( i = 0, namesCount = names.length; i < namesCount; i += 1 ) {
                    thingName = names[i]
                    if ( thingName in STATE.methods ) {
                        delete STATE.methods[thingName]
                    }
                }
                return P
            },


            /**
             * Fire off method events.
             */
            trigger: function( name, data ) {
                var _trigger = function( name ) {
                    var methodList = STATE.methods[ name ]
                    if ( methodList ) {
                        methodList.map( function( method ) {
                            PickerConstructor._.trigger( method, P, [ data ] )
                        })
                    }
                }
                _trigger( '_' + name )
                _trigger( name )
                return P
            } //trigger
        } //PickerInstance.prototype


    /**
     * Wrap the picker holder components together.
     */
    function createWrappedComponent() {

        // Create a picker wrapper holder
        return PickerConstructor._.node( 'div',

            // Create a picker wrapper node
            PickerConstructor._.node( 'div',

                // Create a picker frame
                PickerConstructor._.node( 'div',

                    // Create a picker box node
                    PickerConstructor._.node( 'div',

                        // Create the components nodes.
                        P.component.nodes( STATE.open ),

                        // The picker box class
                        CLASSES.box
                    ),

                    // Picker wrap class
                    CLASSES.wrap
                ),

                // Picker frame class
                CLASSES.frame
            ),

            // Picker holder class
            CLASSES.holder
        ) //endreturn
    } //createWrappedComponent



    /**
     * Prepare the input element with all bindings.
     */
    function prepareElement() {

        $ELEMENT.

            // Store the picker data by component name.
            data(NAME, P).

            // Add the input class name.
            addClass(CLASSES.input).

            // Remove the tabindex.
            attr('tabindex', -1).

            // If theres a `data-value`, update the value of the element.
            val( $ELEMENT.data('value') ?
                P.get('select', SETTINGS.format) :
                ELEMENT.value
            )


        // Only bind keydown events if the element isnt editable.
        if ( !SETTINGS.editable ) {

            $ELEMENT.

                // On focus/click, focus onto the root to open it up.
                on( 'focus.' + STATE.id + ' click.' + STATE.id, function( event ) {
                    event.preventDefault()
                    P.$root[0].focus()
                }).

                // Handle keyboard event based on the picker being opened or not.
                on( 'keydown.' + STATE.id, handleKeydownEvent )
        }


        // Update the aria attributes.
        aria(ELEMENT, {
            haspopup: true,
            expanded: false,
            readonly: false,
            owns: ELEMENT.id + '_root'
        })
    }


    /**
     * Prepare the root picker element with all bindings.
     */
    function prepareElementRoot() {

        P.$root.

            on({

                // For iOS8.
                keydown: handleKeydownEvent,

                // When something within the root is focused, stop from bubbling
                // to the doc and remove the focused state from the root.
                focusin: function( event ) {
                    P.$root.removeClass( CLASSES.focused )
                    event.stopPropagation()
                },

                // When something within the root holder is clicked, stop it
                // from bubbling to the doc.
                'mousedown click': function( event ) {

                    var target = event.target

                    // Make sure the target isnt the root holder so it can bubble up.
                    if ( target != P.$root.children()[ 0 ] ) {

                        event.stopPropagation()

                        // * For mousedown events, cancel the default action in order to
                        //   prevent cases where focus is shifted onto external elements
                        //   when using things like jQuery mobile or MagnificPopup (ref: #249 & #120).
                        //   Also, for Firefox, dont prevent action on the `option` element.
                        if ( event.type == 'mousedown' && !$( target ).is( 'input, select, textarea, button, option' )) {

                            event.preventDefault()

                            // Re-focus onto the root so that users can click away
                            // from elements focused within the picker.
                            P.$root[0].focus()
                        }
                    }
                }
            }).

            // Add/remove the target class on focus and blur.
            on({
                focus: function() {
                    $ELEMENT.addClass( CLASSES.target )
                },
                blur: function() {
                    $ELEMENT.removeClass( CLASSES.target )
                }
            }).

            // Open the picker and adjust the root focused state
            on( 'focus.toOpen', handleFocusToOpenEvent ).

            // If theres a click on an actionable element, carry out the actions.
            on( 'click', '[data-pick], [data-nav], [data-clear], [data-close]', function() {

                var $target = $( this ),
                    targetData = $target.data(),
                    targetDisabled = $target.hasClass( CLASSES.navDisabled ) || $target.hasClass( CLASSES.disabled ),

                    // * For IE, non-focusable elements can be active elements as well
                    //   (http://stackoverflow.com/a/2684561).
                    activeElement = getActiveElement()
                    activeElement = activeElement && ( activeElement.type || activeElement.href )

                // If its disabled or nothing inside is actively focused, re-focus the element.
                if ( targetDisabled || activeElement && !$.contains( P.$root[0], activeElement ) ) {
                    P.$root[0].focus()
                }

                // If something is superficially changed, update the `highlight` based on the `nav`.
                if ( !targetDisabled && targetData.nav ) {
                    P.set( 'highlight', P.component.item.highlight, { nav: targetData.nav } )
                }

                // If something is picked, set `select` then close with focus.
                else if ( !targetDisabled && 'pick' in targetData ) {
                    P.set( 'select', targetData.pick )
                }

                // If a clear button is pressed, empty the values and close with focus.
                else if ( targetData.clear ) {
                    P.clear().close( true )
                }

                else if ( targetData.close ) {
                    P.close( true )
                }

            }) //P.$root

        aria( P.$root[0], 'hidden', true )
    }


     /**
      * Prepare the hidden input element along with all bindings.
      */
    function prepareElementHidden() {

        var name

        if ( SETTINGS.hiddenName === true ) {
            name = ELEMENT.name
            ELEMENT.name = ''
        }
        else {
            name = [
                typeof SETTINGS.hiddenPrefix == 'string' ? SETTINGS.hiddenPrefix : '',
                typeof SETTINGS.hiddenSuffix == 'string' ? SETTINGS.hiddenSuffix : '_submit'
            ]
            name = name[0] + ELEMENT.name + name[1]
        }

        P._hidden = $(
            '<input ' +
            'type=hidden ' +

            // Create the name using the original inputs with a prefix and suffix.
            'name="' + name + '"' +

            // If the element has a value, set the hidden value as well.
            (
                $ELEMENT.data('value') || ELEMENT.value ?
                    ' value="' + P.get('select', SETTINGS.formatSubmit) + '"' :
                    ''
            ) +
            '>'
        )[0]

        $ELEMENT.

            // If the value changes, update the hidden input with the correct format.
            on('change.' + STATE.id, function() {
                P._hidden.value = ELEMENT.value ?
                    P.get('select', SETTINGS.formatSubmit) :
                    ''
            })


        // Insert the hidden input as specified in the settings.
        if ( SETTINGS.container ) $( SETTINGS.container ).append( P._hidden )
        else $ELEMENT.after( P._hidden )
    }


    // For iOS8.
    function handleKeydownEvent( event ) {

        var keycode = event.keyCode,

            // Check if one of the delete keys was pressed.
            isKeycodeDelete = /^(8|46)$/.test(keycode)

        // For some reason IE clears the input value on escape.
        if ( keycode == 27 ) {
            P.close()
            return false
        }

        // Check if `space` or `delete` was pressed or the picker is closed with a key movement.
        if ( keycode == 32 || isKeycodeDelete || !STATE.open && P.component.key[keycode] ) {

            // Prevent it from moving the page and bubbling to doc.
            event.preventDefault()
            event.stopPropagation()

            // If `delete` was pressed, clear the values and close the picker.
            // Otherwise open the picker.
            if ( isKeycodeDelete ) { P.clear().close() }
            else { P.open() }
        }
    }


    // Separated for IE
    function handleFocusToOpenEvent( event ) {

        // Stop the event from propagating to the doc.
        event.stopPropagation()

        // If its a focus event, add the focused class to the root.
        if ( event.type == 'focus' ) {
            P.$root.addClass( CLASSES.focused )
        }

        // And then finally open the picker.
        P.open()
    }


    // Return a new picker instance.
    return new PickerInstance()
} //PickerConstructor



/**
 * The default classes and prefix to use for the HTML classes.
 */
PickerConstructor.klasses = function( prefix ) {
    prefix = prefix || 'picker'
    return {

        picker: prefix,
        opened: prefix + '--opened',
        focused: prefix + '--focused',

        input: prefix + '__input',
        active: prefix + '__input--active',
        target: prefix + '__input--target',

        holder: prefix + '__holder',

        frame: prefix + '__frame',
        wrap: prefix + '__wrap',

        box: prefix + '__box'
    }
} //PickerConstructor.klasses



/**
 * Check if the default theme is being used.
 */
function isUsingDefaultTheme( element ) {

    var theme,
        prop = 'position'

    // For IE.
    if ( element.currentStyle ) {
        theme = element.currentStyle[prop]
    }

    // For normal browsers.
    else if ( window.getComputedStyle ) {
        theme = getComputedStyle( element )[prop]
    }

    return theme == 'fixed'
}



/**
 * Get the width of the browsers scrollbar.
 * Taken from: https://github.com/VodkaBears/Remodal/blob/master/src/jquery.remodal.js
 */
function getScrollbarWidth() {

    if ( $html.height() <= $window.height() ) {
        return 0
    }

    var $outer = $( '<div style="visibility:hidden;width:100px" />' ).
        appendTo( 'body' )

    // Get the width without scrollbars.
    var widthWithoutScroll = $outer[0].offsetWidth

    // Force adding scrollbars.
    $outer.css( 'overflow', 'scroll' )

    // Add the inner div.
    var $inner = $( '<div style="width:100%" />' ).appendTo( $outer )

    // Get the width with scrollbars.
    var widthWithScroll = $inner[0].offsetWidth

    // Remove the divs.
    $outer.remove()

    // Return the difference between the widths.
    return widthWithoutScroll - widthWithScroll
}



/**
 * PickerConstructor helper methods.
 */
PickerConstructor._ = {

    /**
     * Create a group of nodes. Expects:
     * `
        {
            min:    {Integer},
            max:    {Integer},
            i:      {Integer},
            node:   {String},
            item:   {Function}
        }
     * `
     */
    group: function( groupObject ) {

        var
            // Scope for the looped object
            loopObjectScope,

            // Create the nodes list
            nodesList = '',

            // The counter starts from the `min`
            counter = PickerConstructor._.trigger( groupObject.min, groupObject )


        // Loop from the `min` to `max`, incrementing by `i`
        for ( ; counter <= PickerConstructor._.trigger( groupObject.max, groupObject, [ counter ] ); counter += groupObject.i ) {

            // Trigger the `item` function within scope of the object
            loopObjectScope = PickerConstructor._.trigger( groupObject.item, groupObject, [ counter ] )

            // Splice the subgroup and create nodes out of the sub nodes
            nodesList += PickerConstructor._.node(
                groupObject.node,
                loopObjectScope[ 0 ],   // the node
                loopObjectScope[ 1 ],   // the classes
                loopObjectScope[ 2 ]    // the attributes
            )
        }

        // Return the list of nodes
        return nodesList
    }, //group


    /**
     * Create a dom node string
     */
    node: function( wrapper, item, klass, attribute ) {

        // If the item is false-y, just return an empty string
        if ( !item ) return ''

        // If the item is an array, do a join
        item = $.isArray( item ) ? item.join( '' ) : item

        // Check for the class
        klass = klass ? ' class="' + klass + '"' : ''

        // Check for any attributes
        attribute = attribute ? ' ' + attribute : ''

        // Return the wrapped item
        return '<' + wrapper + klass + attribute + '>' + item + '</' + wrapper + '>'
    }, //node


    /**
     * Lead numbers below 10 with a zero.
     */
    lead: function( number ) {
        return ( number < 10 ? '0': '' ) + number
    },


    /**
     * Trigger a function otherwise return the value.
     */
    trigger: function( callback, scope, args ) {
        return typeof callback == 'function' ? callback.apply( scope, args || [] ) : callback
    },


    /**
     * If the second character is a digit, length is 2 otherwise 1.
     */
    digits: function( string ) {
        return ( /\d/ ).test( string[ 1 ] ) ? 2 : 1
    },


    /**
     * Tell if something is a date object.
     */
    isDate: function( value ) {
        return {}.toString.call( value ).indexOf( 'Date' ) > -1 && this.isInteger( value.getDate() )
    },


    /**
     * Tell if something is an integer.
     */
    isInteger: function( value ) {
        return {}.toString.call( value ).indexOf( 'Number' ) > -1 && value % 1 === 0
    },


    /**
     * Create ARIA attribute strings.
     */
    ariaAttr: ariaAttr
} //PickerConstructor._



/**
 * Extend the picker with a component and defaults.
 */
PickerConstructor.extend = function( name, Component ) {

    // Extend jQuery.
    $.fn[ name ] = function( options, action ) {

        // Grab the component data.
        var componentData = this.data( name )

        // If the picker is requested, return the data object.
        if ( options == 'picker' ) {
            return componentData
        }

        // If the component data exists and `options` is a string, carry out the action.
        if ( componentData && typeof options == 'string' ) {
            return PickerConstructor._.trigger( componentData[ options ], componentData, [ action ] )
        }

        // Otherwise go through each matched element and if the component
        // doesnt exist, create a new picker using `this` element
        // and merging the defaults and options with a deep copy.
        return this.each( function() {
            var $this = $( this )
            if ( !$this.data( name ) ) {
                new PickerConstructor( this, name, Component, options )
            }
        })
    }

    // Set the defaults.
    $.fn[ name ].defaults = Component.defaults
} //PickerConstructor.extend



function aria(element, attribute, value) {
    if ( $.isPlainObject(attribute) ) {
        for ( var key in attribute ) {
            ariaSet(element, key, attribute[key])
        }
    }
    else {
        ariaSet(element, attribute, value)
    }
}
function ariaSet(element, attribute, value) {
    element.setAttribute(
        (attribute == 'role' ? '' : 'aria-') + attribute,
        value
    )
}
function ariaAttr(attribute, data) {
    if ( !$.isPlainObject(attribute) ) {
        attribute = { attribute: data }
    }
    data = ''
    for ( var key in attribute ) {
        var attr = (key == 'role' ? '' : 'aria-') + key,
            attrVal = attribute[key]
        data += attrVal == null ? '' : attr + '="' + attribute[key] + '"'
    }
    return data
}

// IE8 bug throws an error for activeElements within iframes.
function getActiveElement() {
    try {
        return document.activeElement
    } catch ( err ) { }
}



// Expose the picker constructor.
return PickerConstructor


}));


/*!
 * Date picker for pickadate.js v3.5.0
 * http://amsul.github.io/pickadate.js/date.htm
 */

(function ( factory ) {

    // AMD.
    if ( typeof define == 'function' && define.amd )
        define( ['picker', 'jquery'], factory )

    // Node.js/browserify.
    else if ( typeof exports == 'object' )
        module.exports = factory( require('./picker.js'), require('jquery') )

    // Browser globals.
    else factory( Picker, jQuery )

}(function( Picker, $ ) {


/**
 * Globals and constants
 */
var DAYS_IN_WEEK = 7,
    WEEKS_IN_CALENDAR = 6,
    _ = Picker._



/**
 * The date picker constructor
 */
function DatePicker( picker, settings ) {

    var calendar = this,
        element = picker.$node[ 0 ],
        elementValue = element.value,
        elementDataValue = picker.$node.data( 'value' ),
        valueString = elementDataValue || elementValue,
        formatString = elementDataValue ? settings.formatSubmit : settings.format,
        isRTL = function() {

            return element.currentStyle ?

                // For IE.
                element.currentStyle.direction == 'rtl' :

                // For normal browsers.
                getComputedStyle( picker.$root[0] ).direction == 'rtl'
        }

    calendar.settings = settings
    calendar.$node = picker.$node

    // The queue of methods that will be used to build item objects.
    calendar.queue = {
        min: 'measure create',
        max: 'measure create',
        now: 'now create',
        select: 'parse create validate',
        highlight: 'parse navigate create validate',
        view: 'parse create validate viewset',
        disable: 'deactivate',
        enable: 'activate'
    }

    // The component's item object.
    calendar.item = {}

    calendar.item.clear = null
    calendar.item.disable = ( settings.disable || [] ).slice( 0 )
    calendar.item.enable = -(function( collectionDisabled ) {
        return collectionDisabled[ 0 ] === true ? collectionDisabled.shift() : -1
    })( calendar.item.disable )

    calendar.
        set( 'min', settings.min ).
        set( 'max', settings.max ).
        set( 'now' )

    // When theres a value, set the `select`, which in turn
    // also sets the `highlight` and `view`.
    if ( valueString ) {
        calendar.set( 'select', valueString, { format: formatString })
    }

    // If theres no value, default to highlighting today.
    else {
        calendar.
            set( 'select', null ).
            set( 'highlight', calendar.item.now )
    }


    // The keycode to movement mapping.
    calendar.key = {
        40: 7, // Down
        38: -7, // Up
        39: function() { return isRTL() ? -1 : 1 }, // Right
        37: function() { return isRTL() ? 1 : -1 }, // Left
        go: function( timeChange ) {
            var highlightedObject = calendar.item.highlight,
                targetDate = new Date( highlightedObject.year, highlightedObject.month, highlightedObject.date + timeChange )
            calendar.set(
                'highlight',
                targetDate,
                { interval: timeChange }
            )
            this.render()
        }
    }


    // Bind some picker events.
    picker.
        on( 'render', function() {
            picker.$root.find( '.' + settings.klass.selectMonth ).on( 'change', function() {
                var value = this.value
                if ( value ) {
                    picker.set( 'highlight', [ picker.get( 'view' ).year, value, picker.get( 'highlight' ).date ] )
                    picker.$root.find( '.' + settings.klass.selectMonth ).trigger( 'focus' )
                }
            })
            picker.$root.find( '.' + settings.klass.selectYear ).on( 'change', function() {
                var value = this.value
                if ( value ) {
                    picker.set( 'highlight', [ value, picker.get( 'view' ).month, picker.get( 'highlight' ).date ] )
                    picker.$root.find( '.' + settings.klass.selectYear ).trigger( 'focus' )
                }
            })
        }, 1 ).
        on( 'open', function() {
            var includeToday = ''
            if ( calendar.disabled( calendar.get('now') ) ) {
                includeToday = ':not(.' + settings.klass.buttonToday + ')'
            }
            picker.$root.find( 'button' + includeToday + ', select' ).attr( 'disabled', false )
        }, 1 ).
        on( 'close', function() {
            picker.$root.find( 'button, select' ).attr( 'disabled', true )
        }, 1 )

} //DatePicker


/**
 * Set a datepicker item object.
 */
DatePicker.prototype.set = function( type, value, options ) {

    var calendar = this,
        calendarItem = calendar.item

    // If the value is `null` just set it immediately.
    if ( value === null ) {
        if ( type == 'clear' ) type = 'select'
        calendarItem[ type ] = value
        return calendar
    }

    // Otherwise go through the queue of methods, and invoke the functions.
    // Update this as the time unit, and set the final value as this item.
    // * In the case of `enable`, keep the queue but set `disable` instead.
    //   And in the case of `flip`, keep the queue but set `enable` instead.
    calendarItem[ ( type == 'enable' ? 'disable' : type == 'flip' ? 'enable' : type ) ] = calendar.queue[ type ].split( ' ' ).map( function( method ) {
        value = calendar[ method ]( type, value, options )
        return value
    }).pop()

    // Check if we need to cascade through more updates.
    if ( type == 'select' ) {
        calendar.set( 'highlight', calendarItem.select, options )
    }
    else if ( type == 'highlight' ) {
        calendar.set( 'view', calendarItem.highlight, options )
    }
    else if ( type.match( /^(flip|min|max|disable|enable)$/ ) ) {
        if ( calendarItem.select && calendar.disabled( calendarItem.select ) ) {
            calendar.set( 'select', calendarItem.select, options )
        }
        if ( calendarItem.highlight && calendar.disabled( calendarItem.highlight ) ) {
            calendar.set( 'highlight', calendarItem.highlight, options )
        }
    }

    return calendar
} //DatePicker.prototype.set


/**
 * Get a datepicker item object.
 */
DatePicker.prototype.get = function( type ) {
    return this.item[ type ]
} //DatePicker.prototype.get


/**
 * Create a picker date object.
 */
DatePicker.prototype.create = function( type, value, options ) {

    var isInfiniteValue,
        calendar = this

    // If theres no value, use the type as the value.
    value = value === undefined ? type : value


    // If its infinity, update the value.
    if ( value == -Infinity || value == Infinity ) {
        isInfiniteValue = value
    }

    // If its an object, use the native date object.
    else if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {
        value = value.obj
    }

    // If its an array, convert it into a date and make sure
    // that its a valid date  otherwise default to today.
    else if ( $.isArray( value ) ) {
        value = new Date( value[ 0 ], value[ 1 ], value[ 2 ] )
        value = _.isDate( value ) ? value : calendar.create().obj
    }

    // If its a number or date object, make a normalized date.
    else if ( _.isInteger( value ) || _.isDate( value ) ) {
        value = calendar.normalize( new Date( value ), options )
    }

    // If its a literal true or any other case, set it to now.
    else /*if ( value === true )*/ {
        value = calendar.now( type, value, options )
    }

    // Return the compiled object.
    return {
        year: isInfiniteValue || value.getFullYear(),
        month: isInfiniteValue || value.getMonth(),
        date: isInfiniteValue || value.getDate(),
        day: isInfiniteValue || value.getDay(),
        obj: isInfiniteValue || value,
        pick: isInfiniteValue || value.getTime()
    }
} //DatePicker.prototype.create


/**
 * Create a range limit object using an array, date object,
 * literal true, or integer relative to another time.
 */
DatePicker.prototype.createRange = function( from, to ) {

    var calendar = this,
        createDate = function( date ) {
            if ( date === true || $.isArray( date ) || _.isDate( date ) ) {
                return calendar.create( date )
            }
            return date
        }

    // Create objects if possible.
    if ( !_.isInteger( from ) ) {
        from = createDate( from )
    }
    if ( !_.isInteger( to ) ) {
        to = createDate( to )
    }

    // Create relative dates.
    if ( _.isInteger( from ) && $.isPlainObject( to ) ) {
        from = [ to.year, to.month, to.date + from ];
    }
    else if ( _.isInteger( to ) && $.isPlainObject( from ) ) {
        to = [ from.year, from.month, from.date + to ];
    }

    return {
        from: createDate( from ),
        to: createDate( to )
    }
} //DatePicker.prototype.createRange


/**
 * Check if a date unit falls within a date range object.
 */
DatePicker.prototype.withinRange = function( range, dateUnit ) {
    range = this.createRange(range.from, range.to)
    return dateUnit.pick >= range.from.pick && dateUnit.pick <= range.to.pick
}


/**
 * Check if two date range objects overlap.
 */
DatePicker.prototype.overlapRanges = function( one, two ) {

    var calendar = this

    // Convert the ranges into comparable dates.
    one = calendar.createRange( one.from, one.to )
    two = calendar.createRange( two.from, two.to )

    return calendar.withinRange( one, two.from ) || calendar.withinRange( one, two.to ) ||
        calendar.withinRange( two, one.from ) || calendar.withinRange( two, one.to )
}


/**
 * Get the date today.
 */
DatePicker.prototype.now = function( type, value, options ) {
    value = new Date()
    if ( options && options.rel ) {
        value.setDate( value.getDate() + options.rel )
    }
    return this.normalize( value, options )
}


/**
 * Navigate to next/prev month.
 */
DatePicker.prototype.navigate = function( type, value, options ) {

    var targetDateObject,
        targetYear,
        targetMonth,
        targetDate,
        isTargetArray = $.isArray( value ),
        isTargetObject = $.isPlainObject( value ),
        viewsetObject = this.item.view/*,
        safety = 100*/


    if ( isTargetArray || isTargetObject ) {

        if ( isTargetObject ) {
            targetYear = value.year
            targetMonth = value.month
            targetDate = value.date
        }
        else {
            targetYear = +value[0]
            targetMonth = +value[1]
            targetDate = +value[2]
        }

        // If were navigating months but the view is in a different
        // month, navigate to the views year and month.
        if ( options && options.nav && viewsetObject && viewsetObject.month !== targetMonth ) {
            targetYear = viewsetObject.year
            targetMonth = viewsetObject.month
        }

        // Figure out the expected target year and month.
        targetDateObject = new Date( targetYear, targetMonth + ( options && options.nav ? options.nav : 0 ), 1 )
        targetYear = targetDateObject.getFullYear()
        targetMonth = targetDateObject.getMonth()

        // If the month were going to doesnt have enough days,
        // keep decreasing the date until we reach the months last date.
        while ( /*safety &&*/ new Date( targetYear, targetMonth, targetDate ).getMonth() !== targetMonth ) {
            targetDate -= 1
            /*safety -= 1
            if ( !safety ) {
                throw 'Fell into an infinite loop while navigating to ' + new Date( targetYear, targetMonth, targetDate ) + '.'
            }*/
        }

        value = [ targetYear, targetMonth, targetDate ]
    }

    return value
} //DatePicker.prototype.navigate


/**
 * Normalize a date by setting the hours to midnight.
 */
DatePicker.prototype.normalize = function( value/*, options*/ ) {
    value.setHours( 0, 0, 0, 0 )
    return value
}


/**
 * Measure the range of dates.
 */
DatePicker.prototype.measure = function( type, value/*, options*/ ) {

    var calendar = this

    // If its anything false-y, remove the limits.
    if ( !value ) {
        value = type == 'min' ? -Infinity : Infinity
    }

    // If its a string, parse it.
    else if ( typeof value == 'string' ) {
        value = calendar.parse( type, value )
    }

    // If it's an integer, get a date relative to today.
    else if ( _.isInteger( value ) ) {
        value = calendar.now( type, value, { rel: value } )
    }

    return value
} ///DatePicker.prototype.measure


/**
 * Create a viewset object based on navigation.
 */
DatePicker.prototype.viewset = function( type, dateObject/*, options*/ ) {
    return this.create([ dateObject.year, dateObject.month, 1 ])
}


/**
 * Validate a date as enabled and shift if needed.
 */
DatePicker.prototype.validate = function( type, dateObject, options ) {

    var calendar = this,

        // Keep a reference to the original date.
        originalDateObject = dateObject,

        // Make sure we have an interval.
        interval = options && options.interval ? options.interval : 1,

        // Check if the calendar enabled dates are inverted.
        isFlippedBase = calendar.item.enable === -1,

        // Check if we have any enabled dates after/before now.
        hasEnabledBeforeTarget, hasEnabledAfterTarget,

        // The min & max limits.
        minLimitObject = calendar.item.min,
        maxLimitObject = calendar.item.max,

        // Check if weve reached the limit during shifting.
        reachedMin, reachedMax,

        // Check if the calendar is inverted and at least one weekday is enabled.
        hasEnabledWeekdays = isFlippedBase && calendar.item.disable.filter( function( value ) {

            // If theres a date, check where it is relative to the target.
            if ( $.isArray( value ) ) {
                var dateTime = calendar.create( value ).pick
                if ( dateTime < dateObject.pick ) hasEnabledBeforeTarget = true
                else if ( dateTime > dateObject.pick ) hasEnabledAfterTarget = true
            }

            // Return only integers for enabled weekdays.
            return _.isInteger( value )
        }).length/*,

        safety = 100*/



    // Cases to validate for:
    // [1] Not inverted and date disabled.
    // [2] Inverted and some dates enabled.
    // [3] Not inverted and out of range.
    //
    // Cases to **not** validate for:
    //  Navigating months.
    //  Not inverted and date enabled.
    //  Inverted and all dates disabled.
    //  ..and anything else.
    if ( !options || !options.nav ) if (
        /* 1 */ ( !isFlippedBase && calendar.disabled( dateObject ) ) ||
        /* 2 */ ( isFlippedBase && calendar.disabled( dateObject ) && ( hasEnabledWeekdays || hasEnabledBeforeTarget || hasEnabledAfterTarget ) ) ||
        /* 3 */ ( !isFlippedBase && (dateObject.pick <= minLimitObject.pick || dateObject.pick >= maxLimitObject.pick) )
    ) {


        // When inverted, flip the direction if there arent any enabled weekdays
        // and there are no enabled dates in the direction of the interval.
        if ( isFlippedBase && !hasEnabledWeekdays && ( ( !hasEnabledAfterTarget && interval > 0 ) || ( !hasEnabledBeforeTarget && interval < 0 ) ) ) {
            interval *= -1
        }


        // Keep looping until we reach an enabled date.
        while ( /*safety &&*/ calendar.disabled( dateObject ) ) {

            /*safety -= 1
            if ( !safety ) {
                throw 'Fell into an infinite loop while validating ' + dateObject.obj + '.'
            }*/


            // If weve looped into the next/prev month with a large interval, return to the original date and flatten the interval.
            if ( Math.abs( interval ) > 1 && ( dateObject.month < originalDateObject.month || dateObject.month > originalDateObject.month ) ) {
                dateObject = originalDateObject
                interval = interval > 0 ? 1 : -1
            }


            // If weve reached the min/max limit, reverse the direction, flatten the interval and set it to the limit.
            if ( dateObject.pick <= minLimitObject.pick ) {
                reachedMin = true
                interval = 1
                dateObject = calendar.create([
                    minLimitObject.year,
                    minLimitObject.month,
                    minLimitObject.date + (dateObject.pick === minLimitObject.pick ? 0 : -1)
                ])
            }
            else if ( dateObject.pick >= maxLimitObject.pick ) {
                reachedMax = true
                interval = -1
                dateObject = calendar.create([
                    maxLimitObject.year,
                    maxLimitObject.month,
                    maxLimitObject.date + (dateObject.pick === maxLimitObject.pick ? 0 : 1)
                ])
            }


            // If weve reached both limits, just break out of the loop.
            if ( reachedMin && reachedMax ) {
                break
            }


            // Finally, create the shifted date using the interval and keep looping.
            dateObject = calendar.create([ dateObject.year, dateObject.month, dateObject.date + interval ])
        }

    } //endif


    // Return the date object settled on.
    return dateObject
} //DatePicker.prototype.validate


/**
 * Check if a date is disabled.
 */
DatePicker.prototype.disabled = function( dateToVerify ) {

    var
        calendar = this,

        // Filter through the disabled dates to check if this is one.
        isDisabledMatch = calendar.item.disable.filter( function( dateToDisable ) {

            // If the date is a number, match the weekday with 0index and `firstDay` check.
            if ( _.isInteger( dateToDisable ) ) {
                return dateToVerify.day === ( calendar.settings.firstDay ? dateToDisable : dateToDisable - 1 ) % 7
            }

            // If its an array or a native JS date, create and match the exact date.
            if ( $.isArray( dateToDisable ) || _.isDate( dateToDisable ) ) {
                return dateToVerify.pick === calendar.create( dateToDisable ).pick
            }

            // If its an object, match a date within the from and to range.
            if ( $.isPlainObject( dateToDisable ) ) {
                return calendar.withinRange( dateToDisable, dateToVerify )
            }
        })

    // If this date matches a disabled date, confirm its not inverted.
    isDisabledMatch = isDisabledMatch.length && !isDisabledMatch.filter(function( dateToDisable ) {
        return $.isArray( dateToDisable ) && dateToDisable[3] == 'inverted' ||
            $.isPlainObject( dateToDisable ) && dateToDisable.inverted
    }).length

    // Check the calendar enabled flag and respectively flip the
    // disabled state. Then also check if its beyond the min/max limits.
    return calendar.item.enable === -1 ? !isDisabledMatch : isDisabledMatch ||
        dateToVerify.pick < calendar.item.min.pick ||
        dateToVerify.pick > calendar.item.max.pick

} //DatePicker.prototype.disabled


/**
 * Parse a string into a usable type.
 */
DatePicker.prototype.parse = function( type, value, options ) {

    var calendar = this,
        parsingObject = {}

    // If its already parsed, were good.
    if ( !value || typeof value != 'string' ) {
        return value
    }

    // We need a `.format` to parse the value with.
    if ( !( options && options.format ) ) {
        options = options || {}
        options.format = calendar.settings.format
    }

    // Convert the format into an array and then map through it.
    calendar.formats.toArray( options.format ).map( function( label ) {

        var
            // Grab the formatting label.
            formattingLabel = calendar.formats[ label ],

            // The format length is from the formatting label function or the
            // label length without the escaping exclamation (!) mark.
            formatLength = formattingLabel ? _.trigger( formattingLabel, calendar, [ value, parsingObject ] ) : label.replace( /^!/, '' ).length

        // If there's a format label, split the value up to the format length.
        // Then add it to the parsing object with appropriate label.
        if ( formattingLabel ) {
            parsingObject[ label ] = value.substr( 0, formatLength )
        }

        // Update the value as the substring from format length to end.
        value = value.substr( formatLength )
    })

    // Compensate for month 0index.
    return [
        parsingObject.yyyy || parsingObject.yy,
        +( parsingObject.mm || parsingObject.m ) - 1,
        parsingObject.dd || parsingObject.d
    ]
} //DatePicker.prototype.parse


/**
 * Various formats to display the object in.
 */
DatePicker.prototype.formats = (function() {

    // Return the length of the first word in a collection.
    function getWordLengthFromCollection( string, collection, dateObject ) {

        // Grab the first word from the string.
        var word = string.match( /\w+/ )[ 0 ]

        // If there's no month index, add it to the date object
        if ( !dateObject.mm && !dateObject.m ) {
            dateObject.m = collection.indexOf( word ) + 1
        }

        // Return the length of the word.
        return word.length
    }

    // Get the length of the first word in a string.
    function getFirstWordLength( string ) {
        return string.match( /\w+/ )[ 0 ].length
    }

    return {

        d: function( string, dateObject ) {

            // If there's string, then get the digits length.
            // Otherwise return the selected date.
            return string ? _.digits( string ) : dateObject.date
        },
        dd: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected date with a leading zero.
            return string ? 2 : _.lead( dateObject.date )
        },
        ddd: function( string, dateObject ) {

            // If there's a string, then get the length of the first word.
            // Otherwise return the short selected weekday.
            return string ? getFirstWordLength( string ) : this.settings.weekdaysShort[ dateObject.day ]
        },
        dddd: function( string, dateObject ) {

            // If there's a string, then get the length of the first word.
            // Otherwise return the full selected weekday.
            return string ? getFirstWordLength( string ) : this.settings.weekdaysFull[ dateObject.day ]
        },
        m: function( string, dateObject ) {

            // If there's a string, then get the length of the digits
            // Otherwise return the selected month with 0index compensation.
            return string ? _.digits( string ) : dateObject.month + 1
        },
        mm: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected month with 0index and leading zero.
            return string ? 2 : _.lead( dateObject.month + 1 )
        },
        mmm: function( string, dateObject ) {

            var collection = this.settings.monthsShort

            // If there's a string, get length of the relevant month from the short
            // months collection. Otherwise return the selected month from that collection.
            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]
        },
        mmmm: function( string, dateObject ) {

            var collection = this.settings.monthsFull

            // If there's a string, get length of the relevant month from the full
            // months collection. Otherwise return the selected month from that collection.
            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]
        },
        yy: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected year by slicing out the first 2 digits.
            return string ? 2 : ( '' + dateObject.year ).slice( 2 )
        },
        yyyy: function( string, dateObject ) {

            // If there's a string, then the length is always 4.
            // Otherwise return the selected year.
            return string ? 4 : dateObject.year
        },

        // Create an array by splitting the formatting string passed.
        toArray: function( formatString ) { return formatString.split( /(d{1,4}|m{1,4}|y{4}|yy|!.)/g ) },

        // Format an object into a string using the formatting options.
        toString: function ( formatString, itemObject ) {
            var calendar = this
            return calendar.formats.toArray( formatString ).map( function( label ) {
                return _.trigger( calendar.formats[ label ], calendar, [ 0, itemObject ] ) || label.replace( /^!/, '' )
            }).join( '' )
        }
    }
})() //DatePicker.prototype.formats




/**
 * Check if two date units are the exact.
 */
DatePicker.prototype.isDateExact = function( one, two ) {

    var calendar = this

    // When were working with weekdays, do a direct comparison.
    if (
        ( _.isInteger( one ) && _.isInteger( two ) ) ||
        ( typeof one == 'boolean' && typeof two == 'boolean' )
     ) {
        return one === two
    }

    // When were working with date representations, compare the pick value.
    if (
        ( _.isDate( one ) || $.isArray( one ) ) &&
        ( _.isDate( two ) || $.isArray( two ) )
    ) {
        return calendar.create( one ).pick === calendar.create( two ).pick
    }

    // When were working with range objects, compare the from and to.
    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {
        return calendar.isDateExact( one.from, two.from ) && calendar.isDateExact( one.to, two.to )
    }

    return false
}


/**
 * Check if two date units overlap.
 */
DatePicker.prototype.isDateOverlap = function( one, two ) {

    var calendar = this,
        firstDay = calendar.settings.firstDay ? 1 : 0

    // When were working with a weekday index, compare the days.
    if ( _.isInteger( one ) && ( _.isDate( two ) || $.isArray( two ) ) ) {
        one = one % 7 + firstDay
        return one === calendar.create( two ).day + 1
    }
    if ( _.isInteger( two ) && ( _.isDate( one ) || $.isArray( one ) ) ) {
        two = two % 7 + firstDay
        return two === calendar.create( one ).day + 1
    }

    // When were working with range objects, check if the ranges overlap.
    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {
        return calendar.overlapRanges( one, two )
    }

    return false
}


/**
 * Flip the enabled state.
 */
DatePicker.prototype.flipEnable = function(val) {
    var itemObject = this.item
    itemObject.enable = val || (itemObject.enable == -1 ? 1 : -1)
}


/**
 * Mark a collection of dates as disabled.
 */
DatePicker.prototype.deactivate = function( type, datesToDisable ) {

    var calendar = this,
        disabledItems = calendar.item.disable.slice(0)


    // If were flipping, thats all we need to do.
    if ( datesToDisable == 'flip' ) {
        calendar.flipEnable()
    }

    else if ( datesToDisable === false ) {
        calendar.flipEnable(1)
        disabledItems = []
    }

    else if ( datesToDisable === true ) {
        calendar.flipEnable(-1)
        disabledItems = []
    }

    // Otherwise go through the dates to disable.
    else {

        datesToDisable.map(function( unitToDisable ) {

            var matchFound

            // When we have disabled items, check for matches.
            // If something is matched, immediately break out.
            for ( var index = 0; index < disabledItems.length; index += 1 ) {
                if ( calendar.isDateExact( unitToDisable, disabledItems[index] ) ) {
                    matchFound = true
                    break
                }
            }

            // If nothing was found, add the validated unit to the collection.
            if ( !matchFound ) {
                if (
                    _.isInteger( unitToDisable ) ||
                    _.isDate( unitToDisable ) ||
                    $.isArray( unitToDisable ) ||
                    ( $.isPlainObject( unitToDisable ) && unitToDisable.from && unitToDisable.to )
                ) {
                    disabledItems.push( unitToDisable )
                }
            }
        })
    }

    // Return the updated collection.
    return disabledItems
} //DatePicker.prototype.deactivate


/**
 * Mark a collection of dates as enabled.
 */
DatePicker.prototype.activate = function( type, datesToEnable ) {

    var calendar = this,
        disabledItems = calendar.item.disable,
        disabledItemsCount = disabledItems.length

    // If were flipping, thats all we need to do.
    if ( datesToEnable == 'flip' ) {
        calendar.flipEnable()
    }

    else if ( datesToEnable === true ) {
        calendar.flipEnable(1)
        disabledItems = []
    }

    else if ( datesToEnable === false ) {
        calendar.flipEnable(-1)
        disabledItems = []
    }

    // Otherwise go through the disabled dates.
    else {

        datesToEnable.map(function( unitToEnable ) {

            var matchFound,
                disabledUnit,
                index,
                isExactRange

            // Go through the disabled items and try to find a match.
            for ( index = 0; index < disabledItemsCount; index += 1 ) {

                disabledUnit = disabledItems[index]

                // When an exact match is found, remove it from the collection.
                if ( calendar.isDateExact( disabledUnit, unitToEnable ) ) {
                    matchFound = disabledItems[index] = null
                    isExactRange = true
                    break
                }

                // When an overlapped match is found, add the inverted state to it.
                else if ( calendar.isDateOverlap( disabledUnit, unitToEnable ) ) {
                    if ( $.isPlainObject( unitToEnable ) ) {
                        unitToEnable.inverted = true
                        matchFound = unitToEnable
                    }
                    else if ( $.isArray( unitToEnable ) ) {
                        matchFound = unitToEnable
                        if ( !matchFound[3] ) matchFound.push( 'inverted' )
                    }
                    else if ( _.isDate( unitToEnable ) ) {
                        matchFound = [ unitToEnable.getFullYear(), unitToEnable.getMonth(), unitToEnable.getDate(), 'inverted' ]
                    }
                    break
                }
            }

            // If a match was found, remove a previous duplicate entry.
            if ( matchFound ) for ( index = 0; index < disabledItemsCount; index += 1 ) {
                if ( calendar.isDateExact( disabledItems[index], unitToEnable ) ) {
                    disabledItems[index] = null
                    break
                }
            }

            // In the event that were dealing with an exact range of dates,
            // make sure there are no inverted dates because of it.
            if ( isExactRange ) for ( index = 0; index < disabledItemsCount; index += 1 ) {
                if ( calendar.isDateOverlap( disabledItems[index], unitToEnable ) ) {
                    disabledItems[index] = null
                    break
                }
            }

            // If something is still matched, add it into the collection.
            if ( matchFound ) {
                disabledItems.push( matchFound )
            }
        })
    }

    // Return the updated collection.
    return disabledItems.filter(function( val ) { return val != null })
} //DatePicker.prototype.activate


/**
 * Create a string for the nodes in the picker.
 */
DatePicker.prototype.nodes = function( isOpen ) {

    var
        calendar = this,
        settings = calendar.settings,
        calendarItem = calendar.item,
        nowObject = calendarItem.now,
        selectedObject = calendarItem.select,
        highlightedObject = calendarItem.highlight,
        viewsetObject = calendarItem.view,
        disabledCollection = calendarItem.disable,
        minLimitObject = calendarItem.min,
        maxLimitObject = calendarItem.max,


        // Create the calendar table head using a copy of weekday labels collection.
        // * We do a copy so we don't mutate the original array.
        tableHead = (function( collection, fullCollection ) {

            // If the first day should be Monday, move Sunday to the end.
            if ( settings.firstDay ) {
                collection.push( collection.shift() )
                fullCollection.push( fullCollection.shift() )
            }

            // Create and return the table head group.
            return _.node(
                'thead',
                _.node(
                    'tr',
                    _.group({
                        min: 0,
                        max: DAYS_IN_WEEK - 1,
                        i: 1,
                        node: 'th',
                        item: function( counter ) {
                            return [
                                collection[ counter ],
                                settings.klass.weekdays,
                                'scope=col title="' + fullCollection[ counter ] + '"'
                            ]
                        }
                    })
                )
            ) //endreturn

        // Materialize modified
        })( ( settings.showWeekdaysFull ? settings.weekdaysFull : settings.weekdaysLetter ).slice( 0 ), settings.weekdaysFull.slice( 0 ) ), //tableHead


        // Create the nav for next/prev month.
        createMonthNav = function( next ) {

            // Otherwise, return the created month tag.
            return _.node(
                'div',
                ' ',
                settings.klass[ 'nav' + ( next ? 'Next' : 'Prev' ) ] + (

                    // If the focused month is outside the range, disabled the button.
                    ( next && viewsetObject.year >= maxLimitObject.year && viewsetObject.month >= maxLimitObject.month ) ||
                    ( !next && viewsetObject.year <= minLimitObject.year && viewsetObject.month <= minLimitObject.month ) ?
                    ' ' + settings.klass.navDisabled : ''
                ),
                'data-nav=' + ( next || -1 ) + ' ' +
                _.ariaAttr({
                    role: 'button',
                    controls: calendar.$node[0].id + '_table'
                }) + ' ' +
                'title="' + (next ? settings.labelMonthNext : settings.labelMonthPrev ) + '"'
            ) //endreturn
        }, //createMonthNav


        // Create the month label.
        //Materialize modified
        createMonthLabel = function(override) {

            var monthsCollection = settings.showMonthsShort ? settings.monthsShort : settings.monthsFull

             // Materialize modified
            if (override == "short_months") {
              monthsCollection = settings.monthsShort;
            }

            // If there are months to select, add a dropdown menu.
            if ( settings.selectMonths  && override == undefined) {

                return _.node( 'select',
                    _.group({
                        min: 0,
                        max: 11,
                        i: 1,
                        node: 'option',
                        item: function( loopedMonth ) {

                            return [

                                // The looped month and no classes.
                                monthsCollection[ loopedMonth ], 0,

                                // Set the value and selected index.
                                'value=' + loopedMonth +
                                ( viewsetObject.month == loopedMonth ? ' selected' : '' ) +
                                (
                                    (
                                        ( viewsetObject.year == minLimitObject.year && loopedMonth < minLimitObject.month ) ||
                                        ( viewsetObject.year == maxLimitObject.year && loopedMonth > maxLimitObject.month )
                                    ) ?
                                    ' disabled' : ''
                                )
                            ]
                        }
                    }),
                    settings.klass.selectMonth + ' browser-default',
                    ( isOpen ? '' : 'disabled' ) + ' ' +
                    _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +
                    'title="' + settings.labelMonthSelect + '"'
                )
            }

            // Materialize modified
            if (override == "short_months")
                if (selectedObject != null)
                return _.node( 'div', monthsCollection[ selectedObject.month ] );
                else return _.node( 'div', monthsCollection[ viewsetObject.month ] );

            // If there's a need for a month selector
            return _.node( 'div', monthsCollection[ viewsetObject.month ], settings.klass.month )
        }, //createMonthLabel


        // Create the year label.
        // Materialize modified
        createYearLabel = function(override) {

            var focusedYear = viewsetObject.year,

            // If years selector is set to a literal "true", set it to 5. Otherwise
            // divide in half to get half before and half after focused year.
            numberYears = settings.selectYears === true ? 5 : ~~( settings.selectYears / 2 )

            // If there are years to select, add a dropdown menu.
            if ( numberYears ) {

                var
                    minYear = minLimitObject.year,
                    maxYear = maxLimitObject.year,
                    lowestYear = focusedYear - numberYears,
                    highestYear = focusedYear + numberYears

                // If the min year is greater than the lowest year, increase the highest year
                // by the difference and set the lowest year to the min year.
                if ( minYear > lowestYear ) {
                    highestYear += minYear - lowestYear
                    lowestYear = minYear
                }

                // If the max year is less than the highest year, decrease the lowest year
                // by the lower of the two: available and needed years. Then set the
                // highest year to the max year.
                if ( maxYear < highestYear ) {

                    var availableYears = lowestYear - minYear,
                        neededYears = highestYear - maxYear

                    lowestYear -= availableYears > neededYears ? neededYears : availableYears
                    highestYear = maxYear
                }

                if ( settings.selectYears  && override == undefined ) {
                    return _.node( 'select',
                        _.group({
                            min: lowestYear,
                            max: highestYear,
                            i: 1,
                            node: 'option',
                            item: function( loopedYear ) {
                                return [

                                    // The looped year and no classes.
                                    loopedYear, 0,

                                    // Set the value and selected index.
                                    'value=' + loopedYear + ( focusedYear == loopedYear ? ' selected' : '' )
                                ]
                            }
                        }),
                        settings.klass.selectYear + ' browser-default',
                        ( isOpen ? '' : 'disabled' ) + ' ' + _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +
                        'title="' + settings.labelYearSelect + '"'
                    )
                }
            }

            // Materialize modified
            if (override == "raw")
                return _.node( 'div', focusedYear )

            // Otherwise just return the year focused
            return _.node( 'div', focusedYear, settings.klass.year )
        } //createYearLabel


        // Materialize modified
        createDayLabel = function() {
                if (selectedObject != null)
                    return _.node( 'div', selectedObject.date)
                else return _.node( 'div', nowObject.date)
            }
        createWeekdayLabel = function() {
            var display_day;

            if (selectedObject != null)
                display_day = selectedObject.day;
            else
                display_day = nowObject.day;
            var weekday = settings.weekdaysFull[ display_day ]
            return weekday
        }


    // Create and return the entire calendar.
return _.node(
        // Date presentation View
        'div',
            _.node(
                'div',
                createWeekdayLabel(),
                "picker__weekday-display"
            )+
            _.node(
                // Div for short Month
                'div',
                createMonthLabel("short_months"),
                settings.klass.month_display
            )+
            _.node(
                // Div for Day
                'div',
                createDayLabel() ,
                settings.klass.day_display
            )+
            _.node(
                // Div for Year
                'div',
                createYearLabel("raw") ,
                settings.klass.year_display
            ),
        settings.klass.date_display
    )+
    // Calendar container
    _.node('div',
        _.node('div',
        ( settings.selectYears ?  createMonthLabel() + createYearLabel() : createMonthLabel() + createYearLabel() ) +
        createMonthNav() + createMonthNav( 1 ),
        settings.klass.header
    ) + _.node(
        'table',
        tableHead +
        _.node(
            'tbody',
            _.group({
                min: 0,
                max: WEEKS_IN_CALENDAR - 1,
                i: 1,
                node: 'tr',
                item: function( rowCounter ) {

                    // If Monday is the first day and the month starts on Sunday, shift the date back a week.
                    var shiftDateBy = settings.firstDay && calendar.create([ viewsetObject.year, viewsetObject.month, 1 ]).day === 0 ? -7 : 0

                    return [
                        _.group({
                            min: DAYS_IN_WEEK * rowCounter - viewsetObject.day + shiftDateBy + 1, // Add 1 for weekday 0index
                            max: function() {
                                return this.min + DAYS_IN_WEEK - 1
                            },
                            i: 1,
                            node: 'td',
                            item: function( targetDate ) {

                                // Convert the time date from a relative date to a target date.
                                targetDate = calendar.create([ viewsetObject.year, viewsetObject.month, targetDate + ( settings.firstDay ? 1 : 0 ) ])

                                var isSelected = selectedObject && selectedObject.pick == targetDate.pick,
                                    isHighlighted = highlightedObject && highlightedObject.pick == targetDate.pick,
                                    isDisabled = disabledCollection && calendar.disabled( targetDate ) || targetDate.pick < minLimitObject.pick || targetDate.pick > maxLimitObject.pick,
                                    formattedDate = _.trigger( calendar.formats.toString, calendar, [ settings.format, targetDate ] )

                                return [
                                    _.node(
                                        'div',
                                        targetDate.date,
                                        (function( klasses ) {

                                            // Add the `infocus` or `outfocus` classes based on month in view.
                                            klasses.push( viewsetObject.month == targetDate.month ? settings.klass.infocus : settings.klass.outfocus )

                                            // Add the `today` class if needed.
                                            if ( nowObject.pick == targetDate.pick ) {
                                                klasses.push( settings.klass.now )
                                            }

                                            // Add the `selected` class if something's selected and the time matches.
                                            if ( isSelected ) {
                                                klasses.push( settings.klass.selected )
                                            }

                                            // Add the `highlighted` class if something's highlighted and the time matches.
                                            if ( isHighlighted ) {
                                                klasses.push( settings.klass.highlighted )
                                            }

                                            // Add the `disabled` class if something's disabled and the object matches.
                                            if ( isDisabled ) {
                                                klasses.push( settings.klass.disabled )
                                            }

                                            return klasses.join( ' ' )
                                        })([ settings.klass.day ]),
                                        'data-pick=' + targetDate.pick + ' ' + _.ariaAttr({
                                            role: 'gridcell',
                                            label: formattedDate,
                                            selected: isSelected && calendar.$node.val() === formattedDate ? true : null,
                                            activedescendant: isHighlighted ? true : null,
                                            disabled: isDisabled ? true : null
                                        })
                                    ),
                                    '',
                                    _.ariaAttr({ role: 'presentation' })
                                ] //endreturn
                            }
                        })
                    ] //endreturn
                }
            })
        ),
        settings.klass.table,
        'id="' + calendar.$node[0].id + '_table' + '" ' + _.ariaAttr({
            role: 'grid',
            controls: calendar.$node[0].id,
            readonly: true
        })
    )
    , settings.klass.calendar_container) // end calendar

     +

    // * For Firefox forms to submit, make sure to set the buttons `type` attributes as button.
    _.node(
        'div',
        _.node( 'button', settings.today, "btn-flat picker__today",
            'type=button data-pick=' + nowObject.pick +
            ( isOpen && !calendar.disabled(nowObject) ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ) +
        _.node( 'button', settings.clear, "btn-flat picker__clear",
            'type=button data-clear=1' +
            ( isOpen ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ) +
        _.node('button', settings.close, "btn-flat picker__close",
            'type=button data-close=true ' +
            ( isOpen ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ),
        settings.klass.footer
    ) //endreturn
} //DatePicker.prototype.nodes




/**
 * The date picker defaults.
 */
DatePicker.defaults = (function( prefix ) {

    return {

        // The title label to use for the month nav buttons
        labelMonthNext: 'Next month',
        labelMonthPrev: 'Previous month',

        // The title label to use for the dropdown selectors
        labelMonthSelect: 'Select a month',
        labelYearSelect: 'Select a year',

        // Months and weekdays
        monthsFull: [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ],
        monthsShort: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],
        weekdaysFull: [ 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday' ],
        weekdaysShort: [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],

        // Materialize modified
        weekdaysLetter: [ 'S', 'M', 'T', 'W', 'T', 'F', 'S' ],

        // Today and clear
        today: 'Today',
        clear: 'Clear',
        close: 'Close',

        // The format to show on the `input` element
        format: 'd mmmm, yyyy',

        // Classes
        klass: {

            table: prefix + 'table',

            header: prefix + 'header',


            // Materialize Added klasses
            date_display: prefix + 'date-display',
            day_display: prefix + 'day-display',
            month_display: prefix + 'month-display',
            year_display: prefix + 'year-display',
            calendar_container: prefix + 'calendar-container',
            // end



            navPrev: prefix + 'nav--prev',
            navNext: prefix + 'nav--next',
            navDisabled: prefix + 'nav--disabled',

            month: prefix + 'month',
            year: prefix + 'year',

            selectMonth: prefix + 'select--month',
            selectYear: prefix + 'select--year',

            weekdays: prefix + 'weekday',

            day: prefix + 'day',
            disabled: prefix + 'day--disabled',
            selected: prefix + 'day--selected',
            highlighted: prefix + 'day--highlighted',
            now: prefix + 'day--today',
            infocus: prefix + 'day--infocus',
            outfocus: prefix + 'day--outfocus',

            footer: prefix + 'footer',

            buttonClear: prefix + 'button--clear',
            buttonToday: prefix + 'button--today',
            buttonClose: prefix + 'button--close'
        }
    }
})( Picker.klasses().picker + '__' )





/**
 * Extend the picker to add the date picker.
 */
Picker.extend( 'pickadate', DatePicker )


}));


/* JQUERY EASING 1.3 */

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright  2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing['jswing'] = jQuery.easing['swing'];

jQuery.extend(jQuery.easing, {
    def: 'easeOutQuad',
    swing: function (x, t, b, c, d) {
        //alert(jQuery.easing.default);
        return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
    },
    easeInQuad: function (x, t, b, c, d) {
        return c * (t /= d) * t + b;
    },
    easeOutQuad: function (x, t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
    },
    easeInOutQuad: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return -c / 2 * ((--t) * (t - 2) - 1) + b;
    },
    easeInCubic: function (x, t, b, c, d) {
        return c * (t /= d) * t * t + b;
    },
    easeOutCubic: function (x, t, b, c, d) {
        return c * ((t = t / d - 1) * t * t + 1) + b;
    },
    easeInOutCubic: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t + 2) + b;
    },
    easeInQuart: function (x, t, b, c, d) {
        return c * (t /= d) * t * t * t + b;
    },
    easeOutQuart: function (x, t, b, c, d) {
        return -c * ((t = t / d - 1) * t * t * t - 1) + b;
    },
    easeInOutQuart: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    },
    easeInQuint: function (x, t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b;
    },
    easeOutQuint: function (x, t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
    },
    easeInOutQuint: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    },
    easeInSine: function (x, t, b, c, d) {
        return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
    },
    easeOutSine: function (x, t, b, c, d) {
        return c * Math.sin(t / d * (Math.PI / 2)) + b;
    },
    easeInOutSine: function (x, t, b, c, d) {
        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
    },
    easeInExpo: function (x, t, b, c, d) {
        return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
    },
    easeOutExpo: function (x, t, b, c, d) {
        return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
    },
    easeInOutExpo: function (x, t, b, c, d) {
        if (t == 0) return b;
        if (t == d) return b + c;
        if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    },
    easeInCirc: function (x, t, b, c, d) {
        return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
    },
    easeOutCirc: function (x, t, b, c, d) {
        return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
    },
    easeInOutCirc: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    },
    easeInElastic: function (x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    },
    easeOutElastic: function (x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
    },
    easeInOutElastic: function (x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d / 2) == 2) return b + c;
        if (!p) p = d * (.3 * 1.5);
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
    },
    easeInBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b;
    },
    easeOutBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
    },
    easeInOutBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
    },
    easeInBounce: function (x, t, b, c, d) {
        return c - jQuery.easing.easeOutBounce(x, d - t, 0, c, d) + b;
    },
    easeOutBounce: function (x, t, b, c, d) {
        if ((t /= d) < (1 / 2.75)) {
            return c * (7.5625 * t * t) + b;
        } else if (t < (2 / 2.75)) {
            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
        } else if (t < (2.5 / 2.75)) {
            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
        } else {
            return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
        }
    },
    easeInOutBounce: function (x, t, b, c, d) {
        if (t < d / 2) return jQuery.easing.easeInBounce(x, t * 2, 0, c, d) * .5 + b;
        return jQuery.easing.easeOutBounce(x, t * 2 - d, 0, c, d) * .5 + c * .5 + b;
    }
});

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright  2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 *//* DROPDOWN */

(function ($) {

    // Add posibility to scroll to selected option
    // usefull for select for example
    $.fn.scrollTo = function (elem) {
        $(this).scrollTop($(this).scrollTop() - $(this).offset().top + $(elem).offset().top);
        return this;
    };

    $.fn.dropdown = function (option) {
        var defaults = {
            inDuration: 300,
            outDuration: 225,
            constrain_width: true, // Constrains width of dropdown to the activator
            hover: false,
            gutter: 0, // Spacing from edge
            belowOrigin: false
        };

        this.each(function () {
            var origin = $(this);
            var options = $.extend({}, defaults, option);

            // Dropdown menu
            var activates = $("#" + origin.attr('data-activates'));

            function updateOptions() {
                if (origin.data('induration') !== undefined)
                    options.inDuration = origin.data('inDuration');
                if (origin.data('outduration') !== undefined)
                    options.outDuration = origin.data('outDuration');
                if (origin.data('constrainwidth') !== undefined)
                    options.constrain_width = origin.data('constrainwidth');
                if (origin.data('hover') !== undefined)
                    options.hover = origin.data('hover');
                if (origin.data('gutter') !== undefined)
                    options.gutter = origin.data('gutter');
                if (origin.data('beloworigin') !== undefined)
                    options.belowOrigin = origin.data('beloworigin');
            }

            updateOptions();

            // Attach dropdown to its activator
            origin.after(activates);

            /*
              Helper function to position and resize dropdown.
              Used in hover and click handler.
            */
            function placeDropdown() {
                // Check html data attributes
                updateOptions();

                // Set Dropdown state
                activates.addClass('active');

                // Constrain width
                if (options.constrain_width === true) {
                    activates.css('width', origin.outerWidth());
                }
                var offset = 0;
                if (options.belowOrigin === true) {
                    offset = origin.height();
                }

                // Handle edge alignment
                var offsetLeft = origin.offset().left;
                var width_difference = 0;
                var gutter_spacing = options.gutter;


                if (offsetLeft + activates.innerWidth() > $(window).width()) {
                    width_difference = origin.innerWidth() - activates.innerWidth();
                    gutter_spacing = gutter_spacing * -1;
                }

                // Position dropdown
                activates.css({
                    position: 'absolute',
                    top: origin.position().top + offset,
                    left: origin.position().left + width_difference + gutter_spacing
                });



                // Show dropdown
                activates.stop(true, true).css('opacity', 0)
                    .slideDown({
                        queue: false,
                        duration: options.inDuration,
                        easing: 'easeOutCubic',
                        complete: function () {
                            $(this).css('height', '');
                        }
                    })
                    .animate({
                        opacity: 1
                    }, {
                        queue: false,
                        duration: options.inDuration,
                        easing: 'easeOutSine'
                    });
            }

            function hideDropdown() {
                activates.fadeOut(options.outDuration);
                activates.removeClass('active');
            }

            // Hover
            if (options.hover) {
                var open = false;
                origin.unbind('click.' + origin.attr('id'));
                // Hover handler to show dropdown
                origin.on('mouseenter', function (e) { // Mouse over
                    if (open === false) {
                        placeDropdown();
                        open = true;
                    }
                });
                origin.on('mouseleave', function (e) {
                    // If hover on origin then to something other than dropdown content, then close
                    var toEl = e.toElement || e.relatedTarget; // added browser compatibility for target element
                    if (!$(toEl).closest('.dropdown-content').is(activates)) {
                        activates.stop(true, true);
                        hideDropdown();
                        open = false;
                    }
                });

                activates.on('mouseleave', function (e) { // Mouse out
                    var toEl = e.toElement || e.relatedTarget;
                    if (!$(toEl).closest('.dropdown-button').is(origin)) {
                        activates.stop(true, true);
                        hideDropdown();
                        open = false;
                    }
                });

                // Click
            } else {

                // Click handler to show dropdown
                origin.unbind('click.' + origin.attr('id'));
                origin.bind('click.' + origin.attr('id'), function (e) {

                    if (origin[0] == e.currentTarget && ($(e.target).closest('.dropdown-content').length === 0)) {
                        e.preventDefault(); // Prevents button click from moving window
                        placeDropdown();

                    }
                    // If origin is clicked and menu is open, close menu
                    else {
                        if (origin.hasClass('active')) {
                            hideDropdown();
                            $(document).unbind('click.' + activates.attr('id'));
                        }
                    }
                    // If menu open, add click close handler to document
                    if (activates.hasClass('active')) {
                        $(document).bind('click.' + activates.attr('id'), function (e) {
                            if (!activates.is(e.target) && !origin.is(e.target) && (!origin.find(e.target).length > 0)) {
                                hideDropdown();
                                $(document).unbind('click.' + activates.attr('id'));
                            }
                        });
                    }
                });

            } // End else

            // Listen to open and close event - useful for select component
            origin.on('open', placeDropdown);
            origin.on('close', hideDropdown);


        });
    }; // End dropdown plugin

    $(document).ready(function () {
        $('.dropdown-button').dropdown();
    });
}(jQuery));/* GLOBAL */

Materialize = {};

// Unique ID
Materialize.guid = (function () {
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }
    return function () {
        return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
            s4() + '-' + s4() + s4() + s4();
    };
})();

Materialize.elementOrParentIsFixed = function (element) {
    var $element = $(element);
    var $checkElements = $element.add($element.parents());
    var isFixed = false;
    $checkElements.each(function () {
        if ($(this).css("position") === "fixed") {
            isFixed = true;
            return false;
        }
    });
    return isFixed;
};

// Velocity has conflicts when loaded with jQuery, this will check for it
var Vel;
if ($) {
    Vel = $.Velocity;
} else {
    Vel = Velocity;
}/* FORMS */

(function ($) {
    $(document).ready(function () {

        // Function to update labels of text fields
        Materialize.updateTextFields = function () {
            var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';
            $(input_selector).each(function (index, element) {
                if ($(element).val().length > 0 || $(this).attr('placeholder') !== undefined || $(element)[0].validity.badInput === true) {
                    $(this).siblings('label, i').addClass('active');
                } else {
                    $(this).siblings('label, i').removeClass('active');
                }
            });
        };

        // Text based inputs
        var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';

        // Handle HTML5 autofocus
        $('input[autofocus]').siblings('label, i').addClass('active');

        // Add active if form auto complete
        $(document).on('change', input_selector, function () {
            if ($(this).val().length !== 0 || $(this).attr('placeholder') !== undefined) {
                $(this).siblings('label, i').addClass('active');
            }
            validate_field($(this));
        });

        // Add active if input element has been pre-populated on document ready
        $(document).ready(function () {
            Materialize.updateTextFields();
        });

        // HTML DOM FORM RESET handling
        $(document).on('reset', function (e) {
            var formReset = $(e.target);
            if (formReset.is('form')) {
                formReset.find(input_selector).removeClass('valid').removeClass('invalid');
                formReset.find(input_selector).each(function () {
                    if ($(this).attr('value') === '') {
                        $(this).siblings('label, i').removeClass('active');
                    }
                });

                // Reset select
                formReset.find('select.initialized').each(function () {
                    var reset_text = formReset.find('option[selected]').text();
                    formReset.siblings('input.select-dropdown').val(reset_text);
                });
            }
        });

        // Add active when element has focus
        $(document).on('focus', input_selector, function () {
            $(this).siblings('label, i').addClass('active');
        });

        $(document).on('blur', input_selector, function () {
            var $inputElement = $(this);
            if ($inputElement.val().length === 0 && $inputElement[0].validity.badInput !== true && $inputElement.attr('placeholder') === undefined) {
                $inputElement.siblings('label, i').removeClass('active');
            }
            validate_field($inputElement);
        });

        validate_field = function (object) {
            var hasLength = object.attr('length') !== undefined;
            var lenAttr = parseInt(object.attr('length'));
            var len = object.val().length;

            if (object.val().length === 0 && object[0].validity.badInput === false) {
                if (object.hasClass('validate')) {
                    object.removeClass('valid');
                    object.removeClass('invalid');
                }
            } else {
                if (object.hasClass('validate')) {
                    // Check for character counter attributes
                    if ((object.is(':valid') && hasLength && (len < lenAttr)) || (object.is(':valid') && !hasLength)) {
                        object.removeClass('invalid');
                        object.addClass('valid');
                    } else {
                        object.removeClass('valid');
                        object.addClass('invalid');
                    }
                }
            }
        };


        // Textarea Auto Resize
        var hiddenDiv = $('.hiddendiv').first();
        if (!hiddenDiv.length) {
            hiddenDiv = $('<div class="hiddendiv common"></div>');
            $('body').append(hiddenDiv);
        }
        var text_area_selector = '.materialize-textarea';

        function textareaAutoResize($textarea) {
            // Set font properties of hiddenDiv

            var fontFamily = $textarea.css('font-family');
            var fontSize = $textarea.css('font-size');

            if (fontSize) {
                hiddenDiv.css('font-size', fontSize);
            }
            if (fontFamily) {
                hiddenDiv.css('font-family', fontFamily);
            }

            if ($textarea.attr('wrap') === "off") {
                hiddenDiv.css('overflow-wrap', "normal")
                    .css('white-space', "pre");
            }




            hiddenDiv.text($textarea.val() + '\n');
            var content = hiddenDiv.html().replace(/\n/g, '<br>');
            hiddenDiv.html(content);


            // When textarea is hidden, width goes crazy.
            // Approximate with half of window size

            if ($textarea.is(':visible')) {
                hiddenDiv.css('width', $textarea.width());
            } else {
                hiddenDiv.css('width', $(window).width() / 2);
            }

            $textarea.css('height', hiddenDiv.height());
        }

        $(text_area_selector).each(function () {
            var $textarea = $(this);
            if ($textarea.val().length) {
                textareaAutoResize($textarea);
            }
        });

        $('body').on('keyup keydown', text_area_selector, function () {
            textareaAutoResize($(this));
        });


        // File Input Path
        $('.file-field').each(function () {
            var path_input = $(this).find('input.file-path');
            $(this).find('input[type="file"]').change(function () {
                path_input.val($(this)[0].files[0].name);
                path_input.trigger('change');
            });
        });



        /****************
         *  Range Input  *
         ****************/

        var range_type = 'input[type=range]';
        var range_mousedown = false;
        var left;

        $(range_type).each(function () {
            var thumb = $('<span class="thumb"><span class="value"></span></span>');
            $(this).after(thumb);
        });

        var range_wrapper = '.range-field';
        $(document).on('change', range_type, function (e) {
            var thumb = $(this).siblings('.thumb');
            thumb.find('.value').html($(this).val());
        });

        $(document).on('input mousedown touchstart', range_type, function (e) {
            var thumb = $(this).siblings('.thumb');

            // If thumb indicator does not exist yet, create it
            if (thumb.length <= 0) {
                thumb = $('<span class="thumb"><span class="value"></span></span>');
                $(this).append(thumb);
            }

            // Set indicator value
            thumb.find('.value').html($(this).val());

            range_mousedown = true;
            $(this).addClass('active');

            if (!thumb.hasClass('active')) {
                thumb.velocity({
                    height: "30px",
                    width: "30px",
                    top: "-20px",
                    marginLeft: "-15px"
                }, {
                    duration: 300,
                    easing: 'easeOutExpo'
                });
            }

            if (e.pageX === undefined || e.pageX === null) { //mobile
                left = e.originalEvent.touches[0].pageX - $(this).offset().left;
            } else { // desktop
                left = e.pageX - $(this).offset().left;
            }
            var width = $(this).outerWidth();

            if (left < 0) {
                left = 0;
            } else if (left > width) {
                left = width;
            }
            thumb.addClass('active').css('left', left);
            thumb.find('.value').html($(this).val());


        });

        $(document).on('mouseup touchend', range_wrapper, function () {
            range_mousedown = false;
            $(this).removeClass('active');
        });

        $(document).on('mousemove touchmove', range_wrapper, function (e) {
            var thumb = $(this).children('.thumb');
            var left;
            if (range_mousedown) {
                if (!thumb.hasClass('active')) {
                    thumb.velocity({
                        height: '30px',
                        width: '30px',
                        top: '-20px',
                        marginLeft: '-15px'
                    }, {
                        duration: 300,
                        easing: 'easeOutExpo'
                    });
                }
                if (e.pageX === undefined || e.pageX === null) { //mobile
                    left = e.originalEvent.touches[0].pageX - $(this).offset().left;
                } else { // desktop
                    left = e.pageX - $(this).offset().left;
                }
                var width = $(this).outerWidth();

                if (left < 0) {
                    left = 0;
                } else if (left > width) {
                    left = width;
                }
                thumb.addClass('active').css('left', left);
                thumb.find('.value').html(thumb.siblings(range_type).val());
            }
        });

        $(document).on('mouseout touchleave', range_wrapper, function () {
            if (!range_mousedown) {

                var thumb = $(this).children('.thumb');

                if (thumb.hasClass('active')) {
                    thumb.velocity({
                        height: '0',
                        width: '0',
                        top: '10px',
                        marginLeft: '-6px'
                    }, {
                        duration: 100
                    });
                }
                thumb.removeClass('active');
            }
        });

    }); // End of $(document).ready




    // Select Plugin
    $.fn.material_select = function (callback) {
        $(this).each(function () {
            $select = $(this);

            if ($select.hasClass('browser-default')) {
                return; // Continue to next (return false breaks out of entire loop)
            }

            // Tear down structure if Select needs to be rebuilt
            var lastID = $select.data('select-id');
            if (lastID) {
                $select.parent().find('i').remove();
                $select.parent().find('input').remove();

                $select.unwrap();
                $('ul#select-options-' + lastID).remove();
            }

            // If destroying the select, remove the selelct-id and reset it to it's uninitialized state.
            if (callback === 'destroy') {
                $select.data('select-id', null).removeClass('initialized');
                return;
            }

            var uniqueID = Materialize.guid();
            $select.data('select-id', uniqueID);
            var wrapper = $('<div class="select-wrapper"></div>');
            wrapper.addClass($select.attr('class'));
            var options = $('<ul id="select-options-' + uniqueID + '" class="dropdown-content select-dropdown"></ul>');
            var selectOptions = $select.children('option');

            var label;
            if ($select.find('option:selected') !== undefined) {
                label = $select.find('option:selected');
            } else {
                label = options.first();
            }


            // Create Dropdown structure
            selectOptions.each(function () {
                // Add disabled attr if disabled
                options.append($('<li class="' + (($(this).is(':disabled')) ? 'disabled' : '') + '"><span>' + $(this).html() + '</span></li>'));
            });


            options.find('li').each(function (i) {
                var $curr_select = $select;
                $(this).click(function () {
                    // Check if option element is disabled
                    if (!$(this).hasClass('disabled')) {
                        $curr_select.find('option').eq(i).prop('selected', true);
                        // Trigger onchange() event
                        $curr_select.trigger('change');
                        $curr_select.siblings('input.select-dropdown').val($(this).text());
                        if (typeof callback !== 'undefined') callback();
                    }
                });

            });

            // Wrap Elements
            $select.wrap(wrapper);
            // Add Select Display Element
            var dropdownIcon = $('<span class="caret">&#9660;</span>');
            if ($select.is(':disabled'))
                dropdownIcon.addClass('disabled');

            var $newSelect = $('<input type="text" class="select-dropdown" readonly="true" ' + (($select.is(':disabled')) ? 'disabled' : '') + ' data-activates="select-options-' + uniqueID + '" value="' + label.html() + '"/>');
            $select.before($newSelect);
            $newSelect.before(dropdownIcon);

            $('body').append(options);
            // Check if section element is disabled
            if (!$select.is(':disabled')) {
                $newSelect.dropdown({
                    "hover": false
                });
            }

            // Copy tabindex
            if ($select.attr('tabindex')) {
                $($newSelect[0]).attr('tabindex', $select.attr('tabindex'));
            }

            $select.addClass('initialized');

            $newSelect.on('focus', function () {
                $(this).trigger('open');
                label = $(this).val();
                selectedOption = options.find('li').filter(function () {
                    return $(this).text().toLowerCase() === label.toLowerCase();
                })[0];
                activateOption(options, selectedOption);
            });

            $newSelect.on('blur', function () {
                $(this).trigger('close');
            });

            // Make option as selected and scroll to selected position
            activateOption = function (collection, newOption) {
                collection.find('li.active').removeClass('active');
                $(newOption).addClass('active');
                collection.scrollTo(newOption);
            };

            // Allow user to search by typing
            // this array is cleared after 1 second
            filterQuery = [];

            onKeyDown = function (event) {
                // TAB - switch to another input
                if (event.which == 9) {
                    $newSelect.trigger('close');
                    return;
                }

                // ARROW DOWN WHEN SELECT IS CLOSED - open select options
                if (event.which == 40 && !options.is(":visible")) {
                    $newSelect.trigger('open');
                    return;
                }

                // ENTER WHEN SELECT IS CLOSED - submit form
                if (event.which == 13 && !options.is(":visible")) {
                    return;
                }

                event.preventDefault();

                // CASE WHEN USER TYPE LETTERS
                letter = String.fromCharCode(event.which).toLowerCase();
                var nonLetters = [9, 13, 27, 38, 40];
                if (letter && (nonLetters.indexOf(event.which) === -1)) {
                    filterQuery.push(letter);

                    string = filterQuery.join("");

                    newOption = options.find('li').filter(function () {
                        return $(this).text().toLowerCase().indexOf(string) === 0;
                    })[0];

                    if (newOption) {
                        activateOption(options, newOption);
                    }
                }

                // ENTER - select option and close when select options are opened
                if (event.which == 13) {
                    activeOption = options.find('li.active:not(.disabled)')[0];
                    if (activeOption) {
                        $(activeOption).trigger('click');
                        $newSelect.trigger('close');
                    }
                }

                // ARROW DOWN - move to next not disabled option
                if (event.which == 40) {
                    newOption = options.find('li.active').next('li:not(.disabled)')[0];
                    if (newOption) {
                        activateOption(options, newOption);
                    }
                }

                // ESC - close options
                if (event.which == 27) {
                    $newSelect.trigger('close');
                }

                // ARROW UP - move to previous not disabled option
                if (event.which == 38) {
                    newOption = options.find('li.active').prev('li:not(.disabled)')[0];
                    if (newOption) {
                        activateOption(options, newOption);
                    }
                }

                // Automaticaly clean filter query so user can search again by starting letters
                setTimeout(function () {
                    filterQuery = [];
                }, 1000);
            };

            $newSelect.on('keydown', onKeyDown);
        });
    };

}(jQuery));/*! VelocityJS.org (1.2.2). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
! function (e) {
    function t(e) {
        var t = e.length,
            r = $.type(e);
        return "function" === r || $.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === r || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
    }
    if (!e.jQuery) {
        var $ = function (e, t) {
            return new $.fn.init(e, t)
        };
        $.isWindow = function (e) {
            return null != e && e == e.window
        }, $.type = function (e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? a[o.call(e)] || "object" : typeof e
        }, $.isArray = Array.isArray || function (e) {
            return "array" === $.type(e)
        }, $.isPlainObject = function (e) {
            var t;
            if (!e || "object" !== $.type(e) || e.nodeType || $.isWindow(e)) return !1;
            try {
                if (e.constructor && !n.call(e, "constructor") && !n.call(e.constructor.prototype, "isPrototypeOf")) return !1
            } catch (r) {
                return !1
            }
            for (t in e);
            return void 0 === t || n.call(e, t)
        }, $.each = function (e, r, a) {
            var n, o = 0,
                i = e.length,
                s = t(e);
            if (a) {
                if (s)
                    for (; i > o && (n = r.apply(e[o], a), n !== !1); o++);
                else
                    for (o in e)
                        if (n = r.apply(e[o], a), n === !1) break
            } else if (s)
                for (; i > o && (n = r.call(e[o], o, e[o]), n !== !1); o++);
            else
                for (o in e)
                    if (n = r.call(e[o], o, e[o]), n === !1) break; return e
        }, $.data = function (e, t, a) {
            if (void 0 === a) {
                var n = e[$.expando],
                    o = n && r[n];
                if (void 0 === t) return o;
                if (o && t in o) return o[t]
            } else if (void 0 !== t) {
                var n = e[$.expando] || (e[$.expando] = ++$.uuid);
                return r[n] = r[n] || {}, r[n][t] = a, a
            }
        }, $.removeData = function (e, t) {
            var a = e[$.expando],
                n = a && r[a];
            n && $.each(t, function (e, t) {
                delete n[t]
            })
        }, $.extend = function () {
            var e, t, r, a, n, o, i = arguments[0] || {},
                s = 1,
                l = arguments.length,
                u = !1;
            for ("boolean" == typeof i && (u = i, i = arguments[s] || {}, s++), "object" != typeof i && "function" !== $.type(i) && (i = {}), s === l && (i = this, s--); l > s; s++)
                if (null != (n = arguments[s]))
                    for (a in n) e = i[a], r = n[a], i !== r && (u && r && ($.isPlainObject(r) || (t = $.isArray(r))) ? (t ? (t = !1, o = e && $.isArray(e) ? e : []) : o = e && $.isPlainObject(e) ? e : {}, i[a] = $.extend(u, o, r)) : void 0 !== r && (i[a] = r));
            return i
        }, $.queue = function (e, r, a) {
            function n(e, r) {
                var a = r || [];
                return null != e && (t(Object(e)) ? ! function (e, t) {
                    for (var r = +t.length, a = 0, n = e.length; r > a;) e[n++] = t[a++];
                    if (r !== r)
                        for (; void 0 !== t[a];) e[n++] = t[a++];
                    return e.length = n, e
                }(a, "string" == typeof e ? [e] : e) : [].push.call(a, e)), a
            }
            if (e) {
                r = (r || "fx") + "queue";
                var o = $.data(e, r);
                return a ? (!o || $.isArray(a) ? o = $.data(e, r, n(a)) : o.push(a), o) : o || []
            }
        }, $.dequeue = function (e, t) {
            $.each(e.nodeType ? [e] : e, function (e, r) {
                t = t || "fx";
                var a = $.queue(r, t),
                    n = a.shift();
                "inprogress" === n && (n = a.shift()), n && ("fx" === t && a.unshift("inprogress"), n.call(r, function () {
                    $.dequeue(r, t)
                }))
            })
        }, $.fn = $.prototype = {
            init: function (e) {
                if (e.nodeType) return this[0] = e, this;
                throw new Error("Not a DOM node.")
            },
            offset: function () {
                var t = this[0].getBoundingClientRect ? this[0].getBoundingClientRect() : {
                    top: 0,
                    left: 0
                };
                return {
                    top: t.top + (e.pageYOffset || document.scrollTop || 0) - (document.clientTop || 0),
                    left: t.left + (e.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || 0)
                }
            },
            position: function () {
                function e() {
                    for (var e = this.offsetParent || document; e && "html" === !e.nodeType.toLowerCase && "static" === e.style.position;) e = e.offsetParent;
                    return e || document
                }
                var t = this[0],
                    e = e.apply(t),
                    r = this.offset(),
                    a = /^(?:body|html)$/i.test(e.nodeName) ? {
                        top: 0,
                        left: 0
                    } : $(e).offset();
                return r.top -= parseFloat(t.style.marginTop) || 0, r.left -= parseFloat(t.style.marginLeft) || 0, e.style && (a.top += parseFloat(e.style.borderTopWidth) || 0, a.left += parseFloat(e.style.borderLeftWidth) || 0), {
                    top: r.top - a.top,
                    left: r.left - a.left
                }
            }
        };
        var r = {};
        $.expando = "velocity" + (new Date).getTime(), $.uuid = 0;
        for (var a = {}, n = a.hasOwnProperty, o = a.toString, i = "Boolean Number String Function Array Date RegExp Object Error".split(" "), s = 0; s < i.length; s++) a["[object " + i[s] + "]"] = i[s].toLowerCase();
        $.fn.init.prototype = $.fn, e.Velocity = {
            Utilities: $
        }
    }
}(window),
function (e) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : e()
}(function () {
    return function (e, t, r, a) {
        function n(e) {
            for (var t = -1, r = e ? e.length : 0, a = []; ++t < r;) {
                var n = e[t];
                n && a.push(n)
            }
            return a
        }

        function o(e) {
            return g.isWrapped(e) ? e = [].slice.call(e) : g.isNode(e) && (e = [e]), e
        }

        function i(e) {
            var t = $.data(e, "velocity");
            return null === t ? a : t
        }

        function s(e) {
            return function (t) {
                return Math.round(t * e) * (1 / e)
            }
        }

        function l(e, r, a, n) {
            function o(e, t) {
                return 1 - 3 * t + 3 * e
            }

            function i(e, t) {
                return 3 * t - 6 * e
            }

            function s(e) {
                return 3 * e
            }

            function l(e, t, r) {
                return ((o(t, r) * e + i(t, r)) * e + s(t)) * e
            }

            function u(e, t, r) {
                return 3 * o(t, r) * e * e + 2 * i(t, r) * e + s(t)
            }

            function c(t, r) {
                for (var n = 0; m > n; ++n) {
                    var o = u(r, e, a);
                    if (0 === o) return r;
                    var i = l(r, e, a) - t;
                    r -= i / o
                }
                return r
            }

            function p() {
                for (var t = 0; b > t; ++t) w[t] = l(t * x, e, a)
            }

            function f(t, r, n) {
                var o, i, s = 0;
                do i = r + (n - r) / 2, o = l(i, e, a) - t, o > 0 ? n = i : r = i; while (Math.abs(o) > h && ++s < v);
                return i
            }

            function d(t) {
                for (var r = 0, n = 1, o = b - 1; n != o && w[n] <= t; ++n) r += x;
                --n;
                var i = (t - w[n]) / (w[n + 1] - w[n]),
                    s = r + i * x,
                    l = u(s, e, a);
                return l >= y ? c(t, s) : 0 == l ? s : f(t, r, r + x)
            }

            function g() {
                V = !0, (e != r || a != n) && p()
            }
            var m = 4,
                y = .001,
                h = 1e-7,
                v = 10,
                b = 11,
                x = 1 / (b - 1),
                S = "Float32Array" in t;
            if (4 !== arguments.length) return !1;
            for (var P = 0; 4 > P; ++P)
                if ("number" != typeof arguments[P] || isNaN(arguments[P]) || !isFinite(arguments[P])) return !1;
            e = Math.min(e, 1), a = Math.min(a, 1), e = Math.max(e, 0), a = Math.max(a, 0);
            var w = S ? new Float32Array(b) : new Array(b),
                V = !1,
                C = function (t) {
                    return V || g(), e === r && a === n ? t : 0 === t ? 0 : 1 === t ? 1 : l(d(t), r, n)
                };
            C.getControlPoints = function () {
                return [{
                    x: e,
                    y: r
                }, {
                    x: a,
                    y: n
                }]
            };
            var T = "generateBezier(" + [e, r, a, n] + ")";
            return C.toString = function () {
                return T
            }, C
        }

        function u(e, t) {
            var r = e;
            return g.isString(e) ? v.Easings[e] || (r = !1) : r = g.isArray(e) && 1 === e.length ? s.apply(null, e) : g.isArray(e) && 2 === e.length ? b.apply(null, e.concat([t])) : g.isArray(e) && 4 === e.length ? l.apply(null, e) : !1, r === !1 && (r = v.Easings[v.defaults.easing] ? v.defaults.easing : h), r
        }

        function c(e) {
            if (e) {
                var t = (new Date).getTime(),
                    r = v.State.calls.length;
                r > 1e4 && (v.State.calls = n(v.State.calls));
                for (var o = 0; r > o; o++)
                    if (v.State.calls[o]) {
                        var s = v.State.calls[o],
                            l = s[0],
                            u = s[2],
                            f = s[3],
                            d = !!f,
                            m = null;
                        f || (f = v.State.calls[o][3] = t - 16);
                        for (var y = Math.min((t - f) / u.duration, 1), h = 0, b = l.length; b > h; h++) {
                            var S = l[h],
                                w = S.element;
                            if (i(w)) {
                                var V = !1;
                                if (u.display !== a && null !== u.display && "none" !== u.display) {
                                    if ("flex" === u.display) {
                                        var C = ["-webkit-box", "-moz-box", "-ms-flexbox", "-webkit-flex"];
                                        $.each(C, function (e, t) {
                                            x.setPropertyValue(w, "display", t)
                                        })
                                    }
                                    x.setPropertyValue(w, "display", u.display)
                                }
                                u.visibility !== a && "hidden" !== u.visibility && x.setPropertyValue(w, "visibility", u.visibility);
                                for (var T in S)
                                    if ("element" !== T) {
                                        var k = S[T],
                                            A, F = g.isString(k.easing) ? v.Easings[k.easing] : k.easing;
                                        if (1 === y) A = k.endValue;
                                        else {
                                            var E = k.endValue - k.startValue;
                                            if (A = k.startValue + E * F(y, u, E), !d && A === k.currentValue) continue
                                        }
                                        if (k.currentValue = A, "tween" === T) m = A;
                                        else {
                                            if (x.Hooks.registered[T]) {
                                                var j = x.Hooks.getRoot(T),
                                                    H = i(w).rootPropertyValueCache[j];
                                                H && (k.rootPropertyValue = H)
                                            }
                                            var N = x.setPropertyValue(w, T, k.currentValue + (0 === parseFloat(A) ? "" : k.unitType), k.rootPropertyValue, k.scrollData);
                                            x.Hooks.registered[T] && (i(w).rootPropertyValueCache[j] = x.Normalizations.registered[j] ? x.Normalizations.registered[j]("extract", null, N[1]) : N[1]), "transform" === N[0] && (V = !0)
                                        }
                                    }
                                u.mobileHA && i(w).transformCache.translate3d === a && (i(w).transformCache.translate3d = "(0px, 0px, 0px)", V = !0), V && x.flushTransformCache(w)
                            }
                        }
                        u.display !== a && "none" !== u.display && (v.State.calls[o][2].display = !1), u.visibility !== a && "hidden" !== u.visibility && (v.State.calls[o][2].visibility = !1), u.progress && u.progress.call(s[1], s[1], y, Math.max(0, f + u.duration - t), f, m), 1 === y && p(o)
                    }
            }
            v.State.isTicking && P(c)
        }

        function p(e, t) {
            if (!v.State.calls[e]) return !1;
            for (var r = v.State.calls[e][0], n = v.State.calls[e][1], o = v.State.calls[e][2], s = v.State.calls[e][4], l = !1, u = 0, c = r.length; c > u; u++) {
                var p = r[u].element;
                if (t || o.loop || ("none" === o.display && x.setPropertyValue(p, "display", o.display), "hidden" === o.visibility && x.setPropertyValue(p, "visibility", o.visibility)), o.loop !== !0 && ($.queue(p)[1] === a || !/\.velocityQueueEntryFlag/i.test($.queue(p)[1])) && i(p)) {
                    i(p).isAnimating = !1, i(p).rootPropertyValueCache = {};
                    var f = !1;
                    $.each(x.Lists.transforms3D, function (e, t) {
                        var r = /^scale/.test(t) ? 1 : 0,
                            n = i(p).transformCache[t];
                        i(p).transformCache[t] !== a && new RegExp("^\\(" + r + "[^.]").test(n) && (f = !0, delete i(p).transformCache[t])
                    }), o.mobileHA && (f = !0, delete i(p).transformCache.translate3d), f && x.flushTransformCache(p), x.Values.removeClass(p, "velocity-animating")
                }
                if (!t && o.complete && !o.loop && u === c - 1) try {
                    o.complete.call(n, n)
                } catch (d) {
                    setTimeout(function () {
                        throw d
                    }, 1)
                }
                s && o.loop !== !0 && s(n), i(p) && o.loop === !0 && !t && ($.each(i(p).tweensContainer, function (e, t) {
                    /^rotate/.test(e) && 360 === parseFloat(t.endValue) && (t.endValue = 0, t.startValue = 360), /^backgroundPosition/.test(e) && 100 === parseFloat(t.endValue) && "%" === t.unitType && (t.endValue = 0, t.startValue = 100)
                }), v(p, "reverse", {
                    loop: !0,
                    delay: o.delay
                })), o.queue !== !1 && $.dequeue(p, o.queue)
            }
            v.State.calls[e] = !1;
            for (var g = 0, m = v.State.calls.length; m > g; g++)
                if (v.State.calls[g] !== !1) {
                    l = !0;
                    break
                }
            l === !1 && (v.State.isTicking = !1, delete v.State.calls, v.State.calls = [])
        }
        var f = function () {
                if (r.documentMode) return r.documentMode;
                for (var e = 7; e > 4; e--) {
                    var t = r.createElement("div");
                    if (t.innerHTML = "<!--[if IE " + e + "]><span></span><![endif]-->", t.getElementsByTagName("span").length) return t = null, e
                }
                return a
            }(),
            d = function () {
                var e = 0;
                return t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || function (t) {
                    var r = (new Date).getTime(),
                        a;
                    return a = Math.max(0, 16 - (r - e)), e = r + a, setTimeout(function () {
                        t(r + a)
                    }, a)
                }
            }(),
            g = {
                isString: function (e) {
                    return "string" == typeof e
                },
                isArray: Array.isArray || function (e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                },
                isFunction: function (e) {
                    return "[object Function]" === Object.prototype.toString.call(e)
                },
                isNode: function (e) {
                    return e && e.nodeType
                },
                isNodeList: function (e) {
                    return "object" == typeof e && /^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e)) && e.length !== a && (0 === e.length || "object" == typeof e[0] && e[0].nodeType > 0)
                },
                isWrapped: function (e) {
                    return e && (e.jquery || t.Zepto && t.Zepto.zepto.isZ(e))
                },
                isSVG: function (e) {
                    return t.SVGElement && e instanceof t.SVGElement
                },
                isEmptyObject: function (e) {
                    for (var t in e) return !1;
                    return !0
                }
            },
            $, m = !1;
        if (e.fn && e.fn.jquery ? ($ = e, m = !0) : $ = t.Velocity.Utilities, 8 >= f && !m) throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");
        if (7 >= f) return void(jQuery.fn.velocity = jQuery.fn.animate);
        var y = 400,
            h = "swing",
            v = {
                State: {
                    isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
                    isAndroid: /Android/i.test(navigator.userAgent),
                    isGingerbread: /Android 2\.3\.[3-7]/i.test(navigator.userAgent),
                    isChrome: t.chrome,
                    isFirefox: /Firefox/i.test(navigator.userAgent),
                    prefixElement: r.createElement("div"),
                    prefixMatches: {},
                    scrollAnchor: null,
                    scrollPropertyLeft: null,
                    scrollPropertyTop: null,
                    isTicking: !1,
                    calls: []
                },
                CSS: {},
                Utilities: $,
                Redirects: {},
                Easings: {},
                Promise: t.Promise,
                defaults: {
                    queue: "",
                    duration: y,
                    easing: h,
                    begin: a,
                    complete: a,
                    progress: a,
                    display: a,
                    visibility: a,
                    loop: !1,
                    delay: !1,
                    mobileHA: !0,
                    _cacheValues: !0
                },
                init: function (e) {
                    $.data(e, "velocity", {
                        isSVG: g.isSVG(e),
                        isAnimating: !1,
                        computedStyle: null,
                        tweensContainer: null,
                        rootPropertyValueCache: {},
                        transformCache: {}
                    })
                },
                hook: null,
                mock: !1,
                version: {
                    major: 1,
                    minor: 2,
                    patch: 2
                },
                debug: !1
            };
        t.pageYOffset !== a ? (v.State.scrollAnchor = t, v.State.scrollPropertyLeft = "pageXOffset", v.State.scrollPropertyTop = "pageYOffset") : (v.State.scrollAnchor = r.documentElement || r.body.parentNode || r.body, v.State.scrollPropertyLeft = "scrollLeft", v.State.scrollPropertyTop = "scrollTop");
        var b = function () {
            function e(e) {
                return -e.tension * e.x - e.friction * e.v
            }

            function t(t, r, a) {
                var n = {
                    x: t.x + a.dx * r,
                    v: t.v + a.dv * r,
                    tension: t.tension,
                    friction: t.friction
                };
                return {
                    dx: n.v,
                    dv: e(n)
                }
            }

            function r(r, a) {
                var n = {
                        dx: r.v,
                        dv: e(r)
                    },
                    o = t(r, .5 * a, n),
                    i = t(r, .5 * a, o),
                    s = t(r, a, i),
                    l = 1 / 6 * (n.dx + 2 * (o.dx + i.dx) + s.dx),
                    u = 1 / 6 * (n.dv + 2 * (o.dv + i.dv) + s.dv);
                return r.x = r.x + l * a, r.v = r.v + u * a, r
            }
            return function a(e, t, n) {
                var o = {
                        x: -1,
                        v: 0,
                        tension: null,
                        friction: null
                    },
                    i = [0],
                    s = 0,
                    l = 1e-4,
                    u = .016,
                    c, p, f;
                for (e = parseFloat(e) || 500, t = parseFloat(t) || 20, n = n || null, o.tension = e, o.friction = t, c = null !== n, c ? (s = a(e, t), p = s / n * u) : p = u;;)
                    if (f = r(f || o, p), i.push(1 + f.x), s += 16, !(Math.abs(f.x) > l && Math.abs(f.v) > l)) break;
                return c ? function (e) {
                    return i[e * (i.length - 1) | 0]
                } : s
            }
        }();
        v.Easings = {
            linear: function (e) {
                return e
            },
            swing: function (e) {
                return .5 - Math.cos(e * Math.PI) / 2
            },
            spring: function (e) {
                return 1 - Math.cos(4.5 * e * Math.PI) * Math.exp(6 * -e)
            }
        }, $.each([["ease", [.25, .1, .25, 1]], ["ease-in", [.42, 0, 1, 1]], ["ease-out", [0, 0, .58, 1]], ["ease-in-out", [.42, 0, .58, 1]], ["easeInSine", [.47, 0, .745, .715]], ["easeOutSine", [.39, .575, .565, 1]], ["easeInOutSine", [.445, .05, .55, .95]], ["easeInQuad", [.55, .085, .68, .53]], ["easeOutQuad", [.25, .46, .45, .94]], ["easeInOutQuad", [.455, .03, .515, .955]], ["easeInCubic", [.55, .055, .675, .19]], ["easeOutCubic", [.215, .61, .355, 1]], ["easeInOutCubic", [.645, .045, .355, 1]], ["easeInQuart", [.895, .03, .685, .22]], ["easeOutQuart", [.165, .84, .44, 1]], ["easeInOutQuart", [.77, 0, .175, 1]], ["easeInQuint", [.755, .05, .855, .06]], ["easeOutQuint", [.23, 1, .32, 1]], ["easeInOutQuint", [.86, 0, .07, 1]], ["easeInExpo", [.95, .05, .795, .035]], ["easeOutExpo", [.19, 1, .22, 1]], ["easeInOutExpo", [1, 0, 0, 1]], ["easeInCirc", [.6, .04, .98, .335]], ["easeOutCirc", [.075, .82, .165, 1]], ["easeInOutCirc", [.785, .135, .15, .86]]], function (e, t) {
            v.Easings[t[0]] = l.apply(null, t[1])
        });
        var x = v.CSS = {
            RegEx: {
                isHex: /^#([A-f\d]{3}){1,2}$/i,
                valueUnwrap: /^[A-z]+\((.*)\)$/i,
                wrappedValueAlreadyExtracted: /[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,
                valueSplit: /([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi
            },
            Lists: {
                colors: ["fill", "stroke", "stopColor", "color", "backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor", "outlineColor"],
                transformsBase: ["translateX", "translateY", "scale", "scaleX", "scaleY", "skewX", "skewY", "rotateZ"],
                transforms3D: ["transformPerspective", "translateZ", "scaleZ", "rotateX", "rotateY"]
            },
            Hooks: {
                templates: {
                    textShadow: ["Color X Y Blur", "black 0px 0px 0px"],
                    boxShadow: ["Color X Y Blur Spread", "black 0px 0px 0px 0px"],
                    clip: ["Top Right Bottom Left", "0px 0px 0px 0px"],
                    backgroundPosition: ["X Y", "0% 0%"],
                    transformOrigin: ["X Y Z", "50% 50% 0px"],
                    perspectiveOrigin: ["X Y", "50% 50%"]
                },
                registered: {},
                register: function () {
                    for (var e = 0; e < x.Lists.colors.length; e++) {
                        var t = "color" === x.Lists.colors[e] ? "0 0 0 1" : "255 255 255 1";
                        x.Hooks.templates[x.Lists.colors[e]] = ["Red Green Blue Alpha", t]
                    }
                    var r, a, n;
                    if (f)
                        for (r in x.Hooks.templates) {
                            a = x.Hooks.templates[r], n = a[0].split(" ");
                            var o = a[1].match(x.RegEx.valueSplit);
                            "Color" === n[0] && (n.push(n.shift()), o.push(o.shift()), x.Hooks.templates[r] = [n.join(" "), o.join(" ")])
                        }
                    for (r in x.Hooks.templates) {
                        a = x.Hooks.templates[r], n = a[0].split(" ");
                        for (var e in n) {
                            var i = r + n[e],
                                s = e;
                            x.Hooks.registered[i] = [r, s]
                        }
                    }
                },
                getRoot: function (e) {
                    var t = x.Hooks.registered[e];
                    return t ? t[0] : e
                },
                cleanRootPropertyValue: function (e, t) {
                    return x.RegEx.valueUnwrap.test(t) && (t = t.match(x.RegEx.valueUnwrap)[1]), x.Values.isCSSNullValue(t) && (t = x.Hooks.templates[e][1]), t
                },
                extractValue: function (e, t) {
                    var r = x.Hooks.registered[e];
                    if (r) {
                        var a = r[0],
                            n = r[1];
                        return t = x.Hooks.cleanRootPropertyValue(a, t), t.toString().match(x.RegEx.valueSplit)[n]
                    }
                    return t
                },
                injectValue: function (e, t, r) {
                    var a = x.Hooks.registered[e];
                    if (a) {
                        var n = a[0],
                            o = a[1],
                            i, s;
                        return r = x.Hooks.cleanRootPropertyValue(n, r), i = r.toString().match(x.RegEx.valueSplit), i[o] = t, s = i.join(" ")
                    }
                    return r
                }
            },
            Normalizations: {
                registered: {
                    clip: function (e, t, r) {
                        switch (e) {
                        case "name":
                            return "clip";
                        case "extract":
                            var a;
                            return x.RegEx.wrappedValueAlreadyExtracted.test(r) ? a = r : (a = r.toString().match(x.RegEx.valueUnwrap), a = a ? a[1].replace(/,(\s+)?/g, " ") : r), a;
                        case "inject":
                            return "rect(" + r + ")"
                        }
                    },
                    blur: function (e, t, r) {
                        switch (e) {
                        case "name":
                            return v.State.isFirefox ? "filter" : "-webkit-filter";
                        case "extract":
                            var a = parseFloat(r);
                            if (!a && 0 !== a) {
                                var n = r.toString().match(/blur\(([0-9]+[A-z]+)\)/i);
                                a = n ? n[1] : 0
                            }
                            return a;
                        case "inject":
                            return parseFloat(r) ? "blur(" + r + ")" : "none"
                        }
                    },
                    opacity: function (e, t, r) {
                        if (8 >= f) switch (e) {
                        case "name":
                            return "filter";
                        case "extract":
                            var a = r.toString().match(/alpha\(opacity=(.*)\)/i);
                            return r = a ? a[1] / 100 : 1;
                        case "inject":
                            return t.style.zoom = 1, parseFloat(r) >= 1 ? "" : "alpha(opacity=" + parseInt(100 * parseFloat(r), 10) + ")"
                        } else switch (e) {
                        case "name":
                            return "opacity";
                        case "extract":
                            return r;
                        case "inject":
                            return r
                        }
                    }
                },
                register: function () {
                    9 >= f || v.State.isGingerbread || (x.Lists.transformsBase = x.Lists.transformsBase.concat(x.Lists.transforms3D));
                    for (var e = 0; e < x.Lists.transformsBase.length; e++) ! function () {
                        var t = x.Lists.transformsBase[e];
                        x.Normalizations.registered[t] = function (e, r, n) {
                            switch (e) {
                            case "name":
                                return "transform";
                            case "extract":
                                return i(r) === a || i(r).transformCache[t] === a ? /^scale/i.test(t) ? 1 : 0 : i(r).transformCache[t].replace(/[()]/g, "");
                            case "inject":
                                var o = !1;
                                switch (t.substr(0, t.length - 1)) {
                                case "translate":
                                    o = !/(%|px|em|rem|vw|vh|\d)$/i.test(n);
                                    break;
                                case "scal":
                                case "scale":
                                    v.State.isAndroid && i(r).transformCache[t] === a && 1 > n && (n = 1), o = !/(\d)$/i.test(n);
                                    break;
                                case "skew":
                                    o = !/(deg|\d)$/i.test(n);
                                    break;
                                case "rotate":
                                    o = !/(deg|\d)$/i.test(n)
                                }
                                return o || (i(r).transformCache[t] = "(" + n + ")"), i(r).transformCache[t]
                            }
                        }
                    }();
                    for (var e = 0; e < x.Lists.colors.length; e++) ! function () {
                        var t = x.Lists.colors[e];
                        x.Normalizations.registered[t] = function (e, r, n) {
                            switch (e) {
                            case "name":
                                return t;
                            case "extract":
                                var o;
                                if (x.RegEx.wrappedValueAlreadyExtracted.test(n)) o = n;
                                else {
                                    var i, s = {
                                        black: "rgb(0, 0, 0)",
                                        blue: "rgb(0, 0, 255)",
                                        gray: "rgb(128, 128, 128)",
                                        green: "rgb(0, 128, 0)",
                                        red: "rgb(255, 0, 0)",
                                        white: "rgb(255, 255, 255)"
                                    };
                                    /^[A-z]+$/i.test(n) ? i = s[n] !== a ? s[n] : s.black : x.RegEx.isHex.test(n) ? i = "rgb(" + x.Values.hexToRgb(n).join(" ") + ")" : /^rgba?\(/i.test(n) || (i = s.black), o = (i || n).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g, " ")
                                }
                                return 8 >= f || 3 !== o.split(" ").length || (o += " 1"), o;
                            case "inject":
                                return 8 >= f ? 4 === n.split(" ").length && (n = n.split(/\s+/).slice(0, 3).join(" ")) : 3 === n.split(" ").length && (n += " 1"), (8 >= f ? "rgb" : "rgba") + "(" + n.replace(/\s+/g, ",").replace(/\.(\d)+(?=,)/g, "") + ")"
                            }
                        }
                    }()
                }
            },
            Names: {
                camelCase: function (e) {
                    return e.replace(/-(\w)/g, function (e, t) {
                        return t.toUpperCase()
                    })
                },
                SVGAttribute: function (e) {
                    var t = "width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";
                    return (f || v.State.isAndroid && !v.State.isChrome) && (t += "|transform"), new RegExp("^(" + t + ")$", "i").test(e)
                },
                prefixCheck: function (e) {
                    if (v.State.prefixMatches[e]) return [v.State.prefixMatches[e], !0];
                    for (var t = ["", "Webkit", "Moz", "ms", "O"], r = 0, a = t.length; a > r; r++) {
                        var n;
                        if (n = 0 === r ? e : t[r] + e.replace(/^\w/, function (e) {
                                return e.toUpperCase()
                            }), g.isString(v.State.prefixElement.style[n])) return v.State.prefixMatches[e] = n, [n, !0]
                    }
                    return [e, !1]
                }
            },
            Values: {
                hexToRgb: function (e) {
                    var t = /^#?([a-f\d])([a-f\d])([a-f\d])$/i,
                        r = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,
                        a;
                    return e = e.replace(t, function (e, t, r, a) {
                        return t + t + r + r + a + a
                    }), a = r.exec(e), a ? [parseInt(a[1], 16), parseInt(a[2], 16), parseInt(a[3], 16)] : [0, 0, 0]
                },
                isCSSNullValue: function (e) {
                    return 0 == e || /^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)
                },
                getUnitType: function (e) {
                    return /^(rotate|skew)/i.test(e) ? "deg" : /(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e) ? "" : "px"
                },
                getDisplayType: function (e) {
                    var t = e && e.tagName.toString().toLowerCase();
                    return /^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t) ? "inline" : /^(li)$/i.test(t) ? "list-item" : /^(tr)$/i.test(t) ? "table-row" : /^(table)$/i.test(t) ? "table" : /^(tbody)$/i.test(t) ? "table-row-group" : "block"
                },
                addClass: function (e, t) {
                    e.classList ? e.classList.add(t) : e.className += (e.className.length ? " " : "") + t
                },
                removeClass: function (e, t) {
                    e.classList ? e.classList.remove(t) : e.className = e.className.toString().replace(new RegExp("(^|\\s)" + t.split(" ").join("|") + "(\\s|$)", "gi"), " ")
                }
            },
            getPropertyValue: function (e, r, n, o) {
                function s(e, r) {
                    function n() {
                        u && x.setPropertyValue(e, "display", "none")
                    }
                    var l = 0;
                    if (8 >= f) l = $.css(e, r);
                    else {
                        var u = !1;
                        if (/^(width|height)$/.test(r) && 0 === x.getPropertyValue(e, "display") && (u = !0, x.setPropertyValue(e, "display", x.Values.getDisplayType(e))), !o) {
                            if ("height" === r && "border-box" !== x.getPropertyValue(e, "boxSizing").toString().toLowerCase()) {
                                var c = e.offsetHeight - (parseFloat(x.getPropertyValue(e, "borderTopWidth")) || 0) - (parseFloat(x.getPropertyValue(e, "borderBottomWidth")) || 0) - (parseFloat(x.getPropertyValue(e, "paddingTop")) || 0) - (parseFloat(x.getPropertyValue(e, "paddingBottom")) || 0);
                                return n(), c
                            }
                            if ("width" === r && "border-box" !== x.getPropertyValue(e, "boxSizing").toString().toLowerCase()) {
                                var p = e.offsetWidth - (parseFloat(x.getPropertyValue(e, "borderLeftWidth")) || 0) - (parseFloat(x.getPropertyValue(e, "borderRightWidth")) || 0) - (parseFloat(x.getPropertyValue(e, "paddingLeft")) || 0) - (parseFloat(x.getPropertyValue(e, "paddingRight")) || 0);
                                return n(), p
                            }
                        }
                        var d;
                        d = i(e) === a ? t.getComputedStyle(e, null) : i(e).computedStyle ? i(e).computedStyle : i(e).computedStyle = t.getComputedStyle(e, null), "borderColor" === r && (r = "borderTopColor"), l = 9 === f && "filter" === r ? d.getPropertyValue(r) : d[r], ("" === l || null === l) && (l = e.style[r]), n()
                    }
                    if ("auto" === l && /^(top|right|bottom|left)$/i.test(r)) {
                        var g = s(e, "position");
                        ("fixed" === g || "absolute" === g && /top|left/i.test(r)) && (l = $(e).position()[r] + "px")
                    }
                    return l
                }
                var l;
                if (x.Hooks.registered[r]) {
                    var u = r,
                        c = x.Hooks.getRoot(u);
                    n === a && (n = x.getPropertyValue(e, x.Names.prefixCheck(c)[0])), x.Normalizations.registered[c] && (n = x.Normalizations.registered[c]("extract", e, n)), l = x.Hooks.extractValue(u, n)
                } else if (x.Normalizations.registered[r]) {
                    var p, d;
                    p = x.Normalizations.registered[r]("name", e), "transform" !== p && (d = s(e, x.Names.prefixCheck(p)[0]), x.Values.isCSSNullValue(d) && x.Hooks.templates[r] && (d = x.Hooks.templates[r][1])), l = x.Normalizations.registered[r]("extract", e, d)
                }
                if (!/^[\d-]/.test(l))
                    if (i(e) && i(e).isSVG && x.Names.SVGAttribute(r))
                        if (/^(height|width)$/i.test(r)) try {
                            l = e.getBBox()[r]
                        } catch (g) {
                            l = 0
                        } else l = e.getAttribute(r);
                        else l = s(e, x.Names.prefixCheck(r)[0]);
                return x.Values.isCSSNullValue(l) && (l = 0), v.debug >= 2 && console.log("Get " + r + ": " + l), l
            },
            setPropertyValue: function (e, r, a, n, o) {
                var s = r;
                if ("scroll" === r) o.container ? o.container["scroll" + o.direction] = a : "Left" === o.direction ? t.scrollTo(a, o.alternateValue) : t.scrollTo(o.alternateValue, a);
                else if (x.Normalizations.registered[r] && "transform" === x.Normalizations.registered[r]("name", e)) x.Normalizations.registered[r]("inject", e, a), s = "transform", a = i(e).transformCache[r];
                else {
                    if (x.Hooks.registered[r]) {
                        var l = r,
                            u = x.Hooks.getRoot(r);
                        n = n || x.getPropertyValue(e, u), a = x.Hooks.injectValue(l, a, n), r = u
                    }
                    if (x.Normalizations.registered[r] && (a = x.Normalizations.registered[r]("inject", e, a), r = x.Normalizations.registered[r]("name", e)), s = x.Names.prefixCheck(r)[0], 8 >= f) try {
                        e.style[s] = a
                    } catch (c) {
                        v.debug && console.log("Browser does not support [" + a + "] for [" + s + "]")
                    } else i(e) && i(e).isSVG && x.Names.SVGAttribute(r) ? e.setAttribute(r, a) : e.style[s] = a;
                    v.debug >= 2 && console.log("Set " + r + " (" + s + "): " + a)
                }
                return [s, a]
            },
            flushTransformCache: function (e) {
                function t(t) {
                    return parseFloat(x.getPropertyValue(e, t))
                }
                var r = "";
                if ((f || v.State.isAndroid && !v.State.isChrome) && i(e).isSVG) {
                    var a = {
                        translate: [t("translateX"), t("translateY")],
                        skewX: [t("skewX")],
                        skewY: [t("skewY")],
                        scale: 1 !== t("scale") ? [t("scale"), t("scale")] : [t("scaleX"), t("scaleY")],
                        rotate: [t("rotateZ"), 0, 0]
                    };
                    $.each(i(e).transformCache, function (e) {
                        /^translate/i.test(e) ? e = "translate" : /^scale/i.test(e) ? e = "scale" : /^rotate/i.test(e) && (e = "rotate"), a[e] && (r += e + "(" + a[e].join(" ") + ") ", delete a[e])
                    })
                } else {
                    var n, o;
                    $.each(i(e).transformCache, function (t) {
                        return n = i(e).transformCache[t], "transformPerspective" === t ? (o = n, !0) : (9 === f && "rotateZ" === t && (t = "rotate"), void(r += t + n + " "))
                    }), o && (r = "perspective" + o + " " + r)
                }
                x.setPropertyValue(e, "transform", r)
            }
        };
        x.Hooks.register(), x.Normalizations.register(), v.hook = function (e, t, r) {
            var n = a;
            return e = o(e), $.each(e, function (e, o) {
                if (i(o) === a && v.init(o), r === a) n === a && (n = v.CSS.getPropertyValue(o, t));
                else {
                    var s = v.CSS.setPropertyValue(o, t, r);
                    "transform" === s[0] && v.CSS.flushTransformCache(o), n = s
                }
            }), n
        };
        var S = function () {
            function e() {
                return l ? T.promise || null : f
            }

            function n() {
                function e(e) {
                    function p(e, t) {
                        var r = a,
                            i = a,
                            s = a;
                        return g.isArray(e) ? (r = e[0], !g.isArray(e[1]) && /^[\d-]/.test(e[1]) || g.isFunction(e[1]) || x.RegEx.isHex.test(e[1]) ? s = e[1] : (g.isString(e[1]) && !x.RegEx.isHex.test(e[1]) || g.isArray(e[1])) && (i = t ? e[1] : u(e[1], o.duration), e[2] !== a && (s = e[2]))) : r = e, t || (i = i || o.easing), g.isFunction(r) && (r = r.call(n, w, P)), g.isFunction(s) && (s = s.call(n, w, P)), [r || 0, i, s]
                    }

                    function f(e, t) {
                        var r, a;
                        return a = (t || "0").toString().toLowerCase().replace(/[%A-z]+$/, function (e) {
                            return r = e, ""
                        }), r || (r = x.Values.getUnitType(e)), [a, r]
                    }

                    function d() {
                        var e = {
                                myParent: n.parentNode || r.body,
                                position: x.getPropertyValue(n, "position"),
                                fontSize: x.getPropertyValue(n, "fontSize")
                            },
                            a = e.position === N.lastPosition && e.myParent === N.lastParent,
                            o = e.fontSize === N.lastFontSize;
                        N.lastParent = e.myParent, N.lastPosition = e.position, N.lastFontSize = e.fontSize;
                        var s = 100,
                            l = {};
                        if (o && a) l.emToPx = N.lastEmToPx, l.percentToPxWidth = N.lastPercentToPxWidth, l.percentToPxHeight = N.lastPercentToPxHeight;
                        else {
                            var u = i(n).isSVG ? r.createElementNS("http://www.w3.org/2000/svg", "rect") : r.createElement("div");
                            v.init(u), e.myParent.appendChild(u), $.each(["overflow", "overflowX", "overflowY"], function (e, t) {
                                v.CSS.setPropertyValue(u, t, "hidden")
                            }), v.CSS.setPropertyValue(u, "position", e.position), v.CSS.setPropertyValue(u, "fontSize", e.fontSize), v.CSS.setPropertyValue(u, "boxSizing", "content-box"), $.each(["minWidth", "maxWidth", "width", "minHeight", "maxHeight", "height"], function (e, t) {
                                v.CSS.setPropertyValue(u, t, s + "%")
                            }), v.CSS.setPropertyValue(u, "paddingLeft", s + "em"), l.percentToPxWidth = N.lastPercentToPxWidth = (parseFloat(x.getPropertyValue(u, "width", null, !0)) || 1) / s, l.percentToPxHeight = N.lastPercentToPxHeight = (parseFloat(x.getPropertyValue(u, "height", null, !0)) || 1) / s, l.emToPx = N.lastEmToPx = (parseFloat(x.getPropertyValue(u, "paddingLeft")) || 1) / s, e.myParent.removeChild(u)
                        }
                        return null === N.remToPx && (N.remToPx = parseFloat(x.getPropertyValue(r.body, "fontSize")) || 16), null === N.vwToPx && (N.vwToPx = parseFloat(t.innerWidth) / 100, N.vhToPx = parseFloat(t.innerHeight) / 100), l.remToPx = N.remToPx, l.vwToPx = N.vwToPx, l.vhToPx = N.vhToPx, v.debug >= 1 && console.log("Unit ratios: " + JSON.stringify(l), n), l
                    }
                    if (o.begin && 0 === w) try {
                        o.begin.call(m, m)
                    } catch (y) {
                        setTimeout(function () {
                            throw y
                        }, 1)
                    }
                    if ("scroll" === k) {
                        var S = /^x$/i.test(o.axis) ? "Left" : "Top",
                            V = parseFloat(o.offset) || 0,
                            C, A, F;
                        o.container ? g.isWrapped(o.container) || g.isNode(o.container) ? (o.container = o.container[0] || o.container, C = o.container["scroll" + S], F = C + $(n).position()[S.toLowerCase()] + V) : o.container = null : (C = v.State.scrollAnchor[v.State["scrollProperty" + S]], A = v.State.scrollAnchor[v.State["scrollProperty" + ("Left" === S ? "Top" : "Left")]], F = $(n).offset()[S.toLowerCase()] + V), s = {
                            scroll: {
                                rootPropertyValue: !1,
                                startValue: C,
                                currentValue: C,
                                endValue: F,
                                unitType: "",
                                easing: o.easing,
                                scrollData: {
                                    container: o.container,
                                    direction: S,
                                    alternateValue: A
                                }
                            },
                            element: n
                        }, v.debug && console.log("tweensContainer (scroll): ", s.scroll, n)
                    } else if ("reverse" === k) {
                        if (!i(n).tweensContainer) return void $.dequeue(n, o.queue);
                        "none" === i(n).opts.display && (i(n).opts.display = "auto"), "hidden" === i(n).opts.visibility && (i(n).opts.visibility = "visible"), i(n).opts.loop = !1, i(n).opts.begin = null, i(n).opts.complete = null, b.easing || delete o.easing, b.duration || delete o.duration, o = $.extend({}, i(n).opts, o);
                        var E = $.extend(!0, {}, i(n).tweensContainer);
                        for (var j in E)
                            if ("element" !== j) {
                                var H = E[j].startValue;
                                E[j].startValue = E[j].currentValue = E[j].endValue, E[j].endValue = H, g.isEmptyObject(b) || (E[j].easing = o.easing), v.debug && console.log("reverse tweensContainer (" + j + "): " + JSON.stringify(E[j]), n)
                            }
                        s = E
                    } else if ("start" === k) {
                        var E;
                        i(n).tweensContainer && i(n).isAnimating === !0 && (E = i(n).tweensContainer), $.each(h, function (e, t) {
                            if (RegExp("^" + x.Lists.colors.join("$|^") + "$").test(e)) {
                                var r = p(t, !0),
                                    n = r[0],
                                    o = r[1],
                                    i = r[2];
                                if (x.RegEx.isHex.test(n)) {
                                    for (var s = ["Red", "Green", "Blue"], l = x.Values.hexToRgb(n), u = i ? x.Values.hexToRgb(i) : a, c = 0; c < s.length; c++) {
                                        var f = [l[c]];
                                        o && f.push(o), u !== a && f.push(u[c]), h[e + s[c]] = f
                                    }
                                    delete h[e]
                                }
                            }
                        });
                        for (var R in h) {
                            var O = p(h[R]),
                                z = O[0],
                                q = O[1],
                                M = O[2];
                            R = x.Names.camelCase(R);
                            var I = x.Hooks.getRoot(R),
                                B = !1;
                            if (i(n).isSVG || "tween" === I || x.Names.prefixCheck(I)[1] !== !1 || x.Normalizations.registered[I] !== a) {
                                (o.display !== a && null !== o.display && "none" !== o.display || o.visibility !== a && "hidden" !== o.visibility) && /opacity|filter/.test(R) && !M && 0 !== z && (M = 0), o._cacheValues && E && E[R] ? (M === a && (M = E[R].endValue + E[R].unitType), B = i(n).rootPropertyValueCache[I]) : x.Hooks.registered[R] ? M === a ? (B = x.getPropertyValue(n, I), M = x.getPropertyValue(n, R, B)) : B = x.Hooks.templates[I][1] : M === a && (M = x.getPropertyValue(n, R));
                                var W, G, D, X = !1;
                                if (W = f(R, M), M = W[0], D = W[1], W = f(R, z), z = W[0].replace(/^([+-\/*])=/, function (e, t) {
                                        return X = t, ""
                                    }), G = W[1], M = parseFloat(M) || 0, z = parseFloat(z) || 0, "%" === G && (/^(fontSize|lineHeight)$/.test(R) ? (z /= 100, G = "em") : /^scale/.test(R) ? (z /= 100, G = "") : /(Red|Green|Blue)$/i.test(R) && (z = z / 100 * 255, G = "")), /[\/*]/.test(X)) G = D;
                                else if (D !== G && 0 !== M)
                                    if (0 === z) G = D;
                                    else {
                                        l = l || d();
                                        var Y = /margin|padding|left|right|width|text|word|letter/i.test(R) || /X$/.test(R) || "x" === R ? "x" : "y";
                                        switch (D) {
                                        case "%":
                                            M *= "x" === Y ? l.percentToPxWidth : l.percentToPxHeight;
                                            break;
                                        case "px":
                                            break;
                                        default:
                                            M *= l[D + "ToPx"]
                                        }
                                        switch (G) {
                                        case "%":
                                            M *= 1 / ("x" === Y ? l.percentToPxWidth : l.percentToPxHeight);
                                            break;
                                        case "px":
                                            break;
                                        default:
                                            M *= 1 / l[G + "ToPx"]
                                        }
                                    }
                                switch (X) {
                                case "+":
                                    z = M + z;
                                    break;
                                case "-":
                                    z = M - z;
                                    break;
                                case "*":
                                    z = M * z;
                                    break;
                                case "/":
                                    z = M / z
                                }
                                s[R] = {
                                    rootPropertyValue: B,
                                    startValue: M,
                                    currentValue: M,
                                    endValue: z,
                                    unitType: G,
                                    easing: q
                                }, v.debug && console.log("tweensContainer (" + R + "): " + JSON.stringify(s[R]), n)
                            } else v.debug && console.log("Skipping [" + I + "] due to a lack of browser support.")
                        }
                        s.element = n
                    }
                    s.element && (x.Values.addClass(n, "velocity-animating"), L.push(s), "" === o.queue && (i(n).tweensContainer = s, i(n).opts = o), i(n).isAnimating = !0, w === P - 1 ? (v.State.calls.push([L, m, o, null, T.resolver]), v.State.isTicking === !1 && (v.State.isTicking = !0, c())) : w++)
                }
                var n = this,
                    o = $.extend({}, v.defaults, b),
                    s = {},
                    l;
                switch (i(n) === a && v.init(n), parseFloat(o.delay) && o.queue !== !1 && $.queue(n, o.queue, function (e) {
                    v.velocityQueueEntryFlag = !0, i(n).delayTimer = {
                        setTimeout: setTimeout(e, parseFloat(o.delay)),
                        next: e
                    }
                }), o.duration.toString().toLowerCase()) {
                case "fast":
                    o.duration = 200;
                    break;
                case "normal":
                    o.duration = y;
                    break;
                case "slow":
                    o.duration = 600;
                    break;
                default:
                    o.duration = parseFloat(o.duration) || 1
                }
                v.mock !== !1 && (v.mock === !0 ? o.duration = o.delay = 1 : (o.duration *= parseFloat(v.mock) || 1, o.delay *= parseFloat(v.mock) || 1)), o.easing = u(o.easing, o.duration), o.begin && !g.isFunction(o.begin) && (o.begin = null), o.progress && !g.isFunction(o.progress) && (o.progress = null), o.complete && !g.isFunction(o.complete) && (o.complete = null), o.display !== a && null !== o.display && (o.display = o.display.toString().toLowerCase(), "auto" === o.display && (o.display = v.CSS.Values.getDisplayType(n))), o.visibility !== a && null !== o.visibility && (o.visibility = o.visibility.toString().toLowerCase()), o.mobileHA = o.mobileHA && v.State.isMobile && !v.State.isGingerbread, o.queue === !1 ? o.delay ? setTimeout(e, o.delay) : e() : $.queue(n, o.queue, function (t, r) {
                    return r === !0 ? (T.promise && T.resolver(m), !0) : (v.velocityQueueEntryFlag = !0, void e(t))
                }), "" !== o.queue && "fx" !== o.queue || "inprogress" === $.queue(n)[0] || $.dequeue(n)
            }
            var s = arguments[0] && (arguments[0].p || $.isPlainObject(arguments[0].properties) && !arguments[0].properties.names || g.isString(arguments[0].properties)),
                l, f, d, m, h, b;
            if (g.isWrapped(this) ? (l = !1, d = 0, m = this, f = this) : (l = !0, d = 1, m = s ? arguments[0].elements || arguments[0].e : arguments[0]), m = o(m)) {
                s ? (h = arguments[0].properties || arguments[0].p, b = arguments[0].options || arguments[0].o) : (h = arguments[d], b = arguments[d + 1]);
                var P = m.length,
                    w = 0;
                if (!/^(stop|finish)$/i.test(h) && !$.isPlainObject(b)) {
                    var V = d + 1;
                    b = {};
                    for (var C = V; C < arguments.length; C++) g.isArray(arguments[C]) || !/^(fast|normal|slow)$/i.test(arguments[C]) && !/^\d/.test(arguments[C]) ? g.isString(arguments[C]) || g.isArray(arguments[C]) ? b.easing = arguments[C] : g.isFunction(arguments[C]) && (b.complete = arguments[C]) : b.duration = arguments[C]
                }
                var T = {
                    promise: null,
                    resolver: null,
                    rejecter: null
                };
                l && v.Promise && (T.promise = new v.Promise(function (e, t) {
                    T.resolver = e, T.rejecter = t
                }));
                var k;
                switch (h) {
                case "scroll":
                    k = "scroll";
                    break;
                case "reverse":
                    k = "reverse";
                    break;
                case "finish":
                case "stop":
                    $.each(m, function (e, t) {
                        i(t) && i(t).delayTimer && (clearTimeout(i(t).delayTimer.setTimeout), i(t).delayTimer.next && i(t).delayTimer.next(), delete i(t).delayTimer)
                    });
                    var A = [];
                    return $.each(v.State.calls, function (e, t) {
                        t && $.each(t[1], function (r, n) {
                            var o = b === a ? "" : b;
                            return o === !0 || t[2].queue === o || b === a && t[2].queue === !1 ? void $.each(m, function (r, a) {
                                a === n && ((b === !0 || g.isString(b)) && ($.each($.queue(a, g.isString(b) ? b : ""), function (e, t) {
                                    g.isFunction(t) && t(null, !0)
                                }), $.queue(a, g.isString(b) ? b : "", [])), "stop" === h ? (i(a) && i(a).tweensContainer && o !== !1 && $.each(i(a).tweensContainer, function (e, t) {
                                    t.endValue = t.currentValue
                                }), A.push(e)) : "finish" === h && (t[2].duration = 1))
                            }) : !0
                        })
                    }), "stop" === h && ($.each(A, function (e, t) {
                        p(t, !0)
                    }), T.promise && T.resolver(m)), e();
                default:
                    if (!$.isPlainObject(h) || g.isEmptyObject(h)) {
                        if (g.isString(h) && v.Redirects[h]) {
                            var F = $.extend({}, b),
                                E = F.duration,
                                j = F.delay || 0;
                            return F.backwards === !0 && (m = $.extend(!0, [], m).reverse()), $.each(m, function (e, t) {
                                parseFloat(F.stagger) ? F.delay = j + parseFloat(F.stagger) * e : g.isFunction(F.stagger) && (F.delay = j + F.stagger.call(t, e, P)), F.drag && (F.duration = parseFloat(E) || (/^(callout|transition)/.test(h) ? 1e3 : y), F.duration = Math.max(F.duration * (F.backwards ? 1 - e / P : (e + 1) / P), .75 * F.duration, 200)), v.Redirects[h].call(t, t, F || {}, e, P, m, T.promise ? T : a)
                            }), e()
                        }
                        var H = "Velocity: First argument (" + h + ") was not a property map, a known action, or a registered redirect. Aborting.";
                        return T.promise ? T.rejecter(new Error(H)) : console.log(H), e()
                    }
                    k = "start"
                }
                var N = {
                        lastParent: null,
                        lastPosition: null,
                        lastFontSize: null,
                        lastPercentToPxWidth: null,
                        lastPercentToPxHeight: null,
                        lastEmToPx: null,
                        remToPx: null,
                        vwToPx: null,
                        vhToPx: null
                    },
                    L = [];
                $.each(m, function (e, t) {
                    g.isNode(t) && n.call(t)
                });
                var F = $.extend({}, v.defaults, b),
                    R;
                if (F.loop = parseInt(F.loop), R = 2 * F.loop - 1, F.loop)
                    for (var O = 0; R > O; O++) {
                        var z = {
                            delay: F.delay,
                            progress: F.progress
                        };
                        O === R - 1 && (z.display = F.display, z.visibility = F.visibility, z.complete = F.complete), S(m, "reverse", z)
                    }
                return e()
            }
        };
        v = $.extend(S, v), v.animate = S;
        var P = t.requestAnimationFrame || d;
        return v.State.isMobile || r.hidden === a || r.addEventListener("visibilitychange", function () {
            r.hidden ? (P = function (e) {
                return setTimeout(function () {
                    e(!0)
                }, 16)
            }, c()) : P = t.requestAnimationFrame || d
        }), e.Velocity = v, e !== t && (e.fn.velocity = S, e.fn.velocity.defaults = v.defaults), $.each(["Down", "Up"], function (e, t) {
            v.Redirects["slide" + t] = function (e, r, n, o, i, s) {
                var l = $.extend({}, r),
                    u = l.begin,
                    c = l.complete,
                    p = {
                        height: "",
                        marginTop: "",
                        marginBottom: "",
                        paddingTop: "",
                        paddingBottom: ""
                    },
                    f = {};
                l.display === a && (l.display = "Down" === t ? "inline" === v.CSS.Values.getDisplayType(e) ? "inline-block" : "block" : "none"), l.begin = function () {
                    u && u.call(i, i);
                    for (var r in p) {
                        f[r] = e.style[r];
                        var a = v.CSS.getPropertyValue(e, r);
                        p[r] = "Down" === t ? [a, 0] : [0, a]
                    }
                    f.overflow = e.style.overflow, e.style.overflow = "hidden"
                }, l.complete = function () {
                    for (var t in f) e.style[t] = f[t];
                    c && c.call(i, i), s && s.resolver(i)
                }, v(e, p, l)
            }
        }), $.each(["In", "Out"], function (e, t) {
            v.Redirects["fade" + t] = function (e, r, n, o, i, s) {
                var l = $.extend({}, r),
                    u = {
                        opacity: "In" === t ? 1 : 0
                    },
                    c = l.complete;
                l.complete = n !== o - 1 ? l.begin = null : function () {
                    c && c.call(i, i), s && s.resolver(i)
                }, l.display === a && (l.display = "In" === t ? "auto" : "none"), v(this, u, l)
            }
        }), v
    }(window.jQuery || window.Zepto || window, window, document)
});/* Buttons */

(function ($) {
    $(document).ready(function () {

        // jQuery reverse
        $.fn.reverse = [].reverse;

        $(document).on('mouseenter.fixedActionBtn', '.fixed-action-btn', function (e) {
            var $this = $(this);
            openFABMenu($this);

        });

        $(document).on('mouseleave.fixedActionBtn', '.fixed-action-btn', function (e) {
            var $this = $(this);
            closeFABMenu($this);
        });

    });

    $.fn.extend({
        openFAB: function () {
            var $this = $(this);
            openFABMenu($this);
        },
        closeFAB: function () {
            closeFABMenu($this);
        }
    });


    var openFABMenu = function (btn) {
        $this = btn;
        if ($this.hasClass('active') === false) {
            $this.addClass('active');
            $this.find('ul .btn-floating').velocity({
                scaleY: ".4",
                scaleX: ".4",
                translateY: "40px"
            }, {
                duration: 0
            });

            var time = 0;
            $this.find('ul .btn-floating').reverse().each(function () {
                $(this).velocity({
                    opacity: "1",
                    scaleX: "1",
                    scaleY: "1",
                    translateY: "0"
                }, {
                    duration: 80,
                    delay: time
                });
                time += 40;
            });
        }
    };

    var closeFABMenu = function (btn) {
        $this = btn;
        $this.removeClass('active');
        var time = 0;
        $this.find('ul .btn-floating').velocity("stop", true);
        $this.find('ul .btn-floating').velocity({
            opacity: "0",
            scaleX: ".4",
            scaleY: ".4",
            translateY: "40px"
        }, {
            duration: 80
        });
    };


}(jQuery));/*!
 * Waves v0.6.4
 * http://fian.my.id/Waves
 *
 * Copyright 2014 Alfiana E. Sibuea and other contributors
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 */

;
(function (window) {
    'use strict';

    var Waves = Waves || {};
    var $$ = document.querySelectorAll.bind(document);

    // Find exact position of element
    function isWindow(obj) {
        return obj !== null && obj === obj.window;
    }

    function getWindow(elem) {
        return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;
    }

    function offset(elem) {
        var docElem, win,
            box = {
                top: 0,
                left: 0
            },
            doc = elem && elem.ownerDocument;

        docElem = doc.documentElement;

        if (typeof elem.getBoundingClientRect !== typeof undefined) {
            box = elem.getBoundingClientRect();
        }
        win = getWindow(doc);
        return {
            top: box.top + win.pageYOffset - docElem.clientTop,
            left: box.left + win.pageXOffset - docElem.clientLeft
        };
    }

    function convertStyle(obj) {
        var style = '';

        for (var a in obj) {
            if (obj.hasOwnProperty(a)) {
                style += (a + ':' + obj[a] + ';');
            }
        }

        return style;
    }

    var Effect = {

        // Effect delay
        duration: 750,

        show: function (e, element) {

            // Disable right click
            if (e.button === 2) {
                return false;
            }

            var el = element || this;

            // Create ripple
            var ripple = document.createElement('div');
            ripple.className = 'waves-ripple';
            el.appendChild(ripple);

            // Get click coordinate and element witdh
            var pos = offset(el);
            var relativeY = (e.pageY - pos.top);
            var relativeX = (e.pageX - pos.left);
            var scale = 'scale(' + ((el.clientWidth / 100) * 10) + ')';

            // Support for touch devices
            if ('touches' in e) {
                relativeY = (e.touches[0].pageY - pos.top);
                relativeX = (e.touches[0].pageX - pos.left);
            }

            // Attach data to element
            ripple.setAttribute('data-hold', Date.now());
            ripple.setAttribute('data-scale', scale);
            ripple.setAttribute('data-x', relativeX);
            ripple.setAttribute('data-y', relativeY);

            // Set ripple position
            var rippleStyle = {
                'top': relativeY + 'px',
                'left': relativeX + 'px'
            };

            ripple.className = ripple.className + ' waves-notransition';
            ripple.setAttribute('style', convertStyle(rippleStyle));
            ripple.className = ripple.className.replace('waves-notransition', '');

            // Scale the ripple
            rippleStyle['-webkit-transform'] = scale;
            rippleStyle['-moz-transform'] = scale;
            rippleStyle['-ms-transform'] = scale;
            rippleStyle['-o-transform'] = scale;
            rippleStyle.transform = scale;
            rippleStyle.opacity = '1';

            rippleStyle['-webkit-transition-duration'] = Effect.duration + 'ms';
            rippleStyle['-moz-transition-duration'] = Effect.duration + 'ms';
            rippleStyle['-o-transition-duration'] = Effect.duration + 'ms';
            rippleStyle['transition-duration'] = Effect.duration + 'ms';

            rippleStyle['-webkit-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['-moz-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['-o-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';

            ripple.setAttribute('style', convertStyle(rippleStyle));
        },

        hide: function (e) {
            TouchHandler.touchup(e);

            var el = this;
            var width = el.clientWidth * 1.4;

            // Get first ripple
            var ripple = null;
            var ripples = el.getElementsByClassName('waves-ripple');
            if (ripples.length > 0) {
                ripple = ripples[ripples.length - 1];
            } else {
                return false;
            }

            var relativeX = ripple.getAttribute('data-x');
            var relativeY = ripple.getAttribute('data-y');
            var scale = ripple.getAttribute('data-scale');

            // Get delay beetween mousedown and mouse leave
            var diff = Date.now() - Number(ripple.getAttribute('data-hold'));
            var delay = 350 - diff;

            if (delay < 0) {
                delay = 0;
            }

            // Fade out ripple after delay
            setTimeout(function () {
                var style = {
                    'top': relativeY + 'px',
                    'left': relativeX + 'px',
                    'opacity': '0',

                    // Duration
                    '-webkit-transition-duration': Effect.duration + 'ms',
                    '-moz-transition-duration': Effect.duration + 'ms',
                    '-o-transition-duration': Effect.duration + 'ms',
                    'transition-duration': Effect.duration + 'ms',
                    '-webkit-transform': scale,
                    '-moz-transform': scale,
                    '-ms-transform': scale,
                    '-o-transform': scale,
                    'transform': scale,
                };

                ripple.setAttribute('style', convertStyle(style));

                setTimeout(function () {
                    try {
                        el.removeChild(ripple);
                    } catch (e) {
                        return false;
                    }
                }, Effect.duration);
            }, delay);
        },

        // Little hack to make <input> can perform waves effect
        wrapInput: function (elements) {
            for (var a = 0; a < elements.length; a++) {
                var el = elements[a];

                if (el.tagName.toLowerCase() === 'input') {
                    var parent = el.parentNode;

                    // If input already have parent just pass through
                    if (parent.tagName.toLowerCase() === 'i' && parent.className.indexOf('waves-effect') !== -1) {
                        continue;
                    }

                    // Put element class and style to the specified parent
                    var wrapper = document.createElement('i');
                    wrapper.className = el.className + ' waves-input-wrapper';

                    var elementStyle = el.getAttribute('style');

                    if (!elementStyle) {
                        elementStyle = '';
                    }

                    wrapper.setAttribute('style', elementStyle);

                    el.className = 'waves-button-input';
                    el.removeAttribute('style');

                    // Put element as child
                    parent.replaceChild(wrapper, el);
                    wrapper.appendChild(el);
                }
            }
        }
    };


    /**
     * Disable mousedown event for 500ms during and after touch
     */
    var TouchHandler = {
        /* uses an integer rather than bool so there's no issues with
         * needing to clear timeouts if another touch event occurred
         * within the 500ms. Cannot mouseup between touchstart and
         * touchend, nor in the 500ms after touchend. */
        touches: 0,
        allowEvent: function (e) {
            var allow = true;

            if (e.type === 'touchstart') {
                TouchHandler.touches += 1; //push
            } else if (e.type === 'touchend' || e.type === 'touchcancel') {
                setTimeout(function () {
                    if (TouchHandler.touches > 0) {
                        TouchHandler.touches -= 1; //pop after 500ms
                    }
                }, 500);
            } else if (e.type === 'mousedown' && TouchHandler.touches > 0) {
                allow = false;
            }

            return allow;
        },
        touchup: function (e) {
            TouchHandler.allowEvent(e);
        }
    };


    /**
     * Delegated click handler for .waves-effect element.
     * returns null when .waves-effect element not in "click tree"
     */
    function getWavesEffectElement(e) {
        if (TouchHandler.allowEvent(e) === false) {
            return null;
        }

        var element = null;
        var target = e.target || e.srcElement;

        while (target.parentElement !== null) {
            if (!(target instanceof SVGElement) && target.className.indexOf('waves-effect') !== -1) {
                element = target;
                break;
            } else if (target.classList.contains('waves-effect')) {
                element = target;
                break;
            }
            target = target.parentElement;
        }

        return element;
    }

    /**
     * Bubble the click and show effect if .waves-effect elem was found
     */
    function showEffect(e) {
        var element = getWavesEffectElement(e);

        if (element !== null) {
            Effect.show(e, element);

            if ('ontouchstart' in window) {
                element.addEventListener('touchend', Effect.hide, false);
                element.addEventListener('touchcancel', Effect.hide, false);
            }

            element.addEventListener('mouseup', Effect.hide, false);
            element.addEventListener('mouseleave', Effect.hide, false);
        }
    }

    Waves.displayEffect = function (options) {
        options = options || {};

        if ('duration' in options) {
            Effect.duration = options.duration;
        }

        //Wrap input inside <i> tag
        Effect.wrapInput($$('.waves-effect'));

        if ('ontouchstart' in window) {
            document.body.addEventListener('touchstart', showEffect, false);
        }

        document.body.addEventListener('mousedown', showEffect, false);
    };

    /**
     * Attach Waves to an input element (or any element which doesn't
     * bubble mouseup/mousedown events).
     *   Intended to be used with dynamically loaded forms/inputs, or
     * where the user doesn't want a delegated click handler.
     */
    Waves.attach = function (element) {
        //FUTURE: automatically add waves classes and allow users
        // to specify them with an options param? Eg. light/classic/button
        if (element.tagName.toLowerCase() === 'input') {
            Effect.wrapInput([element]);
            element = element.parentElement;
        }

        if ('ontouchstart' in window) {
            element.addEventListener('touchstart', showEffect, false);
        }

        element.addEventListener('mousedown', showEffect, false);
    };

    window.Waves = Waves;

    document.addEventListener('DOMContentLoaded', function () {
        Waves.displayEffect();
    }, false);

})(window);
function scaleVideoContainer(){var e=$(window).height()+5,t=parseInt(e)+"px";$(".homepage-hero-module").css("height",t)}function initBannerVideoSize(e){$(e).each(function(){$(this).data("height",$(this).height()),$(this).data("width",$(this).width())}),scaleBannerVideoSize(e)}function scaleBannerVideoSize(e){var n,r,t=$(window).width(),i=$(window).height()+5;$(e).each(function(){var e=$(this).data("height")/$(this).data("width");$(this).width(t),1e3>t&&(r=i,n=r/e,$(this).css({"margin-top":0,"margin-left":-(n-t)/2+"px"}),$(this).width(n).height(r)),$(".homepage-hero-module .video-container video").addClass("fadeIn animated")})}function upTo(e,t){for(t=t.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()==t)return e;return null}!function(e,t,i,n){"use strict";function r(e,t,i){return setTimeout(c(e,i),t)}function a(e,t,i){return Array.isArray(e)?(o(e,i[t],i),!0):!1}function o(e,t,i){var r;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==n)for(r=0;r<e.length;)t.call(i,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(i,e[r],r,e)}function s(e,t,i){for(var r=Object.keys(t),a=0;a<r.length;)(!i||i&&e[r[a]]===n)&&(e[r[a]]=t[r[a]]),a++;return e}function l(e,t){return s(e,t,!0)}function u(e,t,i){var n,r=t.prototype;n=e.prototype=Object.create(r),n.constructor=e,n._super=r,i&&s(n,i)}function c(e,t){return function(){return e.apply(t,arguments)}}function f(e,t){return typeof e==ce?e.apply(t?t[0]||n:n,t):e}function d(e,t){return e===n?t:e}function p(e,t,i){o(g(t),function(t){e.addEventListener(t,i,!1)})}function h(e,t,i){o(g(t),function(t){e.removeEventListener(t,i,!1)})}function v(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return e.indexOf(t)>-1}function g(e){return e.trim().split(/\s+/g)}function y(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function b(e){return Array.prototype.slice.call(e,0)}function w(e,t,i){for(var n=[],r=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];y(r,o)<0&&n.push(e[a]),r[a]=o,a++}return i&&(n=t?n.sort(function(e,i){return e[t]>i[t]}):n.sort()),n}function x(e,t){for(var i,r,a=t[0].toUpperCase()+t.slice(1),o=0;o<le.length;){if(i=le[o],r=i?i+a:t,r in e)return r;o++}return n}function C(){return he++}function k(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function S(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){f(e.options.enable,[e])&&i.handler(t)},this.init()}function T(e){var t,i=e.options.inputClass;return new(t=i?i:ge?q:ye?H:me?R:z)(e,O)}function O(e,t,i){var n=i.pointers.length,r=i.changedPointers.length,a=t&Se&&0===n-r,o=t&(Oe|Ee)&&0===n-r;i.isFirst=!!a,i.isFinal=!!o,a&&(e.session={}),i.eventType=t,E(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function E(e,t){var i=e.session,n=t.pointers,r=n.length;i.firstInput||(i.firstInput=$(t)),r>1&&!i.firstMultiple?i.firstMultiple=$(t):1===r&&(i.firstMultiple=!1);var a=i.firstInput,o=i.firstMultiple,s=o?o.center:a.center,l=t.center=M(n);t.timeStamp=pe(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=_(s,l),t.distance=D(s,l),P(i,t),t.offsetDirection=I(t.deltaX,t.deltaY),t.scale=o?j(o.pointers,n):1,t.rotation=o?N(o.pointers,n):0,A(i,t);var u=e.element;v(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function P(e,t){var i=t.center,n=e.offsetDelta||{},r=e.prevDelta||{},a=e.prevInput||{};(t.eventType===Se||a.eventType===Oe)&&(r=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=r.x+(i.x-n.x),t.deltaY=r.y+(i.y-n.y)}function A(e,t){var i,r,a,o,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(t.eventType!=Ee&&(l>ke||s.velocity===n)){var u=s.deltaX-t.deltaX,c=s.deltaY-t.deltaY,f=V(l,u,c);r=f.x,a=f.y,i=de(f.x)>de(f.y)?f.x:f.y,o=I(u,c),e.lastInterval=t}else i=s.velocity,r=s.velocityX,a=s.velocityY,o=s.direction;t.velocity=i,t.velocityX=r,t.velocityY=a,t.direction=o}function $(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:fe(e.pointers[i].clientX),clientY:fe(e.pointers[i].clientY)},i++;return{timeStamp:pe(),pointers:t,center:M(t),deltaX:e.deltaX,deltaY:e.deltaY}}function M(e){var t=e.length;if(1===t)return{x:fe(e[0].clientX),y:fe(e[0].clientY)};for(var i=0,n=0,r=0;t>r;)i+=e[r].clientX,n+=e[r].clientY,r++;return{x:fe(i/t),y:fe(n/t)}}function V(e,t,i){return{x:t/e||0,y:i/e||0}}function I(e,t){return e===t?Pe:de(e)>=de(t)?e>0?Ae:$e:t>0?Me:Ve}function D(e,t,i){i||(i=Ne);var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.sqrt(n*n+r*r)}function _(e,t,i){i||(i=Ne);var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return 180*Math.atan2(r,n)/Math.PI}function N(e,t){return _(t[1],t[0],je)-_(e[1],e[0],je)}function j(e,t){return D(t[0],t[1],je)/D(e[0],e[1],je)}function z(){this.evEl=qe,this.evWin=Fe,this.allow=!0,this.pressed=!1,S.apply(this,arguments)}function q(){this.evEl=We,this.evWin=Re,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function F(){this.evTarget=Be,this.evWin=Ye,this.started=!1,S.apply(this,arguments)}function L(e,t){var i=b(e.touches),n=b(e.changedTouches);return t&(Oe|Ee)&&(i=w(i.concat(n),"identifier",!0)),[i,n]}function H(){this.evTarget=Ge,this.targetIds={},S.apply(this,arguments)}function W(e,t){var i=b(e.touches),n=this.targetIds;if(t&(Se|Te)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,a,o=b(e.changedTouches),s=[],l=this.target;if(a=i.filter(function(e){return v(e.target,l)}),t===Se)for(r=0;r<a.length;)n[a[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&s.push(o[r]),t&(Oe|Ee)&&delete n[o[r].identifier],r++;return s.length?[w(a.concat(s),"identifier",!0),s]:void 0}function R(){S.apply(this,arguments);var e=c(this.handler,this);this.touch=new H(this.manager,e),this.mouse=new z(this.manager,e)}function Q(e,t){this.manager=e,this.set(t)}function B(e){if(m(e,tt))return tt;var t=m(e,it),i=m(e,nt);return t&&i?it+" "+nt:t||i?t?it:nt:m(e,et)?et:Ke}function Y(e){this.id=C(),this.manager=null,this.options=l(e||{},this.defaults),this.options.enable=d(this.options.enable,!0),this.state=rt,this.simultaneous={},this.requireFail=[]}function X(e){return e&ut?"cancel":e&st?"end":e&ot?"move":e&at?"start":""}function G(e){return e==Ve?"down":e==Me?"up":e==Ae?"left":e==$e?"right":""}function U(e,t){var i=t.manager;return i?i.get(e):e}function Z(){Y.apply(this,arguments)}function J(){Z.apply(this,arguments),this.pX=null,this.pY=null}function K(){Z.apply(this,arguments)}function ee(){Y.apply(this,arguments),this._timer=null,this._input=null}function te(){Z.apply(this,arguments)}function ie(){Z.apply(this,arguments)}function ne(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function re(e,t){return t=t||{},t.recognizers=d(t.recognizers,re.defaults.preset),new ae(e,t)}function ae(e,t){t=t||{},this.options=l(t,re.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=T(this),this.touchAction=new Q(this,this.options.touchAction),oe(this,!0),o(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function oe(e,t){var i=e.element;o(e.options.cssProps,function(e,n){i.style[x(i.style,n)]=t?e:""})}function se(e,i){var n=t.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var le=["","webkit","moz","MS","ms","o"],ue=t.createElement("div"),ce="function",fe=Math.round,de=Math.abs,pe=Date.now,he=1,ve=/mobile|tablet|ip(ad|hone|od)|android/i,me="ontouchstart"in e,ge=x(e,"PointerEvent")!==n,ye=me&&ve.test(navigator.userAgent),be="touch",we="pen",xe="mouse",Ce="kinect",ke=25,Se=1,Te=2,Oe=4,Ee=8,Pe=1,Ae=2,$e=4,Me=8,Ve=16,Ie=Ae|$e,De=Me|Ve,_e=Ie|De,Ne=["x","y"],je=["clientX","clientY"];S.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(k(this.element),this.evWin,this.domHandler)}};var ze={mousedown:Se,mousemove:Te,mouseup:Oe},qe="mousedown",Fe="mousemove mouseup";u(z,S,{handler:function(e){var t=ze[e.type];t&Se&&0===e.button&&(this.pressed=!0),t&Te&&1!==e.which&&(t=Oe),this.pressed&&this.allow&&(t&Oe&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:xe,srcEvent:e}))}});var Le={pointerdown:Se,pointermove:Te,pointerup:Oe,pointercancel:Ee,pointerout:Ee},He={2:be,3:we,4:xe,5:Ce},We="pointerdown",Re="pointermove pointerup pointercancel";e.MSPointerEvent&&(We="MSPointerDown",Re="MSPointerMove MSPointerUp MSPointerCancel"),u(q,S,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),r=Le[n],a=He[e.pointerType]||e.pointerType,o=a==be,s=y(t,e.pointerId,"pointerId");r&Se&&(0===e.button||o)?0>s&&(t.push(e),s=t.length-1):r&(Oe|Ee)&&(i=!0),0>s||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),i&&t.splice(s,1))}});var Qe={touchstart:Se,touchmove:Te,touchend:Oe,touchcancel:Ee},Be="touchstart",Ye="touchstart touchmove touchend touchcancel";u(F,S,{handler:function(e){var t=Qe[e.type];if(t===Se&&(this.started=!0),this.started){var i=L.call(this,e,t);t&(Oe|Ee)&&0===i[0].length-i[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:be,srcEvent:e})}}});var Xe={touchstart:Se,touchmove:Te,touchend:Oe,touchcancel:Ee},Ge="touchstart touchmove touchend touchcancel";u(H,S,{handler:function(e){var t=Xe[e.type],i=W.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:be,srcEvent:e})}}),u(R,S,{handler:function(e,t,i){var n=i.pointerType==be,r=i.pointerType==xe;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;t&(Oe|Ee)&&(this.mouse.allow=!0),this.callback(e,t,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ue=x(ue.style,"touchAction"),Ze=Ue!==n,Je="compute",Ke="auto",et="manipulation",tt="none",it="pan-x",nt="pan-y";Q.prototype={set:function(e){e==Je&&(e=this.compute()),Ze&&(this.manager.element.style[Ue]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return o(this.manager.recognizers,function(t){f(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),B(e.join(" "))},preventDefaults:function(e){if(!Ze){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var n=this.actions,r=m(n,tt),a=m(n,nt),o=m(n,it);return r||a&&i&Ie||o&&i&De?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var rt=1,at=2,ot=4,st=8,lt=st,ut=16,ct=32;Y.prototype={defaults:{},set:function(e){return s(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(a(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=U(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return a(e,"dropRecognizeWith",this)?this:(e=U(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(a(e,"requireFailure",this))return this;var t=this.requireFail;return e=U(e,this),-1===y(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(a(e,"dropRequireFailure",this))return this;e=U(e,this);var t=y(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){i.manager.emit(i.options.event+(t?X(n):""),e)}var i=this,n=this.state;st>n&&t(!0),t(),n>=st&&t(!0)},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=ct)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(ct|rt)))return!1;e++}return!0},recognize:function(e){var t=s({},e);return f(this.options.enable,[this,t])?(this.state&(lt|ut|ct)&&(this.state=rt),this.state=this.process(t),void(this.state&(at|ot|st|ut)&&this.tryEmit(t))):(this.reset(),void(this.state=ct))},process:function(){},getTouchAction:function(){},reset:function(){}},u(Z,Y,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=t&(at|ot),r=this.attrTest(e);return n&&(i&Ee||!r)?t|ut:n||r?i&Oe?t|st:t&at?t|ot:at:ct}}),u(J,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:_e},getTouchAction:function(){var e=this.options.direction,t=[];return e&Ie&&t.push(nt),e&De&&t.push(it),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,r=e.direction,a=e.deltaX,o=e.deltaY;return r&t.direction||(t.direction&Ie?(r=0===a?Pe:0>a?Ae:$e,i=a!=this.pX,n=Math.abs(e.deltaX)):(r=0===o?Pe:0>o?Me:Ve,i=o!=this.pY,n=Math.abs(e.deltaY))),e.direction=r,i&&n>t.threshold&&r&t.direction},attrTest:function(e){return Z.prototype.attrTest.call(this,e)&&(this.state&at||!(this.state&at)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=G(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),u(K,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&at)},emit:function(e){if(this._super.emit.call(this,e),1!==e.scale){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),u(ee,Y,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Ke]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!n||!i||e.eventType&(Oe|Ee)&&!a)this.reset();else if(e.eventType&Se)this.reset(),this._timer=r(function(){this.state=lt,this.tryEmit()},t.time,this);else if(e.eventType&Oe)return lt;return ct},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===lt&&(e&&e.eventType&Oe?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=pe(),this.manager.emit(this.options.event,this._input)))}}),u(te,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&at)}}),u(ie,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ie|De,pointers:1},getTouchAction:function(){return J.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(Ie|De)?t=e.velocity:i&Ie?t=e.velocityX:i&De&&(t=e.velocityY),this._super.attrTest.call(this,e)&&i&e.direction&&e.distance>this.options.threshold&&de(t)>this.options.velocity&&e.eventType&Oe},emit:function(e){var t=G(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),u(ne,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[et]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&Se&&0===this.count)return this.failTimeout();if(n&&a&&i){if(e.eventType!=Oe)return this.failTimeout();var o=this.pTime?e.timeStamp-this.pTime<t.interval:!0,s=!this.pCenter||D(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e;var l=this.count%t.taps;if(0===l)return this.hasRequireFailures()?(this._timer=r(function(){this.state=lt,this.tryEmit()},t.interval,this),at):lt}return ct},failTimeout:function(){return this._timer=r(function(){this.state=ct},this.options.interval,this),ct},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==lt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),re.VERSION="2.0.4",re.defaults={domEvents:!1,touchAction:Je,enable:!0,inputTarget:null,inputClass:null,preset:[[te,{enable:!1}],[K,{enable:!1},["rotate"]],[ie,{direction:Ie}],[J,{direction:Ie},["swipe"]],[ne],[ne,{event:"doubletap",taps:2},["tap"]],[ee]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ft=1,dt=2;ae.prototype={set:function(e){return s(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?dt:ft},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,n=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&lt)&&(r=t.curRecognizer=null);for(var a=0;a<n.length;)i=n[a],t.stopped===dt||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(e),!r&&i.state&(at|ot|st)&&(r=t.curRecognizer=i),a++}},get:function(e){if(e instanceof Y)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(a(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(a(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(y(t,e),1),this.touchAction.update(),this},on:function(e,t){var i=this.handlers;return o(g(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this},off:function(e,t){var i=this.handlers;return o(g(e),function(e){t?i[e].splice(y(i[e],t),1):delete i[e]}),this},emit:function(e,t){this.options.domEvents&&se(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(i&&i.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](t),n++}},destroy:function(){this.element&&oe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(re,{INPUT_START:Se,INPUT_MOVE:Te,INPUT_END:Oe,INPUT_CANCEL:Ee,STATE_POSSIBLE:rt,STATE_BEGAN:at,STATE_CHANGED:ot,STATE_ENDED:st,STATE_RECOGNIZED:lt,STATE_CANCELLED:ut,STATE_FAILED:ct,DIRECTION_NONE:Pe,DIRECTION_LEFT:Ae,DIRECTION_RIGHT:$e,DIRECTION_UP:Me,DIRECTION_DOWN:Ve,DIRECTION_HORIZONTAL:Ie,DIRECTION_VERTICAL:De,DIRECTION_ALL:_e,Manager:ae,Input:S,TouchAction:Q,TouchInput:H,MouseInput:z,PointerEventInput:q,TouchMouseInput:R,SingleTouchInput:F,Recognizer:Y,AttrRecognizer:Z,Tap:ne,Pan:J,Swipe:ie,Pinch:K,Rotate:te,Press:ee,on:p,off:h,each:o,merge:l,extend:s,inherit:u,bindFn:c,prefixed:x}),typeof define==ce&&define.amd?define(function(){return re}):"undefined"!=typeof module&&module.exports?module.exports=re:e[i]=re}(window,document,"Hammer"),function(e){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],e):"object"==typeof exports?e(require("jquery"),require("hammerjs")):e(jQuery,Hammer)}(function(e,t){function i(i,n){var r=e(i);r.data("hammer")||r.data("hammer",new t(r[0],n))}e.fn.hammer=function(e){return this.each(function(){i(this,e)})},t.Manager.prototype.emit=function(t){return function(i,n){t.call(this,i,n),e(this.element).trigger({type:i,gesture:n})}}(t.Manager.prototype.emit)}),function(){function r(e){e.addEventListener("click",function(){var e=this.classList;e.contains("flipped")===!0?e.remove("flipped"):e.add("flipped")})}for(var e=document.querySelectorAll(".card1.effect__click"),t=0,i=e.length;i>t;t++){var n=e[t];r(n)}}(),function(e){e(document).ready(function(){e(document).on("click.card",".card",function(t){e(this).find(".card-reveal").length&&(e(t.target).is(e(".card-reveal .card-title"))||e(t.target).is(e(".card-reveal .card-title i"))?e(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){e(this).css({display:"none"})}}):(e(t.target).is(e(".card .activator"))||e(t.target).is(e(".card .activator i")))&&e(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"}))})})}(jQuery),function(){var e,t,i,n,r,a=function(e,t){return function(){return e.apply(t,arguments)}},o=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};t=function(){function e(){}return e.prototype.extend=function(e,t){var i,n;for(i in t)n=t[i],null==e[i]&&(e[i]=n);return e},e.prototype.isMobile=function(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)},e.prototype.createEvent=function(e,t,i,n){var r;return null==t&&(t=!1),null==i&&(i=!1),null==n&&(n=null),null!=document.createEvent?(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,t,i,n)):null!=document.createEventObject?(r=document.createEventObject(),r.eventType=e):r.eventName=e,r},e.prototype.emitEvent=function(e,t){return null!=e.dispatchEvent?e.dispatchEvent(t):t in(null!=e)?e[t]():"on"+t in(null!=e)?e["on"+t]():void 0},e.prototype.addEvent=function(e,t,i){return null!=e.addEventListener?e.addEventListener(t,i,!1):null!=e.attachEvent?e.attachEvent("on"+t,i):e[t]=i},e.prototype.removeEvent=function(e,t,i){return null!=e.removeEventListener?e.removeEventListener(t,i,!1):null!=e.detachEvent?e.detachEvent("on"+t,i):delete e[t]},e.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},e}(),i=this.WeakMap||this.MozWeakMap||(i=function(){function e(){this.keys=[],this.values=[]}return e.prototype.get=function(e){var t,i,n,r,a;for(a=this.keys,t=n=0,r=a.length;r>n;t=++n)if(i=a[t],i===e)return this.values[t]},e.prototype.set=function(e,t){var i,n,r,a,o;for(o=this.keys,i=r=0,a=o.length;a>r;i=++r)if(n=o[i],n===e)return void(this.values[i]=t);return this.keys.push(e),this.values.push(t)},e}()),e=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(e=function(){function e(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return e.notSupported=!0,e.prototype.observe=function(){},e}()),n=this.getComputedStyle||function(e,t){return this.getPropertyValue=function(t){var i;return"float"===t&&(t="styleFloat"),r.test(t)&&t.replace(r,function(e,t){return t.toUpperCase()}),(null!=(i=e.currentStyle)?i[t]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=function(){function r(e){null==e&&(e={}),this.scrollCallback=a(this.scrollCallback,this),this.scrollHandler=a(this.scrollHandler,this),this.resetAnimation=a(this.resetAnimation,this),this.start=a(this.start,this),this.scrolled=!0,this.config=this.util().extend(e,this.defaults),null!=e.scrollContainer&&(this.config.scrollContainer=document.querySelector(e.scrollContainer)),this.animationNameCache=new i,this.wowEvent=this.util().createEvent(this.config.boxClass)}return r.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},r.prototype.init=function(){var e;return this.element=window.document.documentElement,"interactive"===(e=document.readyState)||"complete"===e?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},r.prototype.start=function(){var t,i,n,r;if(this.stopped=!1,this.boxes=function(){var e,i,n,r;for(n=this.element.querySelectorAll("."+this.config.boxClass),r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(t);return r}.call(this),this.all=function(){var e,i,n,r;for(n=this.boxes,r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(t);return r}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(r=this.boxes,i=0,n=r.length;n>i;i++)t=r[i],this.applyStyle(t,!0);return this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new e(function(e){return function(t){var i,n,r,a,o;for(o=[],i=0,n=t.length;n>i;i++)a=t[i],o.push(function(){var e,t,i,n;for(i=a.addedNodes||[],n=[],e=0,t=i.length;t>e;e++)r=i[e],n.push(this.doSync(r));return n}.call(e));return o}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},r.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},r.prototype.sync=function(t){return e.notSupported?this.doSync(this.element):void 0},r.prototype.doSync=function(e){var t,i,n,r,a;if(null==e&&(e=this.element),1===e.nodeType){for(e=e.parentNode||e,r=e.querySelectorAll("."+this.config.boxClass),a=[],i=0,n=r.length;n>i;i++)t=r[i],o.call(this.all,t)<0?(this.boxes.push(t),this.all.push(t),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(t,!0),a.push(this.scrolled=!0)):a.push(void 0);return a}},r.prototype.show=function(e){return this.applyStyle(e),e.className=e.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(e),this.util().emitEvent(e,this.wowEvent),this.util().addEvent(e,"animationend",this.resetAnimation),this.util().addEvent(e,"oanimationend",this.resetAnimation),this.util().addEvent(e,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(e,"MSAnimationEnd",this.resetAnimation),e},r.prototype.applyStyle=function(e,t){var i,n,r;return n=e.getAttribute("data-wow-duration"),i=e.getAttribute("data-wow-delay"),r=e.getAttribute("data-wow-iteration"),this.animate(function(a){return function(){return a.customStyle(e,t,n,i,r)}}(this))},r.prototype.animate=function(){return"requestAnimationFrame"in window?function(e){return window.requestAnimationFrame(e)}:function(e){return e()}}(),r.prototype.resetStyle=function(){var e,t,i,n,r;for(n=this.boxes,r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(e.style.visibility="visible");return r},r.prototype.resetAnimation=function(e){var t;return e.type.toLowerCase().indexOf("animationend")>=0?(t=e.target||e.srcElement,t.className=t.className.replace(this.config.animateClass,"").trim()):void 0},r.prototype.customStyle=function(e,t,i,n,r){return t&&this.cacheAnimationName(e),e.style.visibility=t?"hidden":"visible",i&&this.vendorSet(e.style,{animationDuration:i}),n&&this.vendorSet(e.style,{animationDelay:n}),r&&this.vendorSet(e.style,{animationIterationCount:r}),this.vendorSet(e.style,{animationName:t?"none":this.cachedAnimationName(e)}),e},r.prototype.vendors=["moz","webkit"],r.prototype.vendorSet=function(e,t){var i,n,r,a;n=[];for(i in t)r=t[i],e[""+i]=r,n.push(function(){var t,n,o,s;for(o=this.vendors,s=[],t=0,n=o.length;n>t;t++)a=o[t],s.push(e[""+a+i.charAt(0).toUpperCase()+i.substr(1)]=r);return s}.call(this));return n},r.prototype.vendorCSS=function(e,t){var i,r,a,o,s,l;for(s=n(e),o=s.getPropertyCSSValue(t),a=this.vendors,i=0,r=a.length;r>i;i++)l=a[i],o=o||s.getPropertyCSSValue("-"+l+"-"+t);return o},r.prototype.animationName=function(e){var t;try{t=this.vendorCSS(e,"animation-name").cssText}catch(i){t=n(e).getPropertyValue("animation-name")}return"none"===t?"":t},r.prototype.cacheAnimationName=function(e){return this.animationNameCache.set(e,this.animationName(e))},r.prototype.cachedAnimationName=function(e){return this.animationNameCache.get(e)},r.prototype.scrollHandler=function(){return this.scrolled=!0},r.prototype.scrollCallback=function(){var e;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var t,i,n,r;for(n=this.boxes,r=[],t=0,i=n.length;i>t;t++)e=n[t],e&&(this.isVisible(e)?this.show(e):r.push(e));return r}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},r.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t},r.prototype.isVisible=function(e){var t,i,n,r,a;return i=e.getAttribute("data-wow-offset")||this.config.offset,a=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,r=a+Math.min(this.element.clientHeight,this.util().innerHeight())-i,n=this.offsetTop(e),t=n+e.clientHeight,r>=n&&t>=a},r.prototype.util=function(){return null!=this._util?this._util:this._util=new t},r.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},r}()}.call(this),$(document).ready(function(){scaleVideoContainer(),initBannerVideoSize(".video-container .poster img"),initBannerVideoSize(".video-container .filter"),initBannerVideoSize(".video-container video"),$(window).on("resize",function(){scaleVideoContainer(),scaleBannerVideoSize(".video-container .poster img"),scaleBannerVideoSize(".video-container .filter"),scaleBannerVideoSize(".video-container video")})}),function(){$(".hamburger-menu").on("click",function(){$(this).toggleClass("animate"),$(".bar").toggleClass("animate")})}(),function(e){e(["jquery"],function(e){return function(){function s(e,t,i){return w({type:r.error,iconClass:x().iconClasses.error,message:e,optionsOverride:i,title:t})}function l(i,n){return i||(i=x()),t=e("#"+i.containerId),t.length?t:(n&&(t=g(i)),t)}function u(e,t,i){return w({type:r.info,iconClass:x().iconClasses.info,message:e,optionsOverride:i,title:t})}function c(e){i=e}function f(e,t,i){return w({type:r.success,iconClass:x().iconClasses.success,message:e,optionsOverride:i,title:t})}function d(e,t,i){return w({type:r.warning,iconClass:x().iconClasses.warning,message:e,optionsOverride:i,title:t})}function p(e,i){var n=x();t||l(n),m(e,n,i)||v(n)}function h(i){var n=x();return t||l(n),i&&0===e(":focus",i).length?void C(i):void(t.children().length&&t.remove())}function v(i){for(var n=t.children(),r=n.length-1;r>=0;r--)m(e(n[r]),i)}function m(t,i,n){var r=n&&n.force?n.force:!1;return t&&(r||0===e(":focus",t).length)?(t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){C(t)}}),!0):!1}function g(i){return t=e("<div/>").attr("id",i.containerId).addClass(i.positionClass).attr("aria-live","polite").attr("role","alert"),t.appendTo(e(i.target)),t}function y(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function b(e){i&&i(e)}function w(i){function m(e){return null==e&&(e=""),new String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(){k(),T(),O(),E(),P(),S()}function y(){u.hover(V,M),!r.onclick&&r.tapToDismiss&&u.click($),r.closeButton&&p&&p.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),$(!0)}),r.onclick&&u.click(function(e){r.onclick(e),$()})}function w(){u.hide(),u[r.showMethod]({duration:r.showDuration,easing:r.showEasing,complete:r.onShown}),r.timeOut>0&&(s=setTimeout($,r.timeOut),h.maxHideTime=parseFloat(r.timeOut),h.hideEta=(new Date).getTime()+h.maxHideTime,r.progressBar&&(h.intervalId=setInterval(I,10)))}function k(){i.iconClass&&u.addClass(r.toastClass).addClass(a)}function S(){r.newestOnTop?t.prepend(u):t.append(u)}function T(){i.title&&(c.append(r.escapeHtml?m(i.title):i.title).addClass(r.titleClass),u.append(c))}function O(){
i.message&&(f.append(r.escapeHtml?m(i.message):i.message).addClass(r.messageClass),u.append(f))}function E(){r.closeButton&&(p.addClass("toast-close-button").attr("role","button"),u.prepend(p))}function P(){r.progressBar&&(d.addClass("toast-progress"),u.prepend(d))}function A(e,t){if(e.preventDuplicates){if(t.message===o)return!0;o=t.message}return!1}function $(t){var i=t&&r.closeMethod!==!1?r.closeMethod:r.hideMethod,n=t&&r.closeDuration!==!1?r.closeDuration:r.hideDuration,a=t&&r.closeEasing!==!1?r.closeEasing:r.hideEasing;return!e(":focus",u).length||t?(clearTimeout(h.intervalId),u[i]({duration:n,easing:a,complete:function(){C(u),r.onHidden&&"hidden"!==v.state&&r.onHidden(),v.state="hidden",v.endTime=new Date,b(v)}})):void 0}function M(){(r.timeOut>0||r.extendedTimeOut>0)&&(s=setTimeout($,r.extendedTimeOut),h.maxHideTime=parseFloat(r.extendedTimeOut),h.hideEta=(new Date).getTime()+h.maxHideTime)}function V(){clearTimeout(s),h.hideEta=0,u.stop(!0,!0)[r.showMethod]({duration:r.showDuration,easing:r.showEasing})}function I(){var e=(h.hideEta-(new Date).getTime())/h.maxHideTime*100;d.width(e+"%")}var r=x(),a=i.iconClass||r.iconClass;if("undefined"!=typeof i.optionsOverride&&(r=e.extend(r,i.optionsOverride),a=i.optionsOverride.iconClass||a),!A(r,i)){n++,t=l(r,!0);var s=null,u=e("<div/>"),c=e("<div/>"),f=e("<div/>"),d=e("<div/>"),p=e(r.closeHtml),h={intervalId:null,hideEta:null,maxHideTime:null},v={toastId:n,state:"visible",startTime:new Date,options:r,map:i};return g(),w(),y(),b(v),r.debug&&console&&console.log(v),u}}function x(){return e.extend({},y(),a.options)}function C(e){t||(t=l()),e.is(":visible")||(e.remove(),e=null,0===t.children().length&&(t.remove(),o=void 0))}var t,i,o,n=0,r={error:"error",info:"info",success:"success",warning:"warning"},a={clear:p,remove:h,error:s,getContainer:l,info:u,options:{},subscribe:c,success:f,version:"2.1.2",warning:d};return a}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),$(window).scroll(function(){$(".navbar").offset().top>50?$(".navbar-fixed-top").addClass("top-nav-collapse"):$(".navbar-fixed-top").removeClass("top-nav-collapse")}),$(function(){$("a.page-scroll").bind("click",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top},1500,"easeInOutExpo"),e.preventDefault()})}),function(e){e.fn.collapsible=function(t){var i={accordion:void 0};return t=e.extend(i,t),this.each(function(){function a(t){n=i.find("> li > .collapsible-header"),t.hasClass("active")?t.parent().addClass("active"):t.parent().removeClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}),n.not(t).removeClass("active").parent().removeClass("active"),n.not(t).parent().children(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}})}function o(t){t.hasClass("active")?t.parent().addClass("active"):t.parent().removeClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}})}function s(e){var t=l(e);return t.length>0}function l(e){return e.closest("li > .collapsible-header")}var i=e(this),n=e(this).find("> li > .collapsible-header"),r=i.data("collapsible");i.off("click.collapse",".collapsible-header"),n.off("click.collapse"),t.accordion||"accordion"===r||void 0===r?(n=i.find("> li > .collapsible-header"),n.on("click.collapse",function(t){var i=e(t.target);s(i)&&(i=l(i)),i.toggleClass("active"),a(i)}),a(n.filter(".active").first())):n.each(function(){e(this).on("click.collapse",function(t){var i=e(t.target);s(i)&&(i=l(i)),i.toggleClass("active"),o(i)}),e(this).hasClass("active")&&o(e(this))})})},e(document).ready(function(){e(".collapsible").collapsible()})}(jQuery),function(e){var t={init:function(t){var i={menuWidth:240,edge:"left",closeOnClick:!1};t=e.extend(i,t),e(this).each(function(){function r(i){a=!1,o=!1,e("body").css("overflow",""),e("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}}),"left"===t.edge?(e(".drag-target").css({width:"",right:"",left:"0"}),n.velocity({left:-1*(t.menuWidth+10)},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){i===!0&&(n.removeAttr("style"),n.css("width",t.menuWidth))}})):(e(".drag-target").css({width:"",right:"0",left:""}),n.velocity({right:-1*(t.menuWidth+10)},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){i===!0&&(n.removeAttr("style"),n.css("width",t.menuWidth))}}))}var i=e(this),n=e("#"+i.attr("data-activates"));240!=t.menuWidth&&n.css("width",t.menuWidth),e("body").append(e('<div class="drag-target"></div>')),"left"==t.edge?(n.css("left",-1*(t.menuWidth+10)),e(".drag-target").css({left:0})):(n.addClass("right-aligned").css("right",-1*(t.menuWidth+10)).css("left",""),e(".drag-target").css({right:0})),n.hasClass("fixed")&&window.innerWidth>992&&n.css("left",0),n.hasClass("fixed")&&e(window).resize(function(){window.innerWidth>992?0!==e("#sidenav-overlay").css("opacity")&&o?r(!0):(n.removeAttr("style"),n.css("width",t.menuWidth)):o===!1&&("left"===t.edge?n.css("left",-1*(t.menuWidth+10)):n.css("right",-1*(t.menuWidth+10)))}),t.closeOnClick===!0&&n.on("click.itemclick","a:not(.collapsible-header)",function(){r()});var a=!1,o=!1;e(".drag-target").on("click",function(){r()}),e(".drag-target").hammer({prevent_default:!1}).bind("pan",function(i){if("touch"==i.gesture.pointerType){var s=(i.gesture.direction,i.gesture.center.x);i.gesture.center.y,i.gesture.velocityX;if(e("body").css("overflow","hidden"),0===e("#sidenav-overlay").length){var c=e('<div id="sidenav-overlay"></div>');c.css("opacity",0).click(function(){r()}),e("body").append(c)}if("left"===t.edge&&(s>t.menuWidth?s=t.menuWidth:0>s&&(s=0)),"left"===t.edge)s<t.menuWidth/2?o=!1:s>=t.menuWidth/2&&(o=!0),n.css("left",s-t.menuWidth);else{s<window.innerWidth-t.menuWidth/2?o=!0:s>=window.innerWidth-t.menuWidth/2&&(o=!1);var f=-1*(s-t.menuWidth/2);f>0&&(f=0),n.css("right",f)}var d;"left"===t.edge?(d=s/t.menuWidth,e("#sidenav-overlay").velocity({opacity:d},{duration:50,queue:!1,easing:"easeOutQuad"})):(d=Math.abs((s-window.innerWidth)/t.menuWidth),e("#sidenav-overlay").velocity({opacity:d},{duration:50,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(i){if("touch"==i.gesture.pointerType){var r=i.gesture.velocityX;a=!1,"left"===t.edge?o&&.3>=r||-.5>r?(n.velocity({left:0},{duration:300,queue:!1,easing:"easeOutQuad"}),e("#sidenav-overlay").velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),e(".drag-target").css({width:"50%",right:0,left:""})):(!o||r>.3)&&(e("body").css("overflow",""),n.velocity({left:-1*(t.menuWidth+10)},{duration:200,queue:!1,easing:"easeOutQuad"}),e("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}}),e(".drag-target").css({width:"10px",right:"",left:0})):o&&r>=-.3||r>.5?(n.velocity({right:0},{duration:300,queue:!1,easing:"easeOutQuad"}),e("#sidenav-overlay").velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),e(".drag-target").css({width:"50%",right:"",left:0})):(!o||-.3>r)&&(e("body").css("overflow",""),n.velocity({right:-1*(t.menuWidth+10)},{duration:200,queue:!1,easing:"easeOutQuad"}),e("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}}),e(".drag-target").css({width:"10px",right:0,left:""}))}}),i.click(function(){if(o===!0)o=!1,a=!1,r();else{e("body").css("overflow","hidden"),"left"===t.edge?(e(".drag-target").css({width:"50%",right:0,left:""}),n.velocity({left:0},{duration:300,queue:!1,easing:"easeOutQuad"})):(e(".drag-target").css({width:"50%",right:"",left:0}),n.velocity({right:0},{duration:300,queue:!1,easing:"easeOutQuad"}),n.css("left",""));var i=e('<div id="sidenav-overlay"></div>');i.css("opacity",0).click(function(){o=!1,a=!1,r(),i.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}})}),e("body").append(i),i.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){o=!0,a=!1}})}return!1})})},show:function(){this.trigger("click")},hide:function(){e("#sidenav-overlay").trigger("click")}};e.fn.sideNav=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.sideNav"):t.init.apply(this,arguments)}}(jQuery),function(e){var t=0,i=0,n=function(){return i++,"materialize-lean-overlay-"+i};e.fn.extend({openModal:function(i){e("body").css("overflow","hidden");var r={opacity:.5,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%"},a=n(),o=e(this),s=e('<div class="lean-overlay"></div>'),l=++t;s.attr("id",a).css("z-index",1e3+2*l),o.data("overlay-id",a).css("z-index",1e3+2*l+1),e("body").append(s),i=e.extend(r,i),i.dismissible&&(s.click(function(){o.closeModal(i)}),e(document).on("keyup.leanModal"+a,function(e){27===e.keyCode&&o.closeModal(i)})),o.find(".modal-close").on("click.close",function(e){o.closeModal(i)}),s.css({display:"block",opacity:0}),o.css({display:"block",opacity:0}),s.velocity({opacity:i.opacity},{duration:i.in_duration,queue:!1,ease:"easeOutCubic"}),o.data("associated-overlay",s[0]),o.hasClass("bottom-sheet")?o.velocity({bottom:"0",opacity:1},{duration:i.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof i.ready&&i.ready()}}):(e.Velocity.hook(o,"scaleX",.7),o.css({top:i.starting_top}),o.velocity({top:"10%",opacity:1,scaleX:"1"},{duration:i.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof i.ready&&i.ready()}}))}}),e.fn.extend({closeModal:function(i){var n={out_duration:250,complete:void 0},r=e(this),a=r.data("overlay-id"),o=e("#"+a);i=e.extend(n,i),e("body").css("overflow",""),r.find(".modal-close").off("click.close"),e(document).off("keyup.leanModal"+a),o.velocity({opacity:0},{duration:i.out_duration,queue:!1,ease:"easeOutQuart"}),r.hasClass("bottom-sheet")?r.velocity({bottom:"-100%",opacity:0},{duration:i.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){o.css({display:"none"}),"function"==typeof i.complete&&i.complete(),o.remove(),t--}}):r.velocity({top:i.starting_top,opacity:0,scaleX:.7},{duration:i.out_duration,complete:function(){e(this).css("display","none"),"function"==typeof i.complete&&i.complete(),o.remove(),t--}})}}),e.fn.extend({leanModal:function(t){return this.each(function(){var i={starting_top:"4%"},n=e.extend(i,t);e(this).click(function(t){n.starting_top=(e(this).offset().top-e(window).scrollTop())/1.15;var i=e(this).attr("href")||"#"+e(this).data("target");e(i).openModal(n),t.preventDefault()})})}})}(jQuery),function(e){e.fn.materialbox=function(){return this.each(function(){function u(){i=!1;var n=a.parent(".material-placeholder"),l=(window.innerWidth,window.innerHeight,a.data("width")),u=a.data("height");a.velocity("stop",!0),e("#materialbox-overlay").velocity("stop",!0),e(".materialbox-caption").velocity("stop",!0),e("#materialbox-overlay").velocity({opacity:0},{duration:r,queue:!1,easing:"easeOutQuad",complete:function(){t=!1,e(this).remove()}}),a.velocity({width:l,height:u,left:0,top:0},{duration:r,queue:!1,easing:"easeOutQuad"}),e(".materialbox-caption").velocity({opacity:0},{duration:r,queue:!1,easing:"easeOutQuad",complete:function(){n.css({height:"",width:"",position:"",top:"",left:""}),a.css({height:"",top:"",left:"",width:"","max-width":"",position:"","z-index":""}),a.removeClass("active"),i=!0,e(this).remove()}})}if(!e(this).hasClass("initialized")){e(this).addClass("initialized");var t=!1,i=!0,n=275,r=200,a=e(this),o=e("<div></div>").addClass("material-placeholder");a.wrap(o),a.on("click",function(){var r=a.parent(".material-placeholder"),o=window.innerWidth,s=window.innerHeight,l=a.width(),c=a.height();if(i===!1)return u(),!1;if(t&&i===!0)return u(),!1;i=!1,a.addClass("active"),t=!0,r.css({width:r[0].getBoundingClientRect().width,height:r[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),a.css({position:"absolute","z-index":1e3}).data("width",l).data("height",c);var f=e('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){i===!0&&u()});if(e("body").append(f),f.velocity({opacity:1},{duration:n,queue:!1,easing:"easeOutQuad"}),""!==a.data("caption")){var d=e('<div class="materialbox-caption"></div>');d.text(a.data("caption")),e("body").append(d),d.css({display:"inline"}),d.velocity({opacity:1},{duration:n,queue:!1,easing:"easeOutQuad"})}var p=0,h=l/o,v=c/s,m=0,g=0;h>v?(p=c/l,m=.9*o,g=.9*o*p):(p=l/c,m=.9*s*p,g=.9*s),a.hasClass("responsive-img")?a.velocity({"max-width":m,width:l},{duration:0,queue:!1,complete:function(){a.css({left:0,top:0}).velocity({height:g,width:m,left:e(document).scrollLeft()+o/2-a.parent(".material-placeholder").offset().left-m/2,top:e(document).scrollTop()+s/2-a.parent(".material-placeholder").offset().top-g/2},{duration:n,queue:!1,easing:"easeOutQuad",complete:function(){i=!0}})}}):a.css("left",0).css("top",0).velocity({height:g,width:m,left:e(document).scrollLeft()+o/2-a.parent(".material-placeholder").offset().left-m/2,top:e(document).scrollTop()+s/2-a.parent(".material-placeholder").offset().top-g/2},{duration:n,queue:!1,easing:"easeOutQuad",complete:function(){i=!0}})}),e(window).scroll(function(){t&&u()}),e(document).keyup(function(e){27===e.keyCode&&i===!0&&t&&u()})}})},e(document).ready(function(){e(".materialboxed").materialbox()})}(jQuery);var bar=$(".progress-bar-animated");$(function(){$(bar).each(function(){bar_width=$(this).attr("aria-valuenow"),$(this).width(bar_width+"%")})});var selector=".popout .panel-heading",parentSelector=".popout .panel .active";$(selector).on("click",function(){parentDiv=upTo(this,"DIV"),console.log(parentDiv),$(this).hasClass("active")?($(selector).removeClass("active"),$(".popout .panel").removeClass("active")):($(selector).removeClass("active"),$(".popout .panel").removeClass("active"),$(this).addClass("active"),$(parentDiv).addClass("active"))}),$(function(){var e=!0;$("#accordion").on("show.bs.collapse",function(){e&&$("#accordion .in").collapse("hide")})}),function(e){function t(){var t=+e(this).attr("length"),i=+e(this).val().length,n=t>=i;e(this).parent().find('span[class="character-counter"]').html(i+"/"+t),r(n,e(this))}function i(t){var i=e("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1);t.parent().append(i)}function n(){e(this).parent().find('span[class="character-counter"]').html("")}function r(e,t){var i=t.hasClass("invalid");e&&i?t.removeClass("invalid"):e||i||(t.removeClass("valid"),t.addClass("invalid"))}e.fn.characterCounter=function(){return this.each(function(){var r=void 0!==e(this).attr("length");r&&(e(this).on("input",t),e(this).on("focus",t),e(this).on("blur",n),i(e(this)))})},e(document).ready(function(){e("input, textarea").characterCounter()})}(jQuery),function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}(function(e){function r(t,l,u,f){function b(){return r._.node("div",r._.node("div",r._.node("div",r._.node("div",y.component.nodes(p.open),v.box),v.wrap),v.frame),v.holder)}function w(){m.data(l,y).addClass(v.input).attr("tabindex",-1).val(m.data("value")?y.get("select",h.format):t.value),h.editable||m.on("focus."+p.id+" click."+p.id,function(e){e.preventDefault(),y.$root[0].focus()}).on("keydown."+p.id,k),s(t,{haspopup:!0,expanded:!1,readonly:!1,owns:t.id+"_root"})}function x(){y.$root.on({keydown:k,focusin:function(e){y.$root.removeClass(v.focused),e.stopPropagation()},"mousedown click":function(t){var i=t.target;i!=y.$root.children()[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(i).is("input, select, textarea, button, option")||(t.preventDefault(),y.$root[0].focus()))}}).on({focus:function(){m.addClass(v.target)},blur:function(){m.removeClass(v.target)}}).on("focus.toOpen",S).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=e(this),i=t.data(),n=t.hasClass(v.navDisabled)||t.hasClass(v.disabled),r=c();r=r&&(r.type||r.href),(n||r&&!e.contains(y.$root[0],r))&&y.$root[0].focus(),!n&&i.nav?y.set("highlight",y.component.item.highlight,{nav:i.nav}):!n&&"pick"in i?y.set("select",i.pick):i.clear?y.clear().close(!0):i.close&&y.close(!0)}),s(y.$root[0],"hidden",!0)}function C(){var i;h.hiddenName===!0?(i=t.name,t.name=""):(i=["string"==typeof h.hiddenPrefix?h.hiddenPrefix:"","string"==typeof h.hiddenSuffix?h.hiddenSuffix:"_submit"],i=i[0]+t.name+i[1]),y._hidden=e('<input type=hidden name="'+i+'"'+(m.data("value")||t.value?' value="'+y.get("select",h.formatSubmit)+'"':"")+">")[0],m.on("change."+p.id,function(){y._hidden.value=t.value?y.get("select",h.formatSubmit):""}),h.container?e(h.container).append(y._hidden):m.after(y._hidden)}function k(e){var t=e.keyCode,i=/^(8|46)$/.test(t);return 27==t?(y.close(),!1):void((32==t||i||!p.open&&y.component.key[t])&&(e.preventDefault(),e.stopPropagation(),i?y.clear().close():y.open()))}function S(e){e.stopPropagation(),"focus"==e.type&&y.$root.addClass(v.focused),y.open()}if(!t)return r;var d=!1,p={id:t.id||"P"+Math.abs(~~(Math.random()*new Date))},h=u?e.extend(!0,{},u.defaults,f):f||{},v=e.extend({},r.klasses(),h.klass),m=e(t),g=function(){return this.start()},y=g.prototype={constructor:g,$node:m,start:function(){return p&&p.start?y:(p.methods={},p.start=!0,p.open=!1,p.type=t.type,t.autofocus=t==c(),t.readOnly=!h.editable,t.id=t.id||p.id,"text"!=t.type&&(t.type="text"),y.component=new u(y,h),y.$root=e(r._.node("div",b(),v.picker,'id="'+t.id+'_root" tabindex="0"')),x(),h.formatSubmit&&C(),w(),h.container?e(h.container).append(y.$root):m.after(y.$root),y.on({start:y.component.onStart,render:y.component.onRender,stop:y.component.onStop,open:y.component.onOpen,close:y.component.onClose,set:y.component.onSet}).on({start:h.onStart,render:h.onRender,stop:h.onStop,open:h.onOpen,close:h.onClose,set:h.onSet}),d=a(y.$root.children()[0]),t.autofocus&&y.open(),y.trigger("start").trigger("render"))},render:function(e){return e?y.$root.html(b()):y.$root.find("."+v.box).html(y.component.nodes(p.open)),y.trigger("render")},stop:function(){return p.start?(y.close(),y._hidden&&y._hidden.parentNode.removeChild(y._hidden),y.$root.remove(),m.removeClass(v.input).removeData(l),setTimeout(function(){m.off("."+p.id)},0),t.type=p.type,t.readOnly=!1,y.trigger("stop"),p.methods={},p.start=!1,y):y},open:function(a){return p.open?y:(m.addClass(v.active),s(t,"expanded",!0),setTimeout(function(){y.$root.addClass(v.opened),s(y.$root[0],"hidden",!1)},0),a!==!1&&(p.open=!0,d&&n.css("overflow","hidden").css("padding-right","+="+o()),y.$root[0].focus(),i.on("click."+p.id+" focusin."+p.id,function(e){var i=e.target;i!=t&&i!=document&&3!=e.which&&y.close(i===y.$root.children()[0])}).on("keydown."+p.id,function(t){var i=t.keyCode,n=y.component.key[i],a=t.target;27==i?y.close(!0):a!=y.$root[0]||!n&&13!=i?e.contains(y.$root[0],a)&&13==i&&(t.preventDefault(),a.click()):(t.preventDefault(),n?r._.trigger(y.component.key.go,y,[r._.trigger(n)]):y.$root.find("."+v.highlighted).hasClass(v.disabled)||y.set("select",y.component.item.highlight).close())})),y.trigger("open"))},close:function(e){return e&&(y.$root.off("focus.toOpen")[0].focus(),setTimeout(function(){y.$root.on("focus.toOpen",S)},0)),m.removeClass(v.active),s(t,"expanded",!1),setTimeout(function(){y.$root.removeClass(v.opened+" "+v.focused),s(y.$root[0],"hidden",!0)},0),p.open?(p.open=!1,d&&n.css("overflow","").css("padding-right","-="+o()),i.off("."+p.id),y.trigger("close")):y},clear:function(e){return y.set("clear",null,e)},set:function(t,i,n){var r,a,o=e.isPlainObject(t),s=o?t:{};if(n=o&&e.isPlainObject(i)?i:n||{},t){o||(s[t]=i);for(r in s)a=s[r],r in y.component.item&&(void 0===a&&(a=null),y.component.set(r,a,n)),("select"==r||"clear"==r)&&m.val("clear"==r?"":y.get(r,h.format)).trigger("change");y.render()}return n.muted?y:y.trigger("set",s)},get:function(e,i){if(e=e||"value",null!=p[e])return p[e];if("valueSubmit"==e){if(y._hidden)return y._hidden.value;e="value"}if("value"==e)return t.value;if(e in y.component.item){if("string"==typeof i){var n=y.component.get(e);return n?r._.trigger(y.component.formats.toString,y.component,[i,n]):""}return y.component.get(e)}},on:function(t,i,n){var r,a,o=e.isPlainObject(t),s=o?t:{};if(t){o||(s[t]=i);for(r in s)a=s[r],n&&(r="_"+r),p.methods[r]=p.methods[r]||[],p.methods[r].push(a)}return y},off:function(){var e,t,i=arguments;for(e=0,namesCount=i.length;e<namesCount;e+=1)t=i[e],t in p.methods&&delete p.methods[t];return y},trigger:function(e,t){var i=function(e){var i=p.methods[e];i&&i.map(function(e){r._.trigger(e,y,[t])})};return i("_"+e),i(e),y}};return new g}function a(e){var t,i="position";return e.currentStyle?t=e.currentStyle[i]:window.getComputedStyle&&(t=getComputedStyle(e)[i]),"fixed"==t}function o(){if(n.height()<=t.height())return 0;var i=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),r=i[0].offsetWidth;i.css("overflow","scroll");var a=e('<div style="width:100%" />').appendTo(i),o=a[0].offsetWidth;return i.remove(),r-o}function s(t,i,n){if(e.isPlainObject(i))for(var r in i)l(t,r,i[r]);else l(t,i,n)}function l(e,t,i){e.setAttribute(("role"==t?"":"aria-")+t,i)}function u(t,i){e.isPlainObject(t)||(t={attribute:i}),i="";for(var n in t){var r=("role"==n?"":"aria-")+n,a=t[n];i+=null==a?"":r+'="'+t[n]+'"'}return i}function c(){try{return document.activeElement}catch(e){}}var t=e(window),i=e(document),n=e(document.documentElement);return r.klasses=function(e){return e=e||"picker",{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},r._={group:function(e){for(var t,i="",n=r._.trigger(e.min,e);n<=r._.trigger(e.max,e,[n]);n+=e.i)t=r._.trigger(e.item,e,[n]),i+=r._.node(e.node,t[0],t[1],t[2]);return i},node:function(t,i,n,r){return i?(i=e.isArray(i)?i.join(""):i,n=n?' class="'+n+'"':"",r=r?" "+r:"","<"+t+n+r+">"+i+"</"+t+">"):""},lead:function(e){return(10>e?"0":"")+e},trigger:function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1===0},ariaAttr:u},r.extend=function(t,i){e.fn[t]=function(n,a){var o=this.data(t);return"picker"==n?o:o&&"string"==typeof n?r._.trigger(o[n],o,[a]):this.each(function(){var a=e(this);a.data(t)||new r(this,t,i,n)})},e.fn[t].defaults=i.defaults},r}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function a(e,t){var i=this,n=e.$node[0],r=n.value,a=e.$node.data("value"),o=a||r,s=a?t.formatSubmit:t.format,l=function(){return n.currentStyle?"rtl"==n.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};i.settings=t,i.$node=e.$node,i.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},i.item={},i.item.clear=null,i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(e){return e[0]===!0?e.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now"),o?i.set("select",o,{format:s}):i.set("select",null).set("highlight",i.item.now),i.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=i.item.highlight,n=new Date(t.year,t.month,t.date+e);i.set("highlight",n,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var i=this.value;i&&(e.set("highlight",[e.get("view").year,i,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var i=this.value;i&&(e.set("highlight",[i,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var n="";i.disabled(i.get("now"))&&(n=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+n+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}var i=7,n=6,r=e._;a.prototype.set=function(e,t,i){var n=this,r=n.item;return null===t?("clear"==e&&(e="select"),r[e]=t,n):(r["enable"==e?"disable":"flip"==e?"enable":e]=n.queue[e].split(" ").map(function(r){return t=n[r](e,t,i)}).pop(),"select"==e?n.set("highlight",r.select,i):"highlight"==e?n.set("view",r.highlight,i):e.match(/^(flip|min|max|disable|enable)$/)&&(r.select&&n.disabled(r.select)&&n.set("select",r.select,i),r.highlight&&n.disabled(r.highlight)&&n.set("highlight",r.highlight,i)),n)},a.prototype.get=function(e){return this.item[e]},a.prototype.create=function(e,i,n){var a,o=this;return i=void 0===i?e:i,i==-(1/0)||i==1/0?a=i:t.isPlainObject(i)&&r.isInteger(i.pick)?i=i.obj:t.isArray(i)?(i=new Date(i[0],i[1],i[2]),i=r.isDate(i)?i:o.create().obj):i=r.isInteger(i)||r.isDate(i)?o.normalize(new Date(i),n):o.now(e,i,n),{year:a||i.getFullYear(),month:a||i.getMonth(),date:a||i.getDate(),day:a||i.getDay(),obj:a||i,pick:a||i.getTime()}},a.prototype.createRange=function(e,i){var n=this,a=function(e){return e===!0||t.isArray(e)||r.isDate(e)?n.create(e):e};return r.isInteger(e)||(e=a(e)),r.isInteger(i)||(i=a(i)),r.isInteger(e)&&t.isPlainObject(i)?e=[i.year,i.month,i.date+e]:r.isInteger(i)&&t.isPlainObject(e)&&(i=[e.year,e.month,e.date+i]),{from:a(e),to:a(i)}},a.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},a.prototype.overlapRanges=function(e,t){var i=this;return e=i.createRange(e.from,e.to),t=i.createRange(t.from,t.to),i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)},a.prototype.now=function(e,t,i){return t=new Date,i&&i.rel&&t.setDate(t.getDate()+i.rel),this.normalize(t,i)},a.prototype.navigate=function(e,i,n){var r,a,o,s,l=t.isArray(i),u=t.isPlainObject(i),c=this.item.view;if(l||u){for(u?(a=i.year,o=i.month,s=i.date):(a=+i[0],o=+i[1],s=+i[2]),n&&n.nav&&c&&c.month!==o&&(a=c.year,o=c.month),r=new Date(a,o+(n&&n.nav?n.nav:0),1),a=r.getFullYear(),o=r.getMonth();new Date(a,o,s).getMonth()!==o;)s-=1;i=[a,o,s]}return i},a.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},a.prototype.measure=function(e,t){var i=this;return t?"string"==typeof t?t=i.parse(e,t):r.isInteger(t)&&(t=i.now(e,t,{rel:t})):t="min"==e?-(1/0):1/0,t},a.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},a.prototype.validate=function(e,i,n){var u,c,p,h,a=this,o=i,s=n&&n.interval?n.interval:1,l=-1===a.item.enable,f=a.item.min,d=a.item.max,v=l&&a.item.disable.filter(function(e){if(t.isArray(e)){var n=a.create(e).pick;n<i.pick?u=!0:n>i.pick&&(c=!0)}return r.isInteger(e)}).length;if((!n||!n.nav)&&(!l&&a.disabled(i)||l&&a.disabled(i)&&(v||u||c)||!l&&(i.pick<=f.pick||i.pick>=d.pick)))for(l&&!v&&(!c&&s>0||!u&&0>s)&&(s*=-1);a.disabled(i)&&(Math.abs(s)>1&&(i.month<o.month||i.month>o.month)&&(i=o,s=s>0?1:-1),i.pick<=f.pick?(p=!0,s=1,i=a.create([f.year,f.month,f.date+(i.pick===f.pick?0:-1)])):i.pick>=d.pick&&(h=!0,s=-1,i=a.create([d.year,d.month,d.date+(i.pick===d.pick?0:1)])),!p||!h);)i=a.create([i.year,i.month,i.date+s]);return i},a.prototype.disabled=function(e){var i=this,n=i.item.disable.filter(function(n){return r.isInteger(n)?e.day===(i.settings.firstDay?n:n-1)%7:t.isArray(n)||r.isDate(n)?e.pick===i.create(n).pick:t.isPlainObject(n)?i.withinRange(n,e):void 0});return n=n.length&&!n.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===i.item.enable?!n:n||e.pick<i.item.min.pick||e.pick>i.item.max.pick},a.prototype.parse=function(e,t,i){var n=this,a={};return t&&"string"==typeof t?(i&&i.format||(i=i||{},i.format=n.settings.format),n.formats.toArray(i.format).map(function(e){var i=n.formats[e],o=i?r.trigger(i,n,[t,a]):e.replace(/^!/,"").length;i&&(a[e]=t.substr(0,o)),t=t.substr(o)}),[a.yyyy||a.yy,+(a.mm||a.m)-1,a.dd||a.d]):t},a.prototype.formats=function(){function e(e,t,i){var n=e.match(/\w+/)[0];return i.mm||i.m||(i.m=t.indexOf(n)+1),n.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?r.digits(e):t.date},dd:function(e,t){return e?2:r.lead(t.date)},ddd:function(e,i){return e?t(e):this.settings.weekdaysShort[i.day]},dddd:function(e,i){return e?t(e):this.settings.weekdaysFull[i.day]},m:function(e,t){return e?r.digits(e):t.month+1},mm:function(e,t){return e?2:r.lead(t.month+1)},mmm:function(t,i){var n=this.settings.monthsShort;return t?e(t,n,i):n[i.month]},mmmm:function(t,i){var n=this.settings.monthsFull;return t?e(t,n,i):n[i.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return r.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}}}(),a.prototype.isDateExact=function(e,i){var n=this;return r.isInteger(e)&&r.isInteger(i)||"boolean"==typeof e&&"boolean"==typeof i?e===i:(r.isDate(e)||t.isArray(e))&&(r.isDate(i)||t.isArray(i))?n.create(e).pick===n.create(i).pick:t.isPlainObject(e)&&t.isPlainObject(i)?n.isDateExact(e.from,i.from)&&n.isDateExact(e.to,i.to):!1},a.prototype.isDateOverlap=function(e,i){var n=this,a=n.settings.firstDay?1:0;return r.isInteger(e)&&(r.isDate(i)||t.isArray(i))?(e=e%7+a,e===n.create(i).day+1):r.isInteger(i)&&(r.isDate(e)||t.isArray(e))?(i=i%7+a,i===n.create(e).day+1):t.isPlainObject(e)&&t.isPlainObject(i)?n.overlapRanges(e,i):!1},a.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},a.prototype.deactivate=function(e,i){var n=this,a=n.item.disable.slice(0);return"flip"==i?n.flipEnable():i===!1?(n.flipEnable(1),a=[]):i===!0?(n.flipEnable(-1),a=[]):i.map(function(e){for(var i,o=0;o<a.length;o+=1)if(n.isDateExact(e,a[o])){i=!0;break}i||(r.isInteger(e)||r.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&a.push(e)}),a},a.prototype.activate=function(e,i){var n=this,a=n.item.disable,o=a.length;return"flip"==i?n.flipEnable():i===!0?(n.flipEnable(1),a=[]):i===!1?(n.flipEnable(-1),a=[]):i.map(function(e){var i,s,l,u;for(l=0;o>l;l+=1){if(s=a[l],n.isDateExact(s,e)){i=a[l]=null,u=!0;break}if(n.isDateOverlap(s,e)){t.isPlainObject(e)?(e.inverted=!0,i=e):t.isArray(e)?(i=e,i[3]||i.push("inverted")):r.isDate(e)&&(i=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(i)for(l=0;o>l;l+=1)if(n.isDateExact(a[l],e)){a[l]=null;break}if(u)for(l=0;o>l;l+=1)if(n.isDateOverlap(a[l],e)){a[l]=null;break}i&&a.push(i)}),a.filter(function(e){return null!=e})},a.prototype.nodes=function(e){var t=this,a=t.settings,o=t.item,s=o.now,l=o.select,u=o.highlight,c=o.view,f=o.disable,d=o.min,p=o.max,h=function(e,t){return a.firstDay&&(e.push(e.shift()),t.push(t.shift())),r.node("thead",r.node("tr",r.group({min:0,max:i-1,i:1,node:"th",item:function(i){return[e[i],a.klass.weekdays,'scope=col title="'+t[i]+'"']}})))}((a.showWeekdaysFull?a.weekdaysFull:a.weekdaysLetter).slice(0),a.weekdaysFull.slice(0)),v=function(e){
return r.node("div"," ",a.klass["nav"+(e?"Next":"Prev")]+(e&&c.year>=p.year&&c.month>=p.month||!e&&c.year<=d.year&&c.month<=d.month?" "+a.klass.navDisabled:""),"data-nav="+(e||-1)+" "+r.ariaAttr({role:"button",controls:t.$node[0].id+"_table"})+' title="'+(e?a.labelMonthNext:a.labelMonthPrev)+'"')},m=function(i){var n=a.showMonthsShort?a.monthsShort:a.monthsFull;return"short_months"==i&&(n=a.monthsShort),a.selectMonths&&void 0==i?r.node("select",r.group({min:0,max:11,i:1,node:"option",item:function(e){return[n[e],0,"value="+e+(c.month==e?" selected":"")+(c.year==d.year&&e<d.month||c.year==p.year&&e>p.month?" disabled":"")]}}),a.klass.selectMonth+" browser-default",(e?"":"disabled")+" "+r.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+a.labelMonthSelect+'"'):"short_months"==i?null!=l?r.node("div",n[l.month]):r.node("div",n[c.month]):r.node("div",n[c.month],a.klass.month)},g=function(i){var n=c.year,o=a.selectYears===!0?5:~~(a.selectYears/2);if(o){var s=d.year,l=p.year,u=n-o,f=n+o;if(s>u&&(f+=s-u,u=s),f>l){var h=u-s,v=f-l;u-=h>v?v:h,f=l}if(a.selectYears&&void 0==i)return r.node("select",r.group({min:u,max:f,i:1,node:"option",item:function(e){return[e,0,"value="+e+(n==e?" selected":"")]}}),a.klass.selectYear+" browser-default",(e?"":"disabled")+" "+r.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+a.labelYearSelect+'"')}return"raw"==i?r.node("div",n):r.node("div",n,a.klass.year)};return createDayLabel=function(){return null!=l?r.node("div",l.date):r.node("div",s.date)},createWeekdayLabel=function(){var e;e=null!=l?l.day:s.day;var t=a.weekdaysFull[e];return t},r.node("div",r.node("div",createWeekdayLabel(),"picker__weekday-display")+r.node("div",m("short_months"),a.klass.month_display)+r.node("div",createDayLabel(),a.klass.day_display)+r.node("div",g("raw"),a.klass.year_display),a.klass.date_display)+r.node("div",r.node("div",(a.selectYears?m()+g():m()+g())+v()+v(1),a.klass.header)+r.node("table",h+r.node("tbody",r.group({min:0,max:n-1,i:1,node:"tr",item:function(e){var n=a.firstDay&&0===t.create([c.year,c.month,1]).day?-7:0;return[r.group({min:i*e-c.day+n+1,max:function(){return this.min+i-1},i:1,node:"td",item:function(e){e=t.create([c.year,c.month,e+(a.firstDay?1:0)]);var i=l&&l.pick==e.pick,n=u&&u.pick==e.pick,o=f&&t.disabled(e)||e.pick<d.pick||e.pick>p.pick,h=r.trigger(t.formats.toString,t,[a.format,e]);return[r.node("div",e.date,function(t){return t.push(c.month==e.month?a.klass.infocus:a.klass.outfocus),s.pick==e.pick&&t.push(a.klass.now),i&&t.push(a.klass.selected),n&&t.push(a.klass.highlighted),o&&t.push(a.klass.disabled),t.join(" ")}([a.klass.day]),"data-pick="+e.pick+" "+r.ariaAttr({role:"gridcell",label:h,selected:i&&t.$node.val()===h?!0:null,activedescendant:n?!0:null,disabled:o?!0:null})),"",r.ariaAttr({role:"presentation"})]}})]}})),a.klass.table,'id="'+t.$node[0].id+'_table" '+r.ariaAttr({role:"grid",controls:t.$node[0].id,readonly:!0})),a.klass.calendar_container)+r.node("div",r.node("button",a.today,"btn-flat picker__today","type=button data-pick="+s.pick+(e&&!t.disabled(s)?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id}))+r.node("button",a.clear,"btn-flat picker__clear","type=button data-clear=1"+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id}))+r.node("button",a.close,"btn-flat picker__close","type=button data-close=true "+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id})),a.klass.footer)},a.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",date_display:e+"date-display",day_display:e+"day-display",month_display:e+"month-display",year_display:e+"year-display",calendar_container:e+"calendar-container",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__"),e.extend("pickadate",a)}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,n,r){return jQuery.easing[jQuery.easing.def](e,t,i,n,r)},easeInQuad:function(e,t,i,n,r){return n*(t/=r)*t+i},easeOutQuad:function(e,t,i,n,r){return-n*(t/=r)*(t-2)+i},easeInOutQuad:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,r){return n*(t/=r)*t*t+i},easeOutCubic:function(e,t,i,n,r){return n*((t=t/r-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,r){return n*(t/=r)*t*t*t+i},easeOutQuart:function(e,t,i,n,r){return-n*((t=t/r-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,r){return n*(t/=r)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,r){return n*((t=t/r-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,r){return n*Math.sin(t/r*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+i},easeInExpo:function(e,t,i,n,r){return 0==t?i:n*Math.pow(2,10*(t/r-1))+i},easeOutExpo:function(e,t,i,n,r){return t==r?i+n:n*(-Math.pow(2,-10*t/r)+1)+i},easeInOutExpo:function(e,t,i,n,r){return 0==t?i:t==r?i+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(e,t,i,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+i},easeOutCirc:function(e,t,i,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+i},easeInOutCirc:function(e,t,i,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,r){var a=1.70158,o=0,s=n;if(0==t)return i;if(1==(t/=r))return i+n;if(o||(o=.3*r),s<Math.abs(n)){s=n;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(n/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+i},easeOutElastic:function(e,t,i,n,r){var a=1.70158,o=0,s=n;if(0==t)return i;if(1==(t/=r))return i+n;if(o||(o=.3*r),s<Math.abs(n)){s=n;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(n/s);return s*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+n+i},easeInOutElastic:function(e,t,i,n,r){var a=1.70158,o=0,s=n;if(0==t)return i;if(2==(t/=r/2))return i+n;if(o||(o=r*(.3*1.5)),s<Math.abs(n)){s=n;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(n/s);return 1>t?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+i:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+n+i},easeInBack:function(e,t,i,n,r,a){return void 0==a&&(a=1.70158),n*(t/=r)*t*((a+1)*t-a)+i},easeOutBack:function(e,t,i,n,r,a){return void 0==a&&(a=1.70158),n*((t=t/r-1)*t*((a+1)*t+a)+1)+i},easeInOutBack:function(e,t,i,n,r,a){return void 0==a&&(a=1.70158),(t/=r/2)<1?n/2*(t*t*(((a*=1.525)+1)*t-a))+i:n/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+i},easeInBounce:function(e,t,i,n,r){return n-jQuery.easing.easeOutBounce(e,r-t,0,n,r)+i},easeOutBounce:function(e,t,i,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+i:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,n,r){return r/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,n,r)+i:.5*jQuery.easing.easeOutBounce(e,2*t-r,0,n,r)+.5*n+i}}),function(e){e.fn.scrollTo=function(t){return e(this).scrollTop(e(this).scrollTop()-e(this).offset().top+e(t).offset().top),this},e.fn.dropdown=function(t){var i={inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!1};this.each(function(){function o(){void 0!==n.data("induration")&&(r.inDuration=n.data("inDuration")),void 0!==n.data("outduration")&&(r.outDuration=n.data("outDuration")),void 0!==n.data("constrainwidth")&&(r.constrain_width=n.data("constrainwidth")),void 0!==n.data("hover")&&(r.hover=n.data("hover")),void 0!==n.data("gutter")&&(r.gutter=n.data("gutter")),void 0!==n.data("beloworigin")&&(r.belowOrigin=n.data("beloworigin"))}function s(){o(),a.addClass("active"),r.constrain_width===!0&&a.css("width",n.outerWidth());var t=0;r.belowOrigin===!0&&(t=n.height());var i=n.offset().left,s=0,l=r.gutter;i+a.innerWidth()>e(window).width()&&(s=n.innerWidth()-a.innerWidth(),l=-1*l),a.css({position:"absolute",top:n.position().top+t,left:n.position().left+s+l}),a.stop(!0,!0).css("opacity",0).slideDown({queue:!1,duration:r.inDuration,easing:"easeOutCubic",complete:function(){e(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:r.inDuration,easing:"easeOutSine"})}function l(){a.fadeOut(r.outDuration),a.removeClass("active")}var n=e(this),r=e.extend({},i,t),a=e("#"+n.attr("data-activates"));if(o(),n.after(a),r.hover){var u=!1;n.unbind("click."+n.attr("id")),n.on("mouseenter",function(e){u===!1&&(s(),u=!0)}),n.on("mouseleave",function(t){var i=t.toElement||t.relatedTarget;e(i).closest(".dropdown-content").is(a)||(a.stop(!0,!0),l(),u=!1)}),a.on("mouseleave",function(t){var i=t.toElement||t.relatedTarget;e(i).closest(".dropdown-button").is(n)||(a.stop(!0,!0),l(),u=!1)})}else n.unbind("click."+n.attr("id")),n.bind("click."+n.attr("id"),function(t){n[0]==t.currentTarget&&0===e(t.target).closest(".dropdown-content").length?(t.preventDefault(),s()):n.hasClass("active")&&(l(),e(document).unbind("click."+a.attr("id"))),a.hasClass("active")&&e(document).bind("click."+a.attr("id"),function(t){!a.is(t.target)&&!n.is(t.target)&&!n.find(t.target).length>0&&(l(),e(document).unbind("click."+a.attr("id")))})});n.on("open",s),n.on("close",l)})},e(document).ready(function(){e(".dropdown-button").dropdown()})}(jQuery),Materialize={},Materialize.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),Materialize.elementOrParentIsFixed=function(e){var t=$(e),i=t.add(t.parents()),n=!1;return i.each(function(){return"fixed"===$(this).css("position")?(n=!0,!1):void 0}),n};var Vel;Vel=$?$.Velocity:Velocity,function(e){e(document).ready(function(){function r(t){var n=t.css("font-family"),r=t.css("font-size");r&&i.css("font-size",r),n&&i.css("font-family",n),"off"===t.attr("wrap")&&i.css("overflow-wrap","normal").css("white-space","pre"),i.text(t.val()+"\n");var a=i.html().replace(/\n/g,"<br>");i.html(a),t.is(":visible")?i.css("width",t.width()):i.css("width",e(window).width()/2),t.css("height",i.height())}Materialize.updateTextFields=function(){var t="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";e(t).each(function(t,i){e(i).val().length>0||void 0!==e(this).attr("placeholder")||e(i)[0].validity.badInput===!0?e(this).siblings("label, i").addClass("active"):e(this).siblings("label, i").removeClass("active")})};var t="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";e("input[autofocus]").siblings("label, i").addClass("active"),e(document).on("change",t,function(){(0!==e(this).val().length||void 0!==e(this).attr("placeholder"))&&e(this).siblings("label, i").addClass("active"),validate_field(e(this))}),e(document).ready(function(){Materialize.updateTextFields()}),e(document).on("reset",function(i){var n=e(i.target);n.is("form")&&(n.find(t).removeClass("valid").removeClass("invalid"),n.find(t).each(function(){""===e(this).attr("value")&&e(this).siblings("label, i").removeClass("active")}),n.find("select.initialized").each(function(){var e=n.find("option[selected]").text();n.siblings("input.select-dropdown").val(e)}))}),e(document).on("focus",t,function(){e(this).siblings("label, i").addClass("active")}),e(document).on("blur",t,function(){var t=e(this);0===t.val().length&&t[0].validity.badInput!==!0&&void 0===t.attr("placeholder")&&t.siblings("label, i").removeClass("active"),validate_field(t)}),validate_field=function(e){var t=void 0!==e.attr("length"),i=parseInt(e.attr("length")),n=e.val().length;0===e.val().length&&e[0].validity.badInput===!1?e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid")):e.hasClass("validate")&&(e.is(":valid")&&t&&i>n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid")))};var i=e(".hiddendiv").first();i.length||(i=e('<div class="hiddendiv common"></div>'),e("body").append(i));var n=".materialize-textarea";e(n).each(function(){var t=e(this);t.val().length&&r(t)}),e("body").on("keyup keydown",n,function(){r(e(this))}),e(".file-field").each(function(){var t=e(this).find("input.file-path");e(this).find('input[type="file"]').change(function(){t.val(e(this)[0].files[0].name),t.trigger("change")})});var s,a="input[type=range]",o=!1;e(a).each(function(){var t=e('<span class="thumb"><span class="value"></span></span>');e(this).after(t)});var l=".range-field";e(document).on("change",a,function(t){var i=e(this).siblings(".thumb");i.find(".value").html(e(this).val())}),e(document).on("input mousedown touchstart",a,function(t){var i=e(this).siblings(".thumb");i.length<=0&&(i=e('<span class="thumb"><span class="value"></span></span>'),e(this).append(i)),i.find(".value").html(e(this).val()),o=!0,e(this).addClass("active"),i.hasClass("active")||i.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),s=void 0===t.pageX||null===t.pageX?t.originalEvent.touches[0].pageX-e(this).offset().left:t.pageX-e(this).offset().left;var n=e(this).outerWidth();0>s?s=0:s>n&&(s=n),i.addClass("active").css("left",s),i.find(".value").html(e(this).val())}),e(document).on("mouseup touchend",l,function(){o=!1,e(this).removeClass("active")}),e(document).on("mousemove touchmove",l,function(t){var n,i=e(this).children(".thumb");if(o){i.hasClass("active")||i.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),n=void 0===t.pageX||null===t.pageX?t.originalEvent.touches[0].pageX-e(this).offset().left:t.pageX-e(this).offset().left;var r=e(this).outerWidth();0>n?n=0:n>r&&(n=r),i.addClass("active").css("left",n),i.find(".value").html(i.siblings(a).val())}}),e(document).on("mouseout touchleave",l,function(){if(!o){var t=e(this).children(".thumb");t.hasClass("active")&&t.velocity({height:"0",width:"0",top:"10px",marginLeft:"-6px"},{duration:100}),t.removeClass("active")}})}),e.fn.material_select=function(t){e(this).each(function(){if($select=e(this),!$select.hasClass("browser-default")){var i=$select.data("select-id");if(i&&($select.parent().find("i").remove(),$select.parent().find("input").remove(),$select.unwrap(),e("ul#select-options-"+i).remove()),"destroy"===t)return void $select.data("select-id",null).removeClass("initialized");var n=Materialize.guid();$select.data("select-id",n);var r=e('<div class="select-wrapper"></div>');r.addClass($select.attr("class"));var s,a=e('<ul id="select-options-'+n+'" class="dropdown-content select-dropdown"></ul>'),o=$select.children("option");s=void 0!==$select.find("option:selected")?$select.find("option:selected"):a.first(),o.each(function(){a.append(e('<li class="'+(e(this).is(":disabled")?"disabled":"")+'"><span>'+e(this).html()+"</span></li>"))}),a.find("li").each(function(i){var n=$select;e(this).click(function(){e(this).hasClass("disabled")||(n.find("option").eq(i).prop("selected",!0),n.trigger("change"),n.siblings("input.select-dropdown").val(e(this).text()),"undefined"!=typeof t&&t())})}),$select.wrap(r);var l=e('<span class="caret">&#9660;</span>');$select.is(":disabled")&&l.addClass("disabled");var u=e('<input type="text" class="select-dropdown" readonly="true" '+($select.is(":disabled")?"disabled":"")+' data-activates="select-options-'+n+'" value="'+s.html()+'"/>');$select.before(u),u.before(l),e("body").append(a),$select.is(":disabled")||u.dropdown({hover:!1}),$select.attr("tabindex")&&e(u[0]).attr("tabindex",$select.attr("tabindex")),$select.addClass("initialized"),u.on("focus",function(){e(this).trigger("open"),s=e(this).val(),selectedOption=a.find("li").filter(function(){return e(this).text().toLowerCase()===s.toLowerCase()})[0],activateOption(a,selectedOption)}),u.on("blur",function(){e(this).trigger("close")}),activateOption=function(t,i){t.find("li.active").removeClass("active"),e(i).addClass("active"),t.scrollTo(i)},filterQuery=[],onKeyDown=function(t){if(9==t.which)return void u.trigger("close");if(40==t.which&&!a.is(":visible"))return void u.trigger("open");if(13!=t.which||a.is(":visible")){t.preventDefault(),letter=String.fromCharCode(t.which).toLowerCase();var i=[9,13,27,38,40];letter&&-1===i.indexOf(t.which)&&(filterQuery.push(letter),string=filterQuery.join(""),newOption=a.find("li").filter(function(){return 0===e(this).text().toLowerCase().indexOf(string)})[0],newOption&&activateOption(a,newOption)),13==t.which&&(activeOption=a.find("li.active:not(.disabled)")[0],activeOption&&(e(activeOption).trigger("click"),u.trigger("close"))),40==t.which&&(newOption=a.find("li.active").next("li:not(.disabled)")[0],newOption&&activateOption(a,newOption)),27==t.which&&u.trigger("close"),38==t.which&&(newOption=a.find("li.active").prev("li:not(.disabled)")[0],newOption&&activateOption(a,newOption)),setTimeout(function(){filterQuery=[]},1e3)}},u.on("keydown",onKeyDown)}})}}(jQuery),!function(e){function t(e){var t=e.length,n=i.type(e);return"function"===n||i.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var i=function(e,t){return new i.fn.init(e,t)};i.isWindow=function(e){return null!=e&&e==e.window},i.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[o.call(e)]||"object":typeof e},i.isArray=Array.isArray||function(e){return"array"===i.type(e)},i.isPlainObject=function(e){var t;if(!e||"object"!==i.type(e)||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!a.call(e,"constructor")&&!a.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}for(t in e);return void 0===t||a.call(e,t)},i.each=function(e,i,n){var r,a=0,o=e.length,s=t(e);if(n){if(s)for(;o>a&&(r=i.apply(e[a],n),r!==!1);a++);else for(a in e)if(r=i.apply(e[a],n),r===!1)break}else if(s)for(;o>a&&(r=i.call(e[a],a,e[a]),r!==!1);a++);else for(a in e)if(r=i.call(e[a],a,e[a]),r===!1)break;return e},i.data=function(e,t,r){if(void 0===r){var a=e[i.expando],o=a&&n[a];if(void 0===t)return o;if(o&&t in o)return o[t]}else if(void 0!==t){var a=e[i.expando]||(e[i.expando]=++i.uuid);return n[a]=n[a]||{},n[a][t]=r,r}},i.removeData=function(e,t){var r=e[i.expando],a=r&&n[r];a&&i.each(t,function(e,t){delete a[t]})},i.extend=function(){var e,t,n,r,a,o,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==i.type(s)&&(s={}),l===u&&(s=this,l--);u>l;l++)if(null!=(a=arguments[l]))for(r in a)e=s[r],n=a[r],s!==n&&(c&&n&&(i.isPlainObject(n)||(t=i.isArray(n)))?(t?(t=!1,o=e&&i.isArray(e)?e:[]):o=e&&i.isPlainObject(e)?e:{},s[r]=i.extend(c,o,n)):void 0!==n&&(s[r]=n));return s},i.queue=function(e,n,r){function a(e,i){var n=i||[];return null!=e&&(t(Object(e))?!function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;)e[r++]=t[n++];if(i!==i)for(;void 0!==t[n];)e[r++]=t[n++];return e.length=r,e}(n,"string"==typeof e?[e]:e):[].push.call(n,e)),n}if(e){n=(n||"fx")+"queue";var o=i.data(e,n);return r?(!o||i.isArray(r)?o=i.data(e,n,a(r)):o.push(r),o):o||[]}},i.dequeue=function(e,t){i.each(e.nodeType?[e]:e,function(e,n){t=t||"fx";var r=i.queue(n,t),a=r.shift();"inprogress"===a&&(a=r.shift()),a&&("fx"===t&&r.unshift("inprogress"),a.call(n,function(){i.dequeue(n,t)}))})},i.fn=i.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),n=this.offset(),r=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:i(e).offset();return n.top-=parseFloat(t.style.marginTop)||0,n.left-=parseFloat(t.style.marginLeft)||0,e.style&&(r.top+=parseFloat(e.style.borderTopWidth)||0,r.left+=parseFloat(e.style.borderLeftWidth)||0),{top:n.top-r.top,left:n.left-r.left}}};var n={};i.expando="velocity"+(new Date).getTime(),i.uuid=0;for(var r={},a=r.hasOwnProperty,o=r.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)r["[object "+s[l]+"]"]=s[l].toLowerCase();i.fn.init.prototype=i.fn,e.Velocity={Utilities:i}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,i,n){function r(e){for(var t=-1,i=e?e.length:0,n=[];++t<i;){var r=e[t];r&&n.push(r)}return n}function a(e){return h.isWrapped(e)?e=[].slice.call(e):h.isNode(e)&&(e=[e]),e}function o(e){var t=v.data(e,"velocity");return null===t?n:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,i,n,r){function a(e,t){return 1-3*t+3*e}function o(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,i){return((a(t,i)*e+o(t,i))*e+s(t))*e}function u(e,t,i){return 3*a(t,i)*e*e+2*o(t,i)*e+s(t)}function c(t,i){for(var r=0;v>r;++r){var a=u(i,e,n);if(0===a)return i;var o=l(i,e,n)-t;i-=o/a}return i}function f(){for(var t=0;b>t;++t)k[t]=l(t*w,e,n)}function d(t,i,r){var a,o,s=0;do o=i+(r-i)/2,a=l(o,e,n)-t,a>0?r=o:i=o;while(Math.abs(a)>g&&++s<y);return o}function p(t){for(var i=0,r=1,a=b-1;r!=a&&k[r]<=t;++r)i+=w;--r;var o=(t-k[r])/(k[r+1]-k[r]),s=i+o*w,l=u(s,e,n);return l>=m?c(t,s):0==l?s:d(t,i,i+w)}function h(){S=!0,(e!=i||n!=r)&&f()}var v=4,m=.001,g=1e-7,y=10,b=11,w=1/(b-1),x="Float32Array"in t;if(4!==arguments.length)return!1;for(var C=0;4>C;++C)if("number"!=typeof arguments[C]||isNaN(arguments[C])||!isFinite(arguments[C]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var k=x?new Float32Array(b):new Array(b),S=!1,T=function(t){return S||h(),e===i&&n===r?t:0===t?0:1===t?1:l(p(t),i,r)};T.getControlPoints=function(){return[{x:e,y:i},{x:n,y:r}]};var O="generateBezier("+[e,i,n,r]+")";return T.toString=function(){return O},T}function u(e,t){var i=e;return h.isString(e)?b.Easings[e]||(i=!1):i=h.isArray(e)&&1===e.length?s.apply(null,e):h.isArray(e)&&2===e.length?w.apply(null,e.concat([t])):h.isArray(e)&&4===e.length?l.apply(null,e):!1,i===!1&&(i=b.Easings[b.defaults.easing]?b.defaults.easing:y),i}function c(e){if(e){var t=(new Date).getTime(),i=b.State.calls.length;i>1e4&&(b.State.calls=r(b.State.calls));for(var a=0;i>a;a++)if(b.State.calls[a]){var s=b.State.calls[a],l=s[0],u=s[2],d=s[3],p=!!d,m=null;d||(d=b.State.calls[a][3]=t-16);for(var g=Math.min((t-d)/u.duration,1),y=0,w=l.length;w>y;y++){var C=l[y],S=C.element;if(o(S)){var T=!1;if(u.display!==n&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var O=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];v.each(O,function(e,t){x.setPropertyValue(S,"display",t)})}x.setPropertyValue(S,"display",u.display)}u.visibility!==n&&"hidden"!==u.visibility&&x.setPropertyValue(S,"visibility",u.visibility);for(var E in C)if("element"!==E){var A,P=C[E],$=h.isString(P.easing)?b.Easings[P.easing]:P.easing;if(1===g)A=P.endValue;else{var M=P.endValue-P.startValue;if(A=P.startValue+M*$(g,u,M),!p&&A===P.currentValue)continue}if(P.currentValue=A,"tween"===E)m=A;else{if(x.Hooks.registered[E]){var V=x.Hooks.getRoot(E),I=o(S).rootPropertyValueCache[V];I&&(P.rootPropertyValue=I)}var D=x.setPropertyValue(S,E,P.currentValue+(0===parseFloat(A)?"":P.unitType),P.rootPropertyValue,P.scrollData);x.Hooks.registered[E]&&(o(S).rootPropertyValueCache[V]=x.Normalizations.registered[V]?x.Normalizations.registered[V]("extract",null,D[1]):D[1]),"transform"===D[0]&&(T=!0)}}u.mobileHA&&o(S).transformCache.translate3d===n&&(o(S).transformCache.translate3d="(0px, 0px, 0px)",T=!0),T&&x.flushTransformCache(S)}}u.display!==n&&"none"!==u.display&&(b.State.calls[a][2].display=!1),u.visibility!==n&&"hidden"!==u.visibility&&(b.State.calls[a][2].visibility=!1),u.progress&&u.progress.call(s[1],s[1],g,Math.max(0,d+u.duration-t),d,m),1===g&&f(a)}}b.State.isTicking&&k(c)}function f(e,t){if(!b.State.calls[e])return!1;for(var i=b.State.calls[e][0],r=b.State.calls[e][1],a=b.State.calls[e][2],s=b.State.calls[e][4],l=!1,u=0,c=i.length;c>u;u++){var f=i[u].element;if(t||a.loop||("none"===a.display&&x.setPropertyValue(f,"display",a.display),"hidden"===a.visibility&&x.setPropertyValue(f,"visibility",a.visibility)),a.loop!==!0&&(v.queue(f)[1]===n||!/\.velocityQueueEntryFlag/i.test(v.queue(f)[1]))&&o(f)){o(f).isAnimating=!1,o(f).rootPropertyValueCache={};var d=!1;v.each(x.Lists.transforms3D,function(e,t){var i=/^scale/.test(t)?1:0,r=o(f).transformCache[t];o(f).transformCache[t]!==n&&new RegExp("^\\("+i+"[^.]").test(r)&&(d=!0,delete o(f).transformCache[t])}),a.mobileHA&&(d=!0,delete o(f).transformCache.translate3d),d&&x.flushTransformCache(f),x.Values.removeClass(f,"velocity-animating")}if(!t&&a.complete&&!a.loop&&u===c-1)try{a.complete.call(r,r)}catch(p){setTimeout(function(){throw p},1)}s&&a.loop!==!0&&s(r),o(f)&&a.loop===!0&&!t&&(v.each(o(f).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),b(f,"reverse",{loop:!0,delay:a.delay})),a.queue!==!1&&v.dequeue(f,a.queue)}b.State.calls[e]=!1;for(var h=0,m=b.State.calls.length;m>h;h++)if(b.State.calls[h]!==!1){l=!0;break}l===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var v,d=function(){if(i.documentMode)return i.documentMode;for(var e=7;e>4;e--){var t=i.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return n}(),p=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-e)),e=i+n,setTimeout(function(){t(i+n)},n)}}(),h={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==n&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},m=!1;if(e.fn&&e.fn.jquery?(v=e,m=!0):v=t.Velocity.Utilities,8>=d&&!m)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=d)return void(jQuery.fn.velocity=jQuery.fn.animate);var g=400,y="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:i.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:v,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:g,easing:y,begin:n,complete:n,progress:n,display:n,visibility:n,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){v.data(e,"velocity",{isSVG:h.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==n?(b.State.scrollAnchor=t,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=i.documentElement||i.body.parentNode||i.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var w=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,i,n){var r={x:t.x+n.dx*i,v:t.v+n.dv*i,tension:t.tension,friction:t.friction};return{dx:r.v,dv:e(r)}}function i(i,n){var r={dx:i.v,dv:e(i)},a=t(i,.5*n,r),o=t(i,.5*n,a),s=t(i,n,o),l=1/6*(r.dx+2*(a.dx+o.dx)+s.dx),u=1/6*(r.dv+2*(a.dv+o.dv)+s.dv);return i.x=i.x+l*n,i.v=i.v+u*n,i}return function n(e,t,r){var c,f,d,a={x:-1,v:0,tension:null,friction:null},o=[0],s=0,l=1e-4,u=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,r=r||null,a.tension=e,a.friction=t,c=null!==r,c?(s=n(e,t),f=s/r*u):f=u;d=i(d||a,f),o.push(1+d.x),s+=16,Math.abs(d.x)>l&&Math.abs(d.v)>l;);return c?function(e){return o[e*(o.length-1)|0]}:s}}();b.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},v.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){b.Easings[t[0]]=l.apply(null,t[1])});var x=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<x.Lists.colors.length;e++){var t="color"===x.Lists.colors[e]?"0 0 0 1":"255 255 255 1";x.Hooks.templates[x.Lists.colors[e]]=["Red Green Blue Alpha",t]}var i,n,r;if(d)for(i in x.Hooks.templates){n=x.Hooks.templates[i],r=n[0].split(" ");
var a=n[1].match(x.RegEx.valueSplit);"Color"===r[0]&&(r.push(r.shift()),a.push(a.shift()),x.Hooks.templates[i]=[r.join(" "),a.join(" ")])}for(i in x.Hooks.templates){n=x.Hooks.templates[i],r=n[0].split(" ");for(var e in r){var o=i+r[e],s=e;x.Hooks.registered[o]=[i,s]}}},getRoot:function(e){var t=x.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return x.RegEx.valueUnwrap.test(t)&&(t=t.match(x.RegEx.valueUnwrap)[1]),x.Values.isCSSNullValue(t)&&(t=x.Hooks.templates[e][1]),t},extractValue:function(e,t){var i=x.Hooks.registered[e];if(i){var n=i[0],r=i[1];return t=x.Hooks.cleanRootPropertyValue(n,t),t.toString().match(x.RegEx.valueSplit)[r]}return t},injectValue:function(e,t,i){var n=x.Hooks.registered[e];if(n){var o,s,r=n[0],a=n[1];return i=x.Hooks.cleanRootPropertyValue(r,i),o=i.toString().match(x.RegEx.valueSplit),o[a]=t,s=o.join(" ")}return i}},Normalizations:{registered:{clip:function(e,t,i){switch(e){case"name":return"clip";case"extract":var n;return x.RegEx.wrappedValueAlreadyExtracted.test(i)?n=i:(n=i.toString().match(x.RegEx.valueUnwrap),n=n?n[1].replace(/,(\s+)?/g," "):i),n;case"inject":return"rect("+i+")"}},blur:function(e,t,i){switch(e){case"name":return b.State.isFirefox?"filter":"-webkit-filter";case"extract":var n=parseFloat(i);if(!n&&0!==n){var r=i.toString().match(/blur\(([0-9]+[A-z]+)\)/i);n=r?r[1]:0}return n;case"inject":return parseFloat(i)?"blur("+i+")":"none"}},opacity:function(e,t,i){if(8>=d)switch(e){case"name":return"filter";case"extract":var n=i.toString().match(/alpha\(opacity=(.*)\)/i);return i=n?n[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(i)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(i),10)+")"}else switch(e){case"name":return"opacity";case"extract":return i;case"inject":return i}}},register:function(){9>=d||b.State.isGingerbread||(x.Lists.transformsBase=x.Lists.transformsBase.concat(x.Lists.transforms3D));for(var e=0;e<x.Lists.transformsBase.length;e++)!function(){var t=x.Lists.transformsBase[e];x.Normalizations.registered[t]=function(e,i,r){switch(e){case"name":return"transform";case"extract":return o(i)===n||o(i).transformCache[t]===n?/^scale/i.test(t)?1:0:o(i).transformCache[t].replace(/[()]/g,"");case"inject":var a=!1;switch(t.substr(0,t.length-1)){case"translate":a=!/(%|px|em|rem|vw|vh|\d)$/i.test(r);break;case"scal":case"scale":b.State.isAndroid&&o(i).transformCache[t]===n&&1>r&&(r=1),a=!/(\d)$/i.test(r);break;case"skew":a=!/(deg|\d)$/i.test(r);break;case"rotate":a=!/(deg|\d)$/i.test(r)}return a||(o(i).transformCache[t]="("+r+")"),o(i).transformCache[t]}}}();for(var e=0;e<x.Lists.colors.length;e++)!function(){var t=x.Lists.colors[e];x.Normalizations.registered[t]=function(e,i,r){switch(e){case"name":return t;case"extract":var a;if(x.RegEx.wrappedValueAlreadyExtracted.test(r))a=r;else{var o,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(r)?o=s[r]!==n?s[r]:s.black:x.RegEx.isHex.test(r)?o="rgb("+x.Values.hexToRgb(r).join(" ")+")":/^rgba?\(/i.test(r)||(o=s.black),a=(o||r).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=d||3!==a.split(" ").length||(a+=" 1"),a;case"inject":return 8>=d?4===r.split(" ").length&&(r=r.split(/\s+/).slice(0,3).join(" ")):3===r.split(" ").length&&(r+=" 1"),(8>=d?"rgb":"rgba")+"("+r.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(d||b.State.isAndroid&&!b.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(b.State.prefixMatches[e])return[b.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],i=0,n=t.length;n>i;i++){var r;if(r=0===i?e:t[i]+e.replace(/^\w/,function(e){return e.toUpperCase()}),h.isString(b.State.prefixElement.style[r]))return b.State.prefixMatches[e]=r,[r,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var n,t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n}),n=i.exec(e),n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,i,r,a){function s(e,i){function r(){u&&x.setPropertyValue(e,"display","none")}var l=0;if(8>=d)l=v.css(e,i);else{var u=!1;if(/^(width|height)$/.test(i)&&0===x.getPropertyValue(e,"display")&&(u=!0,x.setPropertyValue(e,"display",x.Values.getDisplayType(e))),!a){if("height"===i&&"border-box"!==x.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(x.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(x.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(x.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(x.getPropertyValue(e,"paddingBottom"))||0);return r(),c}if("width"===i&&"border-box"!==x.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var f=e.offsetWidth-(parseFloat(x.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(x.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(x.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(x.getPropertyValue(e,"paddingRight"))||0);return r(),f}}var p;p=o(e)===n?t.getComputedStyle(e,null):o(e).computedStyle?o(e).computedStyle:o(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===i&&(i="borderTopColor"),l=9===d&&"filter"===i?p.getPropertyValue(i):p[i],(""===l||null===l)&&(l=e.style[i]),r()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(i)){var h=s(e,"position");("fixed"===h||"absolute"===h&&/top|left/i.test(i))&&(l=v(e).position()[i]+"px")}return l}var l;if(x.Hooks.registered[i]){var u=i,c=x.Hooks.getRoot(u);r===n&&(r=x.getPropertyValue(e,x.Names.prefixCheck(c)[0])),x.Normalizations.registered[c]&&(r=x.Normalizations.registered[c]("extract",e,r)),l=x.Hooks.extractValue(u,r)}else if(x.Normalizations.registered[i]){var f,p;f=x.Normalizations.registered[i]("name",e),"transform"!==f&&(p=s(e,x.Names.prefixCheck(f)[0]),x.Values.isCSSNullValue(p)&&x.Hooks.templates[i]&&(p=x.Hooks.templates[i][1])),l=x.Normalizations.registered[i]("extract",e,p)}if(!/^[\d-]/.test(l))if(o(e)&&o(e).isSVG&&x.Names.SVGAttribute(i))if(/^(height|width)$/i.test(i))try{l=e.getBBox()[i]}catch(h){l=0}else l=e.getAttribute(i);else l=s(e,x.Names.prefixCheck(i)[0]);return x.Values.isCSSNullValue(l)&&(l=0),b.debug>=2&&console.log("Get "+i+": "+l),l},setPropertyValue:function(e,i,n,r,a){var s=i;if("scroll"===i)a.container?a.container["scroll"+a.direction]=n:"Left"===a.direction?t.scrollTo(n,a.alternateValue):t.scrollTo(a.alternateValue,n);else if(x.Normalizations.registered[i]&&"transform"===x.Normalizations.registered[i]("name",e))x.Normalizations.registered[i]("inject",e,n),s="transform",n=o(e).transformCache[i];else{if(x.Hooks.registered[i]){var l=i,u=x.Hooks.getRoot(i);r=r||x.getPropertyValue(e,u),n=x.Hooks.injectValue(l,n,r),i=u}if(x.Normalizations.registered[i]&&(n=x.Normalizations.registered[i]("inject",e,n),i=x.Normalizations.registered[i]("name",e)),s=x.Names.prefixCheck(i)[0],8>=d)try{e.style[s]=n}catch(c){b.debug&&console.log("Browser does not support ["+n+"] for ["+s+"]")}else o(e)&&o(e).isSVG&&x.Names.SVGAttribute(i)?e.setAttribute(i,n):e.style[s]=n;b.debug>=2&&console.log("Set "+i+" ("+s+"): "+n)}return[s,n]},flushTransformCache:function(e){function t(t){return parseFloat(x.getPropertyValue(e,t))}var i="";if((d||b.State.isAndroid&&!b.State.isChrome)&&o(e).isSVG){var n={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};v.each(o(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),n[e]&&(i+=e+"("+n[e].join(" ")+") ",delete n[e])})}else{var r,a;v.each(o(e).transformCache,function(t){return r=o(e).transformCache[t],"transformPerspective"===t?(a=r,!0):(9===d&&"rotateZ"===t&&(t="rotate"),void(i+=t+r+" "))}),a&&(i="perspective"+a+" "+i)}x.setPropertyValue(e,"transform",i)}};x.Hooks.register(),x.Normalizations.register(),b.hook=function(e,t,i){var r=n;return e=a(e),v.each(e,function(e,a){if(o(a)===n&&b.init(a),i===n)r===n&&(r=b.CSS.getPropertyValue(a,t));else{var s=b.CSS.setPropertyValue(a,t,i);"transform"===s[0]&&b.CSS.flushTransformCache(a),r=s}}),r};var C=function(){function e(){return l?E.promise||null:d}function r(){function e(e){function f(e,t){var i=n,o=n,s=n;return h.isArray(e)?(i=e[0],!h.isArray(e[1])&&/^[\d-]/.test(e[1])||h.isFunction(e[1])||x.RegEx.isHex.test(e[1])?s=e[1]:(h.isString(e[1])&&!x.RegEx.isHex.test(e[1])||h.isArray(e[1]))&&(o=t?e[1]:u(e[1],a.duration),e[2]!==n&&(s=e[2]))):i=e,t||(o=o||a.easing),h.isFunction(i)&&(i=i.call(r,S,k)),h.isFunction(s)&&(s=s.call(r,S,k)),[i||0,o,s]}function d(e,t){var i,n;return n=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return i=e,""}),i||(i=x.Values.getUnitType(e)),[n,i]}function p(){var e={myParent:r.parentNode||i.body,position:x.getPropertyValue(r,"position"),fontSize:x.getPropertyValue(r,"fontSize")},n=e.position===D.lastPosition&&e.myParent===D.lastParent,a=e.fontSize===D.lastFontSize;D.lastParent=e.myParent,D.lastPosition=e.position,D.lastFontSize=e.fontSize;var s=100,l={};if(a&&n)l.emToPx=D.lastEmToPx,l.percentToPxWidth=D.lastPercentToPxWidth,l.percentToPxHeight=D.lastPercentToPxHeight;else{var u=o(r).isSVG?i.createElementNS("http://www.w3.org/2000/svg","rect"):i.createElement("div");b.init(u),e.myParent.appendChild(u),v.each(["overflow","overflowX","overflowY"],function(e,t){b.CSS.setPropertyValue(u,t,"hidden")}),b.CSS.setPropertyValue(u,"position",e.position),b.CSS.setPropertyValue(u,"fontSize",e.fontSize),b.CSS.setPropertyValue(u,"boxSizing","content-box"),v.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){b.CSS.setPropertyValue(u,t,s+"%")}),b.CSS.setPropertyValue(u,"paddingLeft",s+"em"),l.percentToPxWidth=D.lastPercentToPxWidth=(parseFloat(x.getPropertyValue(u,"width",null,!0))||1)/s,l.percentToPxHeight=D.lastPercentToPxHeight=(parseFloat(x.getPropertyValue(u,"height",null,!0))||1)/s,l.emToPx=D.lastEmToPx=(parseFloat(x.getPropertyValue(u,"paddingLeft"))||1)/s,e.myParent.removeChild(u)}return null===D.remToPx&&(D.remToPx=parseFloat(x.getPropertyValue(i.body,"fontSize"))||16),null===D.vwToPx&&(D.vwToPx=parseFloat(t.innerWidth)/100,D.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=D.remToPx,l.vwToPx=D.vwToPx,l.vhToPx=D.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),r),l}if(a.begin&&0===S)try{a.begin.call(m,m)}catch(g){setTimeout(function(){throw g},1)}if("scroll"===P){var O,A,$,C=/^x$/i.test(a.axis)?"Left":"Top",T=parseFloat(a.offset)||0;a.container?h.isWrapped(a.container)||h.isNode(a.container)?(a.container=a.container[0]||a.container,O=a.container["scroll"+C],$=O+v(r).position()[C.toLowerCase()]+T):a.container=null:(O=b.State.scrollAnchor[b.State["scrollProperty"+C]],A=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===C?"Top":"Left")]],$=v(r).offset()[C.toLowerCase()]+T),s={scroll:{rootPropertyValue:!1,startValue:O,currentValue:O,endValue:$,unitType:"",easing:a.easing,scrollData:{container:a.container,direction:C,alternateValue:A}},element:r},b.debug&&console.log("tweensContainer (scroll): ",s.scroll,r)}else if("reverse"===P){if(!o(r).tweensContainer)return void v.dequeue(r,a.queue);"none"===o(r).opts.display&&(o(r).opts.display="auto"),"hidden"===o(r).opts.visibility&&(o(r).opts.visibility="visible"),o(r).opts.loop=!1,o(r).opts.begin=null,o(r).opts.complete=null,w.easing||delete a.easing,w.duration||delete a.duration,a=v.extend({},o(r).opts,a);var M=v.extend(!0,{},o(r).tweensContainer);for(var V in M)if("element"!==V){var I=M[V].startValue;M[V].startValue=M[V].currentValue=M[V].endValue,M[V].endValue=I,h.isEmptyObject(w)||(M[V].easing=a.easing),b.debug&&console.log("reverse tweensContainer ("+V+"): "+JSON.stringify(M[V]),r)}s=M}else if("start"===P){var M;o(r).tweensContainer&&o(r).isAnimating===!0&&(M=o(r).tweensContainer),v.each(y,function(e,t){if(RegExp("^"+x.Lists.colors.join("$|^")+"$").test(e)){var i=f(t,!0),r=i[0],a=i[1],o=i[2];if(x.RegEx.isHex.test(r)){for(var s=["Red","Green","Blue"],l=x.Values.hexToRgb(r),u=o?x.Values.hexToRgb(o):n,c=0;c<s.length;c++){var d=[l[c]];a&&d.push(a),u!==n&&d.push(u[c]),y[e+s[c]]=d}delete y[e]}}});for(var N in y){var j=f(y[N]),z=j[0],q=j[1],F=j[2];N=x.Names.camelCase(N);var L=x.Hooks.getRoot(N),H=!1;if(o(r).isSVG||"tween"===L||x.Names.prefixCheck(L)[1]!==!1||x.Normalizations.registered[L]!==n){(a.display!==n&&null!==a.display&&"none"!==a.display||a.visibility!==n&&"hidden"!==a.visibility)&&/opacity|filter/.test(N)&&!F&&0!==z&&(F=0),a._cacheValues&&M&&M[N]?(F===n&&(F=M[N].endValue+M[N].unitType),H=o(r).rootPropertyValueCache[L]):x.Hooks.registered[N]?F===n?(H=x.getPropertyValue(r,L),F=x.getPropertyValue(r,N,H)):H=x.Hooks.templates[L][1]:F===n&&(F=x.getPropertyValue(r,N));var W,R,Q,B=!1;if(W=d(N,F),F=W[0],Q=W[1],W=d(N,z),z=W[0].replace(/^([+-\/*])=/,function(e,t){return B=t,""}),R=W[1],F=parseFloat(F)||0,z=parseFloat(z)||0,"%"===R&&(/^(fontSize|lineHeight)$/.test(N)?(z/=100,R="em"):/^scale/.test(N)?(z/=100,R=""):/(Red|Green|Blue)$/i.test(N)&&(z=z/100*255,R="")),/[\/*]/.test(B))R=Q;else if(Q!==R&&0!==F)if(0===z)R=Q;else{l=l||p();var Y=/margin|padding|left|right|width|text|word|letter/i.test(N)||/X$/.test(N)||"x"===N?"x":"y";switch(Q){case"%":F*="x"===Y?l.percentToPxWidth:l.percentToPxHeight;break;case"px":break;default:F*=l[Q+"ToPx"]}switch(R){case"%":F*=1/("x"===Y?l.percentToPxWidth:l.percentToPxHeight);break;case"px":break;default:F*=1/l[R+"ToPx"]}}switch(B){case"+":z=F+z;break;case"-":z=F-z;break;case"*":z=F*z;break;case"/":z=F/z}s[N]={rootPropertyValue:H,startValue:F,currentValue:F,endValue:z,unitType:R,easing:q},b.debug&&console.log("tweensContainer ("+N+"): "+JSON.stringify(s[N]),r)}else b.debug&&console.log("Skipping ["+L+"] due to a lack of browser support.")}s.element=r}s.element&&(x.Values.addClass(r,"velocity-animating"),_.push(s),""===a.queue&&(o(r).tweensContainer=s,o(r).opts=a),o(r).isAnimating=!0,S===k-1?(b.State.calls.push([_,m,a,null,E.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,c())):S++)}var l,r=this,a=v.extend({},b.defaults,w),s={};switch(o(r)===n&&b.init(r),parseFloat(a.delay)&&a.queue!==!1&&v.queue(r,a.queue,function(e){b.velocityQueueEntryFlag=!0,o(r).delayTimer={setTimeout:setTimeout(e,parseFloat(a.delay)),next:e}}),a.duration.toString().toLowerCase()){case"fast":a.duration=200;break;case"normal":a.duration=g;break;case"slow":a.duration=600;break;default:a.duration=parseFloat(a.duration)||1}b.mock!==!1&&(b.mock===!0?a.duration=a.delay=1:(a.duration*=parseFloat(b.mock)||1,a.delay*=parseFloat(b.mock)||1)),a.easing=u(a.easing,a.duration),a.begin&&!h.isFunction(a.begin)&&(a.begin=null),a.progress&&!h.isFunction(a.progress)&&(a.progress=null),a.complete&&!h.isFunction(a.complete)&&(a.complete=null),a.display!==n&&null!==a.display&&(a.display=a.display.toString().toLowerCase(),"auto"===a.display&&(a.display=b.CSS.Values.getDisplayType(r))),a.visibility!==n&&null!==a.visibility&&(a.visibility=a.visibility.toString().toLowerCase()),a.mobileHA=a.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,a.queue===!1?a.delay?setTimeout(e,a.delay):e():v.queue(r,a.queue,function(t,i){return i===!0?(E.promise&&E.resolver(m),!0):(b.velocityQueueEntryFlag=!0,void e(t))}),""!==a.queue&&"fx"!==a.queue||"inprogress"===v.queue(r)[0]||v.dequeue(r)}var l,d,p,m,y,w,s=arguments[0]&&(arguments[0].p||v.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||h.isString(arguments[0].properties));if(h.isWrapped(this)?(l=!1,p=0,m=this,d=this):(l=!0,p=1,m=s?arguments[0].elements||arguments[0].e:arguments[0]),m=a(m)){s?(y=arguments[0].properties||arguments[0].p,w=arguments[0].options||arguments[0].o):(y=arguments[p],w=arguments[p+1]);var k=m.length,S=0;if(!/^(stop|finish)$/i.test(y)&&!v.isPlainObject(w)){var T=p+1;w={};for(var O=T;O<arguments.length;O++)h.isArray(arguments[O])||!/^(fast|normal|slow)$/i.test(arguments[O])&&!/^\d/.test(arguments[O])?h.isString(arguments[O])||h.isArray(arguments[O])?w.easing=arguments[O]:h.isFunction(arguments[O])&&(w.complete=arguments[O]):w.duration=arguments[O]}var E={promise:null,resolver:null,rejecter:null};l&&b.Promise&&(E.promise=new b.Promise(function(e,t){E.resolver=e,E.rejecter=t}));var P;switch(y){case"scroll":P="scroll";break;case"reverse":P="reverse";break;case"finish":case"stop":v.each(m,function(e,t){o(t)&&o(t).delayTimer&&(clearTimeout(o(t).delayTimer.setTimeout),o(t).delayTimer.next&&o(t).delayTimer.next(),delete o(t).delayTimer)});var A=[];return v.each(b.State.calls,function(e,t){t&&v.each(t[1],function(i,r){var a=w===n?"":w;return a===!0||t[2].queue===a||w===n&&t[2].queue===!1?void v.each(m,function(i,n){n===r&&((w===!0||h.isString(w))&&(v.each(v.queue(n,h.isString(w)?w:""),function(e,t){h.isFunction(t)&&t(null,!0)}),v.queue(n,h.isString(w)?w:"",[])),"stop"===y?(o(n)&&o(n).tweensContainer&&a!==!1&&v.each(o(n).tweensContainer,function(e,t){t.endValue=t.currentValue}),A.push(e)):"finish"===y&&(t[2].duration=1))}):!0})}),"stop"===y&&(v.each(A,function(e,t){f(t,!0)}),E.promise&&E.resolver(m)),e();default:if(!v.isPlainObject(y)||h.isEmptyObject(y)){if(h.isString(y)&&b.Redirects[y]){var $=v.extend({},w),M=$.duration,V=$.delay||0;return $.backwards===!0&&(m=v.extend(!0,[],m).reverse()),v.each(m,function(e,t){parseFloat($.stagger)?$.delay=V+parseFloat($.stagger)*e:h.isFunction($.stagger)&&($.delay=V+$.stagger.call(t,e,k)),$.drag&&($.duration=parseFloat(M)||(/^(callout|transition)/.test(y)?1e3:g),$.duration=Math.max($.duration*($.backwards?1-e/k:(e+1)/k),.75*$.duration,200)),b.Redirects[y].call(t,t,$||{},e,k,m,E.promise?E:n)}),e()}var I="Velocity: First argument ("+y+") was not a property map, a known action, or a registered redirect. Aborting.";return E.promise?E.rejecter(new Error(I)):console.log(I),e()}P="start"}var D={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},_=[];v.each(m,function(e,t){h.isNode(t)&&r.call(t)});var N,$=v.extend({},b.defaults,w);if($.loop=parseInt($.loop),N=2*$.loop-1,$.loop)for(var j=0;N>j;j++){var z={delay:$.delay,progress:$.progress};j===N-1&&(z.display=$.display,z.visibility=$.visibility,z.complete=$.complete),C(m,"reverse",z)}return e()}};b=v.extend(C,b),b.animate=C;var k=t.requestAnimationFrame||p;return b.State.isMobile||i.hidden===n||i.addEventListener("visibilitychange",function(){i.hidden?(k=function(e){return setTimeout(function(){e(!0)},16)},c()):k=t.requestAnimationFrame||p}),e.Velocity=b,e!==t&&(e.fn.velocity=C,e.fn.velocity.defaults=b.defaults),v.each(["Down","Up"],function(e,t){b.Redirects["slide"+t]=function(e,i,r,a,o,s){var l=v.extend({},i),u=l.begin,c=l.complete,f={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};l.display===n&&(l.display="Down"===t?"inline"===b.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(o,o);for(var i in f){d[i]=e.style[i];var n=b.CSS.getPropertyValue(e,i);f[i]="Down"===t?[n,0]:[0,n]}d.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in d)e.style[t]=d[t];c&&c.call(o,o),s&&s.resolver(o)},b(e,f,l)}}),v.each(["In","Out"],function(e,t){b.Redirects["fade"+t]=function(e,i,r,a,o,s){var l=v.extend({},i),u={opacity:"In"===t?1:0},c=l.complete;l.complete=r!==a-1?l.begin=null:function(){c&&c.call(o,o),s&&s.resolver(o)},l.display===n&&(l.display="In"===t?"auto":"none"),b(this,u,l)}}),b}(window.jQuery||window.Zepto||window,window,document)}),function(e){e(document).ready(function(){e.fn.reverse=[].reverse,e(document).on("mouseenter.fixedActionBtn",".fixed-action-btn",function(i){var n=e(this);t(n)}),e(document).on("mouseleave.fixedActionBtn",".fixed-action-btn",function(t){var n=e(this);i(n)})}),e.fn.extend({openFAB:function(){var i=e(this);t(i)},closeFAB:function(){i($this)}});var t=function(t){if($this=t,$this.hasClass("active")===!1){$this.addClass("active"),$this.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:"40px"},{duration:0});var i=0;$this.find("ul .btn-floating").reverse().each(function(){e(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0"},{duration:80,delay:i}),i+=40})}},i=function(e){$this=e,$this.removeClass("active");$this.find("ul .btn-floating").velocity("stop",!0),$this.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:"40px"},{duration:80})}}(jQuery),function(e){"use strict";function n(e){return null!==e&&e===e.window}function r(e){return n(e)?e:9===e.nodeType&&e.defaultView}function a(e){var t,i,n={top:0,left:0},a=e&&e.ownerDocument;return t=a.documentElement,"undefined"!=typeof e.getBoundingClientRect&&(n=e.getBoundingClientRect()),i=r(a),{top:n.top+i.pageYOffset-t.clientTop,left:n.left+i.pageXOffset-t.clientLeft}}function o(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t+=i+":"+e[i]+";");return t}function u(e){if(l.allowEvent(e)===!1)return null;for(var t=null,i=e.target||e.srcElement;null!==i.parentElement;){if(!(i instanceof SVGElement||-1===i.className.indexOf("waves-effect"))){t=i;break}if(i.classList.contains("waves-effect")){t=i;break}i=i.parentElement}return t}function c(t){var i=u(t);null!==i&&(s.show(t,i),"ontouchstart"in e&&(i.addEventListener("touchend",s.hide,!1),i.addEventListener("touchcancel",s.hide,!1)),i.addEventListener("mouseup",s.hide,!1),i.addEventListener("mouseleave",s.hide,!1))}var t=t||{},i=document.querySelectorAll.bind(document),s={duration:750,show:function(e,t){if(2===e.button)return!1;var i=t||this,n=document.createElement("div");n.className="waves-ripple",i.appendChild(n);var r=a(i),l=e.pageY-r.top,u=e.pageX-r.left,c="scale("+i.clientWidth/100*10+")";"touches"in e&&(l=e.touches[0].pageY-r.top,u=e.touches[0].pageX-r.left),n.setAttribute("data-hold",Date.now()),n.setAttribute("data-scale",c),n.setAttribute("data-x",u),n.setAttribute("data-y",l);var f={top:l+"px",left:u+"px"};n.className=n.className+" waves-notransition",n.setAttribute("style",o(f)),n.className=n.className.replace("waves-notransition",""),f["-webkit-transform"]=c,f["-moz-transform"]=c,f["-ms-transform"]=c,f["-o-transform"]=c,f.transform=c,f.opacity="1",f["-webkit-transition-duration"]=s.duration+"ms",f["-moz-transition-duration"]=s.duration+"ms",f["-o-transition-duration"]=s.duration+"ms",f["transition-duration"]=s.duration+"ms",f["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",f["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",f["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",f["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",n.setAttribute("style",o(f))},hide:function(e){l.touchup(e);var t=this,n=(1.4*t.clientWidth,null),r=t.getElementsByClassName("waves-ripple");if(!(r.length>0))return!1;n=r[r.length-1];var a=n.getAttribute("data-x"),u=n.getAttribute("data-y"),c=n.getAttribute("data-scale"),f=Date.now()-Number(n.getAttribute("data-hold")),d=350-f;0>d&&(d=0),setTimeout(function(){var e={top:u+"px",left:a+"px",opacity:"0","-webkit-transition-duration":s.duration+"ms","-moz-transition-duration":s.duration+"ms","-o-transition-duration":s.duration+"ms","transition-duration":s.duration+"ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c};n.setAttribute("style",o(e)),setTimeout(function(){try{t.removeChild(n)}catch(e){return!1}},s.duration)},d)},wrapInput:function(e){for(var t=0;t<e.length;t++){var i=e[t];if("input"===i.tagName.toLowerCase()){var n=i.parentNode;if("i"===n.tagName.toLowerCase()&&-1!==n.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=i.className+" waves-input-wrapper";var a=i.getAttribute("style");a||(a=""),r.setAttribute("style",a),i.className="waves-button-input",i.removeAttribute("style"),n.replaceChild(r,i),r.appendChild(i)}}}},l={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?l.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout(function(){l.touches>0&&(l.touches-=1)},500):"mousedown"===e.type&&l.touches>0&&(t=!1),t},touchup:function(e){l.allowEvent(e)}};t.displayEffect=function(t){t=t||{},"duration"in t&&(s.duration=t.duration),s.wrapInput(i(".waves-effect")),"ontouchstart"in e&&document.body.addEventListener("touchstart",c,!1),document.body.addEventListener("mousedown",c,!1)},t.attach=function(t){"input"===t.tagName.toLowerCase()&&(s.wrapInput([t]),t=t.parentElement),"ontouchstart"in e&&t.addEventListener("touchstart",c,!1),t.addEventListener("mousedown",c,!1)},e.Waves=t,document.addEventListener("DOMContentLoaded",function(){t.displayEffect()},!1)}(window);
/* Buttons */

(function ($) {
    $(document).ready(function () {

        // jQuery reverse
        $.fn.reverse = [].reverse;

        $(document).on('mouseenter.fixedActionBtn', '.fixed-action-btn', function (e) {
            var $this = $(this);
            openFABMenu($this);

        });

        $(document).on('mouseleave.fixedActionBtn', '.fixed-action-btn', function (e) {
            var $this = $(this);
            closeFABMenu($this);
        });

    });

    $.fn.extend({
        openFAB: function () {
            var $this = $(this);
            openFABMenu($this);
        },
        closeFAB: function () {
            closeFABMenu($this);
        }
    });


    var openFABMenu = function (btn) {
        $this = btn;
        if ($this.hasClass('active') === false) {
            $this.addClass('active');
            $this.find('ul .btn-floating').velocity({
                scaleY: ".4",
                scaleX: ".4",
                translateY: "40px"
            }, {
                duration: 0
            });

            var time = 0;
            $this.find('ul .btn-floating').reverse().each(function () {
                $(this).velocity({
                    opacity: "1",
                    scaleX: "1",
                    scaleY: "1",
                    translateY: "0"
                }, {
                    duration: 80,
                    delay: time
                });
                time += 40;
            });
        }
    };

    var closeFABMenu = function (btn) {
        $this = btn;
        $this.removeClass('active');
        var time = 0;
        $this.find('ul .btn-floating').velocity("stop", true);
        $this.find('ul .btn-floating').velocity({
            opacity: "0",
            scaleX: ".4",
            scaleY: ".4",
            translateY: "40px"
        }, {
            duration: 80
        });
    };


}(jQuery));
/* CARD REVEAL */

(function ($) {
    $(document).ready(function () {

        $(document).on('click.card', '.card', function (e) {
            if ($(this).find('.card-reveal').length) {
                if ($(e.target).is($('.card-reveal .card-title')) || $(e.target).is($('.card-reveal .card-title i'))) {
                    // Make Reveal animate down and display none
                    $(this).find('.card-reveal').velocity({
                        translateY: 0
                    }, {
                        duration: 225,
                        queue: false,
                        easing: 'easeInOutQuad',
                        complete: function () {
                            $(this).css({
                                display: 'none'
                            });
                        }
                    });
                } else if ($(e.target).is($('.card .activator')) ||
                    $(e.target).is($('.card .activator i'))) {
                    $(this).find('.card-reveal').css({
                        display: 'block'
                    }).velocity("stop", false).velocity({
                        translateY: '-100%'
                    }, {
                        duration: 300,
                        queue: false,
                        easing: 'easeInOutQuad'
                    });
                }
            }


        });

    });
}(jQuery));
/* CHARACTER COUNTER */

(function ($) {

    $.fn.characterCounter = function () {
        return this.each(function () {

            var itHasLengthAttribute = $(this).attr('length') !== undefined;

            if (itHasLengthAttribute) {
                $(this).on('input', updateCounter);
                $(this).on('focus', updateCounter);
                $(this).on('blur', removeCounterElement);

                addCounterElement($(this));
            }

        });
    };

    function updateCounter() {
        var maxLength = +$(this).attr('length'),
            actualLength = +$(this).val().length,
            isValidLength = actualLength <= maxLength;

        $(this).parent().find('span[class="character-counter"]')
            .html(actualLength + '/' + maxLength);

        addInputStyle(isValidLength, $(this));
    }

    function addCounterElement($input) {
        var $counterElement = $('<span/>')
            .addClass('character-counter')
            .css('float', 'right')
            .css('font-size', '12px')
            .css('height', 1);

        $input.parent().append($counterElement);
    }

    function removeCounterElement() {
        $(this).parent().find('span[class="character-counter"]').html('');
    }

    function addInputStyle(isValidLength, $input) {
        var inputHasInvalidClass = $input.hasClass('invalid');
        if (isValidLength && inputHasInvalidClass) {
            $input.removeClass('invalid');
        } else if (!isValidLength && !inputHasInvalidClass) {
            $input.removeClass('valid');
            $input.addClass('invalid');
        }
    }

    $(document).ready(function () {
        $('input, textarea').characterCounter();
    });

}(jQuery));
/* COLLAPSIBLE */

(function ($) {
    $.fn.collapsible = function (options) {
        var defaults = {
            accordion: undefined
        };

        options = $.extend(defaults, options);


        return this.each(function () {

            var $this = $(this);

            var $panel_headers = $(this).find('> li > .collapsible-header');

            var collapsible_type = $this.data("collapsible");

            // Turn off any existing event handlers
            $this.off('click.collapse', '.collapsible-header');
            $panel_headers.off('click.collapse');


            /****************
            Helper Functions
            ****************/

            // Accordion Open
            function accordionOpen(object) {
                $panel_headers = $this.find('> li > .collapsible-header');
                if (object.hasClass('active')) {
                    object.parent().addClass('active');
                } else {
                    object.parent().removeClass('active');
                }
                if (object.parent().hasClass('active')) {
                    object.siblings('.collapsible-body').stop(true, false).slideDown({
                        duration: 350,
                        easing: "easeOutQuart",
                        queue: false,
                        complete: function () {
                            $(this).css('height', '');
                        }
                    });
                } else {
                    object.siblings('.collapsible-body').stop(true, false).slideUp({
                        duration: 350,
                        easing: "easeOutQuart",
                        queue: false,
                        complete: function () {
                            $(this).css('height', '');
                        }
                    });
                }

                $panel_headers.not(object).removeClass('active').parent().removeClass('active');
                $panel_headers.not(object).parent().children('.collapsible-body').stop(true, false).slideUp({
                    duration: 350,
                    easing: "easeOutQuart",
                    queue: false,
                    complete: function () {
                        $(this).css('height', '');
                    }
                });
            }

            // Expandable Open
            function expandableOpen(object) {
                if (object.hasClass('active')) {
                    object.parent().addClass('active');
                } else {
                    object.parent().removeClass('active');
                }
                if (object.parent().hasClass('active')) {
                    object.siblings('.collapsible-body').stop(true, false).slideDown({
                        duration: 350,
                        easing: "easeOutQuart",
                        queue: false,
                        complete: function () {
                            $(this).css('height', '');
                        }
                    });
                } else {
                    object.siblings('.collapsible-body').stop(true, false).slideUp({
                        duration: 350,
                        easing: "easeOutQuart",
                        queue: false,
                        complete: function () {
                            $(this).css('height', '');
                        }
                    });
                }
            }

            /**
             * Check if object is children of panel header
             * @param  {Object}  object Jquery object
             * @return {Boolean} true if it is children
             */
            function isChildrenOfPanelHeader(object) {

                var panelHeader = getPanelHeader(object);

                return panelHeader.length > 0;
            }

            /**
             * Get panel header from a children element
             * @param  {Object} object Jquery object
             * @return {Object} panel header object
             */
            function getPanelHeader(object) {

                return object.closest('li > .collapsible-header');
            }

            /*****  End Helper Functions  *****/



            if (options.accordion || collapsible_type === "accordion" || collapsible_type === undefined) { // Handle Accordion
                // Add click handler to only direct collapsible header children
                $panel_headers = $this.find('> li > .collapsible-header');
                $panel_headers.on('click.collapse', function (e) {
                    var element = $(e.target);

                    if (isChildrenOfPanelHeader(element)) {
                        element = getPanelHeader(element);
                    }

                    element.toggleClass('active');
                    accordionOpen(element);
                });
                // Open first active
                accordionOpen($panel_headers.filter('.active').first());
            } else { // Handle Expandables
                $panel_headers.each(function () {
                    // Add click handler to only direct collapsible header children
                    $(this).on('click.collapse', function (e) {
                        var element = $(e.target);
                        if (isChildrenOfPanelHeader(element)) {
                            element = getPanelHeader(element);
                        }
                        element.toggleClass('active');
                        expandableOpen(element);
                    });
                    // Open any bodies that have the active class
                    if ($(this).hasClass('active')) {
                        expandableOpen($(this));
                    }

                });
            }

        });
    };

    $(document).ready(function () {
        $('.collapsible').collapsible();
    });
}(jQuery));
/* DROPDOWN */

(function ($) {

    // Add posibility to scroll to selected option
    // usefull for select for example
    $.fn.scrollTo = function (elem) {
        $(this).scrollTop($(this).scrollTop() - $(this).offset().top + $(elem).offset().top);
        return this;
    };

    $.fn.dropdown = function (option) {
        var defaults = {
            inDuration: 300,
            outDuration: 225,
            constrain_width: true, // Constrains width of dropdown to the activator
            hover: false,
            gutter: 0, // Spacing from edge
            belowOrigin: false
        };

        this.each(function () {
            var origin = $(this);
            var options = $.extend({}, defaults, option);

            // Dropdown menu
            var activates = $("#" + origin.attr('data-activates'));

            function updateOptions() {
                if (origin.data('induration') !== undefined)
                    options.inDuration = origin.data('inDuration');
                if (origin.data('outduration') !== undefined)
                    options.outDuration = origin.data('outDuration');
                if (origin.data('constrainwidth') !== undefined)
                    options.constrain_width = origin.data('constrainwidth');
                if (origin.data('hover') !== undefined)
                    options.hover = origin.data('hover');
                if (origin.data('gutter') !== undefined)
                    options.gutter = origin.data('gutter');
                if (origin.data('beloworigin') !== undefined)
                    options.belowOrigin = origin.data('beloworigin');
            }

            updateOptions();

            // Attach dropdown to its activator
            origin.after(activates);

            /*
              Helper function to position and resize dropdown.
              Used in hover and click handler.
            */
            function placeDropdown() {
                // Check html data attributes
                updateOptions();

                // Set Dropdown state
                activates.addClass('active');

                // Constrain width
                if (options.constrain_width === true) {
                    activates.css('width', origin.outerWidth());
                }
                var offset = 0;
                if (options.belowOrigin === true) {
                    offset = origin.height();
                }

                // Handle edge alignment
                var offsetLeft = origin.offset().left;
                var width_difference = 0;
                var gutter_spacing = options.gutter;


                if (offsetLeft + activates.innerWidth() > $(window).width()) {
                    width_difference = origin.innerWidth() - activates.innerWidth();
                    gutter_spacing = gutter_spacing * -1;
                }

                // Position dropdown
                activates.css({
                    position: 'absolute',
                    top: origin.position().top + offset,
                    left: origin.position().left + width_difference + gutter_spacing
                });



                // Show dropdown
                activates.stop(true, true).css('opacity', 0)
                    .slideDown({
                        queue: false,
                        duration: options.inDuration,
                        easing: 'easeOutCubic',
                        complete: function () {
                            $(this).css('height', '');
                        }
                    })
                    .animate({
                        opacity: 1
                    }, {
                        queue: false,
                        duration: options.inDuration,
                        easing: 'easeOutSine'
                    });
            }

            function hideDropdown() {
                activates.fadeOut(options.outDuration);
                activates.removeClass('active');
            }

            // Hover
            if (options.hover) {
                var open = false;
                origin.unbind('click.' + origin.attr('id'));
                // Hover handler to show dropdown
                origin.on('mouseenter', function (e) { // Mouse over
                    if (open === false) {
                        placeDropdown();
                        open = true;
                    }
                });
                origin.on('mouseleave', function (e) {
                    // If hover on origin then to something other than dropdown content, then close
                    var toEl = e.toElement || e.relatedTarget; // added browser compatibility for target element
                    if (!$(toEl).closest('.dropdown-content').is(activates)) {
                        activates.stop(true, true);
                        hideDropdown();
                        open = false;
                    }
                });

                activates.on('mouseleave', function (e) { // Mouse out
                    var toEl = e.toElement || e.relatedTarget;
                    if (!$(toEl).closest('.dropdown-button').is(origin)) {
                        activates.stop(true, true);
                        hideDropdown();
                        open = false;
                    }
                });

                // Click
            } else {

                // Click handler to show dropdown
                origin.unbind('click.' + origin.attr('id'));
                origin.bind('click.' + origin.attr('id'), function (e) {

                    if (origin[0] == e.currentTarget && ($(e.target).closest('.dropdown-content').length === 0)) {
                        e.preventDefault(); // Prevents button click from moving window
                        placeDropdown();

                    }
                    // If origin is clicked and menu is open, close menu
                    else {
                        if (origin.hasClass('active')) {
                            hideDropdown();
                            $(document).unbind('click.' + activates.attr('id'));
                        }
                    }
                    // If menu open, add click close handler to document
                    if (activates.hasClass('active')) {
                        $(document).bind('click.' + activates.attr('id'), function (e) {
                            if (!activates.is(e.target) && !origin.is(e.target) && (!origin.find(e.target).length > 0)) {
                                hideDropdown();
                                $(document).unbind('click.' + activates.attr('id'));
                            }
                        });
                    }
                });

            } // End else

            // Listen to open and close event - useful for select component
            origin.on('open', placeDropdown);
            origin.on('close', hideDropdown);


        });
    }; // End dropdown plugin

    $(document).ready(function () {
        $('.dropdown-button').dropdown();
    });
}(jQuery));
/* FORMS */

(function ($) {
    $(document).ready(function () {

        // Function to update labels of text fields
        Materialize.updateTextFields = function () {
            var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';
            $(input_selector).each(function (index, element) {
                if ($(element).val().length > 0 || $(this).attr('placeholder') !== undefined || $(element)[0].validity.badInput === true) {
                    $(this).siblings('label, i').addClass('active');
                } else {
                    $(this).siblings('label, i').removeClass('active');
                }
            });
        };

        // Text based inputs
        var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';

        // Handle HTML5 autofocus
        $('input[autofocus]').siblings('label, i').addClass('active');

        // Add active if form auto complete
        $(document).on('change', input_selector, function () {
            if ($(this).val().length !== 0 || $(this).attr('placeholder') !== undefined) {
                $(this).siblings('label, i').addClass('active');
            }
            validate_field($(this));
        });

        // Add active if input element has been pre-populated on document ready
        $(document).ready(function () {
            Materialize.updateTextFields();
        });

        // HTML DOM FORM RESET handling
        $(document).on('reset', function (e) {
            var formReset = $(e.target);
            if (formReset.is('form')) {
                formReset.find(input_selector).removeClass('valid').removeClass('invalid');
                formReset.find(input_selector).each(function () {
                    if ($(this).attr('value') === '') {
                        $(this).siblings('label, i').removeClass('active');
                    }
                });

                // Reset select
                formReset.find('select.initialized').each(function () {
                    var reset_text = formReset.find('option[selected]').text();
                    formReset.siblings('input.select-dropdown').val(reset_text);
                });
            }
        });

        // Add active when element has focus
        $(document).on('focus', input_selector, function () {
            $(this).siblings('label, i').addClass('active');
        });

        $(document).on('blur', input_selector, function () {
            var $inputElement = $(this);
            if ($inputElement.val().length === 0 && $inputElement[0].validity.badInput !== true && $inputElement.attr('placeholder') === undefined) {
                $inputElement.siblings('label, i').removeClass('active');
            }
            validate_field($inputElement);
        });

        validate_field = function (object) {
            var hasLength = object.attr('length') !== undefined;
            var lenAttr = parseInt(object.attr('length'));
            var len = object.val().length;

            if (object.val().length === 0 && object[0].validity.badInput === false) {
                if (object.hasClass('validate')) {
                    object.removeClass('valid');
                    object.removeClass('invalid');
                }
            } else {
                if (object.hasClass('validate')) {
                    // Check for character counter attributes
                    if ((object.is(':valid') && hasLength && (len < lenAttr)) || (object.is(':valid') && !hasLength)) {
                        object.removeClass('invalid');
                        object.addClass('valid');
                    } else {
                        object.removeClass('valid');
                        object.addClass('invalid');
                    }
                }
            }
        };


        // Textarea Auto Resize
        var hiddenDiv = $('.hiddendiv').first();
        if (!hiddenDiv.length) {
            hiddenDiv = $('<div class="hiddendiv common"></div>');
            $('body').append(hiddenDiv);
        }
        var text_area_selector = '.materialize-textarea';

        function textareaAutoResize($textarea) {
            // Set font properties of hiddenDiv

            var fontFamily = $textarea.css('font-family');
            var fontSize = $textarea.css('font-size');

            if (fontSize) {
                hiddenDiv.css('font-size', fontSize);
            }
            if (fontFamily) {
                hiddenDiv.css('font-family', fontFamily);
            }

            if ($textarea.attr('wrap') === "off") {
                hiddenDiv.css('overflow-wrap', "normal")
                    .css('white-space', "pre");
            }




            hiddenDiv.text($textarea.val() + '\n');
            var content = hiddenDiv.html().replace(/\n/g, '<br>');
            hiddenDiv.html(content);


            // When textarea is hidden, width goes crazy.
            // Approximate with half of window size

            if ($textarea.is(':visible')) {
                hiddenDiv.css('width', $textarea.width());
            } else {
                hiddenDiv.css('width', $(window).width() / 2);
            }

            $textarea.css('height', hiddenDiv.height());
        }

        $(text_area_selector).each(function () {
            var $textarea = $(this);
            if ($textarea.val().length) {
                textareaAutoResize($textarea);
            }
        });

        $('body').on('keyup keydown', text_area_selector, function () {
            textareaAutoResize($(this));
        });






    }); // End of $(document).ready

}(jQuery));
/* FORMS */

(function ($) {
    $(document).ready(function () {

        // Function to update labels of text fields
        Materialize.updateTextFields = function () {
            var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';
            $(input_selector).each(function (index, element) {
                if ($(element).val().length > 0 || $(this).attr('placeholder') !== undefined || $(element)[0].validity.badInput === true) {
                    $(this).siblings('label, i').addClass('active');
                } else {
                    $(this).siblings('label, i').removeClass('active');
                }
            });
        };

        // Text based inputs
        var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';

        // Handle HTML5 autofocus
        $('input[autofocus]').siblings('label, i').addClass('active');

        // Add active if form auto complete
        $(document).on('change', input_selector, function () {
            if ($(this).val().length !== 0 || $(this).attr('placeholder') !== undefined) {
                $(this).siblings('label, i').addClass('active');
            }
            validate_field($(this));
        });

        // Add active if input element has been pre-populated on document ready
        $(document).ready(function () {
            Materialize.updateTextFields();
        });

        // HTML DOM FORM RESET handling
        $(document).on('reset', function (e) {
            var formReset = $(e.target);
            if (formReset.is('form')) {
                formReset.find(input_selector).removeClass('valid').removeClass('invalid');
                formReset.find(input_selector).each(function () {
                    if ($(this).attr('value') === '') {
                        $(this).siblings('label, i').removeClass('active');
                    }
                });

                // Reset select
                formReset.find('select.initialized').each(function () {
                    var reset_text = formReset.find('option[selected]').text();
                    formReset.siblings('input.select-dropdown').val(reset_text);
                });
            }
        });

        // Add active when element has focus
        $(document).on('focus', input_selector, function () {
            $(this).siblings('label, i').addClass('active');
        });

        $(document).on('blur', input_selector, function () {
            var $inputElement = $(this);
            if ($inputElement.val().length === 0 && $inputElement[0].validity.badInput !== true && $inputElement.attr('placeholder') === undefined) {
                $inputElement.siblings('label, i').removeClass('active');
            }
            validate_field($inputElement);
        });

        validate_field = function (object) {
            var hasLength = object.attr('length') !== undefined;
            var lenAttr = parseInt(object.attr('length'));
            var len = object.val().length;

            if (object.val().length === 0 && object[0].validity.badInput === false) {
                if (object.hasClass('validate')) {
                    object.removeClass('valid');
                    object.removeClass('invalid');
                }
            } else {
                if (object.hasClass('validate')) {
                    // Check for character counter attributes
                    if ((object.is(':valid') && hasLength && (len < lenAttr)) || (object.is(':valid') && !hasLength)) {
                        object.removeClass('invalid');
                        object.addClass('valid');
                    } else {
                        object.removeClass('valid');
                        object.addClass('invalid');
                    }
                }
            }
        };


        // Textarea Auto Resize
        var hiddenDiv = $('.hiddendiv').first();
        if (!hiddenDiv.length) {
            hiddenDiv = $('<div class="hiddendiv common"></div>');
            $('body').append(hiddenDiv);
        }
        var text_area_selector = '.materialize-textarea';

        function textareaAutoResize($textarea) {
            // Set font properties of hiddenDiv

            var fontFamily = $textarea.css('font-family');
            var fontSize = $textarea.css('font-size');

            if (fontSize) {
                hiddenDiv.css('font-size', fontSize);
            }
            if (fontFamily) {
                hiddenDiv.css('font-family', fontFamily);
            }

            if ($textarea.attr('wrap') === "off") {
                hiddenDiv.css('overflow-wrap', "normal")
                    .css('white-space', "pre");
            }




            hiddenDiv.text($textarea.val() + '\n');
            var content = hiddenDiv.html().replace(/\n/g, '<br>');
            hiddenDiv.html(content);


            // When textarea is hidden, width goes crazy.
            // Approximate with half of window size

            if ($textarea.is(':visible')) {
                hiddenDiv.css('width', $textarea.width());
            } else {
                hiddenDiv.css('width', $(window).width() / 2);
            }

            $textarea.css('height', hiddenDiv.height());
        }

        $(text_area_selector).each(function () {
            var $textarea = $(this);
            if ($textarea.val().length) {
                textareaAutoResize($textarea);
            }
        });

        $('body').on('keyup keydown', text_area_selector, function () {
            textareaAutoResize($(this));
        });


        // File Input Path
        $('.file-field').each(function () {
            var path_input = $(this).find('input.file-path');
            $(this).find('input[type="file"]').change(function () {
                path_input.val($(this)[0].files[0].name);
                path_input.trigger('change');
            });
        });



        /****************
         *  Range Input  *
         ****************/

        var range_type = 'input[type=range]';
        var range_mousedown = false;
        var left;

        $(range_type).each(function () {
            var thumb = $('<span class="thumb"><span class="value"></span></span>');
            $(this).after(thumb);
        });

        var range_wrapper = '.range-field';
        $(document).on('change', range_type, function (e) {
            var thumb = $(this).siblings('.thumb');
            thumb.find('.value').html($(this).val());
        });

        $(document).on('input mousedown touchstart', range_type, function (e) {
            var thumb = $(this).siblings('.thumb');

            // If thumb indicator does not exist yet, create it
            if (thumb.length <= 0) {
                thumb = $('<span class="thumb"><span class="value"></span></span>');
                $(this).append(thumb);
            }

            // Set indicator value
            thumb.find('.value').html($(this).val());

            range_mousedown = true;
            $(this).addClass('active');

            if (!thumb.hasClass('active')) {
                thumb.velocity({
                    height: "30px",
                    width: "30px",
                    top: "-20px",
                    marginLeft: "-15px"
                }, {
                    duration: 300,
                    easing: 'easeOutExpo'
                });
            }

            if (e.pageX === undefined || e.pageX === null) { //mobile
                left = e.originalEvent.touches[0].pageX - $(this).offset().left;
            } else { // desktop
                left = e.pageX - $(this).offset().left;
            }
            var width = $(this).outerWidth();

            if (left < 0) {
                left = 0;
            } else if (left > width) {
                left = width;
            }
            thumb.addClass('active').css('left', left);
            thumb.find('.value').html($(this).val());


        });

        $(document).on('mouseup touchend', range_wrapper, function () {
            range_mousedown = false;
            $(this).removeClass('active');
        });

        $(document).on('mousemove touchmove', range_wrapper, function (e) {
            var thumb = $(this).children('.thumb');
            var left;
            if (range_mousedown) {
                if (!thumb.hasClass('active')) {
                    thumb.velocity({
                        height: '30px',
                        width: '30px',
                        top: '-20px',
                        marginLeft: '-15px'
                    }, {
                        duration: 300,
                        easing: 'easeOutExpo'
                    });
                }
                if (e.pageX === undefined || e.pageX === null) { //mobile
                    left = e.originalEvent.touches[0].pageX - $(this).offset().left;
                } else { // desktop
                    left = e.pageX - $(this).offset().left;
                }
                var width = $(this).outerWidth();

                if (left < 0) {
                    left = 0;
                } else if (left > width) {
                    left = width;
                }
                thumb.addClass('active').css('left', left);
                thumb.find('.value').html(thumb.siblings(range_type).val());
            }
        });

        $(document).on('mouseout touchleave', range_wrapper, function () {
            if (!range_mousedown) {

                var thumb = $(this).children('.thumb');

                if (thumb.hasClass('active')) {
                    thumb.velocity({
                        height: '0',
                        width: '0',
                        top: '10px',
                        marginLeft: '-6px'
                    }, {
                        duration: 100
                    });
                }
                thumb.removeClass('active');
            }
        });

    }); // End of $(document).ready




    // Select Plugin
    $.fn.material_select = function (callback) {
        $(this).each(function () {
            $select = $(this);

            if ($select.hasClass('browser-default')) {
                return; // Continue to next (return false breaks out of entire loop)
            }

            // Tear down structure if Select needs to be rebuilt
            var lastID = $select.data('select-id');
            if (lastID) {
                $select.parent().find('i').remove();
                $select.parent().find('input').remove();

                $select.unwrap();
                $('ul#select-options-' + lastID).remove();
            }

            // If destroying the select, remove the selelct-id and reset it to it's uninitialized state.
            if (callback === 'destroy') {
                $select.data('select-id', null).removeClass('initialized');
                return;
            }

            var uniqueID = Materialize.guid();
            $select.data('select-id', uniqueID);
            var wrapper = $('<div class="select-wrapper"></div>');
            wrapper.addClass($select.attr('class'));
            var options = $('<ul id="select-options-' + uniqueID + '" class="dropdown-content select-dropdown"></ul>');
            var selectOptions = $select.children('option');

            var label;
            if ($select.find('option:selected') !== undefined) {
                label = $select.find('option:selected');
            } else {
                label = options.first();
            }


            // Create Dropdown structure
            selectOptions.each(function () {
                // Add disabled attr if disabled
                options.append($('<li class="' + (($(this).is(':disabled')) ? 'disabled' : '') + '"><span>' + $(this).html() + '</span></li>'));
            });


            options.find('li').each(function (i) {
                var $curr_select = $select;
                $(this).click(function () {
                    // Check if option element is disabled
                    if (!$(this).hasClass('disabled')) {
                        $curr_select.find('option').eq(i).prop('selected', true);
                        // Trigger onchange() event
                        $curr_select.trigger('change');
                        $curr_select.siblings('input.select-dropdown').val($(this).text());
                        if (typeof callback !== 'undefined') callback();
                    }
                });

            });

            // Wrap Elements
            $select.wrap(wrapper);
            // Add Select Display Element
            var dropdownIcon = $('<span class="caret">&#9660;</span>');
            if ($select.is(':disabled'))
                dropdownIcon.addClass('disabled');

            var $newSelect = $('<input type="text" class="select-dropdown" readonly="true" ' + (($select.is(':disabled')) ? 'disabled' : '') + ' data-activates="select-options-' + uniqueID + '" value="' + label.html() + '"/>');
            $select.before($newSelect);
            $newSelect.before(dropdownIcon);

            $('body').append(options);
            // Check if section element is disabled
            if (!$select.is(':disabled')) {
                $newSelect.dropdown({
                    "hover": false
                });
            }

            // Copy tabindex
            if ($select.attr('tabindex')) {
                $($newSelect[0]).attr('tabindex', $select.attr('tabindex'));
            }

            $select.addClass('initialized');

            $newSelect.on('focus', function () {
                $(this).trigger('open');
                label = $(this).val();
                selectedOption = options.find('li').filter(function () {
                    return $(this).text().toLowerCase() === label.toLowerCase();
                })[0];
                activateOption(options, selectedOption);
            });

            $newSelect.on('blur', function () {
                $(this).trigger('close');
            });

            // Make option as selected and scroll to selected position
            activateOption = function (collection, newOption) {
                collection.find('li.active').removeClass('active');
                $(newOption).addClass('active');
                collection.scrollTo(newOption);
            };

            // Allow user to search by typing
            // this array is cleared after 1 second
            filterQuery = [];

            onKeyDown = function (event) {
                // TAB - switch to another input
                if (event.which == 9) {
                    $newSelect.trigger('close');
                    return;
                }

                // ARROW DOWN WHEN SELECT IS CLOSED - open select options
                if (event.which == 40 && !options.is(":visible")) {
                    $newSelect.trigger('open');
                    return;
                }

                // ENTER WHEN SELECT IS CLOSED - submit form
                if (event.which == 13 && !options.is(":visible")) {
                    return;
                }

                event.preventDefault();

                // CASE WHEN USER TYPE LETTERS
                letter = String.fromCharCode(event.which).toLowerCase();
                var nonLetters = [9, 13, 27, 38, 40];
                if (letter && (nonLetters.indexOf(event.which) === -1)) {
                    filterQuery.push(letter);

                    string = filterQuery.join("");

                    newOption = options.find('li').filter(function () {
                        return $(this).text().toLowerCase().indexOf(string) === 0;
                    })[0];

                    if (newOption) {
                        activateOption(options, newOption);
                    }
                }

                // ENTER - select option and close when select options are opened
                if (event.which == 13) {
                    activeOption = options.find('li.active:not(.disabled)')[0];
                    if (activeOption) {
                        $(activeOption).trigger('click');
                        $newSelect.trigger('close');
                    }
                }

                // ARROW DOWN - move to next not disabled option
                if (event.which == 40) {
                    newOption = options.find('li.active').next('li:not(.disabled)')[0];
                    if (newOption) {
                        activateOption(options, newOption);
                    }
                }

                // ESC - close options
                if (event.which == 27) {
                    $newSelect.trigger('close');
                }

                // ARROW UP - move to previous not disabled option
                if (event.which == 38) {
                    newOption = options.find('li.active').prev('li:not(.disabled)')[0];
                    if (newOption) {
                        activateOption(options, newOption);
                    }
                }

                // Automaticaly clean filter query so user can search again by starting letters
                setTimeout(function () {
                    filterQuery = [];
                }, 1000);
            };

            $newSelect.on('keydown', onKeyDown);
        });
    };

}(jQuery));
/* GLOBAL */

Materialize = {};

// Unique ID
Materialize.guid = (function () {
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }
    return function () {
        return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
            s4() + '-' + s4() + s4() + s4();
    };
})();

Materialize.elementOrParentIsFixed = function (element) {
    var $element = $(element);
    var $checkElements = $element.add($element.parents());
    var isFixed = false;
    $checkElements.each(function () {
        if ($(this).css("position") === "fixed") {
            isFixed = true;
            return false;
        }
    });
    return isFixed;
};

// Velocity has conflicts when loaded with jQuery, this will check for it
var Vel;
if ($) {
    Vel = $.Velocity;
} else {
    Vel = Velocity;
}
! function (a, b, c, d) {
    "use strict";

    function k(a, b, c) {
        return setTimeout(q(a, c), b)
    }

    function l(a, b, c) {
        return Array.isArray(a) ? (m(a, c[b], c), !0) : !1
    }

    function m(a, b, c) {
        var e;
        if (a)
            if (a.forEach) a.forEach(b, c);
            else if (a.length !== d)
            for (e = 0; e < a.length;) b.call(c, a[e], e, a), e++;
        else
            for (e in a) a.hasOwnProperty(e) && b.call(c, a[e], e, a)
    }

    function n(a, b, c) {
        for (var e = Object.keys(b), f = 0; f < e.length;)(!c || c && a[e[f]] === d) && (a[e[f]] = b[e[f]]), f++;
        return a
    }

    function o(a, b) {
        return n(a, b, !0)
    }

    function p(a, b, c) {
        var e, d = b.prototype;
        e = a.prototype = Object.create(d), e.constructor = a, e._super = d, c && n(e, c)
    }

    function q(a, b) {
        return function () {
            return a.apply(b, arguments)
        }
    }

    function r(a, b) {
        return typeof a == g ? a.apply(b ? b[0] || d : d, b) : a
    }

    function s(a, b) {
        return a === d ? b : a
    }

    function t(a, b, c) {
        m(x(b), function (b) {
            a.addEventListener(b, c, !1)
        })
    }

    function u(a, b, c) {
        m(x(b), function (b) {
            a.removeEventListener(b, c, !1)
        })
    }

    function v(a, b) {
        for (; a;) {
            if (a == b) return !0;
            a = a.parentNode
        }
        return !1
    }

    function w(a, b) {
        return a.indexOf(b) > -1
    }

    function x(a) {
        return a.trim().split(/\s+/g)
    }

    function y(a, b, c) {
        if (a.indexOf && !c) return a.indexOf(b);
        for (var d = 0; d < a.length;) {
            if (c && a[d][c] == b || !c && a[d] === b) return d;
            d++
        }
        return -1
    }

    function z(a) {
        return Array.prototype.slice.call(a, 0)
    }

    function A(a, b, c) {
        for (var d = [], e = [], f = 0; f < a.length;) {
            var g = b ? a[f][b] : a[f];
            y(e, g) < 0 && d.push(a[f]), e[f] = g, f++
        }
        return c && (d = b ? d.sort(function (a, c) {
            return a[b] > c[b]
        }) : d.sort()), d
    }

    function B(a, b) {
        for (var c, f, g = b[0].toUpperCase() + b.slice(1), h = 0; h < e.length;) {
            if (c = e[h], f = c ? c + g : b, f in a) return f;
            h++
        }
        return d
    }

    function D() {
        return C++
    }

    function E(a) {
        var b = a.ownerDocument;
        return b.defaultView || b.parentWindow
    }

    function ab(a, b) {
        var c = this;
        this.manager = a, this.callback = b, this.element = a.element, this.target = a.options.inputTarget, this.domHandler = function (b) {
            r(a.options.enable, [a]) && c.handler(b)
        }, this.init()
    }

    function bb(a) {
        var b, c = a.options.inputClass;
        return b = c ? c : H ? wb : I ? Eb : G ? Gb : rb, new b(a, cb)
    }

    function cb(a, b, c) {
        var d = c.pointers.length,
            e = c.changedPointers.length,
            f = b & O && 0 === d - e,
            g = b & (Q | R) && 0 === d - e;
        c.isFirst = !!f, c.isFinal = !!g, f && (a.session = {}), c.eventType = b, db(a, c), a.emit("hammer.input", c), a.recognize(c), a.session.prevInput = c
    }

    function db(a, b) {
        var c = a.session,
            d = b.pointers,
            e = d.length;
        c.firstInput || (c.firstInput = gb(b)), e > 1 && !c.firstMultiple ? c.firstMultiple = gb(b) : 1 === e && (c.firstMultiple = !1);
        var f = c.firstInput,
            g = c.firstMultiple,
            h = g ? g.center : f.center,
            i = b.center = hb(d);
        b.timeStamp = j(), b.deltaTime = b.timeStamp - f.timeStamp, b.angle = lb(h, i), b.distance = kb(h, i), eb(c, b), b.offsetDirection = jb(b.deltaX, b.deltaY), b.scale = g ? nb(g.pointers, d) : 1, b.rotation = g ? mb(g.pointers, d) : 0, fb(c, b);
        var k = a.element;
        v(b.srcEvent.target, k) && (k = b.srcEvent.target), b.target = k
    }

    function eb(a, b) {
        var c = b.center,
            d = a.offsetDelta || {},
            e = a.prevDelta || {},
            f = a.prevInput || {};
        (b.eventType === O || f.eventType === Q) && (e = a.prevDelta = {
            x: f.deltaX || 0,
            y: f.deltaY || 0
        }, d = a.offsetDelta = {
            x: c.x,
            y: c.y
        }), b.deltaX = e.x + (c.x - d.x), b.deltaY = e.y + (c.y - d.y)
    }

    function fb(a, b) {
        var f, g, h, j, c = a.lastInterval || b,
            e = b.timeStamp - c.timeStamp;
        if (b.eventType != R && (e > N || c.velocity === d)) {
            var k = c.deltaX - b.deltaX,
                l = c.deltaY - b.deltaY,
                m = ib(e, k, l);
            g = m.x, h = m.y, f = i(m.x) > i(m.y) ? m.x : m.y, j = jb(k, l), a.lastInterval = b
        } else f = c.velocity, g = c.velocityX, h = c.velocityY, j = c.direction;
        b.velocity = f, b.velocityX = g, b.velocityY = h, b.direction = j
    }

    function gb(a) {
        for (var b = [], c = 0; c < a.pointers.length;) b[c] = {
            clientX: h(a.pointers[c].clientX),
            clientY: h(a.pointers[c].clientY)
        }, c++;
        return {
            timeStamp: j(),
            pointers: b,
            center: hb(b),
            deltaX: a.deltaX,
            deltaY: a.deltaY
        }
    }

    function hb(a) {
        var b = a.length;
        if (1 === b) return {
            x: h(a[0].clientX),
            y: h(a[0].clientY)
        };
        for (var c = 0, d = 0, e = 0; b > e;) c += a[e].clientX, d += a[e].clientY, e++;
        return {
            x: h(c / b),
            y: h(d / b)
        }
    }

    function ib(a, b, c) {
        return {
            x: b / a || 0,
            y: c / a || 0
        }
    }

    function jb(a, b) {
        return a === b ? S : i(a) >= i(b) ? a > 0 ? T : U : b > 0 ? V : W
    }

    function kb(a, b, c) {
        c || (c = $);
        var d = b[c[0]] - a[c[0]],
            e = b[c[1]] - a[c[1]];
        return Math.sqrt(d * d + e * e)
    }

    function lb(a, b, c) {
        c || (c = $);
        var d = b[c[0]] - a[c[0]],
            e = b[c[1]] - a[c[1]];
        return 180 * Math.atan2(e, d) / Math.PI
    }

    function mb(a, b) {
        return lb(b[1], b[0], _) - lb(a[1], a[0], _)
    }

    function nb(a, b) {
        return kb(b[0], b[1], _) / kb(a[0], a[1], _)
    }

    function rb() {
        this.evEl = pb, this.evWin = qb, this.allow = !0, this.pressed = !1, ab.apply(this, arguments)
    }

    function wb() {
        this.evEl = ub, this.evWin = vb, ab.apply(this, arguments), this.store = this.manager.session.pointerEvents = []
    }

    function Ab() {
        this.evTarget = yb, this.evWin = zb, this.started = !1, ab.apply(this, arguments)
    }

    function Bb(a, b) {
        var c = z(a.touches),
            d = z(a.changedTouches);
        return b & (Q | R) && (c = A(c.concat(d), "identifier", !0)), [c, d]
    }

    function Eb() {
        this.evTarget = Db, this.targetIds = {}, ab.apply(this, arguments)
    }

    function Fb(a, b) {
        var c = z(a.touches),
            d = this.targetIds;
        if (b & (O | P) && 1 === c.length) return d[c[0].identifier] = !0, [c, c];
        var e, f, g = z(a.changedTouches),
            h = [],
            i = this.target;
        if (f = c.filter(function (a) {
                return v(a.target, i)
            }), b === O)
            for (e = 0; e < f.length;) d[f[e].identifier] = !0, e++;
        for (e = 0; e < g.length;) d[g[e].identifier] && h.push(g[e]), b & (Q | R) && delete d[g[e].identifier], e++;
        return h.length ? [A(f.concat(h), "identifier", !0), h] : void 0
    }

    function Gb() {
        ab.apply(this, arguments);
        var a = q(this.handler, this);
        this.touch = new Eb(this.manager, a), this.mouse = new rb(this.manager, a)
    }

    function Pb(a, b) {
        this.manager = a, this.set(b)
    }

    function Qb(a) {
        if (w(a, Mb)) return Mb;
        var b = w(a, Nb),
            c = w(a, Ob);
        return b && c ? Nb + " " + Ob : b || c ? b ? Nb : Ob : w(a, Lb) ? Lb : Kb
    }

    function Yb(a) {
        this.id = D(), this.manager = null, this.options = o(a || {}, this.defaults), this.options.enable = s(this.options.enable, !0), this.state = Rb, this.simultaneous = {}, this.requireFail = []
    }

    function Zb(a) {
        return a & Wb ? "cancel" : a & Ub ? "end" : a & Tb ? "move" : a & Sb ? "start" : ""
    }

    function $b(a) {
        return a == W ? "down" : a == V ? "up" : a == T ? "left" : a == U ? "right" : ""
    }

    function _b(a, b) {
        var c = b.manager;
        return c ? c.get(a) : a
    }

    function ac() {
        Yb.apply(this, arguments)
    }

    function bc() {
        ac.apply(this, arguments), this.pX = null, this.pY = null
    }

    function cc() {
        ac.apply(this, arguments)
    }

    function dc() {
        Yb.apply(this, arguments), this._timer = null, this._input = null
    }

    function ec() {
        ac.apply(this, arguments)
    }

    function fc() {
        ac.apply(this, arguments)
    }

    function gc() {
        Yb.apply(this, arguments), this.pTime = !1, this.pCenter = !1, this._timer = null, this._input = null, this.count = 0
    }

    function hc(a, b) {
        return b = b || {}, b.recognizers = s(b.recognizers, hc.defaults.preset), new kc(a, b)
    }

    function kc(a, b) {
        b = b || {}, this.options = o(b, hc.defaults), this.options.inputTarget = this.options.inputTarget || a, this.handlers = {}, this.session = {}, this.recognizers = [], this.element = a, this.input = bb(this), this.touchAction = new Pb(this, this.options.touchAction), lc(this, !0), m(b.recognizers, function (a) {
            var b = this.add(new a[0](a[1]));
            a[2] && b.recognizeWith(a[2]), a[3] && b.requireFailure(a[3])
        }, this)
    }

    function lc(a, b) {
        var c = a.element;
        m(a.options.cssProps, function (a, d) {
            c.style[B(c.style, d)] = b ? a : ""
        })
    }

    function mc(a, c) {
        var d = b.createEvent("Event");
        d.initEvent(a, !0, !0), d.gesture = c, c.target.dispatchEvent(d)
    }
    var e = ["", "webkit", "moz", "MS", "ms", "o"],
        f = b.createElement("div"),
        g = "function",
        h = Math.round,
        i = Math.abs,
        j = Date.now,
        C = 1,
        F = /mobile|tablet|ip(ad|hone|od)|android/i,
        G = "ontouchstart" in a,
        H = B(a, "PointerEvent") !== d,
        I = G && F.test(navigator.userAgent),
        J = "touch",
        K = "pen",
        L = "mouse",
        M = "kinect",
        N = 25,
        O = 1,
        P = 2,
        Q = 4,
        R = 8,
        S = 1,
        T = 2,
        U = 4,
        V = 8,
        W = 16,
        X = T | U,
        Y = V | W,
        Z = X | Y,
        $ = ["x", "y"],
        _ = ["clientX", "clientY"];
    ab.prototype = {
        handler: function () {},
        init: function () {
            this.evEl && t(this.element, this.evEl, this.domHandler), this.evTarget && t(this.target, this.evTarget, this.domHandler), this.evWin && t(E(this.element), this.evWin, this.domHandler)
        },
        destroy: function () {
            this.evEl && u(this.element, this.evEl, this.domHandler), this.evTarget && u(this.target, this.evTarget, this.domHandler), this.evWin && u(E(this.element), this.evWin, this.domHandler)
        }
    };
    var ob = {
            mousedown: O,
            mousemove: P,
            mouseup: Q
        },
        pb = "mousedown",
        qb = "mousemove mouseup";
    p(rb, ab, {
        handler: function (a) {
            var b = ob[a.type];
            b & O && 0 === a.button && (this.pressed = !0), b & P && 1 !== a.which && (b = Q), this.pressed && this.allow && (b & Q && (this.pressed = !1), this.callback(this.manager, b, {
                pointers: [a],
                changedPointers: [a],
                pointerType: L,
                srcEvent: a
            }))
        }
    });
    var sb = {
            pointerdown: O,
            pointermove: P,
            pointerup: Q,
            pointercancel: R,
            pointerout: R
        },
        tb = {
            2: J,
            3: K,
            4: L,
            5: M
        },
        ub = "pointerdown",
        vb = "pointermove pointerup pointercancel";
    a.MSPointerEvent && (ub = "MSPointerDown", vb = "MSPointerMove MSPointerUp MSPointerCancel"), p(wb, ab, {
        handler: function (a) {
            var b = this.store,
                c = !1,
                d = a.type.toLowerCase().replace("ms", ""),
                e = sb[d],
                f = tb[a.pointerType] || a.pointerType,
                g = f == J,
                h = y(b, a.pointerId, "pointerId");
            e & O && (0 === a.button || g) ? 0 > h && (b.push(a), h = b.length - 1) : e & (Q | R) && (c = !0), 0 > h || (b[h] = a, this.callback(this.manager, e, {
                pointers: b,
                changedPointers: [a],
                pointerType: f,
                srcEvent: a
            }), c && b.splice(h, 1))
        }
    });
    var xb = {
            touchstart: O,
            touchmove: P,
            touchend: Q,
            touchcancel: R
        },
        yb = "touchstart",
        zb = "touchstart touchmove touchend touchcancel";
    p(Ab, ab, {
        handler: function (a) {
            var b = xb[a.type];
            if (b === O && (this.started = !0), this.started) {
                var c = Bb.call(this, a, b);
                b & (Q | R) && 0 === c[0].length - c[1].length && (this.started = !1), this.callback(this.manager, b, {
                    pointers: c[0],
                    changedPointers: c[1],
                    pointerType: J,
                    srcEvent: a
                })
            }
        }
    });
    var Cb = {
            touchstart: O,
            touchmove: P,
            touchend: Q,
            touchcancel: R
        },
        Db = "touchstart touchmove touchend touchcancel";
    p(Eb, ab, {
        handler: function (a) {
            var b = Cb[a.type],
                c = Fb.call(this, a, b);
            c && this.callback(this.manager, b, {
                pointers: c[0],
                changedPointers: c[1],
                pointerType: J,
                srcEvent: a
            })
        }
    }), p(Gb, ab, {
        handler: function (a, b, c) {
            var d = c.pointerType == J,
                e = c.pointerType == L;
            if (d) this.mouse.allow = !1;
            else if (e && !this.mouse.allow) return;
            b & (Q | R) && (this.mouse.allow = !0), this.callback(a, b, c)
        },
        destroy: function () {
            this.touch.destroy(), this.mouse.destroy()
        }
    });
    var Hb = B(f.style, "touchAction"),
        Ib = Hb !== d,
        Jb = "compute",
        Kb = "auto",
        Lb = "manipulation",
        Mb = "none",
        Nb = "pan-x",
        Ob = "pan-y";
    Pb.prototype = {
        set: function (a) {
            a == Jb && (a = this.compute()), Ib && (this.manager.element.style[Hb] = a), this.actions = a.toLowerCase().trim()
        },
        update: function () {
            this.set(this.manager.options.touchAction)
        },
        compute: function () {
            var a = [];
            return m(this.manager.recognizers, function (b) {
                r(b.options.enable, [b]) && (a = a.concat(b.getTouchAction()))
            }), Qb(a.join(" "))
        },
        preventDefaults: function (a) {
            if (!Ib) {
                var b = a.srcEvent,
                    c = a.offsetDirection;
                if (this.manager.session.prevented) return b.preventDefault(), void 0;
                var d = this.actions,
                    e = w(d, Mb),
                    f = w(d, Ob),
                    g = w(d, Nb);
                return e || f && c & X || g && c & Y ? this.preventSrc(b) : void 0
            }
        },
        preventSrc: function (a) {
            this.manager.session.prevented = !0, a.preventDefault()
        }
    };
    var Rb = 1,
        Sb = 2,
        Tb = 4,
        Ub = 8,
        Vb = Ub,
        Wb = 16,
        Xb = 32;
    Yb.prototype = {
        defaults: {},
        set: function (a) {
            return n(this.options, a), this.manager && this.manager.touchAction.update(), this
        },
        recognizeWith: function (a) {
            if (l(a, "recognizeWith", this)) return this;
            var b = this.simultaneous;
            return a = _b(a, this), b[a.id] || (b[a.id] = a, a.recognizeWith(this)), this
        },
        dropRecognizeWith: function (a) {
            return l(a, "dropRecognizeWith", this) ? this : (a = _b(a, this), delete this.simultaneous[a.id], this)
        },
        requireFailure: function (a) {
            if (l(a, "requireFailure", this)) return this;
            var b = this.requireFail;
            return a = _b(a, this), -1 === y(b, a) && (b.push(a), a.requireFailure(this)), this
        },
        dropRequireFailure: function (a) {
            if (l(a, "dropRequireFailure", this)) return this;
            a = _b(a, this);
            var b = y(this.requireFail, a);
            return b > -1 && this.requireFail.splice(b, 1), this
        },
        hasRequireFailures: function () {
            return this.requireFail.length > 0
        },
        canRecognizeWith: function (a) {
            return !!this.simultaneous[a.id]
        },
        emit: function (a) {
            function d(d) {
                b.manager.emit(b.options.event + (d ? Zb(c) : ""), a)
            }
            var b = this,
                c = this.state;
            Ub > c && d(!0), d(), c >= Ub && d(!0)
        },
        tryEmit: function (a) {
            return this.canEmit() ? this.emit(a) : (this.state = Xb, void 0)
        },
        canEmit: function () {
            for (var a = 0; a < this.requireFail.length;) {
                if (!(this.requireFail[a].state & (Xb | Rb))) return !1;
                a++
            }
            return !0
        },
        recognize: function (a) {
            var b = n({}, a);
            return r(this.options.enable, [this, b]) ? (this.state & (Vb | Wb | Xb) && (this.state = Rb), this.state = this.process(b), this.state & (Sb | Tb | Ub | Wb) && this.tryEmit(b), void 0) : (this.reset(), this.state = Xb, void 0)
        },
        process: function () {},
        getTouchAction: function () {},
        reset: function () {}
    }, p(ac, Yb, {
        defaults: {
            pointers: 1
        },
        attrTest: function (a) {
            var b = this.options.pointers;
            return 0 === b || a.pointers.length === b
        },
        process: function (a) {
            var b = this.state,
                c = a.eventType,
                d = b & (Sb | Tb),
                e = this.attrTest(a);
            return d && (c & R || !e) ? b | Wb : d || e ? c & Q ? b | Ub : b & Sb ? b | Tb : Sb : Xb
        }
    }), p(bc, ac, {
        defaults: {
            event: "pan",
            threshold: 10,
            pointers: 1,
            direction: Z
        },
        getTouchAction: function () {
            var a = this.options.direction,
                b = [];
            return a & X && b.push(Ob), a & Y && b.push(Nb), b
        },
        directionTest: function (a) {
            var b = this.options,
                c = !0,
                d = a.distance,
                e = a.direction,
                f = a.deltaX,
                g = a.deltaY;
            return e & b.direction || (b.direction & X ? (e = 0 === f ? S : 0 > f ? T : U, c = f != this.pX, d = Math.abs(a.deltaX)) : (e = 0 === g ? S : 0 > g ? V : W, c = g != this.pY, d = Math.abs(a.deltaY))), a.direction = e, c && d > b.threshold && e & b.direction
        },
        attrTest: function (a) {
            return ac.prototype.attrTest.call(this, a) && (this.state & Sb || !(this.state & Sb) && this.directionTest(a))
        },
        emit: function (a) {
            this.pX = a.deltaX, this.pY = a.deltaY;
            var b = $b(a.direction);
            b && this.manager.emit(this.options.event + b, a), this._super.emit.call(this, a)
        }
    }), p(cc, ac, {
        defaults: {
            event: "pinch",
            threshold: 0,
            pointers: 2
        },
        getTouchAction: function () {
            return [Mb]
        },
        attrTest: function (a) {
            return this._super.attrTest.call(this, a) && (Math.abs(a.scale - 1) > this.options.threshold || this.state & Sb)
        },
        emit: function (a) {
            if (this._super.emit.call(this, a), 1 !== a.scale) {
                var b = a.scale < 1 ? "in" : "out";
                this.manager.emit(this.options.event + b, a)
            }
        }
    }), p(dc, Yb, {
        defaults: {
            event: "press",
            pointers: 1,
            time: 500,
            threshold: 5
        },
        getTouchAction: function () {
            return [Kb]
        },
        process: function (a) {
            var b = this.options,
                c = a.pointers.length === b.pointers,
                d = a.distance < b.threshold,
                e = a.deltaTime > b.time;
            if (this._input = a, !d || !c || a.eventType & (Q | R) && !e) this.reset();
            else if (a.eventType & O) this.reset(), this._timer = k(function () {
                this.state = Vb, this.tryEmit()
            }, b.time, this);
            else if (a.eventType & Q) return Vb;
            return Xb
        },
        reset: function () {
            clearTimeout(this._timer)
        },
        emit: function (a) {
            this.state === Vb && (a && a.eventType & Q ? this.manager.emit(this.options.event + "up", a) : (this._input.timeStamp = j(), this.manager.emit(this.options.event, this._input)))
        }
    }), p(ec, ac, {
        defaults: {
            event: "rotate",
            threshold: 0,
            pointers: 2
        },
        getTouchAction: function () {
            return [Mb]
        },
        attrTest: function (a) {
            return this._super.attrTest.call(this, a) && (Math.abs(a.rotation) > this.options.threshold || this.state & Sb)
        }
    }), p(fc, ac, {
        defaults: {
            event: "swipe",
            threshold: 10,
            velocity: .65,
            direction: X | Y,
            pointers: 1
        },
        getTouchAction: function () {
            return bc.prototype.getTouchAction.call(this)
        },
        attrTest: function (a) {
            var c, b = this.options.direction;
            return b & (X | Y) ? c = a.velocity : b & X ? c = a.velocityX : b & Y && (c = a.velocityY), this._super.attrTest.call(this, a) && b & a.direction && a.distance > this.options.threshold && i(c) > this.options.velocity && a.eventType & Q
        },
        emit: function (a) {
            var b = $b(a.direction);
            b && this.manager.emit(this.options.event + b, a), this.manager.emit(this.options.event, a)
        }
    }), p(gc, Yb, {
        defaults: {
            event: "tap",
            pointers: 1,
            taps: 1,
            interval: 300,
            time: 250,
            threshold: 2,
            posThreshold: 10
        },
        getTouchAction: function () {
            return [Lb]
        },
        process: function (a) {
            var b = this.options,
                c = a.pointers.length === b.pointers,
                d = a.distance < b.threshold,
                e = a.deltaTime < b.time;
            if (this.reset(), a.eventType & O && 0 === this.count) return this.failTimeout();
            if (d && e && c) {
                if (a.eventType != Q) return this.failTimeout();
                var f = this.pTime ? a.timeStamp - this.pTime < b.interval : !0,
                    g = !this.pCenter || kb(this.pCenter, a.center) < b.posThreshold;
                this.pTime = a.timeStamp, this.pCenter = a.center, g && f ? this.count += 1 : this.count = 1, this._input = a;
                var h = this.count % b.taps;
                if (0 === h) return this.hasRequireFailures() ? (this._timer = k(function () {
                    this.state = Vb, this.tryEmit()
                }, b.interval, this), Sb) : Vb
            }
            return Xb
        },
        failTimeout: function () {
            return this._timer = k(function () {
                this.state = Xb
            }, this.options.interval, this), Xb
        },
        reset: function () {
            clearTimeout(this._timer)
        },
        emit: function () {
            this.state == Vb && (this._input.tapCount = this.count, this.manager.emit(this.options.event, this._input))
        }
    }), hc.VERSION = "2.0.4", hc.defaults = {
        domEvents: !1,
        touchAction: Jb,
        enable: !0,
        inputTarget: null,
        inputClass: null,
        preset: [[ec, {
            enable: !1
        }], [cc, {
            enable: !1
        }, ["rotate"]], [fc, {
            direction: X
        }], [bc, {
            direction: X
        }, ["swipe"]], [gc], [gc, {
            event: "doubletap",
            taps: 2
        }, ["tap"]], [dc]],
        cssProps: {
            userSelect: "default",
            touchSelect: "none",
            touchCallout: "none",
            contentZooming: "none",
            userDrag: "none",
            tapHighlightColor: "rgba(0,0,0,0)"
        }
    };
    var ic = 1,
        jc = 2;
    kc.prototype = {
        set: function (a) {
            return n(this.options, a), a.touchAction && this.touchAction.update(), a.inputTarget && (this.input.destroy(), this.input.target = a.inputTarget, this.input.init()), this
        },
        stop: function (a) {
            this.session.stopped = a ? jc : ic
        },
        recognize: function (a) {
            var b = this.session;
            if (!b.stopped) {
                this.touchAction.preventDefaults(a);
                var c, d = this.recognizers,
                    e = b.curRecognizer;
                (!e || e && e.state & Vb) && (e = b.curRecognizer = null);
                for (var f = 0; f < d.length;) c = d[f], b.stopped === jc || e && c != e && !c.canRecognizeWith(e) ? c.reset() : c.recognize(a), !e && c.state & (Sb | Tb | Ub) && (e = b.curRecognizer = c), f++
            }
        },
        get: function (a) {
            if (a instanceof Yb) return a;
            for (var b = this.recognizers, c = 0; c < b.length; c++)
                if (b[c].options.event == a) return b[c];
            return null
        },
        add: function (a) {
            if (l(a, "add", this)) return this;
            var b = this.get(a.options.event);
            return b && this.remove(b), this.recognizers.push(a), a.manager = this, this.touchAction.update(), a
        },
        remove: function (a) {
            if (l(a, "remove", this)) return this;
            var b = this.recognizers;
            return a = this.get(a), b.splice(y(b, a), 1), this.touchAction.update(), this
        },
        on: function (a, b) {
            var c = this.handlers;
            return m(x(a), function (a) {
                c[a] = c[a] || [], c[a].push(b)
            }), this
        },
        off: function (a, b) {
            var c = this.handlers;
            return m(x(a), function (a) {
                b ? c[a].splice(y(c[a], b), 1) : delete c[a]
            }), this
        },
        emit: function (a, b) {
            this.options.domEvents && mc(a, b);
            var c = this.handlers[a] && this.handlers[a].slice();
            if (c && c.length) {
                b.type = a, b.preventDefault = function () {
                    b.srcEvent.preventDefault()
                };
                for (var d = 0; d < c.length;) c[d](b), d++
            }
        },
        destroy: function () {
            this.element && lc(this, !1), this.handlers = {}, this.session = {}, this.input.destroy(), this.element = null
        }
    }, n(hc, {
        INPUT_START: O,
        INPUT_MOVE: P,
        INPUT_END: Q,
        INPUT_CANCEL: R,
        STATE_POSSIBLE: Rb,
        STATE_BEGAN: Sb,
        STATE_CHANGED: Tb,
        STATE_ENDED: Ub,
        STATE_RECOGNIZED: Vb,
        STATE_CANCELLED: Wb,
        STATE_FAILED: Xb,
        DIRECTION_NONE: S,
        DIRECTION_LEFT: T,
        DIRECTION_RIGHT: U,
        DIRECTION_UP: V,
        DIRECTION_DOWN: W,
        DIRECTION_HORIZONTAL: X,
        DIRECTION_VERTICAL: Y,
        DIRECTION_ALL: Z,
        Manager: kc,
        Input: ab,
        TouchAction: Pb,
        TouchInput: Eb,
        MouseInput: rb,
        PointerEventInput: wb,
        TouchMouseInput: Gb,
        SingleTouchInput: Ab,
        Recognizer: Yb,
        AttrRecognizer: ac,
        Tap: gc,
        Pan: bc,
        Swipe: fc,
        Pinch: cc,
        Rotate: ec,
        Press: dc,
        on: t,
        off: u,
        each: m,
        merge: o,
        extend: n,
        inherit: p,
        bindFn: q,
        prefixed: B
    }), typeof define == g && define.amd ? define(function () {
        return hc
    }) : "undefined" != typeof module && module.exports ? module.exports = hc : a[c] = hc
}(window, document, "Hammer");
/* JQUERY EASING 1.3 */

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright  2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing['jswing'] = jQuery.easing['swing'];

jQuery.extend(jQuery.easing, {
    def: 'easeOutQuad',
    swing: function (x, t, b, c, d) {
        //alert(jQuery.easing.default);
        return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
    },
    easeInQuad: function (x, t, b, c, d) {
        return c * (t /= d) * t + b;
    },
    easeOutQuad: function (x, t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
    },
    easeInOutQuad: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return -c / 2 * ((--t) * (t - 2) - 1) + b;
    },
    easeInCubic: function (x, t, b, c, d) {
        return c * (t /= d) * t * t + b;
    },
    easeOutCubic: function (x, t, b, c, d) {
        return c * ((t = t / d - 1) * t * t + 1) + b;
    },
    easeInOutCubic: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t + 2) + b;
    },
    easeInQuart: function (x, t, b, c, d) {
        return c * (t /= d) * t * t * t + b;
    },
    easeOutQuart: function (x, t, b, c, d) {
        return -c * ((t = t / d - 1) * t * t * t - 1) + b;
    },
    easeInOutQuart: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    },
    easeInQuint: function (x, t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b;
    },
    easeOutQuint: function (x, t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
    },
    easeInOutQuint: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    },
    easeInSine: function (x, t, b, c, d) {
        return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
    },
    easeOutSine: function (x, t, b, c, d) {
        return c * Math.sin(t / d * (Math.PI / 2)) + b;
    },
    easeInOutSine: function (x, t, b, c, d) {
        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
    },
    easeInExpo: function (x, t, b, c, d) {
        return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
    },
    easeOutExpo: function (x, t, b, c, d) {
        return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
    },
    easeInOutExpo: function (x, t, b, c, d) {
        if (t == 0) return b;
        if (t == d) return b + c;
        if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    },
    easeInCirc: function (x, t, b, c, d) {
        return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
    },
    easeOutCirc: function (x, t, b, c, d) {
        return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
    },
    easeInOutCirc: function (x, t, b, c, d) {
        if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    },
    easeInElastic: function (x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    },
    easeOutElastic: function (x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
    },
    easeInOutElastic: function (x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d / 2) == 2) return b + c;
        if (!p) p = d * (.3 * 1.5);
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
    },
    easeInBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b;
    },
    easeOutBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
    },
    easeInOutBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
    },
    easeInBounce: function (x, t, b, c, d) {
        return c - jQuery.easing.easeOutBounce(x, d - t, 0, c, d) + b;
    },
    easeOutBounce: function (x, t, b, c, d) {
        if ((t /= d) < (1 / 2.75)) {
            return c * (7.5625 * t * t) + b;
        } else if (t < (2 / 2.75)) {
            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
        } else if (t < (2.5 / 2.75)) {
            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
        } else {
            return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
        }
    },
    easeInOutBounce: function (x, t, b, c, d) {
        if (t < d / 2) return jQuery.easing.easeInBounce(x, t * 2, 0, c, d) * .5 + b;
        return jQuery.easing.easeOutBounce(x, t * 2 - d, 0, c, d) * .5 + c * .5 + b;
    }
});

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright  2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
(function(factory) {
    if (typeof define === 'function' && define.amd) {
        define(['jquery', 'hammerjs'], factory);
    } else if (typeof exports === 'object') {
        factory(require('jquery'), require('hammerjs'));
    } else {
        factory(jQuery, Hammer);
    }
}(function($, Hammer) {
    function hammerify(el, options) {
        var $el = $(el);
        if(!$el.data("hammer")) {
            $el.data("hammer", new Hammer($el[0], options));
        }
    }

    $.fn.hammer = function(options) {
        return this.each(function() {
            hammerify(this, options);
        });
    };

    // extend the emit method to also trigger jQuery events
    Hammer.Manager.prototype.emit = (function(originalEmit) {
        return function(type, data) {
            originalEmit.call(this, type, data);
            $(this.element).trigger({
                type: type,
                gesture: data
            });
        };
    })(Hammer.Manager.prototype.emit);
}));

/* LEAN MODAL */

(function ($) {
    var _stack = 0,
        _lastID = 0,
        _generateID = function () {
            _lastID++;
            return 'materialize-lean-overlay-' + _lastID;
        };

    $.fn.extend({
        openModal: function (options) {

            $('body').css('overflow', 'hidden');

            var defaults = {
                    opacity: 0.5,
                    in_duration: 350,
                    out_duration: 250,
                    ready: undefined,
                    complete: undefined,
                    dismissible: true,
                    starting_top: '4%'
                },
                overlayID = _generateID(),
                $modal = $(this),
                $overlay = $('<div class="lean-overlay"></div>'),
                lStack = (++_stack);

            // Store a reference of the overlay
            $overlay.attr('id', overlayID).css('z-index', 1000 + lStack * 2);
            $modal.data('overlay-id', overlayID).css('z-index', 1000 + lStack * 2 + 1);

            $("body").append($overlay);

            // Override defaults
            options = $.extend(defaults, options);

            if (options.dismissible) {
                $overlay.click(function () {
                    $modal.closeModal(options);
                });
                // Return on ESC
                $(document).on('keyup.leanModal' + overlayID, function (e) {
                    if (e.keyCode === 27) { // ESC key
                        $modal.closeModal(options);
                    }
                });
            }

            $modal.find(".modal-close").on('click.close', function (e) {
                $modal.closeModal(options);
            });

            $overlay.css({
                display: "block",
                opacity: 0
            });

            $modal.css({
                display: "block",
                opacity: 0
            });

            $overlay.velocity({
                opacity: options.opacity
            }, {
                duration: options.in_duration,
                queue: false,
                ease: "easeOutCubic"
            });
            $modal.data('associated-overlay', $overlay[0]);

            // Define Bottom Sheet animation
            if ($modal.hasClass('bottom-sheet')) {
                $modal.velocity({
                    bottom: "0",
                    opacity: 1
                }, {
                    duration: options.in_duration,
                    queue: false,
                    ease: "easeOutCubic",
                    // Handle modal ready callback
                    complete: function () {
                        if (typeof (options.ready) === "function") {
                            options.ready();
                        }
                    }
                });
            } else {
                $.Velocity.hook($modal, "scaleX", 0.7);
                $modal.css({
                    top: options.starting_top
                });
                $modal.velocity({
                    top: "10%",
                    opacity: 1,
                    scaleX: '1'
                }, {
                    duration: options.in_duration,
                    queue: false,
                    ease: "easeOutCubic",
                    // Handle modal ready callback
                    complete: function () {
                        if (typeof (options.ready) === "function") {
                            options.ready();
                        }
                    }
                });
            }


        }
    });

    $.fn.extend({
        closeModal: function (options) {
            var defaults = {
                    out_duration: 250,
                    complete: undefined
                },
                $modal = $(this),
                overlayID = $modal.data('overlay-id'),
                $overlay = $('#' + overlayID);

            options = $.extend(defaults, options);

            // Disable scrolling
            $('body').css('overflow', '');

            $modal.find('.modal-close').off('click.close');
            $(document).off('keyup.leanModal' + overlayID);

            $overlay.velocity({
                opacity: 0
            }, {
                duration: options.out_duration,
                queue: false,
                ease: "easeOutQuart"
            });


            // Define Bottom Sheet animation
            if ($modal.hasClass('bottom-sheet')) {
                $modal.velocity({
                    bottom: "-100%",
                    opacity: 0
                }, {
                    duration: options.out_duration,
                    queue: false,
                    ease: "easeOutCubic",
                    // Handle modal ready callback
                    complete: function () {
                        $overlay.css({
                            display: "none"
                        });

                        // Call complete callback
                        if (typeof (options.complete) === "function") {
                            options.complete();
                        }
                        $overlay.remove();
                        _stack--;
                    }
                });
            } else {
                $modal.velocity({
                    top: options.starting_top,
                    opacity: 0,
                    scaleX: 0.7
                }, {
                    duration: options.out_duration,
                    complete: function () {

                        $(this).css('display', 'none');
                        // Call complete callback
                        if (typeof (options.complete) === "function") {
                            options.complete();
                        }
                        $overlay.remove();
                        _stack--;
                    }
                });
            }
        }
    });

    $.fn.extend({
        leanModal: function (option) {
            return this.each(function () {

                var defaults = {
                        starting_top: '4%'
                    },
                    // Override defaults
                    options = $.extend(defaults, option);

                // Close Handlers
                $(this).click(function (e) {
                    options.starting_top = ($(this).offset().top - $(window).scrollTop()) / 1.15;
                    var modal_id = $(this).attr("href") || '#' + $(this).data('target');
                    $(modal_id).openModal(options);
                    e.preventDefault();
                }); // done set on click
            }); // done return
        }
    });
})(jQuery);
/* MATERIALBOX */

(function ($) {

    $.fn.materialbox = function () {

        return this.each(function () {

            if ($(this).hasClass('initialized')) {
                return;
            }

            $(this).addClass('initialized');

            var overlayActive = false;
            var doneAnimating = true;
            var inDuration = 275;
            var outDuration = 200;
            var origin = $(this);
            var placeholder = $('<div></div>').addClass('material-placeholder');
            var originalWidth = 0;
            var originalHeight = 0;
            origin.wrap(placeholder);


            origin.on('click', function () {
                var placeholder = origin.parent('.material-placeholder');
                var windowWidth = window.innerWidth;
                var windowHeight = window.innerHeight;
                var originalWidth = origin.width();
                var originalHeight = origin.height();


                // If already modal, return to original
                if (doneAnimating === false) {
                    returnToOriginal();
                    return false;
                } else if (overlayActive && doneAnimating === true) {
                    returnToOriginal();
                    return false;
                }


                // Set states
                doneAnimating = false;
                origin.addClass('active');
                overlayActive = true;

                // Set positioning for placeholder

                placeholder.css({
                    width: placeholder[0].getBoundingClientRect().width,
                    height: placeholder[0].getBoundingClientRect().height,
                    position: 'relative',
                    top: 0,
                    left: 0
                });



                // Set css on origin
                origin.css({
                        position: 'absolute',
                        'z-index': 1000
                    })
                    .data('width', originalWidth)
                    .data('height', originalHeight);

                // Add overlay
                var overlay = $('<div id="materialbox-overlay"></div>')
                    .css({
                        opacity: 0
                    })
                    .click(function () {
                        if (doneAnimating === true)
                            returnToOriginal();
                    });
                // Animate Overlay
                $('body').append(overlay);
                overlay.velocity({
                    opacity: 1
                }, {
                    duration: inDuration,
                    queue: false,
                    easing: 'easeOutQuad'
                });


                // Add and animate caption if it exists
                if (origin.data('caption') !== "") {
                    var $photo_caption = $('<div class="materialbox-caption"></div>');
                    $photo_caption.text(origin.data('caption'));
                    $('body').append($photo_caption);
                    $photo_caption.css({
                        "display": "inline"
                    });
                    $photo_caption.velocity({
                        opacity: 1
                    }, {
                        duration: inDuration,
                        queue: false,
                        easing: 'easeOutQuad'
                    });
                }



                // Resize Image
                var ratio = 0;
                var widthPercent = originalWidth / windowWidth;
                var heightPercent = originalHeight / windowHeight;
                var newWidth = 0;
                var newHeight = 0;

                if (widthPercent > heightPercent) {
                    ratio = originalHeight / originalWidth;
                    newWidth = windowWidth * 0.9;
                    newHeight = windowWidth * 0.9 * ratio;
                } else {
                    ratio = originalWidth / originalHeight;
                    newWidth = (windowHeight * 0.9) * ratio;
                    newHeight = windowHeight * 0.9;
                }

                // Animate image + set z-index
                if (origin.hasClass('responsive-img')) {
                    origin.velocity({
                        'max-width': newWidth,
                        'width': originalWidth
                    }, {
                        duration: 0,
                        queue: false,
                        complete: function () {
                                origin.css({
                                        left: 0,
                                        top: 0
                                    })
                                    .velocity({
                                        height: newHeight,
                                        width: newWidth,
                                        left: $(document).scrollLeft() + windowWidth / 2 - origin.parent('.material-placeholder').offset().left - newWidth / 2,
                                        top: $(document).scrollTop() + windowHeight / 2 - origin.parent('.material-placeholder').offset().top - newHeight / 2
                                    }, {
                                        duration: inDuration,
                                        queue: false,
                                        easing: 'easeOutQuad',
                                        complete: function () {
                                            doneAnimating = true;
                                        }
                                    });
                            } // End Complete
                    }); // End Velocity
                } else {
                    origin.css('left', 0)
                        .css('top', 0)
                        .velocity({
                            height: newHeight,
                            width: newWidth,
                            left: $(document).scrollLeft() + windowWidth / 2 - origin.parent('.material-placeholder').offset().left - newWidth / 2,
                            top: $(document).scrollTop() + windowHeight / 2 - origin.parent('.material-placeholder').offset().top - newHeight / 2
                        }, {
                            duration: inDuration,
                            queue: false,
                            easing: 'easeOutQuad',
                            complete: function () {
                                doneAnimating = true;
                            }
                        }); // End Velocity
                }

            }); // End origin on click


            // Return on scroll
            $(window).scroll(function () {
                if (overlayActive) {
                    returnToOriginal();
                }
            });

            // Return on ESC
            $(document).keyup(function (e) {

                if (e.keyCode === 27 && doneAnimating === true) { // ESC key
                    if (overlayActive) {
                        returnToOriginal();
                    }
                }
            });


            // This function returns the modaled image to the original spot
            function returnToOriginal() {

                doneAnimating = false;

                var placeholder = origin.parent('.material-placeholder');
                var windowWidth = window.innerWidth;
                var windowHeight = window.innerHeight;
                var originalWidth = origin.data('width');
                var originalHeight = origin.data('height');

                origin.velocity("stop", true);
                $('#materialbox-overlay').velocity("stop", true);
                $('.materialbox-caption').velocity("stop", true);


                $('#materialbox-overlay').velocity({
                    opacity: 0
                }, {
                    duration: outDuration, // Delay prevents animation overlapping
                    queue: false,
                    easing: 'easeOutQuad',
                    complete: function () {
                        // Remove Overlay
                        overlayActive = false;
                        $(this).remove();
                    }
                });

                // Resize Image
                origin.velocity({
                    width: originalWidth,
                    height: originalHeight,
                    left: 0,
                    top: 0
                }, {
                    duration: outDuration,
                    queue: false,
                    easing: 'easeOutQuad'
                });

                // Remove Caption + reset css settings on image
                $('.materialbox-caption').velocity({
                    opacity: 0
                }, {
                    duration: outDuration, // Delay prevents animation overlapping
                    queue: false,
                    easing: 'easeOutQuad',
                    complete: function () {
                        placeholder.css({
                            height: '',
                            width: '',
                            position: '',
                            top: '',
                            left: ''
                        });

                        origin.css({
                            height: '',
                            top: '',
                            left: '',
                            width: '',
                            'max-width': '',
                            position: '',
                            'z-index': ''
                        });

                        // Remove class
                        origin.removeClass('active');
                        doneAnimating = true;
                        $(this).remove();
                    }
                });

            }
        });
    };

    $(document).ready(function () {
        $('.materialboxed').materialbox();
    });

}(jQuery));
// MORPHING HAMBURGER ICON
(function () {
    $('.hamburger-menu').on('click', function () {
        $(this).toggleClass('animate')
        $('.bar').toggleClass('animate');
    })
})();
//Collapse other tabs for popout 
$(function () {
    var active = true;

    $('#accordion').on('show.bs.collapse', function () {
        if (active) $('#accordion .in').collapse('hide');
    });

});

/*!
 * Date picker for pickadate.js v3.5.0
 * http://amsul.github.io/pickadate.js/date.htm
 */

(function ( factory ) {

    // AMD.
    if ( typeof define == 'function' && define.amd )
        define( ['picker', 'jquery'], factory )

    // Node.js/browserify.
    else if ( typeof exports == 'object' )
        module.exports = factory( require('./picker.js'), require('jquery') )

    // Browser globals.
    else factory( Picker, jQuery )

}(function( Picker, $ ) {


/**
 * Globals and constants
 */
var DAYS_IN_WEEK = 7,
    WEEKS_IN_CALENDAR = 6,
    _ = Picker._



/**
 * The date picker constructor
 */
function DatePicker( picker, settings ) {

    var calendar = this,
        element = picker.$node[ 0 ],
        elementValue = element.value,
        elementDataValue = picker.$node.data( 'value' ),
        valueString = elementDataValue || elementValue,
        formatString = elementDataValue ? settings.formatSubmit : settings.format,
        isRTL = function() {

            return element.currentStyle ?

                // For IE.
                element.currentStyle.direction == 'rtl' :

                // For normal browsers.
                getComputedStyle( picker.$root[0] ).direction == 'rtl'
        }

    calendar.settings = settings
    calendar.$node = picker.$node

    // The queue of methods that will be used to build item objects.
    calendar.queue = {
        min: 'measure create',
        max: 'measure create',
        now: 'now create',
        select: 'parse create validate',
        highlight: 'parse navigate create validate',
        view: 'parse create validate viewset',
        disable: 'deactivate',
        enable: 'activate'
    }

    // The component's item object.
    calendar.item = {}

    calendar.item.clear = null
    calendar.item.disable = ( settings.disable || [] ).slice( 0 )
    calendar.item.enable = -(function( collectionDisabled ) {
        return collectionDisabled[ 0 ] === true ? collectionDisabled.shift() : -1
    })( calendar.item.disable )

    calendar.
        set( 'min', settings.min ).
        set( 'max', settings.max ).
        set( 'now' )

    // When theres a value, set the `select`, which in turn
    // also sets the `highlight` and `view`.
    if ( valueString ) {
        calendar.set( 'select', valueString, { format: formatString })
    }

    // If theres no value, default to highlighting today.
    else {
        calendar.
            set( 'select', null ).
            set( 'highlight', calendar.item.now )
    }


    // The keycode to movement mapping.
    calendar.key = {
        40: 7, // Down
        38: -7, // Up
        39: function() { return isRTL() ? -1 : 1 }, // Right
        37: function() { return isRTL() ? 1 : -1 }, // Left
        go: function( timeChange ) {
            var highlightedObject = calendar.item.highlight,
                targetDate = new Date( highlightedObject.year, highlightedObject.month, highlightedObject.date + timeChange )
            calendar.set(
                'highlight',
                targetDate,
                { interval: timeChange }
            )
            this.render()
        }
    }


    // Bind some picker events.
    picker.
        on( 'render', function() {
            picker.$root.find( '.' + settings.klass.selectMonth ).on( 'change', function() {
                var value = this.value
                if ( value ) {
                    picker.set( 'highlight', [ picker.get( 'view' ).year, value, picker.get( 'highlight' ).date ] )
                    picker.$root.find( '.' + settings.klass.selectMonth ).trigger( 'focus' )
                }
            })
            picker.$root.find( '.' + settings.klass.selectYear ).on( 'change', function() {
                var value = this.value
                if ( value ) {
                    picker.set( 'highlight', [ value, picker.get( 'view' ).month, picker.get( 'highlight' ).date ] )
                    picker.$root.find( '.' + settings.klass.selectYear ).trigger( 'focus' )
                }
            })
        }, 1 ).
        on( 'open', function() {
            var includeToday = ''
            if ( calendar.disabled( calendar.get('now') ) ) {
                includeToday = ':not(.' + settings.klass.buttonToday + ')'
            }
            picker.$root.find( 'button' + includeToday + ', select' ).attr( 'disabled', false )
        }, 1 ).
        on( 'close', function() {
            picker.$root.find( 'button, select' ).attr( 'disabled', true )
        }, 1 )

} //DatePicker


/**
 * Set a datepicker item object.
 */
DatePicker.prototype.set = function( type, value, options ) {

    var calendar = this,
        calendarItem = calendar.item

    // If the value is `null` just set it immediately.
    if ( value === null ) {
        if ( type == 'clear' ) type = 'select'
        calendarItem[ type ] = value
        return calendar
    }

    // Otherwise go through the queue of methods, and invoke the functions.
    // Update this as the time unit, and set the final value as this item.
    // * In the case of `enable`, keep the queue but set `disable` instead.
    //   And in the case of `flip`, keep the queue but set `enable` instead.
    calendarItem[ ( type == 'enable' ? 'disable' : type == 'flip' ? 'enable' : type ) ] = calendar.queue[ type ].split( ' ' ).map( function( method ) {
        value = calendar[ method ]( type, value, options )
        return value
    }).pop()

    // Check if we need to cascade through more updates.
    if ( type == 'select' ) {
        calendar.set( 'highlight', calendarItem.select, options )
    }
    else if ( type == 'highlight' ) {
        calendar.set( 'view', calendarItem.highlight, options )
    }
    else if ( type.match( /^(flip|min|max|disable|enable)$/ ) ) {
        if ( calendarItem.select && calendar.disabled( calendarItem.select ) ) {
            calendar.set( 'select', calendarItem.select, options )
        }
        if ( calendarItem.highlight && calendar.disabled( calendarItem.highlight ) ) {
            calendar.set( 'highlight', calendarItem.highlight, options )
        }
    }

    return calendar
} //DatePicker.prototype.set


/**
 * Get a datepicker item object.
 */
DatePicker.prototype.get = function( type ) {
    return this.item[ type ]
} //DatePicker.prototype.get


/**
 * Create a picker date object.
 */
DatePicker.prototype.create = function( type, value, options ) {

    var isInfiniteValue,
        calendar = this

    // If theres no value, use the type as the value.
    value = value === undefined ? type : value


    // If its infinity, update the value.
    if ( value == -Infinity || value == Infinity ) {
        isInfiniteValue = value
    }

    // If its an object, use the native date object.
    else if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {
        value = value.obj
    }

    // If its an array, convert it into a date and make sure
    // that its a valid date  otherwise default to today.
    else if ( $.isArray( value ) ) {
        value = new Date( value[ 0 ], value[ 1 ], value[ 2 ] )
        value = _.isDate( value ) ? value : calendar.create().obj
    }

    // If its a number or date object, make a normalized date.
    else if ( _.isInteger( value ) || _.isDate( value ) ) {
        value = calendar.normalize( new Date( value ), options )
    }

    // If its a literal true or any other case, set it to now.
    else /*if ( value === true )*/ {
        value = calendar.now( type, value, options )
    }

    // Return the compiled object.
    return {
        year: isInfiniteValue || value.getFullYear(),
        month: isInfiniteValue || value.getMonth(),
        date: isInfiniteValue || value.getDate(),
        day: isInfiniteValue || value.getDay(),
        obj: isInfiniteValue || value,
        pick: isInfiniteValue || value.getTime()
    }
} //DatePicker.prototype.create


/**
 * Create a range limit object using an array, date object,
 * literal true, or integer relative to another time.
 */
DatePicker.prototype.createRange = function( from, to ) {

    var calendar = this,
        createDate = function( date ) {
            if ( date === true || $.isArray( date ) || _.isDate( date ) ) {
                return calendar.create( date )
            }
            return date
        }

    // Create objects if possible.
    if ( !_.isInteger( from ) ) {
        from = createDate( from )
    }
    if ( !_.isInteger( to ) ) {
        to = createDate( to )
    }

    // Create relative dates.
    if ( _.isInteger( from ) && $.isPlainObject( to ) ) {
        from = [ to.year, to.month, to.date + from ];
    }
    else if ( _.isInteger( to ) && $.isPlainObject( from ) ) {
        to = [ from.year, from.month, from.date + to ];
    }

    return {
        from: createDate( from ),
        to: createDate( to )
    }
} //DatePicker.prototype.createRange


/**
 * Check if a date unit falls within a date range object.
 */
DatePicker.prototype.withinRange = function( range, dateUnit ) {
    range = this.createRange(range.from, range.to)
    return dateUnit.pick >= range.from.pick && dateUnit.pick <= range.to.pick
}


/**
 * Check if two date range objects overlap.
 */
DatePicker.prototype.overlapRanges = function( one, two ) {

    var calendar = this

    // Convert the ranges into comparable dates.
    one = calendar.createRange( one.from, one.to )
    two = calendar.createRange( two.from, two.to )

    return calendar.withinRange( one, two.from ) || calendar.withinRange( one, two.to ) ||
        calendar.withinRange( two, one.from ) || calendar.withinRange( two, one.to )
}


/**
 * Get the date today.
 */
DatePicker.prototype.now = function( type, value, options ) {
    value = new Date()
    if ( options && options.rel ) {
        value.setDate( value.getDate() + options.rel )
    }
    return this.normalize( value, options )
}


/**
 * Navigate to next/prev month.
 */
DatePicker.prototype.navigate = function( type, value, options ) {

    var targetDateObject,
        targetYear,
        targetMonth,
        targetDate,
        isTargetArray = $.isArray( value ),
        isTargetObject = $.isPlainObject( value ),
        viewsetObject = this.item.view/*,
        safety = 100*/


    if ( isTargetArray || isTargetObject ) {

        if ( isTargetObject ) {
            targetYear = value.year
            targetMonth = value.month
            targetDate = value.date
        }
        else {
            targetYear = +value[0]
            targetMonth = +value[1]
            targetDate = +value[2]
        }

        // If were navigating months but the view is in a different
        // month, navigate to the views year and month.
        if ( options && options.nav && viewsetObject && viewsetObject.month !== targetMonth ) {
            targetYear = viewsetObject.year
            targetMonth = viewsetObject.month
        }

        // Figure out the expected target year and month.
        targetDateObject = new Date( targetYear, targetMonth + ( options && options.nav ? options.nav : 0 ), 1 )
        targetYear = targetDateObject.getFullYear()
        targetMonth = targetDateObject.getMonth()

        // If the month were going to doesnt have enough days,
        // keep decreasing the date until we reach the months last date.
        while ( /*safety &&*/ new Date( targetYear, targetMonth, targetDate ).getMonth() !== targetMonth ) {
            targetDate -= 1
            /*safety -= 1
            if ( !safety ) {
                throw 'Fell into an infinite loop while navigating to ' + new Date( targetYear, targetMonth, targetDate ) + '.'
            }*/
        }

        value = [ targetYear, targetMonth, targetDate ]
    }

    return value
} //DatePicker.prototype.navigate


/**
 * Normalize a date by setting the hours to midnight.
 */
DatePicker.prototype.normalize = function( value/*, options*/ ) {
    value.setHours( 0, 0, 0, 0 )
    return value
}


/**
 * Measure the range of dates.
 */
DatePicker.prototype.measure = function( type, value/*, options*/ ) {

    var calendar = this

    // If its anything false-y, remove the limits.
    if ( !value ) {
        value = type == 'min' ? -Infinity : Infinity
    }

    // If its a string, parse it.
    else if ( typeof value == 'string' ) {
        value = calendar.parse( type, value )
    }

    // If it's an integer, get a date relative to today.
    else if ( _.isInteger( value ) ) {
        value = calendar.now( type, value, { rel: value } )
    }

    return value
} ///DatePicker.prototype.measure


/**
 * Create a viewset object based on navigation.
 */
DatePicker.prototype.viewset = function( type, dateObject/*, options*/ ) {
    return this.create([ dateObject.year, dateObject.month, 1 ])
}


/**
 * Validate a date as enabled and shift if needed.
 */
DatePicker.prototype.validate = function( type, dateObject, options ) {

    var calendar = this,

        // Keep a reference to the original date.
        originalDateObject = dateObject,

        // Make sure we have an interval.
        interval = options && options.interval ? options.interval : 1,

        // Check if the calendar enabled dates are inverted.
        isFlippedBase = calendar.item.enable === -1,

        // Check if we have any enabled dates after/before now.
        hasEnabledBeforeTarget, hasEnabledAfterTarget,

        // The min & max limits.
        minLimitObject = calendar.item.min,
        maxLimitObject = calendar.item.max,

        // Check if weve reached the limit during shifting.
        reachedMin, reachedMax,

        // Check if the calendar is inverted and at least one weekday is enabled.
        hasEnabledWeekdays = isFlippedBase && calendar.item.disable.filter( function( value ) {

            // If theres a date, check where it is relative to the target.
            if ( $.isArray( value ) ) {
                var dateTime = calendar.create( value ).pick
                if ( dateTime < dateObject.pick ) hasEnabledBeforeTarget = true
                else if ( dateTime > dateObject.pick ) hasEnabledAfterTarget = true
            }

            // Return only integers for enabled weekdays.
            return _.isInteger( value )
        }).length/*,

        safety = 100*/



    // Cases to validate for:
    // [1] Not inverted and date disabled.
    // [2] Inverted and some dates enabled.
    // [3] Not inverted and out of range.
    //
    // Cases to **not** validate for:
    //  Navigating months.
    //  Not inverted and date enabled.
    //  Inverted and all dates disabled.
    //  ..and anything else.
    if ( !options || !options.nav ) if (
        /* 1 */ ( !isFlippedBase && calendar.disabled( dateObject ) ) ||
        /* 2 */ ( isFlippedBase && calendar.disabled( dateObject ) && ( hasEnabledWeekdays || hasEnabledBeforeTarget || hasEnabledAfterTarget ) ) ||
        /* 3 */ ( !isFlippedBase && (dateObject.pick <= minLimitObject.pick || dateObject.pick >= maxLimitObject.pick) )
    ) {


        // When inverted, flip the direction if there arent any enabled weekdays
        // and there are no enabled dates in the direction of the interval.
        if ( isFlippedBase && !hasEnabledWeekdays && ( ( !hasEnabledAfterTarget && interval > 0 ) || ( !hasEnabledBeforeTarget && interval < 0 ) ) ) {
            interval *= -1
        }


        // Keep looping until we reach an enabled date.
        while ( /*safety &&*/ calendar.disabled( dateObject ) ) {

            /*safety -= 1
            if ( !safety ) {
                throw 'Fell into an infinite loop while validating ' + dateObject.obj + '.'
            }*/


            // If weve looped into the next/prev month with a large interval, return to the original date and flatten the interval.
            if ( Math.abs( interval ) > 1 && ( dateObject.month < originalDateObject.month || dateObject.month > originalDateObject.month ) ) {
                dateObject = originalDateObject
                interval = interval > 0 ? 1 : -1
            }


            // If weve reached the min/max limit, reverse the direction, flatten the interval and set it to the limit.
            if ( dateObject.pick <= minLimitObject.pick ) {
                reachedMin = true
                interval = 1
                dateObject = calendar.create([
                    minLimitObject.year,
                    minLimitObject.month,
                    minLimitObject.date + (dateObject.pick === minLimitObject.pick ? 0 : -1)
                ])
            }
            else if ( dateObject.pick >= maxLimitObject.pick ) {
                reachedMax = true
                interval = -1
                dateObject = calendar.create([
                    maxLimitObject.year,
                    maxLimitObject.month,
                    maxLimitObject.date + (dateObject.pick === maxLimitObject.pick ? 0 : 1)
                ])
            }


            // If weve reached both limits, just break out of the loop.
            if ( reachedMin && reachedMax ) {
                break
            }


            // Finally, create the shifted date using the interval and keep looping.
            dateObject = calendar.create([ dateObject.year, dateObject.month, dateObject.date + interval ])
        }

    } //endif


    // Return the date object settled on.
    return dateObject
} //DatePicker.prototype.validate


/**
 * Check if a date is disabled.
 */
DatePicker.prototype.disabled = function( dateToVerify ) {

    var
        calendar = this,

        // Filter through the disabled dates to check if this is one.
        isDisabledMatch = calendar.item.disable.filter( function( dateToDisable ) {

            // If the date is a number, match the weekday with 0index and `firstDay` check.
            if ( _.isInteger( dateToDisable ) ) {
                return dateToVerify.day === ( calendar.settings.firstDay ? dateToDisable : dateToDisable - 1 ) % 7
            }

            // If its an array or a native JS date, create and match the exact date.
            if ( $.isArray( dateToDisable ) || _.isDate( dateToDisable ) ) {
                return dateToVerify.pick === calendar.create( dateToDisable ).pick
            }

            // If its an object, match a date within the from and to range.
            if ( $.isPlainObject( dateToDisable ) ) {
                return calendar.withinRange( dateToDisable, dateToVerify )
            }
        })

    // If this date matches a disabled date, confirm its not inverted.
    isDisabledMatch = isDisabledMatch.length && !isDisabledMatch.filter(function( dateToDisable ) {
        return $.isArray( dateToDisable ) && dateToDisable[3] == 'inverted' ||
            $.isPlainObject( dateToDisable ) && dateToDisable.inverted
    }).length

    // Check the calendar enabled flag and respectively flip the
    // disabled state. Then also check if its beyond the min/max limits.
    return calendar.item.enable === -1 ? !isDisabledMatch : isDisabledMatch ||
        dateToVerify.pick < calendar.item.min.pick ||
        dateToVerify.pick > calendar.item.max.pick

} //DatePicker.prototype.disabled


/**
 * Parse a string into a usable type.
 */
DatePicker.prototype.parse = function( type, value, options ) {

    var calendar = this,
        parsingObject = {}

    // If its already parsed, were good.
    if ( !value || typeof value != 'string' ) {
        return value
    }

    // We need a `.format` to parse the value with.
    if ( !( options && options.format ) ) {
        options = options || {}
        options.format = calendar.settings.format
    }

    // Convert the format into an array and then map through it.
    calendar.formats.toArray( options.format ).map( function( label ) {

        var
            // Grab the formatting label.
            formattingLabel = calendar.formats[ label ],

            // The format length is from the formatting label function or the
            // label length without the escaping exclamation (!) mark.
            formatLength = formattingLabel ? _.trigger( formattingLabel, calendar, [ value, parsingObject ] ) : label.replace( /^!/, '' ).length

        // If there's a format label, split the value up to the format length.
        // Then add it to the parsing object with appropriate label.
        if ( formattingLabel ) {
            parsingObject[ label ] = value.substr( 0, formatLength )
        }

        // Update the value as the substring from format length to end.
        value = value.substr( formatLength )
    })

    // Compensate for month 0index.
    return [
        parsingObject.yyyy || parsingObject.yy,
        +( parsingObject.mm || parsingObject.m ) - 1,
        parsingObject.dd || parsingObject.d
    ]
} //DatePicker.prototype.parse


/**
 * Various formats to display the object in.
 */
DatePicker.prototype.formats = (function() {

    // Return the length of the first word in a collection.
    function getWordLengthFromCollection( string, collection, dateObject ) {

        // Grab the first word from the string.
        var word = string.match( /\w+/ )[ 0 ]

        // If there's no month index, add it to the date object
        if ( !dateObject.mm && !dateObject.m ) {
            dateObject.m = collection.indexOf( word ) + 1
        }

        // Return the length of the word.
        return word.length
    }

    // Get the length of the first word in a string.
    function getFirstWordLength( string ) {
        return string.match( /\w+/ )[ 0 ].length
    }

    return {

        d: function( string, dateObject ) {

            // If there's string, then get the digits length.
            // Otherwise return the selected date.
            return string ? _.digits( string ) : dateObject.date
        },
        dd: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected date with a leading zero.
            return string ? 2 : _.lead( dateObject.date )
        },
        ddd: function( string, dateObject ) {

            // If there's a string, then get the length of the first word.
            // Otherwise return the short selected weekday.
            return string ? getFirstWordLength( string ) : this.settings.weekdaysShort[ dateObject.day ]
        },
        dddd: function( string, dateObject ) {

            // If there's a string, then get the length of the first word.
            // Otherwise return the full selected weekday.
            return string ? getFirstWordLength( string ) : this.settings.weekdaysFull[ dateObject.day ]
        },
        m: function( string, dateObject ) {

            // If there's a string, then get the length of the digits
            // Otherwise return the selected month with 0index compensation.
            return string ? _.digits( string ) : dateObject.month + 1
        },
        mm: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected month with 0index and leading zero.
            return string ? 2 : _.lead( dateObject.month + 1 )
        },
        mmm: function( string, dateObject ) {

            var collection = this.settings.monthsShort

            // If there's a string, get length of the relevant month from the short
            // months collection. Otherwise return the selected month from that collection.
            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]
        },
        mmmm: function( string, dateObject ) {

            var collection = this.settings.monthsFull

            // If there's a string, get length of the relevant month from the full
            // months collection. Otherwise return the selected month from that collection.
            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]
        },
        yy: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected year by slicing out the first 2 digits.
            return string ? 2 : ( '' + dateObject.year ).slice( 2 )
        },
        yyyy: function( string, dateObject ) {

            // If there's a string, then the length is always 4.
            // Otherwise return the selected year.
            return string ? 4 : dateObject.year
        },

        // Create an array by splitting the formatting string passed.
        toArray: function( formatString ) { return formatString.split( /(d{1,4}|m{1,4}|y{4}|yy|!.)/g ) },

        // Format an object into a string using the formatting options.
        toString: function ( formatString, itemObject ) {
            var calendar = this
            return calendar.formats.toArray( formatString ).map( function( label ) {
                return _.trigger( calendar.formats[ label ], calendar, [ 0, itemObject ] ) || label.replace( /^!/, '' )
            }).join( '' )
        }
    }
})() //DatePicker.prototype.formats




/**
 * Check if two date units are the exact.
 */
DatePicker.prototype.isDateExact = function( one, two ) {

    var calendar = this

    // When were working with weekdays, do a direct comparison.
    if (
        ( _.isInteger( one ) && _.isInteger( two ) ) ||
        ( typeof one == 'boolean' && typeof two == 'boolean' )
     ) {
        return one === two
    }

    // When were working with date representations, compare the pick value.
    if (
        ( _.isDate( one ) || $.isArray( one ) ) &&
        ( _.isDate( two ) || $.isArray( two ) )
    ) {
        return calendar.create( one ).pick === calendar.create( two ).pick
    }

    // When were working with range objects, compare the from and to.
    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {
        return calendar.isDateExact( one.from, two.from ) && calendar.isDateExact( one.to, two.to )
    }

    return false
}


/**
 * Check if two date units overlap.
 */
DatePicker.prototype.isDateOverlap = function( one, two ) {

    var calendar = this,
        firstDay = calendar.settings.firstDay ? 1 : 0

    // When were working with a weekday index, compare the days.
    if ( _.isInteger( one ) && ( _.isDate( two ) || $.isArray( two ) ) ) {
        one = one % 7 + firstDay
        return one === calendar.create( two ).day + 1
    }
    if ( _.isInteger( two ) && ( _.isDate( one ) || $.isArray( one ) ) ) {
        two = two % 7 + firstDay
        return two === calendar.create( one ).day + 1
    }

    // When were working with range objects, check if the ranges overlap.
    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {
        return calendar.overlapRanges( one, two )
    }

    return false
}


/**
 * Flip the enabled state.
 */
DatePicker.prototype.flipEnable = function(val) {
    var itemObject = this.item
    itemObject.enable = val || (itemObject.enable == -1 ? 1 : -1)
}


/**
 * Mark a collection of dates as disabled.
 */
DatePicker.prototype.deactivate = function( type, datesToDisable ) {

    var calendar = this,
        disabledItems = calendar.item.disable.slice(0)


    // If were flipping, thats all we need to do.
    if ( datesToDisable == 'flip' ) {
        calendar.flipEnable()
    }

    else if ( datesToDisable === false ) {
        calendar.flipEnable(1)
        disabledItems = []
    }

    else if ( datesToDisable === true ) {
        calendar.flipEnable(-1)
        disabledItems = []
    }

    // Otherwise go through the dates to disable.
    else {

        datesToDisable.map(function( unitToDisable ) {

            var matchFound

            // When we have disabled items, check for matches.
            // If something is matched, immediately break out.
            for ( var index = 0; index < disabledItems.length; index += 1 ) {
                if ( calendar.isDateExact( unitToDisable, disabledItems[index] ) ) {
                    matchFound = true
                    break
                }
            }

            // If nothing was found, add the validated unit to the collection.
            if ( !matchFound ) {
                if (
                    _.isInteger( unitToDisable ) ||
                    _.isDate( unitToDisable ) ||
                    $.isArray( unitToDisable ) ||
                    ( $.isPlainObject( unitToDisable ) && unitToDisable.from && unitToDisable.to )
                ) {
                    disabledItems.push( unitToDisable )
                }
            }
        })
    }

    // Return the updated collection.
    return disabledItems
} //DatePicker.prototype.deactivate


/**
 * Mark a collection of dates as enabled.
 */
DatePicker.prototype.activate = function( type, datesToEnable ) {

    var calendar = this,
        disabledItems = calendar.item.disable,
        disabledItemsCount = disabledItems.length

    // If were flipping, thats all we need to do.
    if ( datesToEnable == 'flip' ) {
        calendar.flipEnable()
    }

    else if ( datesToEnable === true ) {
        calendar.flipEnable(1)
        disabledItems = []
    }

    else if ( datesToEnable === false ) {
        calendar.flipEnable(-1)
        disabledItems = []
    }

    // Otherwise go through the disabled dates.
    else {

        datesToEnable.map(function( unitToEnable ) {

            var matchFound,
                disabledUnit,
                index,
                isExactRange

            // Go through the disabled items and try to find a match.
            for ( index = 0; index < disabledItemsCount; index += 1 ) {

                disabledUnit = disabledItems[index]

                // When an exact match is found, remove it from the collection.
                if ( calendar.isDateExact( disabledUnit, unitToEnable ) ) {
                    matchFound = disabledItems[index] = null
                    isExactRange = true
                    break
                }

                // When an overlapped match is found, add the inverted state to it.
                else if ( calendar.isDateOverlap( disabledUnit, unitToEnable ) ) {
                    if ( $.isPlainObject( unitToEnable ) ) {
                        unitToEnable.inverted = true
                        matchFound = unitToEnable
                    }
                    else if ( $.isArray( unitToEnable ) ) {
                        matchFound = unitToEnable
                        if ( !matchFound[3] ) matchFound.push( 'inverted' )
                    }
                    else if ( _.isDate( unitToEnable ) ) {
                        matchFound = [ unitToEnable.getFullYear(), unitToEnable.getMonth(), unitToEnable.getDate(), 'inverted' ]
                    }
                    break
                }
            }

            // If a match was found, remove a previous duplicate entry.
            if ( matchFound ) for ( index = 0; index < disabledItemsCount; index += 1 ) {
                if ( calendar.isDateExact( disabledItems[index], unitToEnable ) ) {
                    disabledItems[index] = null
                    break
                }
            }

            // In the event that were dealing with an exact range of dates,
            // make sure there are no inverted dates because of it.
            if ( isExactRange ) for ( index = 0; index < disabledItemsCount; index += 1 ) {
                if ( calendar.isDateOverlap( disabledItems[index], unitToEnable ) ) {
                    disabledItems[index] = null
                    break
                }
            }

            // If something is still matched, add it into the collection.
            if ( matchFound ) {
                disabledItems.push( matchFound )
            }
        })
    }

    // Return the updated collection.
    return disabledItems.filter(function( val ) { return val != null })
} //DatePicker.prototype.activate


/**
 * Create a string for the nodes in the picker.
 */
DatePicker.prototype.nodes = function( isOpen ) {

    var
        calendar = this,
        settings = calendar.settings,
        calendarItem = calendar.item,
        nowObject = calendarItem.now,
        selectedObject = calendarItem.select,
        highlightedObject = calendarItem.highlight,
        viewsetObject = calendarItem.view,
        disabledCollection = calendarItem.disable,
        minLimitObject = calendarItem.min,
        maxLimitObject = calendarItem.max,


        // Create the calendar table head using a copy of weekday labels collection.
        // * We do a copy so we don't mutate the original array.
        tableHead = (function( collection, fullCollection ) {

            // If the first day should be Monday, move Sunday to the end.
            if ( settings.firstDay ) {
                collection.push( collection.shift() )
                fullCollection.push( fullCollection.shift() )
            }

            // Create and return the table head group.
            return _.node(
                'thead',
                _.node(
                    'tr',
                    _.group({
                        min: 0,
                        max: DAYS_IN_WEEK - 1,
                        i: 1,
                        node: 'th',
                        item: function( counter ) {
                            return [
                                collection[ counter ],
                                settings.klass.weekdays,
                                'scope=col title="' + fullCollection[ counter ] + '"'
                            ]
                        }
                    })
                )
            ) //endreturn

        // Materialize modified
        })( ( settings.showWeekdaysFull ? settings.weekdaysFull : settings.weekdaysLetter ).slice( 0 ), settings.weekdaysFull.slice( 0 ) ), //tableHead


        // Create the nav for next/prev month.
        createMonthNav = function( next ) {

            // Otherwise, return the created month tag.
            return _.node(
                'div',
                ' ',
                settings.klass[ 'nav' + ( next ? 'Next' : 'Prev' ) ] + (

                    // If the focused month is outside the range, disabled the button.
                    ( next && viewsetObject.year >= maxLimitObject.year && viewsetObject.month >= maxLimitObject.month ) ||
                    ( !next && viewsetObject.year <= minLimitObject.year && viewsetObject.month <= minLimitObject.month ) ?
                    ' ' + settings.klass.navDisabled : ''
                ),
                'data-nav=' + ( next || -1 ) + ' ' +
                _.ariaAttr({
                    role: 'button',
                    controls: calendar.$node[0].id + '_table'
                }) + ' ' +
                'title="' + (next ? settings.labelMonthNext : settings.labelMonthPrev ) + '"'
            ) //endreturn
        }, //createMonthNav


        // Create the month label.
        //Materialize modified
        createMonthLabel = function(override) {

            var monthsCollection = settings.showMonthsShort ? settings.monthsShort : settings.monthsFull

             // Materialize modified
            if (override == "short_months") {
              monthsCollection = settings.monthsShort;
            }

            // If there are months to select, add a dropdown menu.
            if ( settings.selectMonths  && override == undefined) {

                return _.node( 'select',
                    _.group({
                        min: 0,
                        max: 11,
                        i: 1,
                        node: 'option',
                        item: function( loopedMonth ) {

                            return [

                                // The looped month and no classes.
                                monthsCollection[ loopedMonth ], 0,

                                // Set the value and selected index.
                                'value=' + loopedMonth +
                                ( viewsetObject.month == loopedMonth ? ' selected' : '' ) +
                                (
                                    (
                                        ( viewsetObject.year == minLimitObject.year && loopedMonth < minLimitObject.month ) ||
                                        ( viewsetObject.year == maxLimitObject.year && loopedMonth > maxLimitObject.month )
                                    ) ?
                                    ' disabled' : ''
                                )
                            ]
                        }
                    }),
                    settings.klass.selectMonth + ' browser-default',
                    ( isOpen ? '' : 'disabled' ) + ' ' +
                    _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +
                    'title="' + settings.labelMonthSelect + '"'
                )
            }

            // Materialize modified
            if (override == "short_months")
                if (selectedObject != null)
                return _.node( 'div', monthsCollection[ selectedObject.month ] );
                else return _.node( 'div', monthsCollection[ viewsetObject.month ] );

            // If there's a need for a month selector
            return _.node( 'div', monthsCollection[ viewsetObject.month ], settings.klass.month )
        }, //createMonthLabel


        // Create the year label.
        // Materialize modified
        createYearLabel = function(override) {

            var focusedYear = viewsetObject.year,

            // If years selector is set to a literal "true", set it to 5. Otherwise
            // divide in half to get half before and half after focused year.
            numberYears = settings.selectYears === true ? 5 : ~~( settings.selectYears / 2 )

            // If there are years to select, add a dropdown menu.
            if ( numberYears ) {

                var
                    minYear = minLimitObject.year,
                    maxYear = maxLimitObject.year,
                    lowestYear = focusedYear - numberYears,
                    highestYear = focusedYear + numberYears

                // If the min year is greater than the lowest year, increase the highest year
                // by the difference and set the lowest year to the min year.
                if ( minYear > lowestYear ) {
                    highestYear += minYear - lowestYear
                    lowestYear = minYear
                }

                // If the max year is less than the highest year, decrease the lowest year
                // by the lower of the two: available and needed years. Then set the
                // highest year to the max year.
                if ( maxYear < highestYear ) {

                    var availableYears = lowestYear - minYear,
                        neededYears = highestYear - maxYear

                    lowestYear -= availableYears > neededYears ? neededYears : availableYears
                    highestYear = maxYear
                }

                if ( settings.selectYears  && override == undefined ) {
                    return _.node( 'select',
                        _.group({
                            min: lowestYear,
                            max: highestYear,
                            i: 1,
                            node: 'option',
                            item: function( loopedYear ) {
                                return [

                                    // The looped year and no classes.
                                    loopedYear, 0,

                                    // Set the value and selected index.
                                    'value=' + loopedYear + ( focusedYear == loopedYear ? ' selected' : '' )
                                ]
                            }
                        }),
                        settings.klass.selectYear + ' browser-default',
                        ( isOpen ? '' : 'disabled' ) + ' ' + _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +
                        'title="' + settings.labelYearSelect + '"'
                    )
                }
            }

            // Materialize modified
            if (override == "raw")
                return _.node( 'div', focusedYear )

            // Otherwise just return the year focused
            return _.node( 'div', focusedYear, settings.klass.year )
        } //createYearLabel


        // Materialize modified
        createDayLabel = function() {
                if (selectedObject != null)
                    return _.node( 'div', selectedObject.date)
                else return _.node( 'div', nowObject.date)
            }
        createWeekdayLabel = function() {
            var display_day;

            if (selectedObject != null)
                display_day = selectedObject.day;
            else
                display_day = nowObject.day;
            var weekday = settings.weekdaysFull[ display_day ]
            return weekday
        }


    // Create and return the entire calendar.
return _.node(
        // Date presentation View
        'div',
            _.node(
                'div',
                createWeekdayLabel(),
                "picker__weekday-display"
            )+
            _.node(
                // Div for short Month
                'div',
                createMonthLabel("short_months"),
                settings.klass.month_display
            )+
            _.node(
                // Div for Day
                'div',
                createDayLabel() ,
                settings.klass.day_display
            )+
            _.node(
                // Div for Year
                'div',
                createYearLabel("raw") ,
                settings.klass.year_display
            ),
        settings.klass.date_display
    )+
    // Calendar container
    _.node('div',
        _.node('div',
        ( settings.selectYears ?  createMonthLabel() + createYearLabel() : createMonthLabel() + createYearLabel() ) +
        createMonthNav() + createMonthNav( 1 ),
        settings.klass.header
    ) + _.node(
        'table',
        tableHead +
        _.node(
            'tbody',
            _.group({
                min: 0,
                max: WEEKS_IN_CALENDAR - 1,
                i: 1,
                node: 'tr',
                item: function( rowCounter ) {

                    // If Monday is the first day and the month starts on Sunday, shift the date back a week.
                    var shiftDateBy = settings.firstDay && calendar.create([ viewsetObject.year, viewsetObject.month, 1 ]).day === 0 ? -7 : 0

                    return [
                        _.group({
                            min: DAYS_IN_WEEK * rowCounter - viewsetObject.day + shiftDateBy + 1, // Add 1 for weekday 0index
                            max: function() {
                                return this.min + DAYS_IN_WEEK - 1
                            },
                            i: 1,
                            node: 'td',
                            item: function( targetDate ) {

                                // Convert the time date from a relative date to a target date.
                                targetDate = calendar.create([ viewsetObject.year, viewsetObject.month, targetDate + ( settings.firstDay ? 1 : 0 ) ])

                                var isSelected = selectedObject && selectedObject.pick == targetDate.pick,
                                    isHighlighted = highlightedObject && highlightedObject.pick == targetDate.pick,
                                    isDisabled = disabledCollection && calendar.disabled( targetDate ) || targetDate.pick < minLimitObject.pick || targetDate.pick > maxLimitObject.pick,
                                    formattedDate = _.trigger( calendar.formats.toString, calendar, [ settings.format, targetDate ] )

                                return [
                                    _.node(
                                        'div',
                                        targetDate.date,
                                        (function( klasses ) {

                                            // Add the `infocus` or `outfocus` classes based on month in view.
                                            klasses.push( viewsetObject.month == targetDate.month ? settings.klass.infocus : settings.klass.outfocus )

                                            // Add the `today` class if needed.
                                            if ( nowObject.pick == targetDate.pick ) {
                                                klasses.push( settings.klass.now )
                                            }

                                            // Add the `selected` class if something's selected and the time matches.
                                            if ( isSelected ) {
                                                klasses.push( settings.klass.selected )
                                            }

                                            // Add the `highlighted` class if something's highlighted and the time matches.
                                            if ( isHighlighted ) {
                                                klasses.push( settings.klass.highlighted )
                                            }

                                            // Add the `disabled` class if something's disabled and the object matches.
                                            if ( isDisabled ) {
                                                klasses.push( settings.klass.disabled )
                                            }

                                            return klasses.join( ' ' )
                                        })([ settings.klass.day ]),
                                        'data-pick=' + targetDate.pick + ' ' + _.ariaAttr({
                                            role: 'gridcell',
                                            label: formattedDate,
                                            selected: isSelected && calendar.$node.val() === formattedDate ? true : null,
                                            activedescendant: isHighlighted ? true : null,
                                            disabled: isDisabled ? true : null
                                        })
                                    ),
                                    '',
                                    _.ariaAttr({ role: 'presentation' })
                                ] //endreturn
                            }
                        })
                    ] //endreturn
                }
            })
        ),
        settings.klass.table,
        'id="' + calendar.$node[0].id + '_table' + '" ' + _.ariaAttr({
            role: 'grid',
            controls: calendar.$node[0].id,
            readonly: true
        })
    )
    , settings.klass.calendar_container) // end calendar

     +

    // * For Firefox forms to submit, make sure to set the buttons `type` attributes as button.
    _.node(
        'div',
        _.node( 'button', settings.today, "btn-flat picker__today",
            'type=button data-pick=' + nowObject.pick +
            ( isOpen && !calendar.disabled(nowObject) ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ) +
        _.node( 'button', settings.clear, "btn-flat picker__clear",
            'type=button data-clear=1' +
            ( isOpen ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ) +
        _.node('button', settings.close, "btn-flat picker__close",
            'type=button data-close=true ' +
            ( isOpen ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ),
        settings.klass.footer
    ) //endreturn
} //DatePicker.prototype.nodes




/**
 * The date picker defaults.
 */
DatePicker.defaults = (function( prefix ) {

    return {

        // The title label to use for the month nav buttons
        labelMonthNext: 'Next month',
        labelMonthPrev: 'Previous month',

        // The title label to use for the dropdown selectors
        labelMonthSelect: 'Select a month',
        labelYearSelect: 'Select a year',

        // Months and weekdays
        monthsFull: [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ],
        monthsShort: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],
        weekdaysFull: [ 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday' ],
        weekdaysShort: [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],

        // Materialize modified
        weekdaysLetter: [ 'S', 'M', 'T', 'W', 'T', 'F', 'S' ],

        // Today and clear
        today: 'Today',
        clear: 'Clear',
        close: 'Close',

        // The format to show on the `input` element
        format: 'd mmmm, yyyy',

        // Classes
        klass: {

            table: prefix + 'table',

            header: prefix + 'header',


            // Materialize Added klasses
            date_display: prefix + 'date-display',
            day_display: prefix + 'day-display',
            month_display: prefix + 'month-display',
            year_display: prefix + 'year-display',
            calendar_container: prefix + 'calendar-container',
            // end



            navPrev: prefix + 'nav--prev',
            navNext: prefix + 'nav--next',
            navDisabled: prefix + 'nav--disabled',

            month: prefix + 'month',
            year: prefix + 'year',

            selectMonth: prefix + 'select--month',
            selectYear: prefix + 'select--year',

            weekdays: prefix + 'weekday',

            day: prefix + 'day',
            disabled: prefix + 'day--disabled',
            selected: prefix + 'day--selected',
            highlighted: prefix + 'day--highlighted',
            now: prefix + 'day--today',
            infocus: prefix + 'day--infocus',
            outfocus: prefix + 'day--outfocus',

            footer: prefix + 'footer',

            buttonClear: prefix + 'button--clear',
            buttonToday: prefix + 'button--today',
            buttonClose: prefix + 'button--close'
        }
    }
})( Picker.klasses().picker + '__' )





/**
 * Extend the picker to add the date picker.
 */
Picker.extend( 'pickadate', DatePicker )


}));



/*!
 * pickadate.js v3.5.0, 2014/04/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */

(function ( factory ) {

    // AMD.
    if ( typeof define == 'function' && define.amd )
        define( 'picker', ['jquery'], factory )

    // Node.js/browserify.
    else if ( typeof exports == 'object' )
        module.exports = factory( require('jquery') )

    // Browser globals.
    else this.Picker = factory( jQuery )

}(function( $ ) {

var $window = $( window )
var $document = $( document )
var $html = $( document.documentElement )


/**
 * The picker constructor that creates a blank picker.
 */
function PickerConstructor( ELEMENT, NAME, COMPONENT, OPTIONS ) {

    // If theres no element, return the picker constructor.
    if ( !ELEMENT ) return PickerConstructor


    var
        IS_DEFAULT_THEME = false,


        // The state of the picker.
        STATE = {
            id: ELEMENT.id || 'P' + Math.abs( ~~(Math.random() * new Date()) )
        },


        // Merge the defaults and options passed.
        SETTINGS = COMPONENT ? $.extend( true, {}, COMPONENT.defaults, OPTIONS ) : OPTIONS || {},


        // Merge the default classes with the settings classes.
        CLASSES = $.extend( {}, PickerConstructor.klasses(), SETTINGS.klass ),


        // The element node wrapper into a jQuery object.
        $ELEMENT = $( ELEMENT ),


        // Pseudo picker constructor.
        PickerInstance = function() {
            return this.start()
        },


        // The picker prototype.
        P = PickerInstance.prototype = {

            constructor: PickerInstance,

            $node: $ELEMENT,


            /**
             * Initialize everything
             */
            start: function() {

                // If its already started, do nothing.
                if ( STATE && STATE.start ) return P


                // Update the picker states.
                STATE.methods = {}
                STATE.start = true
                STATE.open = false
                STATE.type = ELEMENT.type


                // Confirm focus state, convert into text input to remove UA stylings,
                // and set as readonly to prevent keyboard popup.
                ELEMENT.autofocus = ELEMENT == getActiveElement()
                ELEMENT.readOnly = !SETTINGS.editable
                ELEMENT.id = ELEMENT.id || STATE.id
                if ( ELEMENT.type != 'text' ) {
                    ELEMENT.type = 'text'
                }


                // Create a new picker component with the settings.
                P.component = new COMPONENT(P, SETTINGS)


                // Create the picker root with a holder and then prepare it.
                P.$root = $( PickerConstructor._.node('div', createWrappedComponent(), CLASSES.picker, 'id="' + ELEMENT.id + '_root" tabindex="0"') )
                prepareElementRoot()


                // If theres a format for the hidden input element, create the element.
                if ( SETTINGS.formatSubmit ) {
                    prepareElementHidden()
                }


                // Prepare the input element.
                prepareElement()


                // Insert the root as specified in the settings.
                if ( SETTINGS.container ) $( SETTINGS.container ).append( P.$root )
                else $ELEMENT.after( P.$root )


                // Bind the default component and settings events.
                P.on({
                    start: P.component.onStart,
                    render: P.component.onRender,
                    stop: P.component.onStop,
                    open: P.component.onOpen,
                    close: P.component.onClose,
                    set: P.component.onSet
                }).on({
                    start: SETTINGS.onStart,
                    render: SETTINGS.onRender,
                    stop: SETTINGS.onStop,
                    open: SETTINGS.onOpen,
                    close: SETTINGS.onClose,
                    set: SETTINGS.onSet
                })


                // Once were all set, check the theme in use.
                IS_DEFAULT_THEME = isUsingDefaultTheme( P.$root.children()[ 0 ] )


                // If the element has autofocus, open the picker.
                if ( ELEMENT.autofocus ) {
                    P.open()
                }


                // Trigger queued the start and render events.
                return P.trigger( 'start' ).trigger( 'render' )
            }, //start


            /**
             * Render a new picker
             */
            render: function( entireComponent ) {

                // Insert a new component holder in the root or box.
                if ( entireComponent ) P.$root.html( createWrappedComponent() )
                else P.$root.find( '.' + CLASSES.box ).html( P.component.nodes( STATE.open ) )

                // Trigger the queued render events.
                return P.trigger( 'render' )
            }, //render


            /**
             * Destroy everything
             */
            stop: function() {

                // If its already stopped, do nothing.
                if ( !STATE.start ) return P

                // Then close the picker.
                P.close()

                // Remove the hidden field.
                if ( P._hidden ) {
                    P._hidden.parentNode.removeChild( P._hidden )
                }

                // Remove the root.
                P.$root.remove()

                // Remove the input class, remove the stored data, and unbind
                // the events (after a tick for IE - see `P.close`).
                $ELEMENT.removeClass( CLASSES.input ).removeData( NAME )
                setTimeout( function() {
                    $ELEMENT.off( '.' + STATE.id )
                }, 0)

                // Restore the element state
                ELEMENT.type = STATE.type
                ELEMENT.readOnly = false

                // Trigger the queued stop events.
                P.trigger( 'stop' )

                // Reset the picker states.
                STATE.methods = {}
                STATE.start = false

                return P
            }, //stop


            /**
             * Open up the picker
             */
            open: function( dontGiveFocus ) {

                // If its already open, do nothing.
                if ( STATE.open ) return P

                // Add the active class.
                $ELEMENT.addClass( CLASSES.active )
                aria( ELEMENT, 'expanded', true )

                // * A Firefox bug, when `html` has `overflow:hidden`, results in
                //   killing transitions :(. So add the opened state on the next tick.
                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289
                setTimeout( function() {

                    // Add the opened class to the picker root.
                    P.$root.addClass( CLASSES.opened )
                    aria( P.$root[0], 'hidden', false )

                }, 0 )

                // If we have to give focus, bind the element and doc events.
                if ( dontGiveFocus !== false ) {

                    // Set it as open.
                    STATE.open = true

                    // Prevent the page from scrolling.
                    if ( IS_DEFAULT_THEME ) {
                        $html.
                            css( 'overflow', 'hidden' ).
                            css( 'padding-right', '+=' + getScrollbarWidth() )
                    }

                    // Pass focus to the root elements jQuery object.
                    // * Workaround for iOS8 to bring the pickers root into view.
                    P.$root[0].focus()

                    // Bind the document events.
                    $document.on( 'click.' + STATE.id + ' focusin.' + STATE.id, function( event ) {

                        var target = event.target

                        // If the target of the event is not the element, close the picker picker.
                        // * Dont worry about clicks or focusins on the root because those dont bubble up.
                        //   Also, for Firefox, a click on an `option` element bubbles up directly
                        //   to the doc. So make sure the target wasn't the doc.
                        // * In Firefox stopPropagation() doesnt prevent right-click events from bubbling,
                        //   which causes the picker to unexpectedly close when right-clicking it. So make
                        //   sure the event wasnt a right-click.
                        if ( target != ELEMENT && target != document && event.which != 3 ) {

                            // If the target was the holder that covers the screen,
                            // keep the element focused to maintain tabindex.
                            P.close( target === P.$root.children()[0] )
                        }

                    }).on( 'keydown.' + STATE.id, function( event ) {

                        var
                            // Get the keycode.
                            keycode = event.keyCode,

                            // Translate that to a selection change.
                            keycodeToMove = P.component.key[ keycode ],

                            // Grab the target.
                            target = event.target


                        // On escape, close the picker and give focus.
                        if ( keycode == 27 ) {
                            P.close( true )
                        }


                        // Check if there is a key movement or enter keypress on the element.
                        else if ( target == P.$root[0] && ( keycodeToMove || keycode == 13 ) ) {

                            // Prevent the default action to stop page movement.
                            event.preventDefault()

                            // Trigger the key movement action.
                            if ( keycodeToMove ) {
                                PickerConstructor._.trigger( P.component.key.go, P, [ PickerConstructor._.trigger( keycodeToMove ) ] )
                            }

                            // On enter, if the highlighted item isnt disabled, set the value and close.
                            else if ( !P.$root.find( '.' + CLASSES.highlighted ).hasClass( CLASSES.disabled ) ) {
                                P.set( 'select', P.component.item.highlight ).close()
                            }
                        }


                        // If the target is within the root and enter is pressed,
                        // prevent the default action and trigger a click on the target instead.
                        else if ( $.contains( P.$root[0], target ) && keycode == 13 ) {
                            event.preventDefault()
                            target.click()
                        }
                    })
                }

                // Trigger the queued open events.
                return P.trigger( 'open' )
            }, //open


            /**
             * Close the picker
             */
            close: function( giveFocus ) {

                // If we need to give focus, do it before changing states.
                if ( giveFocus ) {
                    // ....ah yes! It wouldve been incomplete without a crazy workaround for IE :|
                    // The focus is triggered *after* the close has completed - causing it
                    // to open again. So unbind and rebind the event at the next tick.
                    P.$root.off( 'focus.toOpen' )[0].focus()
                    setTimeout( function() {
                        P.$root.on( 'focus.toOpen', handleFocusToOpenEvent )
                    }, 0 )
                }

                // Remove the active class.
                $ELEMENT.removeClass( CLASSES.active )
                aria( ELEMENT, 'expanded', false )

                // * A Firefox bug, when `html` has `overflow:hidden`, results in
                //   killing transitions :(. So remove the opened state on the next tick.
                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289
                setTimeout( function() {

                    // Remove the opened and focused class from the picker root.
                    P.$root.removeClass( CLASSES.opened + ' ' + CLASSES.focused )
                    aria( P.$root[0], 'hidden', true )

                }, 0 )

                // If its already closed, do nothing more.
                if ( !STATE.open ) return P

                // Set it as closed.
                STATE.open = false

                // Allow the page to scroll.
                if ( IS_DEFAULT_THEME ) {
                    $html.
                        css( 'overflow', '' ).
                        css( 'padding-right', '-=' + getScrollbarWidth() )
                }

                // Unbind the document events.
                $document.off( '.' + STATE.id )

                // Trigger the queued close events.
                return P.trigger( 'close' )
            }, //close


            /**
             * Clear the values
             */
            clear: function( options ) {
                return P.set( 'clear', null, options )
            }, //clear


            /**
             * Set something
             */
            set: function( thing, value, options ) {

                var thingItem, thingValue,
                    thingIsObject = $.isPlainObject( thing ),
                    thingObject = thingIsObject ? thing : {}

                // Make sure we have usable options.
                options = thingIsObject && $.isPlainObject( value ) ? value : options || {}

                if ( thing ) {

                    // If the thing isnt an object, make it one.
                    if ( !thingIsObject ) {
                        thingObject[ thing ] = value
                    }

                    // Go through the things of items to set.
                    for ( thingItem in thingObject ) {

                        // Grab the value of the thing.
                        thingValue = thingObject[ thingItem ]

                        // First, if the item exists and theres a value, set it.
                        if ( thingItem in P.component.item ) {
                            if ( thingValue === undefined ) thingValue = null
                            P.component.set( thingItem, thingValue, options )
                        }

                        // Then, check to update the element value and broadcast a change.
                        if ( thingItem == 'select' || thingItem == 'clear' ) {
                            $ELEMENT.
                                val( thingItem == 'clear' ? '' : P.get( thingItem, SETTINGS.format ) ).
                                trigger( 'change' )
                        }
                    }

                    // Render a new picker.
                    P.render()
                }

                // When the method isnt muted, trigger queued set events and pass the `thingObject`.
                return options.muted ? P : P.trigger( 'set', thingObject )
            }, //set


            /**
             * Get something
             */
            get: function( thing, format ) {

                // Make sure theres something to get.
                thing = thing || 'value'

                // If a picker state exists, return that.
                if ( STATE[ thing ] != null ) {
                    return STATE[ thing ]
                }

                // Return the submission value, if that.
                if ( thing == 'valueSubmit' ) {
                    if ( P._hidden ) {
                        return P._hidden.value
                    }
                    thing = 'value'
                }

                // Return the value, if that.
                if ( thing == 'value' ) {
                    return ELEMENT.value
                }

                // Check if a component item exists, return that.
                if ( thing in P.component.item ) {
                    if ( typeof format == 'string' ) {
                        var thingValue = P.component.get( thing )
                        return thingValue ?
                            PickerConstructor._.trigger(
                                P.component.formats.toString,
                                P.component,
                                [ format, thingValue ]
                            ) : ''
                    }
                    return P.component.get( thing )
                }
            }, //get



            /**
             * Bind events on the things.
             */
            on: function( thing, method, internal ) {

                var thingName, thingMethod,
                    thingIsObject = $.isPlainObject( thing ),
                    thingObject = thingIsObject ? thing : {}

                if ( thing ) {

                    // If the thing isnt an object, make it one.
                    if ( !thingIsObject ) {
                        thingObject[ thing ] = method
                    }

                    // Go through the things to bind to.
                    for ( thingName in thingObject ) {

                        // Grab the method of the thing.
                        thingMethod = thingObject[ thingName ]

                        // If it was an internal binding, prefix it.
                        if ( internal ) {
                            thingName = '_' + thingName
                        }

                        // Make sure the thing methods collection exists.
                        STATE.methods[ thingName ] = STATE.methods[ thingName ] || []

                        // Add the method to the relative method collection.
                        STATE.methods[ thingName ].push( thingMethod )
                    }
                }

                return P
            }, //on



            /**
             * Unbind events on the things.
             */
            off: function() {
                var i, thingName,
                    names = arguments;
                for ( i = 0, namesCount = names.length; i < namesCount; i += 1 ) {
                    thingName = names[i]
                    if ( thingName in STATE.methods ) {
                        delete STATE.methods[thingName]
                    }
                }
                return P
            },


            /**
             * Fire off method events.
             */
            trigger: function( name, data ) {
                var _trigger = function( name ) {
                    var methodList = STATE.methods[ name ]
                    if ( methodList ) {
                        methodList.map( function( method ) {
                            PickerConstructor._.trigger( method, P, [ data ] )
                        })
                    }
                }
                _trigger( '_' + name )
                _trigger( name )
                return P
            } //trigger
        } //PickerInstance.prototype


    /**
     * Wrap the picker holder components together.
     */
    function createWrappedComponent() {

        // Create a picker wrapper holder
        return PickerConstructor._.node( 'div',

            // Create a picker wrapper node
            PickerConstructor._.node( 'div',

                // Create a picker frame
                PickerConstructor._.node( 'div',

                    // Create a picker box node
                    PickerConstructor._.node( 'div',

                        // Create the components nodes.
                        P.component.nodes( STATE.open ),

                        // The picker box class
                        CLASSES.box
                    ),

                    // Picker wrap class
                    CLASSES.wrap
                ),

                // Picker frame class
                CLASSES.frame
            ),

            // Picker holder class
            CLASSES.holder
        ) //endreturn
    } //createWrappedComponent



    /**
     * Prepare the input element with all bindings.
     */
    function prepareElement() {

        $ELEMENT.

            // Store the picker data by component name.
            data(NAME, P).

            // Add the input class name.
            addClass(CLASSES.input).

            // Remove the tabindex.
            attr('tabindex', -1).

            // If theres a `data-value`, update the value of the element.
            val( $ELEMENT.data('value') ?
                P.get('select', SETTINGS.format) :
                ELEMENT.value
            )


        // Only bind keydown events if the element isnt editable.
        if ( !SETTINGS.editable ) {

            $ELEMENT.

                // On focus/click, focus onto the root to open it up.
                on( 'focus.' + STATE.id + ' click.' + STATE.id, function( event ) {
                    event.preventDefault()
                    P.$root[0].focus()
                }).

                // Handle keyboard event based on the picker being opened or not.
                on( 'keydown.' + STATE.id, handleKeydownEvent )
        }


        // Update the aria attributes.
        aria(ELEMENT, {
            haspopup: true,
            expanded: false,
            readonly: false,
            owns: ELEMENT.id + '_root'
        })
    }


    /**
     * Prepare the root picker element with all bindings.
     */
    function prepareElementRoot() {

        P.$root.

            on({

                // For iOS8.
                keydown: handleKeydownEvent,

                // When something within the root is focused, stop from bubbling
                // to the doc and remove the focused state from the root.
                focusin: function( event ) {
                    P.$root.removeClass( CLASSES.focused )
                    event.stopPropagation()
                },

                // When something within the root holder is clicked, stop it
                // from bubbling to the doc.
                'mousedown click': function( event ) {

                    var target = event.target

                    // Make sure the target isnt the root holder so it can bubble up.
                    if ( target != P.$root.children()[ 0 ] ) {

                        event.stopPropagation()

                        // * For mousedown events, cancel the default action in order to
                        //   prevent cases where focus is shifted onto external elements
                        //   when using things like jQuery mobile or MagnificPopup (ref: #249 & #120).
                        //   Also, for Firefox, dont prevent action on the `option` element.
                        if ( event.type == 'mousedown' && !$( target ).is( 'input, select, textarea, button, option' )) {

                            event.preventDefault()

                            // Re-focus onto the root so that users can click away
                            // from elements focused within the picker.
                            P.$root[0].focus()
                        }
                    }
                }
            }).

            // Add/remove the target class on focus and blur.
            on({
                focus: function() {
                    $ELEMENT.addClass( CLASSES.target )
                },
                blur: function() {
                    $ELEMENT.removeClass( CLASSES.target )
                }
            }).

            // Open the picker and adjust the root focused state
            on( 'focus.toOpen', handleFocusToOpenEvent ).

            // If theres a click on an actionable element, carry out the actions.
            on( 'click', '[data-pick], [data-nav], [data-clear], [data-close]', function() {

                var $target = $( this ),
                    targetData = $target.data(),
                    targetDisabled = $target.hasClass( CLASSES.navDisabled ) || $target.hasClass( CLASSES.disabled ),

                    // * For IE, non-focusable elements can be active elements as well
                    //   (http://stackoverflow.com/a/2684561).
                    activeElement = getActiveElement()
                    activeElement = activeElement && ( activeElement.type || activeElement.href )

                // If its disabled or nothing inside is actively focused, re-focus the element.
                if ( targetDisabled || activeElement && !$.contains( P.$root[0], activeElement ) ) {
                    P.$root[0].focus()
                }

                // If something is superficially changed, update the `highlight` based on the `nav`.
                if ( !targetDisabled && targetData.nav ) {
                    P.set( 'highlight', P.component.item.highlight, { nav: targetData.nav } )
                }

                // If something is picked, set `select` then close with focus.
                else if ( !targetDisabled && 'pick' in targetData ) {
                    P.set( 'select', targetData.pick )
                }

                // If a clear button is pressed, empty the values and close with focus.
                else if ( targetData.clear ) {
                    P.clear().close( true )
                }

                else if ( targetData.close ) {
                    P.close( true )
                }

            }) //P.$root

        aria( P.$root[0], 'hidden', true )
    }


     /**
      * Prepare the hidden input element along with all bindings.
      */
    function prepareElementHidden() {

        var name

        if ( SETTINGS.hiddenName === true ) {
            name = ELEMENT.name
            ELEMENT.name = ''
        }
        else {
            name = [
                typeof SETTINGS.hiddenPrefix == 'string' ? SETTINGS.hiddenPrefix : '',
                typeof SETTINGS.hiddenSuffix == 'string' ? SETTINGS.hiddenSuffix : '_submit'
            ]
            name = name[0] + ELEMENT.name + name[1]
        }

        P._hidden = $(
            '<input ' +
            'type=hidden ' +

            // Create the name using the original inputs with a prefix and suffix.
            'name="' + name + '"' +

            // If the element has a value, set the hidden value as well.
            (
                $ELEMENT.data('value') || ELEMENT.value ?
                    ' value="' + P.get('select', SETTINGS.formatSubmit) + '"' :
                    ''
            ) +
            '>'
        )[0]

        $ELEMENT.

            // If the value changes, update the hidden input with the correct format.
            on('change.' + STATE.id, function() {
                P._hidden.value = ELEMENT.value ?
                    P.get('select', SETTINGS.formatSubmit) :
                    ''
            })


        // Insert the hidden input as specified in the settings.
        if ( SETTINGS.container ) $( SETTINGS.container ).append( P._hidden )
        else $ELEMENT.after( P._hidden )
    }


    // For iOS8.
    function handleKeydownEvent( event ) {

        var keycode = event.keyCode,

            // Check if one of the delete keys was pressed.
            isKeycodeDelete = /^(8|46)$/.test(keycode)

        // For some reason IE clears the input value on escape.
        if ( keycode == 27 ) {
            P.close()
            return false
        }

        // Check if `space` or `delete` was pressed or the picker is closed with a key movement.
        if ( keycode == 32 || isKeycodeDelete || !STATE.open && P.component.key[keycode] ) {

            // Prevent it from moving the page and bubbling to doc.
            event.preventDefault()
            event.stopPropagation()

            // If `delete` was pressed, clear the values and close the picker.
            // Otherwise open the picker.
            if ( isKeycodeDelete ) { P.clear().close() }
            else { P.open() }
        }
    }


    // Separated for IE
    function handleFocusToOpenEvent( event ) {

        // Stop the event from propagating to the doc.
        event.stopPropagation()

        // If its a focus event, add the focused class to the root.
        if ( event.type == 'focus' ) {
            P.$root.addClass( CLASSES.focused )
        }

        // And then finally open the picker.
        P.open()
    }


    // Return a new picker instance.
    return new PickerInstance()
} //PickerConstructor



/**
 * The default classes and prefix to use for the HTML classes.
 */
PickerConstructor.klasses = function( prefix ) {
    prefix = prefix || 'picker'
    return {

        picker: prefix,
        opened: prefix + '--opened',
        focused: prefix + '--focused',

        input: prefix + '__input',
        active: prefix + '__input--active',
        target: prefix + '__input--target',

        holder: prefix + '__holder',

        frame: prefix + '__frame',
        wrap: prefix + '__wrap',

        box: prefix + '__box'
    }
} //PickerConstructor.klasses



/**
 * Check if the default theme is being used.
 */
function isUsingDefaultTheme( element ) {

    var theme,
        prop = 'position'

    // For IE.
    if ( element.currentStyle ) {
        theme = element.currentStyle[prop]
    }

    // For normal browsers.
    else if ( window.getComputedStyle ) {
        theme = getComputedStyle( element )[prop]
    }

    return theme == 'fixed'
}



/**
 * Get the width of the browsers scrollbar.
 * Taken from: https://github.com/VodkaBears/Remodal/blob/master/src/jquery.remodal.js
 */
function getScrollbarWidth() {

    if ( $html.height() <= $window.height() ) {
        return 0
    }

    var $outer = $( '<div style="visibility:hidden;width:100px" />' ).
        appendTo( 'body' )

    // Get the width without scrollbars.
    var widthWithoutScroll = $outer[0].offsetWidth

    // Force adding scrollbars.
    $outer.css( 'overflow', 'scroll' )

    // Add the inner div.
    var $inner = $( '<div style="width:100%" />' ).appendTo( $outer )

    // Get the width with scrollbars.
    var widthWithScroll = $inner[0].offsetWidth

    // Remove the divs.
    $outer.remove()

    // Return the difference between the widths.
    return widthWithoutScroll - widthWithScroll
}



/**
 * PickerConstructor helper methods.
 */
PickerConstructor._ = {

    /**
     * Create a group of nodes. Expects:
     * `
        {
            min:    {Integer},
            max:    {Integer},
            i:      {Integer},
            node:   {String},
            item:   {Function}
        }
     * `
     */
    group: function( groupObject ) {

        var
            // Scope for the looped object
            loopObjectScope,

            // Create the nodes list
            nodesList = '',

            // The counter starts from the `min`
            counter = PickerConstructor._.trigger( groupObject.min, groupObject )


        // Loop from the `min` to `max`, incrementing by `i`
        for ( ; counter <= PickerConstructor._.trigger( groupObject.max, groupObject, [ counter ] ); counter += groupObject.i ) {

            // Trigger the `item` function within scope of the object
            loopObjectScope = PickerConstructor._.trigger( groupObject.item, groupObject, [ counter ] )

            // Splice the subgroup and create nodes out of the sub nodes
            nodesList += PickerConstructor._.node(
                groupObject.node,
                loopObjectScope[ 0 ],   // the node
                loopObjectScope[ 1 ],   // the classes
                loopObjectScope[ 2 ]    // the attributes
            )
        }

        // Return the list of nodes
        return nodesList
    }, //group


    /**
     * Create a dom node string
     */
    node: function( wrapper, item, klass, attribute ) {

        // If the item is false-y, just return an empty string
        if ( !item ) return ''

        // If the item is an array, do a join
        item = $.isArray( item ) ? item.join( '' ) : item

        // Check for the class
        klass = klass ? ' class="' + klass + '"' : ''

        // Check for any attributes
        attribute = attribute ? ' ' + attribute : ''

        // Return the wrapped item
        return '<' + wrapper + klass + attribute + '>' + item + '</' + wrapper + '>'
    }, //node


    /**
     * Lead numbers below 10 with a zero.
     */
    lead: function( number ) {
        return ( number < 10 ? '0': '' ) + number
    },


    /**
     * Trigger a function otherwise return the value.
     */
    trigger: function( callback, scope, args ) {
        return typeof callback == 'function' ? callback.apply( scope, args || [] ) : callback
    },


    /**
     * If the second character is a digit, length is 2 otherwise 1.
     */
    digits: function( string ) {
        return ( /\d/ ).test( string[ 1 ] ) ? 2 : 1
    },


    /**
     * Tell if something is a date object.
     */
    isDate: function( value ) {
        return {}.toString.call( value ).indexOf( 'Date' ) > -1 && this.isInteger( value.getDate() )
    },


    /**
     * Tell if something is an integer.
     */
    isInteger: function( value ) {
        return {}.toString.call( value ).indexOf( 'Number' ) > -1 && value % 1 === 0
    },


    /**
     * Create ARIA attribute strings.
     */
    ariaAttr: ariaAttr
} //PickerConstructor._



/**
 * Extend the picker with a component and defaults.
 */
PickerConstructor.extend = function( name, Component ) {

    // Extend jQuery.
    $.fn[ name ] = function( options, action ) {

        // Grab the component data.
        var componentData = this.data( name )

        // If the picker is requested, return the data object.
        if ( options == 'picker' ) {
            return componentData
        }

        // If the component data exists and `options` is a string, carry out the action.
        if ( componentData && typeof options == 'string' ) {
            return PickerConstructor._.trigger( componentData[ options ], componentData, [ action ] )
        }

        // Otherwise go through each matched element and if the component
        // doesnt exist, create a new picker using `this` element
        // and merging the defaults and options with a deep copy.
        return this.each( function() {
            var $this = $( this )
            if ( !$this.data( name ) ) {
                new PickerConstructor( this, name, Component, options )
            }
        })
    }

    // Set the defaults.
    $.fn[ name ].defaults = Component.defaults
} //PickerConstructor.extend



function aria(element, attribute, value) {
    if ( $.isPlainObject(attribute) ) {
        for ( var key in attribute ) {
            ariaSet(element, key, attribute[key])
        }
    }
    else {
        ariaSet(element, attribute, value)
    }
}
function ariaSet(element, attribute, value) {
    element.setAttribute(
        (attribute == 'role' ? '' : 'aria-') + attribute,
        value
    )
}
function ariaAttr(attribute, data) {
    if ( !$.isPlainObject(attribute) ) {
        attribute = { attribute: data }
    }
    data = ''
    for ( var key in attribute ) {
        var attr = (key == 'role' ? '' : 'aria-') + key,
            attrVal = attribute[key]
        data += attrVal == null ? '' : attr + '="' + attribute[key] + '"'
    }
    return data
}

// IE8 bug throws an error for activeElements within iframes.
function getActiveElement() {
    try {
        return document.activeElement
    } catch ( err ) { }
}



// Expose the picker constructor.
return PickerConstructor


}));



/* PROGRESS BAR */
var bar = $('.progress-bar-animated');
$(function () {
    $(bar).each(function () {
        bar_width = $(this).attr('aria-valuenow');
        $(this).width(bar_width + '%');
    });
});

/* PANEL */

function upTo(el, tagName) {
    tagName = tagName.toLowerCase();
    while (el && el.parentNode) {
        el = el.parentNode;
        if (el.tagName && el.tagName.toLowerCase() == tagName) {
            return el;
        }
    }

    // Many DOM methods return null if they don't 
    // find the element they are searching for
    // It would be OK to omit the following and just
    // return undefined
    return null;
}
//Add / remove active class to LI element inside popout 
var selector = '.popout .panel-heading';
var parentSelector = '.popout .panel .active';

$(selector).on('click', function () {

    parentDiv = upTo(this, 'DIV');
    console.log(parentDiv);
    if ($(this).hasClass('active')) {

        $(selector).removeClass('active');
        $(".popout .panel").removeClass('active');

    } else {
        $(selector).removeClass('active');
        $(".popout .panel").removeClass('active');
        $(this).addClass('active');
        $(parentDiv).addClass('active');
    }
});
/* ROTATING CARDS */
(function () {
    var cards = document.querySelectorAll(".card1.effect__click");
    for (var i = 0, len = cards.length; i < len; i++) {
        var card1 = cards[i];
        clickListener(card1);
    }

    function clickListener(card) {
        card.addEventListener("click", function () {
            var c = this.classList;
            c.contains("flipped") === true ? c.remove("flipped") : c.add("flipped");
        });
    }
})();
/* SCROLLING NAVBAR */
//jQuery to collapse the navbar on scroll
$(window).scroll(function () {
    if ($(".navbar").offset().top > 50) {
        $(".navbar-fixed-top").addClass("top-nav-collapse");
    } else {
        $(".navbar-fixed-top").removeClass("top-nav-collapse");
    }
});

//jQuery for page scrolling feature - requires jQuery Easing plugin
$(function () {
    $('a.page-scroll').bind('click', function (event) {
        var $anchor = $(this);
        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1500, 'easeInOutExpo');
        event.preventDefault();
    });
});

/* SIDE NAV */

(function ($) {

    var methods = {
        init: function (options) {
            var defaults = {
                menuWidth: 240,
                edge: 'left',
                closeOnClick: false
            };
            options = $.extend(defaults, options);

            $(this).each(function () {
                var $this = $(this);
                var menu_id = $("#" + $this.attr('data-activates'));

                // Set to width
                if (options.menuWidth != 240) {
                    menu_id.css('width', options.menuWidth);
                }

                // Add Touch Area
                $('body').append($('<div class="drag-target"></div>'));

                if (options.edge == 'left') {
                    menu_id.css('left', -1 * (options.menuWidth + 10));
                    $('.drag-target').css({
                        'left': 0
                    }); // Add Touch Area
                } else {
                    menu_id.addClass('right-aligned') // Change text-alignment to right
                        .css('right', -1 * (options.menuWidth + 10))
                        .css('left', '');
                    $('.drag-target').css({
                        'right': 0
                    }); // Add Touch Area
                }

                // If fixed sidenav, bring menu out
                if (menu_id.hasClass('fixed')) {
                    if (window.innerWidth > 992) {
                        menu_id.css('left', 0);
                    }
                }

                // Window resize to reset on large screens fixed
                if (menu_id.hasClass('fixed')) {
                    $(window).resize(function () {
                        if (window.innerWidth > 992) {
                            // Close menu if window is resized bigger than 992 and user has fixed sidenav
                            if ($('#sidenav-overlay').css('opacity') !== 0 && menuOut) {
                                removeMenu(true);
                            } else {
                                menu_id.removeAttr('style');
                                menu_id.css('width', options.menuWidth);
                            }
                        } else if (menuOut === false) {
                            if (options.edge === 'left')
                                menu_id.css('left', -1 * (options.menuWidth + 10));
                            else
                                menu_id.css('right', -1 * (options.menuWidth + 10));
                        }

                    });
                }

                // if closeOnClick, then add close event for all a tags in side sideNav
                if (options.closeOnClick === true) {
                    menu_id.on("click.itemclick", "a:not(.collapsible-header)", function () {
                        removeMenu();
                    });
                }

                function removeMenu(restoreNav) {
                    panning = false;
                    menuOut = false;

                    // Reenable scrolling
                    $('body').css('overflow', '');

                    $('#sidenav-overlay').velocity({
                        opacity: 0
                    }, {
                        duration: 200,
                        queue: false,
                        easing: 'easeOutQuad',
                        complete: function () {
                            $(this).remove();
                        }
                    });
                    if (options.edge === 'left') {
                        // Reset phantom div
                        $('.drag-target').css({
                            width: '',
                            right: '',
                            left: '0'
                        });
                        menu_id.velocity({
                            left: -1 * (options.menuWidth + 10)
                        }, {
                            duration: 200,
                            queue: false,
                            easing: 'easeOutCubic',
                            complete: function () {
                                if (restoreNav === true) {
                                    // Restore Fixed sidenav
                                    menu_id.removeAttr('style');
                                    menu_id.css('width', options.menuWidth);
                                }
                            }

                        });
                    } else {
                        // Reset phantom div
                        $('.drag-target').css({
                            width: '',
                            right: '0',
                            left: ''
                        });
                        menu_id.velocity({
                            right: -1 * (options.menuWidth + 10)
                        }, {
                            duration: 200,
                            queue: false,
                            easing: 'easeOutCubic',
                            complete: function () {
                                if (restoreNav === true) {
                                    // Restore Fixed sidenav
                                    menu_id.removeAttr('style');
                                    menu_id.css('width', options.menuWidth);
                                }
                            }
                        });
                    }
                }



                // Touch Event
                var panning = false;
                var menuOut = false;

                $('.drag-target').on('click', function () {
                    removeMenu();
                });

                $('.drag-target').hammer({
                    prevent_default: false
                }).bind('pan', function (e) {

                    if (e.gesture.pointerType == "touch") {

                        var direction = e.gesture.direction;
                        var x = e.gesture.center.x;
                        var y = e.gesture.center.y;
                        var velocityX = e.gesture.velocityX;

                        // Disable Scrolling
                        $('body').css('overflow', 'hidden');

                        // If overlay does not exist, create one and if it is clicked, close menu
                        if ($('#sidenav-overlay').length === 0) {
                            var overlay = $('<div id="sidenav-overlay"></div>');
                            overlay.css('opacity', 0).click(function () {
                                removeMenu();
                            });
                            $('body').append(overlay);
                        }

                        // Keep within boundaries
                        if (options.edge === 'left') {
                            if (x > options.menuWidth) {
                                x = options.menuWidth;
                            } else if (x < 0) {
                                x = 0;
                            }
                        }

                        if (options.edge === 'left') {
                            // Left Direction
                            if (x < (options.menuWidth / 2)) {
                                menuOut = false;
                            }
                            // Right Direction
                            else if (x >= (options.menuWidth / 2)) {
                                menuOut = true;
                            }

                            menu_id.css('left', (x - options.menuWidth));
                        } else {
                            // Left Direction
                            if (x < (window.innerWidth - options.menuWidth / 2)) {
                                menuOut = true;
                            }
                            // Right Direction
                            else if (x >= (window.innerWidth - options.menuWidth / 2)) {
                                menuOut = false;
                            }
                            var rightPos = -1 * (x - options.menuWidth / 2);
                            if (rightPos > 0) {
                                rightPos = 0;
                            }

                            menu_id.css('right', rightPos);
                        }




                        // Percentage overlay
                        var overlayPerc;
                        if (options.edge === 'left') {
                            overlayPerc = x / options.menuWidth;
                            $('#sidenav-overlay').velocity({
                                opacity: overlayPerc
                            }, {
                                duration: 50,
                                queue: false,
                                easing: 'easeOutQuad'
                            });
                        } else {
                            overlayPerc = Math.abs((x - window.innerWidth) / options.menuWidth);
                            $('#sidenav-overlay').velocity({
                                opacity: overlayPerc
                            }, {
                                duration: 50,
                                queue: false,
                                easing: 'easeOutQuad'
                            });
                        }
                    }

                }).bind('panend', function (e) {

                    if (e.gesture.pointerType == "touch") {
                        var velocityX = e.gesture.velocityX;
                        panning = false;
                        if (options.edge === 'left') {
                            // If velocityX <= 0.3 then the user is flinging the menu closed so ignore menuOut
                            if ((menuOut && velocityX <= 0.3) || velocityX < -0.5) {
                                menu_id.velocity({
                                    left: 0
                                }, {
                                    duration: 300,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('#sidenav-overlay').velocity({
                                    opacity: 1
                                }, {
                                    duration: 50,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('.drag-target').css({
                                    width: '50%',
                                    right: 0,
                                    left: ''
                                });
                            } else if (!menuOut || velocityX > 0.3) {
                                // Enable Scrolling
                                $('body').css('overflow', '');
                                // Slide menu closed
                                menu_id.velocity({
                                    left: -1 * (options.menuWidth + 10)
                                }, {
                                    duration: 200,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('#sidenav-overlay').velocity({
                                    opacity: 0
                                }, {
                                    duration: 200,
                                    queue: false,
                                    easing: 'easeOutQuad',
                                    complete: function () {
                                        $(this).remove();
                                    }
                                });
                                $('.drag-target').css({
                                    width: '10px',
                                    right: '',
                                    left: 0
                                });
                            }
                        } else {
                            if ((menuOut && velocityX >= -0.3) || velocityX > 0.5) {
                                menu_id.velocity({
                                    right: 0
                                }, {
                                    duration: 300,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('#sidenav-overlay').velocity({
                                    opacity: 1
                                }, {
                                    duration: 50,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('.drag-target').css({
                                    width: '50%',
                                    right: '',
                                    left: 0
                                });
                            } else if (!menuOut || velocityX < -0.3) {
                                // Enable Scrolling
                                $('body').css('overflow', '');
                                // Slide menu closed
                                menu_id.velocity({
                                    right: -1 * (options.menuWidth + 10)
                                }, {
                                    duration: 200,
                                    queue: false,
                                    easing: 'easeOutQuad'
                                });
                                $('#sidenav-overlay').velocity({
                                    opacity: 0
                                }, {
                                    duration: 200,
                                    queue: false,
                                    easing: 'easeOutQuad',
                                    complete: function () {
                                        $(this).remove();
                                    }
                                });
                                $('.drag-target').css({
                                    width: '10px',
                                    right: 0,
                                    left: ''
                                });
                            }
                        }

                    }
                });

                $this.click(function () {
                    if (menuOut === true) {
                        menuOut = false;
                        panning = false;
                        removeMenu();
                    } else {

                        // Disable Scrolling
                        $('body').css('overflow', 'hidden');

                        if (options.edge === 'left') {
                            $('.drag-target').css({
                                width: '50%',
                                right: 0,
                                left: ''
                            });
                            menu_id.velocity({
                                left: 0
                            }, {
                                duration: 300,
                                queue: false,
                                easing: 'easeOutQuad'
                            });
                        } else {
                            $('.drag-target').css({
                                width: '50%',
                                right: '',
                                left: 0
                            });
                            menu_id.velocity({
                                right: 0
                            }, {
                                duration: 300,
                                queue: false,
                                easing: 'easeOutQuad'
                            });
                            menu_id.css('left', '');
                        }

                        var overlay = $('<div id="sidenav-overlay"></div>');
                        overlay.css('opacity', 0)
                            .click(function () {
                                menuOut = false;
                                panning = false;
                                removeMenu();
                                overlay.velocity({
                                    opacity: 0
                                }, {
                                    duration: 300,
                                    queue: false,
                                    easing: 'easeOutQuad',
                                    complete: function () {
                                        $(this).remove();
                                    }
                                });

                            });
                        $('body').append(overlay);
                        overlay.velocity({
                            opacity: 1
                        }, {
                            duration: 300,
                            queue: false,
                            easing: 'easeOutQuad',
                            complete: function () {
                                menuOut = true;
                                panning = false;
                            }
                        });
                    }

                    return false;
                });
            });


        },
        show: function () {
            this.trigger('click');
        },
        hide: function () {
            $('#sidenav-overlay').trigger('click');
        }
    };


    $.fn.sideNav = function (methodOrOptions) {
        if (methods[methodOrOptions]) {
            return methods[methodOrOptions].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof methodOrOptions === 'object' || !methodOrOptions) {
            // Default to "init"
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + methodOrOptions + ' does not exist on jQuery.sideNav');
        }
    }; // Plugin end
}(jQuery));
//SMOOTH SCROLL
$(document).ready(function () {
    $('a[href^="#"]').on('click', function (e) {
        e.preventDefault();

        var target = this.hash;
        var $target = $(target);

        $('html, body').stop().animate({
            'scrollTop': $target.offset().top
        }, 900, 'swing', function () {
            window.location.hash = target;
        });
    });
});

/*
 * Toastr
 * Copyright 2012-2015
 * Authors: John Papa, Hans Fjllemark, and Tim Ferrell.
 * All Rights Reserved.
 * Use, reproduction, distribution, and modification of this code is subject to the terms and
 * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
 *
 * ARIA Support: Greta Krafsig
 *
 * Project: https://github.com/CodeSeven/toastr
 */
/* global define */
(function (define) {
    define(['jquery'], function ($) {
        return (function () {
            var $container;
            var listener;
            var toastId = 0;
            var toastType = {
                error: 'error',
                info: 'info',
                success: 'success',
                warning: 'warning'
            };

            var toastr = {
                clear: clear,
                remove: remove,
                error: error,
                getContainer: getContainer,
                info: info,
                options: {},
                subscribe: subscribe,
                success: success,
                version: '2.1.2',
                warning: warning
            };

            var previousToast;

            return toastr;

            ////////////////

            function error(message, title, optionsOverride) {
                return notify({
                    type: toastType.error,
                    iconClass: getOptions().iconClasses.error,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function getContainer(options, create) {
                if (!options) { options = getOptions(); }
                $container = $('#' + options.containerId);
                if ($container.length) {
                    return $container;
                }
                if (create) {
                    $container = createContainer(options);
                }
                return $container;
            }

            function info(message, title, optionsOverride) {
                return notify({
                    type: toastType.info,
                    iconClass: getOptions().iconClasses.info,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function subscribe(callback) {
                listener = callback;
            }

            function success(message, title, optionsOverride) {
                return notify({
                    type: toastType.success,
                    iconClass: getOptions().iconClasses.success,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function warning(message, title, optionsOverride) {
                return notify({
                    type: toastType.warning,
                    iconClass: getOptions().iconClasses.warning,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function clear($toastElement, clearOptions) {
                var options = getOptions();
                if (!$container) { getContainer(options); }
                if (!clearToast($toastElement, options, clearOptions)) {
                    clearContainer(options);
                }
            }

            function remove($toastElement) {
                var options = getOptions();
                if (!$container) { getContainer(options); }
                if ($toastElement && $(':focus', $toastElement).length === 0) {
                    removeToast($toastElement);
                    return;
                }
                if ($container.children().length) {
                    $container.remove();
                }
            }

            // internal functions

            function clearContainer (options) {
                var toastsToClear = $container.children();
                for (var i = toastsToClear.length - 1; i >= 0; i--) {
                    clearToast($(toastsToClear[i]), options);
                }
            }

            function clearToast ($toastElement, options, clearOptions) {
                var force = clearOptions && clearOptions.force ? clearOptions.force : false;
                if ($toastElement && (force || $(':focus', $toastElement).length === 0)) {
                    $toastElement[options.hideMethod]({
                        duration: options.hideDuration,
                        easing: options.hideEasing,
                        complete: function () { removeToast($toastElement); }
                    });
                    return true;
                }
                return false;
            }

            function createContainer(options) {
                $container = $('<div/>')
                    .attr('id', options.containerId)
                    .addClass(options.positionClass)
                    .attr('aria-live', 'polite')
                    .attr('role', 'alert');

                $container.appendTo($(options.target));
                return $container;
            }

            function getDefaults() {
                return {
                    tapToDismiss: true,
                    toastClass: 'toast',
                    containerId: 'toast-container',
                    debug: false,

                    showMethod: 'fadeIn', //fadeIn, slideDown, and show are built into jQuery
                    showDuration: 300,
                    showEasing: 'swing', //swing and linear are built into jQuery
                    onShown: undefined,
                    hideMethod: 'fadeOut',
                    hideDuration: 1000,
                    hideEasing: 'swing',
                    onHidden: undefined,
                    closeMethod: false,
                    closeDuration: false,
                    closeEasing: false,

                    extendedTimeOut: 1000,
                    iconClasses: {
                        error: 'toast-error',
                        info: 'toast-info',
                        success: 'toast-success',
                        warning: 'toast-warning'
                    },
                    iconClass: 'toast-info',
                    positionClass: 'toast-top-right',
                    timeOut: 5000, // Set timeOut and extendedTimeOut to 0 to make it sticky
                    titleClass: 'toast-title',
                    messageClass: 'toast-message',
                    escapeHtml: false,
                    target: 'body',
                    closeHtml: '<button type="button">&times;</button>',
                    newestOnTop: true,
                    preventDuplicates: false,
                    progressBar: false
                };
            }

            function publish(args) {
                if (!listener) { return; }
                listener(args);
            }

            function notify(map) {
                var options = getOptions();
                var iconClass = map.iconClass || options.iconClass;

                if (typeof (map.optionsOverride) !== 'undefined') {
                    options = $.extend(options, map.optionsOverride);
                    iconClass = map.optionsOverride.iconClass || iconClass;
                }

                if (shouldExit(options, map)) { return; }

                toastId++;

                $container = getContainer(options, true);

                var intervalId = null;
                var $toastElement = $('<div/>');
                var $titleElement = $('<div/>');
                var $messageElement = $('<div/>');
                var $progressElement = $('<div/>');
                var $closeElement = $(options.closeHtml);
                var progressBar = {
                    intervalId: null,
                    hideEta: null,
                    maxHideTime: null
                };
                var response = {
                    toastId: toastId,
                    state: 'visible',
                    startTime: new Date(),
                    options: options,
                    map: map
                };

                personalizeToast();

                displayToast();

                handleEvents();

                publish(response);

                if (options.debug && console) {
                    console.log(response);
                }

                return $toastElement;

                function escapeHtml(source) {
                    if (source == null)
                        source = "";

                    return new String(source)
                        .replace(/&/g, '&amp;')
                        .replace(/"/g, '&quot;')
                        .replace(/'/g, '&#39;')
                        .replace(/</g, '&lt;')
                        .replace(/>/g, '&gt;');
                }

                function personalizeToast() {
                    setIcon();
                    setTitle();
                    setMessage();
                    setCloseButton();
                    setProgressBar();
                    setSequence();
                }

                function handleEvents() {
                    $toastElement.hover(stickAround, delayedHideToast);
                    if (!options.onclick && options.tapToDismiss) {
                        $toastElement.click(hideToast);
                    }

                    if (options.closeButton && $closeElement) {
                        $closeElement.click(function (event) {
                            if (event.stopPropagation) {
                                event.stopPropagation();
                            } else if (event.cancelBubble !== undefined && event.cancelBubble !== true) {
                                event.cancelBubble = true;
                            }
                            hideToast(true);
                        });
                    }

                    if (options.onclick) {
                        $toastElement.click(function (event) {
                            options.onclick(event);
                            hideToast();
                        });
                    }
                }

                function displayToast() {
                    $toastElement.hide();

                    $toastElement[options.showMethod](
                        {duration: options.showDuration, easing: options.showEasing, complete: options.onShown}
                    );

                    if (options.timeOut > 0) {
                        intervalId = setTimeout(hideToast, options.timeOut);
                        progressBar.maxHideTime = parseFloat(options.timeOut);
                        progressBar.hideEta = new Date().getTime() + progressBar.maxHideTime;
                        if (options.progressBar) {
                            progressBar.intervalId = setInterval(updateProgress, 10);
                        }
                    }
                }

                function setIcon() {
                    if (map.iconClass) {
                        $toastElement.addClass(options.toastClass).addClass(iconClass);
                    }
                }

                function setSequence() {
                    if (options.newestOnTop) {
                        $container.prepend($toastElement);
                    } else {
                        $container.append($toastElement);
                    }
                }

                function setTitle() {
                    if (map.title) {
                        $titleElement.append(!options.escapeHtml ? map.title : escapeHtml(map.title)).addClass(options.titleClass);
                        $toastElement.append($titleElement);
                    }
                }

                function setMessage() {
                    if (map.message) {
                        $messageElement.append(!options.escapeHtml ? map.message : escapeHtml(map.message)).addClass(options.messageClass);
                        $toastElement.append($messageElement);
                    }
                }

                function setCloseButton() {
                    if (options.closeButton) {
                        $closeElement.addClass('toast-close-button').attr('role', 'button');
                        $toastElement.prepend($closeElement);
                    }
                }

                function setProgressBar() {
                    if (options.progressBar) {
                        $progressElement.addClass('toast-progress');
                        $toastElement.prepend($progressElement);
                    }
                }

                function shouldExit(options, map) {
                    if (options.preventDuplicates) {
                        if (map.message === previousToast) {
                            return true;
                        } else {
                            previousToast = map.message;
                        }
                    }
                    return false;
                }

                function hideToast(override) {
                    var method = override && options.closeMethod !== false ? options.closeMethod : options.hideMethod;
                    var duration = override && options.closeDuration !== false ?
                        options.closeDuration : options.hideDuration;
                    var easing = override && options.closeEasing !== false ? options.closeEasing : options.hideEasing;
                    if ($(':focus', $toastElement).length && !override) {
                        return;
                    }
                    clearTimeout(progressBar.intervalId);
                    return $toastElement[method]({
                        duration: duration,
                        easing: easing,
                        complete: function () {
                            removeToast($toastElement);
                            if (options.onHidden && response.state !== 'hidden') {
                                options.onHidden();
                            }
                            response.state = 'hidden';
                            response.endTime = new Date();
                            publish(response);
                        }
                    });
                }

                function delayedHideToast() {
                    if (options.timeOut > 0 || options.extendedTimeOut > 0) {
                        intervalId = setTimeout(hideToast, options.extendedTimeOut);
                        progressBar.maxHideTime = parseFloat(options.extendedTimeOut);
                        progressBar.hideEta = new Date().getTime() + progressBar.maxHideTime;
                    }
                }

                function stickAround() {
                    clearTimeout(intervalId);
                    progressBar.hideEta = 0;
                    $toastElement.stop(true, true)[options.showMethod](
                        {duration: options.showDuration, easing: options.showEasing}
                    );
                }

                function updateProgress() {
                    var percentage = ((progressBar.hideEta - (new Date().getTime())) / progressBar.maxHideTime) * 100;
                    $progressElement.width(percentage + '%');
                }
            }

            function getOptions() {
                return $.extend({}, getDefaults(), toastr.options);
            }

            function removeToast($toastElement) {
                if (!$container) { $container = getContainer(); }
                if ($toastElement.is(':visible')) {
                    return;
                }
                $toastElement.remove();
                $toastElement = null;
                if ($container.children().length === 0) {
                    $container.remove();
                    previousToast = undefined;
                }
            }

        })();
    });
}(typeof define === 'function' && define.amd ? define : function (deps, factory) {
    if (typeof module !== 'undefined' && module.exports) { //Node
        module.exports = factory(require('jquery'));
    } else {
        window.toastr = factory(window.jQuery);
    }
}));

/*! VelocityJS.org (1.2.2). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
! function (e) {
    function t(e) {
        var t = e.length,
            r = $.type(e);
        return "function" === r || $.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === r || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
    }
    if (!e.jQuery) {
        var $ = function (e, t) {
            return new $.fn.init(e, t)
        };
        $.isWindow = function (e) {
            return null != e && e == e.window
        }, $.type = function (e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? a[o.call(e)] || "object" : typeof e
        }, $.isArray = Array.isArray || function (e) {
            return "array" === $.type(e)
        }, $.isPlainObject = function (e) {
            var t;
            if (!e || "object" !== $.type(e) || e.nodeType || $.isWindow(e)) return !1;
            try {
                if (e.constructor && !n.call(e, "constructor") && !n.call(e.constructor.prototype, "isPrototypeOf")) return !1
            } catch (r) {
                return !1
            }
            for (t in e);
            return void 0 === t || n.call(e, t)
        }, $.each = function (e, r, a) {
            var n, o = 0,
                i = e.length,
                s = t(e);
            if (a) {
                if (s)
                    for (; i > o && (n = r.apply(e[o], a), n !== !1); o++);
                else
                    for (o in e)
                        if (n = r.apply(e[o], a), n === !1) break
            } else if (s)
                for (; i > o && (n = r.call(e[o], o, e[o]), n !== !1); o++);
            else
                for (o in e)
                    if (n = r.call(e[o], o, e[o]), n === !1) break; return e
        }, $.data = function (e, t, a) {
            if (void 0 === a) {
                var n = e[$.expando],
                    o = n && r[n];
                if (void 0 === t) return o;
                if (o && t in o) return o[t]
            } else if (void 0 !== t) {
                var n = e[$.expando] || (e[$.expando] = ++$.uuid);
                return r[n] = r[n] || {}, r[n][t] = a, a
            }
        }, $.removeData = function (e, t) {
            var a = e[$.expando],
                n = a && r[a];
            n && $.each(t, function (e, t) {
                delete n[t]
            })
        }, $.extend = function () {
            var e, t, r, a, n, o, i = arguments[0] || {},
                s = 1,
                l = arguments.length,
                u = !1;
            for ("boolean" == typeof i && (u = i, i = arguments[s] || {}, s++), "object" != typeof i && "function" !== $.type(i) && (i = {}), s === l && (i = this, s--); l > s; s++)
                if (null != (n = arguments[s]))
                    for (a in n) e = i[a], r = n[a], i !== r && (u && r && ($.isPlainObject(r) || (t = $.isArray(r))) ? (t ? (t = !1, o = e && $.isArray(e) ? e : []) : o = e && $.isPlainObject(e) ? e : {}, i[a] = $.extend(u, o, r)) : void 0 !== r && (i[a] = r));
            return i
        }, $.queue = function (e, r, a) {
            function n(e, r) {
                var a = r || [];
                return null != e && (t(Object(e)) ? ! function (e, t) {
                    for (var r = +t.length, a = 0, n = e.length; r > a;) e[n++] = t[a++];
                    if (r !== r)
                        for (; void 0 !== t[a];) e[n++] = t[a++];
                    return e.length = n, e
                }(a, "string" == typeof e ? [e] : e) : [].push.call(a, e)), a
            }
            if (e) {
                r = (r || "fx") + "queue";
                var o = $.data(e, r);
                return a ? (!o || $.isArray(a) ? o = $.data(e, r, n(a)) : o.push(a), o) : o || []
            }
        }, $.dequeue = function (e, t) {
            $.each(e.nodeType ? [e] : e, function (e, r) {
                t = t || "fx";
                var a = $.queue(r, t),
                    n = a.shift();
                "inprogress" === n && (n = a.shift()), n && ("fx" === t && a.unshift("inprogress"), n.call(r, function () {
                    $.dequeue(r, t)
                }))
            })
        }, $.fn = $.prototype = {
            init: function (e) {
                if (e.nodeType) return this[0] = e, this;
                throw new Error("Not a DOM node.")
            },
            offset: function () {
                var t = this[0].getBoundingClientRect ? this[0].getBoundingClientRect() : {
                    top: 0,
                    left: 0
                };
                return {
                    top: t.top + (e.pageYOffset || document.scrollTop || 0) - (document.clientTop || 0),
                    left: t.left + (e.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || 0)
                }
            },
            position: function () {
                function e() {
                    for (var e = this.offsetParent || document; e && "html" === !e.nodeType.toLowerCase && "static" === e.style.position;) e = e.offsetParent;
                    return e || document
                }
                var t = this[0],
                    e = e.apply(t),
                    r = this.offset(),
                    a = /^(?:body|html)$/i.test(e.nodeName) ? {
                        top: 0,
                        left: 0
                    } : $(e).offset();
                return r.top -= parseFloat(t.style.marginTop) || 0, r.left -= parseFloat(t.style.marginLeft) || 0, e.style && (a.top += parseFloat(e.style.borderTopWidth) || 0, a.left += parseFloat(e.style.borderLeftWidth) || 0), {
                    top: r.top - a.top,
                    left: r.left - a.left
                }
            }
        };
        var r = {};
        $.expando = "velocity" + (new Date).getTime(), $.uuid = 0;
        for (var a = {}, n = a.hasOwnProperty, o = a.toString, i = "Boolean Number String Function Array Date RegExp Object Error".split(" "), s = 0; s < i.length; s++) a["[object " + i[s] + "]"] = i[s].toLowerCase();
        $.fn.init.prototype = $.fn, e.Velocity = {
            Utilities: $
        }
    }
}(window),
function (e) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : e()
}(function () {
    return function (e, t, r, a) {
        function n(e) {
            for (var t = -1, r = e ? e.length : 0, a = []; ++t < r;) {
                var n = e[t];
                n && a.push(n)
            }
            return a
        }

        function o(e) {
            return g.isWrapped(e) ? e = [].slice.call(e) : g.isNode(e) && (e = [e]), e
        }

        function i(e) {
            var t = $.data(e, "velocity");
            return null === t ? a : t
        }

        function s(e) {
            return function (t) {
                return Math.round(t * e) * (1 / e)
            }
        }

        function l(e, r, a, n) {
            function o(e, t) {
                return 1 - 3 * t + 3 * e
            }

            function i(e, t) {
                return 3 * t - 6 * e
            }

            function s(e) {
                return 3 * e
            }

            function l(e, t, r) {
                return ((o(t, r) * e + i(t, r)) * e + s(t)) * e
            }

            function u(e, t, r) {
                return 3 * o(t, r) * e * e + 2 * i(t, r) * e + s(t)
            }

            function c(t, r) {
                for (var n = 0; m > n; ++n) {
                    var o = u(r, e, a);
                    if (0 === o) return r;
                    var i = l(r, e, a) - t;
                    r -= i / o
                }
                return r
            }

            function p() {
                for (var t = 0; b > t; ++t) w[t] = l(t * x, e, a)
            }

            function f(t, r, n) {
                var o, i, s = 0;
                do i = r + (n - r) / 2, o = l(i, e, a) - t, o > 0 ? n = i : r = i; while (Math.abs(o) > h && ++s < v);
                return i
            }

            function d(t) {
                for (var r = 0, n = 1, o = b - 1; n != o && w[n] <= t; ++n) r += x;
                --n;
                var i = (t - w[n]) / (w[n + 1] - w[n]),
                    s = r + i * x,
                    l = u(s, e, a);
                return l >= y ? c(t, s) : 0 == l ? s : f(t, r, r + x)
            }

            function g() {
                V = !0, (e != r || a != n) && p()
            }
            var m = 4,
                y = .001,
                h = 1e-7,
                v = 10,
                b = 11,
                x = 1 / (b - 1),
                S = "Float32Array" in t;
            if (4 !== arguments.length) return !1;
            for (var P = 0; 4 > P; ++P)
                if ("number" != typeof arguments[P] || isNaN(arguments[P]) || !isFinite(arguments[P])) return !1;
            e = Math.min(e, 1), a = Math.min(a, 1), e = Math.max(e, 0), a = Math.max(a, 0);
            var w = S ? new Float32Array(b) : new Array(b),
                V = !1,
                C = function (t) {
                    return V || g(), e === r && a === n ? t : 0 === t ? 0 : 1 === t ? 1 : l(d(t), r, n)
                };
            C.getControlPoints = function () {
                return [{
                    x: e,
                    y: r
                }, {
                    x: a,
                    y: n
                }]
            };
            var T = "generateBezier(" + [e, r, a, n] + ")";
            return C.toString = function () {
                return T
            }, C
        }

        function u(e, t) {
            var r = e;
            return g.isString(e) ? v.Easings[e] || (r = !1) : r = g.isArray(e) && 1 === e.length ? s.apply(null, e) : g.isArray(e) && 2 === e.length ? b.apply(null, e.concat([t])) : g.isArray(e) && 4 === e.length ? l.apply(null, e) : !1, r === !1 && (r = v.Easings[v.defaults.easing] ? v.defaults.easing : h), r
        }

        function c(e) {
            if (e) {
                var t = (new Date).getTime(),
                    r = v.State.calls.length;
                r > 1e4 && (v.State.calls = n(v.State.calls));
                for (var o = 0; r > o; o++)
                    if (v.State.calls[o]) {
                        var s = v.State.calls[o],
                            l = s[0],
                            u = s[2],
                            f = s[3],
                            d = !!f,
                            m = null;
                        f || (f = v.State.calls[o][3] = t - 16);
                        for (var y = Math.min((t - f) / u.duration, 1), h = 0, b = l.length; b > h; h++) {
                            var S = l[h],
                                w = S.element;
                            if (i(w)) {
                                var V = !1;
                                if (u.display !== a && null !== u.display && "none" !== u.display) {
                                    if ("flex" === u.display) {
                                        var C = ["-webkit-box", "-moz-box", "-ms-flexbox", "-webkit-flex"];
                                        $.each(C, function (e, t) {
                                            x.setPropertyValue(w, "display", t)
                                        })
                                    }
                                    x.setPropertyValue(w, "display", u.display)
                                }
                                u.visibility !== a && "hidden" !== u.visibility && x.setPropertyValue(w, "visibility", u.visibility);
                                for (var T in S)
                                    if ("element" !== T) {
                                        var k = S[T],
                                            A, F = g.isString(k.easing) ? v.Easings[k.easing] : k.easing;
                                        if (1 === y) A = k.endValue;
                                        else {
                                            var E = k.endValue - k.startValue;
                                            if (A = k.startValue + E * F(y, u, E), !d && A === k.currentValue) continue
                                        }
                                        if (k.currentValue = A, "tween" === T) m = A;
                                        else {
                                            if (x.Hooks.registered[T]) {
                                                var j = x.Hooks.getRoot(T),
                                                    H = i(w).rootPropertyValueCache[j];
                                                H && (k.rootPropertyValue = H)
                                            }
                                            var N = x.setPropertyValue(w, T, k.currentValue + (0 === parseFloat(A) ? "" : k.unitType), k.rootPropertyValue, k.scrollData);
                                            x.Hooks.registered[T] && (i(w).rootPropertyValueCache[j] = x.Normalizations.registered[j] ? x.Normalizations.registered[j]("extract", null, N[1]) : N[1]), "transform" === N[0] && (V = !0)
                                        }
                                    }
                                u.mobileHA && i(w).transformCache.translate3d === a && (i(w).transformCache.translate3d = "(0px, 0px, 0px)", V = !0), V && x.flushTransformCache(w)
                            }
                        }
                        u.display !== a && "none" !== u.display && (v.State.calls[o][2].display = !1), u.visibility !== a && "hidden" !== u.visibility && (v.State.calls[o][2].visibility = !1), u.progress && u.progress.call(s[1], s[1], y, Math.max(0, f + u.duration - t), f, m), 1 === y && p(o)
                    }
            }
            v.State.isTicking && P(c)
        }

        function p(e, t) {
            if (!v.State.calls[e]) return !1;
            for (var r = v.State.calls[e][0], n = v.State.calls[e][1], o = v.State.calls[e][2], s = v.State.calls[e][4], l = !1, u = 0, c = r.length; c > u; u++) {
                var p = r[u].element;
                if (t || o.loop || ("none" === o.display && x.setPropertyValue(p, "display", o.display), "hidden" === o.visibility && x.setPropertyValue(p, "visibility", o.visibility)), o.loop !== !0 && ($.queue(p)[1] === a || !/\.velocityQueueEntryFlag/i.test($.queue(p)[1])) && i(p)) {
                    i(p).isAnimating = !1, i(p).rootPropertyValueCache = {};
                    var f = !1;
                    $.each(x.Lists.transforms3D, function (e, t) {
                        var r = /^scale/.test(t) ? 1 : 0,
                            n = i(p).transformCache[t];
                        i(p).transformCache[t] !== a && new RegExp("^\\(" + r + "[^.]").test(n) && (f = !0, delete i(p).transformCache[t])
                    }), o.mobileHA && (f = !0, delete i(p).transformCache.translate3d), f && x.flushTransformCache(p), x.Values.removeClass(p, "velocity-animating")
                }
                if (!t && o.complete && !o.loop && u === c - 1) try {
                    o.complete.call(n, n)
                } catch (d) {
                    setTimeout(function () {
                        throw d
                    }, 1)
                }
                s && o.loop !== !0 && s(n), i(p) && o.loop === !0 && !t && ($.each(i(p).tweensContainer, function (e, t) {
                    /^rotate/.test(e) && 360 === parseFloat(t.endValue) && (t.endValue = 0, t.startValue = 360), /^backgroundPosition/.test(e) && 100 === parseFloat(t.endValue) && "%" === t.unitType && (t.endValue = 0, t.startValue = 100)
                }), v(p, "reverse", {
                    loop: !0,
                    delay: o.delay
                })), o.queue !== !1 && $.dequeue(p, o.queue)
            }
            v.State.calls[e] = !1;
            for (var g = 0, m = v.State.calls.length; m > g; g++)
                if (v.State.calls[g] !== !1) {
                    l = !0;
                    break
                }
            l === !1 && (v.State.isTicking = !1, delete v.State.calls, v.State.calls = [])
        }
        var f = function () {
                if (r.documentMode) return r.documentMode;
                for (var e = 7; e > 4; e--) {
                    var t = r.createElement("div");
                    if (t.innerHTML = "<!--[if IE " + e + "]><span></span><![endif]-->", t.getElementsByTagName("span").length) return t = null, e
                }
                return a
            }(),
            d = function () {
                var e = 0;
                return t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || function (t) {
                    var r = (new Date).getTime(),
                        a;
                    return a = Math.max(0, 16 - (r - e)), e = r + a, setTimeout(function () {
                        t(r + a)
                    }, a)
                }
            }(),
            g = {
                isString: function (e) {
                    return "string" == typeof e
                },
                isArray: Array.isArray || function (e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                },
                isFunction: function (e) {
                    return "[object Function]" === Object.prototype.toString.call(e)
                },
                isNode: function (e) {
                    return e && e.nodeType
                },
                isNodeList: function (e) {
                    return "object" == typeof e && /^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e)) && e.length !== a && (0 === e.length || "object" == typeof e[0] && e[0].nodeType > 0)
                },
                isWrapped: function (e) {
                    return e && (e.jquery || t.Zepto && t.Zepto.zepto.isZ(e))
                },
                isSVG: function (e) {
                    return t.SVGElement && e instanceof t.SVGElement
                },
                isEmptyObject: function (e) {
                    for (var t in e) return !1;
                    return !0
                }
            },
            $, m = !1;
        if (e.fn && e.fn.jquery ? ($ = e, m = !0) : $ = t.Velocity.Utilities, 8 >= f && !m) throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");
        if (7 >= f) return void(jQuery.fn.velocity = jQuery.fn.animate);
        var y = 400,
            h = "swing",
            v = {
                State: {
                    isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
                    isAndroid: /Android/i.test(navigator.userAgent),
                    isGingerbread: /Android 2\.3\.[3-7]/i.test(navigator.userAgent),
                    isChrome: t.chrome,
                    isFirefox: /Firefox/i.test(navigator.userAgent),
                    prefixElement: r.createElement("div"),
                    prefixMatches: {},
                    scrollAnchor: null,
                    scrollPropertyLeft: null,
                    scrollPropertyTop: null,
                    isTicking: !1,
                    calls: []
                },
                CSS: {},
                Utilities: $,
                Redirects: {},
                Easings: {},
                Promise: t.Promise,
                defaults: {
                    queue: "",
                    duration: y,
                    easing: h,
                    begin: a,
                    complete: a,
                    progress: a,
                    display: a,
                    visibility: a,
                    loop: !1,
                    delay: !1,
                    mobileHA: !0,
                    _cacheValues: !0
                },
                init: function (e) {
                    $.data(e, "velocity", {
                        isSVG: g.isSVG(e),
                        isAnimating: !1,
                        computedStyle: null,
                        tweensContainer: null,
                        rootPropertyValueCache: {},
                        transformCache: {}
                    })
                },
                hook: null,
                mock: !1,
                version: {
                    major: 1,
                    minor: 2,
                    patch: 2
                },
                debug: !1
            };
        t.pageYOffset !== a ? (v.State.scrollAnchor = t, v.State.scrollPropertyLeft = "pageXOffset", v.State.scrollPropertyTop = "pageYOffset") : (v.State.scrollAnchor = r.documentElement || r.body.parentNode || r.body, v.State.scrollPropertyLeft = "scrollLeft", v.State.scrollPropertyTop = "scrollTop");
        var b = function () {
            function e(e) {
                return -e.tension * e.x - e.friction * e.v
            }

            function t(t, r, a) {
                var n = {
                    x: t.x + a.dx * r,
                    v: t.v + a.dv * r,
                    tension: t.tension,
                    friction: t.friction
                };
                return {
                    dx: n.v,
                    dv: e(n)
                }
            }

            function r(r, a) {
                var n = {
                        dx: r.v,
                        dv: e(r)
                    },
                    o = t(r, .5 * a, n),
                    i = t(r, .5 * a, o),
                    s = t(r, a, i),
                    l = 1 / 6 * (n.dx + 2 * (o.dx + i.dx) + s.dx),
                    u = 1 / 6 * (n.dv + 2 * (o.dv + i.dv) + s.dv);
                return r.x = r.x + l * a, r.v = r.v + u * a, r
            }
            return function a(e, t, n) {
                var o = {
                        x: -1,
                        v: 0,
                        tension: null,
                        friction: null
                    },
                    i = [0],
                    s = 0,
                    l = 1e-4,
                    u = .016,
                    c, p, f;
                for (e = parseFloat(e) || 500, t = parseFloat(t) || 20, n = n || null, o.tension = e, o.friction = t, c = null !== n, c ? (s = a(e, t), p = s / n * u) : p = u;;)
                    if (f = r(f || o, p), i.push(1 + f.x), s += 16, !(Math.abs(f.x) > l && Math.abs(f.v) > l)) break;
                return c ? function (e) {
                    return i[e * (i.length - 1) | 0]
                } : s
            }
        }();
        v.Easings = {
            linear: function (e) {
                return e
            },
            swing: function (e) {
                return .5 - Math.cos(e * Math.PI) / 2
            },
            spring: function (e) {
                return 1 - Math.cos(4.5 * e * Math.PI) * Math.exp(6 * -e)
            }
        }, $.each([["ease", [.25, .1, .25, 1]], ["ease-in", [.42, 0, 1, 1]], ["ease-out", [0, 0, .58, 1]], ["ease-in-out", [.42, 0, .58, 1]], ["easeInSine", [.47, 0, .745, .715]], ["easeOutSine", [.39, .575, .565, 1]], ["easeInOutSine", [.445, .05, .55, .95]], ["easeInQuad", [.55, .085, .68, .53]], ["easeOutQuad", [.25, .46, .45, .94]], ["easeInOutQuad", [.455, .03, .515, .955]], ["easeInCubic", [.55, .055, .675, .19]], ["easeOutCubic", [.215, .61, .355, 1]], ["easeInOutCubic", [.645, .045, .355, 1]], ["easeInQuart", [.895, .03, .685, .22]], ["easeOutQuart", [.165, .84, .44, 1]], ["easeInOutQuart", [.77, 0, .175, 1]], ["easeInQuint", [.755, .05, .855, .06]], ["easeOutQuint", [.23, 1, .32, 1]], ["easeInOutQuint", [.86, 0, .07, 1]], ["easeInExpo", [.95, .05, .795, .035]], ["easeOutExpo", [.19, 1, .22, 1]], ["easeInOutExpo", [1, 0, 0, 1]], ["easeInCirc", [.6, .04, .98, .335]], ["easeOutCirc", [.075, .82, .165, 1]], ["easeInOutCirc", [.785, .135, .15, .86]]], function (e, t) {
            v.Easings[t[0]] = l.apply(null, t[1])
        });
        var x = v.CSS = {
            RegEx: {
                isHex: /^#([A-f\d]{3}){1,2}$/i,
                valueUnwrap: /^[A-z]+\((.*)\)$/i,
                wrappedValueAlreadyExtracted: /[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,
                valueSplit: /([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi
            },
            Lists: {
                colors: ["fill", "stroke", "stopColor", "color", "backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor", "outlineColor"],
                transformsBase: ["translateX", "translateY", "scale", "scaleX", "scaleY", "skewX", "skewY", "rotateZ"],
                transforms3D: ["transformPerspective", "translateZ", "scaleZ", "rotateX", "rotateY"]
            },
            Hooks: {
                templates: {
                    textShadow: ["Color X Y Blur", "black 0px 0px 0px"],
                    boxShadow: ["Color X Y Blur Spread", "black 0px 0px 0px 0px"],
                    clip: ["Top Right Bottom Left", "0px 0px 0px 0px"],
                    backgroundPosition: ["X Y", "0% 0%"],
                    transformOrigin: ["X Y Z", "50% 50% 0px"],
                    perspectiveOrigin: ["X Y", "50% 50%"]
                },
                registered: {},
                register: function () {
                    for (var e = 0; e < x.Lists.colors.length; e++) {
                        var t = "color" === x.Lists.colors[e] ? "0 0 0 1" : "255 255 255 1";
                        x.Hooks.templates[x.Lists.colors[e]] = ["Red Green Blue Alpha", t]
                    }
                    var r, a, n;
                    if (f)
                        for (r in x.Hooks.templates) {
                            a = x.Hooks.templates[r], n = a[0].split(" ");
                            var o = a[1].match(x.RegEx.valueSplit);
                            "Color" === n[0] && (n.push(n.shift()), o.push(o.shift()), x.Hooks.templates[r] = [n.join(" "), o.join(" ")])
                        }
                    for (r in x.Hooks.templates) {
                        a = x.Hooks.templates[r], n = a[0].split(" ");
                        for (var e in n) {
                            var i = r + n[e],
                                s = e;
                            x.Hooks.registered[i] = [r, s]
                        }
                    }
                },
                getRoot: function (e) {
                    var t = x.Hooks.registered[e];
                    return t ? t[0] : e
                },
                cleanRootPropertyValue: function (e, t) {
                    return x.RegEx.valueUnwrap.test(t) && (t = t.match(x.RegEx.valueUnwrap)[1]), x.Values.isCSSNullValue(t) && (t = x.Hooks.templates[e][1]), t
                },
                extractValue: function (e, t) {
                    var r = x.Hooks.registered[e];
                    if (r) {
                        var a = r[0],
                            n = r[1];
                        return t = x.Hooks.cleanRootPropertyValue(a, t), t.toString().match(x.RegEx.valueSplit)[n]
                    }
                    return t
                },
                injectValue: function (e, t, r) {
                    var a = x.Hooks.registered[e];
                    if (a) {
                        var n = a[0],
                            o = a[1],
                            i, s;
                        return r = x.Hooks.cleanRootPropertyValue(n, r), i = r.toString().match(x.RegEx.valueSplit), i[o] = t, s = i.join(" ")
                    }
                    return r
                }
            },
            Normalizations: {
                registered: {
                    clip: function (e, t, r) {
                        switch (e) {
                        case "name":
                            return "clip";
                        case "extract":
                            var a;
                            return x.RegEx.wrappedValueAlreadyExtracted.test(r) ? a = r : (a = r.toString().match(x.RegEx.valueUnwrap), a = a ? a[1].replace(/,(\s+)?/g, " ") : r), a;
                        case "inject":
                            return "rect(" + r + ")"
                        }
                    },
                    blur: function (e, t, r) {
                        switch (e) {
                        case "name":
                            return v.State.isFirefox ? "filter" : "-webkit-filter";
                        case "extract":
                            var a = parseFloat(r);
                            if (!a && 0 !== a) {
                                var n = r.toString().match(/blur\(([0-9]+[A-z]+)\)/i);
                                a = n ? n[1] : 0
                            }
                            return a;
                        case "inject":
                            return parseFloat(r) ? "blur(" + r + ")" : "none"
                        }
                    },
                    opacity: function (e, t, r) {
                        if (8 >= f) switch (e) {
                        case "name":
                            return "filter";
                        case "extract":
                            var a = r.toString().match(/alpha\(opacity=(.*)\)/i);
                            return r = a ? a[1] / 100 : 1;
                        case "inject":
                            return t.style.zoom = 1, parseFloat(r) >= 1 ? "" : "alpha(opacity=" + parseInt(100 * parseFloat(r), 10) + ")"
                        } else switch (e) {
                        case "name":
                            return "opacity";
                        case "extract":
                            return r;
                        case "inject":
                            return r
                        }
                    }
                },
                register: function () {
                    9 >= f || v.State.isGingerbread || (x.Lists.transformsBase = x.Lists.transformsBase.concat(x.Lists.transforms3D));
                    for (var e = 0; e < x.Lists.transformsBase.length; e++) ! function () {
                        var t = x.Lists.transformsBase[e];
                        x.Normalizations.registered[t] = function (e, r, n) {
                            switch (e) {
                            case "name":
                                return "transform";
                            case "extract":
                                return i(r) === a || i(r).transformCache[t] === a ? /^scale/i.test(t) ? 1 : 0 : i(r).transformCache[t].replace(/[()]/g, "");
                            case "inject":
                                var o = !1;
                                switch (t.substr(0, t.length - 1)) {
                                case "translate":
                                    o = !/(%|px|em|rem|vw|vh|\d)$/i.test(n);
                                    break;
                                case "scal":
                                case "scale":
                                    v.State.isAndroid && i(r).transformCache[t] === a && 1 > n && (n = 1), o = !/(\d)$/i.test(n);
                                    break;
                                case "skew":
                                    o = !/(deg|\d)$/i.test(n);
                                    break;
                                case "rotate":
                                    o = !/(deg|\d)$/i.test(n)
                                }
                                return o || (i(r).transformCache[t] = "(" + n + ")"), i(r).transformCache[t]
                            }
                        }
                    }();
                    for (var e = 0; e < x.Lists.colors.length; e++) ! function () {
                        var t = x.Lists.colors[e];
                        x.Normalizations.registered[t] = function (e, r, n) {
                            switch (e) {
                            case "name":
                                return t;
                            case "extract":
                                var o;
                                if (x.RegEx.wrappedValueAlreadyExtracted.test(n)) o = n;
                                else {
                                    var i, s = {
                                        black: "rgb(0, 0, 0)",
                                        blue: "rgb(0, 0, 255)",
                                        gray: "rgb(128, 128, 128)",
                                        green: "rgb(0, 128, 0)",
                                        red: "rgb(255, 0, 0)",
                                        white: "rgb(255, 255, 255)"
                                    };
                                    /^[A-z]+$/i.test(n) ? i = s[n] !== a ? s[n] : s.black : x.RegEx.isHex.test(n) ? i = "rgb(" + x.Values.hexToRgb(n).join(" ") + ")" : /^rgba?\(/i.test(n) || (i = s.black), o = (i || n).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g, " ")
                                }
                                return 8 >= f || 3 !== o.split(" ").length || (o += " 1"), o;
                            case "inject":
                                return 8 >= f ? 4 === n.split(" ").length && (n = n.split(/\s+/).slice(0, 3).join(" ")) : 3 === n.split(" ").length && (n += " 1"), (8 >= f ? "rgb" : "rgba") + "(" + n.replace(/\s+/g, ",").replace(/\.(\d)+(?=,)/g, "") + ")"
                            }
                        }
                    }()
                }
            },
            Names: {
                camelCase: function (e) {
                    return e.replace(/-(\w)/g, function (e, t) {
                        return t.toUpperCase()
                    })
                },
                SVGAttribute: function (e) {
                    var t = "width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";
                    return (f || v.State.isAndroid && !v.State.isChrome) && (t += "|transform"), new RegExp("^(" + t + ")$", "i").test(e)
                },
                prefixCheck: function (e) {
                    if (v.State.prefixMatches[e]) return [v.State.prefixMatches[e], !0];
                    for (var t = ["", "Webkit", "Moz", "ms", "O"], r = 0, a = t.length; a > r; r++) {
                        var n;
                        if (n = 0 === r ? e : t[r] + e.replace(/^\w/, function (e) {
                                return e.toUpperCase()
                            }), g.isString(v.State.prefixElement.style[n])) return v.State.prefixMatches[e] = n, [n, !0]
                    }
                    return [e, !1]
                }
            },
            Values: {
                hexToRgb: function (e) {
                    var t = /^#?([a-f\d])([a-f\d])([a-f\d])$/i,
                        r = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,
                        a;
                    return e = e.replace(t, function (e, t, r, a) {
                        return t + t + r + r + a + a
                    }), a = r.exec(e), a ? [parseInt(a[1], 16), parseInt(a[2], 16), parseInt(a[3], 16)] : [0, 0, 0]
                },
                isCSSNullValue: function (e) {
                    return 0 == e || /^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)
                },
                getUnitType: function (e) {
                    return /^(rotate|skew)/i.test(e) ? "deg" : /(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e) ? "" : "px"
                },
                getDisplayType: function (e) {
                    var t = e && e.tagName.toString().toLowerCase();
                    return /^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t) ? "inline" : /^(li)$/i.test(t) ? "list-item" : /^(tr)$/i.test(t) ? "table-row" : /^(table)$/i.test(t) ? "table" : /^(tbody)$/i.test(t) ? "table-row-group" : "block"
                },
                addClass: function (e, t) {
                    e.classList ? e.classList.add(t) : e.className += (e.className.length ? " " : "") + t
                },
                removeClass: function (e, t) {
                    e.classList ? e.classList.remove(t) : e.className = e.className.toString().replace(new RegExp("(^|\\s)" + t.split(" ").join("|") + "(\\s|$)", "gi"), " ")
                }
            },
            getPropertyValue: function (e, r, n, o) {
                function s(e, r) {
                    function n() {
                        u && x.setPropertyValue(e, "display", "none")
                    }
                    var l = 0;
                    if (8 >= f) l = $.css(e, r);
                    else {
                        var u = !1;
                        if (/^(width|height)$/.test(r) && 0 === x.getPropertyValue(e, "display") && (u = !0, x.setPropertyValue(e, "display", x.Values.getDisplayType(e))), !o) {
                            if ("height" === r && "border-box" !== x.getPropertyValue(e, "boxSizing").toString().toLowerCase()) {
                                var c = e.offsetHeight - (parseFloat(x.getPropertyValue(e, "borderTopWidth")) || 0) - (parseFloat(x.getPropertyValue(e, "borderBottomWidth")) || 0) - (parseFloat(x.getPropertyValue(e, "paddingTop")) || 0) - (parseFloat(x.getPropertyValue(e, "paddingBottom")) || 0);
                                return n(), c
                            }
                            if ("width" === r && "border-box" !== x.getPropertyValue(e, "boxSizing").toString().toLowerCase()) {
                                var p = e.offsetWidth - (parseFloat(x.getPropertyValue(e, "borderLeftWidth")) || 0) - (parseFloat(x.getPropertyValue(e, "borderRightWidth")) || 0) - (parseFloat(x.getPropertyValue(e, "paddingLeft")) || 0) - (parseFloat(x.getPropertyValue(e, "paddingRight")) || 0);
                                return n(), p
                            }
                        }
                        var d;
                        d = i(e) === a ? t.getComputedStyle(e, null) : i(e).computedStyle ? i(e).computedStyle : i(e).computedStyle = t.getComputedStyle(e, null), "borderColor" === r && (r = "borderTopColor"), l = 9 === f && "filter" === r ? d.getPropertyValue(r) : d[r], ("" === l || null === l) && (l = e.style[r]), n()
                    }
                    if ("auto" === l && /^(top|right|bottom|left)$/i.test(r)) {
                        var g = s(e, "position");
                        ("fixed" === g || "absolute" === g && /top|left/i.test(r)) && (l = $(e).position()[r] + "px")
                    }
                    return l
                }
                var l;
                if (x.Hooks.registered[r]) {
                    var u = r,
                        c = x.Hooks.getRoot(u);
                    n === a && (n = x.getPropertyValue(e, x.Names.prefixCheck(c)[0])), x.Normalizations.registered[c] && (n = x.Normalizations.registered[c]("extract", e, n)), l = x.Hooks.extractValue(u, n)
                } else if (x.Normalizations.registered[r]) {
                    var p, d;
                    p = x.Normalizations.registered[r]("name", e), "transform" !== p && (d = s(e, x.Names.prefixCheck(p)[0]), x.Values.isCSSNullValue(d) && x.Hooks.templates[r] && (d = x.Hooks.templates[r][1])), l = x.Normalizations.registered[r]("extract", e, d)
                }
                if (!/^[\d-]/.test(l))
                    if (i(e) && i(e).isSVG && x.Names.SVGAttribute(r))
                        if (/^(height|width)$/i.test(r)) try {
                            l = e.getBBox()[r]
                        } catch (g) {
                            l = 0
                        } else l = e.getAttribute(r);
                        else l = s(e, x.Names.prefixCheck(r)[0]);
                return x.Values.isCSSNullValue(l) && (l = 0), v.debug >= 2 && console.log("Get " + r + ": " + l), l
            },
            setPropertyValue: function (e, r, a, n, o) {
                var s = r;
                if ("scroll" === r) o.container ? o.container["scroll" + o.direction] = a : "Left" === o.direction ? t.scrollTo(a, o.alternateValue) : t.scrollTo(o.alternateValue, a);
                else if (x.Normalizations.registered[r] && "transform" === x.Normalizations.registered[r]("name", e)) x.Normalizations.registered[r]("inject", e, a), s = "transform", a = i(e).transformCache[r];
                else {
                    if (x.Hooks.registered[r]) {
                        var l = r,
                            u = x.Hooks.getRoot(r);
                        n = n || x.getPropertyValue(e, u), a = x.Hooks.injectValue(l, a, n), r = u
                    }
                    if (x.Normalizations.registered[r] && (a = x.Normalizations.registered[r]("inject", e, a), r = x.Normalizations.registered[r]("name", e)), s = x.Names.prefixCheck(r)[0], 8 >= f) try {
                        e.style[s] = a
                    } catch (c) {
                        v.debug && console.log("Browser does not support [" + a + "] for [" + s + "]")
                    } else i(e) && i(e).isSVG && x.Names.SVGAttribute(r) ? e.setAttribute(r, a) : e.style[s] = a;
                    v.debug >= 2 && console.log("Set " + r + " (" + s + "): " + a)
                }
                return [s, a]
            },
            flushTransformCache: function (e) {
                function t(t) {
                    return parseFloat(x.getPropertyValue(e, t))
                }
                var r = "";
                if ((f || v.State.isAndroid && !v.State.isChrome) && i(e).isSVG) {
                    var a = {
                        translate: [t("translateX"), t("translateY")],
                        skewX: [t("skewX")],
                        skewY: [t("skewY")],
                        scale: 1 !== t("scale") ? [t("scale"), t("scale")] : [t("scaleX"), t("scaleY")],
                        rotate: [t("rotateZ"), 0, 0]
                    };
                    $.each(i(e).transformCache, function (e) {
                        /^translate/i.test(e) ? e = "translate" : /^scale/i.test(e) ? e = "scale" : /^rotate/i.test(e) && (e = "rotate"), a[e] && (r += e + "(" + a[e].join(" ") + ") ", delete a[e])
                    })
                } else {
                    var n, o;
                    $.each(i(e).transformCache, function (t) {
                        return n = i(e).transformCache[t], "transformPerspective" === t ? (o = n, !0) : (9 === f && "rotateZ" === t && (t = "rotate"), void(r += t + n + " "))
                    }), o && (r = "perspective" + o + " " + r)
                }
                x.setPropertyValue(e, "transform", r)
            }
        };
        x.Hooks.register(), x.Normalizations.register(), v.hook = function (e, t, r) {
            var n = a;
            return e = o(e), $.each(e, function (e, o) {
                if (i(o) === a && v.init(o), r === a) n === a && (n = v.CSS.getPropertyValue(o, t));
                else {
                    var s = v.CSS.setPropertyValue(o, t, r);
                    "transform" === s[0] && v.CSS.flushTransformCache(o), n = s
                }
            }), n
        };
        var S = function () {
            function e() {
                return l ? T.promise || null : f
            }

            function n() {
                function e(e) {
                    function p(e, t) {
                        var r = a,
                            i = a,
                            s = a;
                        return g.isArray(e) ? (r = e[0], !g.isArray(e[1]) && /^[\d-]/.test(e[1]) || g.isFunction(e[1]) || x.RegEx.isHex.test(e[1]) ? s = e[1] : (g.isString(e[1]) && !x.RegEx.isHex.test(e[1]) || g.isArray(e[1])) && (i = t ? e[1] : u(e[1], o.duration), e[2] !== a && (s = e[2]))) : r = e, t || (i = i || o.easing), g.isFunction(r) && (r = r.call(n, w, P)), g.isFunction(s) && (s = s.call(n, w, P)), [r || 0, i, s]
                    }

                    function f(e, t) {
                        var r, a;
                        return a = (t || "0").toString().toLowerCase().replace(/[%A-z]+$/, function (e) {
                            return r = e, ""
                        }), r || (r = x.Values.getUnitType(e)), [a, r]
                    }

                    function d() {
                        var e = {
                                myParent: n.parentNode || r.body,
                                position: x.getPropertyValue(n, "position"),
                                fontSize: x.getPropertyValue(n, "fontSize")
                            },
                            a = e.position === N.lastPosition && e.myParent === N.lastParent,
                            o = e.fontSize === N.lastFontSize;
                        N.lastParent = e.myParent, N.lastPosition = e.position, N.lastFontSize = e.fontSize;
                        var s = 100,
                            l = {};
                        if (o && a) l.emToPx = N.lastEmToPx, l.percentToPxWidth = N.lastPercentToPxWidth, l.percentToPxHeight = N.lastPercentToPxHeight;
                        else {
                            var u = i(n).isSVG ? r.createElementNS("http://www.w3.org/2000/svg", "rect") : r.createElement("div");
                            v.init(u), e.myParent.appendChild(u), $.each(["overflow", "overflowX", "overflowY"], function (e, t) {
                                v.CSS.setPropertyValue(u, t, "hidden")
                            }), v.CSS.setPropertyValue(u, "position", e.position), v.CSS.setPropertyValue(u, "fontSize", e.fontSize), v.CSS.setPropertyValue(u, "boxSizing", "content-box"), $.each(["minWidth", "maxWidth", "width", "minHeight", "maxHeight", "height"], function (e, t) {
                                v.CSS.setPropertyValue(u, t, s + "%")
                            }), v.CSS.setPropertyValue(u, "paddingLeft", s + "em"), l.percentToPxWidth = N.lastPercentToPxWidth = (parseFloat(x.getPropertyValue(u, "width", null, !0)) || 1) / s, l.percentToPxHeight = N.lastPercentToPxHeight = (parseFloat(x.getPropertyValue(u, "height", null, !0)) || 1) / s, l.emToPx = N.lastEmToPx = (parseFloat(x.getPropertyValue(u, "paddingLeft")) || 1) / s, e.myParent.removeChild(u)
                        }
                        return null === N.remToPx && (N.remToPx = parseFloat(x.getPropertyValue(r.body, "fontSize")) || 16), null === N.vwToPx && (N.vwToPx = parseFloat(t.innerWidth) / 100, N.vhToPx = parseFloat(t.innerHeight) / 100), l.remToPx = N.remToPx, l.vwToPx = N.vwToPx, l.vhToPx = N.vhToPx, v.debug >= 1 && console.log("Unit ratios: " + JSON.stringify(l), n), l
                    }
                    if (o.begin && 0 === w) try {
                        o.begin.call(m, m)
                    } catch (y) {
                        setTimeout(function () {
                            throw y
                        }, 1)
                    }
                    if ("scroll" === k) {
                        var S = /^x$/i.test(o.axis) ? "Left" : "Top",
                            V = parseFloat(o.offset) || 0,
                            C, A, F;
                        o.container ? g.isWrapped(o.container) || g.isNode(o.container) ? (o.container = o.container[0] || o.container, C = o.container["scroll" + S], F = C + $(n).position()[S.toLowerCase()] + V) : o.container = null : (C = v.State.scrollAnchor[v.State["scrollProperty" + S]], A = v.State.scrollAnchor[v.State["scrollProperty" + ("Left" === S ? "Top" : "Left")]], F = $(n).offset()[S.toLowerCase()] + V), s = {
                            scroll: {
                                rootPropertyValue: !1,
                                startValue: C,
                                currentValue: C,
                                endValue: F,
                                unitType: "",
                                easing: o.easing,
                                scrollData: {
                                    container: o.container,
                                    direction: S,
                                    alternateValue: A
                                }
                            },
                            element: n
                        }, v.debug && console.log("tweensContainer (scroll): ", s.scroll, n)
                    } else if ("reverse" === k) {
                        if (!i(n).tweensContainer) return void $.dequeue(n, o.queue);
                        "none" === i(n).opts.display && (i(n).opts.display = "auto"), "hidden" === i(n).opts.visibility && (i(n).opts.visibility = "visible"), i(n).opts.loop = !1, i(n).opts.begin = null, i(n).opts.complete = null, b.easing || delete o.easing, b.duration || delete o.duration, o = $.extend({}, i(n).opts, o);
                        var E = $.extend(!0, {}, i(n).tweensContainer);
                        for (var j in E)
                            if ("element" !== j) {
                                var H = E[j].startValue;
                                E[j].startValue = E[j].currentValue = E[j].endValue, E[j].endValue = H, g.isEmptyObject(b) || (E[j].easing = o.easing), v.debug && console.log("reverse tweensContainer (" + j + "): " + JSON.stringify(E[j]), n)
                            }
                        s = E
                    } else if ("start" === k) {
                        var E;
                        i(n).tweensContainer && i(n).isAnimating === !0 && (E = i(n).tweensContainer), $.each(h, function (e, t) {
                            if (RegExp("^" + x.Lists.colors.join("$|^") + "$").test(e)) {
                                var r = p(t, !0),
                                    n = r[0],
                                    o = r[1],
                                    i = r[2];
                                if (x.RegEx.isHex.test(n)) {
                                    for (var s = ["Red", "Green", "Blue"], l = x.Values.hexToRgb(n), u = i ? x.Values.hexToRgb(i) : a, c = 0; c < s.length; c++) {
                                        var f = [l[c]];
                                        o && f.push(o), u !== a && f.push(u[c]), h[e + s[c]] = f
                                    }
                                    delete h[e]
                                }
                            }
                        });
                        for (var R in h) {
                            var O = p(h[R]),
                                z = O[0],
                                q = O[1],
                                M = O[2];
                            R = x.Names.camelCase(R);
                            var I = x.Hooks.getRoot(R),
                                B = !1;
                            if (i(n).isSVG || "tween" === I || x.Names.prefixCheck(I)[1] !== !1 || x.Normalizations.registered[I] !== a) {
                                (o.display !== a && null !== o.display && "none" !== o.display || o.visibility !== a && "hidden" !== o.visibility) && /opacity|filter/.test(R) && !M && 0 !== z && (M = 0), o._cacheValues && E && E[R] ? (M === a && (M = E[R].endValue + E[R].unitType), B = i(n).rootPropertyValueCache[I]) : x.Hooks.registered[R] ? M === a ? (B = x.getPropertyValue(n, I), M = x.getPropertyValue(n, R, B)) : B = x.Hooks.templates[I][1] : M === a && (M = x.getPropertyValue(n, R));
                                var W, G, D, X = !1;
                                if (W = f(R, M), M = W[0], D = W[1], W = f(R, z), z = W[0].replace(/^([+-\/*])=/, function (e, t) {
                                        return X = t, ""
                                    }), G = W[1], M = parseFloat(M) || 0, z = parseFloat(z) || 0, "%" === G && (/^(fontSize|lineHeight)$/.test(R) ? (z /= 100, G = "em") : /^scale/.test(R) ? (z /= 100, G = "") : /(Red|Green|Blue)$/i.test(R) && (z = z / 100 * 255, G = "")), /[\/*]/.test(X)) G = D;
                                else if (D !== G && 0 !== M)
                                    if (0 === z) G = D;
                                    else {
                                        l = l || d();
                                        var Y = /margin|padding|left|right|width|text|word|letter/i.test(R) || /X$/.test(R) || "x" === R ? "x" : "y";
                                        switch (D) {
                                        case "%":
                                            M *= "x" === Y ? l.percentToPxWidth : l.percentToPxHeight;
                                            break;
                                        case "px":
                                            break;
                                        default:
                                            M *= l[D + "ToPx"]
                                        }
                                        switch (G) {
                                        case "%":
                                            M *= 1 / ("x" === Y ? l.percentToPxWidth : l.percentToPxHeight);
                                            break;
                                        case "px":
                                            break;
                                        default:
                                            M *= 1 / l[G + "ToPx"]
                                        }
                                    }
                                switch (X) {
                                case "+":
                                    z = M + z;
                                    break;
                                case "-":
                                    z = M - z;
                                    break;
                                case "*":
                                    z = M * z;
                                    break;
                                case "/":
                                    z = M / z
                                }
                                s[R] = {
                                    rootPropertyValue: B,
                                    startValue: M,
                                    currentValue: M,
                                    endValue: z,
                                    unitType: G,
                                    easing: q
                                }, v.debug && console.log("tweensContainer (" + R + "): " + JSON.stringify(s[R]), n)
                            } else v.debug && console.log("Skipping [" + I + "] due to a lack of browser support.")
                        }
                        s.element = n
                    }
                    s.element && (x.Values.addClass(n, "velocity-animating"), L.push(s), "" === o.queue && (i(n).tweensContainer = s, i(n).opts = o), i(n).isAnimating = !0, w === P - 1 ? (v.State.calls.push([L, m, o, null, T.resolver]), v.State.isTicking === !1 && (v.State.isTicking = !0, c())) : w++)
                }
                var n = this,
                    o = $.extend({}, v.defaults, b),
                    s = {},
                    l;
                switch (i(n) === a && v.init(n), parseFloat(o.delay) && o.queue !== !1 && $.queue(n, o.queue, function (e) {
                    v.velocityQueueEntryFlag = !0, i(n).delayTimer = {
                        setTimeout: setTimeout(e, parseFloat(o.delay)),
                        next: e
                    }
                }), o.duration.toString().toLowerCase()) {
                case "fast":
                    o.duration = 200;
                    break;
                case "normal":
                    o.duration = y;
                    break;
                case "slow":
                    o.duration = 600;
                    break;
                default:
                    o.duration = parseFloat(o.duration) || 1
                }
                v.mock !== !1 && (v.mock === !0 ? o.duration = o.delay = 1 : (o.duration *= parseFloat(v.mock) || 1, o.delay *= parseFloat(v.mock) || 1)), o.easing = u(o.easing, o.duration), o.begin && !g.isFunction(o.begin) && (o.begin = null), o.progress && !g.isFunction(o.progress) && (o.progress = null), o.complete && !g.isFunction(o.complete) && (o.complete = null), o.display !== a && null !== o.display && (o.display = o.display.toString().toLowerCase(), "auto" === o.display && (o.display = v.CSS.Values.getDisplayType(n))), o.visibility !== a && null !== o.visibility && (o.visibility = o.visibility.toString().toLowerCase()), o.mobileHA = o.mobileHA && v.State.isMobile && !v.State.isGingerbread, o.queue === !1 ? o.delay ? setTimeout(e, o.delay) : e() : $.queue(n, o.queue, function (t, r) {
                    return r === !0 ? (T.promise && T.resolver(m), !0) : (v.velocityQueueEntryFlag = !0, void e(t))
                }), "" !== o.queue && "fx" !== o.queue || "inprogress" === $.queue(n)[0] || $.dequeue(n)
            }
            var s = arguments[0] && (arguments[0].p || $.isPlainObject(arguments[0].properties) && !arguments[0].properties.names || g.isString(arguments[0].properties)),
                l, f, d, m, h, b;
            if (g.isWrapped(this) ? (l = !1, d = 0, m = this, f = this) : (l = !0, d = 1, m = s ? arguments[0].elements || arguments[0].e : arguments[0]), m = o(m)) {
                s ? (h = arguments[0].properties || arguments[0].p, b = arguments[0].options || arguments[0].o) : (h = arguments[d], b = arguments[d + 1]);
                var P = m.length,
                    w = 0;
                if (!/^(stop|finish)$/i.test(h) && !$.isPlainObject(b)) {
                    var V = d + 1;
                    b = {};
                    for (var C = V; C < arguments.length; C++) g.isArray(arguments[C]) || !/^(fast|normal|slow)$/i.test(arguments[C]) && !/^\d/.test(arguments[C]) ? g.isString(arguments[C]) || g.isArray(arguments[C]) ? b.easing = arguments[C] : g.isFunction(arguments[C]) && (b.complete = arguments[C]) : b.duration = arguments[C]
                }
                var T = {
                    promise: null,
                    resolver: null,
                    rejecter: null
                };
                l && v.Promise && (T.promise = new v.Promise(function (e, t) {
                    T.resolver = e, T.rejecter = t
                }));
                var k;
                switch (h) {
                case "scroll":
                    k = "scroll";
                    break;
                case "reverse":
                    k = "reverse";
                    break;
                case "finish":
                case "stop":
                    $.each(m, function (e, t) {
                        i(t) && i(t).delayTimer && (clearTimeout(i(t).delayTimer.setTimeout), i(t).delayTimer.next && i(t).delayTimer.next(), delete i(t).delayTimer)
                    });
                    var A = [];
                    return $.each(v.State.calls, function (e, t) {
                        t && $.each(t[1], function (r, n) {
                            var o = b === a ? "" : b;
                            return o === !0 || t[2].queue === o || b === a && t[2].queue === !1 ? void $.each(m, function (r, a) {
                                a === n && ((b === !0 || g.isString(b)) && ($.each($.queue(a, g.isString(b) ? b : ""), function (e, t) {
                                    g.isFunction(t) && t(null, !0)
                                }), $.queue(a, g.isString(b) ? b : "", [])), "stop" === h ? (i(a) && i(a).tweensContainer && o !== !1 && $.each(i(a).tweensContainer, function (e, t) {
                                    t.endValue = t.currentValue
                                }), A.push(e)) : "finish" === h && (t[2].duration = 1))
                            }) : !0
                        })
                    }), "stop" === h && ($.each(A, function (e, t) {
                        p(t, !0)
                    }), T.promise && T.resolver(m)), e();
                default:
                    if (!$.isPlainObject(h) || g.isEmptyObject(h)) {
                        if (g.isString(h) && v.Redirects[h]) {
                            var F = $.extend({}, b),
                                E = F.duration,
                                j = F.delay || 0;
                            return F.backwards === !0 && (m = $.extend(!0, [], m).reverse()), $.each(m, function (e, t) {
                                parseFloat(F.stagger) ? F.delay = j + parseFloat(F.stagger) * e : g.isFunction(F.stagger) && (F.delay = j + F.stagger.call(t, e, P)), F.drag && (F.duration = parseFloat(E) || (/^(callout|transition)/.test(h) ? 1e3 : y), F.duration = Math.max(F.duration * (F.backwards ? 1 - e / P : (e + 1) / P), .75 * F.duration, 200)), v.Redirects[h].call(t, t, F || {}, e, P, m, T.promise ? T : a)
                            }), e()
                        }
                        var H = "Velocity: First argument (" + h + ") was not a property map, a known action, or a registered redirect. Aborting.";
                        return T.promise ? T.rejecter(new Error(H)) : console.log(H), e()
                    }
                    k = "start"
                }
                var N = {
                        lastParent: null,
                        lastPosition: null,
                        lastFontSize: null,
                        lastPercentToPxWidth: null,
                        lastPercentToPxHeight: null,
                        lastEmToPx: null,
                        remToPx: null,
                        vwToPx: null,
                        vhToPx: null
                    },
                    L = [];
                $.each(m, function (e, t) {
                    g.isNode(t) && n.call(t)
                });
                var F = $.extend({}, v.defaults, b),
                    R;
                if (F.loop = parseInt(F.loop), R = 2 * F.loop - 1, F.loop)
                    for (var O = 0; R > O; O++) {
                        var z = {
                            delay: F.delay,
                            progress: F.progress
                        };
                        O === R - 1 && (z.display = F.display, z.visibility = F.visibility, z.complete = F.complete), S(m, "reverse", z)
                    }
                return e()
            }
        };
        v = $.extend(S, v), v.animate = S;
        var P = t.requestAnimationFrame || d;
        return v.State.isMobile || r.hidden === a || r.addEventListener("visibilitychange", function () {
            r.hidden ? (P = function (e) {
                return setTimeout(function () {
                    e(!0)
                }, 16)
            }, c()) : P = t.requestAnimationFrame || d
        }), e.Velocity = v, e !== t && (e.fn.velocity = S, e.fn.velocity.defaults = v.defaults), $.each(["Down", "Up"], function (e, t) {
            v.Redirects["slide" + t] = function (e, r, n, o, i, s) {
                var l = $.extend({}, r),
                    u = l.begin,
                    c = l.complete,
                    p = {
                        height: "",
                        marginTop: "",
                        marginBottom: "",
                        paddingTop: "",
                        paddingBottom: ""
                    },
                    f = {};
                l.display === a && (l.display = "Down" === t ? "inline" === v.CSS.Values.getDisplayType(e) ? "inline-block" : "block" : "none"), l.begin = function () {
                    u && u.call(i, i);
                    for (var r in p) {
                        f[r] = e.style[r];
                        var a = v.CSS.getPropertyValue(e, r);
                        p[r] = "Down" === t ? [a, 0] : [0, a]
                    }
                    f.overflow = e.style.overflow, e.style.overflow = "hidden"
                }, l.complete = function () {
                    for (var t in f) e.style[t] = f[t];
                    c && c.call(i, i), s && s.resolver(i)
                }, v(e, p, l)
            }
        }), $.each(["In", "Out"], function (e, t) {
            v.Redirects["fade" + t] = function (e, r, n, o, i, s) {
                var l = $.extend({}, r),
                    u = {
                        opacity: "In" === t ? 1 : 0
                    },
                    c = l.complete;
                l.complete = n !== o - 1 ? l.begin = null : function () {
                    c && c.call(i, i), s && s.resolver(i)
                }, l.display === a && (l.display = "In" === t ? "auto" : "none"), v(this, u, l)
            }
        }), v
    }(window.jQuery || window.Zepto || window, window, document)
});
// VIDEO BACKGROUND

$( document ).ready(function() {

    scaleVideoContainer();

    initBannerVideoSize('.video-container .poster img');
    initBannerVideoSize('.video-container .filter');
    initBannerVideoSize('.video-container video');

    $(window).on('resize', function() {
        scaleVideoContainer();
        scaleBannerVideoSize('.video-container .poster img');
        scaleBannerVideoSize('.video-container .filter');
        scaleBannerVideoSize('.video-container video');
    });

});

function scaleVideoContainer() {

    var height = $(window).height() + 5;
    var unitHeight = parseInt(height) + 'px';
    $('.homepage-hero-module').css('height',unitHeight);

}

function initBannerVideoSize(element){

    $(element).each(function(){
        $(this).data('height', $(this).height());
        $(this).data('width', $(this).width());
    });

    scaleBannerVideoSize(element);

}

function scaleBannerVideoSize(element){

    var windowWidth = $(window).width(),
    windowHeight = $(window).height() + 5,
    videoWidth,
    videoHeight;

    /* console.log(windowHeight); */

    $(element).each(function(){
        var videoAspectRatio = $(this).data('height')/$(this).data('width');

        $(this).width(windowWidth);

        if(windowWidth < 1000){
            videoHeight = windowHeight;
            videoWidth = videoHeight / videoAspectRatio;
            $(this).css({'margin-top' : 0, 'margin-left' : -(videoWidth - windowWidth) / 2 + 'px'});

            $(this).width(videoWidth).height(videoHeight);
        }

        $('.homepage-hero-module .video-container video').addClass('fadeIn animated');

    });
}
/*!
 * Waves v0.6.4
 * http://fian.my.id/Waves
 *
 * Copyright 2014 Alfiana E. Sibuea and other contributors
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 */

;
(function (window) {
    'use strict';

    var Waves = Waves || {};
    var $$ = document.querySelectorAll.bind(document);

    // Find exact position of element
    function isWindow(obj) {
        return obj !== null && obj === obj.window;
    }

    function getWindow(elem) {
        return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;
    }

    function offset(elem) {
        var docElem, win,
            box = {
                top: 0,
                left: 0
            },
            doc = elem && elem.ownerDocument;

        docElem = doc.documentElement;

        if (typeof elem.getBoundingClientRect !== typeof undefined) {
            box = elem.getBoundingClientRect();
        }
        win = getWindow(doc);
        return {
            top: box.top + win.pageYOffset - docElem.clientTop,
            left: box.left + win.pageXOffset - docElem.clientLeft
        };
    }

    function convertStyle(obj) {
        var style = '';

        for (var a in obj) {
            if (obj.hasOwnProperty(a)) {
                style += (a + ':' + obj[a] + ';');
            }
        }

        return style;
    }

    var Effect = {

        // Effect delay
        duration: 750,

        show: function (e, element) {

            // Disable right click
            if (e.button === 2) {
                return false;
            }

            var el = element || this;

            // Create ripple
            var ripple = document.createElement('div');
            ripple.className = 'waves-ripple';
            el.appendChild(ripple);

            // Get click coordinate and element witdh
            var pos = offset(el);
            var relativeY = (e.pageY - pos.top);
            var relativeX = (e.pageX - pos.left);
            var scale = 'scale(' + ((el.clientWidth / 100) * 10) + ')';

            // Support for touch devices
            if ('touches' in e) {
                relativeY = (e.touches[0].pageY - pos.top);
                relativeX = (e.touches[0].pageX - pos.left);
            }

            // Attach data to element
            ripple.setAttribute('data-hold', Date.now());
            ripple.setAttribute('data-scale', scale);
            ripple.setAttribute('data-x', relativeX);
            ripple.setAttribute('data-y', relativeY);

            // Set ripple position
            var rippleStyle = {
                'top': relativeY + 'px',
                'left': relativeX + 'px'
            };

            ripple.className = ripple.className + ' waves-notransition';
            ripple.setAttribute('style', convertStyle(rippleStyle));
            ripple.className = ripple.className.replace('waves-notransition', '');

            // Scale the ripple
            rippleStyle['-webkit-transform'] = scale;
            rippleStyle['-moz-transform'] = scale;
            rippleStyle['-ms-transform'] = scale;
            rippleStyle['-o-transform'] = scale;
            rippleStyle.transform = scale;
            rippleStyle.opacity = '1';

            rippleStyle['-webkit-transition-duration'] = Effect.duration + 'ms';
            rippleStyle['-moz-transition-duration'] = Effect.duration + 'ms';
            rippleStyle['-o-transition-duration'] = Effect.duration + 'ms';
            rippleStyle['transition-duration'] = Effect.duration + 'ms';

            rippleStyle['-webkit-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['-moz-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['-o-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';

            ripple.setAttribute('style', convertStyle(rippleStyle));
        },

        hide: function (e) {
            TouchHandler.touchup(e);

            var el = this;
            var width = el.clientWidth * 1.4;

            // Get first ripple
            var ripple = null;
            var ripples = el.getElementsByClassName('waves-ripple');
            if (ripples.length > 0) {
                ripple = ripples[ripples.length - 1];
            } else {
                return false;
            }

            var relativeX = ripple.getAttribute('data-x');
            var relativeY = ripple.getAttribute('data-y');
            var scale = ripple.getAttribute('data-scale');

            // Get delay beetween mousedown and mouse leave
            var diff = Date.now() - Number(ripple.getAttribute('data-hold'));
            var delay = 350 - diff;

            if (delay < 0) {
                delay = 0;
            }

            // Fade out ripple after delay
            setTimeout(function () {
                var style = {
                    'top': relativeY + 'px',
                    'left': relativeX + 'px',
                    'opacity': '0',

                    // Duration
                    '-webkit-transition-duration': Effect.duration + 'ms',
                    '-moz-transition-duration': Effect.duration + 'ms',
                    '-o-transition-duration': Effect.duration + 'ms',
                    'transition-duration': Effect.duration + 'ms',
                    '-webkit-transform': scale,
                    '-moz-transform': scale,
                    '-ms-transform': scale,
                    '-o-transform': scale,
                    'transform': scale,
                };

                ripple.setAttribute('style', convertStyle(style));

                setTimeout(function () {
                    try {
                        el.removeChild(ripple);
                    } catch (e) {
                        return false;
                    }
                }, Effect.duration);
            }, delay);
        },

        // Little hack to make <input> can perform waves effect
        wrapInput: function (elements) {
            for (var a = 0; a < elements.length; a++) {
                var el = elements[a];

                if (el.tagName.toLowerCase() === 'input') {
                    var parent = el.parentNode;

                    // If input already have parent just pass through
                    if (parent.tagName.toLowerCase() === 'i' && parent.className.indexOf('waves-effect') !== -1) {
                        continue;
                    }

                    // Put element class and style to the specified parent
                    var wrapper = document.createElement('i');
                    wrapper.className = el.className + ' waves-input-wrapper';

                    var elementStyle = el.getAttribute('style');

                    if (!elementStyle) {
                        elementStyle = '';
                    }

                    wrapper.setAttribute('style', elementStyle);

                    el.className = 'waves-button-input';
                    el.removeAttribute('style');

                    // Put element as child
                    parent.replaceChild(wrapper, el);
                    wrapper.appendChild(el);
                }
            }
        }
    };


    /**
     * Disable mousedown event for 500ms during and after touch
     */
    var TouchHandler = {
        /* uses an integer rather than bool so there's no issues with
         * needing to clear timeouts if another touch event occurred
         * within the 500ms. Cannot mouseup between touchstart and
         * touchend, nor in the 500ms after touchend. */
        touches: 0,
        allowEvent: function (e) {
            var allow = true;

            if (e.type === 'touchstart') {
                TouchHandler.touches += 1; //push
            } else if (e.type === 'touchend' || e.type === 'touchcancel') {
                setTimeout(function () {
                    if (TouchHandler.touches > 0) {
                        TouchHandler.touches -= 1; //pop after 500ms
                    }
                }, 500);
            } else if (e.type === 'mousedown' && TouchHandler.touches > 0) {
                allow = false;
            }

            return allow;
        },
        touchup: function (e) {
            TouchHandler.allowEvent(e);
        }
    };


    /**
     * Delegated click handler for .waves-effect element.
     * returns null when .waves-effect element not in "click tree"
     */
    function getWavesEffectElement(e) {
        if (TouchHandler.allowEvent(e) === false) {
            return null;
        }

        var element = null;
        var target = e.target || e.srcElement;

        while (target.parentElement !== null) {
            if (!(target instanceof SVGElement) && target.className.indexOf('waves-effect') !== -1) {
                element = target;
                break;
            } else if (target.classList.contains('waves-effect')) {
                element = target;
                break;
            }
            target = target.parentElement;
        }

        return element;
    }

    /**
     * Bubble the click and show effect if .waves-effect elem was found
     */
    function showEffect(e) {
        var element = getWavesEffectElement(e);

        if (element !== null) {
            Effect.show(e, element);

            if ('ontouchstart' in window) {
                element.addEventListener('touchend', Effect.hide, false);
                element.addEventListener('touchcancel', Effect.hide, false);
            }

            element.addEventListener('mouseup', Effect.hide, false);
            element.addEventListener('mouseleave', Effect.hide, false);
        }
    }

    Waves.displayEffect = function (options) {
        options = options || {};

        if ('duration' in options) {
            Effect.duration = options.duration;
        }

        //Wrap input inside <i> tag
        Effect.wrapInput($$('.waves-effect'));

        if ('ontouchstart' in window) {
            document.body.addEventListener('touchstart', showEffect, false);
        }

        document.body.addEventListener('mousedown', showEffect, false);
    };

    /**
     * Attach Waves to an input element (or any element which doesn't
     * bubble mouseup/mousedown events).
     *   Intended to be used with dynamically loaded forms/inputs, or
     * where the user doesn't want a delegated click handler.
     */
    Waves.attach = function (element) {
        //FUTURE: automatically add waves classes and allow users
        // to specify them with an options param? Eg. light/classic/button
        if (element.tagName.toLowerCase() === 'input') {
            Effect.wrapInput([element]);
            element = element.parentElement;
        }

        if ('ontouchstart' in window) {
            element.addEventListener('touchstart', showEffect, false);
        }

        element.addEventListener('mousedown', showEffect, false);
    };

    window.Waves = Waves;

    document.addEventListener('DOMContentLoaded', function () {
        Waves.displayEffect();
    }, false);

})(window);
//WOW SCRIPT - REVEAL ANIMATIONS WHEN SCROLLING

(function() {
  var MutationObserver, Util, WeakMap, getComputedStyle, getComputedStyleRX,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  Util = (function() {
    function Util() {}

    Util.prototype.extend = function(custom, defaults) {
      var key, value;
      for (key in defaults) {
        value = defaults[key];
        if (custom[key] == null) {
          custom[key] = value;
        }
      }
      return custom;
    };

    Util.prototype.isMobile = function(agent) {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(agent);
    };

    Util.prototype.createEvent = function(event, bubble, cancel, detail) {
      var customEvent;
      if (bubble == null) {
        bubble = false;
      }
      if (cancel == null) {
        cancel = false;
      }
      if (detail == null) {
        detail = null;
      }
      if (document.createEvent != null) {
        customEvent = document.createEvent('CustomEvent');
        customEvent.initCustomEvent(event, bubble, cancel, detail);
      } else if (document.createEventObject != null) {
        customEvent = document.createEventObject();
        customEvent.eventType = event;
      } else {
        customEvent.eventName = event;
      }
      return customEvent;
    };

    Util.prototype.emitEvent = function(elem, event) {
      if (elem.dispatchEvent != null) {
        return elem.dispatchEvent(event);
      } else if (event in (elem != null)) {
        return elem[event]();
      } else if (("on" + event) in (elem != null)) {
        return elem["on" + event]();
      }
    };

    Util.prototype.addEvent = function(elem, event, fn) {
      if (elem.addEventListener != null) {
        return elem.addEventListener(event, fn, false);
      } else if (elem.attachEvent != null) {
        return elem.attachEvent("on" + event, fn);
      } else {
        return elem[event] = fn;
      }
    };

    Util.prototype.removeEvent = function(elem, event, fn) {
      if (elem.removeEventListener != null) {
        return elem.removeEventListener(event, fn, false);
      } else if (elem.detachEvent != null) {
        return elem.detachEvent("on" + event, fn);
      } else {
        return delete elem[event];
      }
    };

    Util.prototype.innerHeight = function() {
      if ('innerHeight' in window) {
        return window.innerHeight;
      } else {
        return document.documentElement.clientHeight;
      }
    };

    return Util;

  })();

  WeakMap = this.WeakMap || this.MozWeakMap || (WeakMap = (function() {
    function WeakMap() {
      this.keys = [];
      this.values = [];
    }

    WeakMap.prototype.get = function(key) {
      var i, item, j, len, ref;
      ref = this.keys;
      for (i = j = 0, len = ref.length; j < len; i = ++j) {
        item = ref[i];
        if (item === key) {
          return this.values[i];
        }
      }
    };

    WeakMap.prototype.set = function(key, value) {
      var i, item, j, len, ref;
      ref = this.keys;
      for (i = j = 0, len = ref.length; j < len; i = ++j) {
        item = ref[i];
        if (item === key) {
          this.values[i] = value;
          return;
        }
      }
      this.keys.push(key);
      return this.values.push(value);
    };

    return WeakMap;

  })());

  MutationObserver = this.MutationObserver || this.WebkitMutationObserver || this.MozMutationObserver || (MutationObserver = (function() {
    function MutationObserver() {
      if (typeof console !== "undefined" && console !== null) {
        console.warn('MutationObserver is not supported by your browser.');
      }
      if (typeof console !== "undefined" && console !== null) {
        console.warn('WOW.js cannot detect dom mutations, please call .sync() after loading new content.');
      }
    }

    MutationObserver.notSupported = true;

    MutationObserver.prototype.observe = function() {};

    return MutationObserver;

  })());

  getComputedStyle = this.getComputedStyle || function(el, pseudo) {
    this.getPropertyValue = function(prop) {
      var ref;
      if (prop === 'float') {
        prop = 'styleFloat';
      }
      if (getComputedStyleRX.test(prop)) {
        prop.replace(getComputedStyleRX, function(_, _char) {
          return _char.toUpperCase();
        });
      }
      return ((ref = el.currentStyle) != null ? ref[prop] : void 0) || null;
    };
    return this;
  };

  getComputedStyleRX = /(\-([a-z]){1})/g;

  this.WOW = (function() {
    WOW.prototype.defaults = {
      boxClass: 'wow',
      animateClass: 'animated',
      offset: 0,
      mobile: true,
      live: true,
      callback: null,
      scrollContainer: null
    };

    function WOW(options) {
      if (options == null) {
        options = {};
      }
      this.scrollCallback = bind(this.scrollCallback, this);
      this.scrollHandler = bind(this.scrollHandler, this);
      this.resetAnimation = bind(this.resetAnimation, this);
      this.start = bind(this.start, this);
      this.scrolled = true;
      this.config = this.util().extend(options, this.defaults);
      if (options.scrollContainer != null) {
        this.config.scrollContainer = document.querySelector(options.scrollContainer);
      }
      this.animationNameCache = new WeakMap();
      this.wowEvent = this.util().createEvent(this.config.boxClass);
    }

    WOW.prototype.init = function() {
      var ref;
      this.element = window.document.documentElement;
      if ((ref = document.readyState) === "interactive" || ref === "complete") {
        this.start();
      } else {
        this.util().addEvent(document, 'DOMContentLoaded', this.start);
      }
      return this.finished = [];
    };

    WOW.prototype.start = function() {
      var box, j, len, ref;
      this.stopped = false;
      this.boxes = (function() {
        var j, len, ref, results;
        ref = this.element.querySelectorAll("." + this.config.boxClass);
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          box = ref[j];
          results.push(box);
        }
        return results;
      }).call(this);
      this.all = (function() {
        var j, len, ref, results;
        ref = this.boxes;
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          box = ref[j];
          results.push(box);
        }
        return results;
      }).call(this);
      if (this.boxes.length) {
        if (this.disabled()) {
          this.resetStyle();
        } else {
          ref = this.boxes;
          for (j = 0, len = ref.length; j < len; j++) {
            box = ref[j];
            this.applyStyle(box, true);
          }
        }
      }
      if (!this.disabled()) {
        this.util().addEvent(this.config.scrollContainer || window, 'scroll', this.scrollHandler);
        this.util().addEvent(window, 'resize', this.scrollHandler);
        this.interval = setInterval(this.scrollCallback, 50);
      }
      if (this.config.live) {
        return new MutationObserver((function(_this) {
          return function(records) {
            var k, len1, node, record, results;
            results = [];
            for (k = 0, len1 = records.length; k < len1; k++) {
              record = records[k];
              results.push((function() {
                var l, len2, ref1, results1;
                ref1 = record.addedNodes || [];
                results1 = [];
                for (l = 0, len2 = ref1.length; l < len2; l++) {
                  node = ref1[l];
                  results1.push(this.doSync(node));
                }
                return results1;
              }).call(_this));
            }
            return results;
          };
        })(this)).observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    };

    WOW.prototype.stop = function() {
      this.stopped = true;
      this.util().removeEvent(this.config.scrollContainer || window, 'scroll', this.scrollHandler);
      this.util().removeEvent(window, 'resize', this.scrollHandler);
      if (this.interval != null) {
        return clearInterval(this.interval);
      }
    };

    WOW.prototype.sync = function(element) {
      if (MutationObserver.notSupported) {
        return this.doSync(this.element);
      }
    };

    WOW.prototype.doSync = function(element) {
      var box, j, len, ref, results;
      if (element == null) {
        element = this.element;
      }
      if (element.nodeType !== 1) {
        return;
      }
      element = element.parentNode || element;
      ref = element.querySelectorAll("." + this.config.boxClass);
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        box = ref[j];
        if (indexOf.call(this.all, box) < 0) {
          this.boxes.push(box);
          this.all.push(box);
          if (this.stopped || this.disabled()) {
            this.resetStyle();
          } else {
            this.applyStyle(box, true);
          }
          results.push(this.scrolled = true);
        } else {
          results.push(void 0);
        }
      }
      return results;
    };

    WOW.prototype.show = function(box) {
      this.applyStyle(box);
      box.className = box.className + " " + this.config.animateClass;
      if (this.config.callback != null) {
        this.config.callback(box);
      }
      this.util().emitEvent(box, this.wowEvent);
      this.util().addEvent(box, 'animationend', this.resetAnimation);
      this.util().addEvent(box, 'oanimationend', this.resetAnimation);
      this.util().addEvent(box, 'webkitAnimationEnd', this.resetAnimation);
      this.util().addEvent(box, 'MSAnimationEnd', this.resetAnimation);
      return box;
    };

    WOW.prototype.applyStyle = function(box, hidden) {
      var delay, duration, iteration;
      duration = box.getAttribute('data-wow-duration');
      delay = box.getAttribute('data-wow-delay');
      iteration = box.getAttribute('data-wow-iteration');
      return this.animate((function(_this) {
        return function() {
          return _this.customStyle(box, hidden, duration, delay, iteration);
        };
      })(this));
    };

    WOW.prototype.animate = (function() {
      if ('requestAnimationFrame' in window) {
        return function(callback) {
          return window.requestAnimationFrame(callback);
        };
      } else {
        return function(callback) {
          return callback();
        };
      }
    })();

    WOW.prototype.resetStyle = function() {
      var box, j, len, ref, results;
      ref = this.boxes;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        box = ref[j];
        results.push(box.style.visibility = 'visible');
      }
      return results;
    };

    WOW.prototype.resetAnimation = function(event) {
      var target;
      if (event.type.toLowerCase().indexOf('animationend') >= 0) {
        target = event.target || event.srcElement;
        return target.className = target.className.replace(this.config.animateClass, '').trim();
      }
    };

    WOW.prototype.customStyle = function(box, hidden, duration, delay, iteration) {
      if (hidden) {
        this.cacheAnimationName(box);
      }
      box.style.visibility = hidden ? 'hidden' : 'visible';
      if (duration) {
        this.vendorSet(box.style, {
          animationDuration: duration
        });
      }
      if (delay) {
        this.vendorSet(box.style, {
          animationDelay: delay
        });
      }
      if (iteration) {
        this.vendorSet(box.style, {
          animationIterationCount: iteration
        });
      }
      this.vendorSet(box.style, {
        animationName: hidden ? 'none' : this.cachedAnimationName(box)
      });
      return box;
    };

    WOW.prototype.vendors = ["moz", "webkit"];

    WOW.prototype.vendorSet = function(elem, properties) {
      var name, results, value, vendor;
      results = [];
      for (name in properties) {
        value = properties[name];
        elem["" + name] = value;
        results.push((function() {
          var j, len, ref, results1;
          ref = this.vendors;
          results1 = [];
          for (j = 0, len = ref.length; j < len; j++) {
            vendor = ref[j];
            results1.push(elem["" + vendor + (name.charAt(0).toUpperCase()) + (name.substr(1))] = value);
          }
          return results1;
        }).call(this));
      }
      return results;
    };

    WOW.prototype.vendorCSS = function(elem, property) {
      var j, len, ref, result, style, vendor;
      style = getComputedStyle(elem);
      result = style.getPropertyCSSValue(property);
      ref = this.vendors;
      for (j = 0, len = ref.length; j < len; j++) {
        vendor = ref[j];
        result = result || style.getPropertyCSSValue("-" + vendor + "-" + property);
      }
      return result;
    };

    WOW.prototype.animationName = function(box) {
      var animationName;
      try {
        animationName = this.vendorCSS(box, 'animation-name').cssText;
      } catch (_error) {
        animationName = getComputedStyle(box).getPropertyValue('animation-name');
      }
      if (animationName === 'none') {
        return '';
      } else {
        return animationName;
      }
    };

    WOW.prototype.cacheAnimationName = function(box) {
      return this.animationNameCache.set(box, this.animationName(box));
    };

    WOW.prototype.cachedAnimationName = function(box) {
      return this.animationNameCache.get(box);
    };

    WOW.prototype.scrollHandler = function() {
      return this.scrolled = true;
    };

    WOW.prototype.scrollCallback = function() {
      var box;
      if (this.scrolled) {
        this.scrolled = false;
        this.boxes = (function() {
          var j, len, ref, results;
          ref = this.boxes;
          results = [];
          for (j = 0, len = ref.length; j < len; j++) {
            box = ref[j];
            if (!(box)) {
              continue;
            }
            if (this.isVisible(box)) {
              this.show(box);
              continue;
            }
            results.push(box);
          }
          return results;
        }).call(this);
        if (!(this.boxes.length || this.config.live)) {
          return this.stop();
        }
      }
    };

    WOW.prototype.offsetTop = function(element) {
      var top;
      while (element.offsetTop === void 0) {
        element = element.parentNode;
      }
      top = element.offsetTop;
      while (element = element.offsetParent) {
        top += element.offsetTop;
      }
      return top;
    };

    WOW.prototype.isVisible = function(box) {
      var bottom, offset, top, viewBottom, viewTop;
      offset = box.getAttribute('data-wow-offset') || this.config.offset;
      viewTop = (this.config.scrollContainer && this.config.scrollContainer.scrollTop) || window.pageYOffset;
      viewBottom = viewTop + Math.min(this.element.clientHeight, this.util().innerHeight()) - offset;
      top = this.offsetTop(box);
      bottom = top + box.clientHeight;
      return top <= viewBottom && bottom >= viewTop;
    };

    WOW.prototype.util = function() {
      return this._util != null ? this._util : this._util = new Util();
    };

    WOW.prototype.disabled = function() {
      return !this.config.mobile && this.util().isMobile(navigator.userAgent);
    };

    return WOW;

  })();

}).call(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb3RzdHJhcC5taW4uanMiLCJqcXVlcnkubWluLmpzIiwibWRiLmpzIiwibWRiLm1pbi5qcyIsIm1vZHVsZXMvYnV0dG9ucy5qcyIsIm1vZHVsZXMvY2FyZC1yZXZlYWwuanMiLCJtb2R1bGVzL2NoYXJhY3Rlci1jb3VudGVyLmpzIiwibW9kdWxlcy9jb2xsYXBzaWJsZS5qcyIsIm1vZHVsZXMvZHJvcGRvd24uanMiLCJtb2R1bGVzL2Zvcm1zLWJhc2ljLmpzIiwibW9kdWxlcy9mb3Jtcy5qcyIsIm1vZHVsZXMvZ2xvYmFsLmpzIiwibW9kdWxlcy9oYW1tZXIuanMiLCJtb2R1bGVzL2pxdWVyeS1lYXNpbmcuanMiLCJtb2R1bGVzL2pxdWVyeS1oYW1tZXIuanMiLCJtb2R1bGVzL2xlYW4tbW9kYWwuanMiLCJtb2R1bGVzL21hdGVyaWFsLWJveC5qcyIsIm1vZHVsZXMvbW9ycGhpbmctaWNvbnMuanMiLCJtb2R1bGVzL3BhbmVsLXBvcHVvdC5qcyIsIm1vZHVsZXMvcGlja2VyLWRhdGUuanMiLCJtb2R1bGVzL3BpY2tlci5qcyIsIm1vZHVsZXMvcHJvZ3Jlc3MtYmFyLmpzIiwibW9kdWxlcy9yb3RhdGluZy1jYXJkcy5qcyIsIm1vZHVsZXMvc2Nyb2xsaW5nLW5hdi5qcyIsIm1vZHVsZXMvc2lkZW5hdi5qcyIsIm1vZHVsZXMvc21vb3RoLXNjcm9sbC5qcyIsIm1vZHVsZXMvdG9hc3RzLmpzIiwibW9kdWxlcy92ZWxvY2l0eS5qcyIsIm1vZHVsZXMvdmlkZW8tYmcuanMiLCJtb2R1bGVzL3dhdmVzLWVmZmVjdC5qcyIsIm1vZHVsZXMvd293LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BtUUE7QUFDQTtBQUNBO0FBQ0E7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNWRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3Q1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25tQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25iQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcG9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQm9vdHN0cmFwIHYzLjMuNSAoaHR0cDovL2dldGJvb3RzdHJhcC5jb20pXG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKi9cblxuLyohXG4gKiBHZW5lcmF0ZWQgdXNpbmcgdGhlIEJvb3RzdHJhcCBDdXN0b21pemVyIChodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9jdXN0b21pemUvP2lkPTEzZDI2ZmQ5MGZkOWVhNTIxN2NmKVxuICogQ29uZmlnIHNhdmVkIHRvIGNvbmZpZy5qc29uIGFuZCBodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xM2QyNmZkOTBmZDllYTUyMTdjZlxuICovXG5pZihcInVuZGVmaW5lZFwiPT10eXBlb2YgalF1ZXJ5KXRocm93IG5ldyBFcnJvcihcIkJvb3RzdHJhcCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5XCIpOytmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT10LmZuLmpxdWVyeS5zcGxpdChcIiBcIilbMF0uc3BsaXQoXCIuXCIpO2lmKGVbMF08MiYmZVsxXTw5fHwxPT1lWzBdJiY5PT1lWzFdJiZlWzJdPDEpdGhyb3cgbmV3IEVycm9yKFwiQm9vdHN0cmFwJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnkgdmVyc2lvbiAxLjkuMSBvciBoaWdoZXJcIil9KGpRdWVyeSksK2Z1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcyksbj1pLmRhdGEoXCJicy5hbGVydFwiKTtufHxpLmRhdGEoXCJicy5hbGVydFwiLG49bmV3IG8odGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZuW2VdLmNhbGwoaSl9KX12YXIgaT0nW2RhdGEtZGlzbWlzcz1cImFsZXJ0XCJdJyxvPWZ1bmN0aW9uKGUpe3QoZSkub24oXCJjbGlja1wiLGksdGhpcy5jbG9zZSl9O28uVkVSU0lPTj1cIjMuMy41XCIsby5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxvLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKCl7YS5kZXRhY2goKS50cmlnZ2VyKFwiY2xvc2VkLmJzLmFsZXJ0XCIpLnJlbW92ZSgpfXZhciBuPXQodGhpcykscz1uLmF0dHIoXCJkYXRhLXRhcmdldFwiKTtzfHwocz1uLmF0dHIoXCJocmVmXCIpLHM9cyYmcy5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLFwiXCIpKTt2YXIgYT10KHMpO2UmJmUucHJldmVudERlZmF1bHQoKSxhLmxlbmd0aHx8KGE9bi5jbG9zZXN0KFwiLmFsZXJ0XCIpKSxhLnRyaWdnZXIoZT10LkV2ZW50KFwiY2xvc2UuYnMuYWxlcnRcIikpLGUuaXNEZWZhdWx0UHJldmVudGVkKCl8fChhLnJlbW92ZUNsYXNzKFwiaW5cIiksdC5zdXBwb3J0LnRyYW5zaXRpb24mJmEuaGFzQ2xhc3MoXCJmYWRlXCIpP2Eub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsaSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoby5UUkFOU0lUSU9OX0RVUkFUSU9OKTppKCkpfTt2YXIgbj10LmZuLmFsZXJ0O3QuZm4uYWxlcnQ9ZSx0LmZuLmFsZXJ0LkNvbnN0cnVjdG9yPW8sdC5mbi5hbGVydC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm4uYWxlcnQ9bix0aGlzfSx0KGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmFsZXJ0LmRhdGEtYXBpXCIsaSxvLnByb3RvdHlwZS5jbG9zZSl9KGpRdWVyeSksK2Z1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBvPXQodGhpcyksbj1vLmRhdGEoXCJicy5idXR0b25cIikscz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZTtufHxvLmRhdGEoXCJicy5idXR0b25cIixuPW5ldyBpKHRoaXMscykpLFwidG9nZ2xlXCI9PWU/bi50b2dnbGUoKTplJiZuLnNldFN0YXRlKGUpfSl9dmFyIGk9ZnVuY3Rpb24oZSxvKXt0aGlzLiRlbGVtZW50PXQoZSksdGhpcy5vcHRpb25zPXQuZXh0ZW5kKHt9LGkuREVGQVVMVFMsbyksdGhpcy5pc0xvYWRpbmc9ITF9O2kuVkVSU0lPTj1cIjMuMy41XCIsaS5ERUZBVUxUUz17bG9hZGluZ1RleHQ6XCJsb2FkaW5nLi4uXCJ9LGkucHJvdG90eXBlLnNldFN0YXRlPWZ1bmN0aW9uKGUpe3ZhciBpPVwiZGlzYWJsZWRcIixvPXRoaXMuJGVsZW1lbnQsbj1vLmlzKFwiaW5wdXRcIik/XCJ2YWxcIjpcImh0bWxcIixzPW8uZGF0YSgpO2UrPVwiVGV4dFwiLG51bGw9PXMucmVzZXRUZXh0JiZvLmRhdGEoXCJyZXNldFRleHRcIixvW25dKCkpLHNldFRpbWVvdXQodC5wcm94eShmdW5jdGlvbigpe29bbl0obnVsbD09c1tlXT90aGlzLm9wdGlvbnNbZV06c1tlXSksXCJsb2FkaW5nVGV4dFwiPT1lPyh0aGlzLmlzTG9hZGluZz0hMCxvLmFkZENsYXNzKGkpLmF0dHIoaSxpKSk6dGhpcy5pc0xvYWRpbmcmJih0aGlzLmlzTG9hZGluZz0hMSxvLnJlbW92ZUNsYXNzKGkpLnJlbW92ZUF0dHIoaSkpfSx0aGlzKSwwKX0saS5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7dmFyIHQ9ITAsZT10aGlzLiRlbGVtZW50LmNsb3Nlc3QoJ1tkYXRhLXRvZ2dsZT1cImJ1dHRvbnNcIl0nKTtpZihlLmxlbmd0aCl7dmFyIGk9dGhpcy4kZWxlbWVudC5maW5kKFwiaW5wdXRcIik7XCJyYWRpb1wiPT1pLnByb3AoXCJ0eXBlXCIpPyhpLnByb3AoXCJjaGVja2VkXCIpJiYodD0hMSksZS5maW5kKFwiLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSx0aGlzLiRlbGVtZW50LmFkZENsYXNzKFwiYWN0aXZlXCIpKTpcImNoZWNrYm94XCI9PWkucHJvcChcInR5cGVcIikmJihpLnByb3AoXCJjaGVja2VkXCIpIT09dGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImFjdGl2ZVwiKSYmKHQ9ITEpLHRoaXMuJGVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIikpLGkucHJvcChcImNoZWNrZWRcIix0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpKSx0JiZpLnRyaWdnZXIoXCJjaGFuZ2VcIil9ZWxzZSB0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLXByZXNzZWRcIiwhdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImFjdGl2ZVwiKSksdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKX07dmFyIG89dC5mbi5idXR0b247dC5mbi5idXR0b249ZSx0LmZuLmJ1dHRvbi5Db25zdHJ1Y3Rvcj1pLHQuZm4uYnV0dG9uLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi5idXR0b249byx0aGlzfSx0KGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmJ1dHRvbi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJyxmdW5jdGlvbihpKXt2YXIgbz10KGkudGFyZ2V0KTtvLmhhc0NsYXNzKFwiYnRuXCIpfHwobz1vLmNsb3Nlc3QoXCIuYnRuXCIpKSxlLmNhbGwobyxcInRvZ2dsZVwiKSx0KGkudGFyZ2V0KS5pcygnaW5wdXRbdHlwZT1cInJhZGlvXCJdJyl8fHQoaS50YXJnZXQpLmlzKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKXx8aS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJmb2N1cy5icy5idXR0b24uZGF0YS1hcGkgYmx1ci5icy5idXR0b24uZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsZnVuY3Rpb24oZSl7dChlLnRhcmdldCkuY2xvc2VzdChcIi5idG5cIikudG9nZ2xlQ2xhc3MoXCJmb2N1c1wiLC9eZm9jdXMoaW4pPyQvLnRlc3QoZS50eXBlKSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG89dCh0aGlzKSxuPW8uZGF0YShcImJzLmNhcm91c2VsXCIpLHM9dC5leHRlbmQoe30saS5ERUZBVUxUUyxvLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgZSYmZSksYT1cInN0cmluZ1wiPT10eXBlb2YgZT9lOnMuc2xpZGU7bnx8by5kYXRhKFwiYnMuY2Fyb3VzZWxcIixuPW5ldyBpKHRoaXMscykpLFwibnVtYmVyXCI9PXR5cGVvZiBlP24udG8oZSk6YT9uW2FdKCk6cy5pbnRlcnZhbCYmbi5wYXVzZSgpLmN5Y2xlKCl9KX12YXIgaT1mdW5jdGlvbihlLGkpe3RoaXMuJGVsZW1lbnQ9dChlKSx0aGlzLiRpbmRpY2F0b3JzPXRoaXMuJGVsZW1lbnQuZmluZChcIi5jYXJvdXNlbC1pbmRpY2F0b3JzXCIpLHRoaXMub3B0aW9ucz1pLHRoaXMucGF1c2VkPW51bGwsdGhpcy5zbGlkaW5nPW51bGwsdGhpcy5pbnRlcnZhbD1udWxsLHRoaXMuJGFjdGl2ZT1udWxsLHRoaXMuJGl0ZW1zPW51bGwsdGhpcy5vcHRpb25zLmtleWJvYXJkJiZ0aGlzLiRlbGVtZW50Lm9uKFwia2V5ZG93bi5icy5jYXJvdXNlbFwiLHQucHJveHkodGhpcy5rZXlkb3duLHRoaXMpKSxcImhvdmVyXCI9PXRoaXMub3B0aW9ucy5wYXVzZSYmIShcIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSYmdGhpcy4kZWxlbWVudC5vbihcIm1vdXNlZW50ZXIuYnMuY2Fyb3VzZWxcIix0LnByb3h5KHRoaXMucGF1c2UsdGhpcykpLm9uKFwibW91c2VsZWF2ZS5icy5jYXJvdXNlbFwiLHQucHJveHkodGhpcy5jeWNsZSx0aGlzKSl9O2kuVkVSU0lPTj1cIjMuMy41XCIsaS5UUkFOU0lUSU9OX0RVUkFUSU9OPTYwMCxpLkRFRkFVTFRTPXtpbnRlcnZhbDo1ZTMscGF1c2U6XCJob3ZlclwiLHdyYXA6ITAsa2V5Ym9hcmQ6ITB9LGkucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24odCl7aWYoIS9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QodC50YXJnZXQudGFnTmFtZSkpe3N3aXRjaCh0LndoaWNoKXtjYXNlIDM3OnRoaXMucHJldigpO2JyZWFrO2Nhc2UgMzk6dGhpcy5uZXh0KCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dC5wcmV2ZW50RGVmYXVsdCgpfX0saS5wcm90b3R5cGUuY3ljbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV8fCh0aGlzLnBhdXNlZD0hMSksdGhpcy5pbnRlcnZhbCYmY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwmJiF0aGlzLnBhdXNlZCYmKHRoaXMuaW50ZXJ2YWw9c2V0SW50ZXJ2YWwodC5wcm94eSh0aGlzLm5leHQsdGhpcyksdGhpcy5vcHRpb25zLmludGVydmFsKSksdGhpc30saS5wcm90b3R5cGUuZ2V0SXRlbUluZGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLiRpdGVtcz10LnBhcmVudCgpLmNoaWxkcmVuKFwiLml0ZW1cIiksdGhpcy4kaXRlbXMuaW5kZXgodHx8dGhpcy4kYWN0aXZlKX0saS5wcm90b3R5cGUuZ2V0SXRlbUZvckRpcmVjdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZ2V0SXRlbUluZGV4KGUpLG89XCJwcmV2XCI9PXQmJjA9PT1pfHxcIm5leHRcIj09dCYmaT09dGhpcy4kaXRlbXMubGVuZ3RoLTE7aWYobyYmIXRoaXMub3B0aW9ucy53cmFwKXJldHVybiBlO3ZhciBuPVwicHJldlwiPT10Py0xOjEscz0oaStuKSV0aGlzLiRpdGVtcy5sZW5ndGg7cmV0dXJuIHRoaXMuJGl0ZW1zLmVxKHMpfSxpLnByb3RvdHlwZS50bz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9dGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlPXRoaXMuJGVsZW1lbnQuZmluZChcIi5pdGVtLmFjdGl2ZVwiKSk7cmV0dXJuIHQ+dGhpcy4kaXRlbXMubGVuZ3RoLTF8fDA+dD92b2lkIDA6dGhpcy5zbGlkaW5nP3RoaXMuJGVsZW1lbnQub25lKFwic2xpZC5icy5jYXJvdXNlbFwiLGZ1bmN0aW9uKCl7ZS50byh0KX0pOmk9PXQ/dGhpcy5wYXVzZSgpLmN5Y2xlKCk6dGhpcy5zbGlkZSh0Pmk/XCJuZXh0XCI6XCJwcmV2XCIsdGhpcy4kaXRlbXMuZXEodCkpfSxpLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihlKXtyZXR1cm4gZXx8KHRoaXMucGF1c2VkPSEwKSx0aGlzLiRlbGVtZW50LmZpbmQoXCIubmV4dCwgLnByZXZcIikubGVuZ3RoJiZ0LnN1cHBvcnQudHJhbnNpdGlvbiYmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcih0LnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpLHRoaXMuY3ljbGUoITApKSx0aGlzLmludGVydmFsPWNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpc30saS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNsaWRpbmc/dm9pZCAwOnRoaXMuc2xpZGUoXCJuZXh0XCIpfSxpLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGluZz92b2lkIDA6dGhpcy5zbGlkZShcInByZXZcIil9LGkucHJvdG90eXBlLnNsaWRlPWZ1bmN0aW9uKGUsbyl7dmFyIG49dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW0uYWN0aXZlXCIpLHM9b3x8dGhpcy5nZXRJdGVtRm9yRGlyZWN0aW9uKGUsbiksYT10aGlzLmludGVydmFsLHI9XCJuZXh0XCI9PWU/XCJsZWZ0XCI6XCJyaWdodFwiLGw9dGhpcztpZihzLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXJldHVybiB0aGlzLnNsaWRpbmc9ITE7dmFyIGg9c1swXSxkPXQuRXZlbnQoXCJzbGlkZS5icy5jYXJvdXNlbFwiLHtyZWxhdGVkVGFyZ2V0OmgsZGlyZWN0aW9uOnJ9KTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoZCksIWQuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKHRoaXMuc2xpZGluZz0hMCxhJiZ0aGlzLnBhdXNlKCksdGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpe3RoaXMuJGluZGljYXRvcnMuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7dmFyIHA9dCh0aGlzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKClbdGhpcy5nZXRJdGVtSW5kZXgocyldKTtwJiZwLmFkZENsYXNzKFwiYWN0aXZlXCIpfXZhciBjPXQuRXZlbnQoXCJzbGlkLmJzLmNhcm91c2VsXCIse3JlbGF0ZWRUYXJnZXQ6aCxkaXJlY3Rpb246cn0pO3JldHVybiB0LnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcInNsaWRlXCIpPyhzLmFkZENsYXNzKGUpLHNbMF0ub2Zmc2V0V2lkdGgsbi5hZGRDbGFzcyhyKSxzLmFkZENsYXNzKHIpLG4ub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtzLnJlbW92ZUNsYXNzKFtlLHJdLmpvaW4oXCIgXCIpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxuLnJlbW92ZUNsYXNzKFtcImFjdGl2ZVwiLHJdLmpvaW4oXCIgXCIpKSxsLnNsaWRpbmc9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe2wuJGVsZW1lbnQudHJpZ2dlcihjKX0sMCl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChpLlRSQU5TSVRJT05fRFVSQVRJT04pKToobi5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxzLmFkZENsYXNzKFwiYWN0aXZlXCIpLHRoaXMuc2xpZGluZz0hMSx0aGlzLiRlbGVtZW50LnRyaWdnZXIoYykpLGEmJnRoaXMuY3ljbGUoKSx0aGlzfX07dmFyIG89dC5mbi5jYXJvdXNlbDt0LmZuLmNhcm91c2VsPWUsdC5mbi5jYXJvdXNlbC5Db25zdHJ1Y3Rvcj1pLHQuZm4uY2Fyb3VzZWwubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuLmNhcm91c2VsPW8sdGhpc307dmFyIG49ZnVuY3Rpb24oaSl7dmFyIG8sbj10KHRoaXMpLHM9dChuLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8KG89bi5hdHRyKFwiaHJlZlwiKSkmJm8ucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSk7aWYocy5oYXNDbGFzcyhcImNhcm91c2VsXCIpKXt2YXIgYT10LmV4dGVuZCh7fSxzLmRhdGEoKSxuLmRhdGEoKSkscj1uLmF0dHIoXCJkYXRhLXNsaWRlLXRvXCIpO3ImJihhLmludGVydmFsPSExKSxlLmNhbGwocyxhKSxyJiZzLmRhdGEoXCJicy5jYXJvdXNlbFwiKS50byhyKSxpLnByZXZlbnREZWZhdWx0KCl9fTt0KGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpXCIsXCJbZGF0YS1zbGlkZV1cIixuKS5vbihcImNsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpXCIsXCJbZGF0YS1zbGlkZS10b11cIixuKSx0KHdpbmRvdykub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt0KCdbZGF0YS1yaWRlPVwiY2Fyb3VzZWxcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9dCh0aGlzKTtlLmNhbGwoaSxpLmRhdGEoKSl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3ZhciBpPWUuYXR0cihcImRhdGEtdGFyZ2V0XCIpO2l8fChpPWUuYXR0cihcImhyZWZcIiksaT1pJiYvI1tBLVphLXpdLy50ZXN0KGkpJiZpLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpO3ZhciBvPWkmJnQoaSk7cmV0dXJuIG8mJm8ubGVuZ3RoP286ZS5wYXJlbnQoKX1mdW5jdGlvbiBpKGkpe2kmJjM9PT1pLndoaWNofHwodChuKS5yZW1vdmUoKSx0KHMpLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLG49ZShvKSxzPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O24uaGFzQ2xhc3MoXCJvcGVuXCIpJiYoaSYmXCJjbGlja1wiPT1pLnR5cGUmJi9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoaS50YXJnZXQudGFnTmFtZSkmJnQuY29udGFpbnMoblswXSxpLnRhcmdldCl8fChuLnRyaWdnZXIoaT10LkV2ZW50KFwiaGlkZS5icy5kcm9wZG93blwiLHMpKSxpLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoby5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIiksbi5yZW1vdmVDbGFzcyhcIm9wZW5cIikudHJpZ2dlcihcImhpZGRlbi5icy5kcm9wZG93blwiLHMpKSkpfSkpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcyksbz1pLmRhdGEoXCJicy5kcm9wZG93blwiKTtvfHxpLmRhdGEoXCJicy5kcm9wZG93blwiLG89bmV3IGEodGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZvW2VdLmNhbGwoaSl9KX12YXIgbj1cIi5kcm9wZG93bi1iYWNrZHJvcFwiLHM9J1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxhPWZ1bmN0aW9uKGUpe3QoZSkub24oXCJjbGljay5icy5kcm9wZG93blwiLHRoaXMudG9nZ2xlKX07YS5WRVJTSU9OPVwiMy4zLjVcIixhLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24obyl7dmFyIG49dCh0aGlzKTtpZighbi5pcyhcIi5kaXNhYmxlZCwgOmRpc2FibGVkXCIpKXt2YXIgcz1lKG4pLGE9cy5oYXNDbGFzcyhcIm9wZW5cIik7aWYoaSgpLCFhKXtcIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50JiYhcy5jbG9zZXN0KFwiLm5hdmJhci1uYXZcIikubGVuZ3RoJiZ0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLmFkZENsYXNzKFwiZHJvcGRvd24tYmFja2Ryb3BcIikuaW5zZXJ0QWZ0ZXIodCh0aGlzKSkub24oXCJjbGlja1wiLGkpO3ZhciByPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2lmKHMudHJpZ2dlcihvPXQuRXZlbnQoXCJzaG93LmJzLmRyb3Bkb3duXCIscikpLG8uaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO24udHJpZ2dlcihcImZvY3VzXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJ0cnVlXCIpLHMudG9nZ2xlQ2xhc3MoXCJvcGVuXCIpLnRyaWdnZXIoXCJzaG93bi5icy5kcm9wZG93blwiLHIpfXJldHVybiExfX0sYS5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihpKXtpZigvKDM4fDQwfDI3fDMyKS8udGVzdChpLndoaWNoKSYmIS9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoaS50YXJnZXQudGFnTmFtZSkpe3ZhciBvPXQodGhpcyk7aWYoaS5wcmV2ZW50RGVmYXVsdCgpLGkuc3RvcFByb3BhZ2F0aW9uKCksIW8uaXMoXCIuZGlzYWJsZWQsIDpkaXNhYmxlZFwiKSl7dmFyIG49ZShvKSxhPW4uaGFzQ2xhc3MoXCJvcGVuXCIpO2lmKCFhJiYyNyE9aS53aGljaHx8YSYmMjc9PWkud2hpY2gpcmV0dXJuIDI3PT1pLndoaWNoJiZuLmZpbmQocykudHJpZ2dlcihcImZvY3VzXCIpLG8udHJpZ2dlcihcImNsaWNrXCIpO3ZhciByPVwiIGxpOm5vdCguZGlzYWJsZWQpOnZpc2libGUgYVwiLGw9bi5maW5kKFwiLmRyb3Bkb3duLW1lbnVcIityKTtpZihsLmxlbmd0aCl7dmFyIGg9bC5pbmRleChpLnRhcmdldCk7Mzg9PWkud2hpY2gmJmg+MCYmaC0tLDQwPT1pLndoaWNoJiZoPGwubGVuZ3RoLTEmJmgrKyx+aHx8KGg9MCksbC5lcShoKS50cmlnZ2VyKFwiZm9jdXNcIil9fX19O3ZhciByPXQuZm4uZHJvcGRvd247dC5mbi5kcm9wZG93bj1vLHQuZm4uZHJvcGRvd24uQ29uc3RydWN0b3I9YSx0LmZuLmRyb3Bkb3duLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi5kcm9wZG93bj1yLHRoaXN9LHQoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixpKS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsXCIuZHJvcGRvd24gZm9ybVwiLGZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCl9KS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIscyxhLnByb3RvdHlwZS50b2dnbGUpLm9uKFwia2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaVwiLHMsYS5wcm90b3R5cGUua2V5ZG93bikub24oXCJrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsXCIuZHJvcGRvd24tbWVudVwiLGEucHJvdG90eXBlLmtleWRvd24pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUsbyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPXQodGhpcykscz1uLmRhdGEoXCJicy5tb2RhbFwiKSxhPXQuZXh0ZW5kKHt9LGkuREVGQVVMVFMsbi5kYXRhKCksXCJvYmplY3RcIj09dHlwZW9mIGUmJmUpO3N8fG4uZGF0YShcImJzLm1vZGFsXCIscz1uZXcgaSh0aGlzLGEpKSxcInN0cmluZ1wiPT10eXBlb2YgZT9zW2VdKG8pOmEuc2hvdyYmcy5zaG93KG8pfSl9dmFyIGk9ZnVuY3Rpb24oZSxpKXt0aGlzLm9wdGlvbnM9aSx0aGlzLiRib2R5PXQoZG9jdW1lbnQuYm9keSksdGhpcy4kZWxlbWVudD10KGUpLHRoaXMuJGRpYWxvZz10aGlzLiRlbGVtZW50LmZpbmQoXCIubW9kYWwtZGlhbG9nXCIpLHRoaXMuJGJhY2tkcm9wPW51bGwsdGhpcy5pc1Nob3duPW51bGwsdGhpcy5vcmlnaW5hbEJvZHlQYWQ9bnVsbCx0aGlzLnNjcm9sbGJhcldpZHRoPTAsdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrPSExLHRoaXMub3B0aW9ucy5yZW1vdGUmJnRoaXMuJGVsZW1lbnQuZmluZChcIi5tb2RhbC1jb250ZW50XCIpLmxvYWQodGhpcy5vcHRpb25zLnJlbW90ZSx0LnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC50cmlnZ2VyKFwibG9hZGVkLmJzLm1vZGFsXCIpfSx0aGlzKSl9O2kuVkVSU0lPTj1cIjMuMy41XCIsaS5UUkFOU0lUSU9OX0RVUkFUSU9OPTMwMCxpLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT049MTUwLGkuREVGQVVMVFM9e2JhY2tkcm9wOiEwLGtleWJvYXJkOiEwLHNob3c6ITB9LGkucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc1Nob3duP3RoaXMuaGlkZSgpOnRoaXMuc2hvdyh0KX0saS5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLG49dC5FdmVudChcInNob3cuYnMubW9kYWxcIix7cmVsYXRlZFRhcmdldDplfSk7dGhpcy4kZWxlbWVudC50cmlnZ2VyKG4pLHRoaXMuaXNTaG93bnx8bi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KHRoaXMuaXNTaG93bj0hMCx0aGlzLmNoZWNrU2Nyb2xsYmFyKCksdGhpcy5zZXRTY3JvbGxiYXIoKSx0aGlzLiRib2R5LmFkZENsYXNzKFwibW9kYWwtb3BlblwiKSx0aGlzLmVzY2FwZSgpLHRoaXMucmVzaXplKCksdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIiwnW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJyx0LnByb3h5KHRoaXMuaGlkZSx0aGlzKSksdGhpcy4kZGlhbG9nLm9uKFwibW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWxcIixmdW5jdGlvbigpe28uJGVsZW1lbnQub25lKFwibW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsXCIsZnVuY3Rpb24oZSl7dChlLnRhcmdldCkuaXMoby4kZWxlbWVudCkmJihvLmlnbm9yZUJhY2tkcm9wQ2xpY2s9ITApfSl9KSx0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uKCl7dmFyIG49dC5zdXBwb3J0LnRyYW5zaXRpb24mJm8uJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpO28uJGVsZW1lbnQucGFyZW50KCkubGVuZ3RofHxvLiRlbGVtZW50LmFwcGVuZFRvKG8uJGJvZHkpLG8uJGVsZW1lbnQuc2hvdygpLnNjcm9sbFRvcCgwKSxvLmFkanVzdERpYWxvZygpLG4mJm8uJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsby4kZWxlbWVudC5hZGRDbGFzcyhcImluXCIpLG8uZW5mb3JjZUZvY3VzKCk7dmFyIHM9dC5FdmVudChcInNob3duLmJzLm1vZGFsXCIse3JlbGF0ZWRUYXJnZXQ6ZX0pO24/by4kZGlhbG9nLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7by4kZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIikudHJpZ2dlcihzKX0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGkuVFJBTlNJVElPTl9EVVJBVElPTik6by4kZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIikudHJpZ2dlcihzKX0pKX0saS5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihlKXtlJiZlLnByZXZlbnREZWZhdWx0KCksZT10LkV2ZW50KFwiaGlkZS5icy5tb2RhbFwiKSx0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSksdGhpcy5pc1Nob3duJiYhZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKHRoaXMuaXNTaG93bj0hMSx0aGlzLmVzY2FwZSgpLHRoaXMucmVzaXplKCksdChkb2N1bWVudCkub2ZmKFwiZm9jdXNpbi5icy5tb2RhbFwiKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiaW5cIikub2ZmKFwiY2xpY2suZGlzbWlzcy5icy5tb2RhbFwiKS5vZmYoXCJtb3VzZXVwLmRpc21pc3MuYnMubW9kYWxcIiksdGhpcy4kZGlhbG9nLm9mZihcIm1vdXNlZG93bi5kaXNtaXNzLmJzLm1vZGFsXCIpLHQuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT90aGlzLiRlbGVtZW50Lm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLHQucHJveHkodGhpcy5oaWRlTW9kYWwsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGkuVFJBTlNJVElPTl9EVVJBVElPTik6dGhpcy5oaWRlTW9kYWwoKSl9LGkucHJvdG90eXBlLmVuZm9yY2VGb2N1cz1mdW5jdGlvbigpe3QoZG9jdW1lbnQpLm9mZihcImZvY3VzaW4uYnMubW9kYWxcIikub24oXCJmb2N1c2luLmJzLm1vZGFsXCIsdC5wcm94eShmdW5jdGlvbih0KXt0aGlzLiRlbGVtZW50WzBdPT09dC50YXJnZXR8fHRoaXMuJGVsZW1lbnQuaGFzKHQudGFyZ2V0KS5sZW5ndGh8fHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpfSx0aGlzKSl9LGkucHJvdG90eXBlLmVzY2FwZT1mdW5jdGlvbigpe3RoaXMuaXNTaG93biYmdGhpcy5vcHRpb25zLmtleWJvYXJkP3RoaXMuJGVsZW1lbnQub24oXCJrZXlkb3duLmRpc21pc3MuYnMubW9kYWxcIix0LnByb3h5KGZ1bmN0aW9uKHQpezI3PT10LndoaWNoJiZ0aGlzLmhpZGUoKX0sdGhpcykpOnRoaXMuaXNTaG93bnx8dGhpcy4kZWxlbWVudC5vZmYoXCJrZXlkb3duLmRpc21pc3MuYnMubW9kYWxcIil9LGkucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbigpe3RoaXMuaXNTaG93bj90KHdpbmRvdykub24oXCJyZXNpemUuYnMubW9kYWxcIix0LnByb3h5KHRoaXMuaGFuZGxlVXBkYXRlLHRoaXMpKTp0KHdpbmRvdykub2ZmKFwicmVzaXplLmJzLm1vZGFsXCIpfSxpLnByb3RvdHlwZS5oaWRlTW9kYWw9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuJGVsZW1lbnQuaGlkZSgpLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXt0LiRib2R5LnJlbW92ZUNsYXNzKFwibW9kYWwtb3BlblwiKSx0LnJlc2V0QWRqdXN0bWVudHMoKSx0LnJlc2V0U2Nyb2xsYmFyKCksdC4kZWxlbWVudC50cmlnZ2VyKFwiaGlkZGVuLmJzLm1vZGFsXCIpfSl9LGkucHJvdG90eXBlLnJlbW92ZUJhY2tkcm9wPWZ1bmN0aW9uKCl7dGhpcy4kYmFja2Ryb3AmJnRoaXMuJGJhY2tkcm9wLnJlbW92ZSgpLHRoaXMuJGJhY2tkcm9wPW51bGx9LGkucHJvdG90eXBlLmJhY2tkcm9wPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMsbj10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT9cImZhZGVcIjpcIlwiO2lmKHRoaXMuaXNTaG93biYmdGhpcy5vcHRpb25zLmJhY2tkcm9wKXt2YXIgcz10LnN1cHBvcnQudHJhbnNpdGlvbiYmbjtpZih0aGlzLiRiYWNrZHJvcD10KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLmFkZENsYXNzKFwibW9kYWwtYmFja2Ryb3AgXCIrbikuYXBwZW5kVG8odGhpcy4kYm9keSksdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIix0LnByb3h5KGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2s/dm9pZCh0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2s9ITEpOnZvaWQodC50YXJnZXQ9PT10LmN1cnJlbnRUYXJnZXQmJihcInN0YXRpY1wiPT10aGlzLm9wdGlvbnMuYmFja2Ryb3A/dGhpcy4kZWxlbWVudFswXS5mb2N1cygpOnRoaXMuaGlkZSgpKSl9LHRoaXMpKSxzJiZ0aGlzLiRiYWNrZHJvcFswXS5vZmZzZXRXaWR0aCx0aGlzLiRiYWNrZHJvcC5hZGRDbGFzcyhcImluXCIpLCFlKXJldHVybjtzP3RoaXMuJGJhY2tkcm9wLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGkuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik6ZSgpfWVsc2UgaWYoIXRoaXMuaXNTaG93biYmdGhpcy4kYmFja2Ryb3Ape3RoaXMuJGJhY2tkcm9wLnJlbW92ZUNsYXNzKFwiaW5cIik7dmFyIGE9ZnVuY3Rpb24oKXtvLnJlbW92ZUJhY2tkcm9wKCksZSYmZSgpfTt0LnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik/dGhpcy4kYmFja2Ryb3Aub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoaS5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKTphKCl9ZWxzZSBlJiZlKCl9LGkucHJvdG90eXBlLmhhbmRsZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuYWRqdXN0RGlhbG9nKCl9LGkucHJvdG90eXBlLmFkanVzdERpYWxvZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJGVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7dGhpcy4kZWxlbWVudC5jc3Moe3BhZGRpbmdMZWZ0OiF0aGlzLmJvZHlJc092ZXJmbG93aW5nJiZ0P3RoaXMuc2Nyb2xsYmFyV2lkdGg6XCJcIixwYWRkaW5nUmlnaHQ6dGhpcy5ib2R5SXNPdmVyZmxvd2luZyYmIXQ/dGhpcy5zY3JvbGxiYXJXaWR0aDpcIlwifSl9LGkucHJvdG90eXBlLnJlc2V0QWRqdXN0bWVudHM9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmNzcyh7cGFkZGluZ0xlZnQ6XCJcIixwYWRkaW5nUmlnaHQ6XCJcIn0pfSxpLnByb3RvdHlwZS5jaGVja1Njcm9sbGJhcj1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5pbm5lcldpZHRoO2lmKCF0KXt2YXIgZT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dD1lLnJpZ2h0LU1hdGguYWJzKGUubGVmdCl9dGhpcy5ib2R5SXNPdmVyZmxvd2luZz1kb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoPHQsdGhpcy5zY3JvbGxiYXJXaWR0aD10aGlzLm1lYXN1cmVTY3JvbGxiYXIoKX0saS5wcm90b3R5cGUuc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIHQ9cGFyc2VJbnQodGhpcy4kYm9keS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIpfHwwLDEwKTt0aGlzLm9yaWdpbmFsQm9keVBhZD1kb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodHx8XCJcIix0aGlzLmJvZHlJc092ZXJmbG93aW5nJiZ0aGlzLiRib2R5LmNzcyhcInBhZGRpbmctcmlnaHRcIix0K3RoaXMuc2Nyb2xsYmFyV2lkdGgpfSxpLnByb3RvdHlwZS5yZXNldFNjcm9sbGJhcj1mdW5jdGlvbigpe3RoaXMuJGJvZHkuY3NzKFwicGFkZGluZy1yaWdodFwiLHRoaXMub3JpZ2luYWxCb2R5UGFkKX0saS5wcm90b3R5cGUubWVhc3VyZVNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJtb2RhbC1zY3JvbGxiYXItbWVhc3VyZVwiLHRoaXMuJGJvZHkuYXBwZW5kKHQpO3ZhciBlPXQub2Zmc2V0V2lkdGgtdC5jbGllbnRXaWR0aDtyZXR1cm4gdGhpcy4kYm9keVswXS5yZW1vdmVDaGlsZCh0KSxlfTt2YXIgbz10LmZuLm1vZGFsO3QuZm4ubW9kYWw9ZSx0LmZuLm1vZGFsLkNvbnN0cnVjdG9yPWksdC5mbi5tb2RhbC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm4ubW9kYWw9byx0aGlzfSx0KGRvY3VtZW50KS5vbihcImNsaWNrLmJzLm1vZGFsLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJyxmdW5jdGlvbihpKXt2YXIgbz10KHRoaXMpLG49by5hdHRyKFwiaHJlZlwiKSxzPXQoby5hdHRyKFwiZGF0YS10YXJnZXRcIil8fG4mJm4ucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSksYT1zLmRhdGEoXCJicy5tb2RhbFwiKT9cInRvZ2dsZVwiOnQuZXh0ZW5kKHtyZW1vdGU6IS8jLy50ZXN0KG4pJiZufSxzLmRhdGEoKSxvLmRhdGEoKSk7by5pcyhcImFcIikmJmkucHJldmVudERlZmF1bHQoKSxzLm9uZShcInNob3cuYnMubW9kYWxcIixmdW5jdGlvbih0KXt0LmlzRGVmYXVsdFByZXZlbnRlZCgpfHxzLm9uZShcImhpZGRlbi5icy5tb2RhbFwiLGZ1bmN0aW9uKCl7by5pcyhcIjp2aXNpYmxlXCIpJiZvLnRyaWdnZXIoXCJmb2N1c1wiKX0pfSksZS5jYWxsKHMsYSx0aGlzKX0pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLG49by5kYXRhKFwiYnMudG9vbHRpcFwiKSxzPVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlOyhufHwhL2Rlc3Ryb3l8aGlkZS8udGVzdChlKSkmJihufHxvLmRhdGEoXCJicy50b29sdGlwXCIsbj1uZXcgaSh0aGlzLHMpKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmbltlXSgpKX0pfXZhciBpPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPW51bGwsdGhpcy5vcHRpb25zPW51bGwsdGhpcy5lbmFibGVkPW51bGwsdGhpcy50aW1lb3V0PW51bGwsdGhpcy5ob3ZlclN0YXRlPW51bGwsdGhpcy4kZWxlbWVudD1udWxsLHRoaXMuaW5TdGF0ZT1udWxsLHRoaXMuaW5pdChcInRvb2x0aXBcIix0LGUpfTtpLlZFUlNJT049XCIzLjMuNVwiLGkuVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsaS5ERUZBVUxUUz17YW5pbWF0aW9uOiEwLHBsYWNlbWVudDpcInRvcFwiLHNlbGVjdG9yOiExLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2PicsdHJpZ2dlcjpcImhvdmVyIGZvY3VzXCIsdGl0bGU6XCJcIixkZWxheTowLGh0bWw6ITEsY29udGFpbmVyOiExLHZpZXdwb3J0OntzZWxlY3RvcjpcImJvZHlcIixwYWRkaW5nOjB9fSxpLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUsaSxvKXtpZih0aGlzLmVuYWJsZWQ9ITAsdGhpcy50eXBlPWUsdGhpcy4kZWxlbWVudD10KGkpLHRoaXMub3B0aW9ucz10aGlzLmdldE9wdGlvbnMobyksdGhpcy4kdmlld3BvcnQ9dGhpcy5vcHRpb25zLnZpZXdwb3J0JiZ0KHQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMudmlld3BvcnQpP3RoaXMub3B0aW9ucy52aWV3cG9ydC5jYWxsKHRoaXMsdGhpcy4kZWxlbWVudCk6dGhpcy5vcHRpb25zLnZpZXdwb3J0LnNlbGVjdG9yfHx0aGlzLm9wdGlvbnMudmlld3BvcnQpLHRoaXMuaW5TdGF0ZT17Y2xpY2s6ITEsaG92ZXI6ITEsZm9jdXM6ITF9LHRoaXMuJGVsZW1lbnRbMF1pbnN0YW5jZW9mIGRvY3VtZW50LmNvbnN0cnVjdG9yJiYhdGhpcy5vcHRpb25zLnNlbGVjdG9yKXRocm93IG5ldyBFcnJvcihcImBzZWxlY3RvcmAgb3B0aW9uIG11c3QgYmUgc3BlY2lmaWVkIHdoZW4gaW5pdGlhbGl6aW5nIFwiK3RoaXMudHlwZStcIiBvbiB0aGUgd2luZG93LmRvY3VtZW50IG9iamVjdCFcIik7Zm9yKHZhciBuPXRoaXMub3B0aW9ucy50cmlnZ2VyLnNwbGl0KFwiIFwiKSxzPW4ubGVuZ3RoO3MtLTspe3ZhciBhPW5bc107aWYoXCJjbGlja1wiPT1hKXRoaXMuJGVsZW1lbnQub24oXCJjbGljay5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLHQucHJveHkodGhpcy50b2dnbGUsdGhpcykpO2Vsc2UgaWYoXCJtYW51YWxcIiE9YSl7dmFyIHI9XCJob3ZlclwiPT1hP1wibW91c2VlbnRlclwiOlwiZm9jdXNpblwiLGw9XCJob3ZlclwiPT1hP1wibW91c2VsZWF2ZVwiOlwiZm9jdXNvdXRcIjt0aGlzLiRlbGVtZW50Lm9uKHIrXCIuXCIrdGhpcy50eXBlLHRoaXMub3B0aW9ucy5zZWxlY3Rvcix0LnByb3h5KHRoaXMuZW50ZXIsdGhpcykpLHRoaXMuJGVsZW1lbnQub24obCtcIi5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLHQucHJveHkodGhpcy5sZWF2ZSx0aGlzKSl9fXRoaXMub3B0aW9ucy5zZWxlY3Rvcj90aGlzLl9vcHRpb25zPXQuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyx7dHJpZ2dlcjpcIm1hbnVhbFwiLHNlbGVjdG9yOlwiXCJ9KTp0aGlzLmZpeFRpdGxlKCl9LGkucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGkuREVGQVVMVFN9LGkucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dC5leHRlbmQoe30sdGhpcy5nZXREZWZhdWx0cygpLHRoaXMuJGVsZW1lbnQuZGF0YSgpLGUpLGUuZGVsYXkmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmRlbGF5JiYoZS5kZWxheT17c2hvdzplLmRlbGF5LGhpZGU6ZS5kZWxheX0pLGV9LGkucHJvdG90eXBlLmdldERlbGVnYXRlT3B0aW9ucz1mdW5jdGlvbigpe3ZhciBlPXt9LGk9dGhpcy5nZXREZWZhdWx0cygpO3JldHVybiB0aGlzLl9vcHRpb25zJiZ0LmVhY2godGhpcy5fb3B0aW9ucyxmdW5jdGlvbih0LG8pe2lbdF0hPW8mJihlW3RdPW8pfSksZX0saS5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24oZSl7dmFyIGk9ZSBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I/ZTp0KGUuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIGl8fChpPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGUuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSx0KGUuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxpKSksZSBpbnN0YW5jZW9mIHQuRXZlbnQmJihpLmluU3RhdGVbXCJmb2N1c2luXCI9PWUudHlwZT9cImZvY3VzXCI6XCJob3ZlclwiXT0hMCksaS50aXAoKS5oYXNDbGFzcyhcImluXCIpfHxcImluXCI9PWkuaG92ZXJTdGF0ZT92b2lkKGkuaG92ZXJTdGF0ZT1cImluXCIpOihjbGVhclRpbWVvdXQoaS50aW1lb3V0KSxpLmhvdmVyU3RhdGU9XCJpblwiLGkub3B0aW9ucy5kZWxheSYmaS5vcHRpb25zLmRlbGF5LnNob3c/dm9pZChpLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe1wiaW5cIj09aS5ob3ZlclN0YXRlJiZpLnNob3coKX0saS5vcHRpb25zLmRlbGF5LnNob3cpKTppLnNob3coKSl9LGkucHJvdG90eXBlLmlzSW5TdGF0ZVRydWU9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5pblN0YXRlKWlmKHRoaXMuaW5TdGF0ZVt0XSlyZXR1cm4hMDtyZXR1cm4hMX0saS5wcm90b3R5cGUubGVhdmU9ZnVuY3Rpb24oZSl7dmFyIGk9ZSBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I/ZTp0KGUuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIGl8fChpPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGUuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSx0KGUuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxpKSksZSBpbnN0YW5jZW9mIHQuRXZlbnQmJihpLmluU3RhdGVbXCJmb2N1c291dFwiPT1lLnR5cGU/XCJmb2N1c1wiOlwiaG92ZXJcIl09ITEpLGkuaXNJblN0YXRlVHJ1ZSgpP3ZvaWQgMDooY2xlYXJUaW1lb3V0KGkudGltZW91dCksaS5ob3ZlclN0YXRlPVwib3V0XCIsaS5vcHRpb25zLmRlbGF5JiZpLm9wdGlvbnMuZGVsYXkuaGlkZT92b2lkKGkudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJvdXRcIj09aS5ob3ZlclN0YXRlJiZpLmhpZGUoKX0saS5vcHRpb25zLmRlbGF5LmhpZGUpKTppLmhpZGUoKSl9LGkucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgZT10LkV2ZW50KFwic2hvdy5icy5cIit0aGlzLnR5cGUpO2lmKHRoaXMuaGFzQ29udGVudCgpJiZ0aGlzLmVuYWJsZWQpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcihlKTt2YXIgbz10LmNvbnRhaW5zKHRoaXMuJGVsZW1lbnRbMF0ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsdGhpcy4kZWxlbWVudFswXSk7aWYoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IW8pcmV0dXJuO3ZhciBuPXRoaXMscz10aGlzLnRpcCgpLGE9dGhpcy5nZXRVSUQodGhpcy50eXBlKTt0aGlzLnNldENvbnRlbnQoKSxzLmF0dHIoXCJpZFwiLGEpLHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixhKSx0aGlzLm9wdGlvbnMuYW5pbWF0aW9uJiZzLmFkZENsYXNzKFwiZmFkZVwiKTt2YXIgcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMucGxhY2VtZW50P3RoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLHNbMF0sdGhpcy4kZWxlbWVudFswXSk6dGhpcy5vcHRpb25zLnBsYWNlbWVudCxsPS9cXHM/YXV0bz9cXHM/L2ksaD1sLnRlc3Qocik7aCYmKHI9ci5yZXBsYWNlKGwsXCJcIil8fFwidG9wXCIpLHMuZGV0YWNoKCkuY3NzKHt0b3A6MCxsZWZ0OjAsZGlzcGxheTpcImJsb2NrXCJ9KS5hZGRDbGFzcyhyKS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLHRoaXMpLHRoaXMub3B0aW9ucy5jb250YWluZXI/cy5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTpzLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImluc2VydGVkLmJzLlwiK3RoaXMudHlwZSk7dmFyIGQ9dGhpcy5nZXRQb3NpdGlvbigpLHA9c1swXS5vZmZzZXRXaWR0aCxjPXNbMF0ub2Zmc2V0SGVpZ2h0O2lmKGgpe3ZhciBmPXIsdT10aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KTtyPVwiYm90dG9tXCI9PXImJmQuYm90dG9tK2M+dS5ib3R0b20/XCJ0b3BcIjpcInRvcFwiPT1yJiZkLnRvcC1jPHUudG9wP1wiYm90dG9tXCI6XCJyaWdodFwiPT1yJiZkLnJpZ2h0K3A+dS53aWR0aD9cImxlZnRcIjpcImxlZnRcIj09ciYmZC5sZWZ0LXA8dS5sZWZ0P1wicmlnaHRcIjpyLHMucmVtb3ZlQ2xhc3MoZikuYWRkQ2xhc3Mocil9dmFyIGc9dGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KHIsZCxwLGMpO3RoaXMuYXBwbHlQbGFjZW1lbnQoZyxyKTt2YXIgbT1mdW5jdGlvbigpe3ZhciB0PW4uaG92ZXJTdGF0ZTtuLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5cIituLnR5cGUpLG4uaG92ZXJTdGF0ZT1udWxsLFwib3V0XCI9PXQmJm4ubGVhdmUobil9O3Quc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiR0aXAuaGFzQ2xhc3MoXCJmYWRlXCIpP3Mub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsbSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoaS5UUkFOU0lUSU9OX0RVUkFUSU9OKTptKCl9fSxpLnByb3RvdHlwZS5hcHBseVBsYWNlbWVudD1mdW5jdGlvbihlLGkpe3ZhciBvPXRoaXMudGlwKCksbj1vWzBdLm9mZnNldFdpZHRoLHM9b1swXS5vZmZzZXRIZWlnaHQsYT1wYXJzZUludChvLmNzcyhcIm1hcmdpbi10b3BcIiksMTApLHI9cGFyc2VJbnQoby5jc3MoXCJtYXJnaW4tbGVmdFwiKSwxMCk7aXNOYU4oYSkmJihhPTApLGlzTmFOKHIpJiYocj0wKSxlLnRvcCs9YSxlLmxlZnQrPXIsdC5vZmZzZXQuc2V0T2Zmc2V0KG9bMF0sdC5leHRlbmQoe3VzaW5nOmZ1bmN0aW9uKHQpe28uY3NzKHt0b3A6TWF0aC5yb3VuZCh0LnRvcCksbGVmdDpNYXRoLnJvdW5kKHQubGVmdCl9KX19LGUpLDApLG8uYWRkQ2xhc3MoXCJpblwiKTt2YXIgbD1vWzBdLm9mZnNldFdpZHRoLGg9b1swXS5vZmZzZXRIZWlnaHQ7XCJ0b3BcIj09aSYmaCE9cyYmKGUudG9wPWUudG9wK3MtaCk7dmFyIGQ9dGhpcy5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEoaSxlLGwsaCk7ZC5sZWZ0P2UubGVmdCs9ZC5sZWZ0OmUudG9wKz1kLnRvcDt2YXIgcD0vdG9wfGJvdHRvbS8udGVzdChpKSxjPXA/MipkLmxlZnQtbitsOjIqZC50b3AtcytoLGY9cD9cIm9mZnNldFdpZHRoXCI6XCJvZmZzZXRIZWlnaHRcIjtvLm9mZnNldChlKSx0aGlzLnJlcGxhY2VBcnJvdyhjLG9bMF1bZl0scCl9LGkucHJvdG90eXBlLnJlcGxhY2VBcnJvdz1mdW5jdGlvbih0LGUsaSl7dGhpcy5hcnJvdygpLmNzcyhpP1wibGVmdFwiOlwidG9wXCIsNTAqKDEtdC9lKStcIiVcIikuY3NzKGk/XCJ0b3BcIjpcImxlZnRcIixcIlwiKX0saS5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciB0PXRoaXMudGlwKCksZT10aGlzLmdldFRpdGxlKCk7dC5maW5kKFwiLnRvb2x0aXAtaW5uZXJcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGUpLHQucmVtb3ZlQ2xhc3MoXCJmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodFwiKX0saS5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihlKXtmdW5jdGlvbiBvKCl7XCJpblwiIT1uLmhvdmVyU3RhdGUmJnMuZGV0YWNoKCksbi4kZWxlbWVudC5yZW1vdmVBdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiKS50cmlnZ2VyKFwiaGlkZGVuLmJzLlwiK24udHlwZSksZSYmZSgpfXZhciBuPXRoaXMscz10KHRoaXMuJHRpcCksYT10LkV2ZW50KFwiaGlkZS5icy5cIit0aGlzLnR5cGUpO3JldHVybiB0aGlzLiRlbGVtZW50LnRyaWdnZXIoYSksYS5pc0RlZmF1bHRQcmV2ZW50ZWQoKT92b2lkIDA6KHMucmVtb3ZlQ2xhc3MoXCJpblwiKSx0LnN1cHBvcnQudHJhbnNpdGlvbiYmcy5oYXNDbGFzcyhcImZhZGVcIik/cy5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixvKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChpLlRSQU5TSVRJT05fRFVSQVRJT04pOm8oKSx0aGlzLmhvdmVyU3RhdGU9bnVsbCx0aGlzKX0saS5wcm90b3R5cGUuZml4VGl0bGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRlbGVtZW50Oyh0LmF0dHIoXCJ0aXRsZVwiKXx8XCJzdHJpbmdcIiE9dHlwZW9mIHQuYXR0cihcImRhdGEtb3JpZ2luYWwtdGl0bGVcIikpJiZ0LmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIsdC5hdHRyKFwidGl0bGVcIil8fFwiXCIpLmF0dHIoXCJ0aXRsZVwiLFwiXCIpfSxpLnByb3RvdHlwZS5oYXNDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKX0saS5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLiRlbGVtZW50O3ZhciBpPWVbMF0sbz1cIkJPRFlcIj09aS50YWdOYW1lLG49aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtudWxsPT1uLndpZHRoJiYobj10LmV4dGVuZCh7fSxuLHt3aWR0aDpuLnJpZ2h0LW4ubGVmdCxoZWlnaHQ6bi5ib3R0b20tbi50b3B9KSk7dmFyIHM9bz97dG9wOjAsbGVmdDowfTplLm9mZnNldCgpLGE9e3Njcm9sbDpvP2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOmUuc2Nyb2xsVG9wKCl9LHI9bz97d2lkdGg6dCh3aW5kb3cpLndpZHRoKCksaGVpZ2h0OnQod2luZG93KS5oZWlnaHQoKX06bnVsbDtyZXR1cm4gdC5leHRlbmQoe30sbixhLHIscyl9LGkucHJvdG90eXBlLmdldENhbGN1bGF0ZWRPZmZzZXQ9ZnVuY3Rpb24odCxlLGksbyl7cmV0dXJuXCJib3R0b21cIj09dD97dG9wOmUudG9wK2UuaGVpZ2h0LGxlZnQ6ZS5sZWZ0K2Uud2lkdGgvMi1pLzJ9OlwidG9wXCI9PXQ/e3RvcDplLnRvcC1vLGxlZnQ6ZS5sZWZ0K2Uud2lkdGgvMi1pLzJ9OlwibGVmdFwiPT10P3t0b3A6ZS50b3ArZS5oZWlnaHQvMi1vLzIsbGVmdDplLmxlZnQtaX06e3RvcDplLnRvcCtlLmhlaWdodC8yLW8vMixsZWZ0OmUubGVmdCtlLndpZHRofX0saS5wcm90b3R5cGUuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhPWZ1bmN0aW9uKHQsZSxpLG8pe3ZhciBuPXt0b3A6MCxsZWZ0OjB9O2lmKCF0aGlzLiR2aWV3cG9ydClyZXR1cm4gbjt2YXIgcz10aGlzLm9wdGlvbnMudmlld3BvcnQmJnRoaXMub3B0aW9ucy52aWV3cG9ydC5wYWRkaW5nfHwwLGE9dGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydCk7aWYoL3JpZ2h0fGxlZnQvLnRlc3QodCkpe3ZhciByPWUudG9wLXMtYS5zY3JvbGwsbD1lLnRvcCtzLWEuc2Nyb2xsK287cjxhLnRvcD9uLnRvcD1hLnRvcC1yOmw+YS50b3ArYS5oZWlnaHQmJihuLnRvcD1hLnRvcCthLmhlaWdodC1sKX1lbHNle3ZhciBoPWUubGVmdC1zLGQ9ZS5sZWZ0K3MraTtoPGEubGVmdD9uLmxlZnQ9YS5sZWZ0LWg6ZD5hLnJpZ2h0JiYobi5sZWZ0PWEubGVmdCthLndpZHRoLWQpfXJldHVybiBufSxpLnByb3RvdHlwZS5nZXRUaXRsZT1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy4kZWxlbWVudCxpPXRoaXMub3B0aW9ucztyZXR1cm4gdD1lLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpfHwoXCJmdW5jdGlvblwiPT10eXBlb2YgaS50aXRsZT9pLnRpdGxlLmNhbGwoZVswXSk6aS50aXRsZSl9LGkucHJvdG90eXBlLmdldFVJRD1mdW5jdGlvbih0KXtkbyB0Kz1+figxZTYqTWF0aC5yYW5kb20oKSk7d2hpbGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkpO3JldHVybiB0fSxpLnByb3RvdHlwZS50aXA9ZnVuY3Rpb24oKXtpZighdGhpcy4kdGlwJiYodGhpcy4kdGlwPXQodGhpcy5vcHRpb25zLnRlbXBsYXRlKSwxIT10aGlzLiR0aXAubGVuZ3RoKSl0aHJvdyBuZXcgRXJyb3IodGhpcy50eXBlK1wiIGB0ZW1wbGF0ZWAgb3B0aW9uIG11c3QgY29uc2lzdCBvZiBleGFjdGx5IDEgdG9wLWxldmVsIGVsZW1lbnQhXCIpO3JldHVybiB0aGlzLiR0aXB9LGkucHJvdG90eXBlLmFycm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFycm93PXRoaXMuJGFycm93fHx0aGlzLnRpcCgpLmZpbmQoXCIudG9vbHRpcC1hcnJvd1wiKX0saS5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSEwfSxpLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSExfSxpLnByb3RvdHlwZS50b2dnbGVFbmFibGVkPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSF0aGlzLmVuYWJsZWR9LGkucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihlKXt2YXIgaT10aGlzO2UmJihpPXQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKSxpfHwoaT1uZXcgdGhpcy5jb25zdHJ1Y3RvcihlLmN1cnJlbnRUYXJnZXQsdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSksdChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUsaSkpKSxlPyhpLmluU3RhdGUuY2xpY2s9IWkuaW5TdGF0ZS5jbGljayxpLmlzSW5TdGF0ZVRydWUoKT9pLmVudGVyKGkpOmkubGVhdmUoaSkpOmkudGlwKCkuaGFzQ2xhc3MoXCJpblwiKT9pLmxlYXZlKGkpOmkuZW50ZXIoaSl9LGkucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMuaGlkZShmdW5jdGlvbigpe3QuJGVsZW1lbnQub2ZmKFwiLlwiK3QudHlwZSkucmVtb3ZlRGF0YShcImJzLlwiK3QudHlwZSksdC4kdGlwJiZ0LiR0aXAuZGV0YWNoKCksdC4kdGlwPW51bGwsdC4kYXJyb3c9bnVsbCx0LiR2aWV3cG9ydD1udWxsfSl9O3ZhciBvPXQuZm4udG9vbHRpcDt0LmZuLnRvb2x0aXA9ZSx0LmZuLnRvb2x0aXAuQ29uc3RydWN0b3I9aSx0LmZuLnRvb2x0aXAubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuLnRvb2x0aXA9byx0aGlzfX0oalF1ZXJ5KSwrZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG89dCh0aGlzKSxuPW8uZGF0YShcImJzLnBvcG92ZXJcIikscz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZTsobnx8IS9kZXN0cm95fGhpZGUvLnRlc3QoZSkpJiYobnx8by5kYXRhKFwiYnMucG9wb3ZlclwiLG49bmV3IGkodGhpcyxzKSksXCJzdHJpbmdcIj09dHlwZW9mIGUmJm5bZV0oKSl9KX12YXIgaT1mdW5jdGlvbih0LGUpe3RoaXMuaW5pdChcInBvcG92ZXJcIix0LGUpfTtpZighdC5mbi50b29sdGlwKXRocm93IG5ldyBFcnJvcihcIlBvcG92ZXIgcmVxdWlyZXMgdG9vbHRpcC5qc1wiKTtpLlZFUlNJT049XCIzLjMuNVwiLGkuREVGQVVMVFM9dC5leHRlbmQoe30sdC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLkRFRkFVTFRTLHtwbGFjZW1lbnQ6XCJyaWdodFwiLHRyaWdnZXI6XCJjbGlja1wiLGNvbnRlbnQ6XCJcIix0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cInBvcG92ZXJcIiByb2xlPVwidG9vbHRpcFwiPjxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PjxoMyBjbGFzcz1cInBvcG92ZXItdGl0bGVcIj48L2gzPjxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nfSksaS5wcm90b3R5cGU9dC5leHRlbmQoe30sdC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY29uc3RydWN0b3I9aSxpLnByb3RvdHlwZS5nZXREZWZhdWx0cz1mdW5jdGlvbigpe3JldHVybiBpLkRFRkFVTFRTfSxpLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50aXAoKSxlPXRoaXMuZ2V0VGl0bGUoKSxpPXRoaXMuZ2V0Q29udGVudCgpO3QuZmluZChcIi5wb3BvdmVyLXRpdGxlXCIpW3RoaXMub3B0aW9ucy5odG1sP1wiaHRtbFwiOlwidGV4dFwiXShlKSx0LmZpbmQoXCIucG9wb3Zlci1jb250ZW50XCIpLmNoaWxkcmVuKCkuZGV0YWNoKCkuZW5kKClbdGhpcy5vcHRpb25zLmh0bWw/XCJzdHJpbmdcIj09dHlwZW9mIGk/XCJodG1sXCI6XCJhcHBlbmRcIjpcInRleHRcIl0oaSksdC5yZW1vdmVDbGFzcyhcImZhZGUgdG9wIGJvdHRvbSBsZWZ0IHJpZ2h0IGluXCIpLHQuZmluZChcIi5wb3BvdmVyLXRpdGxlXCIpLmh0bWwoKXx8dC5maW5kKFwiLnBvcG92ZXItdGl0bGVcIikuaGlkZSgpfSxpLnByb3RvdHlwZS5oYXNDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKXx8dGhpcy5nZXRDb250ZW50KCl9LGkucHJvdG90eXBlLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRlbGVtZW50LGU9dGhpcy5vcHRpb25zO3JldHVybiB0LmF0dHIoXCJkYXRhLWNvbnRlbnRcIil8fChcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNvbnRlbnQ/ZS5jb250ZW50LmNhbGwodFswXSk6ZS5jb250ZW50KX0saS5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYXJyb3c9dGhpcy4kYXJyb3d8fHRoaXMudGlwKCkuZmluZChcIi5hcnJvd1wiKX07dmFyIG89dC5mbi5wb3BvdmVyO3QuZm4ucG9wb3Zlcj1lLHQuZm4ucG9wb3Zlci5Db25zdHJ1Y3Rvcj1pLHQuZm4ucG9wb3Zlci5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm4ucG9wb3Zlcj1vLHRoaXN9fShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLG49by5kYXRhKFwiYnMudGFiXCIpO258fG8uZGF0YShcImJzLnRhYlwiLG49bmV3IGkodGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZuW2VdKCl9KX12YXIgaT1mdW5jdGlvbihlKXt0aGlzLmVsZW1lbnQ9dChlKX07aS5WRVJTSU9OPVwiMy4zLjVcIixpLlRSQU5TSVRJT05fRFVSQVRJT049MTUwLGkucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQsaT1lLmNsb3Nlc3QoXCJ1bDpub3QoLmRyb3Bkb3duLW1lbnUpXCIpLG89ZS5kYXRhKFwidGFyZ2V0XCIpO2lmKG98fChvPWUuYXR0cihcImhyZWZcIiksbz1vJiZvLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpLCFlLnBhcmVudChcImxpXCIpLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXt2YXIgbj1pLmZpbmQoXCIuYWN0aXZlOmxhc3QgYVwiKSxzPXQuRXZlbnQoXCJoaWRlLmJzLnRhYlwiLHtyZWxhdGVkVGFyZ2V0OmVbMF19KSxhPXQuRXZlbnQoXCJzaG93LmJzLnRhYlwiLHtyZWxhdGVkVGFyZ2V0Om5bMF19KTtpZihuLnRyaWdnZXIocyksZS50cmlnZ2VyKGEpLCFhLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYhcy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIHI9dChvKTt0aGlzLmFjdGl2YXRlKGUuY2xvc2VzdChcImxpXCIpLGkpLHRoaXMuYWN0aXZhdGUocixyLnBhcmVudCgpLGZ1bmN0aW9uKCl7bi50cmlnZ2VyKHt0eXBlOlwiaGlkZGVuLmJzLnRhYlwiLHJlbGF0ZWRUYXJnZXQ6ZVswXX0pLGUudHJpZ2dlcih7dHlwZTpcInNob3duLmJzLnRhYlwiLHJlbGF0ZWRUYXJnZXQ6blswXX0pfSl9fX0saS5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oZSxvLG4pe2Z1bmN0aW9uIHMoKXthLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLmZpbmQoXCI+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5lbmQoKS5maW5kKCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSxlLmFkZENsYXNzKFwiYWN0aXZlXCIpLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHI/KGVbMF0ub2Zmc2V0V2lkdGgsZS5hZGRDbGFzcyhcImluXCIpKTplLnJlbW92ZUNsYXNzKFwiZmFkZVwiKSxlLnBhcmVudChcIi5kcm9wZG93bi1tZW51XCIpLmxlbmd0aCYmZS5jbG9zZXN0KFwibGkuZHJvcGRvd25cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIikuZW5kKCkuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJykuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCksbiYmbigpfXZhciBhPW8uZmluZChcIj4gLmFjdGl2ZVwiKSxyPW4mJnQuc3VwcG9ydC50cmFuc2l0aW9uJiYoYS5sZW5ndGgmJmEuaGFzQ2xhc3MoXCJmYWRlXCIpfHwhIW8uZmluZChcIj4gLmZhZGVcIikubGVuZ3RoKTthLmxlbmd0aCYmcj9hLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLHMpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGkuVFJBTlNJVElPTl9EVVJBVElPTik6cygpLGEucmVtb3ZlQ2xhc3MoXCJpblwiKX07dmFyIG89dC5mbi50YWI7dC5mbi50YWI9ZSx0LmZuLnRhYi5Db25zdHJ1Y3Rvcj1pLHQuZm4udGFiLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi50YWI9byx0aGlzfTt2YXIgbj1mdW5jdGlvbihpKXtpLnByZXZlbnREZWZhdWx0KCksZS5jYWxsKHQodGhpcyksXCJzaG93XCIpfTt0KGRvY3VtZW50KS5vbihcImNsaWNrLmJzLnRhYi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nLG4pLm9uKFwiY2xpY2suYnMudGFiLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cInBpbGxcIl0nLG4pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLG49by5kYXRhKFwiYnMuYWZmaXhcIikscz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZTtufHxvLmRhdGEoXCJicy5hZmZpeFwiLG49bmV3IGkodGhpcyxzKSksXCJzdHJpbmdcIj09dHlwZW9mIGUmJm5bZV0oKX0pfXZhciBpPWZ1bmN0aW9uKGUsbyl7dGhpcy5vcHRpb25zPXQuZXh0ZW5kKHt9LGkuREVGQVVMVFMsbyksdGhpcy4kdGFyZ2V0PXQodGhpcy5vcHRpb25zLnRhcmdldCkub24oXCJzY3JvbGwuYnMuYWZmaXguZGF0YS1hcGlcIix0LnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSkub24oXCJjbGljay5icy5hZmZpeC5kYXRhLWFwaVwiLHQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCx0aGlzKSksdGhpcy4kZWxlbWVudD10KGUpLHRoaXMuYWZmaXhlZD1udWxsLHRoaXMudW5waW49bnVsbCx0aGlzLnBpbm5lZE9mZnNldD1udWxsLHRoaXMuY2hlY2tQb3NpdGlvbigpfTtpLlZFUlNJT049XCIzLjMuNVwiLGkuUkVTRVQ9XCJhZmZpeCBhZmZpeC10b3AgYWZmaXgtYm90dG9tXCIsaS5ERUZBVUxUUz17b2Zmc2V0OjAsdGFyZ2V0OndpbmRvd30saS5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24odCxlLGksbyl7dmFyIG49dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLHM9dGhpcy4kZWxlbWVudC5vZmZzZXQoKSxhPXRoaXMuJHRhcmdldC5oZWlnaHQoKTtpZihudWxsIT1pJiZcInRvcFwiPT10aGlzLmFmZml4ZWQpcmV0dXJuIGk+bj9cInRvcFwiOiExO2lmKFwiYm90dG9tXCI9PXRoaXMuYWZmaXhlZClyZXR1cm4gbnVsbCE9aT9uK3RoaXMudW5waW48PXMudG9wPyExOlwiYm90dG9tXCI6dC1vPj1uK2E/ITE6XCJib3R0b21cIjt2YXIgcj1udWxsPT10aGlzLmFmZml4ZWQsbD1yP246cy50b3AsaD1yP2E6ZTtyZXR1cm4gbnVsbCE9aSYmaT49bj9cInRvcFwiOm51bGwhPW8mJmwraD49dC1vP1wiYm90dG9tXCI6ITF9LGkucHJvdG90eXBlLmdldFBpbm5lZE9mZnNldD1mdW5jdGlvbigpe2lmKHRoaXMucGlubmVkT2Zmc2V0KXJldHVybiB0aGlzLnBpbm5lZE9mZnNldDt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKGkuUkVTRVQpLmFkZENsYXNzKFwiYWZmaXhcIik7dmFyIHQ9dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLGU9dGhpcy4kZWxlbWVudC5vZmZzZXQoKTtyZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ9ZS50b3AtdH0saS5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3A9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLHRoaXMpLDEpfSxpLnByb3RvdHlwZS5jaGVja1Bvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy4kZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpKXt2YXIgZT10aGlzLiRlbGVtZW50LmhlaWdodCgpLG89dGhpcy5vcHRpb25zLm9mZnNldCxuPW8udG9wLHM9by5ib3R0b20sYT1NYXRoLm1heCh0KGRvY3VtZW50KS5oZWlnaHQoKSx0KGRvY3VtZW50LmJvZHkpLmhlaWdodCgpKTtcIm9iamVjdFwiIT10eXBlb2YgbyYmKHM9bj1vKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYobj1vLnRvcCh0aGlzLiRlbGVtZW50KSksXCJmdW5jdGlvblwiPT10eXBlb2YgcyYmKHM9by5ib3R0b20odGhpcy4kZWxlbWVudCkpO3ZhciByPXRoaXMuZ2V0U3RhdGUoYSxlLG4scyk7aWYodGhpcy5hZmZpeGVkIT1yKXtudWxsIT10aGlzLnVucGluJiZ0aGlzLiRlbGVtZW50LmNzcyhcInRvcFwiLFwiXCIpO3ZhciBsPVwiYWZmaXhcIisocj9cIi1cIityOlwiXCIpLGg9dC5FdmVudChsK1wiLmJzLmFmZml4XCIpO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihoKSxoLmlzRGVmYXVsdFByZXZlbnRlZCgpKXJldHVybjt0aGlzLmFmZml4ZWQ9cix0aGlzLnVucGluPVwiYm90dG9tXCI9PXI/dGhpcy5nZXRQaW5uZWRPZmZzZXQoKTpudWxsLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoaS5SRVNFVCkuYWRkQ2xhc3MobCkudHJpZ2dlcihsLnJlcGxhY2UoXCJhZmZpeFwiLFwiYWZmaXhlZFwiKStcIi5icy5hZmZpeFwiKX1cImJvdHRvbVwiPT1yJiZ0aGlzLiRlbGVtZW50Lm9mZnNldCh7dG9wOmEtZS1zfSl9fTt2YXIgbz10LmZuLmFmZml4O3QuZm4uYWZmaXg9ZSx0LmZuLmFmZml4LkNvbnN0cnVjdG9yPWksdC5mbi5hZmZpeC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm4uYWZmaXg9byx0aGlzfSx0KHdpbmRvdykub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt0KCdbZGF0YS1zcHk9XCJhZmZpeFwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLG89aS5kYXRhKCk7by5vZmZzZXQ9by5vZmZzZXR8fHt9LG51bGwhPW8ub2Zmc2V0Qm90dG9tJiYoby5vZmZzZXQuYm90dG9tPW8ub2Zmc2V0Qm90dG9tKSxudWxsIT1vLm9mZnNldFRvcCYmKG8ub2Zmc2V0LnRvcD1vLm9mZnNldFRvcCksZS5jYWxsKGksbyl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3ZhciBpLG89ZS5hdHRyKFwiZGF0YS10YXJnZXRcIil8fChpPWUuYXR0cihcImhyZWZcIikpJiZpLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sXCJcIik7cmV0dXJuIHQobyl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9dCh0aGlzKSxuPWkuZGF0YShcImJzLmNvbGxhcHNlXCIpLHM9dC5leHRlbmQoe30sby5ERUZBVUxUUyxpLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgZSYmZSk7IW4mJnMudG9nZ2xlJiYvc2hvd3xoaWRlLy50ZXN0KGUpJiYocy50b2dnbGU9ITEpLG58fGkuZGF0YShcImJzLmNvbGxhcHNlXCIsbj1uZXcgbyh0aGlzLHMpKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmbltlXSgpfSl9dmFyIG89ZnVuY3Rpb24oZSxpKXt0aGlzLiRlbGVtZW50PXQoZSksdGhpcy5vcHRpb25zPXQuZXh0ZW5kKHt9LG8uREVGQVVMVFMsaSksdGhpcy4kdHJpZ2dlcj10KCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtocmVmPVwiIycrZS5pZCsnXCJdLFtkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtdGFyZ2V0PVwiIycrZS5pZCsnXCJdJyksdGhpcy50cmFuc2l0aW9uaW5nPW51bGwsdGhpcy5vcHRpb25zLnBhcmVudD90aGlzLiRwYXJlbnQ9dGhpcy5nZXRQYXJlbnQoKTp0aGlzLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyh0aGlzLiRlbGVtZW50LHRoaXMuJHRyaWdnZXIpLHRoaXMub3B0aW9ucy50b2dnbGUmJnRoaXMudG9nZ2xlKCl9O28uVkVSU0lPTj1cIjMuMy41XCIsby5UUkFOU0lUSU9OX0RVUkFUSU9OPTM1MCxvLkRFRkFVTFRTPXt0b2dnbGU6ITB9LG8ucHJvdG90eXBlLmRpbWVuc2lvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJ3aWR0aFwiKTtyZXR1cm4gdD9cIndpZHRoXCI6XCJoZWlnaHRcIn0sby5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe2lmKCF0aGlzLnRyYW5zaXRpb25pbmcmJiF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiaW5cIikpe3ZhciBlLG49dGhpcy4kcGFyZW50JiZ0aGlzLiRwYXJlbnQuY2hpbGRyZW4oXCIucGFuZWxcIikuY2hpbGRyZW4oXCIuaW4sIC5jb2xsYXBzaW5nXCIpO2lmKCEobiYmbi5sZW5ndGgmJihlPW4uZGF0YShcImJzLmNvbGxhcHNlXCIpLGUmJmUudHJhbnNpdGlvbmluZykpKXt2YXIgcz10LkV2ZW50KFwic2hvdy5icy5jb2xsYXBzZVwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIocyksIXMuaXNEZWZhdWx0UHJldmVudGVkKCkpe24mJm4ubGVuZ3RoJiYoaS5jYWxsKG4sXCJoaWRlXCIpLGV8fG4uZGF0YShcImJzLmNvbGxhcHNlXCIsbnVsbCkpO3ZhciBhPXRoaXMuZGltZW5zaW9uKCk7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbGxhcHNlXCIpLmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKVthXSgwKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0aGlzLiR0cmlnZ2VyLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VkXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHRoaXMudHJhbnNpdGlvbmluZz0xO3ZhciByPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZSBpblwiKVthXShcIlwiKSx0aGlzLnRyYW5zaXRpb25pbmc9MCx0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5jb2xsYXBzZVwiKX07aWYoIXQuc3VwcG9ydC50cmFuc2l0aW9uKXJldHVybiByLmNhbGwodGhpcyk7dmFyIGw9dC5jYW1lbENhc2UoW1wic2Nyb2xsXCIsYV0uam9pbihcIi1cIikpO3RoaXMuJGVsZW1lbnQub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsdC5wcm94eShyLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChvLlRSQU5TSVRJT05fRFVSQVRJT04pW2FdKHRoaXMuJGVsZW1lbnRbMF1bbF0pO1xufX19fSxvLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNpdGlvbmluZyYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImluXCIpKXt2YXIgZT10LkV2ZW50KFwiaGlkZS5icy5jb2xsYXBzZVwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSksIWUuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBpPXRoaXMuZGltZW5zaW9uKCk7dGhpcy4kZWxlbWVudFtpXSh0aGlzLiRlbGVtZW50W2ldKCkpWzBdLm9mZnNldEhlaWdodCx0aGlzLiRlbGVtZW50LmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKS5yZW1vdmVDbGFzcyhcImNvbGxhcHNlIGluXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHRoaXMuJHRyaWdnZXIuYWRkQ2xhc3MoXCJjb2xsYXBzZWRcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksdGhpcy50cmFuc2l0aW9uaW5nPTE7dmFyIG49ZnVuY3Rpb24oKXt0aGlzLnRyYW5zaXRpb25pbmc9MCx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpLnRyaWdnZXIoXCJoaWRkZW4uYnMuY29sbGFwc2VcIil9O3JldHVybiB0LnN1cHBvcnQudHJhbnNpdGlvbj92b2lkIHRoaXMuJGVsZW1lbnRbaV0oMCkub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsdC5wcm94eShuLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChvLlRSQU5TSVRJT05fRFVSQVRJT04pOm4uY2FsbCh0aGlzKX19fSxvLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXt0aGlzW3RoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJpblwiKT9cImhpZGVcIjpcInNob3dcIl0oKX0sby5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcy5vcHRpb25zLnBhcmVudCkuZmluZCgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1bZGF0YS1wYXJlbnQ9XCInK3RoaXMub3B0aW9ucy5wYXJlbnQrJ1wiXScpLmVhY2godC5wcm94eShmdW5jdGlvbihpLG8pe3ZhciBuPXQobyk7dGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoZShuKSxuKX0sdGhpcykpLmVuZCgpfSxvLnByb3RvdHlwZS5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3M9ZnVuY3Rpb24odCxlKXt2YXIgaT10Lmhhc0NsYXNzKFwiaW5cIik7dC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLGkpLGUudG9nZ2xlQ2xhc3MoXCJjb2xsYXBzZWRcIiwhaSkuYXR0cihcImFyaWEtZXhwYW5kZWRcIixpKX07dmFyIG49dC5mbi5jb2xsYXBzZTt0LmZuLmNvbGxhcHNlPWksdC5mbi5jb2xsYXBzZS5Db25zdHJ1Y3Rvcj1vLHQuZm4uY29sbGFwc2Uubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuLmNvbGxhcHNlPW4sdGhpc30sdChkb2N1bWVudCkub24oXCJjbGljay5icy5jb2xsYXBzZS5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXScsZnVuY3Rpb24obyl7dmFyIG49dCh0aGlzKTtuLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8by5wcmV2ZW50RGVmYXVsdCgpO3ZhciBzPWUobiksYT1zLmRhdGEoXCJicy5jb2xsYXBzZVwiKSxyPWE/XCJ0b2dnbGVcIjpuLmRhdGEoKTtpLmNhbGwocyxyKX0pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGksbyl7dGhpcy4kYm9keT10KGRvY3VtZW50LmJvZHkpLHRoaXMuJHNjcm9sbEVsZW1lbnQ9dCh0KGkpLmlzKGRvY3VtZW50LmJvZHkpP3dpbmRvdzppKSx0aGlzLm9wdGlvbnM9dC5leHRlbmQoe30sZS5ERUZBVUxUUyxvKSx0aGlzLnNlbGVjdG9yPSh0aGlzLm9wdGlvbnMudGFyZ2V0fHxcIlwiKStcIiAubmF2IGxpID4gYVwiLHRoaXMub2Zmc2V0cz1bXSx0aGlzLnRhcmdldHM9W10sdGhpcy5hY3RpdmVUYXJnZXQ9bnVsbCx0aGlzLnNjcm9sbEhlaWdodD0wLHRoaXMuJHNjcm9sbEVsZW1lbnQub24oXCJzY3JvbGwuYnMuc2Nyb2xsc3B5XCIsdC5wcm94eSh0aGlzLnByb2Nlc3MsdGhpcykpLHRoaXMucmVmcmVzaCgpLHRoaXMucHJvY2VzcygpfWZ1bmN0aW9uIGkoaSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBvPXQodGhpcyksbj1vLmRhdGEoXCJicy5zY3JvbGxzcHlcIikscz1cIm9iamVjdFwiPT10eXBlb2YgaSYmaTtufHxvLmRhdGEoXCJicy5zY3JvbGxzcHlcIixuPW5ldyBlKHRoaXMscykpLFwic3RyaW5nXCI9PXR5cGVvZiBpJiZuW2ldKCl9KX1lLlZFUlNJT049XCIzLjMuNVwiLGUuREVGQVVMVFM9e29mZnNldDoxMH0sZS5wcm90b3R5cGUuZ2V0U2Nyb2xsSGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0fHxNYXRoLm1heCh0aGlzLiRib2R5WzBdLnNjcm9sbEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KX0sZS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsaT1cIm9mZnNldFwiLG89MDt0aGlzLm9mZnNldHM9W10sdGhpcy50YXJnZXRzPVtdLHRoaXMuc2Nyb2xsSGVpZ2h0PXRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCksdC5pc1dpbmRvdyh0aGlzLiRzY3JvbGxFbGVtZW50WzBdKXx8KGk9XCJwb3NpdGlvblwiLG89dGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSksdGhpcy4kYm9keS5maW5kKHRoaXMuc2VsZWN0b3IpLm1hcChmdW5jdGlvbigpe3ZhciBlPXQodGhpcyksbj1lLmRhdGEoXCJ0YXJnZXRcIil8fGUuYXR0cihcImhyZWZcIikscz0vXiMuLy50ZXN0KG4pJiZ0KG4pO3JldHVybiBzJiZzLmxlbmd0aCYmcy5pcyhcIjp2aXNpYmxlXCIpJiZbW3NbaV0oKS50b3ArbyxuXV18fG51bGx9KS5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbMF0tZVswXX0pLmVhY2goZnVuY3Rpb24oKXtlLm9mZnNldHMucHVzaCh0aGlzWzBdKSxlLnRhcmdldHMucHVzaCh0aGlzWzFdKX0pfSxlLnByb3RvdHlwZS5wcm9jZXNzPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpK3RoaXMub3B0aW9ucy5vZmZzZXQsaT10aGlzLmdldFNjcm9sbEhlaWdodCgpLG89dGhpcy5vcHRpb25zLm9mZnNldCtpLXRoaXMuJHNjcm9sbEVsZW1lbnQuaGVpZ2h0KCksbj10aGlzLm9mZnNldHMscz10aGlzLnRhcmdldHMsYT10aGlzLmFjdGl2ZVRhcmdldDtpZih0aGlzLnNjcm9sbEhlaWdodCE9aSYmdGhpcy5yZWZyZXNoKCksZT49bylyZXR1cm4gYSE9KHQ9c1tzLmxlbmd0aC0xXSkmJnRoaXMuYWN0aXZhdGUodCk7aWYoYSYmZTxuWzBdKXJldHVybiB0aGlzLmFjdGl2ZVRhcmdldD1udWxsLHRoaXMuY2xlYXIoKTtmb3IodD1uLmxlbmd0aDt0LS07KWEhPXNbdF0mJmU+PW5bdF0mJih2b2lkIDA9PT1uW3QrMV18fGU8blt0KzFdKSYmdGhpcy5hY3RpdmF0ZShzW3RdKX0sZS5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oZSl7dGhpcy5hY3RpdmVUYXJnZXQ9ZSx0aGlzLmNsZWFyKCk7dmFyIGk9dGhpcy5zZWxlY3RvcisnW2RhdGEtdGFyZ2V0PVwiJytlKydcIl0sJyt0aGlzLnNlbGVjdG9yKydbaHJlZj1cIicrZSsnXCJdJyxvPXQoaSkucGFyZW50cyhcImxpXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO28ucGFyZW50KFwiLmRyb3Bkb3duLW1lbnVcIikubGVuZ3RoJiYobz1vLmNsb3Nlc3QoXCJsaS5kcm9wZG93blwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSksby50cmlnZ2VyKFwiYWN0aXZhdGUuYnMuc2Nyb2xsc3B5XCIpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3QodGhpcy5zZWxlY3RvcikucGFyZW50c1VudGlsKHRoaXMub3B0aW9ucy50YXJnZXQsXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfTt2YXIgbz10LmZuLnNjcm9sbHNweTt0LmZuLnNjcm9sbHNweT1pLHQuZm4uc2Nyb2xsc3B5LkNvbnN0cnVjdG9yPWUsdC5mbi5zY3JvbGxzcHkubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuLnNjcm9sbHNweT1vLHRoaXN9LHQod2luZG93KS5vbihcImxvYWQuYnMuc2Nyb2xsc3B5LmRhdGEtYXBpXCIsZnVuY3Rpb24oKXt0KCdbZGF0YS1zcHk9XCJzY3JvbGxcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKTtpLmNhbGwoZSxlLmRhdGEoKSl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJvb3RzdHJhcFwiKSxlPXtXZWJraXRUcmFuc2l0aW9uOlwid2Via2l0VHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZFwiLHRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCJ9O2Zvcih2YXIgaSBpbiBlKWlmKHZvaWQgMCE9PXQuc3R5bGVbaV0pcmV0dXJue2VuZDplW2ldfTtyZXR1cm4hMX10LmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKGUpe3ZhciBpPSExLG89dGhpczt0KHRoaXMpLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7aT0hMH0pO3ZhciBuPWZ1bmN0aW9uKCl7aXx8dChvKS50cmlnZ2VyKHQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCl9O3JldHVybiBzZXRUaW1lb3V0KG4sZSksdGhpc30sdChmdW5jdGlvbigpe3Quc3VwcG9ydC50cmFuc2l0aW9uPWUoKSx0LnN1cHBvcnQudHJhbnNpdGlvbiYmKHQuZXZlbnQuc3BlY2lhbC5ic1RyYW5zaXRpb25FbmQ9e2JpbmRUeXBlOnQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxkZWxlZ2F0ZVR5cGU6dC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLGhhbmRsZTpmdW5jdGlvbihlKXtyZXR1cm4gdChlLnRhcmdldCkuaXModGhpcyk/ZS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0pfSl9KGpRdWVyeSk7IiwiLyohIGpRdWVyeSB2MS4xMS4xIHwgKGMpIDIwMDUsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9XCIxLjExLjFcIixtPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBtLmZuLmluaXQoYSxiKX0sbj0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csbz0vXi1tcy0vLHA9Ly0oW1xcZGEtel0pL2dpLHE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTttLmZuPW0ucHJvdG90eXBlPXtqcXVlcnk6bCxjb25zdHJ1Y3RvcjptLHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmQuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW0ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbS5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhtLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmYsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxtLmV4dGVuZD1tLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksXCJvYmplY3RcIj09dHlwZW9mIGd8fG0uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihtLmlzUGxhaW5PYmplY3QoYyl8fChiPW0uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbS5pc0FycmF5KGEpP2E6W10pOmY9YSYmbS5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1tLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbS5leHRlbmQoe2V4cGFuZG86XCJqUXVlcnlcIisobCtNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1tLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuXCJhcnJheVwiPT09bS50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hbS5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSk+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8XCJvYmplY3RcIiE9PW0udHlwZShhKXx8YS5ub2RlVHlwZXx8bS5pc1dpbmRvdyhhKSlyZXR1cm4hMTt0cnl7aWYoYS5jb25zdHJ1Y3RvciYmIWouY2FsbChhLFwiY29uc3RydWN0b3JcIikmJiFqLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKGsub3duTGFzdClmb3IoYiBpbiBhKXJldHVybiBqLmNhbGwoYSxiKTtmb3IoYiBpbiBhKTtyZXR1cm4gdm9pZCAwPT09Ynx8ai5jYWxsKGEsYil9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2hbaS5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZtLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UobyxcIm1zLVwiKS5yZXBsYWNlKHAscSl9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT0wLGY9YS5sZW5ndGgsZz1yKGEpO2lmKGMpe2lmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGlmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6KGErXCJcIikucmVwbGFjZShuLFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHIoT2JqZWN0KGEpKT9tLm1lcmdlKGMsXCJzdHJpbmdcIj09dHlwZW9mIGE/W2FdOmEpOmYuY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihiKXtpZihnKXJldHVybiBnLmNhbGwoYixhLGMpO2ZvcihkPWIubGVuZ3RoLGM9Yz8wPmM/TWF0aC5tYXgoMCxkK2MpOmM6MDtkPmM7YysrKWlmKGMgaW4gYiYmYltjXT09PWEpcmV0dXJuIGN9cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGEsYil7dmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO3doaWxlKGM+ZClhW2UrK109YltkKytdO2lmKGMhPT1jKXdoaWxlKHZvaWQgMCE9PWJbZF0pYVtlKytdPWJbZCsrXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2c+ZjtmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZj0wLGc9YS5sZW5ndGgsaD1yKGEpLGk9W107aWYoaClmb3IoO2c+ZjtmKyspZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7ZWxzZSBmb3IoZiBpbiBhKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO3JldHVybiBlLmFwcGx5KFtdLGkpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGY7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9ZiksbS5pc0Z1bmN0aW9uKGEpPyhjPWQuY2FsbChhcmd1bWVudHMsMiksZT1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZC5jYWxsKGFyZ3VtZW50cykpKX0sZS5ndWlkPWEuZ3VpZD1hLmd1aWR8fG0uZ3VpZCsrLGUpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omt9KSxtLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7aFtcIltvYmplY3QgXCIrYitcIl1cIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcihhKXt2YXIgYj1hLmxlbmd0aCxjPW0udHlwZShhKTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1jfHxtLmlzV2luZG93KGEpPyExOjE9PT1hLm5vZGVUeXBlJiZiPyEwOlwiYXJyYXlcIj09PWN8fDA9PT1ifHxcIm51bWJlclwiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgcz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PVwic2l6emxlXCIrLW5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2IoKSx6PWdiKCksQT1nYigpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPVwidW5kZWZpbmVkXCIsRD0xPDwzMSxFPXt9Lmhhc093blByb3BlcnR5LEY9W10sRz1GLnBvcCxIPUYucHVzaCxJPUYucHVzaCxKPUYuc2xpY2UsSz1GLmluZGV4T2Z8fGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sZW5ndGg7Yz5iO2IrKylpZih0aGlzW2JdPT09YSlyZXR1cm4gYjtyZXR1cm4tMX0sTD1cImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsTT1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsTj1cIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLE89Ti5yZXBsYWNlKFwid1wiLFwidyNcIiksUD1cIlxcXFxbXCIrTStcIiooXCIrTitcIikoPzpcIitNK1wiKihbKl4kfCF+XT89KVwiK00rXCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIitPK1wiKSl8KVwiK00rXCIqXFxcXF1cIixRPVwiOihcIitOK1wiKSg/OlxcXFwoKCgnKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIitQK1wiKSopfC4qKVxcXFwpfClcIixSPW5ldyBSZWdFeHAoXCJeXCIrTStcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTStcIiskXCIsXCJnXCIpLFM9bmV3IFJlZ0V4cChcIl5cIitNK1wiKixcIitNK1wiKlwiKSxUPW5ldyBSZWdFeHAoXCJeXCIrTStcIiooWz4rfl18XCIrTStcIilcIitNK1wiKlwiKSxVPW5ldyBSZWdFeHAoXCI9XCIrTStcIiooW15cXFxcXSdcXFwiXSo/KVwiK00rXCIqXFxcXF1cIixcImdcIiksVj1uZXcgUmVnRXhwKFEpLFc9bmV3IFJlZ0V4cChcIl5cIitPK1wiJFwiKSxYPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTitcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitOK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTi5yZXBsYWNlKFwid1wiLFwidypcIikrXCIpXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitQKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitRKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitNK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTStcIiooPzooWystXXwpXCIrTStcIiooXFxcXGQrKXwpKVwiK00rXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrTCtcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK00rXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK00rXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK00rXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFk9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxcZCQvaSwkPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXz0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxhYj0vWyt+XS8sYmI9Lyd8XFxcXC9nLGNiPW5ldyBSZWdFeHAoXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIitNK1wiP3woXCIrTStcIil8LilcIixcImlnXCIpLGRiPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cIjB4XCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9O3RyeXtJLmFwcGx5KEY9Si5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxGW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGViKXtJPXthcHBseTpGLmxlbmd0aD9mdW5jdGlvbihhLGIpe0guYXBwbHkoYSxKLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBmYihhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHcseDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixkPWR8fFtdLCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gZDtpZigxIT09KGs9Yi5ub2RlVHlwZSkmJjkhPT1rKXJldHVybltdO2lmKHAmJiFlKXtpZihmPV8uZXhlYyhhKSlpZihqPWZbMV0pe2lmKDk9PT1rKXtpZihoPWIuZ2V0RWxlbWVudEJ5SWQoaiksIWh8fCFoLnBhcmVudE5vZGUpcmV0dXJuIGQ7aWYoaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2UgaWYoYi5vd25lckRvY3VtZW50JiYoaD1iLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaikpJiZ0KGIsaCkmJmguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNle2lmKGZbMl0pcmV0dXJuIEkuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChqPWZbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSS5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9OT09PWsmJmEsMT09PWsmJlwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe289ZyhhKSwocj1iLmdldEF0dHJpYnV0ZShcImlkXCIpKT9zPXIucmVwbGFjZShiYixcIlxcXFwkJlwiKTpiLnNldEF0dHJpYnV0ZShcImlkXCIscykscz1cIltpZD0nXCIrcytcIiddIFwiLGw9by5sZW5ndGg7d2hpbGUobC0tKW9bbF09cytxYihvW2xdKTt3PWFiLnRlc3QoYSkmJm9iKGIucGFyZW50Tm9kZSl8fGIseD1vLmpvaW4oXCIsXCIpfWlmKHgpdHJ5e3JldHVybiBJLmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHgpKSxkfWNhdGNoKHkpe31maW5hbGx5e3J8fGIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUixcIiQxXCIpLGIsZCxlKX1mdW5jdGlvbiBnYigpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrXCIgXCIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjK1wiIFwiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhiKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWIoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGpiKGEsYil7dmFyIGM9YS5zcGxpdChcInxcIiksZT1hLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24ga2IoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEQpLSh+YS5zb3VyY2VJbmRleHx8RCk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIGxiKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oXCJpbnB1dFwiPT09Y3x8XCJidXR0b25cIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBuYihhKXtyZXR1cm4gaGIoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaGIoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBvYihhKXtyZXR1cm4gYSYmdHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1DJiZhfWM9ZmIuc3VwcG9ydD17fSxmPWZiLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj9cIkhUTUxcIiE9PWIubm9kZU5hbWU6ITF9LG09ZmIuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZT1hP2Eub3duZXJEb2N1bWVudHx8YTp2LGc9ZS5kZWZhdWx0VmlldztyZXR1cm4gZSE9PW4mJjk9PT1lLm5vZGVUeXBlJiZlLmRvY3VtZW50RWxlbWVudD8obj1lLG89ZS5kb2N1bWVudEVsZW1lbnQscD0hZihlKSxnJiZnIT09Zy50b3AmJihnLmFkZEV2ZW50TGlzdGVuZXI/Zy5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsZnVuY3Rpb24oKXttKCl9LCExKTpnLmF0dGFjaEV2ZW50JiZnLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe20oKX0pKSxjLmF0dHJpYnV0ZXM9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPVwiaVwiLCFhLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoZS5jcmVhdGVDb21tZW50KFwiXCIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPSQudGVzdChlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpJiZpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8ZGl2IGNsYXNzPSdhJz48L2Rpdj48ZGl2IGNsYXNzPSdhIGknPjwvZGl2PlwiLGEuZmlyc3RDaGlsZC5jbGFzc05hbWU9XCJpXCIsMj09PWEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImlcIikubGVuZ3RofSksYy5nZXRCeUlkPWliKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIWUuZ2V0RWxlbWVudHNCeU5hbWV8fCFlLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQhPT1DJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjJiZjLnBhcmVudE5vZGU/W2NdOltdfX0sZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYik7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUhPT1DJiZhLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuIHR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09Qz9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoXCIqXCI9PT1hKXt3aGlsZShjPWZbZSsrXSkxPT09Yy5ub2RlVHlwZSYmZC5wdXNoKGMpO3JldHVybiBkfXJldHVybiBmfSxkLmZpbmQuQ0xBU1M9Yy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe3JldHVybiB0eXBlb2YgYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09QyYmcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPSQudGVzdChlLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGliKGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPVwiPHNlbGVjdCBtc2FsbG93Y2xpcD0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiLGEucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2xpcF49JyddXCIpLmxlbmd0aCYmcS5wdXNoKFwiWypeJF09XCIrTStcIiooPzonJ3xcXFwiXFxcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGh8fHEucHVzaChcIlxcXFxbXCIrTStcIiooPzp2YWx1ZXxcIitMK1wiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fHEucHVzaChcIjpjaGVja2VkXCIpfSksaWIoZnVuY3Rpb24oYSl7dmFyIGI9ZS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmcS5wdXNoKFwibmFtZVwiK00rXCIqWypeJHwhfl0/PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGh8fHEucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxxLnB1c2goXCIsLio6XCIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj0kLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmliKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsXCJkaXZcIikscy5jYWxsKGEsXCJbcyE9JyddOnhcIiksci5wdXNoKFwiIT1cIixRKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKFwifFwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oXCJ8XCIpKSxiPSQudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fCQudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PWV8fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09ZXx8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9LLmNhbGwoayxhKS1LLmNhbGwoayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxmPWEucGFyZW50Tm9kZSxnPWIucGFyZW50Tm9kZSxoPVthXSxpPVtiXTtpZighZnx8IWcpcmV0dXJuIGE9PT1lPy0xOmI9PT1lPzE6Zj8tMTpnPzE6az9LLmNhbGwoayxhKS1LLmNhbGwoayxiKTowO2lmKGY9PT1nKXJldHVybiBrYihhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/a2IoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGUpOm59LGZiLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZmIoYSxudWxsLG51bGwsYil9LGZiLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLFwiPSckMSddXCIpLCEoIWMubWF0Y2hlc1NlbGVjdG9yfHwhcHx8ciYmci50ZXN0KGIpfHxxJiZxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBmYihiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxmYi5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGZiLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZFLmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxmYi5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIithKX0sZmIudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZiLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1cIlwiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9ZmIuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aGIsbWF0Y2g6WCxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYixkYiksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8XCJcIikucmVwbGFjZShjYixkYiksXCJ+PVwiPT09YVsyXSYmKGFbM109XCIgXCIrYVszXStcIiBcIiksYS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmIuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooXCJldmVuXCI9PT1hWzNdfHxcIm9kZFwiPT09YVszXSkpLGFbNV09KyhhWzddK2FbOF18fFwib2RkXCI9PT1hWzNdKSk6YVszXSYmZmIuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFguQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8XCJcIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoXCIpXCIsYy5sZW5ndGgtYiktYy5sZW5ndGgpJiYoYVswXT1hWzBdLnNsaWNlKDAsYiksYVsyXT1jLnNsaWNlKDAsYikpLGEuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2IsZGIpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCIqXCI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthK1wiIFwiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cChcIihefFwiK00rXCIpXCIrYStcIihcIitNK1wifCQpXCIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoXCJzdHJpbmdcIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8dHlwZW9mIGEuZ2V0QXR0cmlidXRlIT09QyYmYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWZiLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT9cIiE9XCI9PT1iOmI/KGUrPVwiXCIsXCI9XCI9PT1iP2U9PT1jOlwiIT1cIj09PWI/ZSE9PWM6XCJePVwiPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOlwiKj1cIj09PWI/YyYmZS5pbmRleE9mKGMpPi0xOlwiJD1cIj09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09YzpcIn49XCI9PT1iPyhcIiBcIitlK1wiIFwiKS5pbmRleE9mKGMpPi0xOlwifD1cIj09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrXCItXCI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1cIm50aFwiIT09YS5zbGljZSgwLDMpLGc9XCJsYXN0XCIhPT1hLnNsaWNlKC00KSxoPVwib2YtdHlwZVwiPT09YjtyZXR1cm4gMT09PWQmJjA9PT1lP2Z1bmN0aW9uKGEpe3JldHVybiEhYS5wYXJlbnROb2RlfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG0sbixvLHA9ZiE9PWc/XCJuZXh0U2libGluZ1wiOlwicHJldmlvdXNTaWJsaW5nXCIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWg7aWYocSl7aWYoZil7d2hpbGUocCl7bD1iO3doaWxlKGw9bFtwXSlpZihoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpcmV0dXJuITE7bz1wPVwib25seVwiPT09YSYmIW8mJlwibmV4dFNpYmxpbmdcIn1yZXR1cm4hMH1pZihvPVtnP3EuZmlyc3RDaGlsZDpxLmxhc3RDaGlsZF0sZyYmcyl7az1xW3VdfHwocVt1XT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLG09alswXT09PXcmJmpbMl0sbD1uJiZxLmNoaWxkTm9kZXNbbl07d2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoMT09PWwubm9kZVR5cGUmJisrbSYmbD09PWIpe2tbYV09W3csbixtXTticmVha319ZWxzZSBpZihzJiYoaj0oYlt1XXx8KGJbdV09e30pKVthXSkmJmpbMF09PT13KW09alsxXTtlbHNlIHdoaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKChoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpJiYrK20mJihzJiYoKGxbdV18fChsW3VdPXt9KSlbYV09W3csbV0pLGw9PT1iKSlicmVhaztyZXR1cm4gbS09ZSxtPT09ZHx8bSVkPT09MCYmbS9kPj0wfX19LFBTRVVETzpmdW5jdGlvbihhLGIpe3ZhciBjLGU9ZC5wc2V1ZG9zW2FdfHxkLnNldEZpbHRlcnNbYS50b0xvd2VyQ2FzZSgpXXx8ZmIuZXJyb3IoXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLFwiXCIsYl0sZC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/aGIoZnVuY3Rpb24oYSxjKXt2YXIgZCxmPWUoYSxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSlkPUsuY2FsbChhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDpoYihmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUixcIiQxXCIpKTtyZXR1cm4gZFt1XT9oYihmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSwhYy5wb3AoKX19KSxoYXM6aGIoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmYihhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmhiKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4oYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHR8fGUoYikpLmluZGV4T2YoYSk+LTF9fSksbGFuZzpoYihmdW5jdGlvbihhKXtyZXR1cm4gVy50ZXN0KGF8fFwiXCIpfHxmYi5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiK2EpLGE9YS5yZXBsYWNlKGNiLGRiKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3ZhciBjO2RvIGlmKGM9cD9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhK1wiLVwiKTt3aGlsZSgoYj1iLnBhcmVudE5vZGUpJiYxPT09Yi5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWEubG9jYXRpb24mJmEubG9jYXRpb24uaGFzaDtyZXR1cm4gYyYmYy5zbGljZSgxKT09PWIuaWR9LHJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vfSxmb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW4uYWN0aXZlRWxlbWVudCYmKCFuLmhhc0ZvY3VzfHxuLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJiEhYS5jaGVja2VkfHxcIm9wdGlvblwiPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFoudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiZcImJ1dHRvblwiPT09YS50eXBlfHxcImJ1dHRvblwiPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm5cImlucHV0XCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dFwiPT09YS50eXBlJiYobnVsbD09KGI9YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKXx8XCJ0ZXh0XCI9PT1iLnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpuYihmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6bmIoZnVuY3Rpb24oYSxiKXtyZXR1cm5bYi0xXX0pLGVxOm5iKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5bMD5jP2MrYjpjXX0pLGV2ZW46bmIoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxvZGQ6bmIoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxsdDpuYihmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzstLWQ+PTA7KWEucHVzaChkKTtyZXR1cm4gYX0pLGd0Om5iKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOysrZDxiOylhLnB1c2goZCk7cmV0dXJuIGF9KX19LGQucHNldWRvcy5udGg9ZC5wc2V1ZG9zLmVxO2ZvcihiIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWQucHNldWRvc1tiXT1sYihiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWQucHNldWRvc1tiXT1tYihiKTtmdW5jdGlvbiBwYigpe31wYi5wcm90b3R5cGU9ZC5maWx0ZXJzPWQucHNldWRvcyxkLnNldEZpbHRlcnM9bmV3IHBiLGc9ZmIudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXpbYStcIiBcIl07aWYoaylyZXR1cm4gYj8wOmsuc2xpY2UoMCk7aD1hLGk9W10saj1kLnByZUZpbHRlcjt3aGlsZShoKXsoIWN8fChlPVMuZXhlYyhoKSkpJiYoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1ULmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFIsXCIgXCIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVhbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9mYi5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHFiKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD1cIlwiO2M+YjtiKyspZCs9YVtiXS52YWx1ZTtyZXR1cm4gZH1mdW5jdGlvbiByYihhLGIsYyl7dmFyIGQ9Yi5kaXIsZT1jJiZcInBhcmVudE5vZGVcIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGo9W3csZl07aWYoZyl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZSkmJmEoYixjLGcpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXtpZihpPWJbdV18fChiW3VdPXt9KSwoaD1pW2RdKSYmaFswXT09PXcmJmhbMV09PT1mKXJldHVybiBqWzJdPWhbMl07aWYoaVtkXT1qLGpbMl09YShiLGMsZykpcmV0dXJuITB9fX1mdW5jdGlvbiBzYihhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB0YihhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKWZiKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB1YihhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtpPmg7aCsrKShmPWFbaF0pJiYoIWN8fGMoZixkLGUpKSYmKGcucHVzaChmKSxqJiZiLnB1c2goaCkpO3JldHVybiBnfWZ1bmN0aW9uIHZiKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXZiKGQpKSxlJiYhZVt1XSYmKGU9dmIoZSxmKSksaGIoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dGIoYnx8XCIqXCIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YihwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWIocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0suY2FsbChmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dWIocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkkuYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHdiKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbXCIgXCJdLGk9Zz8xOjAsaz1yYihmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9cmIoZnVuY3Rpb24oYSl7cmV0dXJuIEsuY2FsbChiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7cmV0dXJuIWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSl9XTtmPmk7aSsrKWlmKGM9ZC5yZWxhdGl2ZVthW2ldLnR5cGVdKW09W3JiKHNiKG0pLGMpXTtlbHNle2lmKGM9ZC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyksY1t1XSl7Zm9yKGU9KytpO2Y+ZTtlKyspaWYoZC5yZWxhdGl2ZVthW2VdLnR5cGVdKWJyZWFrO3JldHVybiB2YihpPjEmJnNiKG0pLGk+MSYmcWIoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZTpcIiBcIj09PWFbaS0yXS50eXBlP1wiKlwiOlwiXCJ9KSkucmVwbGFjZShSLFwiJDFcIiksYyxlPmkmJndiKGEuc2xpY2UoaSxlKSksZj5lJiZ3YihhPWEuc2xpY2UoZSkpLGY+ZSYmcWIoYSkpfW0ucHVzaChjKX1yZXR1cm4gc2IobSl9ZnVuY3Rpb24geGIoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbSxvLHA9MCxxPVwiMFwiLHI9ZiYmW10scz1bXSx0PWosdT1mfHxlJiZkLmZpbmQuVEFHKFwiKlwiLGspLHY9dys9bnVsbD09dD8xOk1hdGgucmFuZG9tKCl8fC4xLHg9dS5sZW5ndGg7Zm9yKGsmJihqPWchPT1uJiZnKTtxIT09eCYmbnVsbCE9KGw9dVtxXSk7cSsrKXtpZihlJiZsKXttPTA7d2hpbGUobz1hW20rK10paWYobyhsLGcsaCkpe2kucHVzaChsKTticmVha31rJiYodz12KX1jJiYoKGw9IW8mJmwpJiZwLS0sZiYmci5wdXNoKGwpKX1pZihwKz1xLGMmJnEhPT1wKXttPTA7d2hpbGUobz1iW20rK10pbyhyLHMsZyxoKTtpZihmKXtpZihwPjApd2hpbGUocS0tKXJbcV18fHNbcV18fChzW3FdPUcuY2FsbChpKSk7cz11YihzKX1JLmFwcGx5KGkscyksayYmIWYmJnMubGVuZ3RoPjAmJnArYi5sZW5ndGg+MSYmZmIudW5pcXVlU29ydChpKX1yZXR1cm4gayYmKHc9dixqPXQpLHJ9O3JldHVybiBjP2hiKGYpOmZ9cmV0dXJuIGg9ZmIuY29tcGlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPUFbYStcIiBcIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9d2IoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHhiKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1mYi5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGUsZil7dmFyIGksaixrLGwsbSxuPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiZcIklEXCI9PT0oaz1qWzBdKS50eXBlJiZjLmdldEJ5SWQmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2pbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChrLm1hdGNoZXNbMF0ucmVwbGFjZShjYixkYiksYil8fFtdKVswXSwhYilyZXR1cm4gZTtuJiYoYj1iLnBhcmVudE5vZGUpLGE9YS5zbGljZShqLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPVgubmVlZHNDb250ZXh0LnRlc3QoYSk/MDpqLmxlbmd0aDt3aGlsZShpLS0pe2lmKGs9altpXSxkLnJlbGF0aXZlW2w9ay50eXBlXSlicmVhaztpZigobT1kLmZpbmRbbF0pJiYoZj1tKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNiLGRiKSxhYi50ZXN0KGpbMF0udHlwZSkmJm9iKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYihqKSwhYSlyZXR1cm4gSS5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSxhYi50ZXN0KGEpJiZvYihiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdChcIlwiKS5zb3J0KEIpLmpvaW4oXCJcIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWliKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKX0pLGliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIixcIiNcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSl8fGpiKFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYixcInR5cGVcIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8aW5wdXQvPlwiLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLFwiXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9KXx8amIoXCJ2YWx1ZVwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY3x8XCJpbnB1dFwiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGliKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpfSl8fGpiKEwsZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGZifShhKTttLmZpbmQ9cyxtLmV4cHI9cy5zZWxlY3RvcnMsbS5leHByW1wiOlwiXT1tLmV4cHIucHNldWRvcyxtLnVuaXF1ZT1zLnVuaXF1ZVNvcnQsbS50ZXh0PXMuZ2V0VGV4dCxtLmlzWE1MRG9jPXMuaXNYTUwsbS5jb250YWlucz1zLmNvbnRhaW5zO3ZhciB0PW0uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsdT0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sdj0vXi5bXjojXFxbXFwuLF0qJC87ZnVuY3Rpb24gdyhhLGIsYyl7aWYobS5pc0Z1bmN0aW9uKGIpKXJldHVybiBtLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBtLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpe2lmKHYudGVzdChiKSlyZXR1cm4gbS5maWx0ZXIoYixhLGMpO2I9bS5maWx0ZXIoYixhKX1yZXR1cm4gbS5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIG0uaW5BcnJheShhLGIpPj0wIT09Y30pfW0uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT1cIjpub3QoXCIrYStcIilcIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9tLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm0uZmluZC5tYXRjaGVzKGEsbS5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxtLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhtKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZT5iO2IrKylpZihtLmNvbnRhaW5zKGRbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtlPmI7YisrKW0uZmluZChhLGRbYl0sYyk7cmV0dXJuIGM9dGhpcy5wdXNoU3RhY2soZT4xP20udW5pcXVlKGMpOmMpLGMuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yK1wiIFwiK2E6YSxjfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHcodGhpcyxhfHxbXSwhMSkpfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHcodGhpcyxhfHxbXSwhMCkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIXcodGhpcyxcInN0cmluZ1wiPT10eXBlb2YgYSYmdC50ZXN0KGEpP20oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgeCx5PWEuZG9jdW1lbnQsej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW0uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hLmNoYXJBdCgwKSYmXCI+XCI9PT1hLmNoYXJBdChhLmxlbmd0aC0xKSYmYS5sZW5ndGg+PTM/W251bGwsYSxudWxsXTp6LmV4ZWMoYSksIWN8fCFjWzFdJiZiKXJldHVybiFifHxiLmpxdWVyeT8oYnx8eCkuZmluZChhKTp0aGlzLmNvbnN0cnVjdG9yKGIpLmZpbmQoYSk7aWYoY1sxXSl7aWYoYj1iIGluc3RhbmNlb2YgbT9iWzBdOmIsbS5tZXJnZSh0aGlzLG0ucGFyc2VIVE1MKGNbMV0sYiYmYi5ub2RlVHlwZT9iLm93bmVyRG9jdW1lbnR8fGI6eSwhMCkpLHUudGVzdChjWzFdKSYmbS5pc1BsYWluT2JqZWN0KGIpKWZvcihjIGluIGIpbS5pc0Z1bmN0aW9uKHRoaXNbY10pP3RoaXNbY10oYltjXSk6dGhpcy5hdHRyKGMsYltjXSk7cmV0dXJuIHRoaXN9aWYoZD15LmdldEVsZW1lbnRCeUlkKGNbMl0pLGQmJmQucGFyZW50Tm9kZSl7aWYoZC5pZCE9PWNbMl0pcmV0dXJuIHguZmluZChhKTt0aGlzLmxlbmd0aD0xLHRoaXNbMF09ZH1yZXR1cm4gdGhpcy5jb250ZXh0PXksdGhpcy5zZWxlY3Rvcj1hLHRoaXN9cmV0dXJuIGEubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWEsdGhpcy5sZW5ndGg9MSx0aGlzKTptLmlzRnVuY3Rpb24oYSk/XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHgucmVhZHk/eC5yZWFkeShhKTphKG0pOih2b2lkIDAhPT1hLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yLHRoaXMuY29udGV4dD1hLmNvbnRleHQpLG0ubWFrZUFycmF5KGEsdGhpcykpfTtBLnByb3RvdHlwZT1tLmZuLHg9bSh5KTt2YXIgQj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxDPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O20uZXh0ZW5kKHtkaXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YVtiXTt3aGlsZShlJiY5IT09ZS5ub2RlVHlwZSYmKHZvaWQgMD09PWN8fDEhPT1lLm5vZGVUeXBlfHwhbShlKS5pcyhjKSkpMT09PWUubm9kZVR5cGUmJmQucHVzaChlKSxlPWVbYl07cmV0dXJuIGR9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9fSksbS5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW0oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihtLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dC50ZXN0KGEpfHxcInN0cmluZ1wiIT10eXBlb2YgYT9tKGEsYnx8dGhpcy5jb250ZXh0KTowO2U+ZDtkKyspZm9yKGM9dGhpc1tkXTtjJiZjIT09YjtjPWMucGFyZW50Tm9kZSlpZihjLm5vZGVUeXBlPDExJiYoZz9nLmluZGV4KGMpPi0xOjE9PT1jLm5vZGVUeXBlJiZtLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGMsYSkpKXtmLnB1c2goYyk7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYubGVuZ3RoPjE/bS51bmlxdWUoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhP1wic3RyaW5nXCI9PXR5cGVvZiBhP20uaW5BcnJheSh0aGlzWzBdLG0oYSkpOm0uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobS51bmlxdWUobS5tZXJnZSh0aGlzLmdldCgpLG0oYSxiKSkpKX0sYWRkQmFjazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09YT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihhKSl9fSk7ZnVuY3Rpb24gRChhLGIpe2RvIGE9YVtiXTt3aGlsZShhJiYxIT09YS5ub2RlVHlwZSk7cmV0dXJuIGF9bS5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiYxMSE9PWIubm9kZVR5cGU/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBtLmRpcihhLFwicGFyZW50Tm9kZVwiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5kaXIoYSxcInBhcmVudE5vZGVcIixjKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gRChhLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbS5kaXIoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBtLmRpcihhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBtLmRpcihhLFwibmV4dFNpYmxpbmdcIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gbS5zaWJsaW5nKChhLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gbS5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBtLm5vZGVOYW1lKGEsXCJpZnJhbWVcIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDptLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe20uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1tLm1hcCh0aGlzLGIsYyk7cmV0dXJuXCJVbnRpbFwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJlwic3RyaW5nXCI9PXR5cGVvZiBkJiYoZT1tLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoQ1thXXx8KGU9bS51bmlxdWUoZSkpLEIudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBtLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1tLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6bS5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihjPWEubWVtb3J5JiZsLGQ9ITAsZj1nfHwwLGc9MCxlPWgubGVuZ3RoLGI9ITA7aCYmZT5mO2YrKylpZihoW2ZdLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yz0hMTticmVha31iPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yz9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGQ9aC5sZW5ndGg7IWZ1bmN0aW9uIGYoYil7bS5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1tLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmYoYyl9KX0oYXJndW1lbnRzKSxiP2U9aC5sZW5ndGg6YyYmKGc9ZCxqKGMpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm0uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxjKXt2YXIgZDt3aGlsZSgoZD1tLmluQXJyYXkoYyxoLGQpKT4tMSloLnNwbGljZShkLDEpLGImJihlPj1kJiZlLS0sZj49ZCYmZi0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9tLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGU9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1jPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGN8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGMpe3JldHVybiFofHxkJiYhaXx8KGM9Y3x8W10sYz1bYSxjLnNsaWNlP2Muc2xpY2UoKTpjXSxiP2kucHVzaChjKTpqKGMpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFkfX07cmV0dXJuIGt9LG0uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG0uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixtLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG0uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG0uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bS5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1tLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm0uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9tLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG0uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbS5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTptLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm0uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDttLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBtLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG0uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP20ucmVhZHlXYWl0Kys6bS5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpe2lmKGE9PT0hMD8hLS1tLnJlYWR5V2FpdDohbS5pc1JlYWR5KXtpZigheS5ib2R5KXJldHVybiBzZXRUaW1lb3V0KG0ucmVhZHkpO20uaXNSZWFkeT0hMCxhIT09ITAmJi0tbS5yZWFkeVdhaXQ+MHx8KEgucmVzb2x2ZVdpdGgoeSxbbV0pLG0uZm4udHJpZ2dlckhhbmRsZXImJihtKHkpLnRyaWdnZXJIYW5kbGVyKFwicmVhZHlcIiksbSh5KS5vZmYoXCJyZWFkeVwiKSkpfX19KTtmdW5jdGlvbiBJKCl7eS5hZGRFdmVudExpc3RlbmVyPyh5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSiwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEosITEpKTooeS5kZXRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLEopLGEuZGV0YWNoRXZlbnQoXCJvbmxvYWRcIixKKSl9ZnVuY3Rpb24gSigpeyh5LmFkZEV2ZW50TGlzdGVuZXJ8fFwibG9hZFwiPT09ZXZlbnQudHlwZXx8XCJjb21wbGV0ZVwiPT09eS5yZWFkeVN0YXRlKSYmKEkoKSxtLnJlYWR5KCkpfW0ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtpZighSClpZihIPW0uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT15LnJlYWR5U3RhdGUpc2V0VGltZW91dChtLnJlYWR5KTtlbHNlIGlmKHkuYWRkRXZlbnRMaXN0ZW5lcil5LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSiwhMSksYS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLEosITEpO2Vsc2V7eS5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLEopLGEuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIixKKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmeS5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZCl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBlKCl7aWYoIW0uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKGEpe3JldHVybiBzZXRUaW1lb3V0KGUsNTApfUkoKSxtLnJlYWR5KCl9fSgpfXJldHVybiBILnByb21pc2UoYil9O3ZhciBLPVwidW5kZWZpbmVkXCIsTDtmb3IoTCBpbiBtKGspKWJyZWFrO2sub3duTGFzdD1cIjBcIiE9PUwsay5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PSExLG0oZnVuY3Rpb24oKXt2YXIgYSxiLGMsZDtjPXkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLGMmJmMuc3R5bGUmJihiPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweFwiLGMuYXBwZW5kQ2hpbGQoZCkuYXBwZW5kQ2hpbGQoYiksdHlwZW9mIGIuc3R5bGUuem9vbSE9PUsmJihiLnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OmlubGluZTttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxXCIsay5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChkKSl9KSxmdW5jdGlvbigpe3ZhciBhPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihudWxsPT1rLmRlbGV0ZUV4cGFuZG8pe2suZGVsZXRlRXhwYW5kbz0hMDt0cnl7ZGVsZXRlIGEudGVzdH1jYXRjaChiKXtrLmRlbGV0ZUV4cGFuZG89ITF9fWE9bnVsbH0oKSxtLmFjY2VwdERhdGE9ZnVuY3Rpb24oYSl7dmFyIGI9bS5ub0RhdGFbKGEubm9kZU5hbWUrXCIgXCIpLnRvTG93ZXJDYXNlKCldLGM9K2Eubm9kZVR5cGV8fDE7cmV0dXJuIDEhPT1jJiY5IT09Yz8hMTohYnx8YiE9PSEwJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzaWRcIik9PT1ifTt2YXIgTT0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sTj0vKFtBLVpdKS9nO2Z1bmN0aW9uIE8oYSxiLGMpe2lmKHZvaWQgMD09PWMmJjE9PT1hLm5vZGVUeXBlKXt2YXIgZD1cImRhdGEtXCIrYi5yZXBsYWNlKE4sXCItJDFcIikudG9Mb3dlckNhc2UoKTtpZihjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpNLnRlc3QoYyk/bS5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bS5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwfXJldHVybiBjfWZ1bmN0aW9uIFAoYSl7dmFyIGI7Zm9yKGIgaW4gYSlpZigoXCJkYXRhXCIhPT1ifHwhbS5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmXCJ0b0pTT05cIiE9PWIpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gUShhLGIsZCxlKXtpZihtLmFjY2VwdERhdGEoYSkpe3ZhciBmLGcsaD1tLmV4cGFuZG8saT1hLm5vZGVUeXBlLGo9aT9tLmNhY2hlOmEsaz1pP2FbaF06YVtoXSYmaDtcbmlmKGsmJmpba10mJihlfHxqW2tdLmRhdGEpfHx2b2lkIDAhPT1kfHxcInN0cmluZ1wiIT10eXBlb2YgYilyZXR1cm4ga3x8KGs9aT9hW2hdPWMucG9wKCl8fG0uZ3VpZCsrOmgpLGpba118fChqW2tdPWk/e306e3RvSlNPTjptLm5vb3B9KSwoXCJvYmplY3RcIj09dHlwZW9mIGJ8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGIpJiYoZT9qW2tdPW0uZXh0ZW5kKGpba10sYik6altrXS5kYXRhPW0uZXh0ZW5kKGpba10uZGF0YSxiKSksZz1qW2tdLGV8fChnLmRhdGF8fChnLmRhdGE9e30pLGc9Zy5kYXRhKSx2b2lkIDAhPT1kJiYoZ1ttLmNhbWVsQ2FzZShiKV09ZCksXCJzdHJpbmdcIj09dHlwZW9mIGI/KGY9Z1tiXSxudWxsPT1mJiYoZj1nW20uY2FtZWxDYXNlKGIpXSkpOmY9ZyxmfX1mdW5jdGlvbiBSKGEsYixjKXtpZihtLmFjY2VwdERhdGEoYSkpe3ZhciBkLGUsZj1hLm5vZGVUeXBlLGc9Zj9tLmNhY2hlOmEsaD1mP2FbbS5leHBhbmRvXTptLmV4cGFuZG87aWYoZ1toXSl7aWYoYiYmKGQ9Yz9nW2hdOmdbaF0uZGF0YSkpe20uaXNBcnJheShiKT9iPWIuY29uY2F0KG0ubWFwKGIsbS5jYW1lbENhc2UpKTpiIGluIGQ/Yj1bYl06KGI9bS5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIuc3BsaXQoXCIgXCIpKSxlPWIubGVuZ3RoO3doaWxlKGUtLSlkZWxldGUgZFtiW2VdXTtpZihjPyFQKGQpOiFtLmlzRW1wdHlPYmplY3QoZCkpcmV0dXJufShjfHwoZGVsZXRlIGdbaF0uZGF0YSxQKGdbaF0pKSkmJihmP20uY2xlYW5EYXRhKFthXSwhMCk6ay5kZWxldGVFeHBhbmRvfHxnIT1nLndpbmRvdz9kZWxldGUgZ1toXTpnW2hdPW51bGwpfX19bS5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7XCJhcHBsZXQgXCI6ITAsXCJlbWJlZCBcIjohMCxcIm9iamVjdCBcIjpcImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMFwifSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhPWEubm9kZVR5cGU/bS5jYWNoZVthW20uZXhwYW5kb11dOmFbbS5leHBhbmRvXSwhIWEmJiFQKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gUShhLGIsYyl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUihhLGIpfSxfZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFEoYSxiLGMsITApfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe3JldHVybiBSKGEsYiwhMCl9fSksbS5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1tLmRhdGEoZiksMT09PWYubm9kZVR5cGUmJiFtLl9kYXRhKGYsXCJwYXJzZWRBdHRyc1wiKSkpe2M9Zy5sZW5ndGg7d2hpbGUoYy0tKWdbY10mJihkPWdbY10ubmFtZSwwPT09ZC5pbmRleE9mKFwiZGF0YS1cIikmJihkPW0uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLE8oZixkLGVbZF0pKSk7bS5fZGF0YShmLFwicGFyc2VkQXR0cnNcIiwhMCl9cmV0dXJuIGV9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5kYXRhKHRoaXMsYSl9KTphcmd1bWVudHMubGVuZ3RoPjE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5kYXRhKHRoaXMsYSxiKX0pOmY/TyhmLGEsbS5kYXRhKGYsYSkpOnZvaWQgMH0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5yZW1vdmVEYXRhKHRoaXMsYSl9KX19KSxtLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhPyhiPShifHxcImZ4XCIpK1wicXVldWVcIixkPW0uX2RhdGEoYSxiKSxjJiYoIWR8fG0uaXNBcnJheShjKT9kPW0uX2RhdGEoYSxiLG0ubWFrZUFycmF5KGMpKTpkLnB1c2goYykpLGR8fFtdKTp2b2lkIDB9LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fFwiZnhcIjt2YXIgYz1tLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW0uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bS5kZXF1ZXVlKGEsYil9O1wiaW5wcm9ncmVzc1wiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKFwiZnhcIj09PWImJmMudW5zaGlmdChcImlucHJvZ3Jlc3NcIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YitcInF1ZXVlSG9va3NcIjtyZXR1cm4gbS5fZGF0YShhLGMpfHxtLl9kYXRhKGEsYyx7ZW1wdHk6bS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKS5hZGQoZnVuY3Rpb24oKXttLl9yZW1vdmVEYXRhKGEsYitcInF1ZXVlXCIpLG0uX3JlbW92ZURhdGEoYSxjKX0pfSl9fSksbS5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPVwiZnhcIixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9tLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPW0ucXVldWUodGhpcyxhLGIpO20uX3F1ZXVlSG9va3ModGhpcyxhKSxcImZ4XCI9PT1hJiZcImlucHJvZ3Jlc3NcIiE9PWNbMF0mJm0uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8XCJmeFwiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPW0uRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07XCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8XCJmeFwiO3doaWxlKGctLSljPW0uX2RhdGEoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUz0vWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsVD1bXCJUb3BcIixcIlJpZ2h0XCIsXCJCb3R0b21cIixcIkxlZnRcIl0sVT1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsXCJub25lXCI9PT1tLmNzcyhhLFwiZGlzcGxheVwiKXx8IW0uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfSxWPW0uYWNjZXNzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoXCJvYmplY3RcIj09PW0udHlwZShjKSl7ZT0hMDtmb3IoaCBpbiBjKW0uYWNjZXNzKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG0uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChtKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFc9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGE9eS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYj15LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksYz15LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihiLmlubmVySFRNTD1cIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPlwiLGsubGVhZGluZ1doaXRlc3BhY2U9Mz09PWIuZmlyc3RDaGlsZC5ub2RlVHlwZSxrLnRib2R5PSFiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIikubGVuZ3RoLGsuaHRtbFNlcmlhbGl6ZT0hIWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaW5rXCIpLmxlbmd0aCxrLmh0bWw1Q2xvbmU9XCI8Om5hdj48LzpuYXY+XCIhPT15LmNyZWF0ZUVsZW1lbnQoXCJuYXZcIikuY2xvbmVOb2RlKCEwKS5vdXRlckhUTUwsYS50eXBlPVwiY2hlY2tib3hcIixhLmNoZWNrZWQ9ITAsYy5hcHBlbmRDaGlsZChhKSxrLmFwcGVuZENoZWNrZWQ9YS5jaGVja2VkLGIuaW5uZXJIVE1MPVwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiLGsubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZSxjLmFwcGVuZENoaWxkKGIpLGIuaW5uZXJIVE1MPVwiPGlucHV0IHR5cGU9J3JhZGlvJyBjaGVja2VkPSdjaGVja2VkJyBuYW1lPSd0Jy8+XCIsay5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGsubm9DbG9uZUV2ZW50PSEwLGIuYXR0YWNoRXZlbnQmJihiLmF0dGFjaEV2ZW50KFwib25jbGlja1wiLGZ1bmN0aW9uKCl7ay5ub0Nsb25lRXZlbnQ9ITF9KSxiLmNsb25lTm9kZSghMCkuY2xpY2soKSksbnVsbD09ay5kZWxldGVFeHBhbmRvKXtrLmRlbGV0ZUV4cGFuZG89ITA7dHJ5e2RlbGV0ZSBiLnRlc3R9Y2F0Y2goZCl7ay5kZWxldGVFeHBhbmRvPSExfX19KCksZnVuY3Rpb24oKXt2YXIgYixjLGQ9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2ZvcihiIGlue3N1Ym1pdDohMCxjaGFuZ2U6ITAsZm9jdXNpbjohMH0pYz1cIm9uXCIrYiwoa1tiK1wiQnViYmxlc1wiXT1jIGluIGEpfHwoZC5zZXRBdHRyaWJ1dGUoYyxcInRcIiksa1tiK1wiQnViYmxlc1wiXT1kLmF0dHJpYnV0ZXNbY10uZXhwYW5kbz09PSExKTtkPW51bGx9KCk7dmFyIFg9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLFk9L15rZXkvLFo9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sJD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sXz0vXihbXi5dKikoPzpcXC4oLispfCkkLztmdW5jdGlvbiBhYigpe3JldHVybiEwfWZ1bmN0aW9uIGJiKCl7cmV0dXJuITF9ZnVuY3Rpb24gY2IoKXt0cnl7cmV0dXJuIHkuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fW0uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxuLG8scCxxLHI9bS5fZGF0YShhKTtpZihyKXtjLmhhbmRsZXImJihpPWMsYz1pLmhhbmRsZXIsZT1pLnNlbGVjdG9yKSxjLmd1aWR8fChjLmd1aWQ9bS5ndWlkKyspLChnPXIuZXZlbnRzKXx8KGc9ci5ldmVudHM9e30pLChrPXIuaGFuZGxlKXx8KGs9ci5oYW5kbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHR5cGVvZiBtPT09S3x8YSYmbS5ldmVudC50cmlnZ2VyZWQ9PT1hLnR5cGU/dm9pZCAwOm0uZXZlbnQuZGlzcGF0Y2guYXBwbHkoay5lbGVtLGFyZ3VtZW50cyl9LGsuZWxlbT1hKSxiPShifHxcIlwiKS5tYXRjaChFKXx8W1wiXCJdLGg9Yi5sZW5ndGg7d2hpbGUoaC0tKWY9Xy5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG8mJihqPW0uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9qLmRlbGVnYXRlVHlwZTpqLmJpbmRUeXBlKXx8byxqPW0uZXZlbnQuc3BlY2lhbFtvXXx8e30sbD1tLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZtLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbihcIi5cIil9LGkpLChuPWdbb10pfHwobj1nW29dPVtdLG4uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoXCJvblwiK28saykpKSxqLmFkZCYmKGouYWRkLmNhbGwoYSxsKSxsLmhhbmRsZXIuZ3VpZHx8KGwuaGFuZGxlci5ndWlkPWMuZ3VpZCkpLGU/bi5zcGxpY2Uobi5kZWxlZ2F0ZUNvdW50KyssMCxsKTpuLnB1c2gobCksbS5ldmVudC5nbG9iYWxbb109ITApO2E9bnVsbH19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG4sbyxwLHEscj1tLmhhc0RhdGEoYSkmJm0uX2RhdGEoYSk7aWYociYmKGs9ci5ldmVudHMpKXtiPShifHxcIlwiKS5tYXRjaChFKXx8W1wiXCJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9Xy5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG8pe2w9bS5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG49a1tvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrcC5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIiksaT1mPW4ubGVuZ3RoO3doaWxlKGYtLSlnPW5bZl0sIWUmJnEhPT1nLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1nLmd1aWR8fGgmJiFoLnRlc3QoZy5uYW1lc3BhY2UpfHxkJiZkIT09Zy5zZWxlY3RvciYmKFwiKipcIiE9PWR8fCFnLnNlbGVjdG9yKXx8KG4uc3BsaWNlKGYsMSksZy5zZWxlY3RvciYmbi5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxnKSk7aSYmIW4ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEscCxyLmhhbmRsZSkhPT0hMXx8bS5yZW1vdmVFdmVudChhLG8sci5oYW5kbGUpLGRlbGV0ZSBrW29dKX1lbHNlIGZvcihvIGluIGspbS5ldmVudC5yZW1vdmUoYSxvK2Jbal0sYyxkLCEwKTttLmlzRW1wdHlPYmplY3QoaykmJihkZWxldGUgci5oYW5kbGUsbS5fcmVtb3ZlRGF0YShhLFwiZXZlbnRzXCIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoLGksayxsLG4sbz1bZHx8eV0scD1qLmNhbGwoYixcInR5cGVcIik/Yi50eXBlOmIscT1qLmNhbGwoYixcIm5hbWVzcGFjZVwiKT9iLm5hbWVzcGFjZS5zcGxpdChcIi5cIik6W107aWYoaD1sPWQ9ZHx8eSwzIT09ZC5ub2RlVHlwZSYmOCE9PWQubm9kZVR5cGUmJiEkLnRlc3QocCttLmV2ZW50LnRyaWdnZXJlZCkmJihwLmluZGV4T2YoXCIuXCIpPj0wJiYocT1wLnNwbGl0KFwiLlwiKSxwPXEuc2hpZnQoKSxxLnNvcnQoKSksZz1wLmluZGV4T2YoXCI6XCIpPDAmJlwib25cIitwLGI9YlttLmV4cGFuZG9dP2I6bmV3IG0uRXZlbnQocCxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9ZT8yOjMsYi5uYW1lc3BhY2U9cS5qb2luKFwiLlwiKSxiLm5hbWVzcGFjZV9yZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrcS5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1kKSxjPW51bGw9PWM/W2JdOm0ubWFrZUFycmF5KGMsW2JdKSxrPW0uZXZlbnQuc3BlY2lhbFtwXXx8e30sZXx8IWsudHJpZ2dlcnx8ay50cmlnZ2VyLmFwcGx5KGQsYykhPT0hMSkpe2lmKCFlJiYhay5ub0J1YmJsZSYmIW0uaXNXaW5kb3coZCkpe2ZvcihpPWsuZGVsZWdhdGVUeXBlfHxwLCQudGVzdChpK3ApfHwoaD1oLnBhcmVudE5vZGUpO2g7aD1oLnBhcmVudE5vZGUpby5wdXNoKGgpLGw9aDtsPT09KGQub3duZXJEb2N1bWVudHx8eSkmJm8ucHVzaChsLmRlZmF1bHRWaWV3fHxsLnBhcmVudFdpbmRvd3x8YSl9bj0wO3doaWxlKChoPW9bbisrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPW4+MT9pOmsuYmluZFR5cGV8fHAsZj0obS5fZGF0YShoLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmbS5fZGF0YShoLFwiaGFuZGxlXCIpLGYmJmYuYXBwbHkoaCxjKSxmPWcmJmhbZ10sZiYmZi5hcHBseSYmbS5hY2NlcHREYXRhKGgpJiYoYi5yZXN1bHQ9Zi5hcHBseShoLGMpLGIucmVzdWx0PT09ITEmJmIucHJldmVudERlZmF1bHQoKSk7aWYoYi50eXBlPXAsIWUmJiFiLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYoIWsuX2RlZmF1bHR8fGsuX2RlZmF1bHQuYXBwbHkoby5wb3AoKSxjKT09PSExKSYmbS5hY2NlcHREYXRhKGQpJiZnJiZkW3BdJiYhbS5pc1dpbmRvdyhkKSl7bD1kW2ddLGwmJihkW2ddPW51bGwpLG0uZXZlbnQudHJpZ2dlcmVkPXA7dHJ5e2RbcF0oKX1jYXRjaChyKXt9bS5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGwmJihkW2ddPWwpfXJldHVybiBiLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bS5ldmVudC5maXgoYSk7dmFyIGIsYyxlLGYsZyxoPVtdLGk9ZC5jYWxsKGFyZ3VtZW50cyksaj0obS5fZGF0YSh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbYS50eXBlXXx8W10saz1tLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1tLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGc9MDt3aGlsZSgoZT1mLmhhbmRsZXJzW2crK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoZS5uYW1lc3BhY2UpKSYmKGEuaGFuZGxlT2JqPWUsYS5kYXRhPWUuZGF0YSxjPSgobS5ldmVudC5zcGVjaWFsW2Uub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxlLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1jJiYoYS5yZXN1bHQ9Yyk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHxcImNsaWNrXCIhPT1hLnR5cGUpKWZvcig7aSE9dGhpcztpPWkucGFyZW50Tm9kZXx8dGhpcylpZigxPT09aS5ub2RlVHlwZSYmKGkuZGlzYWJsZWQhPT0hMHx8XCJjbGlja1wiIT09YS50eXBlKSl7Zm9yKGU9W10sZj0wO2g+ZjtmKyspZD1iW2ZdLGM9ZC5zZWxlY3RvcitcIiBcIix2b2lkIDA9PT1lW2NdJiYoZVtjXT1kLm5lZWRzQ29udGV4dD9tKGMsdGhpcykuaW5kZXgoaSk+PTA6bS5maW5kKGMsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxlW2NdJiZlLnB1c2goZCk7ZS5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmV9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW20uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxkLGU9YS50eXBlLGY9YSxnPXRoaXMuZml4SG9va3NbZV07Z3x8KHRoaXMuZml4SG9va3NbZV09Zz1aLnRlc3QoZSk/dGhpcy5tb3VzZUhvb2tzOlkudGVzdChlKT90aGlzLmtleUhvb2tzOnt9KSxkPWcucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoZy5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBtLkV2ZW50KGYpLGI9ZC5sZW5ndGg7d2hpbGUoYi0tKWM9ZFtiXSxhW2NdPWZbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9Zi5zcmNFbGVtZW50fHx5KSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxhLm1ldGFLZXk9ISFhLm1ldGFLZXksZy5maWx0ZXI/Zy5maWx0ZXIoYSxmKTphfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9Yi5idXR0b24sZz1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihkPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fHksZT1kLmRvY3VtZW50RWxlbWVudCxjPWQuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZSYmZS5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShlJiZlLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGUmJmUuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGUmJmUuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmcmJihhLnJlbGF0ZWRUYXJnZXQ9Zz09PWEudGFyZ2V0P2IudG9FbGVtZW50OmcpLGEud2hpY2h8fHZvaWQgMD09PWZ8fChhLndoaWNoPTEmZj8xOjImZj8zOjQmZj8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09Y2IoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PWNiKCkmJnRoaXMuYmx1cj8odGhpcy5ibHVyKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNvdXRcIn0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbS5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIikmJlwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljaz8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBtLm5vZGVOYW1lKGEudGFyZ2V0LFwiYVwiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW0uZXh0ZW5kKG5ldyBtLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7ZD9tLmV2ZW50LnRyaWdnZXIoZSxudWxsLGIpOm0uZXZlbnQuZGlzcGF0Y2guY2FsbChiLGUpLGUuaXNEZWZhdWx0UHJldmVudGVkKCkmJmMucHJldmVudERlZmF1bHQoKX19LG0ucmVtb3ZlRXZlbnQ9eS5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9XCJvblwiK2I7YS5kZXRhY2hFdmVudCYmKHR5cGVvZiBhW2RdPT09SyYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbS5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgbS5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/YWI6YmIpOnRoaXMudHlwZT1hLGImJm0uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG0ubm93KCksdm9pZCh0aGlzW20uZXhwYW5kb109ITApKTpuZXcgbS5FdmVudChhLGIpfSxtLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOmJiLGlzUHJvcGFnYXRpb25TdG9wcGVkOmJiLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmJiLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWFiLGEmJihhLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9YWIsYSYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9YWIsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG0uZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwiLHBvaW50ZXJlbnRlcjpcInBvaW50ZXJvdmVyXCIscG9pbnRlcmxlYXZlOlwicG9pbnRlcm91dFwifSxmdW5jdGlvbihhLGIpe20uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuKCFlfHxlIT09ZCYmIW0uY29udGFpbnMoZCxlKSkmJihhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGsuc3VibWl0QnViYmxlc3x8KG0uZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIG0ubm9kZU5hbWUodGhpcyxcImZvcm1cIik/ITE6dm9pZCBtLmV2ZW50LmFkZCh0aGlzLFwiY2xpY2suX3N1Ym1pdCBrZXlwcmVzcy5fc3VibWl0XCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsYz1tLm5vZGVOYW1lKGIsXCJpbnB1dFwiKXx8bS5ub2RlTmFtZShiLFwiYnV0dG9uXCIpP2IuZm9ybTp2b2lkIDA7YyYmIW0uX2RhdGEoYyxcInN1Ym1pdEJ1YmJsZXNcIikmJihtLmV2ZW50LmFkZChjLFwic3VibWl0Ll9zdWJtaXRcIixmdW5jdGlvbihhKXthLl9zdWJtaXRfYnViYmxlPSEwfSksbS5fZGF0YShjLFwic3VibWl0QnViYmxlc1wiLCEwKSl9KX0scG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe2EuX3N1Ym1pdF9idWJibGUmJihkZWxldGUgYS5fc3VibWl0X2J1YmJsZSx0aGlzLnBhcmVudE5vZGUmJiFhLmlzVHJpZ2dlciYmbS5ldmVudC5zaW11bGF0ZShcInN1Ym1pdFwiLHRoaXMucGFyZW50Tm9kZSxhLCEwKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG0ubm9kZU5hbWUodGhpcyxcImZvcm1cIik/ITE6dm9pZCBtLmV2ZW50LnJlbW92ZSh0aGlzLFwiLl9zdWJtaXRcIil9fSksay5jaGFuZ2VCdWJibGVzfHwobS5ldmVudC5zcGVjaWFsLmNoYW5nZT17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gWC50ZXN0KHRoaXMubm9kZU5hbWUpPygoXCJjaGVja2JveFwiPT09dGhpcy50eXBlfHxcInJhZGlvXCI9PT10aGlzLnR5cGUpJiYobS5ldmVudC5hZGQodGhpcyxcInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2VcIixmdW5jdGlvbihhKXtcImNoZWNrZWRcIj09PWEub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITApfSksbS5ldmVudC5hZGQodGhpcyxcImNsaWNrLl9jaGFuZ2VcIixmdW5jdGlvbihhKXt0aGlzLl9qdXN0X2NoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMSksbS5ldmVudC5zaW11bGF0ZShcImNoYW5nZVwiLHRoaXMsYSwhMCl9KSksITEpOnZvaWQgbS5ldmVudC5hZGQodGhpcyxcImJlZm9yZWFjdGl2YXRlLl9jaGFuZ2VcIixmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldDtYLnRlc3QoYi5ub2RlTmFtZSkmJiFtLl9kYXRhKGIsXCJjaGFuZ2VCdWJibGVzXCIpJiYobS5ldmVudC5hZGQoYixcImNoYW5nZS5fY2hhbmdlXCIsZnVuY3Rpb24oYSl7IXRoaXMucGFyZW50Tm9kZXx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fG0uZXZlbnQuc2ltdWxhdGUoXCJjaGFuZ2VcIix0aGlzLnBhcmVudE5vZGUsYSwhMCl9KSxtLl9kYXRhKGIsXCJjaGFuZ2VCdWJibGVzXCIsITApKX0pfSxoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7cmV0dXJuIHRoaXMhPT1ifHxhLmlzU2ltdWxhdGVkfHxhLmlzVHJpZ2dlcnx8XCJyYWRpb1wiIT09Yi50eXBlJiZcImNoZWNrYm94XCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBtLmV2ZW50LnJlbW92ZSh0aGlzLFwiLl9jaGFuZ2VcIiksIVgudGVzdCh0aGlzLm5vZGVOYW1lKX19KSxrLmZvY3VzaW5CdWJibGVzfHxtLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe20uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxtLmV2ZW50LmZpeChhKSwhMCl9O20uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1tLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbS5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW0uX2RhdGEoZCxiKS0xO2U/bS5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG0uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG0uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGc7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1jfHxiLGI9dm9pZCAwKTtmb3IoZiBpbiBhKXRoaXMub24oZixiLGMsYVtmXSxlKTtyZXR1cm4gdGhpc31pZihudWxsPT1jJiZudWxsPT1kPyhkPWIsYz1iPXZvaWQgMCk6bnVsbD09ZCYmKFwic3RyaW5nXCI9PXR5cGVvZiBiPyhkPWMsYz12b2lkIDApOihkPWMsYz1iLGI9dm9pZCAwKSksZD09PSExKWQ9YmI7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihnPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbSgpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1tLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe20uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixtKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPWJiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXttLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP20uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO2Z1bmN0aW9uIGRiKGEpe3ZhciBiPWViLnNwbGl0KFwifFwiKSxjPWEuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKGMuY3JlYXRlRWxlbWVudCl3aGlsZShiLmxlbmd0aCljLmNyZWF0ZUVsZW1lbnQoYi5wb3AoKSk7cmV0dXJuIGN9dmFyIGViPVwiYWJicnxhcnRpY2xlfGFzaWRlfGF1ZGlvfGJkaXxjYW52YXN8ZGF0YXxkYXRhbGlzdHxkZXRhaWxzfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlb1wiLGZiPS8galF1ZXJ5XFxkKz1cIig/Om51bGx8XFxkKylcIi9nLGdiPW5ldyBSZWdFeHAoXCI8KD86XCIrZWIrXCIpW1xcXFxzLz5dXCIsXCJpXCIpLGhiPS9eXFxzKy8saWI9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLGpiPS88KFtcXHc6XSspLyxrYj0vPHRib2R5L2ksbGI9Lzx8JiM/XFx3KzsvLG1iPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksbmI9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxvYj0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLHBiPS9edHJ1ZVxcLyguKikvLHFiPS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxyYj17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLGxlZ2VuZDpbMSxcIjxmaWVsZHNldD5cIixcIjwvZmllbGRzZXQ+XCJdLGFyZWE6WzEsXCI8bWFwPlwiLFwiPC9tYXA+XCJdLHBhcmFtOlsxLFwiPG9iamVjdD5cIixcIjwvb2JqZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDprLmh0bWxTZXJpYWxpemU/WzAsXCJcIixcIlwiXTpbMSxcIlg8ZGl2PlwiLFwiPC9kaXY+XCJdfSxzYj1kYih5KSx0Yj1zYi5hcHBlbmRDaGlsZCh5LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO3JiLm9wdGdyb3VwPXJiLm9wdGlvbixyYi50Ym9keT1yYi50Zm9vdD1yYi5jb2xncm91cD1yYi5jYXB0aW9uPXJiLnRoZWFkLHJiLnRoPXJiLnRkO2Z1bmN0aW9uIHViKGEsYil7dmFyIGMsZCxlPTAsZj10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PUs/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHxcIipcIik6dHlwZW9mIGEucXVlcnlTZWxlY3RvckFsbCE9PUs/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fFwiKlwiKTp2b2lkIDA7aWYoIWYpZm9yKGY9W10sYz1hLmNoaWxkTm9kZXN8fGE7bnVsbCE9KGQ9Y1tlXSk7ZSsrKSFifHxtLm5vZGVOYW1lKGQsYik/Zi5wdXNoKGQpOm0ubWVyZ2UoZix1YihkLGIpKTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbS5ub2RlTmFtZShhLGIpP20ubWVyZ2UoW2FdLGYpOmZ9ZnVuY3Rpb24gdmIoYSl7Vy50ZXN0KGEudHlwZSkmJihhLmRlZmF1bHRDaGVja2VkPWEuY2hlY2tlZCl9ZnVuY3Rpb24gd2IoYSxiKXtyZXR1cm4gbS5ub2RlTmFtZShhLFwidGFibGVcIikmJm0ubm9kZU5hbWUoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLFwidHJcIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikpOmF9ZnVuY3Rpb24geGIoYSl7cmV0dXJuIGEudHlwZT0obnVsbCE9PW0uZmluZC5hdHRyKGEsXCJ0eXBlXCIpKStcIi9cIithLnR5cGUsYX1mdW5jdGlvbiB5YihhKXt2YXIgYj1wYi5leGVjKGEudHlwZSk7cmV0dXJuIGI/YS50eXBlPWJbMV06YS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpLGF9ZnVuY3Rpb24gemIoYSxiKXtmb3IodmFyIGMsZD0wO251bGwhPShjPWFbZF0pO2QrKyltLl9kYXRhKGMsXCJnbG9iYWxFdmFsXCIsIWJ8fG0uX2RhdGEoYltkXSxcImdsb2JhbEV2YWxcIikpfWZ1bmN0aW9uIEFiKGEsYil7aWYoMT09PWIubm9kZVR5cGUmJm0uaGFzRGF0YShhKSl7dmFyIGMsZCxlLGY9bS5fZGF0YShhKSxnPW0uX2RhdGEoYixmKSxoPWYuZXZlbnRzO2lmKGgpe2RlbGV0ZSBnLmhhbmRsZSxnLmV2ZW50cz17fTtmb3IoYyBpbiBoKWZvcihkPTAsZT1oW2NdLmxlbmd0aDtlPmQ7ZCsrKW0uZXZlbnQuYWRkKGIsYyxoW2NdW2RdKX1nLmRhdGEmJihnLmRhdGE9bS5leHRlbmQoe30sZy5kYXRhKSl9fWZ1bmN0aW9uIEJiKGEsYil7dmFyIGMsZCxlO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwhay5ub0Nsb25lRXZlbnQmJmJbbS5leHBhbmRvXSl7ZT1tLl9kYXRhKGIpO2ZvcihkIGluIGUuZXZlbnRzKW0ucmVtb3ZlRXZlbnQoYixkLGUuaGFuZGxlKTtiLnJlbW92ZUF0dHJpYnV0ZShtLmV4cGFuZG8pfVwic2NyaXB0XCI9PT1jJiZiLnRleHQhPT1hLnRleHQ/KHhiKGIpLnRleHQ9YS50ZXh0LHliKGIpKTpcIm9iamVjdFwiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGsuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFtLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKTpcImlucHV0XCI9PT1jJiZXLnRlc3QoYS50eXBlKT8oYi5kZWZhdWx0Q2hlY2tlZD1iLmNoZWNrZWQ9YS5jaGVja2VkLGIudmFsdWUhPT1hLnZhbHVlJiYoYi52YWx1ZT1hLnZhbHVlKSk6XCJvcHRpb25cIj09PWM/Yi5kZWZhdWx0U2VsZWN0ZWQ9Yi5zZWxlY3RlZD1hLmRlZmF1bHRTZWxlY3RlZDooXCJpbnB1dFwiPT09Y3x8XCJ0ZXh0YXJlYVwiPT09YykmJihiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9fW0uZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpPW0uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKGsuaHRtbDVDbG9uZXx8bS5pc1hNTERvYyhhKXx8IWdiLnRlc3QoXCI8XCIrYS5ub2RlTmFtZStcIj5cIik/Zj1hLmNsb25lTm9kZSghMCk6KHRiLmlubmVySFRNTD1hLm91dGVySFRNTCx0Yi5yZW1vdmVDaGlsZChmPXRiLmZpcnN0Q2hpbGQpKSwhKGsubm9DbG9uZUV2ZW50JiZrLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxtLmlzWE1MRG9jKGEpKSlmb3IoZD11YihmKSxoPXViKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmQmIoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8dWIoYSksZD1kfHx1YihmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUFiKGUsZFtnXSk7ZWxzZSBBYihhLGYpO3JldHVybiBkPXViKGYsXCJzY3JpcHRcIiksZC5sZW5ndGg+MCYmemIoZCwhaSYmdWIoYSxcInNjcmlwdFwiKSksZD1oPWU9bnVsbCxmfSxidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZSxmLGcsaCxpLGosbCxuPWEubGVuZ3RoLG89ZGIoYikscD1bXSxxPTA7bj5xO3ErKylpZihmPWFbcV0sZnx8MD09PWYpaWYoXCJvYmplY3RcIj09PW0udHlwZShmKSltLm1lcmdlKHAsZi5ub2RlVHlwZT9bZl06Zik7ZWxzZSBpZihsYi50ZXN0KGYpKXtoPWh8fG8uYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxpPShqYi5leGVjKGYpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSxsPXJiW2ldfHxyYi5fZGVmYXVsdCxoLmlubmVySFRNTD1sWzFdK2YucmVwbGFjZShpYixcIjwkMT48LyQyPlwiKStsWzJdLGU9bFswXTt3aGlsZShlLS0paD1oLmxhc3RDaGlsZDtpZighay5sZWFkaW5nV2hpdGVzcGFjZSYmaGIudGVzdChmKSYmcC5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoaGIuZXhlYyhmKVswXSkpLCFrLnRib2R5KXtmPVwidGFibGVcIiE9PWl8fGtiLnRlc3QoZik/XCI8dGFibGU+XCIhPT1sWzFdfHxrYi50ZXN0KGYpPzA6aDpoLmZpcnN0Q2hpbGQsZT1mJiZmLmNoaWxkTm9kZXMubGVuZ3RoO3doaWxlKGUtLSltLm5vZGVOYW1lKGo9Zi5jaGlsZE5vZGVzW2VdLFwidGJvZHlcIikmJiFqLmNoaWxkTm9kZXMubGVuZ3RoJiZmLnJlbW92ZUNoaWxkKGopfW0ubWVyZ2UocCxoLmNoaWxkTm9kZXMpLGgudGV4dENvbnRlbnQ9XCJcIjt3aGlsZShoLmZpcnN0Q2hpbGQpaC5yZW1vdmVDaGlsZChoLmZpcnN0Q2hpbGQpO2g9by5sYXN0Q2hpbGR9ZWxzZSBwLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShmKSk7aCYmby5yZW1vdmVDaGlsZChoKSxrLmFwcGVuZENoZWNrZWR8fG0uZ3JlcCh1YihwLFwiaW5wdXRcIiksdmIpLHE9MDt3aGlsZShmPXBbcSsrXSlpZigoIWR8fC0xPT09bS5pbkFycmF5KGYsZCkpJiYoZz1tLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxoPXViKG8uYXBwZW5kQ2hpbGQoZiksXCJzY3JpcHRcIiksZyYmemIoaCksYykpe2U9MDt3aGlsZShmPWhbZSsrXSlvYi50ZXN0KGYudHlwZXx8XCJcIikmJmMucHVzaChmKX1yZXR1cm4gaD1udWxsLG99LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGYsZyxoPTAsaT1tLmV4cGFuZG8saj1tLmNhY2hlLGw9ay5kZWxldGVFeHBhbmRvLG49bS5ldmVudC5zcGVjaWFsO251bGwhPShkPWFbaF0pO2grKylpZigoYnx8bS5hY2NlcHREYXRhKGQpKSYmKGY9ZFtpXSxnPWYmJmpbZl0pKXtpZihnLmV2ZW50cylmb3IoZSBpbiBnLmV2ZW50cyluW2VdP20uZXZlbnQucmVtb3ZlKGQsZSk6bS5yZW1vdmVFdmVudChkLGUsZy5oYW5kbGUpO2pbZl0mJihkZWxldGUgaltmXSxsP2RlbGV0ZSBkW2ldOnR5cGVvZiBkLnJlbW92ZUF0dHJpYnV0ZSE9PUs/ZC5yZW1vdmVBdHRyaWJ1dGUoaSk6ZFtpXT1udWxsLGMucHVzaChmKSl9fX0pLG0uZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBWKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/bS50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8eSkuY3JlYXRlVGV4dE5vZGUoYSkpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9d2IodGhpcyxhKTtiLmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj13Yih0aGlzLGEpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPWE/bS5maWx0ZXIoYSx0aGlzKTp0aGlzLGU9MDtudWxsIT0oYz1kW2VdKTtlKyspYnx8MSE9PWMubm9kZVR5cGV8fG0uY2xlYW5EYXRhKHViKGMpKSxjLnBhcmVudE5vZGUmJihiJiZtLmNvbnRhaW5zKGMub3duZXJEb2N1bWVudCxjKSYmemIodWIoYyxcInNjcmlwdFwiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm0uY2xlYW5EYXRhKHViKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbS5ub2RlTmFtZShhLFwic2VsZWN0XCIpJiYoYS5vcHRpb25zLmxlbmd0aD0wKX1yZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBtLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBWKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSlyZXR1cm4gMT09PWIubm9kZVR5cGU/Yi5pbm5lckhUTUwucmVwbGFjZShmYixcIlwiKTp2b2lkIDA7aWYoIShcInN0cmluZ1wiIT10eXBlb2YgYXx8bWIudGVzdChhKXx8IWsuaHRtbFNlcmlhbGl6ZSYmZ2IudGVzdChhKXx8IWsubGVhZGluZ1doaXRlc3BhY2UmJmhiLnRlc3QoYSl8fHJiWyhqYi5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pKXthPWEucmVwbGFjZShpYixcIjwkMT48LyQyPlwiKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihtLmNsZWFuRGF0YSh1YihiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbS5jbGVhbkRhdGEodWIodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG49dGhpcyxvPWwtMSxwPWFbMF0scT1tLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiZcInN0cmluZ1wiPT10eXBlb2YgcCYmIWsuY2hlY2tDbG9uZSYmbmIudGVzdChwKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPW4uZXEoYyk7cSYmKGFbMF09cC5jYWxsKHRoaXMsYyxkLmh0bWwoKSkpLGQuZG9tTWFuaXAoYSxiKX0pO2lmKGwmJihpPW0uYnVpbGRGcmFnbWVudChhLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSx0aGlzKSxjPWkuZmlyc3RDaGlsZCwxPT09aS5jaGlsZE5vZGVzLmxlbmd0aCYmKGk9YyksYykpe2ZvcihnPW0ubWFwKHViKGksXCJzY3JpcHRcIikseGIpLGY9Zy5sZW5ndGg7bD5qO2orKylkPWksaiE9PW8mJihkPW0uY2xvbmUoZCwhMCwhMCksZiYmbS5tZXJnZShnLHViKGQsXCJzY3JpcHRcIikpKSxiLmNhbGwodGhpc1tqXSxkLGopO2lmKGYpZm9yKGg9Z1tnLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG0ubWFwKGcseWIpLGo9MDtmPmo7aisrKWQ9Z1tqXSxvYi50ZXN0KGQudHlwZXx8XCJcIikmJiFtLl9kYXRhKGQsXCJnbG9iYWxFdmFsXCIpJiZtLmNvbnRhaW5zKGgsZCkmJihkLnNyYz9tLl9ldmFsVXJsJiZtLl9ldmFsVXJsKGQuc3JjKTptLmdsb2JhbEV2YWwoKGQudGV4dHx8ZC50ZXh0Q29udGVudHx8ZC5pbm5lckhUTUx8fFwiXCIpLnJlcGxhY2UocWIsXCJcIikpKTtpPWM9bnVsbH1yZXR1cm4gdGhpc319KSxtLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXttLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPTAsZT1bXSxnPW0oYSksaD1nLmxlbmd0aC0xO2g+PWQ7ZCsrKWM9ZD09PWg/dGhpczp0aGlzLmNsb25lKCEwKSxtKGdbZF0pW2JdKGMpLGYuYXBwbHkoZSxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIENiLERiPXt9O2Z1bmN0aW9uIEViKGIsYyl7dmFyIGQsZT1tKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTptLmNzcyhlWzBdLFwiZGlzcGxheVwiKTtyZXR1cm4gZS5kZXRhY2goKSxmfWZ1bmN0aW9uIEZiKGEpe3ZhciBiPXksYz1EYlthXTtyZXR1cm4gY3x8KGM9RWIoYSxiKSxcIm5vbmVcIiE9PWMmJmN8fChDYj0oQ2J8fG0oXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj0oQ2JbMF0uY29udGVudFdpbmRvd3x8Q2JbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9RWIoYSxiKSxDYi5kZXRhY2goKSksRGJbYV09YyksY30hZnVuY3Rpb24oKXt2YXIgYTtrLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxkO3JldHVybiBjPXkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLGMmJmMuc3R5bGU/KGI9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGQ9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGQuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4XCIsYy5hcHBlbmRDaGlsZChkKS5hcHBlbmRDaGlsZChiKSx0eXBlb2YgYi5zdHlsZS56b29tIT09SyYmKGIuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjFcIixiLmFwcGVuZENoaWxkKHkuY3JlYXRlRWxlbWVudChcImRpdlwiKSkuc3R5bGUud2lkdGg9XCI1cHhcIixhPTMhPT1iLm9mZnNldFdpZHRoKSxjLnJlbW92ZUNoaWxkKGQpLGEpOnZvaWQgMH19KCk7dmFyIEdiPS9ebWFyZ2luLyxIYj1uZXcgUmVnRXhwKFwiXihcIitTK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLEliLEpiLEtiPS9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLzthLmdldENvbXB1dGVkU3R5bGU/KEliPWZ1bmN0aW9uKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpfSxKYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fEliKGEpLGc9Yz9jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl06dm9pZCAwLGMmJihcIlwiIT09Z3x8bS5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW0uc3R5bGUoYSxiKSksSGIudGVzdChnKSYmR2IudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwPT09Zz9nOmcrXCJcIn0pOnkuZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSYmKEliPWZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX0sSmI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxJYihhKSxnPWM/Y1tiXTp2b2lkIDAsbnVsbD09ZyYmaCYmaFtiXSYmKGc9aFtiXSksSGIudGVzdChnKSYmIUtiLnRlc3QoYikmJihkPWgubGVmdCxlPWEucnVudGltZVN0eWxlLGY9ZSYmZS5sZWZ0LGYmJihlLmxlZnQ9YS5jdXJyZW50U3R5bGUubGVmdCksaC5sZWZ0PVwiZm9udFNpemVcIj09PWI/XCIxZW1cIjpnLGc9aC5waXhlbExlZnQrXCJweFwiLGgubGVmdD1kLGYmJihlLmxlZnQ9ZikpLHZvaWQgMD09PWc/ZzpnK1wiXCJ8fFwiYXV0b1wifSk7ZnVuY3Rpb24gTGIoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7dmFyIGM9YSgpO2lmKG51bGwhPWMpcmV0dXJuIGM/dm9pZCBkZWxldGUgdGhpcy5nZXQ6KHRoaXMuZ2V0PWIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSFmdW5jdGlvbigpe3ZhciBiLGMsZCxlLGYsZyxoO2lmKGI9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGIuaW5uZXJIVE1MPVwiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+XCIsZD1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKVswXSxjPWQmJmQuc3R5bGUpe2MuY3NzVGV4dD1cImZsb2F0OmxlZnQ7b3BhY2l0eTouNVwiLGsub3BhY2l0eT1cIjAuNVwiPT09Yy5vcGFjaXR5LGsuY3NzRmxvYXQ9ISFjLmNzc0Zsb2F0LGIuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGIuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLGsuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWIuc3R5bGUuYmFja2dyb3VuZENsaXAsay5ib3hTaXppbmc9XCJcIj09PWMuYm94U2l6aW5nfHxcIlwiPT09Yy5Nb3pCb3hTaXppbmd8fFwiXCI9PT1jLldlYmtpdEJveFNpemluZyxtLmV4dGVuZChrLHtyZWxpYWJsZUhpZGRlbk9mZnNldHM6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09ZyYmaSgpLGd9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWYmJmkoKSxmfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWUmJmkoKSxlfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWgmJmkoKSxofX0pO2Z1bmN0aW9uIGkoKXt2YXIgYixjLGQsaTtjPXkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLGMmJmMuc3R5bGUmJihiPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweFwiLGMuYXBwZW5kQ2hpbGQoZCkuYXBwZW5kQ2hpbGQoYiksYi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIixlPWY9ITEsaD0hMCxhLmdldENvbXB1dGVkU3R5bGUmJihlPVwiMSVcIiE9PShhLmdldENvbXB1dGVkU3R5bGUoYixudWxsKXx8e30pLnRvcCxmPVwiNHB4XCI9PT0oYS5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl8fHt3aWR0aDpcIjRweFwifSkud2lkdGgsaT1iLmFwcGVuZENoaWxkKHkuY3JlYXRlRWxlbWVudChcImRpdlwiKSksaS5zdHlsZS5jc3NUZXh0PWIuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiLGkuc3R5bGUubWFyZ2luUmlnaHQ9aS5zdHlsZS53aWR0aD1cIjBcIixiLnN0eWxlLndpZHRoPVwiMXB4XCIsaD0hcGFyc2VGbG9hdCgoYS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLGIuaW5uZXJIVE1MPVwiPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPlwiLGk9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpLGlbMF0uc3R5bGUuY3NzVGV4dD1cIm1hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MDtkaXNwbGF5Om5vbmVcIixnPTA9PT1pWzBdLm9mZnNldEhlaWdodCxnJiYoaVswXS5zdHlsZS5kaXNwbGF5PVwiXCIsaVsxXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGc9MD09PWlbMF0ub2Zmc2V0SGVpZ2h0KSxjLnJlbW92ZUNoaWxkKGQpKX19fSgpLG0uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIE1iPS9hbHBoYVxcKFteKV0qXFwpL2ksTmI9L29wYWNpdHlcXHMqPVxccyooW14pXSopLyxPYj0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sUGI9bmV3IFJlZ0V4cChcIl4oXCIrUytcIikoLiopJFwiLFwiaVwiKSxRYj1uZXcgUmVnRXhwKFwiXihbKy1dKT0oXCIrUytcIilcIixcImlcIiksUmI9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCIsZGlzcGxheTpcImJsb2NrXCJ9LFNiPXtsZXR0ZXJTcGFjaW5nOlwiMFwiLGZvbnRXZWlnaHQ6XCI0MDBcIn0sVGI9W1wiV2Via2l0XCIsXCJPXCIsXCJNb3pcIixcIm1zXCJdO2Z1bmN0aW9uIFViKGEsYil7aWYoYiBpbiBhKXJldHVybiBiO3ZhciBjPWIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1UYi5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9VGJbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gVmIoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bS5fZGF0YShkLFwib2xkZGlzcGxheVwiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHxcIm5vbmVcIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9XCJcIiksXCJcIj09PWQuc3R5bGUuZGlzcGxheSYmVShkKSYmKGZbZ109bS5fZGF0YShkLFwib2xkZGlzcGxheVwiLEZiKGQubm9kZU5hbWUpKSkpOihlPVUoZCksKGMmJlwibm9uZVwiIT09Y3x8IWUpJiZtLl9kYXRhKGQsXCJvbGRkaXNwbGF5XCIsZT9jOm0uY3NzKGQsXCJkaXNwbGF5XCIpKSkpO2ZvcihnPTA7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGImJlwibm9uZVwiIT09ZC5zdHlsZS5kaXNwbGF5JiZcIlwiIT09ZC5zdHlsZS5kaXNwbGF5fHwoZC5zdHlsZS5kaXNwbGF5PWI/ZltnXXx8XCJcIjpcIm5vbmVcIikpO3JldHVybiBhfWZ1bmN0aW9uIFdiKGEsYixjKXt2YXIgZD1QYi5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHxcInB4XCIpOmJ9ZnVuY3Rpb24gWGIoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6XCJ3aWR0aFwiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKVwibWFyZ2luXCI9PT1jJiYoZys9bS5jc3MoYSxjK1RbZl0sITAsZSkpLGQ/KFwiY29udGVudFwiPT09YyYmKGctPW0uY3NzKGEsXCJwYWRkaW5nXCIrVFtmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1tLmNzcyhhLFwiYm9yZGVyXCIrVFtmXStcIldpZHRoXCIsITAsZSkpKTooZys9bS5jc3MoYSxcInBhZGRpbmdcIitUW2ZdLCEwLGUpLFwicGFkZGluZ1wiIT09YyYmKGcrPW0uY3NzKGEsXCJib3JkZXJcIitUW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIFliKGEsYixjKXt2YXIgZD0hMCxlPVwid2lkdGhcIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPUliKGEpLGc9ay5ib3hTaXppbmcmJlwiYm9yZGVyLWJveFwiPT09bS5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9SmIoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSxIYi50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGsuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStYYihhLGIsY3x8KGc/XCJib3JkZXJcIjpcImNvbnRlbnRcIiksZCxmKStcInB4XCJ9bS5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1KYihhLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09Yz9cIjFcIjpjfX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6ay5jc3NGbG9hdD9cImNzc0Zsb2F0XCI6XCJzdHlsZUZsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9bS5jYW1lbENhc2UoYiksaT1hLnN0eWxlO2lmKGI9bS5jc3NQcm9wc1toXXx8KG0uY3NzUHJvcHNbaF09VWIoaSxoKSksZz1tLmNzc0hvb2tzW2JdfHxtLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl07aWYoZj10eXBlb2YgYyxcInN0cmluZ1wiPT09ZiYmKGU9UWIuZXhlYyhjKSkmJihjPShlWzFdKzEpKmVbMl0rcGFyc2VGbG9hdChtLmNzcyhhLGIpKSxmPVwibnVtYmVyXCIpLG51bGwhPWMmJmM9PT1jJiYoXCJudW1iZXJcIiE9PWZ8fG0uY3NzTnVtYmVyW2hdfHwoYys9XCJweFwiKSxrLmNsZWFyQ2xvbmVTdHlsZXx8XCJcIiE9PWN8fDAhPT1iLmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpfHwoaVtiXT1cImluaGVyaXRcIiksIShnJiZcInNldFwiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKSkpKXRyeXtpW2JdPWN9Y2F0Y2goail7fX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1tLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1tLmNzc1Byb3BzW2hdfHwobS5jc3NQcm9wc1toXT1VYihhLnN0eWxlLGgpKSxnPW0uY3NzSG9va3NbYl18fG0uY3NzSG9va3NbaF0sZyYmXCJnZXRcImluIGcmJihmPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWYmJihmPUpiKGEsYixkKSksXCJub3JtYWxcIj09PWYmJmIgaW4gU2ImJihmPVNiW2JdKSxcIlwiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8bS5pc051bWVyaWMoZSk/ZXx8MDpmKTpmfX0pLG0uZWFjaChbXCJoZWlnaHRcIixcIndpZHRoXCJdLGZ1bmN0aW9uKGEsYil7bS5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz9PYi50ZXN0KG0uY3NzKGEsXCJkaXNwbGF5XCIpKSYmMD09PWEub2Zmc2V0V2lkdGg/bS5zd2FwKGEsUmIsZnVuY3Rpb24oKXtyZXR1cm4gWWIoYSxiLGQpfSk6WWIoYSxiLGQpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kJiZJYihhKTtyZXR1cm4gV2IoYSxjLGQ/WGIoYSxiLGQsay5ib3hTaXppbmcmJlwiYm9yZGVyLWJveFwiPT09bS5jc3MoYSxcImJveFNpemluZ1wiLCExLGUpLGUpOjApfX19KSxrLm9wYWNpdHl8fChtLmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihhLGIpe3JldHVybiBOYi50ZXN0KChiJiZhLmN1cnJlbnRTdHlsZT9hLmN1cnJlbnRTdHlsZS5maWx0ZXI6YS5zdHlsZS5maWx0ZXIpfHxcIlwiKT8uMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpK1wiXCI6Yj9cIjFcIjpcIlwifSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnN0eWxlLGQ9YS5jdXJyZW50U3R5bGUsZT1tLmlzTnVtZXJpYyhiKT9cImFscGhhKG9wYWNpdHk9XCIrMTAwKmIrXCIpXCI6XCJcIixmPWQmJmQuZmlsdGVyfHxjLmZpbHRlcnx8XCJcIjtjLnpvb209MSwoYj49MXx8XCJcIj09PWIpJiZcIlwiPT09bS50cmltKGYucmVwbGFjZShNYixcIlwiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoXCJmaWx0ZXJcIiksXCJcIj09PWJ8fGQmJiFkLmZpbHRlcil8fChjLmZpbHRlcj1NYi50ZXN0KGYpP2YucmVwbGFjZShNYixlKTpmK1wiIFwiK2UpfX0pLG0uY3NzSG9va3MubWFyZ2luUmlnaHQ9TGIoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bS5zd2FwKGEse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0sSmIsW2EsXCJtYXJnaW5SaWdodFwiXSk6dm9pZCAwfSksbS5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXttLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdOzQ+ZDtkKyspZVthK1RbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sR2IudGVzdChhKXx8KG0uY3NzSG9va3NbYStiXS5zZXQ9V2IpfSksbS5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBWKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobS5pc0FycmF5KGIpKXtmb3IoZD1JYihhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1tLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bS5zdHlsZShhLGIsYyk6bS5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gVmIodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gVmIodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtVKHRoaXMpP20odGhpcykuc2hvdygpOm0odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gWmIoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IFpiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bS5Ud2Vlbj1aYixaYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlpiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fFwic3dpbmdcIix0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG0uY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKVxufSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1aYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6WmIucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9WmIucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPWI9dGhpcy5vcHRpb25zLmR1cmF0aW9uP20uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6WmIucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sWmIucHJvdG90eXBlLmluaXQucHJvdG90eXBlPVpiLnByb3RvdHlwZSxaYi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG51bGw9PWEuZWxlbVthLnByb3BdfHxhLmVsZW0uc3R5bGUmJm51bGwhPWEuZWxlbS5zdHlsZVthLnByb3BdPyhiPW0uY3NzKGEuZWxlbSxhLnByb3AsXCJcIiksYiYmXCJhdXRvXCIhPT1iP2I6MCk6YS5lbGVtW2EucHJvcF19LHNldDpmdW5jdGlvbihhKXttLmZ4LnN0ZXBbYS5wcm9wXT9tLmZ4LnN0ZXBbYS5wcm9wXShhKTphLmVsZW0uc3R5bGUmJihudWxsIT1hLmVsZW0uc3R5bGVbbS5jc3NQcm9wc1thLnByb3BdXXx8bS5jc3NIb29rc1thLnByb3BdKT9tLnN0eWxlKGEuZWxlbSxhLnByb3AsYS5ub3crYS51bml0KTphLmVsZW1bYS5wcm9wXT1hLm5vd319fSxaYi5wcm9wSG9va3Muc2Nyb2xsVG9wPVpiLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oYSl7YS5lbGVtLm5vZGVUeXBlJiZhLmVsZW0ucGFyZW50Tm9kZSYmKGEuZWxlbVthLnByb3BdPWEubm93KX19LG0uZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHN3aW5nOmZ1bmN0aW9uKGEpe3JldHVybi41LU1hdGguY29zKGEqTWF0aC5QSSkvMn19LG0uZng9WmIucHJvdG90eXBlLmluaXQsbS5meC5zdGVwPXt9O3ZhciAkYixfYixhYz0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sYmM9bmV3IFJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIrUytcIikoW2EteiVdKikkXCIsXCJpXCIpLGNjPS9xdWV1ZUhvb2tzJC8sZGM9W2ljXSxlYz17XCIqXCI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpLGQ9Yy5jdXIoKSxlPWJjLmV4ZWMoYiksZj1lJiZlWzNdfHwobS5jc3NOdW1iZXJbYV0/XCJcIjpcInB4XCIpLGc9KG0uY3NzTnVtYmVyW2FdfHxcInB4XCIhPT1mJiYrZCkmJmJjLmV4ZWMobS5jc3MoYy5lbGVtLGEpKSxoPTEsaT0yMDtpZihnJiZnWzNdIT09Zil7Zj1mfHxnWzNdLGU9ZXx8W10sZz0rZHx8MTtkbyBoPWh8fFwiLjVcIixnLz1oLG0uc3R5bGUoYy5lbGVtLGEsZytmKTt3aGlsZShoIT09KGg9Yy5jdXIoKS9kKSYmMSE9PWgmJi0taSl9cmV0dXJuIGUmJihnPWMuc3RhcnQ9K2d8fCtkfHwwLGMudW5pdD1mLGMuZW5kPWVbMV0/ZysoZVsxXSsxKSplWzJdOitlWzJdKSxjfV19O2Z1bmN0aW9uIGZjKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXskYj12b2lkIDB9KSwkYj1tLm5vdygpfWZ1bmN0aW9uIGdjKGEsYil7dmFyIGMsZD17aGVpZ2h0OmF9LGU9MDtmb3IoYj1iPzE6MDs0PmU7ZSs9Mi1iKWM9VFtlXSxkW1wibWFyZ2luXCIrY109ZFtcInBhZGRpbmdcIitjXT1hO3JldHVybiBiJiYoZC5vcGFjaXR5PWQud2lkdGg9YSksZH1mdW5jdGlvbiBoYyhhLGIsYyl7Zm9yKHZhciBkLGU9KGVjW2JdfHxbXSkuY29uY2F0KGVjW1wiKlwiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gaWMoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGwsbj10aGlzLG89e30scD1hLnN0eWxlLHE9YS5ub2RlVHlwZSYmVShhKSxyPW0uX2RhdGEoYSxcImZ4c2hvd1wiKTtjLnF1ZXVlfHwoaD1tLl9xdWV1ZUhvb2tzKGEsXCJmeFwiKSxudWxsPT1oLnVucXVldWVkJiYoaC51bnF1ZXVlZD0wLGk9aC5lbXB0eS5maXJlLGguZW1wdHkuZmlyZT1mdW5jdGlvbigpe2gudW5xdWV1ZWR8fGkoKX0pLGgudW5xdWV1ZWQrKyxuLmFsd2F5cyhmdW5jdGlvbigpe24uYWx3YXlzKGZ1bmN0aW9uKCl7aC51bnF1ZXVlZC0tLG0ucXVldWUoYSxcImZ4XCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKFwiaGVpZ2h0XCJpbiBifHxcIndpZHRoXCJpbiBiKSYmKGMub3ZlcmZsb3c9W3Aub3ZlcmZsb3cscC5vdmVyZmxvd1gscC5vdmVyZmxvd1ldLGo9bS5jc3MoYSxcImRpc3BsYXlcIiksbD1cIm5vbmVcIj09PWo/bS5fZGF0YShhLFwib2xkZGlzcGxheVwiKXx8RmIoYS5ub2RlTmFtZSk6aixcImlubGluZVwiPT09bCYmXCJub25lXCI9PT1tLmNzcyhhLFwiZmxvYXRcIikmJihrLmlubGluZUJsb2NrTmVlZHNMYXlvdXQmJlwiaW5saW5lXCIhPT1GYihhLm5vZGVOYW1lKT9wLnpvb209MTpwLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIikpLGMub3ZlcmZsb3cmJihwLm92ZXJmbG93PVwiaGlkZGVuXCIsay5zaHJpbmtXcmFwQmxvY2tzKCl8fG4uYWx3YXlzKGZ1bmN0aW9uKCl7cC5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLHAub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0scC5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxhYy5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fFwidG9nZ2xlXCI9PT1lLGU9PT0ocT9cImhpZGVcIjpcInNob3dcIikpe2lmKFwic2hvd1wiIT09ZXx8IXJ8fHZvaWQgMD09PXJbZF0pY29udGludWU7cT0hMH1vW2RdPXImJnJbZF18fG0uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG0uaXNFbXB0eU9iamVjdChvKSlcImlubGluZVwiPT09KFwibm9uZVwiPT09aj9GYihhLm5vZGVOYW1lKTpqKSYmKHAuZGlzcGxheT1qKTtlbHNle3I/XCJoaWRkZW5cImluIHImJihxPXIuaGlkZGVuKTpyPW0uX2RhdGEoYSxcImZ4c2hvd1wiLHt9KSxmJiYoci5oaWRkZW49IXEpLHE/bShhKS5zaG93KCk6bi5kb25lKGZ1bmN0aW9uKCl7bShhKS5oaWRlKCl9KSxuLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjttLl9yZW1vdmVEYXRhKGEsXCJmeHNob3dcIik7Zm9yKGIgaW4gbyltLnN0eWxlKGEsYixvW2JdKX0pO2ZvcihkIGluIG8pZz1oYyhxP3JbZF06MCxkLG4pLGQgaW4gcnx8KHJbZF09Zy5zdGFydCxxJiYoZy5lbmQ9Zy5zdGFydCxnLnN0YXJ0PVwid2lkdGhcIj09PWR8fFwiaGVpZ2h0XCI9PT1kPzE6MCkpfX1mdW5jdGlvbiBqYyhhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPW0uY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sbS5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1tLmNzc0hvb2tzW2RdLGcmJlwiZXhwYW5kXCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24ga2MoYSxiLGMpe3ZhciBkLGUsZj0wLGc9ZGMubGVuZ3RoLGg9bS5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBpLmVsZW19KSxpPWZ1bmN0aW9uKCl7aWYoZSlyZXR1cm4hMTtmb3IodmFyIGI9JGJ8fGZjKCksYz1NYXRoLm1heCgwLGouc3RhcnRUaW1lK2ouZHVyYXRpb24tYiksZD1jL2ouZHVyYXRpb258fDAsZj0xLWQsZz0wLGk9ai50d2VlbnMubGVuZ3RoO2k+ZztnKyspai50d2VlbnNbZ10ucnVuKGYpO3JldHVybiBoLm5vdGlmeVdpdGgoYSxbaixmLGNdKSwxPmYmJmk/YzooaC5yZXNvbHZlV2l0aChhLFtqXSksITEpfSxqPWgucHJvbWlzZSh7ZWxlbTphLHByb3BzOm0uZXh0ZW5kKHt9LGIpLG9wdHM6bS5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTokYnx8ZmMoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPW0uVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7ZD5jO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/aC5yZXNvbHZlV2l0aChhLFtqLGJdKTpoLnJlamVjdFdpdGgoYSxbaixiXSksdGhpc319KSxrPWoucHJvcHM7Zm9yKGpjKGssai5vcHRzLnNwZWNpYWxFYXNpbmcpO2c+ZjtmKyspaWYoZD1kY1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIGQ7cmV0dXJuIG0ubWFwKGssaGMsaiksbS5pc0Z1bmN0aW9uKGoub3B0cy5zdGFydCkmJmoub3B0cy5zdGFydC5jYWxsKGEsaiksbS5meC50aW1lcihtLmV4dGVuZChpLHtlbGVtOmEsYW5pbTpqLHF1ZXVlOmoub3B0cy5xdWV1ZX0pKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKX1tLkFuaW1hdGlvbj1tLmV4dGVuZChrYyx7dHdlZW5lcjpmdW5jdGlvbihhLGIpe20uaXNGdW5jdGlvbihhKT8oYj1hLGE9W1wiKlwiXSk6YT1hLnNwbGl0KFwiIFwiKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyljPWFbZF0sZWNbY109ZWNbY118fFtdLGVjW2NdLnVuc2hpZnQoYil9LHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/ZGMudW5zaGlmdChhKTpkYy5wdXNoKGEpfX0pLG0uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJlwib2JqZWN0XCI9PXR5cGVvZiBhP20uZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8bS5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFtLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiBkLmR1cmF0aW9uPW0uZngub2ZmPzA6XCJudW1iZXJcIj09dHlwZW9mIGQuZHVyYXRpb24/ZC5kdXJhdGlvbjpkLmR1cmF0aW9uIGluIG0uZnguc3BlZWRzP20uZnguc3BlZWRzW2QuZHVyYXRpb25dOm0uZnguc3BlZWRzLl9kZWZhdWx0LChudWxsPT1kLnF1ZXVlfHxkLnF1ZXVlPT09ITApJiYoZC5xdWV1ZT1cImZ4XCIpLGQub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbigpe20uaXNGdW5jdGlvbihkLm9sZCkmJmQub2xkLmNhbGwodGhpcyksZC5xdWV1ZSYmbS5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSl9LGR9LG0uZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKFUpLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bS5pc0VtcHR5T2JqZWN0KGEpLGY9bS5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWtjKHRoaXMsbS5leHRlbmQoe30sYSksZik7KGV8fG0uX2RhdGEodGhpcyxcImZpbmlzaFwiKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYStcInF1ZXVlSG9va3NcIixmPW0udGltZXJzLGc9bS5fZGF0YSh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZjYy50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyhifHwhYykmJm0uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9bS5fZGF0YSh0aGlzKSxkPWNbYStcInF1ZXVlXCJdLGU9Y1thK1wicXVldWVIb29rc1wiXSxmPW0udGltZXJzLGc9ZD9kLmxlbmd0aDowO2ZvcihjLmZpbmlzaD0hMCxtLnF1ZXVlKHRoaXMsYSxbXSksZSYmZS5zdG9wJiZlLnN0b3AuY2FsbCh0aGlzLCEwKSxiPWYubGVuZ3RoO2ItLTspZltiXS5lbGVtPT09dGhpcyYmZltiXS5xdWV1ZT09PWEmJihmW2JdLmFuaW0uc3RvcCghMCksZi5zcGxpY2UoYiwxKSk7Zm9yKGI9MDtnPmI7YisrKWRbYl0mJmRbYl0uZmluaXNoJiZkW2JdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBjLmZpbmlzaH0pfX0pLG0uZWFjaChbXCJ0b2dnbGVcIixcInNob3dcIixcImhpZGVcIl0sZnVuY3Rpb24oYSxiKXt2YXIgYz1tLmZuW2JdO20uZm5bYl09ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBudWxsPT1hfHxcImJvb2xlYW5cIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKGdjKGIsITApLGEsZCxlKX19KSxtLmVhY2goe3NsaWRlRG93bjpnYyhcInNob3dcIiksc2xpZGVVcDpnYyhcImhpZGVcIiksc2xpZGVUb2dnbGU6Z2MoXCJ0b2dnbGVcIiksZmFkZUluOntvcGFjaXR5Olwic2hvd1wifSxmYWRlT3V0OntvcGFjaXR5OlwiaGlkZVwifSxmYWRlVG9nZ2xlOntvcGFjaXR5OlwidG9nZ2xlXCJ9fSxmdW5jdGlvbihhLGIpe20uZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksbS50aW1lcnM9W10sbS5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj1tLnRpbWVycyxjPTA7Zm9yKCRiPW0ubm93KCk7YzxiLmxlbmd0aDtjKyspYT1iW2NdLGEoKXx8YltjXSE9PWF8fGIuc3BsaWNlKGMtLSwxKTtiLmxlbmd0aHx8bS5meC5zdG9wKCksJGI9dm9pZCAwfSxtLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe20udGltZXJzLnB1c2goYSksYSgpP20uZnguc3RhcnQoKTptLnRpbWVycy5wb3AoKX0sbS5meC5pbnRlcnZhbD0xMyxtLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7X2J8fChfYj1zZXRJbnRlcnZhbChtLmZ4LnRpY2ssbS5meC5pbnRlcnZhbCkpfSxtLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKF9iKSxfYj1udWxsfSxtLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxtLmZuLmRlbGF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bS5meD9tLmZ4LnNwZWVkc1thXXx8YTphLGI9Ynx8XCJmeFwiLHRoaXMucXVldWUoYixmdW5jdGlvbihiLGMpe3ZhciBkPXNldFRpbWVvdXQoYixhKTtjLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZCl9fSl9LGZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZTtiPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxiLnNldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiLFwidFwiKSxiLmlubmVySFRNTD1cIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPlwiLGQ9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImFcIilbMF0sYz15LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksZT1jLmFwcGVuZENoaWxkKHkuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSksYT1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0sZC5zdHlsZS5jc3NUZXh0PVwidG9wOjFweFwiLGsuZ2V0U2V0QXR0cmlidXRlPVwidFwiIT09Yi5jbGFzc05hbWUsay5zdHlsZT0vdG9wLy50ZXN0KGQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikpLGsuaHJlZk5vcm1hbGl6ZWQ9XCIvYVwiPT09ZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpLGsuY2hlY2tPbj0hIWEudmFsdWUsay5vcHRTZWxlY3RlZD1lLnNlbGVjdGVkLGsuZW5jdHlwZT0hIXkuY3JlYXRlRWxlbWVudChcImZvcm1cIikuZW5jdHlwZSxjLmRpc2FibGVkPSEwLGsub3B0RGlzYWJsZWQ9IWUuZGlzYWJsZWQsYT15LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIiksay5pbnB1dD1cIlwiPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxhLnZhbHVlPVwidFwiLGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksay5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZX0oKTt2YXIgbGM9L1xcci9nO20uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1tLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbSh0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOm0uaXNBcnJheShlKSYmKGU9bS5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPW0udmFsSG9va3NbdGhpcy50eXBlXXx8bS52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1tLnZhbEhvb2tzW2UudHlwZV18fG0udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGxjLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksbS5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1tLmZpbmQuYXR0cihhLFwidmFsdWVcIik7cmV0dXJuIG51bGwhPWI/YjptLnRyaW0obS50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9XCJzZWxlY3Qtb25lXCI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sISghYy5zZWxlY3RlZCYmaSE9PWV8fChrLm9wdERpc2FibGVkP2MuZGlzYWJsZWQ6bnVsbCE9PWMuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikpfHxjLnBhcmVudE5vZGUuZGlzYWJsZWQmJm0ubm9kZU5hbWUoYy5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZihiPW0oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1tLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlpZihkPWVbZ10sbS5pbkFycmF5KG0udmFsSG9va3Mub3B0aW9uLmdldChkKSxmKT49MCl0cnl7ZC5zZWxlY3RlZD1jPSEwfWNhdGNoKGgpe2Quc2Nyb2xsSGVpZ2h0fWVsc2UgZC5zZWxlY3RlZD0hMTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZX19fX0pLG0uZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXttLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbS5pc0FycmF5KGIpP2EuY2hlY2tlZD1tLmluQXJyYXkobShhKS52YWwoKSxiKT49MDp2b2lkIDB9fSxrLmNoZWNrT258fChtLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik/XCJvblwiOmEudmFsdWV9KX0pO3ZhciBtYyxuYyxvYz1tLmV4cHIuYXR0ckhhbmRsZSxwYz0vXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLHFjPWsuZ2V0U2V0QXR0cmlidXRlLHJjPWsuaW5wdXQ7bS5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVih0aGlzLG0uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxtLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09Sz9tLnByb3AoYSxiLGMpOigxPT09ZiYmbS5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bS5hdHRySG9va3NbYl18fChtLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP25jOm1jKSksdm9pZCAwPT09Yz9kJiZcImdldFwiaW4gZCYmbnVsbCE9PShlPWQuZ2V0KGEsYikpP2U6KGU9bS5maW5kLmF0dHIoYSxiKSxudWxsPT1lP3ZvaWQgMDplKTpudWxsIT09Yz9kJiZcInNldFwiaW4gZCYmdm9pZCAwIT09KGU9ZC5zZXQoYSxjLGIpKT9lOihhLnNldEF0dHJpYnV0ZShiLGMrXCJcIiksYyk6dm9pZCBtLnJlbW92ZUF0dHIoYSxiKSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9MCxmPWImJmIubWF0Y2goRSk7aWYoZiYmMT09PWEubm9kZVR5cGUpd2hpbGUoYz1mW2UrK10pZD1tLnByb3BGaXhbY118fGMsbS5leHByLm1hdGNoLmJvb2wudGVzdChjKT9yYyYmcWN8fCFwYy50ZXN0KGMpP2FbZF09ITE6YVttLmNhbWVsQ2FzZShcImRlZmF1bHQtXCIrYyldPWFbZF09ITE6bS5hdHRyKGEsYyxcIlwiKSxhLnJlbW92ZUF0dHJpYnV0ZShxYz9jOmQpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFrLnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PWImJm0ubm9kZU5hbWUoYSxcImlucHV0XCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZShcInR5cGVcIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fX0pLG5jPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bS5yZW1vdmVBdHRyKGEsYyk6cmMmJnFjfHwhcGMudGVzdChjKT9hLnNldEF0dHJpYnV0ZSghcWMmJm0ucHJvcEZpeFtjXXx8YyxjKTphW20uY2FtZWxDYXNlKFwiZGVmYXVsdC1cIitjKV09YVtjXT0hMCxjfX0sbS5lYWNoKG0uZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXFx3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPW9jW2JdfHxtLmZpbmQuYXR0cjtvY1tiXT1yYyYmcWN8fCFwYy50ZXN0KGIpP2Z1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj1vY1tiXSxvY1tiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsb2NbYl09ZiksZX06ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphW20uY2FtZWxDYXNlKFwiZGVmYXVsdC1cIitiKV0/Yi50b0xvd2VyQ2FzZSgpOm51bGx9fSkscmMmJnFjfHwobS5hdHRySG9va3MudmFsdWU9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0ubm9kZU5hbWUoYSxcImlucHV0XCIpP3ZvaWQoYS5kZWZhdWx0VmFsdWU9Yik6bWMmJm1jLnNldChhLGIsYyl9fSkscWN8fChtYz17c2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmdldEF0dHJpYnV0ZU5vZGUoYyk7cmV0dXJuIGR8fGEuc2V0QXR0cmlidXRlTm9kZShkPWEub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoYykpLGQudmFsdWU9Yis9XCJcIixcInZhbHVlXCI9PT1jfHxiPT09YS5nZXRBdHRyaWJ1dGUoYyk/Yjp2b2lkIDB9fSxvYy5pZD1vYy5uYW1lPW9jLmNvb3Jkcz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJlwiXCIhPT1kLnZhbHVlP2QudmFsdWU6bnVsbH0sbS52YWxIb29rcy5idXR0b249e2dldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlTm9kZShiKTtyZXR1cm4gYyYmYy5zcGVjaWZpZWQ/Yy52YWx1ZTp2b2lkIDB9LHNldDptYy5zZXR9LG0uYXR0ckhvb2tzLmNvbnRlbnRlZGl0YWJsZT17c2V0OmZ1bmN0aW9uKGEsYixjKXttYy5zZXQoYSxcIlwiPT09Yj8hMTpiLGMpfX0sbS5lYWNoKFtcIndpZHRoXCIsXCJoZWlnaHRcIl0sZnVuY3Rpb24oYSxiKXttLmF0dHJIb29rc1tiXT17c2V0OmZ1bmN0aW9uKGEsYyl7cmV0dXJuXCJcIj09PWM/KGEuc2V0QXR0cmlidXRlKGIsXCJhdXRvXCIpLGMpOnZvaWQgMH19fSkpLGsuc3R5bGV8fChtLmF0dHJIb29rcy5zdHlsZT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0eWxlLmNzc1RleHR8fHZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc3R5bGUuY3NzVGV4dD1iK1wiXCJ9fSk7dmFyIHNjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QpJC9pLHRjPS9eKD86YXxhcmVhKSQvaTttLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIpe3JldHVybiBWKHRoaXMsbS5wcm9wLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiBhPW0ucHJvcEZpeFthXXx8YSx0aGlzLmVhY2goZnVuY3Rpb24oKXt0cnl7dGhpc1thXT12b2lkIDAsZGVsZXRlIHRoaXNbYV19Y2F0Y2goYil7fX0pfX0pLG0uZXh0ZW5kKHtwcm9wRml4OntcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwifSxwcm9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZz1hLm5vZGVUeXBlO2lmKGEmJjMhPT1nJiY4IT09ZyYmMiE9PWcpcmV0dXJuIGY9MSE9PWd8fCFtLmlzWE1MRG9jKGEpLGYmJihiPW0ucHJvcEZpeFtiXXx8YixlPW0ucHJvcEhvb2tzW2JdKSx2b2lkIDAhPT1jP2UmJlwic2V0XCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6YVtiXT1jOmUmJlwiZ2V0XCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bS5maW5kLmF0dHIoYSxcInRhYmluZGV4XCIpO3JldHVybiBiP3BhcnNlSW50KGIsMTApOnNjLnRlc3QoYS5ub2RlTmFtZSl8fHRjLnRlc3QoYS5ub2RlTmFtZSkmJmEuaHJlZj8wOi0xfX19fSksay5ocmVmTm9ybWFsaXplZHx8bS5lYWNoKFtcImhyZWZcIixcInNyY1wiXSxmdW5jdGlvbihhLGIpe20ucHJvcEhvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKGIsNCl9fX0pLGsub3B0U2VsZWN0ZWR8fChtLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmKGIuc2VsZWN0ZWRJbmRleCxiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KSxudWxsfX0pLG0uZWFjaChbXCJ0YWJJbmRleFwiLFwicmVhZE9ubHlcIixcIm1heExlbmd0aFwiLFwiY2VsbFNwYWNpbmdcIixcImNlbGxQYWRkaW5nXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCIsXCJ1c2VNYXBcIixcImZyYW1lQm9yZGVyXCIsXCJjb250ZW50RWRpdGFibGVcIl0sZnVuY3Rpb24oKXttLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSksay5lbmN0eXBlfHwobS5wcm9wRml4LmVuY3R5cGU9XCJlbmNvZGluZ1wiKTt2YXIgdWM9L1tcXHRcXHJcXG5cXGZdL2c7bS5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPTAsaT10aGlzLmxlbmd0aCxqPVwic3RyaW5nXCI9PXR5cGVvZiBhJiZhO2lmKG0uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe20odGhpcykuYWRkQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoailmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2k+aDtoKyspaWYoYz10aGlzW2hdLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UodWMsXCIgXCIpOlwiIFwiKSl7Zj0wO3doaWxlKGU9YltmKytdKWQuaW5kZXhPZihcIiBcIitlK1wiIFwiKTwwJiYoZCs9ZStcIiBcIik7Zz1tLnRyaW0oZCksYy5jbGFzc05hbWUhPT1nJiYoYy5jbGFzc05hbWU9Zyl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPTAsaT10aGlzLmxlbmd0aCxqPTA9PT1hcmd1bWVudHMubGVuZ3RofHxcInN0cmluZ1wiPT10eXBlb2YgYSYmYTtpZihtLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXttKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGopZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtpPmg7aCsrKWlmKGM9dGhpc1toXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKHVjLFwiIFwiKTpcIlwiKSl7Zj0wO3doaWxlKGU9YltmKytdKXdoaWxlKGQuaW5kZXhPZihcIiBcIitlK1wiIFwiKT49MClkPWQucmVwbGFjZShcIiBcIitlK1wiIFwiLFwiIFwiKTtnPWE/bS50cmltKGQpOlwiXCIsYy5jbGFzc05hbWUhPT1nJiYoYy5jbGFzc05hbWU9Zyl9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBiJiZcInN0cmluZ1wiPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTp0aGlzLmVhY2gobS5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGMpe20odGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyx0aGlzLmNsYXNzTmFtZSxiKSxiKX06ZnVuY3Rpb24oKXtpZihcInN0cmluZ1wiPT09Yyl7dmFyIGIsZD0wLGU9bSh0aGlzKSxmPWEubWF0Y2goRSl8fFtdO3doaWxlKGI9ZltkKytdKWUuaGFzQ2xhc3MoYik/ZS5yZW1vdmVDbGFzcyhiKTplLmFkZENsYXNzKGIpfWVsc2UoYz09PUt8fFwiYm9vbGVhblwiPT09YykmJih0aGlzLmNsYXNzTmFtZSYmbS5fZGF0YSh0aGlzLFwiX19jbGFzc05hbWVfX1wiLHRoaXMuY2xhc3NOYW1lKSx0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8YT09PSExP1wiXCI6bS5fZGF0YSh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVwiIFwiK2ErXCIgXCIsYz0wLGQ9dGhpcy5sZW5ndGg7ZD5jO2MrKylpZigxPT09dGhpc1tjXS5ub2RlVHlwZSYmKFwiIFwiK3RoaXNbY10uY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKHVjLFwiIFwiKS5pbmRleE9mKGIpPj0wKXJldHVybiEwO3JldHVybiExfX0pLG0uZWFjaChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXttLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxtLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsXCIqKlwiKTp0aGlzLm9mZihiLGF8fFwiKipcIixjKX19KTt2YXIgdmM9bS5ub3coKSx3Yz0vXFw/Lyx4Yz0vKCwpfChcXFt8eyl8KH18XSl8XCIoPzpbXlwiXFxcXFxcclxcbl18XFxcXFtcIlxcXFxcXC9iZm5ydF18XFxcXHVbXFxkYS1mQS1GXXs0fSkqXCJcXHMqOj98dHJ1ZXxmYWxzZXxudWxsfC0/KD8hMFxcZClcXGQrKD86XFwuXFxkK3wpKD86W2VFXVsrLV0/XFxkK3wpL2c7bS5wYXJzZUpTT049ZnVuY3Rpb24oYil7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiK1wiXCIpO3ZhciBjLGQ9bnVsbCxlPW0udHJpbShiK1wiXCIpO3JldHVybiBlJiYhbS50cmltKGUucmVwbGFjZSh4YyxmdW5jdGlvbihhLGIsZSxmKXtyZXR1cm4gYyYmYiYmKGQ9MCksMD09PWQ/YTooYz1lfHxiLGQrPSFmLSFlLFwiXCIpfSkpP0Z1bmN0aW9uKFwicmV0dXJuIFwiK2UpKCk6bS5lcnJvcihcIkludmFsaWQgSlNPTjogXCIrYil9LG0ucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGMsZDtpZighYnx8XCJzdHJpbmdcIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2EuRE9NUGFyc2VyPyhkPW5ldyBET01QYXJzZXIsYz1kLnBhcnNlRnJvbVN0cmluZyhiLFwidGV4dC94bWxcIikpOihjPW5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTERPTVwiKSxjLmFzeW5jPVwiZmFsc2VcIixjLmxvYWRYTUwoYikpfWNhdGNoKGUpe2M9dm9pZCAwfXJldHVybiBjJiZjLmRvY3VtZW50RWxlbWVudCYmIWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGh8fG0uZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIrYiksY307dmFyIHljLHpjLEFjPS8jLiokLyxCYz0vKFs/Jl0pXz1bXiZdKi8sQ2M9L14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopXFxyPyQvZ20sRGM9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sRWM9L14oPzpHRVR8SEVBRCkkLyxGYz0vXlxcL1xcLy8sR2M9L14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sSGM9e30sSWM9e30sSmM9XCIqL1wiLmNvbmNhdChcIipcIik7dHJ5e3pjPWxvY2F0aW9uLmhyZWZ9Y2F0Y2goS2Mpe3pjPXkuY3JlYXRlRWxlbWVudChcImFcIiksemMuaHJlZj1cIlwiLHpjPXpjLmhyZWZ9eWM9R2MuZXhlYyh6Yy50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gTGMoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWIsYj1cIipcIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihtLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pXCIrXCI9PT1kLmNoYXJBdCgwKT8oZD1kLnNsaWNlKDEpfHxcIipcIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIE1jKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PUljO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsbS5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlW1wiKlwiXSYmZyhcIipcIil9ZnVuY3Rpb24gTmMoYSxiKXt2YXIgYyxkLGU9bS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihkIGluIGIpdm9pZCAwIT09YltkXSYmKChlW2RdP2E6Y3x8KGM9e30pKVtkXT1iW2RdKTtyZXR1cm4gYyYmbS5leHRlbmQoITAsYSxjKSxhfWZ1bmN0aW9uIE9jKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZShcIipcIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKGUpZm9yKGcgaW4gaClpZihoW2ddJiZoW2ddLnRlc3QoZSkpe2kudW5zaGlmdChnKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZyBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2crXCIgXCIraVswXV0pe2Y9ZzticmVha31kfHwoZD1nKX1mPWZ8fGR9cmV0dXJuIGY/KGYhPT1pWzBdJiZpLnVuc2hpZnQoZiksY1tmXSk6dm9pZCAwfWZ1bmN0aW9uIFBjKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoXCIqXCI9PT1mKWY9aTtlbHNlIGlmKFwiKlwiIT09aSYmaSE9PWYpe2lmKGc9altpK1wiIFwiK2ZdfHxqW1wiKiBcIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdChcIiBcIiksaFsxXT09PWYmJihnPWpbaStcIiBcIitoWzBdXXx8altcIiogXCIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhW1widGhyb3dzXCJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjpnP2w6XCJObyBjb252ZXJzaW9uIGZyb20gXCIraStcIiB0byBcIitmfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6Yn19bS5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOnpjLHR5cGU6XCJHRVRcIixpc0xvY2FsOkRjLnRlc3QoeWNbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOkpjLHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIixqc29uOlwicmVzcG9uc2VKU09OXCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6U3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjptLnBhcnNlSlNPTixcInRleHQgeG1sXCI6bS5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/TmMoTmMoYSxtLmFqYXhTZXR0aW5ncyksYik6TmMobS5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6TGMoSGMpLGFqYXhUcmFuc3BvcnQ6TGMoSWMpLGFqYXg6ZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYj1ifHx7fTt2YXIgYyxkLGUsZixnLGgsaSxqLGs9bS5hamF4U2V0dXAoe30sYiksbD1rLmNvbnRleHR8fGssbj1rLmNvbnRleHQmJihsLm5vZGVUeXBlfHxsLmpxdWVyeSk/bShsKTptLmV2ZW50LG89bS5EZWZlcnJlZCgpLHA9bS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxxPWsuc3RhdHVzQ29kZXx8e30scj17fSxzPXt9LHQ9MCx1PVwiY2FuY2VsZWRcIix2PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoMj09PXQpe2lmKCFqKXtqPXt9O3doaWxlKGI9Q2MuZXhlYyhmKSlqW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWpbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dD9mOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHR8fChhPXNbY109c1tjXXx8YSxyW2FdPWIpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHR8fChrLm1pbWVUeXBlPWEpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYSlpZigyPnQpZm9yKGIgaW4gYSlxW2JdPVtxW2JdLGFbYl1dO2Vsc2Ugdi5hbHdheXMoYVt2LnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx1O3JldHVybiBpJiZpLmFib3J0KGIpLHgoMCxiKSx0aGlzfX07aWYoby5wcm9taXNlKHYpLmNvbXBsZXRlPXAuYWRkLHYuc3VjY2Vzcz12LmRvbmUsdi5lcnJvcj12LmZhaWwsay51cmw9KChhfHxrLnVybHx8emMpK1wiXCIpLnJlcGxhY2UoQWMsXCJcIikucmVwbGFjZShGYyx5Y1sxXStcIi8vXCIpLGsudHlwZT1iLm1ldGhvZHx8Yi50eXBlfHxrLm1ldGhvZHx8ay50eXBlLGsuZGF0YVR5cGVzPW0udHJpbShrLmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W1wiXCJdLG51bGw9PWsuY3Jvc3NEb21haW4mJihjPUdjLmV4ZWMoay51cmwudG9Mb3dlckNhc2UoKSksay5jcm9zc0RvbWFpbj0hKCFjfHxjWzFdPT09eWNbMV0mJmNbMl09PT15Y1syXSYmKGNbM118fChcImh0dHA6XCI9PT1jWzFdP1wiODBcIjpcIjQ0M1wiKSk9PT0oeWNbM118fChcImh0dHA6XCI9PT15Y1sxXT9cIjgwXCI6XCI0NDNcIikpKSksay5kYXRhJiZrLnByb2Nlc3NEYXRhJiZcInN0cmluZ1wiIT10eXBlb2Ygay5kYXRhJiYoay5kYXRhPW0ucGFyYW0oay5kYXRhLGsudHJhZGl0aW9uYWwpKSxNYyhIYyxrLGIsdiksMj09PXQpcmV0dXJuIHY7aD1rLmdsb2JhbCxoJiYwPT09bS5hY3RpdmUrKyYmbS5ldmVudC50cmlnZ2VyKFwiYWpheFN0YXJ0XCIpLGsudHlwZT1rLnR5cGUudG9VcHBlckNhc2UoKSxrLmhhc0NvbnRlbnQ9IUVjLnRlc3Qoay50eXBlKSxlPWsudXJsLGsuaGFzQ29udGVudHx8KGsuZGF0YSYmKGU9ay51cmwrPSh3Yy50ZXN0KGUpP1wiJlwiOlwiP1wiKStrLmRhdGEsZGVsZXRlIGsuZGF0YSksay5jYWNoZT09PSExJiYoay51cmw9QmMudGVzdChlKT9lLnJlcGxhY2UoQmMsXCIkMV89XCIrdmMrKyk6ZSsod2MudGVzdChlKT9cIiZcIjpcIj9cIikrXCJfPVwiK3ZjKyspKSxrLmlmTW9kaWZpZWQmJihtLmxhc3RNb2RpZmllZFtlXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTW9kaWZpZWQtU2luY2VcIixtLmxhc3RNb2RpZmllZFtlXSksbS5ldGFnW2VdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Ob25lLU1hdGNoXCIsbS5ldGFnW2VdKSksKGsuZGF0YSYmay5oYXNDb250ZW50JiZrLmNvbnRlbnRUeXBlIT09ITF8fGIuY29udGVudFR5cGUpJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixrLmNvbnRlbnRUeXBlKSx2LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixrLmRhdGFUeXBlc1swXSYmay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXT9rLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dKyhcIipcIiE9PWsuZGF0YVR5cGVzWzBdP1wiLCBcIitKYytcIjsgcT0wLjAxXCI6XCJcIik6ay5hY2NlcHRzW1wiKlwiXSk7Zm9yKGQgaW4gay5oZWFkZXJzKXYuc2V0UmVxdWVzdEhlYWRlcihkLGsuaGVhZGVyc1tkXSk7aWYoay5iZWZvcmVTZW5kJiYoay5iZWZvcmVTZW5kLmNhbGwobCx2LGspPT09ITF8fDI9PT10KSlyZXR1cm4gdi5hYm9ydCgpO3U9XCJhYm9ydFwiO2ZvcihkIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXZbZF0oa1tkXSk7aWYoaT1NYyhJYyxrLGIsdikpe3YucmVhZHlTdGF0ZT0xLGgmJm4udHJpZ2dlcihcImFqYXhTZW5kXCIsW3Ysa10pLGsuYXN5bmMmJmsudGltZW91dD4wJiYoZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7di5hYm9ydChcInRpbWVvdXRcIil9LGsudGltZW91dCkpO3RyeXt0PTEsaS5zZW5kKHIseCl9Y2F0Y2godyl7aWYoISgyPnQpKXRocm93IHc7eCgtMSx3KX19ZWxzZSB4KC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIHgoYSxiLGMsZCl7dmFyIGoscixzLHUsdyx4PWI7MiE9PXQmJih0PTIsZyYmY2xlYXJUaW1lb3V0KGcpLGk9dm9pZCAwLGY9ZHx8XCJcIix2LnJlYWR5U3RhdGU9YT4wPzQ6MCxqPWE+PTIwMCYmMzAwPmF8fDMwND09PWEsYyYmKHU9T2Moayx2LGMpKSx1PVBjKGssdSx2LGopLGo/KGsuaWZNb2RpZmllZCYmKHc9di5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIiksdyYmKG0ubGFzdE1vZGlmaWVkW2VdPXcpLHc9di5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIiksdyYmKG0uZXRhZ1tlXT13KSksMjA0PT09YXx8XCJIRUFEXCI9PT1rLnR5cGU/eD1cIm5vY29udGVudFwiOjMwND09PWE/eD1cIm5vdG1vZGlmaWVkXCI6KHg9dS5zdGF0ZSxyPXUuZGF0YSxzPXUuZXJyb3Isaj0hcykpOihzPXgsKGF8fCF4KSYmKHg9XCJlcnJvclwiLDA+YSYmKGE9MCkpKSx2LnN0YXR1cz1hLHYuc3RhdHVzVGV4dD0oYnx8eCkrXCJcIixqP28ucmVzb2x2ZVdpdGgobCxbcix4LHZdKTpvLnJlamVjdFdpdGgobCxbdix4LHNdKSx2LnN0YXR1c0NvZGUocSkscT12b2lkIDAsaCYmbi50cmlnZ2VyKGo/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW3YsayxqP3I6c10pLHAuZmlyZVdpdGgobCxbdix4XSksaCYmKG4udHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt2LGtdKSwtLW0uYWN0aXZlfHxtLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiB2fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5nZXQoYSxiLGMsXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbS5nZXQoYSx2b2lkIDAsYixcInNjcmlwdFwiKX19KSxtLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGEsYil7bVtiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbS5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbS5hamF4KHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSl9fSksbS5lYWNoKFtcImFqYXhTdGFydFwiLFwiYWpheFN0b3BcIixcImFqYXhDb21wbGV0ZVwiLFwiYWpheEVycm9yXCIsXCJhamF4U3VjY2Vzc1wiLFwiYWpheFNlbmRcIl0sZnVuY3Rpb24oYSxiKXttLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbS5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbS5hamF4KHt1cmw6YSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pfSxtLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihtLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXttKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk7aWYodGhpc1swXSl7dmFyIGI9bShhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RDaGlsZCYmMT09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSlhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2gobS5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGIpe20odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX06ZnVuY3Rpb24oKXt2YXIgYj1tKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPW0uaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe20odGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXttLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxtKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxtLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wfHwhay5yZWxpYWJsZUhpZGRlbk9mZnNldHMoKSYmXCJub25lXCI9PT0oYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxtLmNzcyhhLFwiZGlzcGxheVwiKSl9LG0uZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIW0uZXhwci5maWx0ZXJzLmhpZGRlbihhKX07dmFyIFFjPS8lMjAvZyxSYz0vXFxbXFxdJC8sU2M9L1xccj9cXG4vZyxUYz0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksVWM9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIFZjKGEsYixjLGQpe3ZhciBlO2lmKG0uaXNBcnJheShiKSltLmVhY2goYixmdW5jdGlvbihiLGUpe2N8fFJjLnRlc3QoYSk/ZChhLGUpOlZjKGErXCJbXCIrKFwib2JqZWN0XCI9PXR5cGVvZiBlP2I6XCJcIikrXCJdXCIsZSxjLGQpfSk7ZWxzZSBpZihjfHxcIm9iamVjdFwiIT09bS50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpVmMoYStcIltcIitlK1wiXVwiLGJbZV0sYyxkKX1tLnBhcmFtPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPWZ1bmN0aW9uKGEsYil7Yj1tLmlzRnVuY3Rpb24oYik/YigpOm51bGw9PWI/XCJcIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoYil9O2lmKHZvaWQgMD09PWImJihiPW0uYWpheFNldHRpbmdzJiZtLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksbS5pc0FycmF5KGEpfHxhLmpxdWVyeSYmIW0uaXNQbGFpbk9iamVjdChhKSltLmVhY2goYSxmdW5jdGlvbigpe2UodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IoYyBpbiBhKVZjKGMsYVtjXSxiLGUpO3JldHVybiBkLmpvaW4oXCImXCIpLnJlcGxhY2UoUWMsXCIrXCIpfSxtLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG0ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1tLnByb3AodGhpcyxcImVsZW1lbnRzXCIpO3JldHVybiBhP20ubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIW0odGhpcykuaXMoXCI6ZGlzYWJsZWRcIikmJlVjLnRlc3QodGhpcy5ub2RlTmFtZSkmJiFUYy50ZXN0KGEpJiYodGhpcy5jaGVja2VkfHwhVy50ZXN0KGEpKX0pLm1hcChmdW5jdGlvbihhLGIpe3ZhciBjPW0odGhpcykudmFsKCk7cmV0dXJuIG51bGw9PWM/bnVsbDptLmlzQXJyYXkoYyk/bS5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKFNjLFwiXFxyXFxuXCIpfX0pOntuYW1lOmIubmFtZSx2YWx1ZTpjLnJlcGxhY2UoU2MsXCJcXHJcXG5cIil9fSkuZ2V0KCl9fSksbS5hamF4U2V0dGluZ3MueGhyPXZvaWQgMCE9PWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzTG9jYWwmJi9eKGdldHxwb3N0fGhlYWR8cHV0fGRlbGV0ZXxvcHRpb25zKSQvaS50ZXN0KHRoaXMudHlwZSkmJlpjKCl8fCRjKCl9OlpjO3ZhciBXYz0wLFhjPXt9LFljPW0uYWpheFNldHRpbmdzLnhocigpO2EuQWN0aXZlWE9iamVjdCYmbShhKS5vbihcInVubG9hZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIFhjKVhjW2FdKHZvaWQgMCwhMCl9KSxrLmNvcnM9ISFZYyYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIFljLFljPWsuYWpheD0hIVljLFljJiZtLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYSl7aWYoIWEuY3Jvc3NEb21haW58fGsuY29ycyl7dmFyIGI7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEueGhyKCksZz0rK1djO2lmKGYub3BlbihhLnR5cGUsYS51cmwsYS5hc3luYyxhLnVzZXJuYW1lLGEucGFzc3dvcmQpLGEueGhyRmllbGRzKWZvcihlIGluIGEueGhyRmllbGRzKWZbZV09YS54aHJGaWVsZHNbZV07YS5taW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUoYS5taW1lVHlwZSksYS5jcm9zc0RvbWFpbnx8Y1tcIlgtUmVxdWVzdGVkLVdpdGhcIl18fChjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpO2ZvcihlIGluIGMpdm9pZCAwIT09Y1tlXSYmZi5zZXRSZXF1ZXN0SGVhZGVyKGUsY1tlXStcIlwiKTtmLnNlbmQoYS5oYXNDb250ZW50JiZhLmRhdGF8fG51bGwpLGI9ZnVuY3Rpb24oYyxlKXt2YXIgaCxpLGo7aWYoYiYmKGV8fDQ9PT1mLnJlYWR5U3RhdGUpKWlmKGRlbGV0ZSBYY1tnXSxiPXZvaWQgMCxmLm9ucmVhZHlzdGF0ZWNoYW5nZT1tLm5vb3AsZSk0IT09Zi5yZWFkeVN0YXRlJiZmLmFib3J0KCk7ZWxzZXtqPXt9LGg9Zi5zdGF0dXMsXCJzdHJpbmdcIj09dHlwZW9mIGYucmVzcG9uc2VUZXh0JiYoai50ZXh0PWYucmVzcG9uc2VUZXh0KTt0cnl7aT1mLnN0YXR1c1RleHR9Y2F0Y2goayl7aT1cIlwifWh8fCFhLmlzTG9jYWx8fGEuY3Jvc3NEb21haW4/MTIyMz09PWgmJihoPTIwNCk6aD1qLnRleHQ/MjAwOjQwNH1qJiZkKGgsaSxqLGYuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpfSxhLmFzeW5jPzQ9PT1mLnJlYWR5U3RhdGU/c2V0VGltZW91dChiKTpmLm9ucmVhZHlzdGF0ZWNoYW5nZT1YY1tnXT1iOmIoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtiJiZiKHZvaWQgMCwhMCl9fX19KTtmdW5jdGlvbiBaYygpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX1mdW5jdGlvbiAkYygpe3RyeXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfWNhdGNoKGIpe319bS5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIG0uZ2xvYmFsRXZhbChhKSxhfX19KSxtLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihhKXt2b2lkIDA9PT1hLmNhY2hlJiYoYS5jYWNoZT0hMSksYS5jcm9zc0RvbWFpbiYmKGEudHlwZT1cIkdFVFwiLGEuZ2xvYmFsPSExKX0pLG0uYWpheFRyYW5zcG9ydChcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM9eS5oZWFkfHxtKFwiaGVhZFwiKVswXXx8eS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZCxlKXtiPXkuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxlKDIwMCxcInN1Y2Nlc3NcIikpfSxjLmluc2VydEJlZm9yZShiLGMuZmlyc3RDaGlsZCl9LGFib3J0OmZ1bmN0aW9uKCl7YiYmYi5vbmxvYWQodm9pZCAwLCEwKX19fX0pO3ZhciBfYz1bXSxhZD0vKD0pXFw/KD89JnwkKXxcXD9cXD8vO20uYWpheFNldHVwKHtqc29ucDpcImNhbGxiYWNrXCIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPV9jLnBvcCgpfHxtLmV4cGFuZG8rXCJfXCIrdmMrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG0uYWpheFByZWZpbHRlcihcImpzb24ganNvbnBcIixmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGg9Yi5qc29ucCE9PSExJiYoYWQudGVzdChiLnVybCk/XCJ1cmxcIjpcInN0cmluZ1wiPT10eXBlb2YgYi5kYXRhJiYhKGIuY29udGVudFR5cGV8fFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikmJmFkLnRlc3QoYi5kYXRhKSYmXCJkYXRhXCIpO3JldHVybiBofHxcImpzb25wXCI9PT1iLmRhdGFUeXBlc1swXT8oZT1iLmpzb25wQ2FsbGJhY2s9bS5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoYWQsXCIkMVwiK2UpOmIuanNvbnAhPT0hMSYmKGIudXJsKz0od2MudGVzdChiLnVybCk/XCImXCI6XCI/XCIpK2IuanNvbnArXCI9XCIrZSksYi5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bS5lcnJvcihlK1wiIHdhcyBub3QgY2FsbGVkXCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPVwianNvblwiLGY9YVtlXSxhW2VdPWZ1bmN0aW9uKCl7Zz1hcmd1bWVudHN9LGQuYWx3YXlzKGZ1bmN0aW9uKCl7YVtlXT1mLGJbZV0mJihiLmpzb25wQ2FsbGJhY2s9Yy5qc29ucENhbGxiYWNrLF9jLnB1c2goZSkpLGcmJm0uaXNGdW5jdGlvbihmKSYmZihnWzBdKSxnPWY9dm9pZCAwfSksXCJzY3JpcHRcIik6dm9pZCAwfSksbS5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gbnVsbDtcImJvb2xlYW5cIj09dHlwZW9mIGImJihjPWIsYj0hMSksYj1ifHx5O3ZhciBkPXUuZXhlYyhhKSxlPSFjJiZbXTtyZXR1cm4gZD9bYi5jcmVhdGVFbGVtZW50KGRbMV0pXTooZD1tLmJ1aWxkRnJhZ21lbnQoW2FdLGIsZSksZSYmZS5sZW5ndGgmJm0oZSkucmVtb3ZlKCksbS5tZXJnZShbXSxkLmNoaWxkTm9kZXMpKX07dmFyIGJkPW0uZm4ubG9hZDttLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhJiZiZClyZXR1cm4gYmQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoXCIgXCIpO3JldHVybiBoPj0wJiYoZD1tLnRyaW0oYS5zbGljZShoLGEubGVuZ3RoKSksYT1hLnNsaWNlKDAsaCkpLG0uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiZcIm9iamVjdFwiPT10eXBlb2YgYiYmKGY9XCJQT1NUXCIpLGcubGVuZ3RoPjAmJm0uYWpheCh7dXJsOmEsdHlwZTpmLGRhdGFUeXBlOlwiaHRtbFwiLGRhdGE6Yn0pLmRvbmUoZnVuY3Rpb24oYSl7ZT1hcmd1bWVudHMsZy5odG1sKGQ/bShcIjxkaXY+XCIpLmFwcGVuZChtLnBhcnNlSFRNTChhKSkuZmluZChkKTphKX0pLmNvbXBsZXRlKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGMsZXx8W2EucmVzcG9uc2VUZXh0LGIsYV0pfSksdGhpc30sbS5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uZ3JlcChtLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07dmFyIGNkPWEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2Z1bmN0aW9uIGRkKGEpe3JldHVybiBtLmlzV2luZG93KGEpP2E6OT09PWEubm9kZVR5cGU/YS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3c6ITF9bS5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1tLmNzcyhhLFwicG9zaXRpb25cIiksbD1tKGEpLG49e307XCJzdGF0aWNcIj09PWsmJihhLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksaD1sLm9mZnNldCgpLGY9bS5jc3MoYSxcInRvcFwiKSxpPW0uY3NzKGEsXCJsZWZ0XCIpLGo9KFwiYWJzb2x1dGVcIj09PWt8fFwiZml4ZWRcIj09PWspJiZtLmluQXJyYXkoXCJhdXRvXCIsW2YsaV0pPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxtLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsaCkpLG51bGwhPWIudG9wJiYobi50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobi5sZWZ0PWIubGVmdC1oLmxlZnQrZSksXCJ1c2luZ1wiaW4gYj9iLnVzaW5nLmNhbGwoYSxuKTpsLmNzcyhuKX19LG0uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXttLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXt0b3A6MCxsZWZ0OjB9LGU9dGhpc1swXSxmPWUmJmUub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG0uY29udGFpbnMoYixlKT8odHlwZW9mIGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09SyYmKGQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1kZChmKSx7dG9wOmQudG9wKyhjLnBhZ2VZT2Zmc2V0fHxiLnNjcm9sbFRvcCktKGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoYy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0KS0oYi5jbGllbnRMZWZ0fHwwKX0pOmR9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXt0b3A6MCxsZWZ0OjB9LGQ9dGhpc1swXTtyZXR1cm5cImZpeGVkXCI9PT1tLmNzcyhkLFwicG9zaXRpb25cIik/Yj1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG0ubm9kZU5hbWUoYVswXSxcImh0bWxcIil8fChjPWEub2Zmc2V0KCkpLGMudG9wKz1tLmNzcyhhWzBdLFwiYm9yZGVyVG9wV2lkdGhcIiwhMCksYy5sZWZ0Kz1tLmNzcyhhWzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIsITApKSx7dG9wOmIudG9wLWMudG9wLW0uY3NzKGQsXCJtYXJnaW5Ub3BcIiwhMCksbGVmdDpiLmxlZnQtYy5sZWZ0LW0uY3NzKGQsXCJtYXJnaW5MZWZ0XCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxjZDt3aGlsZShhJiYhbS5ub2RlTmFtZShhLFwiaHRtbFwiKSYmXCJzdGF0aWNcIj09PW0uY3NzKGEsXCJwb3NpdGlvblwiKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxjZH0pfX0pLG0uZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oYSxiKXt2YXIgYz0vWS8udGVzdChiKTttLmZuW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBWKHRoaXMsZnVuY3Rpb24oYSxkLGUpe3ZhciBmPWRkKGEpO3JldHVybiB2b2lkIDA9PT1lP2Y/YiBpbiBmP2ZbYl06Zi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbZF06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP20oZikuc2Nyb2xsTGVmdCgpOmUsYz9lOm0oZikuc2Nyb2xsVG9wKCkpOmFbZF09ZSl9LGEsZCxhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pLG0uZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oYSxiKXttLmNzc0hvb2tzW2JdPUxiKGsucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGMpe3JldHVybiBjPyhjPUpiKGEsYiksSGIudGVzdChjKT9tKGEpLnBvc2l0aW9uKClbYl0rXCJweFwiOmMpOnZvaWQgMH0pfSksbS5lYWNoKHtIZWlnaHQ6XCJoZWlnaHRcIixXaWR0aDpcIndpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bS5lYWNoKHtwYWRkaW5nOlwiaW5uZXJcIithLGNvbnRlbnQ6YixcIlwiOlwib3V0ZXJcIithfSxmdW5jdGlvbihjLGQpe20uZm5bZF09ZnVuY3Rpb24oZCxlKXt2YXIgZj1hcmd1bWVudHMubGVuZ3RoJiYoY3x8XCJib29sZWFuXCIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD9cIm1hcmdpblwiOlwiYm9yZGVyXCIpO3JldHVybiBWKHRoaXMsZnVuY3Rpb24oYixjLGQpe3ZhciBlO3JldHVybiBtLmlzV2luZG93KGIpP2IuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5W1wic2Nyb2xsXCIrYV0sZVtcInNjcm9sbFwiK2FdLGIuYm9keVtcIm9mZnNldFwiK2FdLGVbXCJvZmZzZXRcIithXSxlW1wiY2xpZW50XCIrYV0pKTp2b2lkIDA9PT1kP20uY3NzKGIsYyxnKTptLnN0eWxlKGIsYyxkLGcpfSxiLGY/ZDp2b2lkIDAsZixudWxsKX19KX0pLG0uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbS5mbi5hbmRTZWxmPW0uZm4uYWRkQmFjayxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcImpxdWVyeVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG19KTt2YXIgZWQ9YS5qUXVlcnksZmQ9YS4kO3JldHVybiBtLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW0mJihhLiQ9ZmQpLGImJmEualF1ZXJ5PT09bSYmKGEualF1ZXJ5PWVkKSxtfSx0eXBlb2YgYj09PUsmJihhLmpRdWVyeT1hLiQ9bSksbX0pO1xuIiwiLyohXG4gKlxuICpcbiAqIENvcHlyaWdodDogTWF0ZXJpYWwgRGVzaWduIGZvciBCb290c3RyYXBcbiAqIHd3dy5tZGJvb3RzdHJhcC5jb21cbiAqXG4gKiBSZWFkIHRoZSBsaWNlbnNlOiBodHRwOi8vbWRib290c3RyYXAuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE1LzA5L01EQi1MaWNlbnNlLnBkZlxuICpcbiAqXG4gKi9cblxuXG4vKlxucm90YXRpbmctY2FyZHMuanNcbmNhcmQtcmV2ZWFsLmpzXG53b3cuanNcbnZpZGVvLWJnLmpzXG5tb3JwaGluZy1pY29ucy5qc1xudG9hc3RzLmpzXG5zY3JvbGxpbmctbmF2LmpzXG5jb2xsYXBzaWJsZS5qc1xuc2lkZW5hdi5qc1xubGVhbi1tb2RhbC5qc1xubWF0ZXJpYWwtYm94LmpzXG5wcm9ncmVzcy1iYXIuanNcbnBhbmVsLXBvcHVvdC5qc1xuY2hhcmFjdGVyLWNvdW50ZXIuanNcbnBpY2tlci5qc1xucGlja2VyLWRhdGUuanNcbmpxdWVyeS1lYXNpbmcuanNcbmRyb3Bkb3duLmpzXG5nbG9iYWwuanNcbmZvcm1zLmpzXG52ZWxvY2l0eS5qc1xuYnV0dG9ucy5qc1xud2F2ZXMtZWZmZWN0LmpzXG5cbiovISBmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gayhhLCBiLCBjKSB7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHEoYSwgYyksIGIpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbChhLCBiLCBjKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGEpID8gKG0oYSwgY1tiXSwgYyksICEwKSA6ICExXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbShhLCBiLCBjKSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAoYSlcbiAgICAgICAgICAgIGlmIChhLmZvckVhY2gpIGEuZm9yRWFjaChiLCBjKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGEubGVuZ3RoICE9PSBkKVxuICAgICAgICAgICAgZm9yIChlID0gMDsgZSA8IGEubGVuZ3RoOykgYi5jYWxsKGMsIGFbZV0sIGUsIGEpLCBlKys7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZvciAoZSBpbiBhKSBhLmhhc093blByb3BlcnR5KGUpICYmIGIuY2FsbChjLCBhW2VdLCBlLCBhKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG4oYSwgYiwgYykge1xuICAgICAgICBmb3IgKHZhciBlID0gT2JqZWN0LmtleXMoYiksIGYgPSAwOyBmIDwgZS5sZW5ndGg7KSghYyB8fCBjICYmIGFbZVtmXV0gPT09IGQpICYmIChhW2VbZl1dID0gYltlW2ZdXSksIGYrKztcbiAgICAgICAgcmV0dXJuIGFcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG4oYSwgYiwgITApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcChhLCBiLCBjKSB7XG4gICAgICAgIHZhciBlLCBkID0gYi5wcm90b3R5cGU7XG4gICAgICAgIGUgPSBhLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoZCksIGUuY29uc3RydWN0b3IgPSBhLCBlLl9zdXBlciA9IGQsIGMgJiYgbihlLCBjKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHEoYSwgYikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGEuYXBwbHkoYiwgYXJndW1lbnRzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcihhLCBiKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYSA9PSBnID8gYS5hcHBseShiID8gYlswXSB8fCBkIDogZCwgYikgOiBhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcyhhLCBiKSB7XG4gICAgICAgIHJldHVybiBhID09PSBkID8gYiA6IGFcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0KGEsIGIsIGMpIHtcbiAgICAgICAgbSh4KGIpLCBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKGIsIGMsICExKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHUoYSwgYiwgYykge1xuICAgICAgICBtKHgoYiksIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICBhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYiwgYywgITEpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdihhLCBiKSB7XG4gICAgICAgIGZvciAoOyBhOykge1xuICAgICAgICAgICAgaWYgKGEgPT0gYikgcmV0dXJuICEwO1xuICAgICAgICAgICAgYSA9IGEucGFyZW50Tm9kZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHcoYSwgYikge1xuICAgICAgICByZXR1cm4gYS5pbmRleE9mKGIpID4gLTFcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB4KGEpIHtcbiAgICAgICAgcmV0dXJuIGEudHJpbSgpLnNwbGl0KC9cXHMrL2cpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24geShhLCBiLCBjKSB7XG4gICAgICAgIGlmIChhLmluZGV4T2YgJiYgIWMpIHJldHVybiBhLmluZGV4T2YoYik7XG4gICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgYS5sZW5ndGg7KSB7XG4gICAgICAgICAgICBpZiAoYyAmJiBhW2RdW2NdID09IGIgfHwgIWMgJiYgYVtkXSA9PT0gYikgcmV0dXJuIGQ7XG4gICAgICAgICAgICBkKytcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTFcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB6KGEpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEsIDApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQShhLCBiLCBjKSB7XG4gICAgICAgIGZvciAodmFyIGQgPSBbXSwgZSA9IFtdLCBmID0gMDsgZiA8IGEubGVuZ3RoOykge1xuICAgICAgICAgICAgdmFyIGcgPSBiID8gYVtmXVtiXSA6IGFbZl07XG4gICAgICAgICAgICB5KGUsIGcpIDwgMCAmJiBkLnB1c2goYVtmXSksIGVbZl0gPSBnLCBmKytcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYyAmJiAoZCA9IGIgPyBkLnNvcnQoZnVuY3Rpb24gKGEsIGMpIHtcbiAgICAgICAgICAgIHJldHVybiBhW2JdID4gY1tiXVxuICAgICAgICB9KSA6IGQuc29ydCgpKSwgZFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEIoYSwgYikge1xuICAgICAgICBmb3IgKHZhciBjLCBmLCBnID0gYlswXS50b1VwcGVyQ2FzZSgpICsgYi5zbGljZSgxKSwgaCA9IDA7IGggPCBlLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGlmIChjID0gZVtoXSwgZiA9IGMgPyBjICsgZyA6IGIsIGYgaW4gYSkgcmV0dXJuIGY7XG4gICAgICAgICAgICBoKytcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEQoKSB7XG4gICAgICAgIHJldHVybiBDKytcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBFKGEpIHtcbiAgICAgICAgdmFyIGIgPSBhLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgIHJldHVybiBiLmRlZmF1bHRWaWV3IHx8IGIucGFyZW50V2luZG93XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWIoYSwgYikge1xuICAgICAgICB2YXIgYyA9IHRoaXM7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IGEsIHRoaXMuY2FsbGJhY2sgPSBiLCB0aGlzLmVsZW1lbnQgPSBhLmVsZW1lbnQsIHRoaXMudGFyZ2V0ID0gYS5vcHRpb25zLmlucHV0VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgcihhLm9wdGlvbnMuZW5hYmxlLCBbYV0pICYmIGMuaGFuZGxlcihiKVxuICAgICAgICB9LCB0aGlzLmluaXQoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJiKGEpIHtcbiAgICAgICAgdmFyIGIsIGMgPSBhLm9wdGlvbnMuaW5wdXRDbGFzcztcbiAgICAgICAgcmV0dXJuIGIgPSBjID8gYyA6IEggPyB3YiA6IEkgPyBFYiA6IEcgPyBHYiA6IHJiLCBuZXcgYihhLCBjYilcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYihhLCBiLCBjKSB7XG4gICAgICAgIHZhciBkID0gYy5wb2ludGVycy5sZW5ndGgsXG4gICAgICAgICAgICBlID0gYy5jaGFuZ2VkUG9pbnRlcnMubGVuZ3RoLFxuICAgICAgICAgICAgZiA9IGIgJiBPICYmIDAgPT09IGQgLSBlLFxuICAgICAgICAgICAgZyA9IGIgJiAoUSB8IFIpICYmIDAgPT09IGQgLSBlO1xuICAgICAgICBjLmlzRmlyc3QgPSAhIWYsIGMuaXNGaW5hbCA9ICEhZywgZiAmJiAoYS5zZXNzaW9uID0ge30pLCBjLmV2ZW50VHlwZSA9IGIsIGRiKGEsIGMpLCBhLmVtaXQoXCJoYW1tZXIuaW5wdXRcIiwgYyksIGEucmVjb2duaXplKGMpLCBhLnNlc3Npb24ucHJldklucHV0ID0gY1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRiKGEsIGIpIHtcbiAgICAgICAgdmFyIGMgPSBhLnNlc3Npb24sXG4gICAgICAgICAgICBkID0gYi5wb2ludGVycyxcbiAgICAgICAgICAgIGUgPSBkLmxlbmd0aDtcbiAgICAgICAgYy5maXJzdElucHV0IHx8IChjLmZpcnN0SW5wdXQgPSBnYihiKSksIGUgPiAxICYmICFjLmZpcnN0TXVsdGlwbGUgPyBjLmZpcnN0TXVsdGlwbGUgPSBnYihiKSA6IDEgPT09IGUgJiYgKGMuZmlyc3RNdWx0aXBsZSA9ICExKTtcbiAgICAgICAgdmFyIGYgPSBjLmZpcnN0SW5wdXQsXG4gICAgICAgICAgICBnID0gYy5maXJzdE11bHRpcGxlLFxuICAgICAgICAgICAgaCA9IGcgPyBnLmNlbnRlciA6IGYuY2VudGVyLFxuICAgICAgICAgICAgaSA9IGIuY2VudGVyID0gaGIoZCk7XG4gICAgICAgIGIudGltZVN0YW1wID0gaigpLCBiLmRlbHRhVGltZSA9IGIudGltZVN0YW1wIC0gZi50aW1lU3RhbXAsIGIuYW5nbGUgPSBsYihoLCBpKSwgYi5kaXN0YW5jZSA9IGtiKGgsIGkpLCBlYihjLCBiKSwgYi5vZmZzZXREaXJlY3Rpb24gPSBqYihiLmRlbHRhWCwgYi5kZWx0YVkpLCBiLnNjYWxlID0gZyA/IG5iKGcucG9pbnRlcnMsIGQpIDogMSwgYi5yb3RhdGlvbiA9IGcgPyBtYihnLnBvaW50ZXJzLCBkKSA6IDAsIGZiKGMsIGIpO1xuICAgICAgICB2YXIgayA9IGEuZWxlbWVudDtcbiAgICAgICAgdihiLnNyY0V2ZW50LnRhcmdldCwgaykgJiYgKGsgPSBiLnNyY0V2ZW50LnRhcmdldCksIGIudGFyZ2V0ID0ga1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGViKGEsIGIpIHtcbiAgICAgICAgdmFyIGMgPSBiLmNlbnRlcixcbiAgICAgICAgICAgIGQgPSBhLm9mZnNldERlbHRhIHx8IHt9LFxuICAgICAgICAgICAgZSA9IGEucHJldkRlbHRhIHx8IHt9LFxuICAgICAgICAgICAgZiA9IGEucHJldklucHV0IHx8IHt9O1xuICAgICAgICAoYi5ldmVudFR5cGUgPT09IE8gfHwgZi5ldmVudFR5cGUgPT09IFEpICYmIChlID0gYS5wcmV2RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBmLmRlbHRhWCB8fCAwLFxuICAgICAgICAgICAgeTogZi5kZWx0YVkgfHwgMFxuICAgICAgICB9LCBkID0gYS5vZmZzZXREZWx0YSA9IHtcbiAgICAgICAgICAgIHg6IGMueCxcbiAgICAgICAgICAgIHk6IGMueVxuICAgICAgICB9KSwgYi5kZWx0YVggPSBlLnggKyAoYy54IC0gZC54KSwgYi5kZWx0YVkgPSBlLnkgKyAoYy55IC0gZC55KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZiKGEsIGIpIHtcbiAgICAgICAgdmFyIGYsIGcsIGgsIGosIGMgPSBhLmxhc3RJbnRlcnZhbCB8fCBiLFxuICAgICAgICAgICAgZSA9IGIudGltZVN0YW1wIC0gYy50aW1lU3RhbXA7XG4gICAgICAgIGlmIChiLmV2ZW50VHlwZSAhPSBSICYmIChlID4gTiB8fCBjLnZlbG9jaXR5ID09PSBkKSkge1xuICAgICAgICAgICAgdmFyIGsgPSBjLmRlbHRhWCAtIGIuZGVsdGFYLFxuICAgICAgICAgICAgICAgIGwgPSBjLmRlbHRhWSAtIGIuZGVsdGFZLFxuICAgICAgICAgICAgICAgIG0gPSBpYihlLCBrLCBsKTtcbiAgICAgICAgICAgIGcgPSBtLngsIGggPSBtLnksIGYgPSBpKG0ueCkgPiBpKG0ueSkgPyBtLnggOiBtLnksIGogPSBqYihrLCBsKSwgYS5sYXN0SW50ZXJ2YWwgPSBiXG4gICAgICAgIH0gZWxzZSBmID0gYy52ZWxvY2l0eSwgZyA9IGMudmVsb2NpdHlYLCBoID0gYy52ZWxvY2l0eVksIGogPSBjLmRpcmVjdGlvbjtcbiAgICAgICAgYi52ZWxvY2l0eSA9IGYsIGIudmVsb2NpdHlYID0gZywgYi52ZWxvY2l0eVkgPSBoLCBiLmRpcmVjdGlvbiA9IGpcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnYihhKSB7XG4gICAgICAgIGZvciAodmFyIGIgPSBbXSwgYyA9IDA7IGMgPCBhLnBvaW50ZXJzLmxlbmd0aDspIGJbY10gPSB7XG4gICAgICAgICAgICBjbGllbnRYOiBoKGEucG9pbnRlcnNbY10uY2xpZW50WCksXG4gICAgICAgICAgICBjbGllbnRZOiBoKGEucG9pbnRlcnNbY10uY2xpZW50WSlcbiAgICAgICAgfSwgYysrO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGltZVN0YW1wOiBqKCksXG4gICAgICAgICAgICBwb2ludGVyczogYixcbiAgICAgICAgICAgIGNlbnRlcjogaGIoYiksXG4gICAgICAgICAgICBkZWx0YVg6IGEuZGVsdGFYLFxuICAgICAgICAgICAgZGVsdGFZOiBhLmRlbHRhWVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGIoYSkge1xuICAgICAgICB2YXIgYiA9IGEubGVuZ3RoO1xuICAgICAgICBpZiAoMSA9PT0gYikgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGgoYVswXS5jbGllbnRYKSxcbiAgICAgICAgICAgIHk6IGgoYVswXS5jbGllbnRZKVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBjID0gMCwgZCA9IDAsIGUgPSAwOyBiID4gZTspIGMgKz0gYVtlXS5jbGllbnRYLCBkICs9IGFbZV0uY2xpZW50WSwgZSsrO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogaChjIC8gYiksXG4gICAgICAgICAgICB5OiBoKGQgLyBiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWIoYSwgYiwgYykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogYiAvIGEgfHwgMCxcbiAgICAgICAgICAgIHk6IGMgLyBhIHx8IDBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGpiKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPT09IGIgPyBTIDogaShhKSA+PSBpKGIpID8gYSA+IDAgPyBUIDogVSA6IGIgPiAwID8gViA6IFdcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBrYihhLCBiLCBjKSB7XG4gICAgICAgIGMgfHwgKGMgPSAkKTtcbiAgICAgICAgdmFyIGQgPSBiW2NbMF1dIC0gYVtjWzBdXSxcbiAgICAgICAgICAgIGUgPSBiW2NbMV1dIC0gYVtjWzFdXTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChkICogZCArIGUgKiBlKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxiKGEsIGIsIGMpIHtcbiAgICAgICAgYyB8fCAoYyA9ICQpO1xuICAgICAgICB2YXIgZCA9IGJbY1swXV0gLSBhW2NbMF1dLFxuICAgICAgICAgICAgZSA9IGJbY1sxXV0gLSBhW2NbMV1dO1xuICAgICAgICByZXR1cm4gMTgwICogTWF0aC5hdGFuMihlLCBkKSAvIE1hdGguUElcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYihhLCBiKSB7XG4gICAgICAgIHJldHVybiBsYihiWzFdLCBiWzBdLCBfKSAtIGxiKGFbMV0sIGFbMF0sIF8pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmIoYSwgYikge1xuICAgICAgICByZXR1cm4ga2IoYlswXSwgYlsxXSwgXykgLyBrYihhWzBdLCBhWzFdLCBfKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJiKCkge1xuICAgICAgICB0aGlzLmV2RWwgPSBwYiwgdGhpcy5ldldpbiA9IHFiLCB0aGlzLmFsbG93ID0gITAsIHRoaXMucHJlc3NlZCA9ICExLCBhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2IoKSB7XG4gICAgICAgIHRoaXMuZXZFbCA9IHViLCB0aGlzLmV2V2luID0gdmIsIGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuc3RvcmUgPSB0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wb2ludGVyRXZlbnRzID0gW11cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBBYigpIHtcbiAgICAgICAgdGhpcy5ldlRhcmdldCA9IHliLCB0aGlzLmV2V2luID0gemIsIHRoaXMuc3RhcnRlZCA9ICExLCBhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQmIoYSwgYikge1xuICAgICAgICB2YXIgYyA9IHooYS50b3VjaGVzKSxcbiAgICAgICAgICAgIGQgPSB6KGEuY2hhbmdlZFRvdWNoZXMpO1xuICAgICAgICByZXR1cm4gYiAmIChRIHwgUikgJiYgKGMgPSBBKGMuY29uY2F0KGQpLCBcImlkZW50aWZpZXJcIiwgITApKSwgW2MsIGRdXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRWIoKSB7XG4gICAgICAgIHRoaXMuZXZUYXJnZXQgPSBEYiwgdGhpcy50YXJnZXRJZHMgPSB7fSwgYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEZiKGEsIGIpIHtcbiAgICAgICAgdmFyIGMgPSB6KGEudG91Y2hlcyksXG4gICAgICAgICAgICBkID0gdGhpcy50YXJnZXRJZHM7XG4gICAgICAgIGlmIChiICYgKE8gfCBQKSAmJiAxID09PSBjLmxlbmd0aCkgcmV0dXJuIGRbY1swXS5pZGVudGlmaWVyXSA9ICEwLCBbYywgY107XG4gICAgICAgIHZhciBlLCBmLCBnID0geihhLmNoYW5nZWRUb3VjaGVzKSxcbiAgICAgICAgICAgIGggPSBbXSxcbiAgICAgICAgICAgIGkgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgaWYgKGYgPSBjLmZpbHRlcihmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2KGEudGFyZ2V0LCBpKVxuICAgICAgICAgICAgfSksIGIgPT09IE8pXG4gICAgICAgICAgICBmb3IgKGUgPSAwOyBlIDwgZi5sZW5ndGg7KSBkW2ZbZV0uaWRlbnRpZmllcl0gPSAhMCwgZSsrO1xuICAgICAgICBmb3IgKGUgPSAwOyBlIDwgZy5sZW5ndGg7KSBkW2dbZV0uaWRlbnRpZmllcl0gJiYgaC5wdXNoKGdbZV0pLCBiICYgKFEgfCBSKSAmJiBkZWxldGUgZFtnW2VdLmlkZW50aWZpZXJdLCBlKys7XG4gICAgICAgIHJldHVybiBoLmxlbmd0aCA/IFtBKGYuY29uY2F0KGgpLCBcImlkZW50aWZpZXJcIiwgITApLCBoXSA6IHZvaWQgMFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEdiKCkge1xuICAgICAgICBhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgYSA9IHEodGhpcy5oYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgdGhpcy50b3VjaCA9IG5ldyBFYih0aGlzLm1hbmFnZXIsIGEpLCB0aGlzLm1vdXNlID0gbmV3IHJiKHRoaXMubWFuYWdlciwgYSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBQYihhLCBiKSB7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IGEsIHRoaXMuc2V0KGIpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gUWIoYSkge1xuICAgICAgICBpZiAodyhhLCBNYikpIHJldHVybiBNYjtcbiAgICAgICAgdmFyIGIgPSB3KGEsIE5iKSxcbiAgICAgICAgICAgIGMgPSB3KGEsIE9iKTtcbiAgICAgICAgcmV0dXJuIGIgJiYgYyA/IE5iICsgXCIgXCIgKyBPYiA6IGIgfHwgYyA/IGIgPyBOYiA6IE9iIDogdyhhLCBMYikgPyBMYiA6IEtiXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gWWIoYSkge1xuICAgICAgICB0aGlzLmlkID0gRCgpLCB0aGlzLm1hbmFnZXIgPSBudWxsLCB0aGlzLm9wdGlvbnMgPSBvKGEgfHwge30sIHRoaXMuZGVmYXVsdHMpLCB0aGlzLm9wdGlvbnMuZW5hYmxlID0gcyh0aGlzLm9wdGlvbnMuZW5hYmxlLCAhMCksIHRoaXMuc3RhdGUgPSBSYiwgdGhpcy5zaW11bHRhbmVvdXMgPSB7fSwgdGhpcy5yZXF1aXJlRmFpbCA9IFtdXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gWmIoYSkge1xuICAgICAgICByZXR1cm4gYSAmIFdiID8gXCJjYW5jZWxcIiA6IGEgJiBVYiA/IFwiZW5kXCIgOiBhICYgVGIgPyBcIm1vdmVcIiA6IGEgJiBTYiA/IFwic3RhcnRcIiA6IFwiXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiAkYihhKSB7XG4gICAgICAgIHJldHVybiBhID09IFcgPyBcImRvd25cIiA6IGEgPT0gViA/IFwidXBcIiA6IGEgPT0gVCA/IFwibGVmdFwiIDogYSA9PSBVID8gXCJyaWdodFwiIDogXCJcIlxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9iKGEsIGIpIHtcbiAgICAgICAgdmFyIGMgPSBiLm1hbmFnZXI7XG4gICAgICAgIHJldHVybiBjID8gYy5nZXQoYSkgOiBhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWMoKSB7XG4gICAgICAgIFliLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiYygpIHtcbiAgICAgICAgYWMuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5wWCA9IG51bGwsIHRoaXMucFkgPSBudWxsXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2MoKSB7XG4gICAgICAgIGFjLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYygpIHtcbiAgICAgICAgWWIuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5fdGltZXIgPSBudWxsLCB0aGlzLl9pbnB1dCA9IG51bGxcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlYygpIHtcbiAgICAgICAgYWMuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZjKCkge1xuICAgICAgICBhYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2MoKSB7XG4gICAgICAgIFliLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMucFRpbWUgPSAhMSwgdGhpcy5wQ2VudGVyID0gITEsIHRoaXMuX3RpbWVyID0gbnVsbCwgdGhpcy5faW5wdXQgPSBudWxsLCB0aGlzLmNvdW50ID0gMFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhjKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGIgPSBiIHx8IHt9LCBiLnJlY29nbml6ZXJzID0gcyhiLnJlY29nbml6ZXJzLCBoYy5kZWZhdWx0cy5wcmVzZXQpLCBuZXcga2MoYSwgYilcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBrYyhhLCBiKSB7XG4gICAgICAgIGIgPSBiIHx8IHt9LCB0aGlzLm9wdGlvbnMgPSBvKGIsIGhjLmRlZmF1bHRzKSwgdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0ID0gdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0IHx8IGEsIHRoaXMuaGFuZGxlcnMgPSB7fSwgdGhpcy5zZXNzaW9uID0ge30sIHRoaXMucmVjb2duaXplcnMgPSBbXSwgdGhpcy5lbGVtZW50ID0gYSwgdGhpcy5pbnB1dCA9IGJiKHRoaXMpLCB0aGlzLnRvdWNoQWN0aW9uID0gbmV3IFBiKHRoaXMsIHRoaXMub3B0aW9ucy50b3VjaEFjdGlvbiksIGxjKHRoaXMsICEwKSwgbShiLnJlY29nbml6ZXJzLCBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmFkZChuZXcgYVswXShhWzFdKSk7XG4gICAgICAgICAgICBhWzJdICYmIGIucmVjb2duaXplV2l0aChhWzJdKSwgYVszXSAmJiBiLnJlcXVpcmVGYWlsdXJlKGFbM10pXG4gICAgICAgIH0sIHRoaXMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGMoYSwgYikge1xuICAgICAgICB2YXIgYyA9IGEuZWxlbWVudDtcbiAgICAgICAgbShhLm9wdGlvbnMuY3NzUHJvcHMsIGZ1bmN0aW9uIChhLCBkKSB7XG4gICAgICAgICAgICBjLnN0eWxlW0IoYy5zdHlsZSwgZCldID0gYiA/IGEgOiBcIlwiXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWMoYSwgYykge1xuICAgICAgICB2YXIgZCA9IGIuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICAgICAgZC5pbml0RXZlbnQoYSwgITAsICEwKSwgZC5nZXN0dXJlID0gYywgYy50YXJnZXQuZGlzcGF0Y2hFdmVudChkKVxuICAgIH1cbiAgICB2YXIgZSA9IFtcIlwiLCBcIndlYmtpdFwiLCBcIm1velwiLCBcIk1TXCIsIFwibXNcIiwgXCJvXCJdLFxuICAgICAgICBmID0gYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBnID0gXCJmdW5jdGlvblwiLFxuICAgICAgICBoID0gTWF0aC5yb3VuZCxcbiAgICAgICAgaSA9IE1hdGguYWJzLFxuICAgICAgICBqID0gRGF0ZS5ub3csXG4gICAgICAgIEMgPSAxLFxuICAgICAgICBGID0gL21vYmlsZXx0YWJsZXR8aXAoYWR8aG9uZXxvZCl8YW5kcm9pZC9pLFxuICAgICAgICBHID0gXCJvbnRvdWNoc3RhcnRcIiBpbiBhLFxuICAgICAgICBIID0gQihhLCBcIlBvaW50ZXJFdmVudFwiKSAhPT0gZCxcbiAgICAgICAgSSA9IEcgJiYgRi50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgICAgICBKID0gXCJ0b3VjaFwiLFxuICAgICAgICBLID0gXCJwZW5cIixcbiAgICAgICAgTCA9IFwibW91c2VcIixcbiAgICAgICAgTSA9IFwia2luZWN0XCIsXG4gICAgICAgIE4gPSAyNSxcbiAgICAgICAgTyA9IDEsXG4gICAgICAgIFAgPSAyLFxuICAgICAgICBRID0gNCxcbiAgICAgICAgUiA9IDgsXG4gICAgICAgIFMgPSAxLFxuICAgICAgICBUID0gMixcbiAgICAgICAgVSA9IDQsXG4gICAgICAgIFYgPSA4LFxuICAgICAgICBXID0gMTYsXG4gICAgICAgIFggPSBUIHwgVSxcbiAgICAgICAgWSA9IFYgfCBXLFxuICAgICAgICBaID0gWCB8IFksXG4gICAgICAgICQgPSBbXCJ4XCIsIFwieVwiXSxcbiAgICAgICAgXyA9IFtcImNsaWVudFhcIiwgXCJjbGllbnRZXCJdO1xuICAgIGFiLnByb3RvdHlwZSA9IHtcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkge30sXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXZFbCAmJiB0KHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpLCB0aGlzLmV2VGFyZ2V0ICYmIHQodGhpcy50YXJnZXQsIHRoaXMuZXZUYXJnZXQsIHRoaXMuZG9tSGFuZGxlciksIHRoaXMuZXZXaW4gJiYgdChFKHRoaXMuZWxlbWVudCksIHRoaXMuZXZXaW4sIHRoaXMuZG9tSGFuZGxlcilcbiAgICAgICAgfSxcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5ldkVsICYmIHUodGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlciksIHRoaXMuZXZUYXJnZXQgJiYgdSh0aGlzLnRhcmdldCwgdGhpcy5ldlRhcmdldCwgdGhpcy5kb21IYW5kbGVyKSwgdGhpcy5ldldpbiAmJiB1KEUodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKVxuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgb2IgPSB7XG4gICAgICAgICAgICBtb3VzZWRvd246IE8sXG4gICAgICAgICAgICBtb3VzZW1vdmU6IFAsXG4gICAgICAgICAgICBtb3VzZXVwOiBRXG4gICAgICAgIH0sXG4gICAgICAgIHBiID0gXCJtb3VzZWRvd25cIixcbiAgICAgICAgcWIgPSBcIm1vdXNlbW92ZSBtb3VzZXVwXCI7XG4gICAgcChyYiwgYWIsIHtcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHZhciBiID0gb2JbYS50eXBlXTtcbiAgICAgICAgICAgIGIgJiBPICYmIDAgPT09IGEuYnV0dG9uICYmICh0aGlzLnByZXNzZWQgPSAhMCksIGIgJiBQICYmIDEgIT09IGEud2hpY2ggJiYgKGIgPSBRKSwgdGhpcy5wcmVzc2VkICYmIHRoaXMuYWxsb3cgJiYgKGIgJiBRICYmICh0aGlzLnByZXNzZWQgPSAhMSksIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCBiLCB7XG4gICAgICAgICAgICAgICAgcG9pbnRlcnM6IFthXSxcbiAgICAgICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFthXSxcbiAgICAgICAgICAgICAgICBwb2ludGVyVHlwZTogTCxcbiAgICAgICAgICAgICAgICBzcmNFdmVudDogYVxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgc2IgPSB7XG4gICAgICAgICAgICBwb2ludGVyZG93bjogTyxcbiAgICAgICAgICAgIHBvaW50ZXJtb3ZlOiBQLFxuICAgICAgICAgICAgcG9pbnRlcnVwOiBRLFxuICAgICAgICAgICAgcG9pbnRlcmNhbmNlbDogUixcbiAgICAgICAgICAgIHBvaW50ZXJvdXQ6IFJcbiAgICAgICAgfSxcbiAgICAgICAgdGIgPSB7XG4gICAgICAgICAgICAyOiBKLFxuICAgICAgICAgICAgMzogSyxcbiAgICAgICAgICAgIDQ6IEwsXG4gICAgICAgICAgICA1OiBNXG4gICAgICAgIH0sXG4gICAgICAgIHViID0gXCJwb2ludGVyZG93blwiLFxuICAgICAgICB2YiA9IFwicG9pbnRlcm1vdmUgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWxcIjtcbiAgICBhLk1TUG9pbnRlckV2ZW50ICYmICh1YiA9IFwiTVNQb2ludGVyRG93blwiLCB2YiA9IFwiTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWxcIiksIHAod2IsIGFiLCB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuc3RvcmUsXG4gICAgICAgICAgICAgICAgYyA9ICExLFxuICAgICAgICAgICAgICAgIGQgPSBhLnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwibXNcIiwgXCJcIiksXG4gICAgICAgICAgICAgICAgZSA9IHNiW2RdLFxuICAgICAgICAgICAgICAgIGYgPSB0YlthLnBvaW50ZXJUeXBlXSB8fCBhLnBvaW50ZXJUeXBlLFxuICAgICAgICAgICAgICAgIGcgPSBmID09IEosXG4gICAgICAgICAgICAgICAgaCA9IHkoYiwgYS5wb2ludGVySWQsIFwicG9pbnRlcklkXCIpO1xuICAgICAgICAgICAgZSAmIE8gJiYgKDAgPT09IGEuYnV0dG9uIHx8IGcpID8gMCA+IGggJiYgKGIucHVzaChhKSwgaCA9IGIubGVuZ3RoIC0gMSkgOiBlICYgKFEgfCBSKSAmJiAoYyA9ICEwKSwgMCA+IGggfHwgKGJbaF0gPSBhLCB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZSwge1xuICAgICAgICAgICAgICAgIHBvaW50ZXJzOiBiLFxuICAgICAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2FdLFxuICAgICAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBmLFxuICAgICAgICAgICAgICAgIHNyY0V2ZW50OiBhXG4gICAgICAgICAgICB9KSwgYyAmJiBiLnNwbGljZShoLCAxKSlcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciB4YiA9IHtcbiAgICAgICAgICAgIHRvdWNoc3RhcnQ6IE8sXG4gICAgICAgICAgICB0b3VjaG1vdmU6IFAsXG4gICAgICAgICAgICB0b3VjaGVuZDogUSxcbiAgICAgICAgICAgIHRvdWNoY2FuY2VsOiBSXG4gICAgICAgIH0sXG4gICAgICAgIHliID0gXCJ0b3VjaHN0YXJ0XCIsXG4gICAgICAgIHpiID0gXCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiO1xuICAgIHAoQWIsIGFiLCB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHhiW2EudHlwZV07XG4gICAgICAgICAgICBpZiAoYiA9PT0gTyAmJiAodGhpcy5zdGFydGVkID0gITApLCB0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IEJiLmNhbGwodGhpcywgYSwgYik7XG4gICAgICAgICAgICAgICAgYiAmIChRIHwgUikgJiYgMCA9PT0gY1swXS5sZW5ndGggLSBjWzFdLmxlbmd0aCAmJiAodGhpcy5zdGFydGVkID0gITEpLCB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgYiwge1xuICAgICAgICAgICAgICAgICAgICBwb2ludGVyczogY1swXSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBjWzFdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyVHlwZTogSixcbiAgICAgICAgICAgICAgICAgICAgc3JjRXZlbnQ6IGFcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIENiID0ge1xuICAgICAgICAgICAgdG91Y2hzdGFydDogTyxcbiAgICAgICAgICAgIHRvdWNobW92ZTogUCxcbiAgICAgICAgICAgIHRvdWNoZW5kOiBRLFxuICAgICAgICAgICAgdG91Y2hjYW5jZWw6IFJcbiAgICAgICAgfSxcbiAgICAgICAgRGIgPSBcInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsXCI7XG4gICAgcChFYiwgYWIsIHtcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHZhciBiID0gQ2JbYS50eXBlXSxcbiAgICAgICAgICAgICAgICBjID0gRmIuY2FsbCh0aGlzLCBhLCBiKTtcbiAgICAgICAgICAgIGMgJiYgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGIsIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyczogY1swXSxcbiAgICAgICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IGNbMV0sXG4gICAgICAgICAgICAgICAgcG9pbnRlclR5cGU6IEosXG4gICAgICAgICAgICAgICAgc3JjRXZlbnQ6IGFcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KSwgcChHYiwgYWIsIHtcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgICAgICAgIHZhciBkID0gYy5wb2ludGVyVHlwZSA9PSBKLFxuICAgICAgICAgICAgICAgIGUgPSBjLnBvaW50ZXJUeXBlID09IEw7XG4gICAgICAgICAgICBpZiAoZCkgdGhpcy5tb3VzZS5hbGxvdyA9ICExO1xuICAgICAgICAgICAgZWxzZSBpZiAoZSAmJiAhdGhpcy5tb3VzZS5hbGxvdykgcmV0dXJuO1xuICAgICAgICAgICAgYiAmIChRIHwgUikgJiYgKHRoaXMubW91c2UuYWxsb3cgPSAhMCksIHRoaXMuY2FsbGJhY2soYSwgYiwgYylcbiAgICAgICAgfSxcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50b3VjaC5kZXN0cm95KCksIHRoaXMubW91c2UuZGVzdHJveSgpXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgSGIgPSBCKGYuc3R5bGUsIFwidG91Y2hBY3Rpb25cIiksXG4gICAgICAgIEliID0gSGIgIT09IGQsXG4gICAgICAgIEpiID0gXCJjb21wdXRlXCIsXG4gICAgICAgIEtiID0gXCJhdXRvXCIsXG4gICAgICAgIExiID0gXCJtYW5pcHVsYXRpb25cIixcbiAgICAgICAgTWIgPSBcIm5vbmVcIixcbiAgICAgICAgTmIgPSBcInBhbi14XCIsXG4gICAgICAgIE9iID0gXCJwYW4teVwiO1xuICAgIFBiLnByb3RvdHlwZSA9IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgYSA9PSBKYiAmJiAoYSA9IHRoaXMuY29tcHV0ZSgpKSwgSWIgJiYgKHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlW0hiXSA9IGEpLCB0aGlzLmFjdGlvbnMgPSBhLnRvTG93ZXJDYXNlKCkudHJpbSgpXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zZXQodGhpcy5tYW5hZ2VyLm9wdGlvbnMudG91Y2hBY3Rpb24pXG4gICAgICAgIH0sXG4gICAgICAgIGNvbXB1dGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICByZXR1cm4gbSh0aGlzLm1hbmFnZXIucmVjb2duaXplcnMsIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgcihiLm9wdGlvbnMuZW5hYmxlLCBbYl0pICYmIChhID0gYS5jb25jYXQoYi5nZXRUb3VjaEFjdGlvbigpKSlcbiAgICAgICAgICAgIH0pLCBRYihhLmpvaW4oXCIgXCIpKVxuICAgICAgICB9LFxuICAgICAgICBwcmV2ZW50RGVmYXVsdHM6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAoIUliKSB7XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBhLnNyY0V2ZW50LFxuICAgICAgICAgICAgICAgICAgICBjID0gYS5vZmZzZXREaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCkgcmV0dXJuIGIucHJldmVudERlZmF1bHQoKSwgdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5hY3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICBlID0gdyhkLCBNYiksXG4gICAgICAgICAgICAgICAgICAgIGYgPSB3KGQsIE9iKSxcbiAgICAgICAgICAgICAgICAgICAgZyA9IHcoZCwgTmIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlIHx8IGYgJiYgYyAmIFggfHwgZyAmJiBjICYgWSA/IHRoaXMucHJldmVudFNyYyhiKSA6IHZvaWQgMFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwcmV2ZW50U3JjOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkID0gITAsIGEucHJldmVudERlZmF1bHQoKVxuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgUmIgPSAxLFxuICAgICAgICBTYiA9IDIsXG4gICAgICAgIFRiID0gNCxcbiAgICAgICAgVWIgPSA4LFxuICAgICAgICBWYiA9IFViLFxuICAgICAgICBXYiA9IDE2LFxuICAgICAgICBYYiA9IDMyO1xuICAgIFliLnByb3RvdHlwZSA9IHtcbiAgICAgICAgZGVmYXVsdHM6IHt9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gbih0aGlzLm9wdGlvbnMsIGEpLCB0aGlzLm1hbmFnZXIgJiYgdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLCB0aGlzXG4gICAgICAgIH0sXG4gICAgICAgIHJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAobChhLCBcInJlY29nbml6ZVdpdGhcIiwgdGhpcykpIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnNpbXVsdGFuZW91cztcbiAgICAgICAgICAgIHJldHVybiBhID0gX2IoYSwgdGhpcyksIGJbYS5pZF0gfHwgKGJbYS5pZF0gPSBhLCBhLnJlY29nbml6ZVdpdGgodGhpcykpLCB0aGlzXG4gICAgICAgIH0sXG4gICAgICAgIGRyb3BSZWNvZ25pemVXaXRoOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGwoYSwgXCJkcm9wUmVjb2duaXplV2l0aFwiLCB0aGlzKSA/IHRoaXMgOiAoYSA9IF9iKGEsIHRoaXMpLCBkZWxldGUgdGhpcy5zaW11bHRhbmVvdXNbYS5pZF0sIHRoaXMpXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKGwoYSwgXCJyZXF1aXJlRmFpbHVyZVwiLCB0aGlzKSkgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMucmVxdWlyZUZhaWw7XG4gICAgICAgICAgICByZXR1cm4gYSA9IF9iKGEsIHRoaXMpLCAtMSA9PT0geShiLCBhKSAmJiAoYi5wdXNoKGEpLCBhLnJlcXVpcmVGYWlsdXJlKHRoaXMpKSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBkcm9wUmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAobChhLCBcImRyb3BSZXF1aXJlRmFpbHVyZVwiLCB0aGlzKSkgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICBhID0gX2IoYSwgdGhpcyk7XG4gICAgICAgICAgICB2YXIgYiA9IHkodGhpcy5yZXF1aXJlRmFpbCwgYSk7XG4gICAgICAgICAgICByZXR1cm4gYiA+IC0xICYmIHRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGIsIDEpLCB0aGlzXG4gICAgICAgIH0sXG4gICAgICAgIGhhc1JlcXVpcmVGYWlsdXJlczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoID4gMFxuICAgICAgICB9LFxuICAgICAgICBjYW5SZWNvZ25pemVXaXRoOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5zaW11bHRhbmVvdXNbYS5pZF1cbiAgICAgICAgfSxcbiAgICAgICAgZW1pdDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGQoZCkge1xuICAgICAgICAgICAgICAgIGIubWFuYWdlci5lbWl0KGIub3B0aW9ucy5ldmVudCArIChkID8gWmIoYykgOiBcIlwiKSwgYSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiID0gdGhpcyxcbiAgICAgICAgICAgICAgICBjID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIFViID4gYyAmJiBkKCEwKSwgZCgpLCBjID49IFViICYmIGQoITApXG4gICAgICAgIH0sXG4gICAgICAgIHRyeUVtaXQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5FbWl0KCkgPyB0aGlzLmVtaXQoYSkgOiAodGhpcy5zdGF0ZSA9IFhiLCB2b2lkIDApXG4gICAgICAgIH0sXG4gICAgICAgIGNhbkVtaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEodGhpcy5yZXF1aXJlRmFpbFthXS5zdGF0ZSAmIChYYiB8IFJiKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICBhKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMFxuICAgICAgICB9LFxuICAgICAgICByZWNvZ25pemU6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IG4oe30sIGEpO1xuICAgICAgICAgICAgcmV0dXJuIHIodGhpcy5vcHRpb25zLmVuYWJsZSwgW3RoaXMsIGJdKSA/ICh0aGlzLnN0YXRlICYgKFZiIHwgV2IgfCBYYikgJiYgKHRoaXMuc3RhdGUgPSBSYiksIHRoaXMuc3RhdGUgPSB0aGlzLnByb2Nlc3MoYiksIHRoaXMuc3RhdGUgJiAoU2IgfCBUYiB8IFViIHwgV2IpICYmIHRoaXMudHJ5RW1pdChiKSwgdm9pZCAwKSA6ICh0aGlzLnJlc2V0KCksIHRoaXMuc3RhdGUgPSBYYiwgdm9pZCAwKVxuICAgICAgICB9LFxuICAgICAgICBwcm9jZXNzOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgICByZXNldDogZnVuY3Rpb24gKCkge31cbiAgICB9LCBwKGFjLCBZYiwge1xuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgcG9pbnRlcnM6IDFcbiAgICAgICAgfSxcbiAgICAgICAgYXR0clRlc3Q6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMub3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgICAgIHJldHVybiAwID09PSBiIHx8IGEucG9pbnRlcnMubGVuZ3RoID09PSBiXG4gICAgICAgIH0sXG4gICAgICAgIHByb2Nlc3M6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICAgICAgYyA9IGEuZXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgIGQgPSBiICYgKFNiIHwgVGIpLFxuICAgICAgICAgICAgICAgIGUgPSB0aGlzLmF0dHJUZXN0KGEpO1xuICAgICAgICAgICAgcmV0dXJuIGQgJiYgKGMgJiBSIHx8ICFlKSA/IGIgfCBXYiA6IGQgfHwgZSA/IGMgJiBRID8gYiB8IFViIDogYiAmIFNiID8gYiB8IFRiIDogU2IgOiBYYlxuICAgICAgICB9XG4gICAgfSksIHAoYmMsIGFjLCB7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBldmVudDogXCJwYW5cIixcbiAgICAgICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogWlxuICAgICAgICB9LFxuICAgICAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgIGIgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBhICYgWCAmJiBiLnB1c2goT2IpLCBhICYgWSAmJiBiLnB1c2goTmIpLCBiXG4gICAgICAgIH0sXG4gICAgICAgIGRpcmVjdGlvblRlc3Q6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBjID0gITAsXG4gICAgICAgICAgICAgICAgZCA9IGEuZGlzdGFuY2UsXG4gICAgICAgICAgICAgICAgZSA9IGEuZGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgIGYgPSBhLmRlbHRhWCxcbiAgICAgICAgICAgICAgICBnID0gYS5kZWx0YVk7XG4gICAgICAgICAgICByZXR1cm4gZSAmIGIuZGlyZWN0aW9uIHx8IChiLmRpcmVjdGlvbiAmIFggPyAoZSA9IDAgPT09IGYgPyBTIDogMCA+IGYgPyBUIDogVSwgYyA9IGYgIT0gdGhpcy5wWCwgZCA9IE1hdGguYWJzKGEuZGVsdGFYKSkgOiAoZSA9IDAgPT09IGcgPyBTIDogMCA+IGcgPyBWIDogVywgYyA9IGcgIT0gdGhpcy5wWSwgZCA9IE1hdGguYWJzKGEuZGVsdGFZKSkpLCBhLmRpcmVjdGlvbiA9IGUsIGMgJiYgZCA+IGIudGhyZXNob2xkICYmIGUgJiBiLmRpcmVjdGlvblxuICAgICAgICB9LFxuICAgICAgICBhdHRyVGVzdDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBhYy5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLCBhKSAmJiAodGhpcy5zdGF0ZSAmIFNiIHx8ICEodGhpcy5zdGF0ZSAmIFNiKSAmJiB0aGlzLmRpcmVjdGlvblRlc3QoYSkpXG4gICAgICAgIH0sXG4gICAgICAgIGVtaXQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB0aGlzLnBYID0gYS5kZWx0YVgsIHRoaXMucFkgPSBhLmRlbHRhWTtcbiAgICAgICAgICAgIHZhciBiID0gJGIoYS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgYiAmJiB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBiLCBhKSwgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGEpXG4gICAgICAgIH1cbiAgICB9KSwgcChjYywgYWMsIHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGV2ZW50OiBcInBpbmNoXCIsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgICAgICBwb2ludGVyczogMlxuICAgICAgICB9LFxuICAgICAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFtNYl1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0clRlc3Q6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBhKSAmJiAoTWF0aC5hYnMoYS5zY2FsZSAtIDEpID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU2IpXG4gICAgICAgIH0sXG4gICAgICAgIGVtaXQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGEpLCAxICE9PSBhLnNjYWxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBhLnNjYWxlIDwgMSA/IFwiaW5cIiA6IFwib3V0XCI7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50ICsgYiwgYSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pLCBwKGRjLCBZYiwge1xuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgZXZlbnQ6IFwicHJlc3NcIixcbiAgICAgICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICAgICAgdGltZTogNTAwLFxuICAgICAgICAgICAgdGhyZXNob2xkOiA1XG4gICAgICAgIH0sXG4gICAgICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gW0tiXVxuICAgICAgICB9LFxuICAgICAgICBwcm9jZXNzOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYyA9IGEucG9pbnRlcnMubGVuZ3RoID09PSBiLnBvaW50ZXJzLFxuICAgICAgICAgICAgICAgIGQgPSBhLmRpc3RhbmNlIDwgYi50aHJlc2hvbGQsXG4gICAgICAgICAgICAgICAgZSA9IGEuZGVsdGFUaW1lID4gYi50aW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lucHV0ID0gYSwgIWQgfHwgIWMgfHwgYS5ldmVudFR5cGUgJiAoUSB8IFIpICYmICFlKSB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICBlbHNlIGlmIChhLmV2ZW50VHlwZSAmIE8pIHRoaXMucmVzZXQoKSwgdGhpcy5fdGltZXIgPSBrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gVmIsIHRoaXMudHJ5RW1pdCgpXG4gICAgICAgICAgICB9LCBiLnRpbWUsIHRoaXMpO1xuICAgICAgICAgICAgZWxzZSBpZiAoYS5ldmVudFR5cGUgJiBRKSByZXR1cm4gVmI7XG4gICAgICAgICAgICByZXR1cm4gWGJcbiAgICAgICAgfSxcbiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcilcbiAgICAgICAgfSxcbiAgICAgICAgZW1pdDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPT09IFZiICYmIChhICYmIGEuZXZlbnRUeXBlICYgUSA/IHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIFwidXBcIiwgYSkgOiAodGhpcy5faW5wdXQudGltZVN0YW1wID0gaigpLCB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIHRoaXMuX2lucHV0KSkpXG4gICAgICAgIH1cbiAgICB9KSwgcChlYywgYWMsIHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGV2ZW50OiBcInJvdGF0ZVwiLFxuICAgICAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICAgICAgcG9pbnRlcnM6IDJcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbTWJdXG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJUZXN0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgYSkgJiYgKE1hdGguYWJzKGEucm90YXRpb24pID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU2IpXG4gICAgICAgIH1cbiAgICB9KSwgcChmYywgYWMsIHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGV2ZW50OiBcInN3aXBlXCIsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuICAgICAgICAgICAgdmVsb2NpdHk6IC42NSxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogWCB8IFksXG4gICAgICAgICAgICBwb2ludGVyczogMVxuICAgICAgICB9LFxuICAgICAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJjLnByb3RvdHlwZS5nZXRUb3VjaEFjdGlvbi5jYWxsKHRoaXMpXG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJUZXN0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGMsIGIgPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIGIgJiAoWCB8IFkpID8gYyA9IGEudmVsb2NpdHkgOiBiICYgWCA/IGMgPSBhLnZlbG9jaXR5WCA6IGIgJiBZICYmIChjID0gYS52ZWxvY2l0eVkpLCB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGEpICYmIGIgJiBhLmRpcmVjdGlvbiAmJiBhLmRpc3RhbmNlID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCAmJiBpKGMpID4gdGhpcy5vcHRpb25zLnZlbG9jaXR5ICYmIGEuZXZlbnRUeXBlICYgUVxuICAgICAgICB9LFxuICAgICAgICBlbWl0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSAkYihhLmRpcmVjdGlvbik7XG4gICAgICAgICAgICBiICYmIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIGIsIGEpLCB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIGEpXG4gICAgICAgIH1cbiAgICB9KSwgcChnYywgWWIsIHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGV2ZW50OiBcInRhcFwiLFxuICAgICAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgICAgICB0YXBzOiAxLFxuICAgICAgICAgICAgaW50ZXJ2YWw6IDMwMCxcbiAgICAgICAgICAgIHRpbWU6IDI1MCxcbiAgICAgICAgICAgIHRocmVzaG9sZDogMixcbiAgICAgICAgICAgIHBvc1RocmVzaG9sZDogMTBcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbTGJdXG4gICAgICAgIH0sXG4gICAgICAgIHByb2Nlc3M6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBjID0gYS5wb2ludGVycy5sZW5ndGggPT09IGIucG9pbnRlcnMsXG4gICAgICAgICAgICAgICAgZCA9IGEuZGlzdGFuY2UgPCBiLnRocmVzaG9sZCxcbiAgICAgICAgICAgICAgICBlID0gYS5kZWx0YVRpbWUgPCBiLnRpbWU7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNldCgpLCBhLmV2ZW50VHlwZSAmIE8gJiYgMCA9PT0gdGhpcy5jb3VudCkgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcbiAgICAgICAgICAgIGlmIChkICYmIGUgJiYgYykge1xuICAgICAgICAgICAgICAgIGlmIChhLmV2ZW50VHlwZSAhPSBRKSByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuICAgICAgICAgICAgICAgIHZhciBmID0gdGhpcy5wVGltZSA/IGEudGltZVN0YW1wIC0gdGhpcy5wVGltZSA8IGIuaW50ZXJ2YWwgOiAhMCxcbiAgICAgICAgICAgICAgICAgICAgZyA9ICF0aGlzLnBDZW50ZXIgfHwga2IodGhpcy5wQ2VudGVyLCBhLmNlbnRlcikgPCBiLnBvc1RocmVzaG9sZDtcbiAgICAgICAgICAgICAgICB0aGlzLnBUaW1lID0gYS50aW1lU3RhbXAsIHRoaXMucENlbnRlciA9IGEuY2VudGVyLCBnICYmIGYgPyB0aGlzLmNvdW50ICs9IDEgOiB0aGlzLmNvdW50ID0gMSwgdGhpcy5faW5wdXQgPSBhO1xuICAgICAgICAgICAgICAgIHZhciBoID0gdGhpcy5jb3VudCAlIGIudGFwcztcbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gaCkgcmV0dXJuIHRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCkgPyAodGhpcy5fdGltZXIgPSBrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFZiLCB0aGlzLnRyeUVtaXQoKVxuICAgICAgICAgICAgICAgIH0sIGIuaW50ZXJ2YWwsIHRoaXMpLCBTYikgOiBWYlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFhiXG4gICAgICAgIH0sXG4gICAgICAgIGZhaWxUaW1lb3V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGltZXIgPSBrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gWGJcbiAgICAgICAgICAgIH0sIHRoaXMub3B0aW9ucy5pbnRlcnZhbCwgdGhpcyksIFhiXG4gICAgICAgIH0sXG4gICAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpXG4gICAgICAgIH0sXG4gICAgICAgIGVtaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPT0gVmIgJiYgKHRoaXMuX2lucHV0LnRhcENvdW50ID0gdGhpcy5jb3VudCwgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCkpXG4gICAgICAgIH1cbiAgICB9KSwgaGMuVkVSU0lPTiA9IFwiMi4wLjRcIiwgaGMuZGVmYXVsdHMgPSB7XG4gICAgICAgIGRvbUV2ZW50czogITEsXG4gICAgICAgIHRvdWNoQWN0aW9uOiBKYixcbiAgICAgICAgZW5hYmxlOiAhMCxcbiAgICAgICAgaW5wdXRUYXJnZXQ6IG51bGwsXG4gICAgICAgIGlucHV0Q2xhc3M6IG51bGwsXG4gICAgICAgIHByZXNldDogW1tlYywge1xuICAgICAgICAgICAgZW5hYmxlOiAhMVxuICAgICAgICB9XSwgW2NjLCB7XG4gICAgICAgICAgICBlbmFibGU6ICExXG4gICAgICAgIH0sIFtcInJvdGF0ZVwiXV0sIFtmYywge1xuICAgICAgICAgICAgZGlyZWN0aW9uOiBYXG4gICAgICAgIH1dLCBbYmMsIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbjogWFxuICAgICAgICB9LCBbXCJzd2lwZVwiXV0sIFtnY10sIFtnYywge1xuICAgICAgICAgICAgZXZlbnQ6IFwiZG91YmxldGFwXCIsXG4gICAgICAgICAgICB0YXBzOiAyXG4gICAgICAgIH0sIFtcInRhcFwiXV0sIFtkY11dLFxuICAgICAgICBjc3NQcm9wczoge1xuICAgICAgICAgICAgdXNlclNlbGVjdDogXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB0b3VjaFNlbGVjdDogXCJub25lXCIsXG4gICAgICAgICAgICB0b3VjaENhbGxvdXQ6IFwibm9uZVwiLFxuICAgICAgICAgICAgY29udGVudFpvb21pbmc6IFwibm9uZVwiLFxuICAgICAgICAgICAgdXNlckRyYWc6IFwibm9uZVwiLFxuICAgICAgICAgICAgdGFwSGlnaGxpZ2h0Q29sb3I6IFwicmdiYSgwLDAsMCwwKVwiXG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBpYyA9IDEsXG4gICAgICAgIGpjID0gMjtcbiAgICBrYy5wcm90b3R5cGUgPSB7XG4gICAgICAgIHNldDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBuKHRoaXMub3B0aW9ucywgYSksIGEudG91Y2hBY3Rpb24gJiYgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKSwgYS5pbnB1dFRhcmdldCAmJiAodGhpcy5pbnB1dC5kZXN0cm95KCksIHRoaXMuaW5wdXQudGFyZ2V0ID0gYS5pbnB1dFRhcmdldCwgdGhpcy5pbnB1dC5pbml0KCkpLCB0aGlzXG4gICAgICAgIH0sXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24uc3RvcHBlZCA9IGEgPyBqYyA6IGljXG4gICAgICAgIH0sXG4gICAgICAgIHJlY29nbml6ZTogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICAgICAgaWYgKCFiLnN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnByZXZlbnREZWZhdWx0cyhhKTtcbiAgICAgICAgICAgICAgICB2YXIgYywgZCA9IHRoaXMucmVjb2duaXplcnMsXG4gICAgICAgICAgICAgICAgICAgIGUgPSBiLmN1clJlY29nbml6ZXI7XG4gICAgICAgICAgICAgICAgKCFlIHx8IGUgJiYgZS5zdGF0ZSAmIFZiKSAmJiAoZSA9IGIuY3VyUmVjb2duaXplciA9IG51bGwpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGYgPSAwOyBmIDwgZC5sZW5ndGg7KSBjID0gZFtmXSwgYi5zdG9wcGVkID09PSBqYyB8fCBlICYmIGMgIT0gZSAmJiAhYy5jYW5SZWNvZ25pemVXaXRoKGUpID8gYy5yZXNldCgpIDogYy5yZWNvZ25pemUoYSksICFlICYmIGMuc3RhdGUgJiAoU2IgfCBUYiB8IFViKSAmJiAoZSA9IGIuY3VyUmVjb2duaXplciA9IGMpLCBmKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKGEgaW5zdGFuY2VvZiBZYikgcmV0dXJuIGE7XG4gICAgICAgICAgICBmb3IgKHZhciBiID0gdGhpcy5yZWNvZ25pemVycywgYyA9IDA7IGMgPCBiLmxlbmd0aDsgYysrKVxuICAgICAgICAgICAgICAgIGlmIChiW2NdLm9wdGlvbnMuZXZlbnQgPT0gYSkgcmV0dXJuIGJbY107XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9LFxuICAgICAgICBhZGQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAobChhLCBcImFkZFwiLCB0aGlzKSkgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuZ2V0KGEub3B0aW9ucy5ldmVudCk7XG4gICAgICAgICAgICByZXR1cm4gYiAmJiB0aGlzLnJlbW92ZShiKSwgdGhpcy5yZWNvZ25pemVycy5wdXNoKGEpLCBhLm1hbmFnZXIgPSB0aGlzLCB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLCBhXG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGlmIChsKGEsIFwicmVtb3ZlXCIsIHRoaXMpKSByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5yZWNvZ25pemVycztcbiAgICAgICAgICAgIHJldHVybiBhID0gdGhpcy5nZXQoYSksIGIuc3BsaWNlKHkoYiwgYSksIDEpLCB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLCB0aGlzXG4gICAgICAgIH0sXG4gICAgICAgIG9uOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICAgICAgcmV0dXJuIG0oeChhKSwgZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICBjW2FdID0gY1thXSB8fCBbXSwgY1thXS5wdXNoKGIpXG4gICAgICAgICAgICB9KSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBvZmY6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgICAgICByZXR1cm4gbSh4KGEpLCBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIGIgPyBjW2FdLnNwbGljZSh5KGNbYV0sIGIpLCAxKSA6IGRlbGV0ZSBjW2FdXG4gICAgICAgICAgICB9KSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBlbWl0OiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRvbUV2ZW50cyAmJiBtYyhhLCBiKTtcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5oYW5kbGVyc1thXSAmJiB0aGlzLmhhbmRsZXJzW2FdLnNsaWNlKCk7XG4gICAgICAgICAgICBpZiAoYyAmJiBjLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGIudHlwZSA9IGEsIGIucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGIuc3JjRXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBjLmxlbmd0aDspIGNbZF0oYiksIGQrK1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgJiYgbGModGhpcywgITEpLCB0aGlzLmhhbmRsZXJzID0ge30sIHRoaXMuc2Vzc2lvbiA9IHt9LCB0aGlzLmlucHV0LmRlc3Ryb3koKSwgdGhpcy5lbGVtZW50ID0gbnVsbFxuICAgICAgICB9XG4gICAgfSwgbihoYywge1xuICAgICAgICBJTlBVVF9TVEFSVDogTyxcbiAgICAgICAgSU5QVVRfTU9WRTogUCxcbiAgICAgICAgSU5QVVRfRU5EOiBRLFxuICAgICAgICBJTlBVVF9DQU5DRUw6IFIsXG4gICAgICAgIFNUQVRFX1BPU1NJQkxFOiBSYixcbiAgICAgICAgU1RBVEVfQkVHQU46IFNiLFxuICAgICAgICBTVEFURV9DSEFOR0VEOiBUYixcbiAgICAgICAgU1RBVEVfRU5ERUQ6IFViLFxuICAgICAgICBTVEFURV9SRUNPR05JWkVEOiBWYixcbiAgICAgICAgU1RBVEVfQ0FOQ0VMTEVEOiBXYixcbiAgICAgICAgU1RBVEVfRkFJTEVEOiBYYixcbiAgICAgICAgRElSRUNUSU9OX05PTkU6IFMsXG4gICAgICAgIERJUkVDVElPTl9MRUZUOiBULFxuICAgICAgICBESVJFQ1RJT05fUklHSFQ6IFUsXG4gICAgICAgIERJUkVDVElPTl9VUDogVixcbiAgICAgICAgRElSRUNUSU9OX0RPV046IFcsXG4gICAgICAgIERJUkVDVElPTl9IT1JJWk9OVEFMOiBYLFxuICAgICAgICBESVJFQ1RJT05fVkVSVElDQUw6IFksXG4gICAgICAgIERJUkVDVElPTl9BTEw6IFosXG4gICAgICAgIE1hbmFnZXI6IGtjLFxuICAgICAgICBJbnB1dDogYWIsXG4gICAgICAgIFRvdWNoQWN0aW9uOiBQYixcbiAgICAgICAgVG91Y2hJbnB1dDogRWIsXG4gICAgICAgIE1vdXNlSW5wdXQ6IHJiLFxuICAgICAgICBQb2ludGVyRXZlbnRJbnB1dDogd2IsXG4gICAgICAgIFRvdWNoTW91c2VJbnB1dDogR2IsXG4gICAgICAgIFNpbmdsZVRvdWNoSW5wdXQ6IEFiLFxuICAgICAgICBSZWNvZ25pemVyOiBZYixcbiAgICAgICAgQXR0clJlY29nbml6ZXI6IGFjLFxuICAgICAgICBUYXA6IGdjLFxuICAgICAgICBQYW46IGJjLFxuICAgICAgICBTd2lwZTogZmMsXG4gICAgICAgIFBpbmNoOiBjYyxcbiAgICAgICAgUm90YXRlOiBlYyxcbiAgICAgICAgUHJlc3M6IGRjLFxuICAgICAgICBvbjogdCxcbiAgICAgICAgb2ZmOiB1LFxuICAgICAgICBlYWNoOiBtLFxuICAgICAgICBtZXJnZTogbyxcbiAgICAgICAgZXh0ZW5kOiBuLFxuICAgICAgICBpbmhlcml0OiBwLFxuICAgICAgICBiaW5kRm46IHEsXG4gICAgICAgIHByZWZpeGVkOiBCXG4gICAgfSksIHR5cGVvZiBkZWZpbmUgPT0gZyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGhjXG4gICAgfSkgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMgPyBtb2R1bGUuZXhwb3J0cyA9IGhjIDogYVtjXSA9IGhjXG59KHdpbmRvdywgZG9jdW1lbnQsIFwiSGFtbWVyXCIpOyhmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoWydqcXVlcnknLCAnaGFtbWVyanMnXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSwgcmVxdWlyZSgnaGFtbWVyanMnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeShqUXVlcnksIEhhbW1lcik7XG4gICAgfVxufShmdW5jdGlvbigkLCBIYW1tZXIpIHtcbiAgICBmdW5jdGlvbiBoYW1tZXJpZnkoZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyICRlbCA9ICQoZWwpO1xuICAgICAgICBpZighJGVsLmRhdGEoXCJoYW1tZXJcIikpIHtcbiAgICAgICAgICAgICRlbC5kYXRhKFwiaGFtbWVyXCIsIG5ldyBIYW1tZXIoJGVsWzBdLCBvcHRpb25zKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkLmZuLmhhbW1lciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGhhbW1lcmlmeSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGV4dGVuZCB0aGUgZW1pdCBtZXRob2QgdG8gYWxzbyB0cmlnZ2VyIGpRdWVyeSBldmVudHNcbiAgICBIYW1tZXIuTWFuYWdlci5wcm90b3R5cGUuZW1pdCA9IChmdW5jdGlvbihvcmlnaW5hbEVtaXQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUsIGRhdGEpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsRW1pdC5jYWxsKHRoaXMsIHR5cGUsIGRhdGEpO1xuICAgICAgICAgICAgJCh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgZ2VzdHVyZTogZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfSkoSGFtbWVyLk1hbmFnZXIucHJvdG90eXBlLmVtaXQpO1xufSkpO1xuLyogUk9UQVRJTkcgQ0FSRFMgKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJkMS5lZmZlY3RfX2NsaWNrXCIpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYXJkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgY2FyZDEgPSBjYXJkc1tpXTtcbiAgICAgICAgY2xpY2tMaXN0ZW5lcihjYXJkMSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xpY2tMaXN0ZW5lcihjYXJkKSB7XG4gICAgICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5jbGFzc0xpc3Q7XG4gICAgICAgICAgICBjLmNvbnRhaW5zKFwiZmxpcHBlZFwiKSA9PT0gdHJ1ZSA/IGMucmVtb3ZlKFwiZmxpcHBlZFwiKSA6IGMuYWRkKFwiZmxpcHBlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSkoKTsvKiBDQVJEIFJFVkVBTCAqL1xuXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrLmNhcmQnLCAnLmNhcmQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmNhcmQtcmV2ZWFsJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKCQoJy5jYXJkLXJldmVhbCAuY2FyZC10aXRsZScpKSB8fCAkKGUudGFyZ2V0KS5pcygkKCcuY2FyZC1yZXZlYWwgLmNhcmQtdGl0bGUgaScpKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIFJldmVhbCBhbmltYXRlIGRvd24gYW5kIGRpc3BsYXkgbm9uZVxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jYXJkLXJldmVhbCcpLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVk6IDBcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIyNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dFF1YWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoZS50YXJnZXQpLmlzKCQoJy5jYXJkIC5hY3RpdmF0b3InKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgJChlLnRhcmdldCkuaXMoJCgnLmNhcmQgLmFjdGl2YXRvciBpJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNhcmQtcmV2ZWFsJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgICAgICAgICAgICAgfSkudmVsb2NpdHkoXCJzdG9wXCIsIGZhbHNlKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVZOiAnLTEwMCUnXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9KTtcblxuICAgIH0pO1xufShqUXVlcnkpKTsvL1dPVyBTQ1JJUFQgLSBSRVZFQUwgQU5JTUFUSU9OUyBXSEVOIFNDUk9MTElOR1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBNdXRhdGlvbk9ic2VydmVyLCBVdGlsLCBXZWFrTWFwLCBnZXRDb21wdXRlZFN0eWxlLCBnZXRDb21wdXRlZFN0eWxlUlgsXG4gICAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sXG4gICAgaW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xuXG4gIFV0aWwgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gVXRpbCgpIHt9XG5cbiAgICBVdGlsLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbihjdXN0b20sIGRlZmF1bHRzKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICAgIGZvciAoa2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICAgIHZhbHVlID0gZGVmYXVsdHNba2V5XTtcbiAgICAgICAgaWYgKGN1c3RvbVtrZXldID09IG51bGwpIHtcbiAgICAgICAgICBjdXN0b21ba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VzdG9tO1xuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5pc01vYmlsZSA9IGZ1bmN0aW9uKGFnZW50KSB7XG4gICAgICByZXR1cm4gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KGFnZW50KTtcbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuY3JlYXRlRXZlbnQgPSBmdW5jdGlvbihldmVudCwgYnViYmxlLCBjYW5jZWwsIGRldGFpbCkge1xuICAgICAgdmFyIGN1c3RvbUV2ZW50O1xuICAgICAgaWYgKGJ1YmJsZSA9PSBudWxsKSB7XG4gICAgICAgIGJ1YmJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGNhbmNlbCA9PSBudWxsKSB7XG4gICAgICAgIGNhbmNlbCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGRldGFpbCA9PSBudWxsKSB7XG4gICAgICAgIGRldGFpbCA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQgIT0gbnVsbCkge1xuICAgICAgICBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgICBjdXN0b21FdmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsIGJ1YmJsZSwgY2FuY2VsLCBkZXRhaWwpO1xuICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCAhPSBudWxsKSB7XG4gICAgICAgIGN1c3RvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICAgICAgY3VzdG9tRXZlbnQuZXZlbnRUeXBlID0gZXZlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXN0b21FdmVudC5ldmVudE5hbWUgPSBldmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXN0b21FdmVudDtcbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuZW1pdEV2ZW50ID0gZnVuY3Rpb24oZWxlbSwgZXZlbnQpIHtcbiAgICAgIGlmIChlbGVtLmRpc3BhdGNoRXZlbnQgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQgaW4gKGVsZW0gIT0gbnVsbCkpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1bZXZlbnRdKCk7XG4gICAgICB9IGVsc2UgaWYgKChcIm9uXCIgKyBldmVudCkgaW4gKGVsZW0gIT0gbnVsbCkpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1bXCJvblwiICsgZXZlbnRdKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLmFkZEV2ZW50ID0gZnVuY3Rpb24oZWxlbSwgZXZlbnQsIGZuKSB7XG4gICAgICBpZiAoZWxlbS5hZGRFdmVudExpc3RlbmVyICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAoZWxlbS5hdHRhY2hFdmVudCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLmF0dGFjaEV2ZW50KFwib25cIiArIGV2ZW50LCBmbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZWxlbVtldmVudF0gPSBmbjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbihlbGVtLCBldmVudCwgZm4pIHtcbiAgICAgIGlmIChlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmIChlbGVtLmRldGFjaEV2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0uZGV0YWNoRXZlbnQoXCJvblwiICsgZXZlbnQsIGZuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWxldGUgZWxlbVtldmVudF07XG4gICAgICB9XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLmlubmVySGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoJ2lubmVySGVpZ2h0JyBpbiB3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gVXRpbDtcblxuICB9KSgpO1xuXG4gIFdlYWtNYXAgPSB0aGlzLldlYWtNYXAgfHwgdGhpcy5Nb3pXZWFrTWFwIHx8IChXZWFrTWFwID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFdlYWtNYXAoKSB7XG4gICAgICB0aGlzLmtleXMgPSBbXTtcbiAgICAgIHRoaXMudmFsdWVzID0gW107XG4gICAgfVxuXG4gICAgV2Vha01hcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICB2YXIgaSwgaXRlbSwgaiwgbGVuLCByZWY7XG4gICAgICByZWYgPSB0aGlzLmtleXM7XG4gICAgICBmb3IgKGkgPSBqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICBpdGVtID0gcmVmW2ldO1xuICAgICAgICBpZiAoaXRlbSA9PT0ga2V5KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdlYWtNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBpLCBpdGVtLCBqLCBsZW4sIHJlZjtcbiAgICAgIHJlZiA9IHRoaXMua2V5cztcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XG4gICAgICAgIGl0ZW0gPSByZWZbaV07XG4gICAgICAgIGlmIChpdGVtID09PSBrZXkpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5rZXlzLnB1c2goa2V5KTtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdlYWtNYXA7XG5cbiAgfSkoKSk7XG5cbiAgTXV0YXRpb25PYnNlcnZlciA9IHRoaXMuTXV0YXRpb25PYnNlcnZlciB8fCB0aGlzLldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIgfHwgdGhpcy5Nb3pNdXRhdGlvbk9ic2VydmVyIHx8IChNdXRhdGlvbk9ic2VydmVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIE11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ011dGF0aW9uT2JzZXJ2ZXIgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuJyk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dPVy5qcyBjYW5ub3QgZGV0ZWN0IGRvbSBtdXRhdGlvbnMsIHBsZWFzZSBjYWxsIC5zeW5jKCkgYWZ0ZXIgbG9hZGluZyBuZXcgY29udGVudC4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCA9IHRydWU7XG5cbiAgICBNdXRhdGlvbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIHJldHVybiBNdXRhdGlvbk9ic2VydmVyO1xuXG4gIH0pKCkpO1xuXG4gIGdldENvbXB1dGVkU3R5bGUgPSB0aGlzLmdldENvbXB1dGVkU3R5bGUgfHwgZnVuY3Rpb24oZWwsIHBzZXVkbykge1xuICAgIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBpZiAocHJvcCA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICBwcm9wID0gJ3N0eWxlRmxvYXQnO1xuICAgICAgfVxuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGVSWC50ZXN0KHByb3ApKSB7XG4gICAgICAgIHByb3AucmVwbGFjZShnZXRDb21wdXRlZFN0eWxlUlgsIGZ1bmN0aW9uKF8sIF9jaGFyKSB7XG4gICAgICAgICAgcmV0dXJuIF9jaGFyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuICgocmVmID0gZWwuY3VycmVudFN0eWxlKSAhPSBudWxsID8gcmVmW3Byb3BdIDogdm9pZCAwKSB8fCBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgZ2V0Q29tcHV0ZWRTdHlsZVJYID0gLyhcXC0oW2Etel0pezF9KS9nO1xuXG4gIHRoaXMuV09XID0gKGZ1bmN0aW9uKCkge1xuICAgIFdPVy5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gICAgICBib3hDbGFzczogJ3dvdycsXG4gICAgICBhbmltYXRlQ2xhc3M6ICdhbmltYXRlZCcsXG4gICAgICBvZmZzZXQ6IDAsXG4gICAgICBtb2JpbGU6IHRydWUsXG4gICAgICBsaXZlOiB0cnVlLFxuICAgICAgY2FsbGJhY2s6IG51bGwsXG4gICAgICBzY3JvbGxDb250YWluZXI6IG51bGxcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gV09XKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgdGhpcy5zY3JvbGxDYWxsYmFjayA9IGJpbmQodGhpcy5zY3JvbGxDYWxsYmFjaywgdGhpcyk7XG4gICAgICB0aGlzLnNjcm9sbEhhbmRsZXIgPSBiaW5kKHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XG4gICAgICB0aGlzLnJlc2V0QW5pbWF0aW9uID0gYmluZCh0aGlzLnJlc2V0QW5pbWF0aW9uLCB0aGlzKTtcbiAgICAgIHRoaXMuc3RhcnQgPSBiaW5kKHRoaXMuc3RhcnQsIHRoaXMpO1xuICAgICAgdGhpcy5zY3JvbGxlZCA9IHRydWU7XG4gICAgICB0aGlzLmNvbmZpZyA9IHRoaXMudXRpbCgpLmV4dGVuZChvcHRpb25zLCB0aGlzLmRlZmF1bHRzKTtcbiAgICAgIGlmIChvcHRpb25zLnNjcm9sbENvbnRhaW5lciAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5zY3JvbGxDb250YWluZXIpO1xuICAgICAgfVxuICAgICAgdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgdGhpcy53b3dFdmVudCA9IHRoaXMudXRpbCgpLmNyZWF0ZUV2ZW50KHRoaXMuY29uZmlnLmJveENsYXNzKTtcbiAgICB9XG5cbiAgICBXT1cucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICB0aGlzLmVsZW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgaWYgKChyZWYgPSBkb2N1bWVudC5yZWFkeVN0YXRlKSA9PT0gXCJpbnRlcmFjdGl2ZVwiIHx8IHJlZiA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KGRvY3VtZW50LCAnRE9NQ29udGVudExvYWRlZCcsIHRoaXMuc3RhcnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZmluaXNoZWQgPSBbXTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveCwgaiwgbGVuLCByZWY7XG4gICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuYm94ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0cztcbiAgICAgICAgcmVmID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyB0aGlzLmNvbmZpZy5ib3hDbGFzcyk7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgYm94ID0gcmVmW2pdO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChib3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuYWxsID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaiwgbGVuLCByZWYsIHJlc3VsdHM7XG4gICAgICAgIHJlZiA9IHRoaXMuYm94ZXM7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgYm94ID0gcmVmW2pdO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChib3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh0aGlzLmJveGVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCgpKSB7XG4gICAgICAgICAgdGhpcy5yZXNldFN0eWxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVmID0gdGhpcy5ib3hlcztcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgIGJveCA9IHJlZltqXTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZShib3gsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQodGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyIHx8IHdpbmRvdywgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLnNjcm9sbENhbGxiYWNrLCA1MCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jb25maWcubGl2ZSkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlY29yZHMpIHtcbiAgICAgICAgICAgIHZhciBrLCBsZW4xLCBub2RlLCByZWNvcmQsIHJlc3VsdHM7XG4gICAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgICBmb3IgKGsgPSAwLCBsZW4xID0gcmVjb3Jkcy5sZW5ndGg7IGsgPCBsZW4xOyBrKyspIHtcbiAgICAgICAgICAgICAgcmVjb3JkID0gcmVjb3Jkc1trXTtcbiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgbCwgbGVuMiwgcmVmMSwgcmVzdWx0czE7XG4gICAgICAgICAgICAgICAgcmVmMSA9IHJlY29yZC5hZGRlZE5vZGVzIHx8IFtdO1xuICAgICAgICAgICAgICAgIHJlc3VsdHMxID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChsID0gMCwgbGVuMiA9IHJlZjEubGVuZ3RoOyBsIDwgbGVuMjsgbCsrKSB7XG4gICAgICAgICAgICAgICAgICBub2RlID0gcmVmMVtsXTtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdHMxLnB1c2godGhpcy5kb1N5bmMobm9kZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0czE7XG4gICAgICAgICAgICAgIH0pLmNhbGwoX3RoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKHRoaXMpKS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQodGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyIHx8IHdpbmRvdywgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICB0aGlzLnV0aWwoKS5yZW1vdmVFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgaWYgKHRoaXMuaW50ZXJ2YWwgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zeW5jID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgaWYgKE11dGF0aW9uT2JzZXJ2ZXIubm90U3VwcG9ydGVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvU3luYyh0aGlzLmVsZW1lbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmRvU3luYyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIHZhciBib3gsIGosIGxlbiwgcmVmLCByZXN1bHRzO1xuICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCBlbGVtZW50O1xuICAgICAgcmVmID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgdGhpcy5jb25maWcuYm94Q2xhc3MpO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIGJveCA9IHJlZltqXTtcbiAgICAgICAgaWYgKGluZGV4T2YuY2FsbCh0aGlzLmFsbCwgYm94KSA8IDApIHtcbiAgICAgICAgICB0aGlzLmJveGVzLnB1c2goYm94KTtcbiAgICAgICAgICB0aGlzLmFsbC5wdXNoKGJveCk7XG4gICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCB8fCB0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTdHlsZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGUoYm94LCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuc2Nyb2xsZWQgPSB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2godm9pZCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCk7XG4gICAgICBib3guY2xhc3NOYW1lID0gYm94LmNsYXNzTmFtZSArIFwiIFwiICsgdGhpcy5jb25maWcuYW5pbWF0ZUNsYXNzO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5jb25maWcuY2FsbGJhY2soYm94KTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXRpbCgpLmVtaXRFdmVudChib3gsIHRoaXMud293RXZlbnQpO1xuICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQoYm94LCAnYW5pbWF0aW9uZW5kJywgdGhpcy5yZXNldEFuaW1hdGlvbik7XG4gICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChib3gsICdvYW5pbWF0aW9uZW5kJywgdGhpcy5yZXNldEFuaW1hdGlvbik7XG4gICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChib3gsICd3ZWJraXRBbmltYXRpb25FbmQnLCB0aGlzLnJlc2V0QW5pbWF0aW9uKTtcbiAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KGJveCwgJ01TQW5pbWF0aW9uRW5kJywgdGhpcy5yZXNldEFuaW1hdGlvbik7XG4gICAgICByZXR1cm4gYm94O1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbihib3gsIGhpZGRlbikge1xuICAgICAgdmFyIGRlbGF5LCBkdXJhdGlvbiwgaXRlcmF0aW9uO1xuICAgICAgZHVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kdXJhdGlvbicpO1xuICAgICAgZGVsYXkgPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kZWxheScpO1xuICAgICAgaXRlcmF0aW9uID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctaXRlcmF0aW9uJyk7XG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmN1c3RvbVN0eWxlKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbik7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYW5pbWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIGlmICgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIFdPVy5wcm90b3R5cGUucmVzZXRTdHlsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveCwgaiwgbGVuLCByZWYsIHJlc3VsdHM7XG4gICAgICByZWYgPSB0aGlzLmJveGVzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIGJveCA9IHJlZltqXTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGJveC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnJlc2V0QW5pbWF0aW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciB0YXJnZXQ7XG4gICAgICBpZiAoZXZlbnQudHlwZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2FuaW1hdGlvbmVuZCcpID49IDApIHtcbiAgICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7XG4gICAgICAgIHJldHVybiB0YXJnZXQuY2xhc3NOYW1lID0gdGFyZ2V0LmNsYXNzTmFtZS5yZXBsYWNlKHRoaXMuY29uZmlnLmFuaW1hdGVDbGFzcywgJycpLnRyaW0oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5jdXN0b21TdHlsZSA9IGZ1bmN0aW9uKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbikge1xuICAgICAgaWYgKGhpZGRlbikge1xuICAgICAgICB0aGlzLmNhY2hlQW5pbWF0aW9uTmFtZShib3gpO1xuICAgICAgfVxuICAgICAgYm94LnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICAgIGlmIChkdXJhdGlvbikge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogZHVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgICAgYW5pbWF0aW9uRGVsYXk6IGRlbGF5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZXJhdGlvbikge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25JdGVyYXRpb25Db3VudDogaXRlcmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWU6IGhpZGRlbiA/ICdub25lJyA6IHRoaXMuY2FjaGVkQW5pbWF0aW9uTmFtZShib3gpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBib3g7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9ycyA9IFtcIm1velwiLCBcIndlYmtpdFwiXTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yU2V0ID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydGllcykge1xuICAgICAgdmFyIG5hbWUsIHJlc3VsdHMsIHZhbHVlLCB2ZW5kb3I7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKG5hbWUgaW4gcHJvcGVydGllcykge1xuICAgICAgICB2YWx1ZSA9IHByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgIGVsZW1bXCJcIiArIG5hbWVdID0gdmFsdWU7XG4gICAgICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGosIGxlbiwgcmVmLCByZXN1bHRzMTtcbiAgICAgICAgICByZWYgPSB0aGlzLnZlbmRvcnM7XG4gICAgICAgICAgcmVzdWx0czEgPSBbXTtcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgIHZlbmRvciA9IHJlZltqXTtcbiAgICAgICAgICAgIHJlc3VsdHMxLnB1c2goZWxlbVtcIlwiICsgdmVuZG9yICsgKG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkpICsgKG5hbWUuc3Vic3RyKDEpKV0gPSB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHRzMTtcbiAgICAgICAgfSkuY2FsbCh0aGlzKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS52ZW5kb3JDU1MgPSBmdW5jdGlvbihlbGVtLCBwcm9wZXJ0eSkge1xuICAgICAgdmFyIGosIGxlbiwgcmVmLCByZXN1bHQsIHN0eWxlLCB2ZW5kb3I7XG4gICAgICBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbSk7XG4gICAgICByZXN1bHQgPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKHByb3BlcnR5KTtcbiAgICAgIHJlZiA9IHRoaXMudmVuZG9ycztcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICB2ZW5kb3IgPSByZWZbal07XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdCB8fCBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKFwiLVwiICsgdmVuZG9yICsgXCItXCIgKyBwcm9wZXJ0eSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHZhciBhbmltYXRpb25OYW1lO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYW5pbWF0aW9uTmFtZSA9IHRoaXMudmVuZG9yQ1NTKGJveCwgJ2FuaW1hdGlvbi1uYW1lJykuY3NzVGV4dDtcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICBhbmltYXRpb25OYW1lID0gZ2V0Q29tcHV0ZWRTdHlsZShib3gpLmdldFByb3BlcnR5VmFsdWUoJ2FuaW1hdGlvbi1uYW1lJyk7XG4gICAgICB9XG4gICAgICBpZiAoYW5pbWF0aW9uTmFtZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhbmltYXRpb25OYW1lO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmNhY2hlQW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLnNldChib3gsIHRoaXMuYW5pbWF0aW9uTmFtZShib3gpKTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5jYWNoZWRBbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUuZ2V0KGJveCk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnNjcm9sbENhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYm94O1xuICAgICAgaWYgKHRoaXMuc2Nyb2xsZWQpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJveGVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0cztcbiAgICAgICAgICByZWYgPSB0aGlzLmJveGVzO1xuICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgIGJveCA9IHJlZltqXTtcbiAgICAgICAgICAgIGlmICghKGJveCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUoYm94KSkge1xuICAgICAgICAgICAgICB0aGlzLnNob3coYm94KTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYm94KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghKHRoaXMuYm94ZXMubGVuZ3RoIHx8IHRoaXMuY29uZmlnLmxpdmUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUub2Zmc2V0VG9wID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIHRvcDtcbiAgICAgIHdoaWxlIChlbGVtZW50Lm9mZnNldFRvcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgICB0b3AgPSBlbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgIHdoaWxlIChlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgdG9wICs9IGVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRvcDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5pc1Zpc2libGUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHZhciBib3R0b20sIG9mZnNldCwgdG9wLCB2aWV3Qm90dG9tLCB2aWV3VG9wO1xuICAgICAgb2Zmc2V0ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctb2Zmc2V0JykgfHwgdGhpcy5jb25maWcub2Zmc2V0O1xuICAgICAgdmlld1RvcCA9ICh0aGlzLmNvbmZpZy5zY3JvbGxDb250YWluZXIgJiYgdGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgdmlld0JvdHRvbSA9IHZpZXdUb3AgKyBNYXRoLm1pbih0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0LCB0aGlzLnV0aWwoKS5pbm5lckhlaWdodCgpKSAtIG9mZnNldDtcbiAgICAgIHRvcCA9IHRoaXMub2Zmc2V0VG9wKGJveCk7XG4gICAgICBib3R0b20gPSB0b3AgKyBib3guY2xpZW50SGVpZ2h0O1xuICAgICAgcmV0dXJuIHRvcCA8PSB2aWV3Qm90dG9tICYmIGJvdHRvbSA+PSB2aWV3VG9wO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnV0aWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl91dGlsICE9IG51bGwgPyB0aGlzLl91dGlsIDogdGhpcy5fdXRpbCA9IG5ldyBVdGlsKCk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuZGlzYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5jb25maWcubW9iaWxlICYmIHRoaXMudXRpbCgpLmlzTW9iaWxlKG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV09XO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7Ly8gVklERU8gQkFDS0dST1VORFxuXG4kKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgc2NhbGVWaWRlb0NvbnRhaW5lcigpO1xuXG4gICAgaW5pdEJhbm5lclZpZGVvU2l6ZSgnLnZpZGVvLWNvbnRhaW5lciAucG9zdGVyIGltZycpO1xuICAgIGluaXRCYW5uZXJWaWRlb1NpemUoJy52aWRlby1jb250YWluZXIgLmZpbHRlcicpO1xuICAgIGluaXRCYW5uZXJWaWRlb1NpemUoJy52aWRlby1jb250YWluZXIgdmlkZW8nKTtcblxuICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNjYWxlVmlkZW9Db250YWluZXIoKTtcbiAgICAgICAgc2NhbGVCYW5uZXJWaWRlb1NpemUoJy52aWRlby1jb250YWluZXIgLnBvc3RlciBpbWcnKTtcbiAgICAgICAgc2NhbGVCYW5uZXJWaWRlb1NpemUoJy52aWRlby1jb250YWluZXIgLmZpbHRlcicpO1xuICAgICAgICBzY2FsZUJhbm5lclZpZGVvU2l6ZSgnLnZpZGVvLWNvbnRhaW5lciB2aWRlbycpO1xuICAgIH0pO1xuXG59KTtcblxuZnVuY3Rpb24gc2NhbGVWaWRlb0NvbnRhaW5lcigpIHtcblxuICAgIHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCkgKyA1O1xuICAgIHZhciB1bml0SGVpZ2h0ID0gcGFyc2VJbnQoaGVpZ2h0KSArICdweCc7XG4gICAgJCgnLmhvbWVwYWdlLWhlcm8tbW9kdWxlJykuY3NzKCdoZWlnaHQnLHVuaXRIZWlnaHQpO1xuXG59XG5cbmZ1bmN0aW9uIGluaXRCYW5uZXJWaWRlb1NpemUoZWxlbWVudCl7XG5cbiAgICAkKGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgJCh0aGlzKS5kYXRhKCdoZWlnaHQnLCAkKHRoaXMpLmhlaWdodCgpKTtcbiAgICAgICAgJCh0aGlzKS5kYXRhKCd3aWR0aCcsICQodGhpcykud2lkdGgoKSk7XG4gICAgfSk7XG5cbiAgICBzY2FsZUJhbm5lclZpZGVvU2l6ZShlbGVtZW50KTtcblxufVxuXG5mdW5jdGlvbiBzY2FsZUJhbm5lclZpZGVvU2l6ZShlbGVtZW50KXtcblxuICAgIHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpLFxuICAgIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSArIDUsXG4gICAgdmlkZW9XaWR0aCxcbiAgICB2aWRlb0hlaWdodDtcblxuICAgIC8qIGNvbnNvbGUubG9nKHdpbmRvd0hlaWdodCk7ICovXG5cbiAgICAkKGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHZpZGVvQXNwZWN0UmF0aW8gPSAkKHRoaXMpLmRhdGEoJ2hlaWdodCcpLyQodGhpcykuZGF0YSgnd2lkdGgnKTtcblxuICAgICAgICAkKHRoaXMpLndpZHRoKHdpbmRvd1dpZHRoKTtcblxuICAgICAgICBpZih3aW5kb3dXaWR0aCA8IDEwMDApe1xuICAgICAgICAgICAgdmlkZW9IZWlnaHQgPSB3aW5kb3dIZWlnaHQ7XG4gICAgICAgICAgICB2aWRlb1dpZHRoID0gdmlkZW9IZWlnaHQgLyB2aWRlb0FzcGVjdFJhdGlvO1xuICAgICAgICAgICAgJCh0aGlzKS5jc3MoeydtYXJnaW4tdG9wJyA6IDAsICdtYXJnaW4tbGVmdCcgOiAtKHZpZGVvV2lkdGggLSB3aW5kb3dXaWR0aCkgLyAyICsgJ3B4J30pO1xuXG4gICAgICAgICAgICAkKHRoaXMpLndpZHRoKHZpZGVvV2lkdGgpLmhlaWdodCh2aWRlb0hlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcuaG9tZXBhZ2UtaGVyby1tb2R1bGUgLnZpZGVvLWNvbnRhaW5lciB2aWRlbycpLmFkZENsYXNzKCdmYWRlSW4gYW5pbWF0ZWQnKTtcblxuICAgIH0pO1xufS8vIE1PUlBISU5HIEhBTUJVUkdFUiBJQ09OXG4oZnVuY3Rpb24gKCkge1xuICAgICQoJy5oYW1idXJnZXItbWVudScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYW5pbWF0ZScpXG4gICAgICAgICQoJy5iYXInKS50b2dnbGVDbGFzcygnYW5pbWF0ZScpO1xuICAgIH0pXG59KSgpOy8qXG4gKiBUb2FzdHJcbiAqIENvcHlyaWdodCAyMDEyLTIwMTVcbiAqIEF1dGhvcnM6IEpvaG4gUGFwYSwgSGFucyBGasOkbGxlbWFyaywgYW5kIFRpbSBGZXJyZWxsLlxuICogQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFVzZSwgcmVwcm9kdWN0aW9uLCBkaXN0cmlidXRpb24sIGFuZCBtb2RpZmljYXRpb24gb2YgdGhpcyBjb2RlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZFxuICogY29uZGl0aW9ucyBvZiB0aGUgTUlUIGxpY2Vuc2UsIGF2YWlsYWJsZSBhdCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICpcbiAqIEFSSUEgU3VwcG9ydDogR3JldGEgS3JhZnNpZ1xuICpcbiAqIFByb2plY3Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9Db2RlU2V2ZW4vdG9hc3RyXG4gKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cbihmdW5jdGlvbiAoZGVmaW5lKSB7XG4gICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZ1bmN0aW9uICgkKSB7XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRjb250YWluZXI7XG4gICAgICAgICAgICB2YXIgbGlzdGVuZXI7XG4gICAgICAgICAgICB2YXIgdG9hc3RJZCA9IDA7XG4gICAgICAgICAgICB2YXIgdG9hc3RUeXBlID0ge1xuICAgICAgICAgICAgICAgIGVycm9yOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIGluZm86ICdpbmZvJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgd2FybmluZzogJ3dhcm5pbmcnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdG9hc3RyID0ge1xuICAgICAgICAgICAgICAgIGNsZWFyOiBjbGVhcixcbiAgICAgICAgICAgICAgICByZW1vdmU6IHJlbW92ZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgZ2V0Q29udGFpbmVyOiBnZXRDb250YWluZXIsXG4gICAgICAgICAgICAgICAgaW5mbzogaW5mbyxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmU6IHN1YnNjcmliZSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzLFxuICAgICAgICAgICAgICAgIHZlcnNpb246ICcyLjEuMicsXG4gICAgICAgICAgICAgICAgd2FybmluZzogd2FybmluZ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHByZXZpb3VzVG9hc3Q7XG5cbiAgICAgICAgICAgIHJldHVybiB0b2FzdHI7XG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0b2FzdFR5cGUuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogZ2V0T3B0aW9ucygpLmljb25DbGFzc2VzLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zT3ZlcnJpZGU6IG9wdGlvbnNPdmVycmlkZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENvbnRhaW5lcihvcHRpb25zLCBjcmVhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpIHsgb3B0aW9ucyA9IGdldE9wdGlvbnMoKTsgfVxuICAgICAgICAgICAgICAgICRjb250YWluZXIgPSAkKCcjJyArIG9wdGlvbnMuY29udGFpbmVySWQpO1xuICAgICAgICAgICAgICAgIGlmICgkY29udGFpbmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNyZWF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyID0gY3JlYXRlQ29udGFpbmVyKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnRhaW5lcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaW5mbyhtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRvYXN0VHlwZS5pbmZvLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6IGdldE9wdGlvbnMoKS5pY29uQ2xhc3Nlcy5pbmZvLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zT3ZlcnJpZGU6IG9wdGlvbnNPdmVycmlkZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1YnNjcmliZShjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gY2FsbGJhY2s7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0b2FzdFR5cGUuc3VjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBnZXRPcHRpb25zKCkuaWNvbkNsYXNzZXMuc3VjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc092ZXJyaWRlOiBvcHRpb25zT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdG9hc3RUeXBlLndhcm5pbmcsXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogZ2V0T3B0aW9ucygpLmljb25DbGFzc2VzLndhcm5pbmcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNPdmVycmlkZTogb3B0aW9uc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXIoJHRvYXN0RWxlbWVudCwgY2xlYXJPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgaWYgKCEkY29udGFpbmVyKSB7IGdldENvbnRhaW5lcihvcHRpb25zKTsgfVxuICAgICAgICAgICAgICAgIGlmICghY2xlYXJUb2FzdCgkdG9hc3RFbGVtZW50LCBvcHRpb25zLCBjbGVhck9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29udGFpbmVyKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKCR0b2FzdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBpZiAoISRjb250YWluZXIpIHsgZ2V0Q29udGFpbmVyKG9wdGlvbnMpOyB9XG4gICAgICAgICAgICAgICAgaWYgKCR0b2FzdEVsZW1lbnQgJiYgJCgnOmZvY3VzJywgJHRvYXN0RWxlbWVudCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVRvYXN0KCR0b2FzdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkY29udGFpbmVyLmNoaWxkcmVuKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbnRlcm5hbCBmdW5jdGlvbnNcblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJDb250YWluZXIgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9hc3RzVG9DbGVhciA9ICRjb250YWluZXIuY2hpbGRyZW4oKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdG9hc3RzVG9DbGVhci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRvYXN0KCQodG9hc3RzVG9DbGVhcltpXSksIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJUb2FzdCAoJHRvYXN0RWxlbWVudCwgb3B0aW9ucywgY2xlYXJPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvcmNlID0gY2xlYXJPcHRpb25zICYmIGNsZWFyT3B0aW9ucy5mb3JjZSA/IGNsZWFyT3B0aW9ucy5mb3JjZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICgkdG9hc3RFbGVtZW50ICYmIChmb3JjZSB8fCAkKCc6Zm9jdXMnLCAkdG9hc3RFbGVtZW50KS5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnRbb3B0aW9ucy5oaWRlTWV0aG9kXSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5oaWRlRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuaGlkZUVhc2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IHJlbW92ZVRvYXN0KCR0b2FzdEVsZW1lbnQpOyB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVDb250YWluZXIob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICRjb250YWluZXIgPSAkKCc8ZGl2Lz4nKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBvcHRpb25zLmNvbnRhaW5lcklkKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3Mob3B0aW9ucy5wb3NpdGlvbkNsYXNzKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignYXJpYS1saXZlJywgJ3BvbGl0ZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyb2xlJywgJ2FsZXJ0Jyk7XG5cbiAgICAgICAgICAgICAgICAkY29udGFpbmVyLmFwcGVuZFRvKCQob3B0aW9ucy50YXJnZXQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnRhaW5lcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGFwVG9EaXNtaXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0b2FzdENsYXNzOiAndG9hc3QnLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogJ3RvYXN0LWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnOiBmYWxzZSxcblxuICAgICAgICAgICAgICAgICAgICBzaG93TWV0aG9kOiAnZmFkZUluJywgLy9mYWRlSW4sIHNsaWRlRG93biwgYW5kIHNob3cgYXJlIGJ1aWx0IGludG8galF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgIHNob3dEdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICBzaG93RWFzaW5nOiAnc3dpbmcnLCAvL3N3aW5nIGFuZCBsaW5lYXIgYXJlIGJ1aWx0IGludG8galF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgIG9uU2hvd246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgaGlkZU1ldGhvZDogJ2ZhZGVPdXQnLFxuICAgICAgICAgICAgICAgICAgICBoaWRlRHVyYXRpb246IDEwMDAsXG4gICAgICAgICAgICAgICAgICAgIGhpZGVFYXNpbmc6ICdzd2luZycsXG4gICAgICAgICAgICAgICAgICAgIG9uSGlkZGVuOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlTWV0aG9kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VEdXJhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlRWFzaW5nOiBmYWxzZSxcblxuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZFRpbWVPdXQ6IDEwMDAsXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzc2VzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ3RvYXN0LWVycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86ICd0b2FzdC1pbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICd0b2FzdC1zdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICd0b2FzdC13YXJuaW5nJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6ICd0b2FzdC1pbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25DbGFzczogJ3RvYXN0LXRvcC1yaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVPdXQ6IDUwMDAsIC8vIFNldCB0aW1lT3V0IGFuZCBleHRlbmRlZFRpbWVPdXQgdG8gMCB0byBtYWtlIGl0IHN0aWNreVxuICAgICAgICAgICAgICAgICAgICB0aXRsZUNsYXNzOiAndG9hc3QtdGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQ2xhc3M6ICd0b2FzdC1tZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlSHRtbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJ2JvZHknLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZUh0bWw6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIj4mdGltZXM7PC9idXR0b24+JyxcbiAgICAgICAgICAgICAgICAgICAgbmV3ZXN0T25Ub3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREdXBsaWNhdGVzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXI6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcHVibGlzaChhcmdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsaXN0ZW5lcikgeyByZXR1cm47IH1cbiAgICAgICAgICAgICAgICBsaXN0ZW5lcihhcmdzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbm90aWZ5KG1hcCkge1xuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgICAgIHZhciBpY29uQ2xhc3MgPSBtYXAuaWNvbkNsYXNzIHx8IG9wdGlvbnMuaWNvbkNsYXNzO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAobWFwLm9wdGlvbnNPdmVycmlkZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChvcHRpb25zLCBtYXAub3B0aW9uc092ZXJyaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzID0gbWFwLm9wdGlvbnNPdmVycmlkZS5pY29uQ2xhc3MgfHwgaWNvbkNsYXNzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzaG91bGRFeGl0KG9wdGlvbnMsIG1hcCkpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgICAgICB0b2FzdElkKys7XG5cbiAgICAgICAgICAgICAgICAkY29udGFpbmVyID0gZ2V0Q29udGFpbmVyKG9wdGlvbnMsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGludGVydmFsSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhciAkdG9hc3RFbGVtZW50ID0gJCgnPGRpdi8+Jyk7XG4gICAgICAgICAgICAgICAgdmFyICR0aXRsZUVsZW1lbnQgPSAkKCc8ZGl2Lz4nKTtcbiAgICAgICAgICAgICAgICB2YXIgJG1lc3NhZ2VFbGVtZW50ID0gJCgnPGRpdi8+Jyk7XG4gICAgICAgICAgICAgICAgdmFyICRwcm9ncmVzc0VsZW1lbnQgPSAkKCc8ZGl2Lz4nKTtcbiAgICAgICAgICAgICAgICB2YXIgJGNsb3NlRWxlbWVudCA9ICQob3B0aW9ucy5jbG9zZUh0bWwpO1xuICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzc0JhciA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaGlkZUV0YTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgbWF4SGlkZVRpbWU6IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RJZDogdG9hc3RJZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICd2aXNpYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBwZXJzb25hbGl6ZVRvYXN0KCk7XG5cbiAgICAgICAgICAgICAgICBkaXNwbGF5VG9hc3QoKTtcblxuICAgICAgICAgICAgICAgIGhhbmRsZUV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgcHVibGlzaChyZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWJ1ZyAmJiBjb25zb2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJHRvYXN0RWxlbWVudDtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVzY2FwZUh0bWwoc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IFwiXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmcoc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csICcmIzM5OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBlcnNvbmFsaXplVG9hc3QoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEljb24oKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGl0bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICBzZXRDbG9zZUJ1dHRvbigpO1xuICAgICAgICAgICAgICAgICAgICBzZXRQcm9ncmVzc0JhcigpO1xuICAgICAgICAgICAgICAgICAgICBzZXRTZXF1ZW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZUV2ZW50cygpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5ob3ZlcihzdGlja0Fyb3VuZCwgZGVsYXllZEhpZGVUb2FzdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5vbmNsaWNrICYmIG9wdGlvbnMudGFwVG9EaXNtaXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmNsaWNrKGhpZGVUb2FzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jbG9zZUJ1dHRvbiAmJiAkY2xvc2VFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY2xvc2VFbGVtZW50LmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jYW5jZWxCdWJibGUgIT09IHVuZGVmaW5lZCAmJiBldmVudC5jYW5jZWxCdWJibGUgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVRvYXN0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmNsaWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMub25jbGljayhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVRvYXN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlUb2FzdCgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudFtvcHRpb25zLnNob3dNZXRob2RdKFxuICAgICAgICAgICAgICAgICAgICAgICAge2R1cmF0aW9uOiBvcHRpb25zLnNob3dEdXJhdGlvbiwgZWFzaW5nOiBvcHRpb25zLnNob3dFYXNpbmcsIGNvbXBsZXRlOiBvcHRpb25zLm9uU2hvd259XG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGltZU91dCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsSWQgPSBzZXRUaW1lb3V0KGhpZGVUb2FzdCwgb3B0aW9ucy50aW1lT3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyLm1heEhpZGVUaW1lID0gcGFyc2VGbG9hdChvcHRpb25zLnRpbWVPdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuaGlkZUV0YSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgcHJvZ3Jlc3NCYXIubWF4SGlkZVRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wcm9ncmVzc0Jhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh1cGRhdGVQcm9ncmVzcywgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0SWNvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcC5pY29uQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy50b2FzdENsYXNzKS5hZGRDbGFzcyhpY29uQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0U2VxdWVuY2UoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm5ld2VzdE9uVG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLnByZXBlbmQoJHRvYXN0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLmFwcGVuZCgkdG9hc3RFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldFRpdGxlKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFwLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGl0bGVFbGVtZW50LmFwcGVuZCghb3B0aW9ucy5lc2NhcGVIdG1sID8gbWFwLnRpdGxlIDogZXNjYXBlSHRtbChtYXAudGl0bGUpKS5hZGRDbGFzcyhvcHRpb25zLnRpdGxlQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5hcHBlbmQoJHRpdGxlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRNZXNzYWdlKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFwLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlRWxlbWVudC5hcHBlbmQoIW9wdGlvbnMuZXNjYXBlSHRtbCA/IG1hcC5tZXNzYWdlIDogZXNjYXBlSHRtbChtYXAubWVzc2FnZSkpLmFkZENsYXNzKG9wdGlvbnMubWVzc2FnZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuYXBwZW5kKCRtZXNzYWdlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRDbG9zZUJ1dHRvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2xvc2VCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjbG9zZUVsZW1lbnQuYWRkQ2xhc3MoJ3RvYXN0LWNsb3NlLWJ1dHRvbicpLmF0dHIoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LnByZXBlbmQoJGNsb3NlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRQcm9ncmVzc0JhcigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucHJvZ3Jlc3NCYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRwcm9ncmVzc0VsZW1lbnQuYWRkQ2xhc3MoJ3RvYXN0LXByb2dyZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LnByZXBlbmQoJHByb2dyZXNzRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaG91bGRFeGl0KG9wdGlvbnMsIG1hcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wcmV2ZW50RHVwbGljYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcC5tZXNzYWdlID09PSBwcmV2aW91c1RvYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVG9hc3QgPSBtYXAubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaGlkZVRvYXN0KG92ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBvdmVycmlkZSAmJiBvcHRpb25zLmNsb3NlTWV0aG9kICE9PSBmYWxzZSA/IG9wdGlvbnMuY2xvc2VNZXRob2QgOiBvcHRpb25zLmhpZGVNZXRob2Q7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IG92ZXJyaWRlICYmIG9wdGlvbnMuY2xvc2VEdXJhdGlvbiAhPT0gZmFsc2UgP1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jbG9zZUR1cmF0aW9uIDogb3B0aW9ucy5oaWRlRHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHZhciBlYXNpbmcgPSBvdmVycmlkZSAmJiBvcHRpb25zLmNsb3NlRWFzaW5nICE9PSBmYWxzZSA/IG9wdGlvbnMuY2xvc2VFYXNpbmcgOiBvcHRpb25zLmhpZGVFYXNpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCc6Zm9jdXMnLCAkdG9hc3RFbGVtZW50KS5sZW5ndGggJiYgIW92ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHByb2dyZXNzQmFyLmludGVydmFsSWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRvYXN0RWxlbWVudFttZXRob2RdKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVUb2FzdCgkdG9hc3RFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbkhpZGRlbiAmJiByZXNwb25zZS5zdGF0ZSAhPT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbkhpZGRlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0ZSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmVuZFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1Ymxpc2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxheWVkSGlkZVRvYXN0KCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50aW1lT3V0ID4gMCB8fCBvcHRpb25zLmV4dGVuZGVkVGltZU91dCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsSWQgPSBzZXRUaW1lb3V0KGhpZGVUb2FzdCwgb3B0aW9ucy5leHRlbmRlZFRpbWVPdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIubWF4SGlkZVRpbWUgPSBwYXJzZUZsb2F0KG9wdGlvbnMuZXh0ZW5kZWRUaW1lT3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyLmhpZGVFdGEgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHByb2dyZXNzQmFyLm1heEhpZGVUaW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc3RpY2tBcm91bmQoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChpbnRlcnZhbElkKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuaGlkZUV0YSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuc3RvcCh0cnVlLCB0cnVlKVtvcHRpb25zLnNob3dNZXRob2RdKFxuICAgICAgICAgICAgICAgICAgICAgICAge2R1cmF0aW9uOiBvcHRpb25zLnNob3dEdXJhdGlvbiwgZWFzaW5nOiBvcHRpb25zLnNob3dFYXNpbmd9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZXJjZW50YWdlID0gKChwcm9ncmVzc0Jhci5oaWRlRXRhIC0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSkgLyBwcm9ncmVzc0Jhci5tYXhIaWRlVGltZSkgKiAxMDA7XG4gICAgICAgICAgICAgICAgICAgICRwcm9ncmVzc0VsZW1lbnQud2lkdGgocGVyY2VudGFnZSArICclJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRPcHRpb25zKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgZ2V0RGVmYXVsdHMoKSwgdG9hc3RyLm9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVUb2FzdCgkdG9hc3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkY29udGFpbmVyKSB7ICRjb250YWluZXIgPSBnZXRDb250YWluZXIoKTsgfVxuICAgICAgICAgICAgICAgIGlmICgkdG9hc3RFbGVtZW50LmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoJGNvbnRhaW5lci5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1RvYXN0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KSgpO1xuICAgIH0pO1xufSh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUgOiBmdW5jdGlvbiAoZGVwcywgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykgeyAvL05vZGVcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cudG9hc3RyID0gZmFjdG9yeSh3aW5kb3cualF1ZXJ5KTtcbiAgICB9XG59KSk7XG4vKiBTQ1JPTExJTkcgTkFWQkFSICovXG4vL2pRdWVyeSB0byBjb2xsYXBzZSB0aGUgbmF2YmFyIG9uIHNjcm9sbFxuJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQoXCIubmF2YmFyXCIpLm9mZnNldCgpLnRvcCA+IDUwKSB7XG4gICAgICAgICQoXCIubmF2YmFyLWZpeGVkLXRvcFwiKS5hZGRDbGFzcyhcInRvcC1uYXYtY29sbGFwc2VcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIi5uYXZiYXItZml4ZWQtdG9wXCIpLnJlbW92ZUNsYXNzKFwidG9wLW5hdi1jb2xsYXBzZVwiKTtcbiAgICB9XG59KTtcblxuLy9qUXVlcnkgZm9yIHBhZ2Ugc2Nyb2xsaW5nIGZlYXR1cmUgLSByZXF1aXJlcyBqUXVlcnkgRWFzaW5nIHBsdWdpblxuJChmdW5jdGlvbiAoKSB7XG4gICAgJCgnYS5wYWdlLXNjcm9sbCcpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciAkYW5jaG9yID0gJCh0aGlzKTtcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJCgkYW5jaG9yLmF0dHIoJ2hyZWYnKSkub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDE1MDAsICdlYXNlSW5PdXRFeHBvJyk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG59KTtcbi8qIENPTExBUFNJQkxFICovXG5cbihmdW5jdGlvbiAoJCkge1xuICAgICQuZm4uY29sbGFwc2libGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBhY2NvcmRpb246IHVuZGVmaW5lZFxuICAgICAgICB9O1xuXG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgdmFyICRwYW5lbF9oZWFkZXJzID0gJCh0aGlzKS5maW5kKCc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xuXG4gICAgICAgICAgICB2YXIgY29sbGFwc2libGVfdHlwZSA9ICR0aGlzLmRhdGEoXCJjb2xsYXBzaWJsZVwiKTtcblxuICAgICAgICAgICAgLy8gVHVybiBvZmYgYW55IGV4aXN0aW5nIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgICAgICAkdGhpcy5vZmYoJ2NsaWNrLmNvbGxhcHNlJywgJy5jb2xsYXBzaWJsZS1oZWFkZXInKTtcbiAgICAgICAgICAgICRwYW5lbF9oZWFkZXJzLm9mZignY2xpY2suY29sbGFwc2UnKTtcblxuXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKlxuICAgICAgICAgICAgSGVscGVyIEZ1bmN0aW9uc1xuICAgICAgICAgICAgKioqKioqKioqKioqKioqKi9cblxuICAgICAgICAgICAgLy8gQWNjb3JkaW9uIE9wZW5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFjY29yZGlvbk9wZW4ob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgJHBhbmVsX2hlYWRlcnMgPSAkdGhpcy5maW5kKCc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5wYXJlbnQoKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSwgZmFsc2UpLnNsaWRlRG93bih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2libGluZ3MoJy5jb2xsYXBzaWJsZS1ib2R5Jykuc3RvcCh0cnVlLCBmYWxzZSkuc2xpZGVVcCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkcGFuZWxfaGVhZGVycy5ub3Qob2JqZWN0KS5yZW1vdmVDbGFzcygnYWN0aXZlJykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICRwYW5lbF9oZWFkZXJzLm5vdChvYmplY3QpLnBhcmVudCgpLmNoaWxkcmVuKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSwgZmFsc2UpLnNsaWRlVXAoe1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IFwiZWFzZU91dFF1YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRXhwYW5kYWJsZSBPcGVuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHBhbmRhYmxlT3BlbihvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QucGFyZW50KCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zaWJsaW5ncygnLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsIGZhbHNlKS5zbGlkZURvd24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDM1MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlT3V0UXVhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2hlaWdodCcsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSwgZmFsc2UpLnNsaWRlVXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDM1MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlT3V0UXVhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2hlaWdodCcsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENoZWNrIGlmIG9iamVjdCBpcyBjaGlsZHJlbiBvZiBwYW5lbCBoZWFkZXJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge09iamVjdH0gIG9iamVjdCBKcXVlcnkgb2JqZWN0XG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGl0IGlzIGNoaWxkcmVuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzQ2hpbGRyZW5PZlBhbmVsSGVhZGVyKG9iamVjdCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhbmVsSGVhZGVyID0gZ2V0UGFuZWxIZWFkZXIob2JqZWN0KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBwYW5lbEhlYWRlci5sZW5ndGggPiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBwYW5lbCBoZWFkZXIgZnJvbSBhIGNoaWxkcmVuIGVsZW1lbnRcbiAgICAgICAgICAgICAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IEpxdWVyeSBvYmplY3RcbiAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gcGFuZWwgaGVhZGVyIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRQYW5lbEhlYWRlcihvYmplY3QpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3QuY2xvc2VzdCgnbGkgPiAuY29sbGFwc2libGUtaGVhZGVyJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKioqKiAgRW5kIEhlbHBlciBGdW5jdGlvbnMgICoqKioqL1xuXG5cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWNjb3JkaW9uIHx8IGNvbGxhcHNpYmxlX3R5cGUgPT09IFwiYWNjb3JkaW9uXCIgfHwgY29sbGFwc2libGVfdHlwZSA9PT0gdW5kZWZpbmVkKSB7IC8vIEhhbmRsZSBBY2NvcmRpb25cbiAgICAgICAgICAgICAgICAvLyBBZGQgY2xpY2sgaGFuZGxlciB0byBvbmx5IGRpcmVjdCBjb2xsYXBzaWJsZSBoZWFkZXIgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAkcGFuZWxfaGVhZGVycyA9ICR0aGlzLmZpbmQoJz4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgJHBhbmVsX2hlYWRlcnMub24oJ2NsaWNrLmNvbGxhcHNlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAkKGUudGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDaGlsZHJlbk9mUGFuZWxIZWFkZXIoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBnZXRQYW5lbEhlYWRlcihlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBhY2NvcmRpb25PcGVuKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9wZW4gZmlyc3QgYWN0aXZlXG4gICAgICAgICAgICAgICAgYWNjb3JkaW9uT3BlbigkcGFuZWxfaGVhZGVycy5maWx0ZXIoJy5hY3RpdmUnKS5maXJzdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIEhhbmRsZSBFeHBhbmRhYmxlc1xuICAgICAgICAgICAgICAgICRwYW5lbF9oZWFkZXJzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY2xpY2sgaGFuZGxlciB0byBvbmx5IGRpcmVjdCBjb2xsYXBzaWJsZSBoZWFkZXIgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5vbignY2xpY2suY29sbGFwc2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NoaWxkcmVuT2ZQYW5lbEhlYWRlcihlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBnZXRQYW5lbEhlYWRlcihlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kYWJsZU9wZW4oZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBPcGVuIGFueSBib2RpZXMgdGhhdCBoYXZlIHRoZSBhY3RpdmUgY2xhc3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRhYmxlT3BlbigkKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmNvbGxhcHNpYmxlJykuY29sbGFwc2libGUoKTtcbiAgICB9KTtcbn0oalF1ZXJ5KSk7LyogU0lERSBOQVYgKi9cblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgICB2YXIgbWV0aG9kcyA9IHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICBtZW51V2lkdGg6IDI0MCxcbiAgICAgICAgICAgICAgICBlZGdlOiAnbGVmdCcsXG4gICAgICAgICAgICAgICAgY2xvc2VPbkNsaWNrOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgICQodGhpcykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICB2YXIgbWVudV9pZCA9ICQoXCIjXCIgKyAkdGhpcy5hdHRyKCdkYXRhLWFjdGl2YXRlcycpKTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCB0byB3aWR0aFxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm1lbnVXaWR0aCAhPSAyNDApIHtcbiAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3dpZHRoJywgb3B0aW9ucy5tZW51V2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFkZCBUb3VjaCBBcmVhXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkKCc8ZGl2IGNsYXNzPVwiZHJhZy10YXJnZXRcIj48L2Rpdj4nKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygnbGVmdCcsIC0xICogKG9wdGlvbnMubWVudVdpZHRoICsgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogMFxuICAgICAgICAgICAgICAgICAgICB9KTsgLy8gQWRkIFRvdWNoIEFyZWFcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmFkZENsYXNzKCdyaWdodC1hbGlnbmVkJykgLy8gQ2hhbmdlIHRleHQtYWxpZ25tZW50IHRvIHJpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdyaWdodCcsIC0xICogKG9wdGlvbnMubWVudVdpZHRoICsgMTApKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygnbGVmdCcsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdyaWdodCc6IDBcbiAgICAgICAgICAgICAgICAgICAgfSk7IC8vIEFkZCBUb3VjaCBBcmVhXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgZml4ZWQgc2lkZW5hdiwgYnJpbmcgbWVudSBvdXRcbiAgICAgICAgICAgICAgICBpZiAobWVudV9pZC5oYXNDbGFzcygnZml4ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiA5OTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCdsZWZ0JywgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBXaW5kb3cgcmVzaXplIHRvIHJlc2V0IG9uIGxhcmdlIHNjcmVlbnMgZml4ZWRcbiAgICAgICAgICAgICAgICBpZiAobWVudV9pZC5oYXNDbGFzcygnZml4ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDk5Mikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsb3NlIG1lbnUgaWYgd2luZG93IGlzIHJlc2l6ZWQgYmlnZ2VyIHRoYW4gOTkyIGFuZCB1c2VyIGhhcyBmaXhlZCBzaWRlbmF2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNzaWRlbmF2LW92ZXJsYXknKS5jc3MoJ29wYWNpdHknKSAhPT0gMCAmJiBtZW51T3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU1lbnUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygnd2lkdGgnLCBvcHRpb25zLm1lbnVXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZW51T3V0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT09ICdsZWZ0JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ2xlZnQnLCAtMSAqIChvcHRpb25zLm1lbnVXaWR0aCArIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygncmlnaHQnLCAtMSAqIChvcHRpb25zLm1lbnVXaWR0aCArIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgY2xvc2VPbkNsaWNrLCB0aGVuIGFkZCBjbG9zZSBldmVudCBmb3IgYWxsIGEgdGFncyBpbiBzaWRlIHNpZGVOYXZcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jbG9zZU9uQ2xpY2sgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5vbihcImNsaWNrLml0ZW1jbGlja1wiLCBcImE6bm90KC5jb2xsYXBzaWJsZS1oZWFkZXIpXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTWVudShyZXN0b3JlTmF2KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbWVudU91dCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZW5hYmxlIHNjcm9sbGluZ1xuICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICcnKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBwaGFudG9tIGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtMSAqIChvcHRpb25zLm1lbnVXaWR0aCArIDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3RvcmVOYXYgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgRml4ZWQgc2lkZW5hdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3dpZHRoJywgb3B0aW9ucy5tZW51V2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHBoYW50b20gZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZy10YXJnZXQnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJzAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtMSAqIChvcHRpb25zLm1lbnVXaWR0aCArIDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3RvcmVOYXYgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgRml4ZWQgc2lkZW5hdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3dpZHRoJywgb3B0aW9ucy5tZW51V2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAgICAgLy8gVG91Y2ggRXZlbnRcbiAgICAgICAgICAgICAgICB2YXIgcGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBtZW51T3V0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAkKCcuZHJhZy10YXJnZXQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZU1lbnUoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLmhhbW1lcih7XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnRfZGVmYXVsdDogZmFsc2VcbiAgICAgICAgICAgICAgICB9KS5iaW5kKCdwYW4nLCBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmdlc3R1cmUucG9pbnRlclR5cGUgPT0gXCJ0b3VjaFwiKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlLmdlc3R1cmUuZGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBlLmdlc3R1cmUuY2VudGVyLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGUuZ2VzdHVyZS5jZW50ZXIueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZWxvY2l0eVggPSBlLmdlc3R1cmUudmVsb2NpdHlYO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIFNjcm9sbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG92ZXJsYXkgZG9lcyBub3QgZXhpc3QsIGNyZWF0ZSBvbmUgYW5kIGlmIGl0IGlzIGNsaWNrZWQsIGNsb3NlIG1lbnVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcjc2lkZW5hdi1vdmVybGF5JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG92ZXJsYXkgPSAkKCc8ZGl2IGlkPVwic2lkZW5hdi1vdmVybGF5XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5jc3MoJ29wYWNpdHknLCAwKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKG92ZXJsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHdpdGhpbiBib3VuZGFyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCA+IG9wdGlvbnMubWVudVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBvcHRpb25zLm1lbnVXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVmdCBEaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCA8IChvcHRpb25zLm1lbnVXaWR0aCAvIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVPdXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHQgRGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA+PSAob3B0aW9ucy5tZW51V2lkdGggLyAyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51T3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygnbGVmdCcsICh4IC0gb3B0aW9ucy5tZW51V2lkdGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVmdCBEaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCA8ICh3aW5kb3cuaW5uZXJXaWR0aCAtIG9wdGlvbnMubWVudVdpZHRoIC8gMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudU91dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJpZ2h0IERpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHggPj0gKHdpbmRvdy5pbm5lcldpZHRoIC0gb3B0aW9ucy5tZW51V2lkdGggLyAyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51T3V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodFBvcyA9IC0xICogKHggLSBvcHRpb25zLm1lbnVXaWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyaWdodFBvcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRQb3MgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCdyaWdodCcsIHJpZ2h0UG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGVyY2VudGFnZSBvdmVybGF5XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlcmxheVBlcmM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5UGVyYyA9IHggLyBvcHRpb25zLm1lbnVXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBvdmVybGF5UGVyY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5UGVyYyA9IE1hdGguYWJzKCh4IC0gd2luZG93LmlubmVyV2lkdGgpIC8gb3B0aW9ucy5tZW51V2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaWRlbmF2LW92ZXJsYXknKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IG92ZXJsYXlQZXJjXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pLmJpbmQoJ3BhbmVuZCcsIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZ2VzdHVyZS5wb2ludGVyVHlwZSA9PSBcInRvdWNoXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZWxvY2l0eVggPSBlLmdlc3R1cmUudmVsb2NpdHlYO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmVsb2NpdHlYIDw9IDAuMyB0aGVuIHRoZSB1c2VyIGlzIGZsaW5naW5nIHRoZSBtZW51IGNsb3NlZCBzbyBpZ25vcmUgbWVudU91dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobWVudU91dCAmJiB2ZWxvY2l0eVggPD0gMC4zKSB8fCB2ZWxvY2l0eVggPCAtMC41KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzUwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW1lbnVPdXQgfHwgdmVsb2NpdHlYID4gMC4zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuYWJsZSBTY3JvbGxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNsaWRlIG1lbnUgY2xvc2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogLTEgKiAob3B0aW9ucy5tZW51V2lkdGggKyAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGVuYXYtb3ZlcmxheScpLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobWVudU91dCAmJiB2ZWxvY2l0eVggPj0gLTAuMykgfHwgdmVsb2NpdHlYID4gMC41KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGVuYXYtb3ZlcmxheScpLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZy10YXJnZXQnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICc1MCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFtZW51T3V0IHx8IHZlbG9jaXR5WCA8IC0wLjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5hYmxlIFNjcm9sbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2xpZGUgbWVudSBjbG9zZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogLTEgKiAob3B0aW9ucy5tZW51V2lkdGggKyAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGVuYXYtb3ZlcmxheScpLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJHRoaXMuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVudU91dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVudU91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIFNjcm9sbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnNTAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnNTAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCdsZWZ0JywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlcmxheSA9ICQoJzxkaXYgaWQ9XCJzaWRlbmF2LW92ZXJsYXlcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuY3NzKCdvcGFjaXR5JywgMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51T3V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQob3ZlcmxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVPdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH0sXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGlkZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnI3NpZGVuYXYtb3ZlcmxheScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAkLmZuLnNpZGVOYXYgPSBmdW5jdGlvbiAobWV0aG9kT3JPcHRpb25zKSB7XG4gICAgICAgIGlmIChtZXRob2RzW21ldGhvZE9yT3B0aW9uc10pIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RzW21ldGhvZE9yT3B0aW9uc10uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gJ29iamVjdCcgfHwgIW1ldGhvZE9yT3B0aW9ucykge1xuICAgICAgICAgICAgLy8gRGVmYXVsdCB0byBcImluaXRcIlxuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJC5lcnJvcignTWV0aG9kICcgKyBtZXRob2RPck9wdGlvbnMgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5zaWRlTmF2Jyk7XG4gICAgICAgIH1cbiAgICB9OyAvLyBQbHVnaW4gZW5kXG59KGpRdWVyeSkpOy8qIExFQU4gTU9EQUwgKi9cblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgdmFyIF9zdGFjayA9IDAsXG4gICAgICAgIF9sYXN0SUQgPSAwLFxuICAgICAgICBfZ2VuZXJhdGVJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sYXN0SUQrKztcbiAgICAgICAgICAgIHJldHVybiAnbWF0ZXJpYWxpemUtbGVhbi1vdmVybGF5LScgKyBfbGFzdElEO1xuICAgICAgICB9O1xuXG4gICAgJC5mbi5leHRlbmQoe1xuICAgICAgICBvcGVuTW9kYWw6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuXG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNSxcbiAgICAgICAgICAgICAgICAgICAgaW5fZHVyYXRpb246IDM1MCxcbiAgICAgICAgICAgICAgICAgICAgb3V0X2R1cmF0aW9uOiAyNTAsXG4gICAgICAgICAgICAgICAgICAgIHJlYWR5OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdGFydGluZ190b3A6ICc0JSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG92ZXJsYXlJRCA9IF9nZW5lcmF0ZUlEKCksXG4gICAgICAgICAgICAgICAgJG1vZGFsID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAkb3ZlcmxheSA9ICQoJzxkaXYgY2xhc3M9XCJsZWFuLW92ZXJsYXlcIj48L2Rpdj4nKSxcbiAgICAgICAgICAgICAgICBsU3RhY2sgPSAoKytfc3RhY2spO1xuXG4gICAgICAgICAgICAvLyBTdG9yZSBhIHJlZmVyZW5jZSBvZiB0aGUgb3ZlcmxheVxuICAgICAgICAgICAgJG92ZXJsYXkuYXR0cignaWQnLCBvdmVybGF5SUQpLmNzcygnei1pbmRleCcsIDEwMDAgKyBsU3RhY2sgKiAyKTtcbiAgICAgICAgICAgICRtb2RhbC5kYXRhKCdvdmVybGF5LWlkJywgb3ZlcmxheUlEKS5jc3MoJ3otaW5kZXgnLCAxMDAwICsgbFN0YWNrICogMiArIDEpO1xuXG4gICAgICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQoJG92ZXJsYXkpO1xuXG4gICAgICAgICAgICAvLyBPdmVycmlkZSBkZWZhdWx0c1xuICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlzbWlzc2libGUpIHtcbiAgICAgICAgICAgICAgICAkb3ZlcmxheS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRtb2RhbC5jbG9zZU1vZGFsKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiBvbiBFU0NcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAubGVhbk1vZGFsJyArIG92ZXJsYXlJRCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsgLy8gRVNDIGtleVxuICAgICAgICAgICAgICAgICAgICAgICAgJG1vZGFsLmNsb3NlTW9kYWwob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJG1vZGFsLmZpbmQoXCIubW9kYWwtY2xvc2VcIikub24oJ2NsaWNrLmNsb3NlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAkbW9kYWwuY2xvc2VNb2RhbChvcHRpb25zKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkb3ZlcmxheS5jc3Moe1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkb3ZlcmxheS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogb3B0aW9ucy5vcGFjaXR5XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuaW5fZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVhc2U6IFwiZWFzZU91dEN1YmljXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJG1vZGFsLmRhdGEoJ2Fzc29jaWF0ZWQtb3ZlcmxheScsICRvdmVybGF5WzBdKTtcblxuICAgICAgICAgICAgLy8gRGVmaW5lIEJvdHRvbSBTaGVldCBhbmltYXRpb25cbiAgICAgICAgICAgIGlmICgkbW9kYWwuaGFzQ2xhc3MoJ2JvdHRvbS1zaGVldCcpKSB7XG4gICAgICAgICAgICAgICAgJG1vZGFsLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBcIjBcIixcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuaW5fZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogXCJlYXNlT3V0Q3ViaWNcIixcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG1vZGFsIHJlYWR5IGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChvcHRpb25zLnJlYWR5KSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZWFkeSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQuVmVsb2NpdHkuaG9vaygkbW9kYWwsIFwic2NhbGVYXCIsIDAuNyk7XG4gICAgICAgICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogb3B0aW9ucy5zdGFydGluZ190b3BcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkbW9kYWwudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IFwiMTAlXCIsXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWDogJzEnXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5pbl9kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBcImVhc2VPdXRDdWJpY1wiLFxuICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbW9kYWwgcmVhZHkgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG9wdGlvbnMucmVhZHkpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlYWR5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgY2xvc2VNb2RhbDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3V0X2R1cmF0aW9uOiAyNTAsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICRtb2RhbCA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgb3ZlcmxheUlEID0gJG1vZGFsLmRhdGEoJ292ZXJsYXktaWQnKSxcbiAgICAgICAgICAgICAgICAkb3ZlcmxheSA9ICQoJyMnICsgb3ZlcmxheUlEKTtcblxuICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSBzY3JvbGxpbmdcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJycpO1xuXG4gICAgICAgICAgICAkbW9kYWwuZmluZCgnLm1vZGFsLWNsb3NlJykub2ZmKCdjbGljay5jbG9zZScpO1xuICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdrZXl1cC5sZWFuTW9kYWwnICsgb3ZlcmxheUlEKTtcblxuICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5vdXRfZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVhc2U6IFwiZWFzZU91dFF1YXJ0XCJcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIC8vIERlZmluZSBCb3R0b20gU2hlZXQgYW5pbWF0aW9uXG4gICAgICAgICAgICBpZiAoJG1vZGFsLmhhc0NsYXNzKCdib3R0b20tc2hlZXQnKSkge1xuICAgICAgICAgICAgICAgICRtb2RhbC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogXCItMTAwJVwiLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5vdXRfZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogXCJlYXNlT3V0Q3ViaWNcIixcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG1vZGFsIHJlYWR5IGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkb3ZlcmxheS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCBjb21wbGV0ZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAob3B0aW9ucy5jb21wbGV0ZSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3N0YWNrLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJG1vZGFsLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBvcHRpb25zLnN0YXJ0aW5nX3RvcCxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiAwLjdcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLm91dF9kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCBjb21wbGV0ZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAob3B0aW9ucy5jb21wbGV0ZSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3N0YWNrLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJC5mbi5leHRlbmQoe1xuICAgICAgICBsZWFuTW9kYWw6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRpbmdfdG9wOiAnNCUnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIGRlZmF1bHRzXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9uKTtcblxuICAgICAgICAgICAgICAgIC8vIENsb3NlIEhhbmRsZXJzXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0YXJ0aW5nX3RvcCA9ICgkKHRoaXMpLm9mZnNldCgpLnRvcCAtICQod2luZG93KS5zY3JvbGxUb3AoKSkgLyAxLjE1O1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kYWxfaWQgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAgICAgICAgICAgICAgICQobW9kYWxfaWQpLm9wZW5Nb2RhbChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0pOyAvLyBkb25lIHNldCBvbiBjbGlja1xuICAgICAgICAgICAgfSk7IC8vIGRvbmUgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9KTtcbn0pKGpRdWVyeSk7LyogTUFURVJJQUxCT1ggKi9cblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgICAkLmZuLm1hdGVyaWFsYm94ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnaW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaW5pdGlhbGl6ZWQnKTtcblxuICAgICAgICAgICAgdmFyIG92ZXJsYXlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBkb25lQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBpbkR1cmF0aW9uID0gMjc1O1xuICAgICAgICAgICAgdmFyIG91dER1cmF0aW9uID0gMjAwO1xuICAgICAgICAgICAgdmFyIG9yaWdpbiA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSAkKCc8ZGl2PjwvZGl2PicpLmFkZENsYXNzKCdtYXRlcmlhbC1wbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSAwO1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIG9yaWdpbi53cmFwKHBsYWNlaG9sZGVyKTtcblxuXG4gICAgICAgICAgICBvcmlnaW4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSBvcmlnaW4ud2lkdGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSBvcmlnaW4uaGVpZ2h0KCk7XG5cblxuICAgICAgICAgICAgICAgIC8vIElmIGFscmVhZHkgbW9kYWwsIHJldHVybiB0byBvcmlnaW5hbFxuICAgICAgICAgICAgICAgIGlmIChkb25lQW5pbWF0aW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub09yaWdpbmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG92ZXJsYXlBY3RpdmUgJiYgZG9uZUFuaW1hdGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub09yaWdpbmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8vIFNldCBzdGF0ZXNcbiAgICAgICAgICAgICAgICBkb25lQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgb3JpZ2luLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBvdmVybGF5QWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCBwb3NpdGlvbmluZyBmb3IgcGxhY2Vob2xkZXJcblxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBwbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBwbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgY3NzIG9uIG9yaWdpblxuICAgICAgICAgICAgICAgIG9yaWdpbi5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnei1pbmRleCc6IDEwMDBcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ3dpZHRoJywgb3JpZ2luYWxXaWR0aClcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ2hlaWdodCcsIG9yaWdpbmFsSGVpZ2h0KTtcblxuICAgICAgICAgICAgICAgIC8vIEFkZCBvdmVybGF5XG4gICAgICAgICAgICAgICAgdmFyIG92ZXJsYXkgPSAkKCc8ZGl2IGlkPVwibWF0ZXJpYWxib3gtb3ZlcmxheVwiPjwvZGl2PicpXG4gICAgICAgICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmVBbmltYXRpbmcgPT09IHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBBbmltYXRlIE92ZXJsYXlcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKG92ZXJsYXkpO1xuICAgICAgICAgICAgICAgIG92ZXJsYXkudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogaW5EdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGFuZCBhbmltYXRlIGNhcHRpb24gaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdjYXB0aW9uJykgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRwaG90b19jYXB0aW9uID0gJCgnPGRpdiBjbGFzcz1cIm1hdGVyaWFsYm94LWNhcHRpb25cIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgJHBob3RvX2NhcHRpb24udGV4dChvcmlnaW4uZGF0YSgnY2FwdGlvbicpKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkcGhvdG9fY2FwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICRwaG90b19jYXB0aW9uLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRpc3BsYXlcIjogXCJpbmxpbmVcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgJHBob3RvX2NhcHRpb24udmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogaW5EdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAgICAgLy8gUmVzaXplIEltYWdlXG4gICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGhQZXJjZW50ID0gb3JpZ2luYWxXaWR0aCAvIHdpbmRvd1dpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRQZXJjZW50ID0gb3JpZ2luYWxIZWlnaHQgLyB3aW5kb3dIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1dpZHRoID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gMDtcblxuICAgICAgICAgICAgICAgIGlmICh3aWR0aFBlcmNlbnQgPiBoZWlnaHRQZXJjZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvID0gb3JpZ2luYWxIZWlnaHQgLyBvcmlnaW5hbFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBuZXdXaWR0aCA9IHdpbmRvd1dpZHRoICogMC45O1xuICAgICAgICAgICAgICAgICAgICBuZXdIZWlnaHQgPSB3aW5kb3dXaWR0aCAqIDAuOSAqIHJhdGlvO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvID0gb3JpZ2luYWxXaWR0aCAvIG9yaWdpbmFsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBuZXdXaWR0aCA9ICh3aW5kb3dIZWlnaHQgKiAwLjkpICogcmF0aW87XG4gICAgICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IHdpbmRvd0hlaWdodCAqIDAuOTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBbmltYXRlIGltYWdlICsgc2V0IHotaW5kZXhcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luLmhhc0NsYXNzKCdyZXNwb25zaXZlLWltZycpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbi52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWF4LXdpZHRoJzogbmV3V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiBvcmlnaW5hbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogbmV3SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBuZXdXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgKyB3aW5kb3dXaWR0aCAvIDIgLSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKS5vZmZzZXQoKS5sZWZ0IC0gbmV3V2lkdGggLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgKyB3aW5kb3dIZWlnaHQgLyAyIC0gb3JpZ2luLnBhcmVudCgnLm1hdGVyaWFsLXBsYWNlaG9sZGVyJykub2Zmc2V0KCkudG9wIC0gbmV3SGVpZ2h0IC8gMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBpbkR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZUFuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBFbmQgQ29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgfSk7IC8vIEVuZCBWZWxvY2l0eVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbi5jc3MoJ2xlZnQnLCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygndG9wJywgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBuZXdIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG5ld1dpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSArIHdpbmRvd1dpZHRoIC8gMiAtIG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpLm9mZnNldCgpLmxlZnQgLSBuZXdXaWR0aCAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSArIHdpbmRvd0hlaWdodCAvIDIgLSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKS5vZmZzZXQoKS50b3AgLSBuZXdIZWlnaHQgLyAyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGluRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gRW5kIFZlbG9jaXR5XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTsgLy8gRW5kIG9yaWdpbiBvbiBjbGlja1xuXG5cbiAgICAgICAgICAgIC8vIFJldHVybiBvbiBzY3JvbGxcbiAgICAgICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChvdmVybGF5QWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRvT3JpZ2luYWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmV0dXJuIG9uIEVTQ1xuICAgICAgICAgICAgJChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3ICYmIGRvbmVBbmltYXRpbmcgPT09IHRydWUpIHsgLy8gRVNDIGtleVxuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheUFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBtb2RhbGVkIGltYWdlIHRvIHRoZSBvcmlnaW5hbCBzcG90XG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub09yaWdpbmFsKCkge1xuXG4gICAgICAgICAgICAgICAgZG9uZUFuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gb3JpZ2luLnBhcmVudCgnLm1hdGVyaWFsLXBsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxXaWR0aCA9IG9yaWdpbi5kYXRhKCd3aWR0aCcpO1xuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbEhlaWdodCA9IG9yaWdpbi5kYXRhKCdoZWlnaHQnKTtcblxuICAgICAgICAgICAgICAgIG9yaWdpbi52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgJCgnI21hdGVyaWFsYm94LW92ZXJsYXknKS52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgJCgnLm1hdGVyaWFsYm94LWNhcHRpb24nKS52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XG5cblxuICAgICAgICAgICAgICAgICQoJyNtYXRlcmlhbGJveC1vdmVybGF5JykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3V0RHVyYXRpb24sIC8vIERlbGF5IHByZXZlbnRzIGFuaW1hdGlvbiBvdmVybGFwcGluZ1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBPdmVybGF5XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5QWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXNpemUgSW1hZ2VcbiAgICAgICAgICAgICAgICBvcmlnaW4udmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogb3JpZ2luYWxXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBvcmlnaW5hbEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3V0RHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgQ2FwdGlvbiArIHJlc2V0IGNzcyBzZXR0aW5ncyBvbiBpbWFnZVxuICAgICAgICAgICAgICAgICQoJy5tYXRlcmlhbGJveC1jYXB0aW9uJykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3V0RHVyYXRpb24sIC8vIERlbGF5IHByZXZlbnRzIGFuaW1hdGlvbiBvdmVybGFwcGluZ1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW4uY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXgtd2lkdGgnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3otaW5kZXgnOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzc1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5tYXRlcmlhbGJveGVkJykubWF0ZXJpYWxib3goKTtcbiAgICB9KTtcblxufShqUXVlcnkpKTsvKiBQUk9HUkVTUyBCQVIgKi9cbnZhciBiYXIgPSAkKCcucHJvZ3Jlc3MtYmFyLWFuaW1hdGVkJyk7XG4kKGZ1bmN0aW9uICgpIHtcbiAgICAkKGJhcikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJhcl93aWR0aCA9ICQodGhpcykuYXR0cignYXJpYS12YWx1ZW5vdycpO1xuICAgICAgICAkKHRoaXMpLndpZHRoKGJhcl93aWR0aCArICclJyk7XG4gICAgfSk7XG59KTtcblxuLyogUEFORUwgKi9cblxuZnVuY3Rpb24gdXBUbyhlbCwgdGFnTmFtZSkge1xuICAgIHRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgd2hpbGUgKGVsICYmIGVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xuICAgICAgICBpZiAoZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gdGFnTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFueSBET00gbWV0aG9kcyByZXR1cm4gbnVsbCBpZiB0aGV5IGRvbid0IFxuICAgIC8vIGZpbmQgdGhlIGVsZW1lbnQgdGhleSBhcmUgc2VhcmNoaW5nIGZvclxuICAgIC8vIEl0IHdvdWxkIGJlIE9LIHRvIG9taXQgdGhlIGZvbGxvd2luZyBhbmQganVzdFxuICAgIC8vIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gbnVsbDtcbn1cbi8vQWRkIC8gcmVtb3ZlIGFjdGl2ZSBjbGFzcyB0byBMSSBlbGVtZW50IGluc2lkZSBwb3BvdXQgXG52YXIgc2VsZWN0b3IgPSAnLnBvcG91dCAucGFuZWwtaGVhZGluZyc7XG52YXIgcGFyZW50U2VsZWN0b3IgPSAnLnBvcG91dCAucGFuZWwgLmFjdGl2ZSc7XG5cbiQoc2VsZWN0b3IpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgIHBhcmVudERpdiA9IHVwVG8odGhpcywgJ0RJVicpO1xuICAgIGNvbnNvbGUubG9nKHBhcmVudERpdik7XG4gICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG5cbiAgICAgICAgJChzZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKFwiLnBvcG91dCAucGFuZWxcIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChzZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKFwiLnBvcG91dCAucGFuZWxcIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJChwYXJlbnREaXYpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG59KTsvL0NvbGxhcHNlIG90aGVyIHRhYnMgZm9yIHBvcG91dCBcbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhY3RpdmUgPSB0cnVlO1xuXG4gICAgJCgnI2FjY29yZGlvbicpLm9uKCdzaG93LmJzLmNvbGxhcHNlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYWN0aXZlKSAkKCcjYWNjb3JkaW9uIC5pbicpLmNvbGxhcHNlKCdoaWRlJyk7XG4gICAgfSk7XG5cbn0pO1xuLyogQ0hBUkFDVEVSIENPVU5URVIgKi9cblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgICAkLmZuLmNoYXJhY3RlckNvdW50ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgaXRIYXNMZW5ndGhBdHRyaWJ1dGUgPSAkKHRoaXMpLmF0dHIoJ2xlbmd0aCcpICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGlmIChpdEhhc0xlbmd0aEF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICAgICQodGhpcykub24oJ2lucHV0JywgdXBkYXRlQ291bnRlcik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vbignZm9jdXMnLCB1cGRhdGVDb3VudGVyKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKCdibHVyJywgcmVtb3ZlQ291bnRlckVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgYWRkQ291bnRlckVsZW1lbnQoJCh0aGlzKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvdW50ZXIoKSB7XG4gICAgICAgIHZhciBtYXhMZW5ndGggPSArJCh0aGlzKS5hdHRyKCdsZW5ndGgnKSxcbiAgICAgICAgICAgIGFjdHVhbExlbmd0aCA9ICskKHRoaXMpLnZhbCgpLmxlbmd0aCxcbiAgICAgICAgICAgIGlzVmFsaWRMZW5ndGggPSBhY3R1YWxMZW5ndGggPD0gbWF4TGVuZ3RoO1xuXG4gICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnc3BhbltjbGFzcz1cImNoYXJhY3Rlci1jb3VudGVyXCJdJylcbiAgICAgICAgICAgIC5odG1sKGFjdHVhbExlbmd0aCArICcvJyArIG1heExlbmd0aCk7XG5cbiAgICAgICAgYWRkSW5wdXRTdHlsZShpc1ZhbGlkTGVuZ3RoLCAkKHRoaXMpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRDb3VudGVyRWxlbWVudCgkaW5wdXQpIHtcbiAgICAgICAgdmFyICRjb3VudGVyRWxlbWVudCA9ICQoJzxzcGFuLz4nKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdjaGFyYWN0ZXItY291bnRlcicpXG4gICAgICAgICAgICAuY3NzKCdmbG9hdCcsICdyaWdodCcpXG4gICAgICAgICAgICAuY3NzKCdmb250LXNpemUnLCAnMTJweCcpXG4gICAgICAgICAgICAuY3NzKCdoZWlnaHQnLCAxKTtcblxuICAgICAgICAkaW5wdXQucGFyZW50KCkuYXBwZW5kKCRjb3VudGVyRWxlbWVudCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlQ291bnRlckVsZW1lbnQoKSB7XG4gICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnc3BhbltjbGFzcz1cImNoYXJhY3Rlci1jb3VudGVyXCJdJykuaHRtbCgnJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkSW5wdXRTdHlsZShpc1ZhbGlkTGVuZ3RoLCAkaW5wdXQpIHtcbiAgICAgICAgdmFyIGlucHV0SGFzSW52YWxpZENsYXNzID0gJGlucHV0Lmhhc0NsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgIGlmIChpc1ZhbGlkTGVuZ3RoICYmIGlucHV0SGFzSW52YWxpZENsYXNzKSB7XG4gICAgICAgICAgICAkaW5wdXQucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgfSBlbHNlIGlmICghaXNWYWxpZExlbmd0aCAmJiAhaW5wdXRIYXNJbnZhbGlkQ2xhc3MpIHtcbiAgICAgICAgICAgICRpbnB1dC5yZW1vdmVDbGFzcygndmFsaWQnKTtcbiAgICAgICAgICAgICRpbnB1dC5hZGRDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdpbnB1dCwgdGV4dGFyZWEnKS5jaGFyYWN0ZXJDb3VudGVyKCk7XG4gICAgfSk7XG5cbn0oalF1ZXJ5KSk7LyohXG4gKiBwaWNrYWRhdGUuanMgdjMuNS4wLCAyMDE0LzA0LzEzXG4gKiBCeSBBbXN1bCwgaHR0cDovL2Ftc3VsLmNhXG4gKiBIb3N0ZWQgb24gaHR0cDovL2Ftc3VsLmdpdGh1Yi5pby9waWNrYWRhdGUuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVFxuICovXG5cbihmdW5jdGlvbiAoIGZhY3RvcnkgKSB7XG5cbiAgICAvLyBBTUQuXG4gICAgaWYgKCB0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApXG4gICAgICAgIGRlZmluZSggJ3BpY2tlcicsIFsnanF1ZXJ5J10sIGZhY3RvcnkgKVxuXG4gICAgLy8gTm9kZS5qcy9icm93c2VyaWZ5LlxuICAgIGVsc2UgaWYgKCB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyApXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSggcmVxdWlyZSgnanF1ZXJ5JykgKVxuXG4gICAgLy8gQnJvd3NlciBnbG9iYWxzLlxuICAgIGVsc2UgdGhpcy5QaWNrZXIgPSBmYWN0b3J5KCBqUXVlcnkgKVxuXG59KGZ1bmN0aW9uKCAkICkge1xuXG52YXIgJHdpbmRvdyA9ICQoIHdpbmRvdyApXG52YXIgJGRvY3VtZW50ID0gJCggZG9jdW1lbnQgKVxudmFyICRodG1sID0gJCggZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IClcblxuXG4vKipcbiAqIFRoZSBwaWNrZXIgY29uc3RydWN0b3IgdGhhdCBjcmVhdGVzIGEgYmxhbmsgcGlja2VyLlxuICovXG5mdW5jdGlvbiBQaWNrZXJDb25zdHJ1Y3RvciggRUxFTUVOVCwgTkFNRSwgQ09NUE9ORU5ULCBPUFRJT05TICkge1xuXG4gICAgLy8gSWYgdGhlcmXigJlzIG5vIGVsZW1lbnQsIHJldHVybiB0aGUgcGlja2VyIGNvbnN0cnVjdG9yLlxuICAgIGlmICggIUVMRU1FTlQgKSByZXR1cm4gUGlja2VyQ29uc3RydWN0b3JcblxuXG4gICAgdmFyXG4gICAgICAgIElTX0RFRkFVTFRfVEhFTUUgPSBmYWxzZSxcblxuXG4gICAgICAgIC8vIFRoZSBzdGF0ZSBvZiB0aGUgcGlja2VyLlxuICAgICAgICBTVEFURSA9IHtcbiAgICAgICAgICAgIGlkOiBFTEVNRU5ULmlkIHx8ICdQJyArIE1hdGguYWJzKCB+fihNYXRoLnJhbmRvbSgpICogbmV3IERhdGUoKSkgKVxuICAgICAgICB9LFxuXG5cbiAgICAgICAgLy8gTWVyZ2UgdGhlIGRlZmF1bHRzIGFuZCBvcHRpb25zIHBhc3NlZC5cbiAgICAgICAgU0VUVElOR1MgPSBDT01QT05FTlQgPyAkLmV4dGVuZCggdHJ1ZSwge30sIENPTVBPTkVOVC5kZWZhdWx0cywgT1BUSU9OUyApIDogT1BUSU9OUyB8fCB7fSxcblxuXG4gICAgICAgIC8vIE1lcmdlIHRoZSBkZWZhdWx0IGNsYXNzZXMgd2l0aCB0aGUgc2V0dGluZ3MgY2xhc3Nlcy5cbiAgICAgICAgQ0xBU1NFUyA9ICQuZXh0ZW5kKCB7fSwgUGlja2VyQ29uc3RydWN0b3Iua2xhc3NlcygpLCBTRVRUSU5HUy5rbGFzcyApLFxuXG5cbiAgICAgICAgLy8gVGhlIGVsZW1lbnQgbm9kZSB3cmFwcGVyIGludG8gYSBqUXVlcnkgb2JqZWN0LlxuICAgICAgICAkRUxFTUVOVCA9ICQoIEVMRU1FTlQgKSxcblxuXG4gICAgICAgIC8vIFBzZXVkbyBwaWNrZXIgY29uc3RydWN0b3IuXG4gICAgICAgIFBpY2tlckluc3RhbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydCgpXG4gICAgICAgIH0sXG5cblxuICAgICAgICAvLyBUaGUgcGlja2VyIHByb3RvdHlwZS5cbiAgICAgICAgUCA9IFBpY2tlckluc3RhbmNlLnByb3RvdHlwZSA9IHtcblxuICAgICAgICAgICAgY29uc3RydWN0b3I6IFBpY2tlckluc3RhbmNlLFxuXG4gICAgICAgICAgICAkbm9kZTogJEVMRU1FTlQsXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJbml0aWFsaXplIGV2ZXJ5dGhpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgaXTigJlzIGFscmVhZHkgc3RhcnRlZCwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgICBpZiAoIFNUQVRFICYmIFNUQVRFLnN0YXJ0ICkgcmV0dXJuIFBcblxuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwaWNrZXIgc3RhdGVzLlxuICAgICAgICAgICAgICAgIFNUQVRFLm1ldGhvZHMgPSB7fVxuICAgICAgICAgICAgICAgIFNUQVRFLnN0YXJ0ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIFNUQVRFLm9wZW4gPSBmYWxzZVxuICAgICAgICAgICAgICAgIFNUQVRFLnR5cGUgPSBFTEVNRU5ULnR5cGVcblxuXG4gICAgICAgICAgICAgICAgLy8gQ29uZmlybSBmb2N1cyBzdGF0ZSwgY29udmVydCBpbnRvIHRleHQgaW5wdXQgdG8gcmVtb3ZlIFVBIHN0eWxpbmdzLFxuICAgICAgICAgICAgICAgIC8vIGFuZCBzZXQgYXMgcmVhZG9ubHkgdG8gcHJldmVudCBrZXlib2FyZCBwb3B1cC5cbiAgICAgICAgICAgICAgICBFTEVNRU5ULmF1dG9mb2N1cyA9IEVMRU1FTlQgPT0gZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgICAgICAgICAgICAgRUxFTUVOVC5yZWFkT25seSA9ICFTRVRUSU5HUy5lZGl0YWJsZVxuICAgICAgICAgICAgICAgIEVMRU1FTlQuaWQgPSBFTEVNRU5ULmlkIHx8IFNUQVRFLmlkXG4gICAgICAgICAgICAgICAgaWYgKCBFTEVNRU5ULnR5cGUgIT0gJ3RleHQnICkge1xuICAgICAgICAgICAgICAgICAgICBFTEVNRU5ULnR5cGUgPSAndGV4dCdcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwaWNrZXIgY29tcG9uZW50IHdpdGggdGhlIHNldHRpbmdzLlxuICAgICAgICAgICAgICAgIFAuY29tcG9uZW50ID0gbmV3IENPTVBPTkVOVChQLCBTRVRUSU5HUylcblxuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBwaWNrZXIgcm9vdCB3aXRoIGEgaG9sZGVyIGFuZCB0aGVuIHByZXBhcmUgaXQuXG4gICAgICAgICAgICAgICAgUC4kcm9vdCA9ICQoIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSgnZGl2JywgY3JlYXRlV3JhcHBlZENvbXBvbmVudCgpLCBDTEFTU0VTLnBpY2tlciwgJ2lkPVwiJyArIEVMRU1FTlQuaWQgKyAnX3Jvb3RcIiB0YWJpbmRleD1cIjBcIicpIClcbiAgICAgICAgICAgICAgICBwcmVwYXJlRWxlbWVudFJvb3QoKVxuXG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBmb3JtYXQgZm9yIHRoZSBoaWRkZW4gaW5wdXQgZWxlbWVudCwgY3JlYXRlIHRoZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgIGlmICggU0VUVElOR1MuZm9ybWF0U3VibWl0ICkge1xuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlRWxlbWVudEhpZGRlbigpXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgICAgICAgICAgICAgIHByZXBhcmVFbGVtZW50KClcblxuXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSByb290IGFzIHNwZWNpZmllZCBpbiB0aGUgc2V0dGluZ3MuXG4gICAgICAgICAgICAgICAgaWYgKCBTRVRUSU5HUy5jb250YWluZXIgKSAkKCBTRVRUSU5HUy5jb250YWluZXIgKS5hcHBlbmQoIFAuJHJvb3QgKVxuICAgICAgICAgICAgICAgIGVsc2UgJEVMRU1FTlQuYWZ0ZXIoIFAuJHJvb3QgKVxuXG5cbiAgICAgICAgICAgICAgICAvLyBCaW5kIHRoZSBkZWZhdWx0IGNvbXBvbmVudCBhbmQgc2V0dGluZ3MgZXZlbnRzLlxuICAgICAgICAgICAgICAgIFAub24oe1xuICAgICAgICAgICAgICAgICAgICBzdGFydDogUC5jb21wb25lbnQub25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBQLmNvbXBvbmVudC5vblJlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgc3RvcDogUC5jb21wb25lbnQub25TdG9wLFxuICAgICAgICAgICAgICAgICAgICBvcGVuOiBQLmNvbXBvbmVudC5vbk9wZW4sXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlOiBQLmNvbXBvbmVudC5vbkNsb3NlLFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IFAuY29tcG9uZW50Lm9uU2V0XG4gICAgICAgICAgICAgICAgfSkub24oe1xuICAgICAgICAgICAgICAgICAgICBzdGFydDogU0VUVElOR1Mub25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBTRVRUSU5HUy5vblJlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgc3RvcDogU0VUVElOR1Mub25TdG9wLFxuICAgICAgICAgICAgICAgICAgICBvcGVuOiBTRVRUSU5HUy5vbk9wZW4sXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlOiBTRVRUSU5HUy5vbkNsb3NlLFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IFNFVFRJTkdTLm9uU2V0XG4gICAgICAgICAgICAgICAgfSlcblxuXG4gICAgICAgICAgICAgICAgLy8gT25jZSB3ZeKAmXJlIGFsbCBzZXQsIGNoZWNrIHRoZSB0aGVtZSBpbiB1c2UuXG4gICAgICAgICAgICAgICAgSVNfREVGQVVMVF9USEVNRSA9IGlzVXNpbmdEZWZhdWx0VGhlbWUoIFAuJHJvb3QuY2hpbGRyZW4oKVsgMCBdIClcblxuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaGFzIGF1dG9mb2N1cywgb3BlbiB0aGUgcGlja2VyLlxuICAgICAgICAgICAgICAgIGlmICggRUxFTUVOVC5hdXRvZm9jdXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIFAub3BlbigpXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHF1ZXVlZCB0aGUg4oCcc3RhcnTigJ0gYW5kIOKAnHJlbmRlcuKAnSBldmVudHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFAudHJpZ2dlciggJ3N0YXJ0JyApLnRyaWdnZXIoICdyZW5kZXInIClcbiAgICAgICAgICAgIH0sIC8vc3RhcnRcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlbmRlciBhIG5ldyBwaWNrZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiggZW50aXJlQ29tcG9uZW50ICkge1xuXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGEgbmV3IGNvbXBvbmVudCBob2xkZXIgaW4gdGhlIHJvb3Qgb3IgYm94LlxuICAgICAgICAgICAgICAgIGlmICggZW50aXJlQ29tcG9uZW50ICkgUC4kcm9vdC5odG1sKCBjcmVhdGVXcmFwcGVkQ29tcG9uZW50KCkgKVxuICAgICAgICAgICAgICAgIGVsc2UgUC4kcm9vdC5maW5kKCAnLicgKyBDTEFTU0VTLmJveCApLmh0bWwoIFAuY29tcG9uZW50Lm5vZGVzKCBTVEFURS5vcGVuICkgKVxuXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgcXVldWVkIOKAnHJlbmRlcuKAnSBldmVudHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFAudHJpZ2dlciggJ3JlbmRlcicgKVxuICAgICAgICAgICAgfSwgLy9yZW5kZXJcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlc3Ryb3kgZXZlcnl0aGluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IHN0b3BwZWQsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgaWYgKCAhU1RBVEUuc3RhcnQgKSByZXR1cm4gUFxuXG4gICAgICAgICAgICAgICAgLy8gVGhlbiBjbG9zZSB0aGUgcGlja2VyLlxuICAgICAgICAgICAgICAgIFAuY2xvc2UoKVxuXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBoaWRkZW4gZmllbGQuXG4gICAgICAgICAgICAgICAgaWYgKCBQLl9oaWRkZW4gKSB7XG4gICAgICAgICAgICAgICAgICAgIFAuX2hpZGRlbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBQLl9oaWRkZW4gKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgcm9vdC5cbiAgICAgICAgICAgICAgICBQLiRyb290LnJlbW92ZSgpXG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGlucHV0IGNsYXNzLCByZW1vdmUgdGhlIHN0b3JlZCBkYXRhLCBhbmQgdW5iaW5kXG4gICAgICAgICAgICAgICAgLy8gdGhlIGV2ZW50cyAoYWZ0ZXIgYSB0aWNrIGZvciBJRSAtIHNlZSBgUC5jbG9zZWApLlxuICAgICAgICAgICAgICAgICRFTEVNRU5ULnJlbW92ZUNsYXNzKCBDTEFTU0VTLmlucHV0ICkucmVtb3ZlRGF0YSggTkFNRSApXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRFTEVNRU5ULm9mZiggJy4nICsgU1RBVEUuaWQgKVxuICAgICAgICAgICAgICAgIH0sIDApXG5cbiAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHRoZSBlbGVtZW50IHN0YXRlXG4gICAgICAgICAgICAgICAgRUxFTUVOVC50eXBlID0gU1RBVEUudHlwZVxuICAgICAgICAgICAgICAgIEVMRU1FTlQucmVhZE9ubHkgPSBmYWxzZVxuXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgcXVldWVkIOKAnHN0b3DigJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIFAudHJpZ2dlciggJ3N0b3AnIClcblxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBwaWNrZXIgc3RhdGVzLlxuICAgICAgICAgICAgICAgIFNUQVRFLm1ldGhvZHMgPSB7fVxuICAgICAgICAgICAgICAgIFNUQVRFLnN0YXJ0ID0gZmFsc2VcblxuICAgICAgICAgICAgICAgIHJldHVybiBQXG4gICAgICAgICAgICB9LCAvL3N0b3BcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE9wZW4gdXAgdGhlIHBpY2tlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiggZG9udEdpdmVGb2N1cyApIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IG9wZW4sIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgaWYgKCBTVEFURS5vcGVuICkgcmV0dXJuIFBcblxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg4oCcYWN0aXZl4oCdIGNsYXNzLlxuICAgICAgICAgICAgICAgICRFTEVNRU5ULmFkZENsYXNzKCBDTEFTU0VTLmFjdGl2ZSApXG4gICAgICAgICAgICAgICAgYXJpYSggRUxFTUVOVCwgJ2V4cGFuZGVkJywgdHJ1ZSApXG5cbiAgICAgICAgICAgICAgICAvLyAqIEEgRmlyZWZveCBidWcsIHdoZW4gYGh0bWxgIGhhcyBgb3ZlcmZsb3c6aGlkZGVuYCwgcmVzdWx0cyBpblxuICAgICAgICAgICAgICAgIC8vICAga2lsbGluZyB0cmFuc2l0aW9ucyA6KC4gU28gYWRkIHRoZSDigJxvcGVuZWTigJ0gc3RhdGUgb24gdGhlIG5leHQgdGljay5cbiAgICAgICAgICAgICAgICAvLyAgIEJ1ZzogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjI1Mjg5XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSDigJxvcGVuZWTigJ0gY2xhc3MgdG8gdGhlIHBpY2tlciByb290LlxuICAgICAgICAgICAgICAgICAgICBQLiRyb290LmFkZENsYXNzKCBDTEFTU0VTLm9wZW5lZCApXG4gICAgICAgICAgICAgICAgICAgIGFyaWEoIFAuJHJvb3RbMF0sICdoaWRkZW4nLCBmYWxzZSApXG5cbiAgICAgICAgICAgICAgICB9LCAwIClcblxuICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgdG8gZ2l2ZSBmb2N1cywgYmluZCB0aGUgZWxlbWVudCBhbmQgZG9jIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBpZiAoIGRvbnRHaXZlRm9jdXMgIT09IGZhbHNlICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBpdCBhcyBvcGVuLlxuICAgICAgICAgICAgICAgICAgICBTVEFURS5vcGVuID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdGhlIHBhZ2UgZnJvbSBzY3JvbGxpbmcuXG4gICAgICAgICAgICAgICAgICAgIGlmICggSVNfREVGQVVMVF9USEVNRSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRodG1sLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyggJ292ZXJmbG93JywgJ2hpZGRlbicgKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MoICdwYWRkaW5nLXJpZ2h0JywgJys9JyArIGdldFNjcm9sbGJhcldpZHRoKCkgKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyBmb2N1cyB0byB0aGUgcm9vdCBlbGVtZW504oCZcyBqUXVlcnkgb2JqZWN0LlxuICAgICAgICAgICAgICAgICAgICAvLyAqIFdvcmthcm91bmQgZm9yIGlPUzggdG8gYnJpbmcgdGhlIHBpY2tlcuKAmXMgcm9vdCBpbnRvIHZpZXcuXG4gICAgICAgICAgICAgICAgICAgIFAuJHJvb3RbMF0uZm9jdXMoKVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEJpbmQgdGhlIGRvY3VtZW50IGV2ZW50cy5cbiAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9uKCAnY2xpY2suJyArIFNUQVRFLmlkICsgJyBmb2N1c2luLicgKyBTVEFURS5pZCwgZnVuY3Rpb24oIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0YXJnZXQgb2YgdGhlIGV2ZW50IGlzIG5vdCB0aGUgZWxlbWVudCwgY2xvc2UgdGhlIHBpY2tlciBwaWNrZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAqIERvbuKAmXQgd29ycnkgYWJvdXQgY2xpY2tzIG9yIGZvY3VzaW5zIG9uIHRoZSByb290IGJlY2F1c2UgdGhvc2UgZG9u4oCZdCBidWJibGUgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIEFsc28sIGZvciBGaXJlZm94LCBhIGNsaWNrIG9uIGFuIGBvcHRpb25gIGVsZW1lbnQgYnViYmxlcyB1cCBkaXJlY3RseVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB0byB0aGUgZG9jLiBTbyBtYWtlIHN1cmUgdGhlIHRhcmdldCB3YXNuJ3QgdGhlIGRvYy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICogSW4gRmlyZWZveCBzdG9wUHJvcGFnYXRpb24oKSBkb2VzbuKAmXQgcHJldmVudCByaWdodC1jbGljayBldmVudHMgZnJvbSBidWJibGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgd2hpY2ggY2F1c2VzIHRoZSBwaWNrZXIgdG8gdW5leHBlY3RlZGx5IGNsb3NlIHdoZW4gcmlnaHQtY2xpY2tpbmcgaXQuIFNvIG1ha2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgc3VyZSB0aGUgZXZlbnQgd2FzbuKAmXQgYSByaWdodC1jbGljay5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGFyZ2V0ICE9IEVMRU1FTlQgJiYgdGFyZ2V0ICE9IGRvY3VtZW50ICYmIGV2ZW50LndoaWNoICE9IDMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IHdhcyB0aGUgaG9sZGVyIHRoYXQgY292ZXJzIHRoZSBzY3JlZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCB0aGUgZWxlbWVudCBmb2N1c2VkIHRvIG1haW50YWluIHRhYmluZGV4LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY2xvc2UoIHRhcmdldCA9PT0gUC4kcm9vdC5jaGlsZHJlbigpWzBdIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9KS5vbiggJ2tleWRvd24uJyArIFNUQVRFLmlkLCBmdW5jdGlvbiggZXZlbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUga2V5Y29kZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXljb2RlID0gZXZlbnQua2V5Q29kZSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zbGF0ZSB0aGF0IHRvIGEgc2VsZWN0aW9uIGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXljb2RlVG9Nb3ZlID0gUC5jb21wb25lbnQua2V5WyBrZXljb2RlIF0sXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHcmFiIHRoZSB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT24gZXNjYXBlLCBjbG9zZSB0aGUgcGlja2VyIGFuZCBnaXZlIGZvY3VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBrZXljb2RlID09IDI3ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY2xvc2UoIHRydWUgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEga2V5IG1vdmVtZW50IG9yIOKAnGVudGVy4oCdIGtleXByZXNzIG9uIHRoZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIHRhcmdldCA9PSBQLiRyb290WzBdICYmICgga2V5Y29kZVRvTW92ZSB8fCBrZXljb2RlID09IDEzICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGFjdGlvbiB0byBzdG9wIHBhZ2UgbW92ZW1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUga2V5IG1vdmVtZW50IGFjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGtleWNvZGVUb01vdmUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBpY2tlckNvbnN0cnVjdG9yLl8udHJpZ2dlciggUC5jb21wb25lbnQua2V5LmdvLCBQLCBbIFBpY2tlckNvbnN0cnVjdG9yLl8udHJpZ2dlcigga2V5Y29kZVRvTW92ZSApIF0gKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIOKAnGVudGVy4oCdLCBpZiB0aGUgaGlnaGxpZ2h0ZWQgaXRlbSBpc27igJl0IGRpc2FibGVkLCBzZXQgdGhlIHZhbHVlIGFuZCBjbG9zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggIVAuJHJvb3QuZmluZCggJy4nICsgQ0xBU1NFUy5oaWdobGlnaHRlZCApLmhhc0NsYXNzKCBDTEFTU0VTLmRpc2FibGVkICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuc2V0KCAnc2VsZWN0JywgUC5jb21wb25lbnQuaXRlbS5oaWdobGlnaHQgKS5jbG9zZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0YXJnZXQgaXMgd2l0aGluIHRoZSByb290IGFuZCDigJxlbnRlcuKAnSBpcyBwcmVzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24gYW5kIHRyaWdnZXIgYSBjbGljayBvbiB0aGUgdGFyZ2V0IGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggJC5jb250YWlucyggUC4kcm9vdFswXSwgdGFyZ2V0ICkgJiYga2V5Y29kZSA9PSAxMyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsaWNrKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBxdWV1ZWQg4oCcb3BlbuKAnSBldmVudHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFAudHJpZ2dlciggJ29wZW4nIClcbiAgICAgICAgICAgIH0sIC8vb3BlblxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2xvc2UgdGhlIHBpY2tlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24oIGdpdmVGb2N1cyApIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIHdlIG5lZWQgdG8gZ2l2ZSBmb2N1cywgZG8gaXQgYmVmb3JlIGNoYW5naW5nIHN0YXRlcy5cbiAgICAgICAgICAgICAgICBpZiAoIGdpdmVGb2N1cyApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gLi4uLmFoIHllcyEgSXQgd291bGTigJl2ZSBiZWVuIGluY29tcGxldGUgd2l0aG91dCBhIGNyYXp5IHdvcmthcm91bmQgZm9yIElFIDp8XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBmb2N1cyBpcyB0cmlnZ2VyZWQgKmFmdGVyKiB0aGUgY2xvc2UgaGFzIGNvbXBsZXRlZCAtIGNhdXNpbmcgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gb3BlbiBhZ2Fpbi4gU28gdW5iaW5kIGFuZCByZWJpbmQgdGhlIGV2ZW50IGF0IHRoZSBuZXh0IHRpY2suXG4gICAgICAgICAgICAgICAgICAgIFAuJHJvb3Qub2ZmKCAnZm9jdXMudG9PcGVuJyApWzBdLmZvY3VzKClcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQLiRyb290Lm9uKCAnZm9jdXMudG9PcGVuJywgaGFuZGxlRm9jdXNUb09wZW5FdmVudCApXG4gICAgICAgICAgICAgICAgICAgIH0sIDAgKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUg4oCcYWN0aXZl4oCdIGNsYXNzLlxuICAgICAgICAgICAgICAgICRFTEVNRU5ULnJlbW92ZUNsYXNzKCBDTEFTU0VTLmFjdGl2ZSApXG4gICAgICAgICAgICAgICAgYXJpYSggRUxFTUVOVCwgJ2V4cGFuZGVkJywgZmFsc2UgKVxuXG4gICAgICAgICAgICAgICAgLy8gKiBBIEZpcmVmb3ggYnVnLCB3aGVuIGBodG1sYCBoYXMgYG92ZXJmbG93OmhpZGRlbmAsIHJlc3VsdHMgaW5cbiAgICAgICAgICAgICAgICAvLyAgIGtpbGxpbmcgdHJhbnNpdGlvbnMgOiguIFNvIHJlbW92ZSB0aGUg4oCcb3BlbmVk4oCdIHN0YXRlIG9uIHRoZSBuZXh0IHRpY2suXG4gICAgICAgICAgICAgICAgLy8gICBCdWc6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTYyNTI4OVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUg4oCcb3BlbmVk4oCdIGFuZCDigJxmb2N1c2Vk4oCdIGNsYXNzIGZyb20gdGhlIHBpY2tlciByb290LlxuICAgICAgICAgICAgICAgICAgICBQLiRyb290LnJlbW92ZUNsYXNzKCBDTEFTU0VTLm9wZW5lZCArICcgJyArIENMQVNTRVMuZm9jdXNlZCApXG4gICAgICAgICAgICAgICAgICAgIGFyaWEoIFAuJHJvb3RbMF0sICdoaWRkZW4nLCB0cnVlIClcblxuICAgICAgICAgICAgICAgIH0sIDAgKVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgaXTigJlzIGFscmVhZHkgY2xvc2VkLCBkbyBub3RoaW5nIG1vcmUuXG4gICAgICAgICAgICAgICAgaWYgKCAhU1RBVEUub3BlbiApIHJldHVybiBQXG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgaXQgYXMgY2xvc2VkLlxuICAgICAgICAgICAgICAgIFNUQVRFLm9wZW4gPSBmYWxzZVxuXG4gICAgICAgICAgICAgICAgLy8gQWxsb3cgdGhlIHBhZ2UgdG8gc2Nyb2xsLlxuICAgICAgICAgICAgICAgIGlmICggSVNfREVGQVVMVF9USEVNRSApIHtcbiAgICAgICAgICAgICAgICAgICAgJGh0bWwuXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3MoICdvdmVyZmxvdycsICcnICkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3MoICdwYWRkaW5nLXJpZ2h0JywgJy09JyArIGdldFNjcm9sbGJhcldpZHRoKCkgKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVuYmluZCB0aGUgZG9jdW1lbnQgZXZlbnRzLlxuICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoICcuJyArIFNUQVRFLmlkIClcblxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHF1ZXVlZCDigJxjbG9zZeKAnSBldmVudHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFAudHJpZ2dlciggJ2Nsb3NlJyApXG4gICAgICAgICAgICB9LCAvL2Nsb3NlXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDbGVhciB0aGUgdmFsdWVzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNsZWFyOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUC5zZXQoICdjbGVhcicsIG51bGwsIG9wdGlvbnMgKVxuICAgICAgICAgICAgfSwgLy9jbGVhclxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IHNvbWV0aGluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCB0aGluZywgdmFsdWUsIG9wdGlvbnMgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGhpbmdJdGVtLCB0aGluZ1ZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0aGluZ0lzT2JqZWN0ID0gJC5pc1BsYWluT2JqZWN0KCB0aGluZyApLFxuICAgICAgICAgICAgICAgICAgICB0aGluZ09iamVjdCA9IHRoaW5nSXNPYmplY3QgPyB0aGluZyA6IHt9XG5cbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSB1c2FibGUgb3B0aW9ucy5cbiAgICAgICAgICAgICAgICBvcHRpb25zID0gdGhpbmdJc09iamVjdCAmJiAkLmlzUGxhaW5PYmplY3QoIHZhbHVlICkgPyB2YWx1ZSA6IG9wdGlvbnMgfHwge31cblxuICAgICAgICAgICAgICAgIGlmICggdGhpbmcgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRoaW5nIGlzbuKAmXQgYW4gb2JqZWN0LCBtYWtlIGl0IG9uZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdGhpbmdJc09iamVjdCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5nT2JqZWN0WyB0aGluZyBdID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIHRoaW5ncyBvZiBpdGVtcyB0byBzZXQuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHRoaW5nSXRlbSBpbiB0aGluZ09iamVjdCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgdmFsdWUgb2YgdGhlIHRoaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmdWYWx1ZSA9IHRoaW5nT2JqZWN0WyB0aGluZ0l0ZW0gXVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCwgaWYgdGhlIGl0ZW0gZXhpc3RzIGFuZCB0aGVyZeKAmXMgYSB2YWx1ZSwgc2V0IGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGluZ0l0ZW0gaW4gUC5jb21wb25lbnQuaXRlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaW5nVmFsdWUgPT09IHVuZGVmaW5lZCApIHRoaW5nVmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5jb21wb25lbnQuc2V0KCB0aGluZ0l0ZW0sIHRoaW5nVmFsdWUsIG9wdGlvbnMgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVuLCBjaGVjayB0byB1cGRhdGUgdGhlIGVsZW1lbnQgdmFsdWUgYW5kIGJyb2FkY2FzdCBhIGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdJdGVtID09ICdzZWxlY3QnIHx8IHRoaW5nSXRlbSA9PSAnY2xlYXInICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRFTEVNRU5ULlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwoIHRoaW5nSXRlbSA9PSAnY2xlYXInID8gJycgOiBQLmdldCggdGhpbmdJdGVtLCBTRVRUSU5HUy5mb3JtYXQgKSApLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyKCAnY2hhbmdlJyApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBSZW5kZXIgYSBuZXcgcGlja2VyLlxuICAgICAgICAgICAgICAgICAgICBQLnJlbmRlcigpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgbWV0aG9kIGlzbuKAmXQgbXV0ZWQsIHRyaWdnZXIgcXVldWVkIOKAnHNldOKAnSBldmVudHMgYW5kIHBhc3MgdGhlIGB0aGluZ09iamVjdGAuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMubXV0ZWQgPyBQIDogUC50cmlnZ2VyKCAnc2V0JywgdGhpbmdPYmplY3QgKVxuICAgICAgICAgICAgfSwgLy9zZXRcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBzb21ldGhpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggdGhpbmcsIGZvcm1hdCApIHtcblxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGVyZeKAmXMgc29tZXRoaW5nIHRvIGdldC5cbiAgICAgICAgICAgICAgICB0aGluZyA9IHRoaW5nIHx8ICd2YWx1ZSdcblxuICAgICAgICAgICAgICAgIC8vIElmIGEgcGlja2VyIHN0YXRlIGV4aXN0cywgcmV0dXJuIHRoYXQuXG4gICAgICAgICAgICAgICAgaWYgKCBTVEFURVsgdGhpbmcgXSAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVbIHRoaW5nIF1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHN1Ym1pc3Npb24gdmFsdWUsIGlmIHRoYXQuXG4gICAgICAgICAgICAgICAgaWYgKCB0aGluZyA9PSAndmFsdWVTdWJtaXQnICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIFAuX2hpZGRlbiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQLl9oaWRkZW4udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGluZyA9ICd2YWx1ZSdcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlLCBpZiB0aGF0LlxuICAgICAgICAgICAgICAgIGlmICggdGhpbmcgPT0gJ3ZhbHVlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEVMRU1FTlQudmFsdWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhIGNvbXBvbmVudCBpdGVtIGV4aXN0cywgcmV0dXJuIHRoYXQuXG4gICAgICAgICAgICAgICAgaWYgKCB0aGluZyBpbiBQLmNvbXBvbmVudC5pdGVtICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBmb3JtYXQgPT0gJ3N0cmluZycgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpbmdWYWx1ZSA9IFAuY29tcG9uZW50LmdldCggdGhpbmcgKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaW5nVmFsdWUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBpY2tlckNvbnN0cnVjdG9yLl8udHJpZ2dlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5jb21wb25lbnQuZm9ybWF0cy50b1N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsgZm9ybWF0LCB0aGluZ1ZhbHVlIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogJydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUC5jb21wb25lbnQuZ2V0KCB0aGluZyApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgLy9nZXRcblxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQmluZCBldmVudHMgb24gdGhlIHRoaW5ncy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb246IGZ1bmN0aW9uKCB0aGluZywgbWV0aG9kLCBpbnRlcm5hbCApIHtcblxuICAgICAgICAgICAgICAgIHZhciB0aGluZ05hbWUsIHRoaW5nTWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICB0aGluZ0lzT2JqZWN0ID0gJC5pc1BsYWluT2JqZWN0KCB0aGluZyApLFxuICAgICAgICAgICAgICAgICAgICB0aGluZ09iamVjdCA9IHRoaW5nSXNPYmplY3QgPyB0aGluZyA6IHt9XG5cbiAgICAgICAgICAgICAgICBpZiAoIHRoaW5nICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0aGluZyBpc27igJl0IGFuIG9iamVjdCwgbWFrZSBpdCBvbmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXRoaW5nSXNPYmplY3QgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGluZ09iamVjdFsgdGhpbmcgXSA9IG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgdGhpbmdzIHRvIGJpbmQgdG8uXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHRoaW5nTmFtZSBpbiB0aGluZ09iamVjdCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgbWV0aG9kIG9mIHRoZSB0aGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5nTWV0aG9kID0gdGhpbmdPYmplY3RbIHRoaW5nTmFtZSBdXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0IHdhcyBhbiBpbnRlcm5hbCBiaW5kaW5nLCBwcmVmaXggaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGludGVybmFsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5nTmFtZSA9ICdfJyArIHRoaW5nTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHRoaW5nIG1ldGhvZHMgY29sbGVjdGlvbiBleGlzdHMuXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzWyB0aGluZ05hbWUgXSA9IFNUQVRFLm1ldGhvZHNbIHRoaW5nTmFtZSBdIHx8IFtdXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgbWV0aG9kIHRvIHRoZSByZWxhdGl2ZSBtZXRob2QgY29sbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFLm1ldGhvZHNbIHRoaW5nTmFtZSBdLnB1c2goIHRoaW5nTWV0aG9kIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBQXG4gICAgICAgICAgICB9LCAvL29uXG5cblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFVuYmluZCBldmVudHMgb24gdGhlIHRoaW5ncy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb2ZmOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSwgdGhpbmdOYW1lLFxuICAgICAgICAgICAgICAgICAgICBuYW1lcyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbmFtZXNDb3VudCA9IG5hbWVzLmxlbmd0aDsgaSA8IG5hbWVzQ291bnQ7IGkgKz0gMSApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdOYW1lID0gbmFtZXNbaV1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGluZ05hbWUgaW4gU1RBVEUubWV0aG9kcyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBTVEFURS5tZXRob2RzW3RoaW5nTmFtZV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gUFxuICAgICAgICAgICAgfSxcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZpcmUgb2ZmIG1ldGhvZCBldmVudHMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCBuYW1lLCBkYXRhICkge1xuICAgICAgICAgICAgICAgIHZhciBfdHJpZ2dlciA9IGZ1bmN0aW9uKCBuYW1lICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kTGlzdCA9IFNUQVRFLm1ldGhvZHNbIG5hbWUgXVxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1ldGhvZExpc3QgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RMaXN0Lm1hcCggZnVuY3Rpb24oIG1ldGhvZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIG1ldGhvZCwgUCwgWyBkYXRhIF0gKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdHJpZ2dlciggJ18nICsgbmFtZSApXG4gICAgICAgICAgICAgICAgX3RyaWdnZXIoIG5hbWUgKVxuICAgICAgICAgICAgICAgIHJldHVybiBQXG4gICAgICAgICAgICB9IC8vdHJpZ2dlclxuICAgICAgICB9IC8vUGlja2VySW5zdGFuY2UucHJvdG90eXBlXG5cblxuICAgIC8qKlxuICAgICAqIFdyYXAgdGhlIHBpY2tlciBob2xkZXIgY29tcG9uZW50cyB0b2dldGhlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVXcmFwcGVkQ29tcG9uZW50KCkge1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIHBpY2tlciB3cmFwcGVyIGhvbGRlclxuICAgICAgICByZXR1cm4gUGlja2VyQ29uc3RydWN0b3IuXy5ub2RlKCAnZGl2JyxcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgcGlja2VyIHdyYXBwZXIgbm9kZVxuICAgICAgICAgICAgUGlja2VyQ29uc3RydWN0b3IuXy5ub2RlKCAnZGl2JyxcblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIHBpY2tlciBmcmFtZVxuICAgICAgICAgICAgICAgIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSggJ2RpdicsXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgcGlja2VyIGJveCBub2RlXG4gICAgICAgICAgICAgICAgICAgIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSggJ2RpdicsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY29tcG9uZW50cyBub2Rlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50Lm5vZGVzKCBTVEFURS5vcGVuICksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBwaWNrZXIgYm94IGNsYXNzXG4gICAgICAgICAgICAgICAgICAgICAgICBDTEFTU0VTLmJveFxuICAgICAgICAgICAgICAgICAgICApLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFBpY2tlciB3cmFwIGNsYXNzXG4gICAgICAgICAgICAgICAgICAgIENMQVNTRVMud3JhcFxuICAgICAgICAgICAgICAgICksXG5cbiAgICAgICAgICAgICAgICAvLyBQaWNrZXIgZnJhbWUgY2xhc3NcbiAgICAgICAgICAgICAgICBDTEFTU0VTLmZyYW1lXG4gICAgICAgICAgICApLFxuXG4gICAgICAgICAgICAvLyBQaWNrZXIgaG9sZGVyIGNsYXNzXG4gICAgICAgICAgICBDTEFTU0VTLmhvbGRlclxuICAgICAgICApIC8vZW5kcmV0dXJuXG4gICAgfSAvL2NyZWF0ZVdyYXBwZWRDb21wb25lbnRcblxuXG5cbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIHRoZSBpbnB1dCBlbGVtZW50IHdpdGggYWxsIGJpbmRpbmdzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByZXBhcmVFbGVtZW50KCkge1xuXG4gICAgICAgICRFTEVNRU5ULlxuXG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgcGlja2VyIGRhdGEgYnkgY29tcG9uZW50IG5hbWUuXG4gICAgICAgICAgICBkYXRhKE5BTUUsIFApLlxuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIOKAnGlucHV04oCdIGNsYXNzIG5hbWUuXG4gICAgICAgICAgICBhZGRDbGFzcyhDTEFTU0VTLmlucHV0KS5cblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSB0YWJpbmRleC5cbiAgICAgICAgICAgIGF0dHIoJ3RhYmluZGV4JywgLTEpLlxuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBgZGF0YS12YWx1ZWAsIHVwZGF0ZSB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQuXG4gICAgICAgICAgICB2YWwoICRFTEVNRU5ULmRhdGEoJ3ZhbHVlJykgP1xuICAgICAgICAgICAgICAgIFAuZ2V0KCdzZWxlY3QnLCBTRVRUSU5HUy5mb3JtYXQpIDpcbiAgICAgICAgICAgICAgICBFTEVNRU5ULnZhbHVlXG4gICAgICAgICAgICApXG5cblxuICAgICAgICAvLyBPbmx5IGJpbmQga2V5ZG93biBldmVudHMgaWYgdGhlIGVsZW1lbnQgaXNu4oCZdCBlZGl0YWJsZS5cbiAgICAgICAgaWYgKCAhU0VUVElOR1MuZWRpdGFibGUgKSB7XG5cbiAgICAgICAgICAgICRFTEVNRU5ULlxuXG4gICAgICAgICAgICAgICAgLy8gT24gZm9jdXMvY2xpY2ssIGZvY3VzIG9udG8gdGhlIHJvb3QgdG8gb3BlbiBpdCB1cC5cbiAgICAgICAgICAgICAgICBvbiggJ2ZvY3VzLicgKyBTVEFURS5pZCArICcgY2xpY2suJyArIFNUQVRFLmlkLCBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdFswXS5mb2N1cygpXG4gICAgICAgICAgICAgICAgfSkuXG5cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUga2V5Ym9hcmQgZXZlbnQgYmFzZWQgb24gdGhlIHBpY2tlciBiZWluZyBvcGVuZWQgb3Igbm90LlxuICAgICAgICAgICAgICAgIG9uKCAna2V5ZG93bi4nICsgU1RBVEUuaWQsIGhhbmRsZUtleWRvd25FdmVudCApXG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgYXJpYSBhdHRyaWJ1dGVzLlxuICAgICAgICBhcmlhKEVMRU1FTlQsIHtcbiAgICAgICAgICAgIGhhc3BvcHVwOiB0cnVlLFxuICAgICAgICAgICAgZXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcmVhZG9ubHk6IGZhbHNlLFxuICAgICAgICAgICAgb3duczogRUxFTUVOVC5pZCArICdfcm9vdCdcbiAgICAgICAgfSlcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFByZXBhcmUgdGhlIHJvb3QgcGlja2VyIGVsZW1lbnQgd2l0aCBhbGwgYmluZGluZ3MuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJlcGFyZUVsZW1lbnRSb290KCkge1xuXG4gICAgICAgIFAuJHJvb3QuXG5cbiAgICAgICAgICAgIG9uKHtcblxuICAgICAgICAgICAgICAgIC8vIEZvciBpT1M4LlxuICAgICAgICAgICAgICAgIGtleWRvd246IGhhbmRsZUtleWRvd25FdmVudCxcblxuICAgICAgICAgICAgICAgIC8vIFdoZW4gc29tZXRoaW5nIHdpdGhpbiB0aGUgcm9vdCBpcyBmb2N1c2VkLCBzdG9wIGZyb20gYnViYmxpbmdcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgZG9jIGFuZCByZW1vdmUgdGhlIOKAnGZvY3VzZWTigJ0gc3RhdGUgZnJvbSB0aGUgcm9vdC5cbiAgICAgICAgICAgICAgICBmb2N1c2luOiBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgICAgICAgICAgICAgIFAuJHJvb3QucmVtb3ZlQ2xhc3MoIENMQVNTRVMuZm9jdXNlZCApXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIC8vIFdoZW4gc29tZXRoaW5nIHdpdGhpbiB0aGUgcm9vdCBob2xkZXIgaXMgY2xpY2tlZCwgc3RvcCBpdFxuICAgICAgICAgICAgICAgIC8vIGZyb20gYnViYmxpbmcgdG8gdGhlIGRvYy5cbiAgICAgICAgICAgICAgICAnbW91c2Vkb3duIGNsaWNrJzogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXRcblxuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHRhcmdldCBpc27igJl0IHRoZSByb290IGhvbGRlciBzbyBpdCBjYW4gYnViYmxlIHVwLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRhcmdldCAhPSBQLiRyb290LmNoaWxkcmVuKClbIDAgXSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gKiBGb3IgbW91c2Vkb3duIGV2ZW50cywgY2FuY2VsIHRoZSBkZWZhdWx0IGFjdGlvbiBpbiBvcmRlciB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBwcmV2ZW50IGNhc2VzIHdoZXJlIGZvY3VzIGlzIHNoaWZ0ZWQgb250byBleHRlcm5hbCBlbGVtZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB3aGVuIHVzaW5nIHRoaW5ncyBsaWtlIGpRdWVyeSBtb2JpbGUgb3IgTWFnbmlmaWNQb3B1cCAocmVmOiAjMjQ5ICYgIzEyMCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIEFsc28sIGZvciBGaXJlZm94LCBkb27igJl0IHByZXZlbnQgYWN0aW9uIG9uIHRoZSBgb3B0aW9uYCBlbGVtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBldmVudC50eXBlID09ICdtb3VzZWRvd24nICYmICEkKCB0YXJnZXQgKS5pcyggJ2lucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBidXR0b24sIG9wdGlvbicgKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmUtZm9jdXMgb250byB0aGUgcm9vdCBzbyB0aGF0IHVzZXJzIGNhbiBjbGljayBhd2F5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBlbGVtZW50cyBmb2N1c2VkIHdpdGhpbiB0aGUgcGlja2VyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuJHJvb3RbMF0uZm9jdXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuXG5cbiAgICAgICAgICAgIC8vIEFkZC9yZW1vdmUgdGhlIOKAnHRhcmdldOKAnSBjbGFzcyBvbiBmb2N1cyBhbmQgYmx1ci5cbiAgICAgICAgICAgIG9uKHtcbiAgICAgICAgICAgICAgICBmb2N1czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRFTEVNRU5ULmFkZENsYXNzKCBDTEFTU0VTLnRhcmdldCApXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJEVMRU1FTlQucmVtb3ZlQ2xhc3MoIENMQVNTRVMudGFyZ2V0IClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5cblxuICAgICAgICAgICAgLy8gT3BlbiB0aGUgcGlja2VyIGFuZCBhZGp1c3QgdGhlIHJvb3Qg4oCcZm9jdXNlZOKAnSBzdGF0ZVxuICAgICAgICAgICAgb24oICdmb2N1cy50b09wZW4nLCBoYW5kbGVGb2N1c1RvT3BlbkV2ZW50ICkuXG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJl4oCZcyBhIGNsaWNrIG9uIGFuIGFjdGlvbmFibGUgZWxlbWVudCwgY2Fycnkgb3V0IHRoZSBhY3Rpb25zLlxuICAgICAgICAgICAgb24oICdjbGljaycsICdbZGF0YS1waWNrXSwgW2RhdGEtbmF2XSwgW2RhdGEtY2xlYXJdLCBbZGF0YS1jbG9zZV0nLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciAkdGFyZ2V0ID0gJCggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gJHRhcmdldC5kYXRhKCksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERpc2FibGVkID0gJHRhcmdldC5oYXNDbGFzcyggQ0xBU1NFUy5uYXZEaXNhYmxlZCApIHx8ICR0YXJnZXQuaGFzQ2xhc3MoIENMQVNTRVMuZGlzYWJsZWQgKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyAqIEZvciBJRSwgbm9uLWZvY3VzYWJsZSBlbGVtZW50cyBjYW4gYmUgYWN0aXZlIGVsZW1lbnRzIGFzIHdlbGxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAoaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY4NDU2MSkuXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBnZXRBY3RpdmVFbGVtZW50KClcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudCA9IGFjdGl2ZUVsZW1lbnQgJiYgKCBhY3RpdmVFbGVtZW50LnR5cGUgfHwgYWN0aXZlRWxlbWVudC5ocmVmIClcblxuICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBkaXNhYmxlZCBvciBub3RoaW5nIGluc2lkZSBpcyBhY3RpdmVseSBmb2N1c2VkLCByZS1mb2N1cyB0aGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBpZiAoIHRhcmdldERpc2FibGVkIHx8IGFjdGl2ZUVsZW1lbnQgJiYgISQuY29udGFpbnMoIFAuJHJvb3RbMF0sIGFjdGl2ZUVsZW1lbnQgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdFswXS5mb2N1cygpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgc29tZXRoaW5nIGlzIHN1cGVyZmljaWFsbHkgY2hhbmdlZCwgdXBkYXRlIHRoZSBgaGlnaGxpZ2h0YCBiYXNlZCBvbiB0aGUgYG5hdmAuXG4gICAgICAgICAgICAgICAgaWYgKCAhdGFyZ2V0RGlzYWJsZWQgJiYgdGFyZ2V0RGF0YS5uYXYgKSB7XG4gICAgICAgICAgICAgICAgICAgIFAuc2V0KCAnaGlnaGxpZ2h0JywgUC5jb21wb25lbnQuaXRlbS5oaWdobGlnaHQsIHsgbmF2OiB0YXJnZXREYXRhLm5hdiB9IClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBzb21ldGhpbmcgaXMgcGlja2VkLCBzZXQgYHNlbGVjdGAgdGhlbiBjbG9zZSB3aXRoIGZvY3VzLlxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCAhdGFyZ2V0RGlzYWJsZWQgJiYgJ3BpY2snIGluIHRhcmdldERhdGEgKSB7XG4gICAgICAgICAgICAgICAgICAgIFAuc2V0KCAnc2VsZWN0JywgdGFyZ2V0RGF0YS5waWNrIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBhIOKAnGNsZWFy4oCdIGJ1dHRvbiBpcyBwcmVzc2VkLCBlbXB0eSB0aGUgdmFsdWVzIGFuZCBjbG9zZSB3aXRoIGZvY3VzLlxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0YXJnZXREYXRhLmNsZWFyICkge1xuICAgICAgICAgICAgICAgICAgICBQLmNsZWFyKCkuY2xvc2UoIHRydWUgKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0YXJnZXREYXRhLmNsb3NlICkge1xuICAgICAgICAgICAgICAgICAgICBQLmNsb3NlKCB0cnVlIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pIC8vUC4kcm9vdFxuXG4gICAgICAgIGFyaWEoIFAuJHJvb3RbMF0sICdoaWRkZW4nLCB0cnVlIClcbiAgICB9XG5cblxuICAgICAvKipcbiAgICAgICogUHJlcGFyZSB0aGUgaGlkZGVuIGlucHV0IGVsZW1lbnQgYWxvbmcgd2l0aCBhbGwgYmluZGluZ3MuXG4gICAgICAqL1xuICAgIGZ1bmN0aW9uIHByZXBhcmVFbGVtZW50SGlkZGVuKCkge1xuXG4gICAgICAgIHZhciBuYW1lXG5cbiAgICAgICAgaWYgKCBTRVRUSU5HUy5oaWRkZW5OYW1lID09PSB0cnVlICkge1xuICAgICAgICAgICAgbmFtZSA9IEVMRU1FTlQubmFtZVxuICAgICAgICAgICAgRUxFTUVOVC5uYW1lID0gJydcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5hbWUgPSBbXG4gICAgICAgICAgICAgICAgdHlwZW9mIFNFVFRJTkdTLmhpZGRlblByZWZpeCA9PSAnc3RyaW5nJyA/IFNFVFRJTkdTLmhpZGRlblByZWZpeCA6ICcnLFxuICAgICAgICAgICAgICAgIHR5cGVvZiBTRVRUSU5HUy5oaWRkZW5TdWZmaXggPT0gJ3N0cmluZycgPyBTRVRUSU5HUy5oaWRkZW5TdWZmaXggOiAnX3N1Ym1pdCdcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIG5hbWUgPSBuYW1lWzBdICsgRUxFTUVOVC5uYW1lICsgbmFtZVsxXVxuICAgICAgICB9XG5cbiAgICAgICAgUC5faGlkZGVuID0gJChcbiAgICAgICAgICAgICc8aW5wdXQgJyArXG4gICAgICAgICAgICAndHlwZT1oaWRkZW4gJyArXG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbmFtZSB1c2luZyB0aGUgb3JpZ2luYWwgaW5wdXTigJlzIHdpdGggYSBwcmVmaXggYW5kIHN1ZmZpeC5cbiAgICAgICAgICAgICduYW1lPVwiJyArIG5hbWUgKyAnXCInICtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaGFzIGEgdmFsdWUsIHNldCB0aGUgaGlkZGVuIHZhbHVlIGFzIHdlbGwuXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgJEVMRU1FTlQuZGF0YSgndmFsdWUnKSB8fCBFTEVNRU5ULnZhbHVlID9cbiAgICAgICAgICAgICAgICAgICAgJyB2YWx1ZT1cIicgKyBQLmdldCgnc2VsZWN0JywgU0VUVElOR1MuZm9ybWF0U3VibWl0KSArICdcIicgOlxuICAgICAgICAgICAgICAgICAgICAnJ1xuICAgICAgICAgICAgKSArXG4gICAgICAgICAgICAnPidcbiAgICAgICAgKVswXVxuXG4gICAgICAgICRFTEVNRU5ULlxuXG4gICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgY2hhbmdlcywgdXBkYXRlIHRoZSBoaWRkZW4gaW5wdXQgd2l0aCB0aGUgY29ycmVjdCBmb3JtYXQuXG4gICAgICAgICAgICBvbignY2hhbmdlLicgKyBTVEFURS5pZCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgUC5faGlkZGVuLnZhbHVlID0gRUxFTUVOVC52YWx1ZSA/XG4gICAgICAgICAgICAgICAgICAgIFAuZ2V0KCdzZWxlY3QnLCBTRVRUSU5HUy5mb3JtYXRTdWJtaXQpIDpcbiAgICAgICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgIH0pXG5cblxuICAgICAgICAvLyBJbnNlcnQgdGhlIGhpZGRlbiBpbnB1dCBhcyBzcGVjaWZpZWQgaW4gdGhlIHNldHRpbmdzLlxuICAgICAgICBpZiAoIFNFVFRJTkdTLmNvbnRhaW5lciApICQoIFNFVFRJTkdTLmNvbnRhaW5lciApLmFwcGVuZCggUC5faGlkZGVuIClcbiAgICAgICAgZWxzZSAkRUxFTUVOVC5hZnRlciggUC5faGlkZGVuIClcbiAgICB9XG5cblxuICAgIC8vIEZvciBpT1M4LlxuICAgIGZ1bmN0aW9uIGhhbmRsZUtleWRvd25FdmVudCggZXZlbnQgKSB7XG5cbiAgICAgICAgdmFyIGtleWNvZGUgPSBldmVudC5rZXlDb2RlLFxuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBvbmUgb2YgdGhlIGRlbGV0ZSBrZXlzIHdhcyBwcmVzc2VkLlxuICAgICAgICAgICAgaXNLZXljb2RlRGVsZXRlID0gL14oOHw0NikkLy50ZXN0KGtleWNvZGUpXG5cbiAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIElFIGNsZWFycyB0aGUgaW5wdXQgdmFsdWUgb24g4oCcZXNjYXBl4oCdLlxuICAgICAgICBpZiAoIGtleWNvZGUgPT0gMjcgKSB7XG4gICAgICAgICAgICBQLmNsb3NlKClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgYHNwYWNlYCBvciBgZGVsZXRlYCB3YXMgcHJlc3NlZCBvciB0aGUgcGlja2VyIGlzIGNsb3NlZCB3aXRoIGEga2V5IG1vdmVtZW50LlxuICAgICAgICBpZiAoIGtleWNvZGUgPT0gMzIgfHwgaXNLZXljb2RlRGVsZXRlIHx8ICFTVEFURS5vcGVuICYmIFAuY29tcG9uZW50LmtleVtrZXljb2RlXSApIHtcblxuICAgICAgICAgICAgLy8gUHJldmVudCBpdCBmcm9tIG1vdmluZyB0aGUgcGFnZSBhbmQgYnViYmxpbmcgdG8gZG9jLlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgICAgICAgLy8gSWYgYGRlbGV0ZWAgd2FzIHByZXNzZWQsIGNsZWFyIHRoZSB2YWx1ZXMgYW5kIGNsb3NlIHRoZSBwaWNrZXIuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2Ugb3BlbiB0aGUgcGlja2VyLlxuICAgICAgICAgICAgaWYgKCBpc0tleWNvZGVEZWxldGUgKSB7IFAuY2xlYXIoKS5jbG9zZSgpIH1cbiAgICAgICAgICAgIGVsc2UgeyBQLm9wZW4oKSB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIFNlcGFyYXRlZCBmb3IgSUVcbiAgICBmdW5jdGlvbiBoYW5kbGVGb2N1c1RvT3BlbkV2ZW50KCBldmVudCApIHtcblxuICAgICAgICAvLyBTdG9wIHRoZSBldmVudCBmcm9tIHByb3BhZ2F0aW5nIHRvIHRoZSBkb2MuXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICAgICAgLy8gSWYgaXTigJlzIGEgZm9jdXMgZXZlbnQsIGFkZCB0aGUg4oCcZm9jdXNlZOKAnSBjbGFzcyB0byB0aGUgcm9vdC5cbiAgICAgICAgaWYgKCBldmVudC50eXBlID09ICdmb2N1cycgKSB7XG4gICAgICAgICAgICBQLiRyb290LmFkZENsYXNzKCBDTEFTU0VTLmZvY3VzZWQgKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQW5kIHRoZW4gZmluYWxseSBvcGVuIHRoZSBwaWNrZXIuXG4gICAgICAgIFAub3BlbigpXG4gICAgfVxuXG5cbiAgICAvLyBSZXR1cm4gYSBuZXcgcGlja2VyIGluc3RhbmNlLlxuICAgIHJldHVybiBuZXcgUGlja2VySW5zdGFuY2UoKVxufSAvL1BpY2tlckNvbnN0cnVjdG9yXG5cblxuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGNsYXNzZXMgYW5kIHByZWZpeCB0byB1c2UgZm9yIHRoZSBIVE1MIGNsYXNzZXMuXG4gKi9cblBpY2tlckNvbnN0cnVjdG9yLmtsYXNzZXMgPSBmdW5jdGlvbiggcHJlZml4ICkge1xuICAgIHByZWZpeCA9IHByZWZpeCB8fCAncGlja2VyJ1xuICAgIHJldHVybiB7XG5cbiAgICAgICAgcGlja2VyOiBwcmVmaXgsXG4gICAgICAgIG9wZW5lZDogcHJlZml4ICsgJy0tb3BlbmVkJyxcbiAgICAgICAgZm9jdXNlZDogcHJlZml4ICsgJy0tZm9jdXNlZCcsXG5cbiAgICAgICAgaW5wdXQ6IHByZWZpeCArICdfX2lucHV0JyxcbiAgICAgICAgYWN0aXZlOiBwcmVmaXggKyAnX19pbnB1dC0tYWN0aXZlJyxcbiAgICAgICAgdGFyZ2V0OiBwcmVmaXggKyAnX19pbnB1dC0tdGFyZ2V0JyxcblxuICAgICAgICBob2xkZXI6IHByZWZpeCArICdfX2hvbGRlcicsXG5cbiAgICAgICAgZnJhbWU6IHByZWZpeCArICdfX2ZyYW1lJyxcbiAgICAgICAgd3JhcDogcHJlZml4ICsgJ19fd3JhcCcsXG5cbiAgICAgICAgYm94OiBwcmVmaXggKyAnX19ib3gnXG4gICAgfVxufSAvL1BpY2tlckNvbnN0cnVjdG9yLmtsYXNzZXNcblxuXG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGRlZmF1bHQgdGhlbWUgaXMgYmVpbmcgdXNlZC5cbiAqL1xuZnVuY3Rpb24gaXNVc2luZ0RlZmF1bHRUaGVtZSggZWxlbWVudCApIHtcblxuICAgIHZhciB0aGVtZSxcbiAgICAgICAgcHJvcCA9ICdwb3NpdGlvbidcblxuICAgIC8vIEZvciBJRS5cbiAgICBpZiAoIGVsZW1lbnQuY3VycmVudFN0eWxlICkge1xuICAgICAgICB0aGVtZSA9IGVsZW1lbnQuY3VycmVudFN0eWxlW3Byb3BdXG4gICAgfVxuXG4gICAgLy8gRm9yIG5vcm1hbCBicm93c2Vycy5cbiAgICBlbHNlIGlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7XG4gICAgICAgIHRoZW1lID0gZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbWVudCApW3Byb3BdXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoZW1lID09ICdmaXhlZCdcbn1cblxuXG5cbi8qKlxuICogR2V0IHRoZSB3aWR0aCBvZiB0aGUgYnJvd3NlcuKAmXMgc2Nyb2xsYmFyLlxuICogVGFrZW4gZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL1ZvZGthQmVhcnMvUmVtb2RhbC9ibG9iL21hc3Rlci9zcmMvanF1ZXJ5LnJlbW9kYWwuanNcbiAqL1xuZnVuY3Rpb24gZ2V0U2Nyb2xsYmFyV2lkdGgoKSB7XG5cbiAgICBpZiAoICRodG1sLmhlaWdodCgpIDw9ICR3aW5kb3cuaGVpZ2h0KCkgKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgdmFyICRvdXRlciA9ICQoICc8ZGl2IHN0eWxlPVwidmlzaWJpbGl0eTpoaWRkZW47d2lkdGg6MTAwcHhcIiAvPicgKS5cbiAgICAgICAgYXBwZW5kVG8oICdib2R5JyApXG5cbiAgICAvLyBHZXQgdGhlIHdpZHRoIHdpdGhvdXQgc2Nyb2xsYmFycy5cbiAgICB2YXIgd2lkdGhXaXRob3V0U2Nyb2xsID0gJG91dGVyWzBdLm9mZnNldFdpZHRoXG5cbiAgICAvLyBGb3JjZSBhZGRpbmcgc2Nyb2xsYmFycy5cbiAgICAkb3V0ZXIuY3NzKCAnb3ZlcmZsb3cnLCAnc2Nyb2xsJyApXG5cbiAgICAvLyBBZGQgdGhlIGlubmVyIGRpdi5cbiAgICB2YXIgJGlubmVyID0gJCggJzxkaXYgc3R5bGU9XCJ3aWR0aDoxMDAlXCIgLz4nICkuYXBwZW5kVG8oICRvdXRlciApXG5cbiAgICAvLyBHZXQgdGhlIHdpZHRoIHdpdGggc2Nyb2xsYmFycy5cbiAgICB2YXIgd2lkdGhXaXRoU2Nyb2xsID0gJGlubmVyWzBdLm9mZnNldFdpZHRoXG5cbiAgICAvLyBSZW1vdmUgdGhlIGRpdnMuXG4gICAgJG91dGVyLnJlbW92ZSgpXG5cbiAgICAvLyBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgd2lkdGhzLlxuICAgIHJldHVybiB3aWR0aFdpdGhvdXRTY3JvbGwgLSB3aWR0aFdpdGhTY3JvbGxcbn1cblxuXG5cbi8qKlxuICogUGlja2VyQ29uc3RydWN0b3IgaGVscGVyIG1ldGhvZHMuXG4gKi9cblBpY2tlckNvbnN0cnVjdG9yLl8gPSB7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBncm91cCBvZiBub2Rlcy4gRXhwZWN0czpcbiAgICAgKiBgXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1pbjogICAge0ludGVnZXJ9LFxuICAgICAgICAgICAgbWF4OiAgICB7SW50ZWdlcn0sXG4gICAgICAgICAgICBpOiAgICAgIHtJbnRlZ2VyfSxcbiAgICAgICAgICAgIG5vZGU6ICAge1N0cmluZ30sXG4gICAgICAgICAgICBpdGVtOiAgIHtGdW5jdGlvbn1cbiAgICAgICAgfVxuICAgICAqIGBcbiAgICAgKi9cbiAgICBncm91cDogZnVuY3Rpb24oIGdyb3VwT2JqZWN0ICkge1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgLy8gU2NvcGUgZm9yIHRoZSBsb29wZWQgb2JqZWN0XG4gICAgICAgICAgICBsb29wT2JqZWN0U2NvcGUsXG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbm9kZXMgbGlzdFxuICAgICAgICAgICAgbm9kZXNMaXN0ID0gJycsXG5cbiAgICAgICAgICAgIC8vIFRoZSBjb3VudGVyIHN0YXJ0cyBmcm9tIHRoZSBgbWluYFxuICAgICAgICAgICAgY291bnRlciA9IFBpY2tlckNvbnN0cnVjdG9yLl8udHJpZ2dlciggZ3JvdXBPYmplY3QubWluLCBncm91cE9iamVjdCApXG5cblxuICAgICAgICAvLyBMb29wIGZyb20gdGhlIGBtaW5gIHRvIGBtYXhgLCBpbmNyZW1lbnRpbmcgYnkgYGlgXG4gICAgICAgIGZvciAoIDsgY291bnRlciA8PSBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGdyb3VwT2JqZWN0Lm1heCwgZ3JvdXBPYmplY3QsIFsgY291bnRlciBdICk7IGNvdW50ZXIgKz0gZ3JvdXBPYmplY3QuaSApIHtcblxuICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgYGl0ZW1gIGZ1bmN0aW9uIHdpdGhpbiBzY29wZSBvZiB0aGUgb2JqZWN0XG4gICAgICAgICAgICBsb29wT2JqZWN0U2NvcGUgPSBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGdyb3VwT2JqZWN0Lml0ZW0sIGdyb3VwT2JqZWN0LCBbIGNvdW50ZXIgXSApXG5cbiAgICAgICAgICAgIC8vIFNwbGljZSB0aGUgc3ViZ3JvdXAgYW5kIGNyZWF0ZSBub2RlcyBvdXQgb2YgdGhlIHN1YiBub2Rlc1xuICAgICAgICAgICAgbm9kZXNMaXN0ICs9IFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZShcbiAgICAgICAgICAgICAgICBncm91cE9iamVjdC5ub2RlLFxuICAgICAgICAgICAgICAgIGxvb3BPYmplY3RTY29wZVsgMCBdLCAgIC8vIHRoZSBub2RlXG4gICAgICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlWyAxIF0sICAgLy8gdGhlIGNsYXNzZXNcbiAgICAgICAgICAgICAgICBsb29wT2JqZWN0U2NvcGVbIDIgXSAgICAvLyB0aGUgYXR0cmlidXRlc1xuICAgICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBsaXN0IG9mIG5vZGVzXG4gICAgICAgIHJldHVybiBub2Rlc0xpc3RcbiAgICB9LCAvL2dyb3VwXG5cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGRvbSBub2RlIHN0cmluZ1xuICAgICAqL1xuICAgIG5vZGU6IGZ1bmN0aW9uKCB3cmFwcGVyLCBpdGVtLCBrbGFzcywgYXR0cmlidXRlICkge1xuXG4gICAgICAgIC8vIElmIHRoZSBpdGVtIGlzIGZhbHNlLXksIGp1c3QgcmV0dXJuIGFuIGVtcHR5IHN0cmluZ1xuICAgICAgICBpZiAoICFpdGVtICkgcmV0dXJuICcnXG5cbiAgICAgICAgLy8gSWYgdGhlIGl0ZW0gaXMgYW4gYXJyYXksIGRvIGEgam9pblxuICAgICAgICBpdGVtID0gJC5pc0FycmF5KCBpdGVtICkgPyBpdGVtLmpvaW4oICcnICkgOiBpdGVtXG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBjbGFzc1xuICAgICAgICBrbGFzcyA9IGtsYXNzID8gJyBjbGFzcz1cIicgKyBrbGFzcyArICdcIicgOiAnJ1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBhbnkgYXR0cmlidXRlc1xuICAgICAgICBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGUgPyAnICcgKyBhdHRyaWJ1dGUgOiAnJ1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgd3JhcHBlZCBpdGVtXG4gICAgICAgIHJldHVybiAnPCcgKyB3cmFwcGVyICsga2xhc3MgKyBhdHRyaWJ1dGUgKyAnPicgKyBpdGVtICsgJzwvJyArIHdyYXBwZXIgKyAnPidcbiAgICB9LCAvL25vZGVcblxuXG4gICAgLyoqXG4gICAgICogTGVhZCBudW1iZXJzIGJlbG93IDEwIHdpdGggYSB6ZXJvLlxuICAgICAqL1xuICAgIGxlYWQ6IGZ1bmN0aW9uKCBudW1iZXIgKSB7XG4gICAgICAgIHJldHVybiAoIG51bWJlciA8IDEwID8gJzAnOiAnJyApICsgbnVtYmVyXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBhIGZ1bmN0aW9uIG90aGVyd2lzZSByZXR1cm4gdGhlIHZhbHVlLlxuICAgICAqL1xuICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgc2NvcGUsIGFyZ3MgKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrLmFwcGx5KCBzY29wZSwgYXJncyB8fCBbXSApIDogY2FsbGJhY2tcbiAgICB9LFxuXG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgc2Vjb25kIGNoYXJhY3RlciBpcyBhIGRpZ2l0LCBsZW5ndGggaXMgMiBvdGhlcndpc2UgMS5cbiAgICAgKi9cbiAgICBkaWdpdHM6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XG4gICAgICAgIHJldHVybiAoIC9cXGQvICkudGVzdCggc3RyaW5nWyAxIF0gKSA/IDIgOiAxXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogVGVsbCBpZiBzb21ldGhpbmcgaXMgYSBkYXRlIG9iamVjdC5cbiAgICAgKi9cbiAgICBpc0RhdGU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwoIHZhbHVlICkuaW5kZXhPZiggJ0RhdGUnICkgPiAtMSAmJiB0aGlzLmlzSW50ZWdlciggdmFsdWUuZ2V0RGF0ZSgpIClcbiAgICB9LFxuXG5cbiAgICAvKipcbiAgICAgKiBUZWxsIGlmIHNvbWV0aGluZyBpcyBhbiBpbnRlZ2VyLlxuICAgICAqL1xuICAgIGlzSW50ZWdlcjogZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbCggdmFsdWUgKS5pbmRleE9mKCAnTnVtYmVyJyApID4gLTEgJiYgdmFsdWUgJSAxID09PSAwXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIEFSSUEgYXR0cmlidXRlIHN0cmluZ3MuXG4gICAgICovXG4gICAgYXJpYUF0dHI6IGFyaWFBdHRyXG59IC8vUGlja2VyQ29uc3RydWN0b3IuX1xuXG5cblxuLyoqXG4gKiBFeHRlbmQgdGhlIHBpY2tlciB3aXRoIGEgY29tcG9uZW50IGFuZCBkZWZhdWx0cy5cbiAqL1xuUGlja2VyQ29uc3RydWN0b3IuZXh0ZW5kID0gZnVuY3Rpb24oIG5hbWUsIENvbXBvbmVudCApIHtcblxuICAgIC8vIEV4dGVuZCBqUXVlcnkuXG4gICAgJC5mblsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMsIGFjdGlvbiApIHtcblxuICAgICAgICAvLyBHcmFiIHRoZSBjb21wb25lbnQgZGF0YS5cbiAgICAgICAgdmFyIGNvbXBvbmVudERhdGEgPSB0aGlzLmRhdGEoIG5hbWUgKVxuXG4gICAgICAgIC8vIElmIHRoZSBwaWNrZXIgaXMgcmVxdWVzdGVkLCByZXR1cm4gdGhlIGRhdGEgb2JqZWN0LlxuICAgICAgICBpZiAoIG9wdGlvbnMgPT0gJ3BpY2tlcicgKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50RGF0YVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIGNvbXBvbmVudCBkYXRhIGV4aXN0cyBhbmQgYG9wdGlvbnNgIGlzIGEgc3RyaW5nLCBjYXJyeSBvdXQgdGhlIGFjdGlvbi5cbiAgICAgICAgaWYgKCBjb21wb25lbnREYXRhICYmIHR5cGVvZiBvcHRpb25zID09ICdzdHJpbmcnICkge1xuICAgICAgICAgICAgcmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yLl8udHJpZ2dlciggY29tcG9uZW50RGF0YVsgb3B0aW9ucyBdLCBjb21wb25lbnREYXRhLCBbIGFjdGlvbiBdIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE90aGVyd2lzZSBnbyB0aHJvdWdoIGVhY2ggbWF0Y2hlZCBlbGVtZW50IGFuZCBpZiB0aGUgY29tcG9uZW50XG4gICAgICAgIC8vIGRvZXNu4oCZdCBleGlzdCwgY3JlYXRlIGEgbmV3IHBpY2tlciB1c2luZyBgdGhpc2AgZWxlbWVudFxuICAgICAgICAvLyBhbmQgbWVyZ2luZyB0aGUgZGVmYXVsdHMgYW5kIG9wdGlvbnMgd2l0aCBhIGRlZXAgY29weS5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKCB0aGlzIClcbiAgICAgICAgICAgIGlmICggISR0aGlzLmRhdGEoIG5hbWUgKSApIHtcbiAgICAgICAgICAgICAgICBuZXcgUGlja2VyQ29uc3RydWN0b3IoIHRoaXMsIG5hbWUsIENvbXBvbmVudCwgb3B0aW9ucyApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cy5cbiAgICAkLmZuWyBuYW1lIF0uZGVmYXVsdHMgPSBDb21wb25lbnQuZGVmYXVsdHNcbn0gLy9QaWNrZXJDb25zdHJ1Y3Rvci5leHRlbmRcblxuXG5cbmZ1bmN0aW9uIGFyaWEoZWxlbWVudCwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGlmICggJC5pc1BsYWluT2JqZWN0KGF0dHJpYnV0ZSkgKSB7XG4gICAgICAgIGZvciAoIHZhciBrZXkgaW4gYXR0cmlidXRlICkge1xuICAgICAgICAgICAgYXJpYVNldChlbGVtZW50LCBrZXksIGF0dHJpYnV0ZVtrZXldKVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhcmlhU2V0KGVsZW1lbnQsIGF0dHJpYnV0ZSwgdmFsdWUpXG4gICAgfVxufVxuZnVuY3Rpb24gYXJpYVNldChlbGVtZW50LCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgIChhdHRyaWJ1dGUgPT0gJ3JvbGUnID8gJycgOiAnYXJpYS0nKSArIGF0dHJpYnV0ZSxcbiAgICAgICAgdmFsdWVcbiAgICApXG59XG5mdW5jdGlvbiBhcmlhQXR0cihhdHRyaWJ1dGUsIGRhdGEpIHtcbiAgICBpZiAoICEkLmlzUGxhaW5PYmplY3QoYXR0cmlidXRlKSApIHtcbiAgICAgICAgYXR0cmlidXRlID0geyBhdHRyaWJ1dGU6IGRhdGEgfVxuICAgIH1cbiAgICBkYXRhID0gJydcbiAgICBmb3IgKCB2YXIga2V5IGluIGF0dHJpYnV0ZSApIHtcbiAgICAgICAgdmFyIGF0dHIgPSAoa2V5ID09ICdyb2xlJyA/ICcnIDogJ2FyaWEtJykgKyBrZXksXG4gICAgICAgICAgICBhdHRyVmFsID0gYXR0cmlidXRlW2tleV1cbiAgICAgICAgZGF0YSArPSBhdHRyVmFsID09IG51bGwgPyAnJyA6IGF0dHIgKyAnPVwiJyArIGF0dHJpYnV0ZVtrZXldICsgJ1wiJ1xuICAgIH1cbiAgICByZXR1cm4gZGF0YVxufVxuXG4vLyBJRTggYnVnIHRocm93cyBhbiBlcnJvciBmb3IgYWN0aXZlRWxlbWVudHMgd2l0aGluIGlmcmFtZXMuXG5mdW5jdGlvbiBnZXRBY3RpdmVFbGVtZW50KCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgfSBjYXRjaCAoIGVyciApIHsgfVxufVxuXG5cblxuLy8gRXhwb3NlIHRoZSBwaWNrZXIgY29uc3RydWN0b3IuXG5yZXR1cm4gUGlja2VyQ29uc3RydWN0b3JcblxuXG59KSk7XG5cblxuLyohXG4gKiBEYXRlIHBpY2tlciBmb3IgcGlja2FkYXRlLmpzIHYzLjUuMFxuICogaHR0cDovL2Ftc3VsLmdpdGh1Yi5pby9waWNrYWRhdGUuanMvZGF0ZS5odG1cbiAqL1xuXG4oZnVuY3Rpb24gKCBmYWN0b3J5ICkge1xuXG4gICAgLy8gQU1ELlxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKVxuICAgICAgICBkZWZpbmUoIFsncGlja2VyJywgJ2pxdWVyeSddLCBmYWN0b3J5IClcblxuICAgIC8vIE5vZGUuanMvYnJvd3NlcmlmeS5cbiAgICBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgKVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJy4vcGlja2VyLmpzJyksIHJlcXVpcmUoJ2pxdWVyeScpIClcblxuICAgIC8vIEJyb3dzZXIgZ2xvYmFscy5cbiAgICBlbHNlIGZhY3RvcnkoIFBpY2tlciwgalF1ZXJ5IClcblxufShmdW5jdGlvbiggUGlja2VyLCAkICkge1xuXG5cbi8qKlxuICogR2xvYmFscyBhbmQgY29uc3RhbnRzXG4gKi9cbnZhciBEQVlTX0lOX1dFRUsgPSA3LFxuICAgIFdFRUtTX0lOX0NBTEVOREFSID0gNixcbiAgICBfID0gUGlja2VyLl9cblxuXG5cbi8qKlxuICogVGhlIGRhdGUgcGlja2VyIGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERhdGVQaWNrZXIoIHBpY2tlciwgc2V0dGluZ3MgKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxuICAgICAgICBlbGVtZW50ID0gcGlja2VyLiRub2RlWyAwIF0sXG4gICAgICAgIGVsZW1lbnRWYWx1ZSA9IGVsZW1lbnQudmFsdWUsXG4gICAgICAgIGVsZW1lbnREYXRhVmFsdWUgPSBwaWNrZXIuJG5vZGUuZGF0YSggJ3ZhbHVlJyApLFxuICAgICAgICB2YWx1ZVN0cmluZyA9IGVsZW1lbnREYXRhVmFsdWUgfHwgZWxlbWVudFZhbHVlLFxuICAgICAgICBmb3JtYXRTdHJpbmcgPSBlbGVtZW50RGF0YVZhbHVlID8gc2V0dGluZ3MuZm9ybWF0U3VibWl0IDogc2V0dGluZ3MuZm9ybWF0LFxuICAgICAgICBpc1JUTCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jdXJyZW50U3R5bGUgP1xuXG4gICAgICAgICAgICAgICAgLy8gRm9yIElFLlxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY3VycmVudFN0eWxlLmRpcmVjdGlvbiA9PSAncnRsJyA6XG5cbiAgICAgICAgICAgICAgICAvLyBGb3Igbm9ybWFsIGJyb3dzZXJzLlxuICAgICAgICAgICAgICAgIGdldENvbXB1dGVkU3R5bGUoIHBpY2tlci4kcm9vdFswXSApLmRpcmVjdGlvbiA9PSAncnRsJ1xuICAgICAgICB9XG5cbiAgICBjYWxlbmRhci5zZXR0aW5ncyA9IHNldHRpbmdzXG4gICAgY2FsZW5kYXIuJG5vZGUgPSBwaWNrZXIuJG5vZGVcblxuICAgIC8vIFRoZSBxdWV1ZSBvZiBtZXRob2RzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIGl0ZW0gb2JqZWN0cy5cbiAgICBjYWxlbmRhci5xdWV1ZSA9IHtcbiAgICAgICAgbWluOiAnbWVhc3VyZSBjcmVhdGUnLFxuICAgICAgICBtYXg6ICdtZWFzdXJlIGNyZWF0ZScsXG4gICAgICAgIG5vdzogJ25vdyBjcmVhdGUnLFxuICAgICAgICBzZWxlY3Q6ICdwYXJzZSBjcmVhdGUgdmFsaWRhdGUnLFxuICAgICAgICBoaWdobGlnaHQ6ICdwYXJzZSBuYXZpZ2F0ZSBjcmVhdGUgdmFsaWRhdGUnLFxuICAgICAgICB2aWV3OiAncGFyc2UgY3JlYXRlIHZhbGlkYXRlIHZpZXdzZXQnLFxuICAgICAgICBkaXNhYmxlOiAnZGVhY3RpdmF0ZScsXG4gICAgICAgIGVuYWJsZTogJ2FjdGl2YXRlJ1xuICAgIH1cblxuICAgIC8vIFRoZSBjb21wb25lbnQncyBpdGVtIG9iamVjdC5cbiAgICBjYWxlbmRhci5pdGVtID0ge31cblxuICAgIGNhbGVuZGFyLml0ZW0uY2xlYXIgPSBudWxsXG4gICAgY2FsZW5kYXIuaXRlbS5kaXNhYmxlID0gKCBzZXR0aW5ncy5kaXNhYmxlIHx8IFtdICkuc2xpY2UoIDAgKVxuICAgIGNhbGVuZGFyLml0ZW0uZW5hYmxlID0gLShmdW5jdGlvbiggY29sbGVjdGlvbkRpc2FibGVkICkge1xuICAgICAgICByZXR1cm4gY29sbGVjdGlvbkRpc2FibGVkWyAwIF0gPT09IHRydWUgPyBjb2xsZWN0aW9uRGlzYWJsZWQuc2hpZnQoKSA6IC0xXG4gICAgfSkoIGNhbGVuZGFyLml0ZW0uZGlzYWJsZSApXG5cbiAgICBjYWxlbmRhci5cbiAgICAgICAgc2V0KCAnbWluJywgc2V0dGluZ3MubWluICkuXG4gICAgICAgIHNldCggJ21heCcsIHNldHRpbmdzLm1heCApLlxuICAgICAgICBzZXQoICdub3cnIClcblxuICAgIC8vIFdoZW4gdGhlcmXigJlzIGEgdmFsdWUsIHNldCB0aGUgYHNlbGVjdGAsIHdoaWNoIGluIHR1cm5cbiAgICAvLyBhbHNvIHNldHMgdGhlIGBoaWdobGlnaHRgIGFuZCBgdmlld2AuXG4gICAgaWYgKCB2YWx1ZVN0cmluZyApIHtcbiAgICAgICAgY2FsZW5kYXIuc2V0KCAnc2VsZWN0JywgdmFsdWVTdHJpbmcsIHsgZm9ybWF0OiBmb3JtYXRTdHJpbmcgfSlcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZeKAmXMgbm8gdmFsdWUsIGRlZmF1bHQgdG8gaGlnaGxpZ2h0aW5nIOKAnHRvZGF54oCdLlxuICAgIGVsc2Uge1xuICAgICAgICBjYWxlbmRhci5cbiAgICAgICAgICAgIHNldCggJ3NlbGVjdCcsIG51bGwgKS5cbiAgICAgICAgICAgIHNldCggJ2hpZ2hsaWdodCcsIGNhbGVuZGFyLml0ZW0ubm93IClcbiAgICB9XG5cblxuICAgIC8vIFRoZSBrZXljb2RlIHRvIG1vdmVtZW50IG1hcHBpbmcuXG4gICAgY2FsZW5kYXIua2V5ID0ge1xuICAgICAgICA0MDogNywgLy8gRG93blxuICAgICAgICAzODogLTcsIC8vIFVwXG4gICAgICAgIDM5OiBmdW5jdGlvbigpIHsgcmV0dXJuIGlzUlRMKCkgPyAtMSA6IDEgfSwgLy8gUmlnaHRcbiAgICAgICAgMzc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNSVEwoKSA/IDEgOiAtMSB9LCAvLyBMZWZ0XG4gICAgICAgIGdvOiBmdW5jdGlvbiggdGltZUNoYW5nZSApIHtcbiAgICAgICAgICAgIHZhciBoaWdobGlnaHRlZE9iamVjdCA9IGNhbGVuZGFyLml0ZW0uaGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSBuZXcgRGF0ZSggaGlnaGxpZ2h0ZWRPYmplY3QueWVhciwgaGlnaGxpZ2h0ZWRPYmplY3QubW9udGgsIGhpZ2hsaWdodGVkT2JqZWN0LmRhdGUgKyB0aW1lQ2hhbmdlIClcbiAgICAgICAgICAgIGNhbGVuZGFyLnNldChcbiAgICAgICAgICAgICAgICAnaGlnaGxpZ2h0JyxcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlLFxuICAgICAgICAgICAgICAgIHsgaW50ZXJ2YWw6IHRpbWVDaGFuZ2UgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBCaW5kIHNvbWUgcGlja2VyIGV2ZW50cy5cbiAgICBwaWNrZXIuXG4gICAgICAgIG9uKCAncmVuZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0TW9udGggKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoIHZhbHVlICkge1xuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuc2V0KCAnaGlnaGxpZ2h0JywgWyBwaWNrZXIuZ2V0KCAndmlldycgKS55ZWFyLCB2YWx1ZSwgcGlja2VyLmdldCggJ2hpZ2hsaWdodCcgKS5kYXRlIF0gKVxuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0TW9udGggKS50cmlnZ2VyKCAnZm9jdXMnIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICcuJyArIHNldHRpbmdzLmtsYXNzLnNlbGVjdFllYXIgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoIHZhbHVlICkge1xuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuc2V0KCAnaGlnaGxpZ2h0JywgWyB2YWx1ZSwgcGlja2VyLmdldCggJ3ZpZXcnICkubW9udGgsIHBpY2tlci5nZXQoICdoaWdobGlnaHQnICkuZGF0ZSBdIClcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICcuJyArIHNldHRpbmdzLmtsYXNzLnNlbGVjdFllYXIgKS50cmlnZ2VyKCAnZm9jdXMnIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCAxICkuXG4gICAgICAgIG9uKCAnb3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGluY2x1ZGVUb2RheSA9ICcnXG4gICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmRpc2FibGVkKCBjYWxlbmRhci5nZXQoJ25vdycpICkgKSB7XG4gICAgICAgICAgICAgICAgaW5jbHVkZVRvZGF5ID0gJzpub3QoLicgKyBzZXR0aW5ncy5rbGFzcy5idXR0b25Ub2RheSArICcpJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICdidXR0b24nICsgaW5jbHVkZVRvZGF5ICsgJywgc2VsZWN0JyApLmF0dHIoICdkaXNhYmxlZCcsIGZhbHNlIClcbiAgICAgICAgfSwgMSApLlxuICAgICAgICBvbiggJ2Nsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJ2J1dHRvbiwgc2VsZWN0JyApLmF0dHIoICdkaXNhYmxlZCcsIHRydWUgKVxuICAgICAgICB9LCAxIClcblxufSAvL0RhdGVQaWNrZXJcblxuXG4vKipcbiAqIFNldCBhIGRhdGVwaWNrZXIgaXRlbSBvYmplY3QuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIGNhbGVuZGFySXRlbSA9IGNhbGVuZGFyLml0ZW1cblxuICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBgbnVsbGAganVzdCBzZXQgaXQgaW1tZWRpYXRlbHkuXG4gICAgaWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcbiAgICAgICAgaWYgKCB0eXBlID09ICdjbGVhcicgKSB0eXBlID0gJ3NlbGVjdCdcbiAgICAgICAgY2FsZW5kYXJJdGVtWyB0eXBlIF0gPSB2YWx1ZVxuICAgICAgICByZXR1cm4gY2FsZW5kYXJcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCB0aGUgcXVldWUgb2YgbWV0aG9kcywgYW5kIGludm9rZSB0aGUgZnVuY3Rpb25zLlxuICAgIC8vIFVwZGF0ZSB0aGlzIGFzIHRoZSB0aW1lIHVuaXQsIGFuZCBzZXQgdGhlIGZpbmFsIHZhbHVlIGFzIHRoaXMgaXRlbS5cbiAgICAvLyAqIEluIHRoZSBjYXNlIG9mIGBlbmFibGVgLCBrZWVwIHRoZSBxdWV1ZSBidXQgc2V0IGBkaXNhYmxlYCBpbnN0ZWFkLlxuICAgIC8vICAgQW5kIGluIHRoZSBjYXNlIG9mIGBmbGlwYCwga2VlcCB0aGUgcXVldWUgYnV0IHNldCBgZW5hYmxlYCBpbnN0ZWFkLlxuICAgIGNhbGVuZGFySXRlbVsgKCB0eXBlID09ICdlbmFibGUnID8gJ2Rpc2FibGUnIDogdHlwZSA9PSAnZmxpcCcgPyAnZW5hYmxlJyA6IHR5cGUgKSBdID0gY2FsZW5kYXIucXVldWVbIHR5cGUgXS5zcGxpdCggJyAnICkubWFwKCBmdW5jdGlvbiggbWV0aG9kICkge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyWyBtZXRob2QgXSggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKVxuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICB9KS5wb3AoKVxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBjYXNjYWRlIHRocm91Z2ggbW9yZSB1cGRhdGVzLlxuICAgIGlmICggdHlwZSA9PSAnc2VsZWN0JyApIHtcbiAgICAgICAgY2FsZW5kYXIuc2V0KCAnaGlnaGxpZ2h0JywgY2FsZW5kYXJJdGVtLnNlbGVjdCwgb3B0aW9ucyApXG4gICAgfVxuICAgIGVsc2UgaWYgKCB0eXBlID09ICdoaWdobGlnaHQnICkge1xuICAgICAgICBjYWxlbmRhci5zZXQoICd2aWV3JywgY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCwgb3B0aW9ucyApXG4gICAgfVxuICAgIGVsc2UgaWYgKCB0eXBlLm1hdGNoKCAvXihmbGlwfG1pbnxtYXh8ZGlzYWJsZXxlbmFibGUpJC8gKSApIHtcbiAgICAgICAgaWYgKCBjYWxlbmRhckl0ZW0uc2VsZWN0ICYmIGNhbGVuZGFyLmRpc2FibGVkKCBjYWxlbmRhckl0ZW0uc2VsZWN0ICkgKSB7XG4gICAgICAgICAgICBjYWxlbmRhci5zZXQoICdzZWxlY3QnLCBjYWxlbmRhckl0ZW0uc2VsZWN0LCBvcHRpb25zIClcbiAgICAgICAgfVxuICAgICAgICBpZiAoIGNhbGVuZGFySXRlbS5oaWdobGlnaHQgJiYgY2FsZW5kYXIuZGlzYWJsZWQoIGNhbGVuZGFySXRlbS5oaWdobGlnaHQgKSApIHtcbiAgICAgICAgICAgIGNhbGVuZGFyLnNldCggJ2hpZ2hsaWdodCcsIGNhbGVuZGFySXRlbS5oaWdobGlnaHQsIG9wdGlvbnMgKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbGVuZGFyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuc2V0XG5cblxuLyoqXG4gKiBHZXQgYSBkYXRlcGlja2VyIGl0ZW0gb2JqZWN0LlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiggdHlwZSApIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtWyB0eXBlIF1cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5nZXRcblxuXG4vKipcbiAqIENyZWF0ZSBhIHBpY2tlciBkYXRlIG9iamVjdC5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkge1xuXG4gICAgdmFyIGlzSW5maW5pdGVWYWx1ZSxcbiAgICAgICAgY2FsZW5kYXIgPSB0aGlzXG5cbiAgICAvLyBJZiB0aGVyZeKAmXMgbm8gdmFsdWUsIHVzZSB0aGUgdHlwZSBhcyB0aGUgdmFsdWUuXG4gICAgdmFsdWUgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdHlwZSA6IHZhbHVlXG5cblxuICAgIC8vIElmIGl04oCZcyBpbmZpbml0eSwgdXBkYXRlIHRoZSB2YWx1ZS5cbiAgICBpZiAoIHZhbHVlID09IC1JbmZpbml0eSB8fCB2YWx1ZSA9PSBJbmZpbml0eSApIHtcbiAgICAgICAgaXNJbmZpbml0ZVZhbHVlID0gdmFsdWVcbiAgICB9XG5cbiAgICAvLyBJZiBpdOKAmXMgYW4gb2JqZWN0LCB1c2UgdGhlIG5hdGl2ZSBkYXRlIG9iamVjdC5cbiAgICBlbHNlIGlmICggJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApICYmIF8uaXNJbnRlZ2VyKCB2YWx1ZS5waWNrICkgKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUub2JqXG4gICAgfVxuXG4gICAgLy8gSWYgaXTigJlzIGFuIGFycmF5LCBjb252ZXJ0IGl0IGludG8gYSBkYXRlIGFuZCBtYWtlIHN1cmVcbiAgICAvLyB0aGF0IGl04oCZcyBhIHZhbGlkIGRhdGUg4oCTIG90aGVyd2lzZSBkZWZhdWx0IHRvIHRvZGF5LlxuICAgIGVsc2UgaWYgKCAkLmlzQXJyYXkoIHZhbHVlICkgKSB7XG4gICAgICAgIHZhbHVlID0gbmV3IERhdGUoIHZhbHVlWyAwIF0sIHZhbHVlWyAxIF0sIHZhbHVlWyAyIF0gKVxuICAgICAgICB2YWx1ZSA9IF8uaXNEYXRlKCB2YWx1ZSApID8gdmFsdWUgOiBjYWxlbmRhci5jcmVhdGUoKS5vYmpcbiAgICB9XG5cbiAgICAvLyBJZiBpdOKAmXMgYSBudW1iZXIgb3IgZGF0ZSBvYmplY3QsIG1ha2UgYSBub3JtYWxpemVkIGRhdGUuXG4gICAgZWxzZSBpZiAoIF8uaXNJbnRlZ2VyKCB2YWx1ZSApIHx8IF8uaXNEYXRlKCB2YWx1ZSApICkge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLm5vcm1hbGl6ZSggbmV3IERhdGUoIHZhbHVlICksIG9wdGlvbnMgKVxuICAgIH1cblxuICAgIC8vIElmIGl04oCZcyBhIGxpdGVyYWwgdHJ1ZSBvciBhbnkgb3RoZXIgY2FzZSwgc2V0IGl0IHRvIG5vdy5cbiAgICBlbHNlIC8qaWYgKCB2YWx1ZSA9PT0gdHJ1ZSApKi8ge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLm5vdyggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgY29tcGlsZWQgb2JqZWN0LlxuICAgIHJldHVybiB7XG4gICAgICAgIHllYXI6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICBtb250aDogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldE1vbnRoKCksXG4gICAgICAgIGRhdGU6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZS5nZXREYXRlKCksXG4gICAgICAgIGRheTogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldERheSgpLFxuICAgICAgICBvYmo6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZSxcbiAgICAgICAgcGljazogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldFRpbWUoKVxuICAgIH1cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVcblxuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmdlIGxpbWl0IG9iamVjdCB1c2luZyBhbiBhcnJheSwgZGF0ZSBvYmplY3QsXG4gKiBsaXRlcmFsIOKAnHRydWXigJ0sIG9yIGludGVnZXIgcmVsYXRpdmUgdG8gYW5vdGhlciB0aW1lLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVSYW5nZSA9IGZ1bmN0aW9uKCBmcm9tLCB0byApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIGNyZWF0ZURhdGUgPSBmdW5jdGlvbiggZGF0ZSApIHtcbiAgICAgICAgICAgIGlmICggZGF0ZSA9PT0gdHJ1ZSB8fCAkLmlzQXJyYXkoIGRhdGUgKSB8fCBfLmlzRGF0ZSggZGF0ZSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxlbmRhci5jcmVhdGUoIGRhdGUgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGVcbiAgICAgICAgfVxuXG4gICAgLy8gQ3JlYXRlIG9iamVjdHMgaWYgcG9zc2libGUuXG4gICAgaWYgKCAhXy5pc0ludGVnZXIoIGZyb20gKSApIHtcbiAgICAgICAgZnJvbSA9IGNyZWF0ZURhdGUoIGZyb20gKVxuICAgIH1cbiAgICBpZiAoICFfLmlzSW50ZWdlciggdG8gKSApIHtcbiAgICAgICAgdG8gPSBjcmVhdGVEYXRlKCB0byApXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHJlbGF0aXZlIGRhdGVzLlxuICAgIGlmICggXy5pc0ludGVnZXIoIGZyb20gKSAmJiAkLmlzUGxhaW5PYmplY3QoIHRvICkgKSB7XG4gICAgICAgIGZyb20gPSBbIHRvLnllYXIsIHRvLm1vbnRoLCB0by5kYXRlICsgZnJvbSBdO1xuICAgIH1cbiAgICBlbHNlIGlmICggXy5pc0ludGVnZXIoIHRvICkgJiYgJC5pc1BsYWluT2JqZWN0KCBmcm9tICkgKSB7XG4gICAgICAgIHRvID0gWyBmcm9tLnllYXIsIGZyb20ubW9udGgsIGZyb20uZGF0ZSArIHRvIF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbTogY3JlYXRlRGF0ZSggZnJvbSApLFxuICAgICAgICB0bzogY3JlYXRlRGF0ZSggdG8gKVxuICAgIH1cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVSYW5nZVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgYSBkYXRlIHVuaXQgZmFsbHMgd2l0aGluIGEgZGF0ZSByYW5nZSBvYmplY3QuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLndpdGhpblJhbmdlID0gZnVuY3Rpb24oIHJhbmdlLCBkYXRlVW5pdCApIHtcbiAgICByYW5nZSA9IHRoaXMuY3JlYXRlUmFuZ2UocmFuZ2UuZnJvbSwgcmFuZ2UudG8pXG4gICAgcmV0dXJuIGRhdGVVbml0LnBpY2sgPj0gcmFuZ2UuZnJvbS5waWNrICYmIGRhdGVVbml0LnBpY2sgPD0gcmFuZ2UudG8ucGlja1xufVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIGRhdGUgcmFuZ2Ugb2JqZWN0cyBvdmVybGFwLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5vdmVybGFwUmFuZ2VzID0gZnVuY3Rpb24oIG9uZSwgdHdvICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpc1xuXG4gICAgLy8gQ29udmVydCB0aGUgcmFuZ2VzIGludG8gY29tcGFyYWJsZSBkYXRlcy5cbiAgICBvbmUgPSBjYWxlbmRhci5jcmVhdGVSYW5nZSggb25lLmZyb20sIG9uZS50byApXG4gICAgdHdvID0gY2FsZW5kYXIuY3JlYXRlUmFuZ2UoIHR3by5mcm9tLCB0d28udG8gKVxuXG4gICAgcmV0dXJuIGNhbGVuZGFyLndpdGhpblJhbmdlKCBvbmUsIHR3by5mcm9tICkgfHwgY2FsZW5kYXIud2l0aGluUmFuZ2UoIG9uZSwgdHdvLnRvICkgfHxcbiAgICAgICAgY2FsZW5kYXIud2l0aGluUmFuZ2UoIHR3bywgb25lLmZyb20gKSB8fCBjYWxlbmRhci53aXRoaW5SYW5nZSggdHdvLCBvbmUudG8gKVxufVxuXG5cbi8qKlxuICogR2V0IHRoZSBkYXRlIHRvZGF5LlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5ub3cgPSBmdW5jdGlvbiggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKSB7XG4gICAgdmFsdWUgPSBuZXcgRGF0ZSgpXG4gICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMucmVsICkge1xuICAgICAgICB2YWx1ZS5zZXREYXRlKCB2YWx1ZS5nZXREYXRlKCkgKyBvcHRpb25zLnJlbCApXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZSggdmFsdWUsIG9wdGlvbnMgKVxufVxuXG5cbi8qKlxuICogTmF2aWdhdGUgdG8gbmV4dC9wcmV2IG1vbnRoLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5uYXZpZ2F0ZSA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHtcblxuICAgIHZhciB0YXJnZXREYXRlT2JqZWN0LFxuICAgICAgICB0YXJnZXRZZWFyLFxuICAgICAgICB0YXJnZXRNb250aCxcbiAgICAgICAgdGFyZ2V0RGF0ZSxcbiAgICAgICAgaXNUYXJnZXRBcnJheSA9ICQuaXNBcnJheSggdmFsdWUgKSxcbiAgICAgICAgaXNUYXJnZXRPYmplY3QgPSAkLmlzUGxhaW5PYmplY3QoIHZhbHVlICksXG4gICAgICAgIHZpZXdzZXRPYmplY3QgPSB0aGlzLml0ZW0udmlldy8qLFxuICAgICAgICBzYWZldHkgPSAxMDAqL1xuXG5cbiAgICBpZiAoIGlzVGFyZ2V0QXJyYXkgfHwgaXNUYXJnZXRPYmplY3QgKSB7XG5cbiAgICAgICAgaWYgKCBpc1RhcmdldE9iamVjdCApIHtcbiAgICAgICAgICAgIHRhcmdldFllYXIgPSB2YWx1ZS55ZWFyXG4gICAgICAgICAgICB0YXJnZXRNb250aCA9IHZhbHVlLm1vbnRoXG4gICAgICAgICAgICB0YXJnZXREYXRlID0gdmFsdWUuZGF0ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0WWVhciA9ICt2YWx1ZVswXVxuICAgICAgICAgICAgdGFyZ2V0TW9udGggPSArdmFsdWVbMV1cbiAgICAgICAgICAgIHRhcmdldERhdGUgPSArdmFsdWVbMl1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHdl4oCZcmUgbmF2aWdhdGluZyBtb250aHMgYnV0IHRoZSB2aWV3IGlzIGluIGEgZGlmZmVyZW50XG4gICAgICAgIC8vIG1vbnRoLCBuYXZpZ2F0ZSB0byB0aGUgdmlld+KAmXMgeWVhciBhbmQgbW9udGguXG4gICAgICAgIGlmICggb3B0aW9ucyAmJiBvcHRpb25zLm5hdiAmJiB2aWV3c2V0T2JqZWN0ICYmIHZpZXdzZXRPYmplY3QubW9udGggIT09IHRhcmdldE1vbnRoICkge1xuICAgICAgICAgICAgdGFyZ2V0WWVhciA9IHZpZXdzZXRPYmplY3QueWVhclxuICAgICAgICAgICAgdGFyZ2V0TW9udGggPSB2aWV3c2V0T2JqZWN0Lm1vbnRoXG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaWd1cmUgb3V0IHRoZSBleHBlY3RlZCB0YXJnZXQgeWVhciBhbmQgbW9udGguXG4gICAgICAgIHRhcmdldERhdGVPYmplY3QgPSBuZXcgRGF0ZSggdGFyZ2V0WWVhciwgdGFyZ2V0TW9udGggKyAoIG9wdGlvbnMgJiYgb3B0aW9ucy5uYXYgPyBvcHRpb25zLm5hdiA6IDAgKSwgMSApXG4gICAgICAgIHRhcmdldFllYXIgPSB0YXJnZXREYXRlT2JqZWN0LmdldEZ1bGxZZWFyKClcbiAgICAgICAgdGFyZ2V0TW9udGggPSB0YXJnZXREYXRlT2JqZWN0LmdldE1vbnRoKClcblxuICAgICAgICAvLyBJZiB0aGUgbW9udGggd2XigJlyZSBnb2luZyB0byBkb2VzbuKAmXQgaGF2ZSBlbm91Z2ggZGF5cyxcbiAgICAgICAgLy8ga2VlcCBkZWNyZWFzaW5nIHRoZSBkYXRlIHVudGlsIHdlIHJlYWNoIHRoZSBtb250aOKAmXMgbGFzdCBkYXRlLlxuICAgICAgICB3aGlsZSAoIC8qc2FmZXR5ICYmKi8gbmV3IERhdGUoIHRhcmdldFllYXIsIHRhcmdldE1vbnRoLCB0YXJnZXREYXRlICkuZ2V0TW9udGgoKSAhPT0gdGFyZ2V0TW9udGggKSB7XG4gICAgICAgICAgICB0YXJnZXREYXRlIC09IDFcbiAgICAgICAgICAgIC8qc2FmZXR5IC09IDFcbiAgICAgICAgICAgIGlmICggIXNhZmV0eSApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnRmVsbCBpbnRvIGFuIGluZmluaXRlIGxvb3Agd2hpbGUgbmF2aWdhdGluZyB0byAnICsgbmV3IERhdGUoIHRhcmdldFllYXIsIHRhcmdldE1vbnRoLCB0YXJnZXREYXRlICkgKyAnLidcbiAgICAgICAgICAgIH0qL1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSBbIHRhcmdldFllYXIsIHRhcmdldE1vbnRoLCB0YXJnZXREYXRlIF1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5uYXZpZ2F0ZVxuXG5cbi8qKlxuICogTm9ybWFsaXplIGEgZGF0ZSBieSBzZXR0aW5nIHRoZSBob3VycyB0byBtaWRuaWdodC5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24oIHZhbHVlLyosIG9wdGlvbnMqLyApIHtcbiAgICB2YWx1ZS5zZXRIb3VycyggMCwgMCwgMCwgMCApXG4gICAgcmV0dXJuIHZhbHVlXG59XG5cblxuLyoqXG4gKiBNZWFzdXJlIHRoZSByYW5nZSBvZiBkYXRlcy5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUubWVhc3VyZSA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZS8qLCBvcHRpb25zKi8gKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzXG5cbiAgICAvLyBJZiBpdOKAmXMgYW55dGhpbmcgZmFsc2UteSwgcmVtb3ZlIHRoZSBsaW1pdHMuXG4gICAgaWYgKCAhdmFsdWUgKSB7XG4gICAgICAgIHZhbHVlID0gdHlwZSA9PSAnbWluJyA/IC1JbmZpbml0eSA6IEluZmluaXR5XG4gICAgfVxuXG4gICAgLy8gSWYgaXTigJlzIGEgc3RyaW5nLCBwYXJzZSBpdC5cbiAgICBlbHNlIGlmICggdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnICkge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLnBhcnNlKCB0eXBlLCB2YWx1ZSApXG4gICAgfVxuXG4gICAgLy8gSWYgaXQncyBhbiBpbnRlZ2VyLCBnZXQgYSBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LlxuICAgIGVsc2UgaWYgKCBfLmlzSW50ZWdlciggdmFsdWUgKSApIHtcbiAgICAgICAgdmFsdWUgPSBjYWxlbmRhci5ub3coIHR5cGUsIHZhbHVlLCB7IHJlbDogdmFsdWUgfSApXG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlXG59IC8vL0RhdGVQaWNrZXIucHJvdG90eXBlLm1lYXN1cmVcblxuXG4vKipcbiAqIENyZWF0ZSBhIHZpZXdzZXQgb2JqZWN0IGJhc2VkIG9uIG5hdmlnYXRpb24uXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLnZpZXdzZXQgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZU9iamVjdC8qLCBvcHRpb25zKi8gKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKFsgZGF0ZU9iamVjdC55ZWFyLCBkYXRlT2JqZWN0Lm1vbnRoLCAxIF0pXG59XG5cblxuLyoqXG4gKiBWYWxpZGF0ZSBhIGRhdGUgYXMgZW5hYmxlZCBhbmQgc2hpZnQgaWYgbmVlZGVkLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uKCB0eXBlLCBkYXRlT2JqZWN0LCBvcHRpb25zICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpcyxcblxuICAgICAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBvcmlnaW5hbCBkYXRlLlxuICAgICAgICBvcmlnaW5hbERhdGVPYmplY3QgPSBkYXRlT2JqZWN0LFxuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGFuIGludGVydmFsLlxuICAgICAgICBpbnRlcnZhbCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnZhbCA/IG9wdGlvbnMuaW50ZXJ2YWwgOiAxLFxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYWxlbmRhciBlbmFibGVkIGRhdGVzIGFyZSBpbnZlcnRlZC5cbiAgICAgICAgaXNGbGlwcGVkQmFzZSA9IGNhbGVuZGFyLml0ZW0uZW5hYmxlID09PSAtMSxcblxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFueSBlbmFibGVkIGRhdGVzIGFmdGVyL2JlZm9yZSBub3cuXG4gICAgICAgIGhhc0VuYWJsZWRCZWZvcmVUYXJnZXQsIGhhc0VuYWJsZWRBZnRlclRhcmdldCxcblxuICAgICAgICAvLyBUaGUgbWluICYgbWF4IGxpbWl0cy5cbiAgICAgICAgbWluTGltaXRPYmplY3QgPSBjYWxlbmRhci5pdGVtLm1pbixcbiAgICAgICAgbWF4TGltaXRPYmplY3QgPSBjYWxlbmRhci5pdGVtLm1heCxcblxuICAgICAgICAvLyBDaGVjayBpZiB3ZeKAmXZlIHJlYWNoZWQgdGhlIGxpbWl0IGR1cmluZyBzaGlmdGluZy5cbiAgICAgICAgcmVhY2hlZE1pbiwgcmVhY2hlZE1heCxcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FsZW5kYXIgaXMgaW52ZXJ0ZWQgYW5kIGF0IGxlYXN0IG9uZSB3ZWVrZGF5IGlzIGVuYWJsZWQuXG4gICAgICAgIGhhc0VuYWJsZWRXZWVrZGF5cyA9IGlzRmxpcHBlZEJhc2UgJiYgY2FsZW5kYXIuaXRlbS5kaXNhYmxlLmZpbHRlciggZnVuY3Rpb24oIHZhbHVlICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBkYXRlLCBjaGVjayB3aGVyZSBpdCBpcyByZWxhdGl2ZSB0byB0aGUgdGFyZ2V0LlxuICAgICAgICAgICAgaWYgKCAkLmlzQXJyYXkoIHZhbHVlICkgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUaW1lID0gY2FsZW5kYXIuY3JlYXRlKCB2YWx1ZSApLnBpY2tcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGVUaW1lIDwgZGF0ZU9iamVjdC5waWNrICkgaGFzRW5hYmxlZEJlZm9yZVRhcmdldCA9IHRydWVcbiAgICAgICAgICAgICAgICBlbHNlIGlmICggZGF0ZVRpbWUgPiBkYXRlT2JqZWN0LnBpY2sgKSBoYXNFbmFibGVkQWZ0ZXJUYXJnZXQgPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJldHVybiBvbmx5IGludGVnZXJzIGZvciBlbmFibGVkIHdlZWtkYXlzLlxuICAgICAgICAgICAgcmV0dXJuIF8uaXNJbnRlZ2VyKCB2YWx1ZSApXG4gICAgICAgIH0pLmxlbmd0aC8qLFxuXG4gICAgICAgIHNhZmV0eSA9IDEwMCovXG5cblxuXG4gICAgLy8gQ2FzZXMgdG8gdmFsaWRhdGUgZm9yOlxuICAgIC8vIFsxXSBOb3QgaW52ZXJ0ZWQgYW5kIGRhdGUgZGlzYWJsZWQuXG4gICAgLy8gWzJdIEludmVydGVkIGFuZCBzb21lIGRhdGVzIGVuYWJsZWQuXG4gICAgLy8gWzNdIE5vdCBpbnZlcnRlZCBhbmQgb3V0IG9mIHJhbmdlLlxuICAgIC8vXG4gICAgLy8gQ2FzZXMgdG8gKipub3QqKiB2YWxpZGF0ZSBmb3I6XG4gICAgLy8g4oCiIE5hdmlnYXRpbmcgbW9udGhzLlxuICAgIC8vIOKAoiBOb3QgaW52ZXJ0ZWQgYW5kIGRhdGUgZW5hYmxlZC5cbiAgICAvLyDigKIgSW52ZXJ0ZWQgYW5kIGFsbCBkYXRlcyBkaXNhYmxlZC5cbiAgICAvLyDigKIgLi5hbmQgYW55dGhpbmcgZWxzZS5cbiAgICBpZiAoICFvcHRpb25zIHx8ICFvcHRpb25zLm5hdiApIGlmIChcbiAgICAgICAgLyogMSAqLyAoICFpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgKSB8fFxuICAgICAgICAvKiAyICovICggaXNGbGlwcGVkQmFzZSAmJiBjYWxlbmRhci5kaXNhYmxlZCggZGF0ZU9iamVjdCApICYmICggaGFzRW5hYmxlZFdlZWtkYXlzIHx8IGhhc0VuYWJsZWRCZWZvcmVUYXJnZXQgfHwgaGFzRW5hYmxlZEFmdGVyVGFyZ2V0ICkgKSB8fFxuICAgICAgICAvKiAzICovICggIWlzRmxpcHBlZEJhc2UgJiYgKGRhdGVPYmplY3QucGljayA8PSBtaW5MaW1pdE9iamVjdC5waWNrIHx8IGRhdGVPYmplY3QucGljayA+PSBtYXhMaW1pdE9iamVjdC5waWNrKSApXG4gICAgKSB7XG5cblxuICAgICAgICAvLyBXaGVuIGludmVydGVkLCBmbGlwIHRoZSBkaXJlY3Rpb24gaWYgdGhlcmUgYXJlbuKAmXQgYW55IGVuYWJsZWQgd2Vla2RheXNcbiAgICAgICAgLy8gYW5kIHRoZXJlIGFyZSBubyBlbmFibGVkIGRhdGVzIGluIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGludGVydmFsLlxuICAgICAgICBpZiAoIGlzRmxpcHBlZEJhc2UgJiYgIWhhc0VuYWJsZWRXZWVrZGF5cyAmJiAoICggIWhhc0VuYWJsZWRBZnRlclRhcmdldCAmJiBpbnRlcnZhbCA+IDAgKSB8fCAoICFoYXNFbmFibGVkQmVmb3JlVGFyZ2V0ICYmIGludGVydmFsIDwgMCApICkgKSB7XG4gICAgICAgICAgICBpbnRlcnZhbCAqPSAtMVxuICAgICAgICB9XG5cblxuICAgICAgICAvLyBLZWVwIGxvb3BpbmcgdW50aWwgd2UgcmVhY2ggYW4gZW5hYmxlZCBkYXRlLlxuICAgICAgICB3aGlsZSAoIC8qc2FmZXR5ICYmKi8gY2FsZW5kYXIuZGlzYWJsZWQoIGRhdGVPYmplY3QgKSApIHtcblxuICAgICAgICAgICAgLypzYWZldHkgLT0gMVxuICAgICAgICAgICAgaWYgKCAhc2FmZXR5ICkge1xuICAgICAgICAgICAgICAgIHRocm93ICdGZWxsIGludG8gYW4gaW5maW5pdGUgbG9vcCB3aGlsZSB2YWxpZGF0aW5nICcgKyBkYXRlT2JqZWN0Lm9iaiArICcuJ1xuICAgICAgICAgICAgfSovXG5cblxuICAgICAgICAgICAgLy8gSWYgd2XigJl2ZSBsb29wZWQgaW50byB0aGUgbmV4dC9wcmV2IG1vbnRoIHdpdGggYSBsYXJnZSBpbnRlcnZhbCwgcmV0dXJuIHRvIHRoZSBvcmlnaW5hbCBkYXRlIGFuZCBmbGF0dGVuIHRoZSBpbnRlcnZhbC5cbiAgICAgICAgICAgIGlmICggTWF0aC5hYnMoIGludGVydmFsICkgPiAxICYmICggZGF0ZU9iamVjdC5tb250aCA8IG9yaWdpbmFsRGF0ZU9iamVjdC5tb250aCB8fCBkYXRlT2JqZWN0Lm1vbnRoID4gb3JpZ2luYWxEYXRlT2JqZWN0Lm1vbnRoICkgKSB7XG4gICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG9yaWdpbmFsRGF0ZU9iamVjdFxuICAgICAgICAgICAgICAgIGludGVydmFsID0gaW50ZXJ2YWwgPiAwID8gMSA6IC0xXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gSWYgd2XigJl2ZSByZWFjaGVkIHRoZSBtaW4vbWF4IGxpbWl0LCByZXZlcnNlIHRoZSBkaXJlY3Rpb24sIGZsYXR0ZW4gdGhlIGludGVydmFsIGFuZCBzZXQgaXQgdG8gdGhlIGxpbWl0LlxuICAgICAgICAgICAgaWYgKCBkYXRlT2JqZWN0LnBpY2sgPD0gbWluTGltaXRPYmplY3QucGljayApIHtcbiAgICAgICAgICAgICAgICByZWFjaGVkTWluID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGludGVydmFsID0gMVxuICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoW1xuICAgICAgICAgICAgICAgICAgICBtaW5MaW1pdE9iamVjdC55ZWFyLFxuICAgICAgICAgICAgICAgICAgICBtaW5MaW1pdE9iamVjdC5tb250aCxcbiAgICAgICAgICAgICAgICAgICAgbWluTGltaXRPYmplY3QuZGF0ZSArIChkYXRlT2JqZWN0LnBpY2sgPT09IG1pbkxpbWl0T2JqZWN0LnBpY2sgPyAwIDogLTEpXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCBkYXRlT2JqZWN0LnBpY2sgPj0gbWF4TGltaXRPYmplY3QucGljayApIHtcbiAgICAgICAgICAgICAgICByZWFjaGVkTWF4ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGludGVydmFsID0gLTFcbiAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gY2FsZW5kYXIuY3JlYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgbWF4TGltaXRPYmplY3QueWVhcixcbiAgICAgICAgICAgICAgICAgICAgbWF4TGltaXRPYmplY3QubW9udGgsXG4gICAgICAgICAgICAgICAgICAgIG1heExpbWl0T2JqZWN0LmRhdGUgKyAoZGF0ZU9iamVjdC5waWNrID09PSBtYXhMaW1pdE9iamVjdC5waWNrID8gMCA6IDEpXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBJZiB3ZeKAmXZlIHJlYWNoZWQgYm90aCBsaW1pdHMsIGp1c3QgYnJlYWsgb3V0IG9mIHRoZSBsb29wLlxuICAgICAgICAgICAgaWYgKCByZWFjaGVkTWluICYmIHJlYWNoZWRNYXggKSB7XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBGaW5hbGx5LCBjcmVhdGUgdGhlIHNoaWZ0ZWQgZGF0ZSB1c2luZyB0aGUgaW50ZXJ2YWwgYW5kIGtlZXAgbG9vcGluZy5cbiAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoWyBkYXRlT2JqZWN0LnllYXIsIGRhdGVPYmplY3QubW9udGgsIGRhdGVPYmplY3QuZGF0ZSArIGludGVydmFsIF0pXG4gICAgICAgIH1cblxuICAgIH0gLy9lbmRpZlxuXG5cbiAgICAvLyBSZXR1cm4gdGhlIGRhdGUgb2JqZWN0IHNldHRsZWQgb24uXG4gICAgcmV0dXJuIGRhdGVPYmplY3Rcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS52YWxpZGF0ZVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgYSBkYXRlIGlzIGRpc2FibGVkLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5kaXNhYmxlZCA9IGZ1bmN0aW9uKCBkYXRlVG9WZXJpZnkgKSB7XG5cbiAgICB2YXJcbiAgICAgICAgY2FsZW5kYXIgPSB0aGlzLFxuXG4gICAgICAgIC8vIEZpbHRlciB0aHJvdWdoIHRoZSBkaXNhYmxlZCBkYXRlcyB0byBjaGVjayBpZiB0aGlzIGlzIG9uZS5cbiAgICAgICAgaXNEaXNhYmxlZE1hdGNoID0gY2FsZW5kYXIuaXRlbS5kaXNhYmxlLmZpbHRlciggZnVuY3Rpb24oIGRhdGVUb0Rpc2FibGUgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBkYXRlIGlzIGEgbnVtYmVyLCBtYXRjaCB0aGUgd2Vla2RheSB3aXRoIDBpbmRleCBhbmQgYGZpcnN0RGF5YCBjaGVjay5cbiAgICAgICAgICAgIGlmICggXy5pc0ludGVnZXIoIGRhdGVUb0Rpc2FibGUgKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZVRvVmVyaWZ5LmRheSA9PT0gKCBjYWxlbmRhci5zZXR0aW5ncy5maXJzdERheSA/IGRhdGVUb0Rpc2FibGUgOiBkYXRlVG9EaXNhYmxlIC0gMSApICUgN1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBpdOKAmXMgYW4gYXJyYXkgb3IgYSBuYXRpdmUgSlMgZGF0ZSwgY3JlYXRlIGFuZCBtYXRjaCB0aGUgZXhhY3QgZGF0ZS5cbiAgICAgICAgICAgIGlmICggJC5pc0FycmF5KCBkYXRlVG9EaXNhYmxlICkgfHwgXy5pc0RhdGUoIGRhdGVUb0Rpc2FibGUgKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZVRvVmVyaWZ5LnBpY2sgPT09IGNhbGVuZGFyLmNyZWF0ZSggZGF0ZVRvRGlzYWJsZSApLnBpY2tcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgaXTigJlzIGFuIG9iamVjdCwgbWF0Y2ggYSBkYXRlIHdpdGhpbiB0aGUg4oCcZnJvbeKAnSBhbmQg4oCcdG/igJ0gcmFuZ2UuXG4gICAgICAgICAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggZGF0ZVRvRGlzYWJsZSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxlbmRhci53aXRoaW5SYW5nZSggZGF0ZVRvRGlzYWJsZSwgZGF0ZVRvVmVyaWZ5IClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIC8vIElmIHRoaXMgZGF0ZSBtYXRjaGVzIGEgZGlzYWJsZWQgZGF0ZSwgY29uZmlybSBpdOKAmXMgbm90IGludmVydGVkLlxuICAgIGlzRGlzYWJsZWRNYXRjaCA9IGlzRGlzYWJsZWRNYXRjaC5sZW5ndGggJiYgIWlzRGlzYWJsZWRNYXRjaC5maWx0ZXIoZnVuY3Rpb24oIGRhdGVUb0Rpc2FibGUgKSB7XG4gICAgICAgIHJldHVybiAkLmlzQXJyYXkoIGRhdGVUb0Rpc2FibGUgKSAmJiBkYXRlVG9EaXNhYmxlWzNdID09ICdpbnZlcnRlZCcgfHxcbiAgICAgICAgICAgICQuaXNQbGFpbk9iamVjdCggZGF0ZVRvRGlzYWJsZSApICYmIGRhdGVUb0Rpc2FibGUuaW52ZXJ0ZWRcbiAgICB9KS5sZW5ndGhcblxuICAgIC8vIENoZWNrIHRoZSBjYWxlbmRhciDigJxlbmFibGVk4oCdIGZsYWcgYW5kIHJlc3BlY3RpdmVseSBmbGlwIHRoZVxuICAgIC8vIGRpc2FibGVkIHN0YXRlLiBUaGVuIGFsc28gY2hlY2sgaWYgaXTigJlzIGJleW9uZCB0aGUgbWluL21heCBsaW1pdHMuXG4gICAgcmV0dXJuIGNhbGVuZGFyLml0ZW0uZW5hYmxlID09PSAtMSA/ICFpc0Rpc2FibGVkTWF0Y2ggOiBpc0Rpc2FibGVkTWF0Y2ggfHxcbiAgICAgICAgZGF0ZVRvVmVyaWZ5LnBpY2sgPCBjYWxlbmRhci5pdGVtLm1pbi5waWNrIHx8XG4gICAgICAgIGRhdGVUb1ZlcmlmeS5waWNrID4gY2FsZW5kYXIuaXRlbS5tYXgucGlja1xuXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuZGlzYWJsZWRcblxuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIGludG8gYSB1c2FibGUgdHlwZS5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxuICAgICAgICBwYXJzaW5nT2JqZWN0ID0ge31cblxuICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IHBhcnNlZCwgd2XigJlyZSBnb29kLlxuICAgIGlmICggIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJyApIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuXG4gICAgLy8gV2UgbmVlZCBhIGAuZm9ybWF0YCB0byBwYXJzZSB0aGUgdmFsdWUgd2l0aC5cbiAgICBpZiAoICEoIG9wdGlvbnMgJiYgb3B0aW9ucy5mb3JtYXQgKSApIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICAgICAgb3B0aW9ucy5mb3JtYXQgPSBjYWxlbmRhci5zZXR0aW5ncy5mb3JtYXRcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHRoZSBmb3JtYXQgaW50byBhbiBhcnJheSBhbmQgdGhlbiBtYXAgdGhyb3VnaCBpdC5cbiAgICBjYWxlbmRhci5mb3JtYXRzLnRvQXJyYXkoIG9wdGlvbnMuZm9ybWF0ICkubWFwKCBmdW5jdGlvbiggbGFiZWwgKSB7XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICAvLyBHcmFiIHRoZSBmb3JtYXR0aW5nIGxhYmVsLlxuICAgICAgICAgICAgZm9ybWF0dGluZ0xhYmVsID0gY2FsZW5kYXIuZm9ybWF0c1sgbGFiZWwgXSxcblxuICAgICAgICAgICAgLy8gVGhlIGZvcm1hdCBsZW5ndGggaXMgZnJvbSB0aGUgZm9ybWF0dGluZyBsYWJlbCBmdW5jdGlvbiBvciB0aGVcbiAgICAgICAgICAgIC8vIGxhYmVsIGxlbmd0aCB3aXRob3V0IHRoZSBlc2NhcGluZyBleGNsYW1hdGlvbiAoISkgbWFyay5cbiAgICAgICAgICAgIGZvcm1hdExlbmd0aCA9IGZvcm1hdHRpbmdMYWJlbCA/IF8udHJpZ2dlciggZm9ybWF0dGluZ0xhYmVsLCBjYWxlbmRhciwgWyB2YWx1ZSwgcGFyc2luZ09iamVjdCBdICkgOiBsYWJlbC5yZXBsYWNlKCAvXiEvLCAnJyApLmxlbmd0aFxuXG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYSBmb3JtYXQgbGFiZWwsIHNwbGl0IHRoZSB2YWx1ZSB1cCB0byB0aGUgZm9ybWF0IGxlbmd0aC5cbiAgICAgICAgLy8gVGhlbiBhZGQgaXQgdG8gdGhlIHBhcnNpbmcgb2JqZWN0IHdpdGggYXBwcm9wcmlhdGUgbGFiZWwuXG4gICAgICAgIGlmICggZm9ybWF0dGluZ0xhYmVsICkge1xuICAgICAgICAgICAgcGFyc2luZ09iamVjdFsgbGFiZWwgXSA9IHZhbHVlLnN1YnN0ciggMCwgZm9ybWF0TGVuZ3RoIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgYXMgdGhlIHN1YnN0cmluZyBmcm9tIGZvcm1hdCBsZW5ndGggdG8gZW5kLlxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0ciggZm9ybWF0TGVuZ3RoIClcbiAgICB9KVxuXG4gICAgLy8gQ29tcGVuc2F0ZSBmb3IgbW9udGggMGluZGV4LlxuICAgIHJldHVybiBbXG4gICAgICAgIHBhcnNpbmdPYmplY3QueXl5eSB8fCBwYXJzaW5nT2JqZWN0Lnl5LFxuICAgICAgICArKCBwYXJzaW5nT2JqZWN0Lm1tIHx8IHBhcnNpbmdPYmplY3QubSApIC0gMSxcbiAgICAgICAgcGFyc2luZ09iamVjdC5kZCB8fCBwYXJzaW5nT2JqZWN0LmRcbiAgICBdXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUucGFyc2VcblxuXG4vKipcbiAqIFZhcmlvdXMgZm9ybWF0cyB0byBkaXNwbGF5IHRoZSBvYmplY3QgaW4uXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmZvcm1hdHMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3Qgd29yZCBpbiBhIGNvbGxlY3Rpb24uXG4gICAgZnVuY3Rpb24gZ2V0V29yZExlbmd0aEZyb21Db2xsZWN0aW9uKCBzdHJpbmcsIGNvbGxlY3Rpb24sIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgLy8gR3JhYiB0aGUgZmlyc3Qgd29yZCBmcm9tIHRoZSBzdHJpbmcuXG4gICAgICAgIHZhciB3b3JkID0gc3RyaW5nLm1hdGNoKCAvXFx3Ky8gKVsgMCBdXG5cbiAgICAgICAgLy8gSWYgdGhlcmUncyBubyBtb250aCBpbmRleCwgYWRkIGl0IHRvIHRoZSBkYXRlIG9iamVjdFxuICAgICAgICBpZiAoICFkYXRlT2JqZWN0Lm1tICYmICFkYXRlT2JqZWN0Lm0gKSB7XG4gICAgICAgICAgICBkYXRlT2JqZWN0Lm0gPSBjb2xsZWN0aW9uLmluZGV4T2YoIHdvcmQgKSArIDFcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSB3b3JkLlxuICAgICAgICByZXR1cm4gd29yZC5sZW5ndGhcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3Qgd29yZCBpbiBhIHN0cmluZy5cbiAgICBmdW5jdGlvbiBnZXRGaXJzdFdvcmRMZW5ndGgoIHN0cmluZyApIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5tYXRjaCggL1xcdysvIClbIDAgXS5sZW5ndGhcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuXG4gICAgICAgIGQ6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgc3RyaW5nLCB0aGVuIGdldCB0aGUgZGlnaXRzIGxlbmd0aC5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIGRhdGUuXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gXy5kaWdpdHMoIHN0cmluZyApIDogZGF0ZU9iamVjdC5kYXRlXG4gICAgICAgIH0sXG4gICAgICAgIGRkOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIHRoZSBsZW5ndGggaXMgYWx3YXlzIDIuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBkYXRlIHdpdGggYSBsZWFkaW5nIHplcm8uXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gMiA6IF8ubGVhZCggZGF0ZU9iamVjdC5kYXRlIClcbiAgICAgICAgfSxcbiAgICAgICAgZGRkOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIGdldCB0aGUgbGVuZ3RoIG9mIHRoZSBmaXJzdCB3b3JkLlxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2hvcnQgc2VsZWN0ZWQgd2Vla2RheS5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRGaXJzdFdvcmRMZW5ndGgoIHN0cmluZyApIDogdGhpcy5zZXR0aW5ncy53ZWVrZGF5c1Nob3J0WyBkYXRlT2JqZWN0LmRheSBdXG4gICAgICAgIH0sXG4gICAgICAgIGRkZGQ6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gZ2V0IHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IHdvcmQuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBmdWxsIHNlbGVjdGVkIHdlZWtkYXkuXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gZ2V0Rmlyc3RXb3JkTGVuZ3RoKCBzdHJpbmcgKSA6IHRoaXMuc2V0dGluZ3Mud2Vla2RheXNGdWxsWyBkYXRlT2JqZWN0LmRheSBdXG4gICAgICAgIH0sXG4gICAgICAgIG06IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gZ2V0IHRoZSBsZW5ndGggb2YgdGhlIGRpZ2l0c1xuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgbW9udGggd2l0aCAwaW5kZXggY29tcGVuc2F0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IF8uZGlnaXRzKCBzdHJpbmcgKSA6IGRhdGVPYmplY3QubW9udGggKyAxXG4gICAgICAgIH0sXG4gICAgICAgIG1tOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIHRoZSBsZW5ndGggaXMgYWx3YXlzIDIuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCB3aXRoIDBpbmRleCBhbmQgbGVhZGluZyB6ZXJvLlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IDIgOiBfLmxlYWQoIGRhdGVPYmplY3QubW9udGggKyAxIClcbiAgICAgICAgfSxcbiAgICAgICAgbW1tOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXMuc2V0dGluZ3MubW9udGhzU2hvcnRcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgZ2V0IGxlbmd0aCBvZiB0aGUgcmVsZXZhbnQgbW9udGggZnJvbSB0aGUgc2hvcnRcbiAgICAgICAgICAgIC8vIG1vbnRocyBjb2xsZWN0aW9uLiBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCBmcm9tIHRoYXQgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRXb3JkTGVuZ3RoRnJvbUNvbGxlY3Rpb24oIHN0cmluZywgY29sbGVjdGlvbiwgZGF0ZU9iamVjdCApIDogY29sbGVjdGlvblsgZGF0ZU9iamVjdC5tb250aCBdXG4gICAgICAgIH0sXG4gICAgICAgIG1tbW06IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcy5zZXR0aW5ncy5tb250aHNGdWxsXG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIGdldCBsZW5ndGggb2YgdGhlIHJlbGV2YW50IG1vbnRoIGZyb20gdGhlIGZ1bGxcbiAgICAgICAgICAgIC8vIG1vbnRocyBjb2xsZWN0aW9uLiBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCBmcm9tIHRoYXQgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRXb3JkTGVuZ3RoRnJvbUNvbGxlY3Rpb24oIHN0cmluZywgY29sbGVjdGlvbiwgZGF0ZU9iamVjdCApIDogY29sbGVjdGlvblsgZGF0ZU9iamVjdC5tb250aCBdXG4gICAgICAgIH0sXG4gICAgICAgIHl5OiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIHRoZSBsZW5ndGggaXMgYWx3YXlzIDIuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCB5ZWFyIGJ5IHNsaWNpbmcgb3V0IHRoZSBmaXJzdCAyIGRpZ2l0cy5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyAyIDogKCAnJyArIGRhdGVPYmplY3QueWVhciApLnNsaWNlKCAyIClcbiAgICAgICAgfSxcbiAgICAgICAgeXl5eTogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiB0aGUgbGVuZ3RoIGlzIGFsd2F5cyA0LlxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgeWVhci5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyA0IDogZGF0ZU9iamVjdC55ZWFyXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGFycmF5IGJ5IHNwbGl0dGluZyB0aGUgZm9ybWF0dGluZyBzdHJpbmcgcGFzc2VkLlxuICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiggZm9ybWF0U3RyaW5nICkgeyByZXR1cm4gZm9ybWF0U3RyaW5nLnNwbGl0KCAvKGR7MSw0fXxtezEsNH18eXs0fXx5eXwhLikvZyApIH0sXG5cbiAgICAgICAgLy8gRm9ybWF0IGFuIG9iamVjdCBpbnRvIGEgc3RyaW5nIHVzaW5nIHRoZSBmb3JtYXR0aW5nIG9wdGlvbnMuXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoIGZvcm1hdFN0cmluZywgaXRlbU9iamVjdCApIHtcbiAgICAgICAgICAgIHZhciBjYWxlbmRhciA9IHRoaXNcbiAgICAgICAgICAgIHJldHVybiBjYWxlbmRhci5mb3JtYXRzLnRvQXJyYXkoIGZvcm1hdFN0cmluZyApLm1hcCggZnVuY3Rpb24oIGxhYmVsICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLnRyaWdnZXIoIGNhbGVuZGFyLmZvcm1hdHNbIGxhYmVsIF0sIGNhbGVuZGFyLCBbIDAsIGl0ZW1PYmplY3QgXSApIHx8IGxhYmVsLnJlcGxhY2UoIC9eIS8sICcnIClcbiAgICAgICAgICAgIH0pLmpvaW4oICcnIClcbiAgICAgICAgfVxuICAgIH1cbn0pKCkgLy9EYXRlUGlja2VyLnByb3RvdHlwZS5mb3JtYXRzXG5cblxuXG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIGRhdGUgdW5pdHMgYXJlIHRoZSBleGFjdC5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuaXNEYXRlRXhhY3QgPSBmdW5jdGlvbiggb25lLCB0d28gKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzXG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIHdlZWtkYXlzLCBkbyBhIGRpcmVjdCBjb21wYXJpc29uLlxuICAgIGlmIChcbiAgICAgICAgKCBfLmlzSW50ZWdlciggb25lICkgJiYgXy5pc0ludGVnZXIoIHR3byApICkgfHxcbiAgICAgICAgKCB0eXBlb2Ygb25lID09ICdib29sZWFuJyAmJiB0eXBlb2YgdHdvID09ICdib29sZWFuJyApXG4gICAgICkge1xuICAgICAgICByZXR1cm4gb25lID09PSB0d29cbiAgICB9XG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIGRhdGUgcmVwcmVzZW50YXRpb25zLCBjb21wYXJlIHRoZSDigJxwaWNr4oCdIHZhbHVlLlxuICAgIGlmIChcbiAgICAgICAgKCBfLmlzRGF0ZSggb25lICkgfHwgJC5pc0FycmF5KCBvbmUgKSApICYmXG4gICAgICAgICggXy5pc0RhdGUoIHR3byApIHx8ICQuaXNBcnJheSggdHdvICkgKVxuICAgICkge1xuICAgICAgICByZXR1cm4gY2FsZW5kYXIuY3JlYXRlKCBvbmUgKS5waWNrID09PSBjYWxlbmRhci5jcmVhdGUoIHR3byApLnBpY2tcbiAgICB9XG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIHJhbmdlIG9iamVjdHMsIGNvbXBhcmUgdGhlIOKAnGZyb23igJ0gYW5kIOKAnHRv4oCdLlxuICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCBvbmUgKSAmJiAkLmlzUGxhaW5PYmplY3QoIHR3byApICkge1xuICAgICAgICByZXR1cm4gY2FsZW5kYXIuaXNEYXRlRXhhY3QoIG9uZS5mcm9tLCB0d28uZnJvbSApICYmIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCBvbmUudG8sIHR3by50byApXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gZGF0ZSB1bml0cyBvdmVybGFwLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5pc0RhdGVPdmVybGFwID0gZnVuY3Rpb24oIG9uZSwgdHdvICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpcyxcbiAgICAgICAgZmlyc3REYXkgPSBjYWxlbmRhci5zZXR0aW5ncy5maXJzdERheSA/IDEgOiAwXG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIGEgd2Vla2RheSBpbmRleCwgY29tcGFyZSB0aGUgZGF5cy5cbiAgICBpZiAoIF8uaXNJbnRlZ2VyKCBvbmUgKSAmJiAoIF8uaXNEYXRlKCB0d28gKSB8fCAkLmlzQXJyYXkoIHR3byApICkgKSB7XG4gICAgICAgIG9uZSA9IG9uZSAlIDcgKyBmaXJzdERheVxuICAgICAgICByZXR1cm4gb25lID09PSBjYWxlbmRhci5jcmVhdGUoIHR3byApLmRheSArIDFcbiAgICB9XG4gICAgaWYgKCBfLmlzSW50ZWdlciggdHdvICkgJiYgKCBfLmlzRGF0ZSggb25lICkgfHwgJC5pc0FycmF5KCBvbmUgKSApICkge1xuICAgICAgICB0d28gPSB0d28gJSA3ICsgZmlyc3REYXlcbiAgICAgICAgcmV0dXJuIHR3byA9PT0gY2FsZW5kYXIuY3JlYXRlKCBvbmUgKS5kYXkgKyAxXG4gICAgfVxuXG4gICAgLy8gV2hlbiB3ZeKAmXJlIHdvcmtpbmcgd2l0aCByYW5nZSBvYmplY3RzLCBjaGVjayBpZiB0aGUgcmFuZ2VzIG92ZXJsYXAuXG4gICAgaWYgKCAkLmlzUGxhaW5PYmplY3QoIG9uZSApICYmICQuaXNQbGFpbk9iamVjdCggdHdvICkgKSB7XG4gICAgICAgIHJldHVybiBjYWxlbmRhci5vdmVybGFwUmFuZ2VzKCBvbmUsIHR3byApXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cblxuLyoqXG4gKiBGbGlwIHRoZSDigJxlbmFibGVk4oCdIHN0YXRlLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5mbGlwRW5hYmxlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdmFyIGl0ZW1PYmplY3QgPSB0aGlzLml0ZW1cbiAgICBpdGVtT2JqZWN0LmVuYWJsZSA9IHZhbCB8fCAoaXRlbU9iamVjdC5lbmFibGUgPT0gLTEgPyAxIDogLTEpXG59XG5cblxuLyoqXG4gKiBNYXJrIGEgY29sbGVjdGlvbiBvZiBkYXRlcyBhcyDigJxkaXNhYmxlZOKAnS5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuZGVhY3RpdmF0ZSA9IGZ1bmN0aW9uKCB0eXBlLCBkYXRlc1RvRGlzYWJsZSApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIGRpc2FibGVkSXRlbXMgPSBjYWxlbmRhci5pdGVtLmRpc2FibGUuc2xpY2UoMClcblxuXG4gICAgLy8gSWYgd2XigJlyZSBmbGlwcGluZywgdGhhdOKAmXMgYWxsIHdlIG5lZWQgdG8gZG8uXG4gICAgaWYgKCBkYXRlc1RvRGlzYWJsZSA9PSAnZmxpcCcgKSB7XG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoKVxuICAgIH1cblxuICAgIGVsc2UgaWYgKCBkYXRlc1RvRGlzYWJsZSA9PT0gZmFsc2UgKSB7XG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoMSlcbiAgICAgICAgZGlzYWJsZWRJdGVtcyA9IFtdXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9EaXNhYmxlID09PSB0cnVlICkge1xuICAgICAgICBjYWxlbmRhci5mbGlwRW5hYmxlKC0xKVxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gW11cbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCB0aGUgZGF0ZXMgdG8gZGlzYWJsZS5cbiAgICBlbHNlIHtcblxuICAgICAgICBkYXRlc1RvRGlzYWJsZS5tYXAoZnVuY3Rpb24oIHVuaXRUb0Rpc2FibGUgKSB7XG5cbiAgICAgICAgICAgIHZhciBtYXRjaEZvdW5kXG5cbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBkaXNhYmxlZCBpdGVtcywgY2hlY2sgZm9yIG1hdGNoZXMuXG4gICAgICAgICAgICAvLyBJZiBzb21ldGhpbmcgaXMgbWF0Y2hlZCwgaW1tZWRpYXRlbHkgYnJlYWsgb3V0LlxuICAgICAgICAgICAgZm9yICggdmFyIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zLmxlbmd0aDsgaW5kZXggKz0gMSApIHtcbiAgICAgICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCB1bml0VG9EaXNhYmxlLCBkaXNhYmxlZEl0ZW1zW2luZGV4XSApICkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgbm90aGluZyB3YXMgZm91bmQsIGFkZCB0aGUgdmFsaWRhdGVkIHVuaXQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gICAgICAgICAgICBpZiAoICFtYXRjaEZvdW5kICkge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgXy5pc0ludGVnZXIoIHVuaXRUb0Rpc2FibGUgKSB8fFxuICAgICAgICAgICAgICAgICAgICBfLmlzRGF0ZSggdW5pdFRvRGlzYWJsZSApIHx8XG4gICAgICAgICAgICAgICAgICAgICQuaXNBcnJheSggdW5pdFRvRGlzYWJsZSApIHx8XG4gICAgICAgICAgICAgICAgICAgICggJC5pc1BsYWluT2JqZWN0KCB1bml0VG9EaXNhYmxlICkgJiYgdW5pdFRvRGlzYWJsZS5mcm9tICYmIHVuaXRUb0Rpc2FibGUudG8gKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zLnB1c2goIHVuaXRUb0Rpc2FibGUgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIHVwZGF0ZWQgY29sbGVjdGlvbi5cbiAgICByZXR1cm4gZGlzYWJsZWRJdGVtc1xufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmRlYWN0aXZhdGVcblxuXG4vKipcbiAqIE1hcmsgYSBjb2xsZWN0aW9uIG9mIGRhdGVzIGFzIOKAnGVuYWJsZWTigJ0uXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24oIHR5cGUsIGRhdGVzVG9FbmFibGUgKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gY2FsZW5kYXIuaXRlbS5kaXNhYmxlLFxuICAgICAgICBkaXNhYmxlZEl0ZW1zQ291bnQgPSBkaXNhYmxlZEl0ZW1zLmxlbmd0aFxuXG4gICAgLy8gSWYgd2XigJlyZSBmbGlwcGluZywgdGhhdOKAmXMgYWxsIHdlIG5lZWQgdG8gZG8uXG4gICAgaWYgKCBkYXRlc1RvRW5hYmxlID09ICdmbGlwJyApIHtcbiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgpXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9FbmFibGUgPT09IHRydWUgKSB7XG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoMSlcbiAgICAgICAgZGlzYWJsZWRJdGVtcyA9IFtdXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9FbmFibGUgPT09IGZhbHNlICkge1xuICAgICAgICBjYWxlbmRhci5mbGlwRW5hYmxlKC0xKVxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gW11cbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCB0aGUgZGlzYWJsZWQgZGF0ZXMuXG4gICAgZWxzZSB7XG5cbiAgICAgICAgZGF0ZXNUb0VuYWJsZS5tYXAoZnVuY3Rpb24oIHVuaXRUb0VuYWJsZSApIHtcblxuICAgICAgICAgICAgdmFyIG1hdGNoRm91bmQsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWRVbml0LFxuICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgIGlzRXhhY3RSYW5nZVxuXG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBkaXNhYmxlZCBpdGVtcyBhbmQgdHJ5IHRvIGZpbmQgYSBtYXRjaC5cbiAgICAgICAgICAgIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zQ291bnQ7IGluZGV4ICs9IDEgKSB7XG5cbiAgICAgICAgICAgICAgICBkaXNhYmxlZFVuaXQgPSBkaXNhYmxlZEl0ZW1zW2luZGV4XVxuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBhbiBleGFjdCBtYXRjaCBpcyBmb3VuZCwgcmVtb3ZlIGl0IGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICAgICAgICAgICAgaWYgKCBjYWxlbmRhci5pc0RhdGVFeGFjdCggZGlzYWJsZWRVbml0LCB1bml0VG9FbmFibGUgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IGRpc2FibGVkSXRlbXNbaW5kZXhdID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICBpc0V4YWN0UmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBhbiBvdmVybGFwcGVkIG1hdGNoIGlzIGZvdW5kLCBhZGQgdGhlIOKAnGludmVydGVk4oCdIHN0YXRlIHRvIGl0LlxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCBjYWxlbmRhci5pc0RhdGVPdmVybGFwKCBkaXNhYmxlZFVuaXQsIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggdW5pdFRvRW5hYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bml0VG9FbmFibGUuaW52ZXJ0ZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdW5pdFRvRW5hYmxlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoICQuaXNBcnJheSggdW5pdFRvRW5hYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdW5pdFRvRW5hYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFtYXRjaEZvdW5kWzNdICkgbWF0Y2hGb3VuZC5wdXNoKCAnaW52ZXJ0ZWQnIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggXy5pc0RhdGUoIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IFsgdW5pdFRvRW5hYmxlLmdldEZ1bGxZZWFyKCksIHVuaXRUb0VuYWJsZS5nZXRNb250aCgpLCB1bml0VG9FbmFibGUuZ2V0RGF0ZSgpLCAnaW52ZXJ0ZWQnIF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgYSBtYXRjaCB3YXMgZm91bmQsIHJlbW92ZSBhIHByZXZpb3VzIGR1cGxpY2F0ZSBlbnRyeS5cbiAgICAgICAgICAgIGlmICggbWF0Y2hGb3VuZCApIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zQ291bnQ7IGluZGV4ICs9IDEgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBjYWxlbmRhci5pc0RhdGVFeGFjdCggZGlzYWJsZWRJdGVtc1tpbmRleF0sIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zW2luZGV4XSA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluIHRoZSBldmVudCB0aGF0IHdl4oCZcmUgZGVhbGluZyB3aXRoIGFuIGV4YWN0IHJhbmdlIG9mIGRhdGVzLFxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXJlIGFyZSBubyDigJxpbnZlcnRlZOKAnSBkYXRlcyBiZWNhdXNlIG9mIGl0LlxuICAgICAgICAgICAgaWYgKCBpc0V4YWN0UmFuZ2UgKSBmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgZGlzYWJsZWRJdGVtc0NvdW50OyBpbmRleCArPSAxICkge1xuICAgICAgICAgICAgICAgIGlmICggY2FsZW5kYXIuaXNEYXRlT3ZlcmxhcCggZGlzYWJsZWRJdGVtc1tpbmRleF0sIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zW2luZGV4XSA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHNvbWV0aGluZyBpcyBzdGlsbCBtYXRjaGVkLCBhZGQgaXQgaW50byB0aGUgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIGlmICggbWF0Y2hGb3VuZCApIHtcbiAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zLnB1c2goIG1hdGNoRm91bmQgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgdXBkYXRlZCBjb2xsZWN0aW9uLlxuICAgIHJldHVybiBkaXNhYmxlZEl0ZW1zLmZpbHRlcihmdW5jdGlvbiggdmFsICkgeyByZXR1cm4gdmFsICE9IG51bGwgfSlcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5hY3RpdmF0ZVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgc3RyaW5nIGZvciB0aGUgbm9kZXMgaW4gdGhlIHBpY2tlci5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUubm9kZXMgPSBmdW5jdGlvbiggaXNPcGVuICkge1xuXG4gICAgdmFyXG4gICAgICAgIGNhbGVuZGFyID0gdGhpcyxcbiAgICAgICAgc2V0dGluZ3MgPSBjYWxlbmRhci5zZXR0aW5ncyxcbiAgICAgICAgY2FsZW5kYXJJdGVtID0gY2FsZW5kYXIuaXRlbSxcbiAgICAgICAgbm93T2JqZWN0ID0gY2FsZW5kYXJJdGVtLm5vdyxcbiAgICAgICAgc2VsZWN0ZWRPYmplY3QgPSBjYWxlbmRhckl0ZW0uc2VsZWN0LFxuICAgICAgICBoaWdobGlnaHRlZE9iamVjdCA9IGNhbGVuZGFySXRlbS5oaWdobGlnaHQsXG4gICAgICAgIHZpZXdzZXRPYmplY3QgPSBjYWxlbmRhckl0ZW0udmlldyxcbiAgICAgICAgZGlzYWJsZWRDb2xsZWN0aW9uID0gY2FsZW5kYXJJdGVtLmRpc2FibGUsXG4gICAgICAgIG1pbkxpbWl0T2JqZWN0ID0gY2FsZW5kYXJJdGVtLm1pbixcbiAgICAgICAgbWF4TGltaXRPYmplY3QgPSBjYWxlbmRhckl0ZW0ubWF4LFxuXG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWxlbmRhciB0YWJsZSBoZWFkIHVzaW5nIGEgY29weSBvZiB3ZWVrZGF5IGxhYmVscyBjb2xsZWN0aW9uLlxuICAgICAgICAvLyAqIFdlIGRvIGEgY29weSBzbyB3ZSBkb24ndCBtdXRhdGUgdGhlIG9yaWdpbmFsIGFycmF5LlxuICAgICAgICB0YWJsZUhlYWQgPSAoZnVuY3Rpb24oIGNvbGxlY3Rpb24sIGZ1bGxDb2xsZWN0aW9uICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IHNob3VsZCBiZSBNb25kYXksIG1vdmUgU3VuZGF5IHRvIHRoZSBlbmQuXG4gICAgICAgICAgICBpZiAoIHNldHRpbmdzLmZpcnN0RGF5ICkge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCggY29sbGVjdGlvbi5zaGlmdCgpIClcbiAgICAgICAgICAgICAgICBmdWxsQ29sbGVjdGlvbi5wdXNoKCBmdWxsQ29sbGVjdGlvbi5zaGlmdCgpIClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCByZXR1cm4gdGhlIHRhYmxlIGhlYWQgZ3JvdXAuXG4gICAgICAgICAgICByZXR1cm4gXy5ub2RlKFxuICAgICAgICAgICAgICAgICd0aGVhZCcsXG4gICAgICAgICAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgICAgICAgICAndHInLFxuICAgICAgICAgICAgICAgICAgICBfLmdyb3VwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogREFZU19JTl9XRUVLIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAndGgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogZnVuY3Rpb24oIGNvdW50ZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvblsgY291bnRlciBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy53ZWVrZGF5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Njb3BlPWNvbCB0aXRsZT1cIicgKyBmdWxsQ29sbGVjdGlvblsgY291bnRlciBdICsgJ1wiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIC8vZW5kcmV0dXJuXG5cbiAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcbiAgICAgICAgfSkoICggc2V0dGluZ3Muc2hvd1dlZWtkYXlzRnVsbCA/IHNldHRpbmdzLndlZWtkYXlzRnVsbCA6IHNldHRpbmdzLndlZWtkYXlzTGV0dGVyICkuc2xpY2UoIDAgKSwgc2V0dGluZ3Mud2Vla2RheXNGdWxsLnNsaWNlKCAwICkgKSwgLy90YWJsZUhlYWRcblxuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbmF2IGZvciBuZXh0L3ByZXYgbW9udGguXG4gICAgICAgIGNyZWF0ZU1vbnRoTmF2ID0gZnVuY3Rpb24oIG5leHQgKSB7XG5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgcmV0dXJuIHRoZSBjcmVhdGVkIG1vbnRoIHRhZy5cbiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgJyAnLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzWyAnbmF2JyArICggbmV4dCA/ICdOZXh0JyA6ICdQcmV2JyApIF0gKyAoXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZvY3VzZWQgbW9udGggaXMgb3V0c2lkZSB0aGUgcmFuZ2UsIGRpc2FibGVkIHRoZSBidXR0b24uXG4gICAgICAgICAgICAgICAgICAgICggbmV4dCAmJiB2aWV3c2V0T2JqZWN0LnllYXIgPj0gbWF4TGltaXRPYmplY3QueWVhciAmJiB2aWV3c2V0T2JqZWN0Lm1vbnRoID49IG1heExpbWl0T2JqZWN0Lm1vbnRoICkgfHxcbiAgICAgICAgICAgICAgICAgICAgKCAhbmV4dCAmJiB2aWV3c2V0T2JqZWN0LnllYXIgPD0gbWluTGltaXRPYmplY3QueWVhciAmJiB2aWV3c2V0T2JqZWN0Lm1vbnRoIDw9IG1pbkxpbWl0T2JqZWN0Lm1vbnRoICkgP1xuICAgICAgICAgICAgICAgICAgICAnICcgKyBzZXR0aW5ncy5rbGFzcy5uYXZEaXNhYmxlZCA6ICcnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYXY9JyArICggbmV4dCB8fCAtMSApICsgJyAnICtcbiAgICAgICAgICAgICAgICBfLmFyaWFBdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCArICdfdGFibGUnXG4gICAgICAgICAgICAgICAgfSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICd0aXRsZT1cIicgKyAobmV4dCA/IHNldHRpbmdzLmxhYmVsTW9udGhOZXh0IDogc2V0dGluZ3MubGFiZWxNb250aFByZXYgKSArICdcIidcbiAgICAgICAgICAgICkgLy9lbmRyZXR1cm5cbiAgICAgICAgfSwgLy9jcmVhdGVNb250aE5hdlxuXG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtb250aCBsYWJlbC5cbiAgICAgICAgLy9NYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICBjcmVhdGVNb250aExhYmVsID0gZnVuY3Rpb24ob3ZlcnJpZGUpIHtcblxuICAgICAgICAgICAgdmFyIG1vbnRoc0NvbGxlY3Rpb24gPSBzZXR0aW5ncy5zaG93TW9udGhzU2hvcnQgPyBzZXR0aW5ncy5tb250aHNTaG9ydCA6IHNldHRpbmdzLm1vbnRoc0Z1bGxcblxuICAgICAgICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkXG4gICAgICAgICAgICBpZiAob3ZlcnJpZGUgPT0gXCJzaG9ydF9tb250aHNcIikge1xuICAgICAgICAgICAgICBtb250aHNDb2xsZWN0aW9uID0gc2V0dGluZ3MubW9udGhzU2hvcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBtb250aHMgdG8gc2VsZWN0LCBhZGQgYSBkcm9wZG93biBtZW51LlxuICAgICAgICAgICAgaWYgKCBzZXR0aW5ncy5zZWxlY3RNb250aHMgICYmIG92ZXJyaWRlID09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgICAgIF8uZ3JvdXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAxMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAnb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCBsb29wZWRNb250aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGxvb3BlZCBtb250aCBhbmQgbm8gY2xhc3Nlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhzQ29sbGVjdGlvblsgbG9vcGVkTW9udGggXSwgMCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHZhbHVlIGFuZCBzZWxlY3RlZCBpbmRleC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlPScgKyBsb29wZWRNb250aCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggdmlld3NldE9iamVjdC5tb250aCA9PSBsb29wZWRNb250aCA/ICcgc2VsZWN0ZWQnIDogJycgKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIHZpZXdzZXRPYmplY3QueWVhciA9PSBtaW5MaW1pdE9iamVjdC55ZWFyICYmIGxvb3BlZE1vbnRoIDwgbWluTGltaXRPYmplY3QubW9udGggKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggdmlld3NldE9iamVjdC55ZWFyID09IG1heExpbWl0T2JqZWN0LnllYXIgJiYgbG9vcGVkTW9udGggPiBtYXhMaW1pdE9iamVjdC5tb250aCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZGlzYWJsZWQnIDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLnNlbGVjdE1vbnRoICsgJyBicm93c2VyLWRlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICAoIGlzT3BlbiA/ICcnIDogJ2Rpc2FibGVkJyApICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCArICdfdGFibGUnIH0pICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ3RpdGxlPVwiJyArIHNldHRpbmdzLmxhYmVsTW9udGhTZWxlY3QgKyAnXCInXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICAgICAgaWYgKG92ZXJyaWRlID09IFwic2hvcnRfbW9udGhzXCIpXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT2JqZWN0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ2RpdicsIG1vbnRoc0NvbGxlY3Rpb25bIHNlbGVjdGVkT2JqZWN0Lm1vbnRoIF0gKTtcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBfLm5vZGUoICdkaXYnLCBtb250aHNDb2xsZWN0aW9uWyB2aWV3c2V0T2JqZWN0Lm1vbnRoIF0gKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIG5lZWQgZm9yIGEgbW9udGggc2VsZWN0b3JcbiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdkaXYnLCBtb250aHNDb2xsZWN0aW9uWyB2aWV3c2V0T2JqZWN0Lm1vbnRoIF0sIHNldHRpbmdzLmtsYXNzLm1vbnRoIClcbiAgICAgICAgfSwgLy9jcmVhdGVNb250aExhYmVsXG5cblxuICAgICAgICAvLyBDcmVhdGUgdGhlIHllYXIgbGFiZWwuXG4gICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkXG4gICAgICAgIGNyZWF0ZVllYXJMYWJlbCA9IGZ1bmN0aW9uKG92ZXJyaWRlKSB7XG5cbiAgICAgICAgICAgIHZhciBmb2N1c2VkWWVhciA9IHZpZXdzZXRPYmplY3QueWVhcixcblxuICAgICAgICAgICAgLy8gSWYgeWVhcnMgc2VsZWN0b3IgaXMgc2V0IHRvIGEgbGl0ZXJhbCBcInRydWVcIiwgc2V0IGl0IHRvIDUuIE90aGVyd2lzZVxuICAgICAgICAgICAgLy8gZGl2aWRlIGluIGhhbGYgdG8gZ2V0IGhhbGYgYmVmb3JlIGFuZCBoYWxmIGFmdGVyIGZvY3VzZWQgeWVhci5cbiAgICAgICAgICAgIG51bWJlclllYXJzID0gc2V0dGluZ3Muc2VsZWN0WWVhcnMgPT09IHRydWUgPyA1IDogfn4oIHNldHRpbmdzLnNlbGVjdFllYXJzIC8gMiApXG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSB5ZWFycyB0byBzZWxlY3QsIGFkZCBhIGRyb3Bkb3duIG1lbnUuXG4gICAgICAgICAgICBpZiAoIG51bWJlclllYXJzICkge1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG1pblllYXIgPSBtaW5MaW1pdE9iamVjdC55ZWFyLFxuICAgICAgICAgICAgICAgICAgICBtYXhZZWFyID0gbWF4TGltaXRPYmplY3QueWVhcixcbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0WWVhciA9IGZvY3VzZWRZZWFyIC0gbnVtYmVyWWVhcnMsXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RZZWFyID0gZm9jdXNlZFllYXIgKyBudW1iZXJZZWFyc1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1pbiB5ZWFyIGlzIGdyZWF0ZXIgdGhhbiB0aGUgbG93ZXN0IHllYXIsIGluY3JlYXNlIHRoZSBoaWdoZXN0IHllYXJcbiAgICAgICAgICAgICAgICAvLyBieSB0aGUgZGlmZmVyZW5jZSBhbmQgc2V0IHRoZSBsb3dlc3QgeWVhciB0byB0aGUgbWluIHllYXIuXG4gICAgICAgICAgICAgICAgaWYgKCBtaW5ZZWFyID4gbG93ZXN0WWVhciApIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGVzdFllYXIgKz0gbWluWWVhciAtIGxvd2VzdFllYXJcbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0WWVhciA9IG1pblllYXJcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbWF4IHllYXIgaXMgbGVzcyB0aGFuIHRoZSBoaWdoZXN0IHllYXIsIGRlY3JlYXNlIHRoZSBsb3dlc3QgeWVhclxuICAgICAgICAgICAgICAgIC8vIGJ5IHRoZSBsb3dlciBvZiB0aGUgdHdvOiBhdmFpbGFibGUgYW5kIG5lZWRlZCB5ZWFycy4gVGhlbiBzZXQgdGhlXG4gICAgICAgICAgICAgICAgLy8gaGlnaGVzdCB5ZWFyIHRvIHRoZSBtYXggeWVhci5cbiAgICAgICAgICAgICAgICBpZiAoIG1heFllYXIgPCBoaWdoZXN0WWVhciApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYXZhaWxhYmxlWWVhcnMgPSBsb3dlc3RZZWFyIC0gbWluWWVhcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRlZFllYXJzID0gaGlnaGVzdFllYXIgLSBtYXhZZWFyXG5cbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0WWVhciAtPSBhdmFpbGFibGVZZWFycyA+IG5lZWRlZFllYXJzID8gbmVlZGVkWWVhcnMgOiBhdmFpbGFibGVZZWFyc1xuICAgICAgICAgICAgICAgICAgICBoaWdoZXN0WWVhciA9IG1heFllYXJcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIHNldHRpbmdzLnNlbGVjdFllYXJzICAmJiBvdmVycmlkZSA9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgXy5ncm91cCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBsb3dlc3RZZWFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogaGlnaGVzdFllYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAnb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBmdW5jdGlvbiggbG9vcGVkWWVhciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGxvb3BlZCB5ZWFyIGFuZCBubyBjbGFzc2VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcGVkWWVhciwgMCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZSBhbmQgc2VsZWN0ZWQgaW5kZXguXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsdWU9JyArIGxvb3BlZFllYXIgKyAoIGZvY3VzZWRZZWFyID09IGxvb3BlZFllYXIgPyAnIHNlbGVjdGVkJyA6ICcnIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3Muc2VsZWN0WWVhciArICcgYnJvd3Nlci1kZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICggaXNPcGVuID8gJycgOiAnZGlzYWJsZWQnICkgKyAnICcgKyBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZScgfSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlPVwiJyArIHNldHRpbmdzLmxhYmVsWWVhclNlbGVjdCArICdcIidcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcbiAgICAgICAgICAgIGlmIChvdmVycmlkZSA9PSBcInJhd1wiKVxuICAgICAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdkaXYnLCBmb2N1c2VkWWVhciApXG5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBqdXN0IHJldHVybiB0aGUgeWVhciBmb2N1c2VkXG4gICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2JywgZm9jdXNlZFllYXIsIHNldHRpbmdzLmtsYXNzLnllYXIgKVxuICAgICAgICB9IC8vY3JlYXRlWWVhckxhYmVsXG5cblxuICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICBjcmVhdGVEYXlMYWJlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE9iamVjdCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2Jywgc2VsZWN0ZWRPYmplY3QuZGF0ZSlcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBfLm5vZGUoICdkaXYnLCBub3dPYmplY3QuZGF0ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgY3JlYXRlV2Vla2RheUxhYmVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZGlzcGxheV9kYXk7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZE9iamVjdCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIGRpc3BsYXlfZGF5ID0gc2VsZWN0ZWRPYmplY3QuZGF5O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRpc3BsYXlfZGF5ID0gbm93T2JqZWN0LmRheTtcbiAgICAgICAgICAgIHZhciB3ZWVrZGF5ID0gc2V0dGluZ3Mud2Vla2RheXNGdWxsWyBkaXNwbGF5X2RheSBdXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheVxuICAgICAgICB9XG5cblxuICAgIC8vIENyZWF0ZSBhbmQgcmV0dXJuIHRoZSBlbnRpcmUgY2FsZW5kYXIuXG5yZXR1cm4gXy5ub2RlKFxuICAgICAgICAvLyBEYXRlIHByZXNlbnRhdGlvbiBWaWV3XG4gICAgICAgICdkaXYnLFxuICAgICAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVdlZWtkYXlMYWJlbCgpLFxuICAgICAgICAgICAgICAgIFwicGlja2VyX193ZWVrZGF5LWRpc3BsYXlcIlxuICAgICAgICAgICAgKStcbiAgICAgICAgICAgIF8ubm9kZShcbiAgICAgICAgICAgICAgICAvLyBEaXYgZm9yIHNob3J0IE1vbnRoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgY3JlYXRlTW9udGhMYWJlbChcInNob3J0X21vbnRoc1wiKSxcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy5tb250aF9kaXNwbGF5XG4gICAgICAgICAgICApK1xuICAgICAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgICAgIC8vIERpdiBmb3IgRGF5XG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgY3JlYXRlRGF5TGFiZWwoKSAsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3MuZGF5X2Rpc3BsYXlcbiAgICAgICAgICAgICkrXG4gICAgICAgICAgICBfLm5vZGUoXG4gICAgICAgICAgICAgICAgLy8gRGl2IGZvciBZZWFyXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgY3JlYXRlWWVhckxhYmVsKFwicmF3XCIpICxcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy55ZWFyX2Rpc3BsYXlcbiAgICAgICAgICAgICksXG4gICAgICAgIHNldHRpbmdzLmtsYXNzLmRhdGVfZGlzcGxheVxuICAgICkrXG4gICAgLy8gQ2FsZW5kYXIgY29udGFpbmVyXG4gICAgXy5ub2RlKCdkaXYnLFxuICAgICAgICBfLm5vZGUoJ2RpdicsXG4gICAgICAgICggc2V0dGluZ3Muc2VsZWN0WWVhcnMgPyAgY3JlYXRlTW9udGhMYWJlbCgpICsgY3JlYXRlWWVhckxhYmVsKCkgOiBjcmVhdGVNb250aExhYmVsKCkgKyBjcmVhdGVZZWFyTGFiZWwoKSApICtcbiAgICAgICAgY3JlYXRlTW9udGhOYXYoKSArIGNyZWF0ZU1vbnRoTmF2KCAxICksXG4gICAgICAgIHNldHRpbmdzLmtsYXNzLmhlYWRlclxuICAgICkgKyBfLm5vZGUoXG4gICAgICAgICd0YWJsZScsXG4gICAgICAgIHRhYmxlSGVhZCArXG4gICAgICAgIF8ubm9kZShcbiAgICAgICAgICAgICd0Ym9keScsXG4gICAgICAgICAgICBfLmdyb3VwKHtcbiAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgbWF4OiBXRUVLU19JTl9DQUxFTkRBUiAtIDEsXG4gICAgICAgICAgICAgICAgaTogMSxcbiAgICAgICAgICAgICAgICBub2RlOiAndHInLFxuICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCByb3dDb3VudGVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IGFuZCB0aGUgbW9udGggc3RhcnRzIG9uIFN1bmRheSwgc2hpZnQgdGhlIGRhdGUgYmFjayBhIHdlZWsuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaGlmdERhdGVCeSA9IHNldHRpbmdzLmZpcnN0RGF5ICYmIGNhbGVuZGFyLmNyZWF0ZShbIHZpZXdzZXRPYmplY3QueWVhciwgdmlld3NldE9iamVjdC5tb250aCwgMSBdKS5kYXkgPT09IDAgPyAtNyA6IDBcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5ncm91cCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBEQVlTX0lOX1dFRUsgKiByb3dDb3VudGVyIC0gdmlld3NldE9iamVjdC5kYXkgKyBzaGlmdERhdGVCeSArIDEsIC8vIEFkZCAxIGZvciB3ZWVrZGF5IDBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1pbiArIERBWVNfSU5fV0VFSyAtIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogJ3RkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBmdW5jdGlvbiggdGFyZ2V0RGF0ZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSB0aW1lIGRhdGUgZnJvbSBhIHJlbGF0aXZlIGRhdGUgdG8gYSB0YXJnZXQgZGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZSA9IGNhbGVuZGFyLmNyZWF0ZShbIHZpZXdzZXRPYmplY3QueWVhciwgdmlld3NldE9iamVjdC5tb250aCwgdGFyZ2V0RGF0ZSArICggc2V0dGluZ3MuZmlyc3REYXkgPyAxIDogMCApIF0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBzZWxlY3RlZE9iamVjdCAmJiBzZWxlY3RlZE9iamVjdC5waWNrID09IHRhcmdldERhdGUucGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGlnaGxpZ2h0ZWQgPSBoaWdobGlnaHRlZE9iamVjdCAmJiBoaWdobGlnaHRlZE9iamVjdC5waWNrID09IHRhcmdldERhdGUucGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQgPSBkaXNhYmxlZENvbGxlY3Rpb24gJiYgY2FsZW5kYXIuZGlzYWJsZWQoIHRhcmdldERhdGUgKSB8fCB0YXJnZXREYXRlLnBpY2sgPCBtaW5MaW1pdE9iamVjdC5waWNrIHx8IHRhcmdldERhdGUucGljayA+IG1heExpbWl0T2JqZWN0LnBpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWREYXRlID0gXy50cmlnZ2VyKCBjYWxlbmRhci5mb3JtYXRzLnRvU3RyaW5nLCBjYWxlbmRhciwgWyBzZXR0aW5ncy5mb3JtYXQsIHRhcmdldERhdGUgXSApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ubm9kZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlLmRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCBrbGFzc2VzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYGluZm9jdXNgIG9yIGBvdXRmb2N1c2AgY2xhc3NlcyBiYXNlZCBvbiBtb250aCBpbiB2aWV3LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHZpZXdzZXRPYmplY3QubW9udGggPT0gdGFyZ2V0RGF0ZS5tb250aCA/IHNldHRpbmdzLmtsYXNzLmluZm9jdXMgOiBzZXR0aW5ncy5rbGFzcy5vdXRmb2N1cyApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgdG9kYXlgIGNsYXNzIGlmIG5lZWRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub3dPYmplY3QucGljayA9PSB0YXJnZXREYXRlLnBpY2sgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHNldHRpbmdzLmtsYXNzLm5vdyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGBzZWxlY3RlZGAgY2xhc3MgaWYgc29tZXRoaW5nJ3Mgc2VsZWN0ZWQgYW5kIHRoZSB0aW1lIG1hdGNoZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNTZWxlY3RlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggc2V0dGluZ3Mua2xhc3Muc2VsZWN0ZWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgaGlnaGxpZ2h0ZWRgIGNsYXNzIGlmIHNvbWV0aGluZydzIGhpZ2hsaWdodGVkIGFuZCB0aGUgdGltZSBtYXRjaGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGlzSGlnaGxpZ2h0ZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHNldHRpbmdzLmtsYXNzLmhpZ2hsaWdodGVkIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYGRpc2FibGVkYCBjbGFzcyBpZiBzb21ldGhpbmcncyBkaXNhYmxlZCBhbmQgdGhlIG9iamVjdCBtYXRjaGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGlzRGlzYWJsZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHNldHRpbmdzLmtsYXNzLmRpc2FibGVkIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrbGFzc2VzLmpvaW4oICcgJyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoWyBzZXR0aW5ncy5rbGFzcy5kYXkgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcGljaz0nICsgdGFyZ2V0RGF0ZS5waWNrICsgJyAnICsgXy5hcmlhQXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICdncmlkY2VsbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmb3JtYXR0ZWREYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCAmJiBjYWxlbmRhci4kbm9kZS52YWwoKSA9PT0gZm9ybWF0dGVkRGF0ZSA/IHRydWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVkZXNjZW5kYW50OiBpc0hpZ2hsaWdodGVkID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkID8gdHJ1ZSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5hcmlhQXR0cih7IHJvbGU6ICdwcmVzZW50YXRpb24nIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gLy9lbmRyZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdIC8vZW5kcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKSxcbiAgICAgICAgc2V0dGluZ3Mua2xhc3MudGFibGUsXG4gICAgICAgICdpZD1cIicgKyBjYWxlbmRhci4kbm9kZVswXS5pZCArICdfdGFibGUnICsgJ1wiICcgKyBfLmFyaWFBdHRyKHtcbiAgICAgICAgICAgIHJvbGU6ICdncmlkJyxcbiAgICAgICAgICAgIGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCxcbiAgICAgICAgICAgIHJlYWRvbmx5OiB0cnVlXG4gICAgICAgIH0pXG4gICAgKVxuICAgICwgc2V0dGluZ3Mua2xhc3MuY2FsZW5kYXJfY29udGFpbmVyKSAvLyBlbmQgY2FsZW5kYXJcblxuICAgICArXG5cbiAgICAvLyAqIEZvciBGaXJlZm94IGZvcm1zIHRvIHN1Ym1pdCwgbWFrZSBzdXJlIHRvIHNldCB0aGUgYnV0dG9uc+KAmSBgdHlwZWAgYXR0cmlidXRlcyBhcyDigJxidXR0b27igJ0uXG4gICAgXy5ub2RlKFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgXy5ub2RlKCAnYnV0dG9uJywgc2V0dGluZ3MudG9kYXksIFwiYnRuLWZsYXQgcGlja2VyX190b2RheVwiLFxuICAgICAgICAgICAgJ3R5cGU9YnV0dG9uIGRhdGEtcGljaz0nICsgbm93T2JqZWN0LnBpY2sgK1xuICAgICAgICAgICAgKCBpc09wZW4gJiYgIWNhbGVuZGFyLmRpc2FibGVkKG5vd09iamVjdCkgPyAnJyA6ICcgZGlzYWJsZWQnICkgKyAnICcgK1xuICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCB9KSApICtcbiAgICAgICAgXy5ub2RlKCAnYnV0dG9uJywgc2V0dGluZ3MuY2xlYXIsIFwiYnRuLWZsYXQgcGlja2VyX19jbGVhclwiLFxuICAgICAgICAgICAgJ3R5cGU9YnV0dG9uIGRhdGEtY2xlYXI9MScgK1xuICAgICAgICAgICAgKCBpc09wZW4gPyAnJyA6ICcgZGlzYWJsZWQnICkgKyAnICcgK1xuICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCB9KSApICtcbiAgICAgICAgXy5ub2RlKCdidXR0b24nLCBzZXR0aW5ncy5jbG9zZSwgXCJidG4tZmxhdCBwaWNrZXJfX2Nsb3NlXCIsXG4gICAgICAgICAgICAndHlwZT1idXR0b24gZGF0YS1jbG9zZT10cnVlICcgK1xuICAgICAgICAgICAgKCBpc09wZW4gPyAnJyA6ICcgZGlzYWJsZWQnICkgKyAnICcgK1xuICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCB9KSApLFxuICAgICAgICBzZXR0aW5ncy5rbGFzcy5mb290ZXJcbiAgICApIC8vZW5kcmV0dXJuXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUubm9kZXNcblxuXG5cblxuLyoqXG4gKiBUaGUgZGF0ZSBwaWNrZXIgZGVmYXVsdHMuXG4gKi9cbkRhdGVQaWNrZXIuZGVmYXVsdHMgPSAoZnVuY3Rpb24oIHByZWZpeCApIHtcblxuICAgIHJldHVybiB7XG5cbiAgICAgICAgLy8gVGhlIHRpdGxlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIG1vbnRoIG5hdiBidXR0b25zXG4gICAgICAgIGxhYmVsTW9udGhOZXh0OiAnTmV4dCBtb250aCcsXG4gICAgICAgIGxhYmVsTW9udGhQcmV2OiAnUHJldmlvdXMgbW9udGgnLFxuXG4gICAgICAgIC8vIFRoZSB0aXRsZSBsYWJlbCB0byB1c2UgZm9yIHRoZSBkcm9wZG93biBzZWxlY3RvcnNcbiAgICAgICAgbGFiZWxNb250aFNlbGVjdDogJ1NlbGVjdCBhIG1vbnRoJyxcbiAgICAgICAgbGFiZWxZZWFyU2VsZWN0OiAnU2VsZWN0IGEgeWVhcicsXG5cbiAgICAgICAgLy8gTW9udGhzIGFuZCB3ZWVrZGF5c1xuICAgICAgICBtb250aHNGdWxsOiBbICdKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJyBdLFxuICAgICAgICBtb250aHNTaG9ydDogWyAnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnIF0sXG4gICAgICAgIHdlZWtkYXlzRnVsbDogWyAnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknIF0sXG4gICAgICAgIHdlZWtkYXlzU2hvcnQ6IFsgJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcgXSxcblxuICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICB3ZWVrZGF5c0xldHRlcjogWyAnUycsICdNJywgJ1QnLCAnVycsICdUJywgJ0YnLCAnUycgXSxcblxuICAgICAgICAvLyBUb2RheSBhbmQgY2xlYXJcbiAgICAgICAgdG9kYXk6ICdUb2RheScsXG4gICAgICAgIGNsZWFyOiAnQ2xlYXInLFxuICAgICAgICBjbG9zZTogJ0Nsb3NlJyxcblxuICAgICAgICAvLyBUaGUgZm9ybWF0IHRvIHNob3cgb24gdGhlIGBpbnB1dGAgZWxlbWVudFxuICAgICAgICBmb3JtYXQ6ICdkIG1tbW0sIHl5eXknLFxuXG4gICAgICAgIC8vIENsYXNzZXNcbiAgICAgICAga2xhc3M6IHtcblxuICAgICAgICAgICAgdGFibGU6IHByZWZpeCArICd0YWJsZScsXG5cbiAgICAgICAgICAgIGhlYWRlcjogcHJlZml4ICsgJ2hlYWRlcicsXG5cblxuICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgQWRkZWQga2xhc3Nlc1xuICAgICAgICAgICAgZGF0ZV9kaXNwbGF5OiBwcmVmaXggKyAnZGF0ZS1kaXNwbGF5JyxcbiAgICAgICAgICAgIGRheV9kaXNwbGF5OiBwcmVmaXggKyAnZGF5LWRpc3BsYXknLFxuICAgICAgICAgICAgbW9udGhfZGlzcGxheTogcHJlZml4ICsgJ21vbnRoLWRpc3BsYXknLFxuICAgICAgICAgICAgeWVhcl9kaXNwbGF5OiBwcmVmaXggKyAneWVhci1kaXNwbGF5JyxcbiAgICAgICAgICAgIGNhbGVuZGFyX2NvbnRhaW5lcjogcHJlZml4ICsgJ2NhbGVuZGFyLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAvLyBlbmRcblxuXG5cbiAgICAgICAgICAgIG5hdlByZXY6IHByZWZpeCArICduYXYtLXByZXYnLFxuICAgICAgICAgICAgbmF2TmV4dDogcHJlZml4ICsgJ25hdi0tbmV4dCcsXG4gICAgICAgICAgICBuYXZEaXNhYmxlZDogcHJlZml4ICsgJ25hdi0tZGlzYWJsZWQnLFxuXG4gICAgICAgICAgICBtb250aDogcHJlZml4ICsgJ21vbnRoJyxcbiAgICAgICAgICAgIHllYXI6IHByZWZpeCArICd5ZWFyJyxcblxuICAgICAgICAgICAgc2VsZWN0TW9udGg6IHByZWZpeCArICdzZWxlY3QtLW1vbnRoJyxcbiAgICAgICAgICAgIHNlbGVjdFllYXI6IHByZWZpeCArICdzZWxlY3QtLXllYXInLFxuXG4gICAgICAgICAgICB3ZWVrZGF5czogcHJlZml4ICsgJ3dlZWtkYXknLFxuXG4gICAgICAgICAgICBkYXk6IHByZWZpeCArICdkYXknLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHByZWZpeCArICdkYXktLWRpc2FibGVkJyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBwcmVmaXggKyAnZGF5LS1zZWxlY3RlZCcsXG4gICAgICAgICAgICBoaWdobGlnaHRlZDogcHJlZml4ICsgJ2RheS0taGlnaGxpZ2h0ZWQnLFxuICAgICAgICAgICAgbm93OiBwcmVmaXggKyAnZGF5LS10b2RheScsXG4gICAgICAgICAgICBpbmZvY3VzOiBwcmVmaXggKyAnZGF5LS1pbmZvY3VzJyxcbiAgICAgICAgICAgIG91dGZvY3VzOiBwcmVmaXggKyAnZGF5LS1vdXRmb2N1cycsXG5cbiAgICAgICAgICAgIGZvb3RlcjogcHJlZml4ICsgJ2Zvb3RlcicsXG5cbiAgICAgICAgICAgIGJ1dHRvbkNsZWFyOiBwcmVmaXggKyAnYnV0dG9uLS1jbGVhcicsXG4gICAgICAgICAgICBidXR0b25Ub2RheTogcHJlZml4ICsgJ2J1dHRvbi0tdG9kYXknLFxuICAgICAgICAgICAgYnV0dG9uQ2xvc2U6IHByZWZpeCArICdidXR0b24tLWNsb3NlJ1xuICAgICAgICB9XG4gICAgfVxufSkoIFBpY2tlci5rbGFzc2VzKCkucGlja2VyICsgJ19fJyApXG5cblxuXG5cblxuLyoqXG4gKiBFeHRlbmQgdGhlIHBpY2tlciB0byBhZGQgdGhlIGRhdGUgcGlja2VyLlxuICovXG5QaWNrZXIuZXh0ZW5kKCAncGlja2FkYXRlJywgRGF0ZVBpY2tlciApXG5cblxufSkpO1xuXG5cbi8qIEpRVUVSWSBFQVNJTkcgMS4zICovXG5cbi8qXG4gKiBqUXVlcnkgRWFzaW5nIHYxLjMgLSBodHRwOi8vZ3NnZC5jby51ay9zYW5kYm94L2pxdWVyeS9lYXNpbmcvXG4gKlxuICogVXNlcyB0aGUgYnVpbHQgaW4gZWFzaW5nIGNhcGFiaWxpdGllcyBhZGRlZCBJbiBqUXVlcnkgMS4xXG4gKiB0byBvZmZlciBtdWx0aXBsZSBlYXNpbmcgb3B0aW9uc1xuICpcbiAqIFRFUk1TIE9GIFVTRSAtIGpRdWVyeSBFYXNpbmdcbiAqXG4gKiBPcGVuIHNvdXJjZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UuXG4gKlxuICogQ29weXJpZ2h0IMKpIDIwMDggR2VvcmdlIE1jR2lubGV5IFNtaXRoXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXG4gKiBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKlxuICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2ZcbiAqIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0XG4gKiBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFsc1xuICogcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICpcbiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGF1dGhvciBub3IgdGhlIG5hbWVzIG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlXG4gKiBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuICpcbiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORCBBTllcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRlxuICogTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiAgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLFxuICogIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURVxuICogIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRFxuICogQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkdcbiAqICBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRFxuICogT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICpcbiAqL1xuXG4vLyB0OiBjdXJyZW50IHRpbWUsIGI6IGJlZ0lubkluZyB2YWx1ZSwgYzogY2hhbmdlIEluIHZhbHVlLCBkOiBkdXJhdGlvblxualF1ZXJ5LmVhc2luZ1snanN3aW5nJ10gPSBqUXVlcnkuZWFzaW5nWydzd2luZyddO1xuXG5qUXVlcnkuZXh0ZW5kKGpRdWVyeS5lYXNpbmcsIHtcbiAgICBkZWY6ICdlYXNlT3V0UXVhZCcsXG4gICAgc3dpbmc6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIC8vYWxlcnQoalF1ZXJ5LmVhc2luZy5kZWZhdWx0KTtcbiAgICAgICAgcmV0dXJuIGpRdWVyeS5lYXNpbmdbalF1ZXJ5LmVhc2luZy5kZWZdKHgsIHQsIGIsIGMsIGQpO1xuICAgIH0sXG4gICAgZWFzZUluUXVhZDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKyBiO1xuICAgIH0sXG4gICAgZWFzZU91dFF1YWQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiAtYyAqICh0IC89IGQpICogKHQgLSAyKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRRdWFkOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkgcmV0dXJuIGMgLyAyICogdCAqIHQgKyBiO1xuICAgICAgICByZXR1cm4gLWMgLyAyICogKCgtLXQpICogKHQgLSAyKSAtIDEpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbkN1YmljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCAqIHQgKyBiO1xuICAgIH0sXG4gICAgZWFzZU91dEN1YmljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICgodCA9IHQgLyBkIC0gMSkgKiB0ICogdCArIDEpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbk91dEN1YmljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkgcmV0dXJuIGMgLyAyICogdCAqIHQgKiB0ICsgYjtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKyAyKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5RdWFydDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKiB0ICogdCArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0UXVhcnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiAtYyAqICgodCA9IHQgLyBkIC0gMSkgKiB0ICogdCAqIHQgLSAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRRdWFydDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKyBiO1xuICAgICAgICByZXR1cm4gLWMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKiB0IC0gMikgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluUXVpbnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICogdCAqIHQgKiB0ICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRRdWludDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKiB0ICogdCArIDEpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbk91dFF1aW50OiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkgcmV0dXJuIGMgLyAyICogdCAqIHQgKiB0ICogdCAqIHQgKyBiO1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogdCAqIHQgKiB0ICsgMikgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluU2luZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jICogTWF0aC5jb3ModCAvIGQgKiAoTWF0aC5QSSAvIDIpKSArIGMgKyBiO1xuICAgIH0sXG4gICAgZWFzZU91dFNpbmU6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogTWF0aC5zaW4odCAvIGQgKiAoTWF0aC5QSSAvIDIpKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRTaW5lOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gLWMgLyAyICogKE1hdGguY29zKE1hdGguUEkgKiB0IC8gZCkgLSAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5FeHBvOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gKHQgPT0gMCkgPyBiIDogYyAqIE1hdGgucG93KDIsIDEwICogKHQgLyBkIC0gMSkpICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRFeHBvOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gKHQgPT0gZCkgPyBiICsgYyA6IGMgKiAoLU1hdGgucG93KDIsIC0xMCAqIHQgLyBkKSArIDEpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbk91dEV4cG86IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICh0ID09IDApIHJldHVybiBiO1xuICAgICAgICBpZiAodCA9PSBkKSByZXR1cm4gYiArIGM7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gYyAvIDIgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpICsgYjtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKC1NYXRoLnBvdygyLCAtMTAgKiAtLXQpICsgMikgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluQ2lyYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jICogKE1hdGguc3FydCgxIC0gKHQgLz0gZCkgKiB0KSAtIDEpICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRDaXJjOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqIE1hdGguc3FydCgxIC0gKHQgPSB0IC8gZCAtIDEpICogdCkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0Q2lyYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiAtYyAvIDIgKiAoTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKSArIGI7XG4gICAgICAgIHJldHVybiBjIC8gMiAqIChNYXRoLnNxcnQoMSAtICh0IC09IDIpICogdCkgKyAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5FbGFzdGljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICAgIHZhciBwID0gMDtcbiAgICAgICAgdmFyIGEgPSBjO1xuICAgICAgICBpZiAodCA9PSAwKSByZXR1cm4gYjtcbiAgICAgICAgaWYgKCh0IC89IGQpID09IDEpIHJldHVybiBiICsgYztcbiAgICAgICAgaWYgKCFwKSBwID0gZCAqIC4zO1xuICAgICAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7XG4gICAgICAgICAgICBhID0gYztcbiAgICAgICAgICAgIHZhciBzID0gcCAvIDQ7XG4gICAgICAgIH0gZWxzZSB2YXIgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcbiAgICAgICAgcmV0dXJuIC0oYSAqIE1hdGgucG93KDIsIDEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRFbGFzdGljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICAgIHZhciBwID0gMDtcbiAgICAgICAgdmFyIGEgPSBjO1xuICAgICAgICBpZiAodCA9PSAwKSByZXR1cm4gYjtcbiAgICAgICAgaWYgKCh0IC89IGQpID09IDEpIHJldHVybiBiICsgYztcbiAgICAgICAgaWYgKCFwKSBwID0gZCAqIC4zO1xuICAgICAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7XG4gICAgICAgICAgICBhID0gYztcbiAgICAgICAgICAgIHZhciBzID0gcCAvIDQ7XG4gICAgICAgIH0gZWxzZSB2YXIgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcbiAgICAgICAgcmV0dXJuIGEgKiBNYXRoLnBvdygyLCAtMTAgKiB0KSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICsgYyArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRFbGFzdGljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICAgIHZhciBwID0gMDtcbiAgICAgICAgdmFyIGEgPSBjO1xuICAgICAgICBpZiAodCA9PSAwKSByZXR1cm4gYjtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA9PSAyKSByZXR1cm4gYiArIGM7XG4gICAgICAgIGlmICghcCkgcCA9IGQgKiAoLjMgKiAxLjUpO1xuICAgICAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7XG4gICAgICAgICAgICBhID0gYztcbiAgICAgICAgICAgIHZhciBzID0gcCAvIDQ7XG4gICAgICAgIH0gZWxzZSB2YXIgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcbiAgICAgICAgaWYgKHQgPCAxKSByZXR1cm4gLS41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XG4gICAgICAgIHJldHVybiBhICogTWF0aC5wb3coMiwgLTEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkgKiAuNSArIGMgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluQmFjazogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQsIHMpIHtcbiAgICAgICAgaWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcbiAgICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKiAoKHMgKyAxKSAqIHQgLSBzKSArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0QmFjazogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQsIHMpIHtcbiAgICAgICAgaWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcbiAgICAgICAgcmV0dXJuIGMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqICgocyArIDEpICogdCArIHMpICsgMSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0QmFjazogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQsIHMpIHtcbiAgICAgICAgaWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqICh0ICogdCAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHQgLSBzKSkgKyBiO1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogKCgocyAqPSAoMS41MjUpKSArIDEpICogdCArIHMpICsgMikgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluQm91bmNlOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAtIGpRdWVyeS5lYXNpbmcuZWFzZU91dEJvdW5jZSh4LCBkIC0gdCwgMCwgYywgZCkgKyBiO1xuICAgIH0sXG4gICAgZWFzZU91dEJvdW5jZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQpIDwgKDEgLyAyLjc1KSkge1xuICAgICAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogdCAqIHQpICsgYjtcbiAgICAgICAgfSBlbHNlIGlmICh0IDwgKDIgLyAyLjc1KSkge1xuICAgICAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gKDEuNSAvIDIuNzUpKSAqIHQgKyAuNzUpICsgYjtcbiAgICAgICAgfSBlbHNlIGlmICh0IDwgKDIuNSAvIDIuNzUpKSB7XG4gICAgICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAoMi4yNSAvIDIuNzUpKSAqIHQgKyAuOTM3NSkgKyBiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gKDIuNjI1IC8gMi43NSkpICogdCArIC45ODQzNzUpICsgYjtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZWFzZUluT3V0Qm91bmNlOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICBpZiAodCA8IGQgLyAyKSByZXR1cm4galF1ZXJ5LmVhc2luZy5lYXNlSW5Cb3VuY2UoeCwgdCAqIDIsIDAsIGMsIGQpICogLjUgKyBiO1xuICAgICAgICByZXR1cm4galF1ZXJ5LmVhc2luZy5lYXNlT3V0Qm91bmNlKHgsIHQgKiAyIC0gZCwgMCwgYywgZCkgKiAuNSArIGMgKiAuNSArIGI7XG4gICAgfVxufSk7XG5cbi8qXG4gKlxuICogVEVSTVMgT0YgVVNFIC0gRUFTSU5HIEVRVUFUSU9OU1xuICpcbiAqIE9wZW4gc291cmNlIHVuZGVyIHRoZSBCU0QgTGljZW5zZS5cbiAqXG4gKiBDb3B5cmlnaHQgwqkgMjAwMSBSb2JlcnQgUGVubmVyXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXG4gKiBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKlxuICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2ZcbiAqIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0XG4gKiBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFsc1xuICogcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICpcbiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGF1dGhvciBub3IgdGhlIG5hbWVzIG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlXG4gKiBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuICpcbiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORCBBTllcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRlxuICogTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiAgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLFxuICogIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURVxuICogIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRFxuICogQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkdcbiAqICBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRFxuICogT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICpcbiAqLy8qIERST1BET1dOICovXG5cbihmdW5jdGlvbiAoJCkge1xuXG4gICAgLy8gQWRkIHBvc2liaWxpdHkgdG8gc2Nyb2xsIHRvIHNlbGVjdGVkIG9wdGlvblxuICAgIC8vIHVzZWZ1bGwgZm9yIHNlbGVjdCBmb3IgZXhhbXBsZVxuICAgICQuZm4uc2Nyb2xsVG8gPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAkKHRoaXMpLnNjcm9sbFRvcCgkKHRoaXMpLnNjcm9sbFRvcCgpIC0gJCh0aGlzKS5vZmZzZXQoKS50b3AgKyAkKGVsZW0pLm9mZnNldCgpLnRvcCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAkLmZuLmRyb3Bkb3duID0gZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBpbkR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICBvdXREdXJhdGlvbjogMjI1LFxuICAgICAgICAgICAgY29uc3RyYWluX3dpZHRoOiB0cnVlLCAvLyBDb25zdHJhaW5zIHdpZHRoIG9mIGRyb3Bkb3duIHRvIHRoZSBhY3RpdmF0b3JcbiAgICAgICAgICAgIGhvdmVyOiBmYWxzZSxcbiAgICAgICAgICAgIGd1dHRlcjogMCwgLy8gU3BhY2luZyBmcm9tIGVkZ2VcbiAgICAgICAgICAgIGJlbG93T3JpZ2luOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb24pO1xuXG4gICAgICAgICAgICAvLyBEcm9wZG93biBtZW51XG4gICAgICAgICAgICB2YXIgYWN0aXZhdGVzID0gJChcIiNcIiArIG9yaWdpbi5hdHRyKCdkYXRhLWFjdGl2YXRlcycpKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlT3B0aW9ucygpIHtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2luZHVyYXRpb24nKSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmluRHVyYXRpb24gPSBvcmlnaW4uZGF0YSgnaW5EdXJhdGlvbicpO1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW4uZGF0YSgnb3V0ZHVyYXRpb24nKSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm91dER1cmF0aW9uID0gb3JpZ2luLmRhdGEoJ291dER1cmF0aW9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdjb25zdHJhaW53aWR0aCcpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29uc3RyYWluX3dpZHRoID0gb3JpZ2luLmRhdGEoJ2NvbnN0cmFpbndpZHRoJyk7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdob3ZlcicpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuaG92ZXIgPSBvcmlnaW4uZGF0YSgnaG92ZXInKTtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2d1dHRlcicpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZ3V0dGVyID0gb3JpZ2luLmRhdGEoJ2d1dHRlcicpO1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW4uZGF0YSgnYmVsb3dvcmlnaW4nKSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmJlbG93T3JpZ2luID0gb3JpZ2luLmRhdGEoJ2JlbG93b3JpZ2luJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVwZGF0ZU9wdGlvbnMoKTtcblxuICAgICAgICAgICAgLy8gQXR0YWNoIGRyb3Bkb3duIHRvIGl0cyBhY3RpdmF0b3JcbiAgICAgICAgICAgIG9yaWdpbi5hZnRlcihhY3RpdmF0ZXMpO1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICBIZWxwZXIgZnVuY3Rpb24gdG8gcG9zaXRpb24gYW5kIHJlc2l6ZSBkcm9wZG93bi5cbiAgICAgICAgICAgICAgVXNlZCBpbiBob3ZlciBhbmQgY2xpY2sgaGFuZGxlci5cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBwbGFjZURyb3Bkb3duKCkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGh0bWwgZGF0YSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgdXBkYXRlT3B0aW9ucygpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0IERyb3Bkb3duIHN0YXRlXG4gICAgICAgICAgICAgICAgYWN0aXZhdGVzLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIC8vIENvbnN0cmFpbiB3aWR0aFxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbnN0cmFpbl93aWR0aCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZXMuY3NzKCd3aWR0aCcsIG9yaWdpbi5vdXRlcldpZHRoKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5iZWxvd09yaWdpbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBvcmlnaW4uaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIGVkZ2UgYWxpZ25tZW50XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldExlZnQgPSBvcmlnaW4ub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGhfZGlmZmVyZW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGd1dHRlcl9zcGFjaW5nID0gb3B0aW9ucy5ndXR0ZXI7XG5cblxuICAgICAgICAgICAgICAgIGlmIChvZmZzZXRMZWZ0ICsgYWN0aXZhdGVzLmlubmVyV2lkdGgoKSA+ICQod2luZG93KS53aWR0aCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoX2RpZmZlcmVuY2UgPSBvcmlnaW4uaW5uZXJXaWR0aCgpIC0gYWN0aXZhdGVzLmlubmVyV2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgZ3V0dGVyX3NwYWNpbmcgPSBndXR0ZXJfc3BhY2luZyAqIC0xO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFBvc2l0aW9uIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgYWN0aXZhdGVzLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IG9yaWdpbi5wb3NpdGlvbigpLnRvcCArIG9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogb3JpZ2luLnBvc2l0aW9uKCkubGVmdCArIHdpZHRoX2RpZmZlcmVuY2UgKyBndXR0ZXJfc3BhY2luZ1xuICAgICAgICAgICAgICAgIH0pO1xuXG5cblxuICAgICAgICAgICAgICAgIC8vIFNob3cgZHJvcGRvd25cbiAgICAgICAgICAgICAgICBhY3RpdmF0ZXMuc3RvcCh0cnVlLCB0cnVlKS5jc3MoJ29wYWNpdHknLCAwKVxuICAgICAgICAgICAgICAgICAgICAuc2xpZGVEb3duKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmluRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmluRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0U2luZSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZGVEcm9wZG93bigpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZXMuZmFkZU91dChvcHRpb25zLm91dER1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIb3ZlclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaG92ZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG9yaWdpbi51bmJpbmQoJ2NsaWNrLicgKyBvcmlnaW4uYXR0cignaWQnKSk7XG4gICAgICAgICAgICAgICAgLy8gSG92ZXIgaGFuZGxlciB0byBzaG93IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgb3JpZ2luLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUpIHsgLy8gTW91c2Ugb3ZlclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgb3JpZ2luLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaG92ZXIgb24gb3JpZ2luIHRoZW4gdG8gc29tZXRoaW5nIG90aGVyIHRoYW4gZHJvcGRvd24gY29udGVudCwgdGhlbiBjbG9zZVxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9FbCA9IGUudG9FbGVtZW50IHx8IGUucmVsYXRlZFRhcmdldDsgLy8gYWRkZWQgYnJvd3NlciBjb21wYXRpYmlsaXR5IGZvciB0YXJnZXQgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICBpZiAoISQodG9FbCkuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5pcyhhY3RpdmF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZXMuc3RvcCh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVEcm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhY3RpdmF0ZXMub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSkgeyAvLyBNb3VzZSBvdXRcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvRWwgPSBlLnRvRWxlbWVudCB8fCBlLnJlbGF0ZWRUYXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJCh0b0VsKS5jbG9zZXN0KCcuZHJvcGRvd24tYnV0dG9uJykuaXMob3JpZ2luKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVzLnN0b3AodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2xpY2tcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAvLyBDbGljayBoYW5kbGVyIHRvIHNob3cgZHJvcGRvd25cbiAgICAgICAgICAgICAgICBvcmlnaW4udW5iaW5kKCdjbGljay4nICsgb3JpZ2luLmF0dHIoJ2lkJykpO1xuICAgICAgICAgICAgICAgIG9yaWdpbi5iaW5kKCdjbGljay4nICsgb3JpZ2luLmF0dHIoJ2lkJyksIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpblswXSA9PSBlLmN1cnJlbnRUYXJnZXQgJiYgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50cyBidXR0b24gY2xpY2sgZnJvbSBtb3Zpbmcgd2luZG93XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZURyb3Bkb3duKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBvcmlnaW4gaXMgY2xpY2tlZCBhbmQgbWVudSBpcyBvcGVuLCBjbG9zZSBtZW51XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbi5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoJ2NsaWNrLicgKyBhY3RpdmF0ZXMuYXR0cignaWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgbWVudSBvcGVuLCBhZGQgY2xpY2sgY2xvc2UgaGFuZGxlciB0byBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZhdGVzLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkuYmluZCgnY2xpY2suJyArIGFjdGl2YXRlcy5hdHRyKCdpZCcpLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWN0aXZhdGVzLmlzKGUudGFyZ2V0KSAmJiAhb3JpZ2luLmlzKGUudGFyZ2V0KSAmJiAoIW9yaWdpbi5maW5kKGUudGFyZ2V0KS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkudW5iaW5kKCdjbGljay4nICsgYWN0aXZhdGVzLmF0dHIoJ2lkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0gLy8gRW5kIGVsc2VcblxuICAgICAgICAgICAgLy8gTGlzdGVuIHRvIG9wZW4gYW5kIGNsb3NlIGV2ZW50IC0gdXNlZnVsIGZvciBzZWxlY3QgY29tcG9uZW50XG4gICAgICAgICAgICBvcmlnaW4ub24oJ29wZW4nLCBwbGFjZURyb3Bkb3duKTtcbiAgICAgICAgICAgIG9yaWdpbi5vbignY2xvc2UnLCBoaWRlRHJvcGRvd24pO1xuXG5cbiAgICAgICAgfSk7XG4gICAgfTsgLy8gRW5kIGRyb3Bkb3duIHBsdWdpblxuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuZHJvcGRvd24tYnV0dG9uJykuZHJvcGRvd24oKTtcbiAgICB9KTtcbn0oalF1ZXJ5KSk7LyogR0xPQkFMICovXG5cbk1hdGVyaWFsaXplID0ge307XG5cbi8vIFVuaXF1ZSBJRFxuTWF0ZXJpYWxpemUuZ3VpZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gczQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxuICAgICAgICAgICAgLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgLnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgK1xuICAgICAgICAgICAgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTtcbiAgICB9O1xufSkoKTtcblxuTWF0ZXJpYWxpemUuZWxlbWVudE9yUGFyZW50SXNGaXhlZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KTtcbiAgICB2YXIgJGNoZWNrRWxlbWVudHMgPSAkZWxlbWVudC5hZGQoJGVsZW1lbnQucGFyZW50cygpKTtcbiAgICB2YXIgaXNGaXhlZCA9IGZhbHNlO1xuICAgICRjaGVja0VsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5jc3MoXCJwb3NpdGlvblwiKSA9PT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICBpc0ZpeGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpc0ZpeGVkO1xufTtcblxuLy8gVmVsb2NpdHkgaGFzIGNvbmZsaWN0cyB3aGVuIGxvYWRlZCB3aXRoIGpRdWVyeSwgdGhpcyB3aWxsIGNoZWNrIGZvciBpdFxudmFyIFZlbDtcbmlmICgkKSB7XG4gICAgVmVsID0gJC5WZWxvY2l0eTtcbn0gZWxzZSB7XG4gICAgVmVsID0gVmVsb2NpdHk7XG59LyogRk9STVMgKi9cblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSBsYWJlbHMgb2YgdGV4dCBmaWVsZHNcbiAgICAgICAgTWF0ZXJpYWxpemUudXBkYXRlVGV4dEZpZWxkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dF9zZWxlY3RvciA9ICdpbnB1dFt0eXBlPXRleHRdLCBpbnB1dFt0eXBlPXBhc3N3b3JkXSwgaW5wdXRbdHlwZT1lbWFpbF0sIGlucHV0W3R5cGU9dXJsXSwgaW5wdXRbdHlwZT10ZWxdLCBpbnB1dFt0eXBlPW51bWJlcl0sIGlucHV0W3R5cGU9c2VhcmNoXSwgdGV4dGFyZWEnO1xuICAgICAgICAgICAgJChpbnB1dF9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoJChlbGVtZW50KS52YWwoKS5sZW5ndGggPiAwIHx8ICQodGhpcykuYXR0cigncGxhY2Vob2xkZXInKSAhPT0gdW5kZWZpbmVkIHx8ICQoZWxlbWVudClbMF0udmFsaWRpdHkuYmFkSW5wdXQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwsIGknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwsIGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVGV4dCBiYXNlZCBpbnB1dHNcbiAgICAgICAgdmFyIGlucHV0X3NlbGVjdG9yID0gJ2lucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCB0ZXh0YXJlYSc7XG5cbiAgICAgICAgLy8gSGFuZGxlIEhUTUw1IGF1dG9mb2N1c1xuICAgICAgICAkKCdpbnB1dFthdXRvZm9jdXNdJykuc2libGluZ3MoJ2xhYmVsLCBpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIC8vIEFkZCBhY3RpdmUgaWYgZm9ybSBhdXRvIGNvbXBsZXRlXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCBpbnB1dF9zZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9PSAwIHx8ICQodGhpcykuYXR0cigncGxhY2Vob2xkZXInKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwsIGknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWxpZGF0ZV9maWVsZCgkKHRoaXMpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGFjdGl2ZSBpZiBpbnB1dCBlbGVtZW50IGhhcyBiZWVuIHByZS1wb3B1bGF0ZWQgb24gZG9jdW1lbnQgcmVhZHlcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgTWF0ZXJpYWxpemUudXBkYXRlVGV4dEZpZWxkcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIVE1MIERPTSBGT1JNIFJFU0VUIGhhbmRsaW5nXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdyZXNldCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZm9ybVJlc2V0ID0gJChlLnRhcmdldCk7XG4gICAgICAgICAgICBpZiAoZm9ybVJlc2V0LmlzKCdmb3JtJykpIHtcbiAgICAgICAgICAgICAgICBmb3JtUmVzZXQuZmluZChpbnB1dF9zZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICBmb3JtUmVzZXQuZmluZChpbnB1dF9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCwgaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgc2VsZWN0XG4gICAgICAgICAgICAgICAgZm9ybVJlc2V0LmZpbmQoJ3NlbGVjdC5pbml0aWFsaXplZCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzZXRfdGV4dCA9IGZvcm1SZXNldC5maW5kKCdvcHRpb25bc2VsZWN0ZWRdJykudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBmb3JtUmVzZXQuc2libGluZ3MoJ2lucHV0LnNlbGVjdC1kcm9wZG93bicpLnZhbChyZXNldF90ZXh0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGFjdGl2ZSB3aGVuIGVsZW1lbnQgaGFzIGZvY3VzXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdmb2N1cycsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCwgaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2JsdXInLCBpbnB1dF9zZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRpbnB1dEVsZW1lbnQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCRpbnB1dEVsZW1lbnQudmFsKCkubGVuZ3RoID09PSAwICYmICRpbnB1dEVsZW1lbnRbMF0udmFsaWRpdHkuYmFkSW5wdXQgIT09IHRydWUgJiYgJGlucHV0RWxlbWVudC5hdHRyKCdwbGFjZWhvbGRlcicpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkaW5wdXRFbGVtZW50LnNpYmxpbmdzKCdsYWJlbCwgaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbGlkYXRlX2ZpZWxkKCRpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YWxpZGF0ZV9maWVsZCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBoYXNMZW5ndGggPSBvYmplY3QuYXR0cignbGVuZ3RoJykgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBsZW5BdHRyID0gcGFyc2VJbnQob2JqZWN0LmF0dHIoJ2xlbmd0aCcpKTtcbiAgICAgICAgICAgIHZhciBsZW4gPSBvYmplY3QudmFsKCkubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAob2JqZWN0LnZhbCgpLmxlbmd0aCA9PT0gMCAmJiBvYmplY3RbMF0udmFsaWRpdHkuYmFkSW5wdXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygndmFsaWRhdGUnKSkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygndmFsaWRhdGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgY2hhcmFjdGVyIGNvdW50ZXIgYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgICAgICBpZiAoKG9iamVjdC5pcygnOnZhbGlkJykgJiYgaGFzTGVuZ3RoICYmIChsZW4gPCBsZW5BdHRyKSkgfHwgKG9iamVjdC5pcygnOnZhbGlkJykgJiYgIWhhc0xlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmFkZENsYXNzKCd2YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCd2YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmFkZENsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgICAvLyBUZXh0YXJlYSBBdXRvIFJlc2l6ZVxuICAgICAgICB2YXIgaGlkZGVuRGl2ID0gJCgnLmhpZGRlbmRpdicpLmZpcnN0KCk7XG4gICAgICAgIGlmICghaGlkZGVuRGl2Lmxlbmd0aCkge1xuICAgICAgICAgICAgaGlkZGVuRGl2ID0gJCgnPGRpdiBjbGFzcz1cImhpZGRlbmRpdiBjb21tb25cIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoaGlkZGVuRGl2KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGV4dF9hcmVhX3NlbGVjdG9yID0gJy5tYXRlcmlhbGl6ZS10ZXh0YXJlYSc7XG5cbiAgICAgICAgZnVuY3Rpb24gdGV4dGFyZWFBdXRvUmVzaXplKCR0ZXh0YXJlYSkge1xuICAgICAgICAgICAgLy8gU2V0IGZvbnQgcHJvcGVydGllcyBvZiBoaWRkZW5EaXZcblxuICAgICAgICAgICAgdmFyIGZvbnRGYW1pbHkgPSAkdGV4dGFyZWEuY3NzKCdmb250LWZhbWlseScpO1xuICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gJHRleHRhcmVhLmNzcygnZm9udC1zaXplJyk7XG5cbiAgICAgICAgICAgIGlmIChmb250U2l6ZSkge1xuICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5jc3MoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb250RmFtaWx5KSB7XG4gICAgICAgICAgICAgICAgaGlkZGVuRGl2LmNzcygnZm9udC1mYW1pbHknLCBmb250RmFtaWx5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCR0ZXh0YXJlYS5hdHRyKCd3cmFwJykgPT09IFwib2ZmXCIpIHtcbiAgICAgICAgICAgICAgICBoaWRkZW5EaXYuY3NzKCdvdmVyZmxvdy13cmFwJywgXCJub3JtYWxcIilcbiAgICAgICAgICAgICAgICAgICAgLmNzcygnd2hpdGUtc3BhY2UnLCBcInByZVwiKTtcbiAgICAgICAgICAgIH1cblxuXG5cblxuICAgICAgICAgICAgaGlkZGVuRGl2LnRleHQoJHRleHRhcmVhLnZhbCgpICsgJ1xcbicpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBoaWRkZW5EaXYuaHRtbCgpLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xuICAgICAgICAgICAgaGlkZGVuRGl2Lmh0bWwoY29udGVudCk7XG5cblxuICAgICAgICAgICAgLy8gV2hlbiB0ZXh0YXJlYSBpcyBoaWRkZW4sIHdpZHRoIGdvZXMgY3JhenkuXG4gICAgICAgICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGhhbGYgb2Ygd2luZG93IHNpemVcblxuICAgICAgICAgICAgaWYgKCR0ZXh0YXJlYS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgJHRleHRhcmVhLndpZHRoKCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoaWRkZW5EaXYuY3NzKCd3aWR0aCcsICQod2luZG93KS53aWR0aCgpIC8gMik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICR0ZXh0YXJlYS5jc3MoJ2hlaWdodCcsIGhpZGRlbkRpdi5oZWlnaHQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICAkKHRleHRfYXJlYV9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRleHRhcmVhID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmICgkdGV4dGFyZWEudmFsKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGV4dGFyZWFBdXRvUmVzaXplKCR0ZXh0YXJlYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ2JvZHknKS5vbigna2V5dXAga2V5ZG93bicsIHRleHRfYXJlYV9zZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGV4dGFyZWFBdXRvUmVzaXplKCQodGhpcykpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIEZpbGUgSW5wdXQgUGF0aFxuICAgICAgICAkKCcuZmlsZS1maWVsZCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhdGhfaW5wdXQgPSAkKHRoaXMpLmZpbmQoJ2lucHV0LmZpbGUtcGF0aCcpO1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcGF0aF9pbnB1dC52YWwoJCh0aGlzKVswXS5maWxlc1swXS5uYW1lKTtcbiAgICAgICAgICAgICAgICBwYXRoX2lucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG5cblxuICAgICAgICAvKioqKioqKioqKioqKioqKlxuICAgICAgICAgKiAgUmFuZ2UgSW5wdXQgICpcbiAgICAgICAgICoqKioqKioqKioqKioqKiovXG5cbiAgICAgICAgdmFyIHJhbmdlX3R5cGUgPSAnaW5wdXRbdHlwZT1yYW5nZV0nO1xuICAgICAgICB2YXIgcmFuZ2VfbW91c2Vkb3duID0gZmFsc2U7XG4gICAgICAgIHZhciBsZWZ0O1xuXG4gICAgICAgICQocmFuZ2VfdHlwZSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGh1bWIgPSAkKCc8c3BhbiBjbGFzcz1cInRodW1iXCI+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPjwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgICAgICAkKHRoaXMpLmFmdGVyKHRodW1iKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHJhbmdlX3dyYXBwZXIgPSAnLnJhbmdlLWZpZWxkJztcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIHJhbmdlX3R5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGh1bWIgPSAkKHRoaXMpLnNpYmxpbmdzKCcudGh1bWInKTtcbiAgICAgICAgICAgIHRodW1iLmZpbmQoJy52YWx1ZScpLmh0bWwoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdpbnB1dCBtb3VzZWRvd24gdG91Y2hzdGFydCcsIHJhbmdlX3R5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGh1bWIgPSAkKHRoaXMpLnNpYmxpbmdzKCcudGh1bWInKTtcblxuICAgICAgICAgICAgLy8gSWYgdGh1bWIgaW5kaWNhdG9yIGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRlIGl0XG4gICAgICAgICAgICBpZiAodGh1bWIubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aHVtYiA9ICQoJzxzcGFuIGNsYXNzPVwidGh1bWJcIj48c3BhbiBjbGFzcz1cInZhbHVlXCI+PC9zcGFuPjwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCh0aHVtYik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldCBpbmRpY2F0b3IgdmFsdWVcbiAgICAgICAgICAgIHRodW1iLmZpbmQoJy52YWx1ZScpLmh0bWwoJCh0aGlzKS52YWwoKSk7XG5cbiAgICAgICAgICAgIHJhbmdlX21vdXNlZG93biA9IHRydWU7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgaWYgKCF0aHVtYi5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICB0aHVtYi52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCIzMHB4XCIsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjMwcHhcIixcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBcIi0yMHB4XCIsXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IFwiLTE1cHhcIlxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEV4cG8nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlLnBhZ2VYID09PSB1bmRlZmluZWQgfHwgZS5wYWdlWCA9PT0gbnVsbCkgeyAvL21vYmlsZVxuICAgICAgICAgICAgICAgIGxlZnQgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIGRlc2t0b3BcbiAgICAgICAgICAgICAgICBsZWZ0ID0gZS5wYWdlWCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICQodGhpcykub3V0ZXJXaWR0aCgpO1xuXG4gICAgICAgICAgICBpZiAobGVmdCA8IDApIHtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGVmdCA+IHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgbGVmdCA9IHdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGh1bWIuYWRkQ2xhc3MoJ2FjdGl2ZScpLmNzcygnbGVmdCcsIGxlZnQpO1xuICAgICAgICAgICAgdGh1bWIuZmluZCgnLnZhbHVlJykuaHRtbCgkKHRoaXMpLnZhbCgpKTtcblxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgcmFuZ2Vfd3JhcHBlciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmFuZ2VfbW91c2Vkb3duID0gZmFsc2U7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCByYW5nZV93cmFwcGVyLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5jaGlsZHJlbignLnRodW1iJyk7XG4gICAgICAgICAgICB2YXIgbGVmdDtcbiAgICAgICAgICAgIGlmIChyYW5nZV9tb3VzZWRvd24pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRodW1iLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHVtYi52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICczMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMzBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICctMjBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAnLTE1cHgnXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0RXhwbydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlLnBhZ2VYID09PSB1bmRlZmluZWQgfHwgZS5wYWdlWCA9PT0gbnVsbCkgeyAvL21vYmlsZVxuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSAkKHRoaXMpLm9mZnNldCgpLmxlZnQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gZGVza3RvcFxuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gZS5wYWdlWCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gJCh0aGlzKS5vdXRlcldpZHRoKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAobGVmdCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0ID4gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHVtYi5hZGRDbGFzcygnYWN0aXZlJykuY3NzKCdsZWZ0JywgbGVmdCk7XG4gICAgICAgICAgICAgICAgdGh1bWIuZmluZCgnLnZhbHVlJykuaHRtbCh0aHVtYi5zaWJsaW5ncyhyYW5nZV90eXBlKS52YWwoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZW91dCB0b3VjaGxlYXZlJywgcmFuZ2Vfd3JhcHBlciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFyYW5nZV9tb3VzZWRvd24pIHtcblxuICAgICAgICAgICAgICAgIHZhciB0aHVtYiA9ICQodGhpcykuY2hpbGRyZW4oJy50aHVtYicpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRodW1iLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHVtYi52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICcxMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICctNnB4J1xuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHVtYi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfSk7IC8vIEVuZCBvZiAkKGRvY3VtZW50KS5yZWFkeVxuXG5cblxuXG4gICAgLy8gU2VsZWN0IFBsdWdpblxuICAgICQuZm4ubWF0ZXJpYWxfc2VsZWN0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICQodGhpcykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2VsZWN0ID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgaWYgKCRzZWxlY3QuaGFzQ2xhc3MoJ2Jyb3dzZXItZGVmYXVsdCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBDb250aW51ZSB0byBuZXh0IChyZXR1cm4gZmFsc2UgYnJlYWtzIG91dCBvZiBlbnRpcmUgbG9vcClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVGVhciBkb3duIHN0cnVjdHVyZSBpZiBTZWxlY3QgbmVlZHMgdG8gYmUgcmVidWlsdFxuICAgICAgICAgICAgdmFyIGxhc3RJRCA9ICRzZWxlY3QuZGF0YSgnc2VsZWN0LWlkJyk7XG4gICAgICAgICAgICBpZiAobGFzdElEKSB7XG4gICAgICAgICAgICAgICAgJHNlbGVjdC5wYXJlbnQoKS5maW5kKCdpJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJHNlbGVjdC5wYXJlbnQoKS5maW5kKCdpbnB1dCcpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgJHNlbGVjdC51bndyYXAoKTtcbiAgICAgICAgICAgICAgICAkKCd1bCNzZWxlY3Qtb3B0aW9ucy0nICsgbGFzdElEKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgZGVzdHJveWluZyB0aGUgc2VsZWN0LCByZW1vdmUgdGhlIHNlbGVsY3QtaWQgYW5kIHJlc2V0IGl0IHRvIGl0J3MgdW5pbml0aWFsaXplZCBzdGF0ZS5cbiAgICAgICAgICAgIGlmIChjYWxsYmFjayA9PT0gJ2Rlc3Ryb3knKSB7XG4gICAgICAgICAgICAgICAgJHNlbGVjdC5kYXRhKCdzZWxlY3QtaWQnLCBudWxsKS5yZW1vdmVDbGFzcygnaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB1bmlxdWVJRCA9IE1hdGVyaWFsaXplLmd1aWQoKTtcbiAgICAgICAgICAgICRzZWxlY3QuZGF0YSgnc2VsZWN0LWlkJywgdW5pcXVlSUQpO1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSAkKCc8ZGl2IGNsYXNzPVwic2VsZWN0LXdyYXBwZXJcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgIHdyYXBwZXIuYWRkQ2xhc3MoJHNlbGVjdC5hdHRyKCdjbGFzcycpKTtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gJCgnPHVsIGlkPVwic2VsZWN0LW9wdGlvbnMtJyArIHVuaXF1ZUlEICsgJ1wiIGNsYXNzPVwiZHJvcGRvd24tY29udGVudCBzZWxlY3QtZHJvcGRvd25cIj48L3VsPicpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdE9wdGlvbnMgPSAkc2VsZWN0LmNoaWxkcmVuKCdvcHRpb24nKTtcblxuICAgICAgICAgICAgdmFyIGxhYmVsO1xuICAgICAgICAgICAgaWYgKCRzZWxlY3QuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxhYmVsID0gJHNlbGVjdC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSBvcHRpb25zLmZpcnN0KCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIERyb3Bkb3duIHN0cnVjdHVyZVxuICAgICAgICAgICAgc2VsZWN0T3B0aW9ucy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgZGlzYWJsZWQgYXR0ciBpZiBkaXNhYmxlZFxuICAgICAgICAgICAgICAgIG9wdGlvbnMuYXBwZW5kKCQoJzxsaSBjbGFzcz1cIicgKyAoKCQodGhpcykuaXMoJzpkaXNhYmxlZCcpKSA/ICdkaXNhYmxlZCcgOiAnJykgKyAnXCI+PHNwYW4+JyArICQodGhpcykuaHRtbCgpICsgJzwvc3Bhbj48L2xpPicpKTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIG9wdGlvbnMuZmluZCgnbGknKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgdmFyICRjdXJyX3NlbGVjdCA9ICRzZWxlY3Q7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBlbGVtZW50IGlzIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJfc2VsZWN0LmZpbmQoJ29wdGlvbicpLmVxKGkpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIG9uY2hhbmdlKCkgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyX3NlbGVjdC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyX3NlbGVjdC5zaWJsaW5ncygnaW5wdXQuc2VsZWN0LWRyb3Bkb3duJykudmFsKCQodGhpcykudGV4dCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICd1bmRlZmluZWQnKSBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBXcmFwIEVsZW1lbnRzXG4gICAgICAgICAgICAkc2VsZWN0LndyYXAod3JhcHBlcik7XG4gICAgICAgICAgICAvLyBBZGQgU2VsZWN0IERpc3BsYXkgRWxlbWVudFxuICAgICAgICAgICAgdmFyIGRyb3Bkb3duSWNvbiA9ICQoJzxzcGFuIGNsYXNzPVwiY2FyZXRcIj4mIzk2NjA7PC9zcGFuPicpO1xuICAgICAgICAgICAgaWYgKCRzZWxlY3QuaXMoJzpkaXNhYmxlZCcpKVxuICAgICAgICAgICAgICAgIGRyb3Bkb3duSWNvbi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgICAgICAgdmFyICRuZXdTZWxlY3QgPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInNlbGVjdC1kcm9wZG93blwiIHJlYWRvbmx5PVwidHJ1ZVwiICcgKyAoKCRzZWxlY3QuaXMoJzpkaXNhYmxlZCcpKSA/ICdkaXNhYmxlZCcgOiAnJykgKyAnIGRhdGEtYWN0aXZhdGVzPVwic2VsZWN0LW9wdGlvbnMtJyArIHVuaXF1ZUlEICsgJ1wiIHZhbHVlPVwiJyArIGxhYmVsLmh0bWwoKSArICdcIi8+Jyk7XG4gICAgICAgICAgICAkc2VsZWN0LmJlZm9yZSgkbmV3U2VsZWN0KTtcbiAgICAgICAgICAgICRuZXdTZWxlY3QuYmVmb3JlKGRyb3Bkb3duSWNvbik7XG5cbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQob3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzZWN0aW9uIGVsZW1lbnQgaXMgZGlzYWJsZWRcbiAgICAgICAgICAgIGlmICghJHNlbGVjdC5pcygnOmRpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICAkbmV3U2VsZWN0LmRyb3Bkb3duKHtcbiAgICAgICAgICAgICAgICAgICAgXCJob3ZlclwiOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb3B5IHRhYmluZGV4XG4gICAgICAgICAgICBpZiAoJHNlbGVjdC5hdHRyKCd0YWJpbmRleCcpKSB7XG4gICAgICAgICAgICAgICAgJCgkbmV3U2VsZWN0WzBdKS5hdHRyKCd0YWJpbmRleCcsICRzZWxlY3QuYXR0cigndGFiaW5kZXgnKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzZWxlY3QuYWRkQ2xhc3MoJ2luaXRpYWxpemVkJyk7XG5cbiAgICAgICAgICAgICRuZXdTZWxlY3Qub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykudHJpZ2dlcignb3BlbicpO1xuICAgICAgICAgICAgICAgIGxhYmVsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGknKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKSA9PT0gbGFiZWwudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU9wdGlvbihvcHRpb25zLCBzZWxlY3RlZE9wdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJG5ld1NlbGVjdC5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2Nsb3NlJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTWFrZSBvcHRpb24gYXMgc2VsZWN0ZWQgYW5kIHNjcm9sbCB0byBzZWxlY3RlZCBwb3NpdGlvblxuICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24gPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgbmV3T3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5maW5kKCdsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJChuZXdPcHRpb24pLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnNjcm9sbFRvKG5ld09wdGlvbik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBBbGxvdyB1c2VyIHRvIHNlYXJjaCBieSB0eXBpbmdcbiAgICAgICAgICAgIC8vIHRoaXMgYXJyYXkgaXMgY2xlYXJlZCBhZnRlciAxIHNlY29uZFxuICAgICAgICAgICAgZmlsdGVyUXVlcnkgPSBbXTtcblxuICAgICAgICAgICAgb25LZXlEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gVEFCIC0gc3dpdGNoIHRvIGFub3RoZXIgaW5wdXRcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT0gOSkge1xuICAgICAgICAgICAgICAgICAgICAkbmV3U2VsZWN0LnRyaWdnZXIoJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBUlJPVyBET1dOIFdIRU4gU0VMRUNUIElTIENMT1NFRCAtIG9wZW4gc2VsZWN0IG9wdGlvbnNcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT0gNDAgJiYgIW9wdGlvbnMuaXMoXCI6dmlzaWJsZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAkbmV3U2VsZWN0LnRyaWdnZXIoJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEVOVEVSIFdIRU4gU0VMRUNUIElTIENMT1NFRCAtIHN1Ym1pdCBmb3JtXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IDEzICYmICFvcHRpb25zLmlzKFwiOnZpc2libGVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBDQVNFIFdIRU4gVVNFUiBUWVBFIExFVFRFUlNcbiAgICAgICAgICAgICAgICBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LndoaWNoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHZhciBub25MZXR0ZXJzID0gWzksIDEzLCAyNywgMzgsIDQwXTtcbiAgICAgICAgICAgICAgICBpZiAobGV0dGVyICYmIChub25MZXR0ZXJzLmluZGV4T2YoZXZlbnQud2hpY2gpID09PSAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUXVlcnkucHVzaChsZXR0ZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyA9IGZpbHRlclF1ZXJ5LmpvaW4oXCJcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3T3B0aW9uID0gb3B0aW9ucy5maW5kKCdsaScpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHN0cmluZykgPT09IDA7XG4gICAgICAgICAgICAgICAgICAgIH0pWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdPcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsIG5ld09wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBFTlRFUiAtIHNlbGVjdCBvcHRpb24gYW5kIGNsb3NlIHdoZW4gc2VsZWN0IG9wdGlvbnMgYXJlIG9wZW5lZFxuICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PSAxMykge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpLmFjdGl2ZTpub3QoLmRpc2FibGVkKScpWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGFjdGl2ZU9wdGlvbikudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignY2xvc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFSUk9XIERPV04gLSBtb3ZlIHRvIG5leHQgbm90IGRpc2FibGVkIG9wdGlvblxuICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PSA0MCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpLmFjdGl2ZScpLm5leHQoJ2xpOm5vdCguZGlzYWJsZWQpJylbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdPcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsIG5ld09wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBFU0MgLSBjbG9zZSBvcHRpb25zXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IDI3KSB7XG4gICAgICAgICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignY2xvc2UnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBUlJPVyBVUCAtIG1vdmUgdG8gcHJldmlvdXMgbm90IGRpc2FibGVkIG9wdGlvblxuICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PSAzOCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpLmFjdGl2ZScpLnByZXYoJ2xpOm5vdCguZGlzYWJsZWQpJylbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdPcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsIG5ld09wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBdXRvbWF0aWNhbHkgY2xlYW4gZmlsdGVyIHF1ZXJ5IHNvIHVzZXIgY2FuIHNlYXJjaCBhZ2FpbiBieSBzdGFydGluZyBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclF1ZXJ5ID0gW107XG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkbmV3U2VsZWN0Lm9uKCdrZXlkb3duJywgb25LZXlEb3duKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufShqUXVlcnkpKTsvKiEgVmVsb2NpdHlKUy5vcmcgKDEuMi4yKS4gKEMpIDIwMTQgSnVsaWFuIFNoYXBpcm8uIE1JVCBAbGljZW5zZTogZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlICovXG4vKiEgVmVsb2NpdHlKUy5vcmcgalF1ZXJ5IFNoaW0gKDEuMC4xKS4gKEMpIDIwMTQgVGhlIGpRdWVyeSBGb3VuZGF0aW9uLiBNSVQgQGxpY2Vuc2U6IGVuLndpa2lwZWRpYS5vcmcvd2lraS9NSVRfTGljZW5zZS4gKi9cbiEgZnVuY3Rpb24gKGUpIHtcbiAgICBmdW5jdGlvbiB0KGUpIHtcbiAgICAgICAgdmFyIHQgPSBlLmxlbmd0aCxcbiAgICAgICAgICAgIHIgPSAkLnR5cGUoZSk7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT09IHIgfHwgJC5pc1dpbmRvdyhlKSA/ICExIDogMSA9PT0gZS5ub2RlVHlwZSAmJiB0ID8gITAgOiBcImFycmF5XCIgPT09IHIgfHwgMCA9PT0gdCB8fCBcIm51bWJlclwiID09IHR5cGVvZiB0ICYmIHQgPiAwICYmIHQgLSAxIGluIGVcbiAgICB9XG4gICAgaWYgKCFlLmpRdWVyeSkge1xuICAgICAgICB2YXIgJCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3ICQuZm4uaW5pdChlLCB0KVxuICAgICAgICB9O1xuICAgICAgICAkLmlzV2luZG93ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9IGUgJiYgZSA9PSBlLndpbmRvd1xuICAgICAgICB9LCAkLnR5cGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IGUgKyBcIlwiIDogXCJvYmplY3RcIiA9PSB0eXBlb2YgZSB8fCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyBhW28uY2FsbChlKV0gfHwgXCJvYmplY3RcIiA6IHR5cGVvZiBlXG4gICAgICAgIH0sICQuaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5XCIgPT09ICQudHlwZShlKVxuICAgICAgICB9LCAkLmlzUGxhaW5PYmplY3QgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQ7XG4gICAgICAgICAgICBpZiAoIWUgfHwgXCJvYmplY3RcIiAhPT0gJC50eXBlKGUpIHx8IGUubm9kZVR5cGUgfHwgJC5pc1dpbmRvdyhlKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZS5jb25zdHJ1Y3RvciAmJiAhbi5jYWxsKGUsIFwiY29uc3RydWN0b3JcIikgJiYgIW4uY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJpc1Byb3RvdHlwZU9mXCIpKSByZXR1cm4gITFcbiAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gITFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodCBpbiBlKTtcbiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgfHwgbi5jYWxsKGUsIHQpXG4gICAgICAgIH0sICQuZWFjaCA9IGZ1bmN0aW9uIChlLCByLCBhKSB7XG4gICAgICAgICAgICB2YXIgbiwgbyA9IDAsXG4gICAgICAgICAgICAgICAgaSA9IGUubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHMgPSB0KGUpO1xuICAgICAgICAgICAgaWYgKGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocylcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IGkgPiBvICYmIChuID0gci5hcHBseShlW29dLCBhKSwgbiAhPT0gITEpOyBvKyspO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZm9yIChvIGluIGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IHIuYXBwbHkoZVtvXSwgYSksIG4gPT09ICExKSBicmVha1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzKVxuICAgICAgICAgICAgICAgIGZvciAoOyBpID4gbyAmJiAobiA9IHIuY2FsbChlW29dLCBvLCBlW29dKSwgbiAhPT0gITEpOyBvKyspO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZvciAobyBpbiBlKVxuICAgICAgICAgICAgICAgICAgICBpZiAobiA9IHIuY2FsbChlW29dLCBvLCBlW29dKSwgbiA9PT0gITEpIGJyZWFrOyByZXR1cm4gZVxuICAgICAgICB9LCAkLmRhdGEgPSBmdW5jdGlvbiAoZSwgdCwgYSkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gYSkge1xuICAgICAgICAgICAgICAgIHZhciBuID0gZVskLmV4cGFuZG9dLFxuICAgICAgICAgICAgICAgICAgICBvID0gbiAmJiByW25dO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiBvO1xuICAgICAgICAgICAgICAgIGlmIChvICYmIHQgaW4gbykgcmV0dXJuIG9bdF1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodm9pZCAwICE9PSB0KSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBlWyQuZXhwYW5kb10gfHwgKGVbJC5leHBhbmRvXSA9ICsrJC51dWlkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcltuXSA9IHJbbl0gfHwge30sIHJbbl1bdF0gPSBhLCBhXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sICQucmVtb3ZlRGF0YSA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB2YXIgYSA9IGVbJC5leHBhbmRvXSxcbiAgICAgICAgICAgICAgICBuID0gYSAmJiByW2FdO1xuICAgICAgICAgICAgbiAmJiAkLmVhY2godCwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgblt0XVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwgJC5leHRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZSwgdCwgciwgYSwgbiwgbywgaSA9IGFyZ3VtZW50c1swXSB8fCB7fSxcbiAgICAgICAgICAgICAgICBzID0gMSxcbiAgICAgICAgICAgICAgICBsID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICB1ID0gITE7XG4gICAgICAgICAgICBmb3IgKFwiYm9vbGVhblwiID09IHR5cGVvZiBpICYmICh1ID0gaSwgaSA9IGFyZ3VtZW50c1tzXSB8fCB7fSwgcysrKSwgXCJvYmplY3RcIiAhPSB0eXBlb2YgaSAmJiBcImZ1bmN0aW9uXCIgIT09ICQudHlwZShpKSAmJiAoaSA9IHt9KSwgcyA9PT0gbCAmJiAoaSA9IHRoaXMsIHMtLSk7IGwgPiBzOyBzKyspXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gKG4gPSBhcmd1bWVudHNbc10pKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGEgaW4gbikgZSA9IGlbYV0sIHIgPSBuW2FdLCBpICE9PSByICYmICh1ICYmIHIgJiYgKCQuaXNQbGFpbk9iamVjdChyKSB8fCAodCA9ICQuaXNBcnJheShyKSkpID8gKHQgPyAodCA9ICExLCBvID0gZSAmJiAkLmlzQXJyYXkoZSkgPyBlIDogW10pIDogbyA9IGUgJiYgJC5pc1BsYWluT2JqZWN0KGUpID8gZSA6IHt9LCBpW2FdID0gJC5leHRlbmQodSwgbywgcikpIDogdm9pZCAwICE9PSByICYmIChpW2FdID0gcikpO1xuICAgICAgICAgICAgcmV0dXJuIGlcbiAgICAgICAgfSwgJC5xdWV1ZSA9IGZ1bmN0aW9uIChlLCByLCBhKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBuKGUsIHIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IHIgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gZSAmJiAodChPYmplY3QoZSkpID8gISBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gK3QubGVuZ3RoLCBhID0gMCwgbiA9IGUubGVuZ3RoOyByID4gYTspIGVbbisrXSA9IHRbYSsrXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIgIT09IHIpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdm9pZCAwICE9PSB0W2FdOykgZVtuKytdID0gdFthKytdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5sZW5ndGggPSBuLCBlXG4gICAgICAgICAgICAgICAgfShhLCBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gW2VdIDogZSkgOiBbXS5wdXNoLmNhbGwoYSwgZSkpLCBhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIHIgPSAociB8fCBcImZ4XCIpICsgXCJxdWV1ZVwiO1xuICAgICAgICAgICAgICAgIHZhciBvID0gJC5kYXRhKGUsIHIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhID8gKCFvIHx8ICQuaXNBcnJheShhKSA/IG8gPSAkLmRhdGEoZSwgciwgbihhKSkgOiBvLnB1c2goYSksIG8pIDogbyB8fCBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCAkLmRlcXVldWUgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgJC5lYWNoKGUubm9kZVR5cGUgPyBbZV0gOiBlLCBmdW5jdGlvbiAoZSwgcikge1xuICAgICAgICAgICAgICAgIHQgPSB0IHx8IFwiZnhcIjtcbiAgICAgICAgICAgICAgICB2YXIgYSA9ICQucXVldWUociwgdCksXG4gICAgICAgICAgICAgICAgICAgIG4gPSBhLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgXCJpbnByb2dyZXNzXCIgPT09IG4gJiYgKG4gPSBhLnNoaWZ0KCkpLCBuICYmIChcImZ4XCIgPT09IHQgJiYgYS51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSwgbi5jYWxsKHIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5kZXF1ZXVlKHIsIHQpXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCAkLmZuID0gJC5wcm90b3R5cGUgPSB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLm5vZGVUeXBlKSByZXR1cm4gdGhpc1swXSA9IGUsIHRoaXM7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGEgRE9NIG5vZGUuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCA/IHRoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0LnRvcCArIChlLnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LnNjcm9sbFRvcCB8fCAwKSAtIChkb2N1bWVudC5jbGllbnRUb3AgfHwgMCksXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHQubGVmdCArIChlLnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LnNjcm9sbExlZnQgfHwgMCkgLSAoZG9jdW1lbnQuY2xpZW50TGVmdCB8fCAwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3NpdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0aGlzLm9mZnNldFBhcmVudCB8fCBkb2N1bWVudDsgZSAmJiBcImh0bWxcIiA9PT0gIWUubm9kZVR5cGUudG9Mb3dlckNhc2UgJiYgXCJzdGF0aWNcIiA9PT0gZS5zdHlsZS5wb3NpdGlvbjspIGUgPSBlLm9mZnNldFBhcmVudDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgfHwgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzWzBdLFxuICAgICAgICAgICAgICAgICAgICBlID0gZS5hcHBseSh0KSxcbiAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgICAgIGEgPSAvXig/OmJvZHl8aHRtbCkkL2kudGVzdChlLm5vZGVOYW1lKSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgICAgICAgICAgfSA6ICQoZSkub2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudG9wIC09IHBhcnNlRmxvYXQodC5zdHlsZS5tYXJnaW5Ub3ApIHx8IDAsIHIubGVmdCAtPSBwYXJzZUZsb2F0KHQuc3R5bGUubWFyZ2luTGVmdCkgfHwgMCwgZS5zdHlsZSAmJiAoYS50b3AgKz0gcGFyc2VGbG9hdChlLnN0eWxlLmJvcmRlclRvcFdpZHRoKSB8fCAwLCBhLmxlZnQgKz0gcGFyc2VGbG9hdChlLnN0eWxlLmJvcmRlckxlZnRXaWR0aCkgfHwgMCksIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiByLnRvcCAtIGEudG9wLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiByLmxlZnQgLSBhLmxlZnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciByID0ge307XG4gICAgICAgICQuZXhwYW5kbyA9IFwidmVsb2NpdHlcIiArIChuZXcgRGF0ZSkuZ2V0VGltZSgpLCAkLnV1aWQgPSAwO1xuICAgICAgICBmb3IgKHZhciBhID0ge30sIG4gPSBhLmhhc093blByb3BlcnR5LCBvID0gYS50b1N0cmluZywgaSA9IFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSwgcyA9IDA7IHMgPCBpLmxlbmd0aDsgcysrKSBhW1wiW29iamVjdCBcIiArIGlbc10gKyBcIl1cIl0gPSBpW3NdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICQuZm4uaW5pdC5wcm90b3R5cGUgPSAkLmZuLCBlLlZlbG9jaXR5ID0ge1xuICAgICAgICAgICAgVXRpbGl0aWVzOiAkXG4gICAgICAgIH1cbiAgICB9XG59KHdpbmRvdyksXG5mdW5jdGlvbiAoZSkge1xuICAgIFwib2JqZWN0XCIgPT0gdHlwZW9mIG1vZHVsZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA/IG1vZHVsZS5leHBvcnRzID0gZSgpIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShlKSA6IGUoKVxufShmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCByLCBhKSB7XG4gICAgICAgIGZ1bmN0aW9uIG4oZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IC0xLCByID0gZSA/IGUubGVuZ3RoIDogMCwgYSA9IFtdOyArK3QgPCByOykge1xuICAgICAgICAgICAgICAgIHZhciBuID0gZVt0XTtcbiAgICAgICAgICAgICAgICBuICYmIGEucHVzaChuKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG8oZSkge1xuICAgICAgICAgICAgcmV0dXJuIGcuaXNXcmFwcGVkKGUpID8gZSA9IFtdLnNsaWNlLmNhbGwoZSkgOiBnLmlzTm9kZShlKSAmJiAoZSA9IFtlXSksIGVcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGkoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSAkLmRhdGEoZSwgXCJ2ZWxvY2l0eVwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsID09PSB0ID8gYSA6IHRcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHMoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodCAqIGUpICogKDEgLyBlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbChlLCByLCBhLCBuKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBvKGUsIHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAtIDMgKiB0ICsgMyAqIGVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaShlLCB0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDMgKiB0IC0gNiAqIGVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcyhlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDMgKiBlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGwoZSwgdCwgcikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoKG8odCwgcikgKiBlICsgaSh0LCByKSkgKiBlICsgcyh0KSkgKiBlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHUoZSwgdCwgcikge1xuICAgICAgICAgICAgICAgIHJldHVybiAzICogbyh0LCByKSAqIGUgKiBlICsgMiAqIGkodCwgcikgKiBlICsgcyh0KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjKHQsIHIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbSA+IG47ICsrbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHUociwgZSwgYSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBvKSByZXR1cm4gcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBsKHIsIGUsIGEpIC0gdDtcbiAgICAgICAgICAgICAgICAgICAgciAtPSBpIC8gb1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwKCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAwOyBiID4gdDsgKyt0KSB3W3RdID0gbCh0ICogeCwgZSwgYSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZih0LCByLCBuKSB7XG4gICAgICAgICAgICAgICAgdmFyIG8sIGksIHMgPSAwO1xuICAgICAgICAgICAgICAgIGRvIGkgPSByICsgKG4gLSByKSAvIDIsIG8gPSBsKGksIGUsIGEpIC0gdCwgbyA+IDAgPyBuID0gaSA6IHIgPSBpOyB3aGlsZSAoTWF0aC5hYnMobykgPiBoICYmICsrcyA8IHYpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGQodCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwLCBuID0gMSwgbyA9IGIgLSAxOyBuICE9IG8gJiYgd1tuXSA8PSB0OyArK24pIHIgKz0geDtcbiAgICAgICAgICAgICAgICAtLW47XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAodCAtIHdbbl0pIC8gKHdbbiArIDFdIC0gd1tuXSksXG4gICAgICAgICAgICAgICAgICAgIHMgPSByICsgaSAqIHgsXG4gICAgICAgICAgICAgICAgICAgIGwgPSB1KHMsIGUsIGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBsID49IHkgPyBjKHQsIHMpIDogMCA9PSBsID8gcyA6IGYodCwgciwgciArIHgpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGcoKSB7XG4gICAgICAgICAgICAgICAgViA9ICEwLCAoZSAhPSByIHx8IGEgIT0gbikgJiYgcCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbSA9IDQsXG4gICAgICAgICAgICAgICAgeSA9IC4wMDEsXG4gICAgICAgICAgICAgICAgaCA9IDFlLTcsXG4gICAgICAgICAgICAgICAgdiA9IDEwLFxuICAgICAgICAgICAgICAgIGIgPSAxMSxcbiAgICAgICAgICAgICAgICB4ID0gMSAvIChiIC0gMSksXG4gICAgICAgICAgICAgICAgUyA9IFwiRmxvYXQzMkFycmF5XCIgaW4gdDtcbiAgICAgICAgICAgIGlmICg0ICE9PSBhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgICAgICBmb3IgKHZhciBQID0gMDsgNCA+IFA7ICsrUClcbiAgICAgICAgICAgICAgICBpZiAoXCJudW1iZXJcIiAhPSB0eXBlb2YgYXJndW1lbnRzW1BdIHx8IGlzTmFOKGFyZ3VtZW50c1tQXSkgfHwgIWlzRmluaXRlKGFyZ3VtZW50c1tQXSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGUgPSBNYXRoLm1pbihlLCAxKSwgYSA9IE1hdGgubWluKGEsIDEpLCBlID0gTWF0aC5tYXgoZSwgMCksIGEgPSBNYXRoLm1heChhLCAwKTtcbiAgICAgICAgICAgIHZhciB3ID0gUyA/IG5ldyBGbG9hdDMyQXJyYXkoYikgOiBuZXcgQXJyYXkoYiksXG4gICAgICAgICAgICAgICAgViA9ICExLFxuICAgICAgICAgICAgICAgIEMgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gViB8fCBnKCksIGUgPT09IHIgJiYgYSA9PT0gbiA/IHQgOiAwID09PSB0ID8gMCA6IDEgPT09IHQgPyAxIDogbChkKHQpLCByLCBuKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBDLmdldENvbnRyb2xQb2ludHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICAgICAgICAgIHg6IGUsXG4gICAgICAgICAgICAgICAgICAgIHk6IHJcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGEsXG4gICAgICAgICAgICAgICAgICAgIHk6IG5cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBUID0gXCJnZW5lcmF0ZUJlemllcihcIiArIFtlLCByLCBhLCBuXSArIFwiKVwiO1xuICAgICAgICAgICAgcmV0dXJuIEMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRcbiAgICAgICAgICAgIH0sIENcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHUoZSwgdCkge1xuICAgICAgICAgICAgdmFyIHIgPSBlO1xuICAgICAgICAgICAgcmV0dXJuIGcuaXNTdHJpbmcoZSkgPyB2LkVhc2luZ3NbZV0gfHwgKHIgPSAhMSkgOiByID0gZy5pc0FycmF5KGUpICYmIDEgPT09IGUubGVuZ3RoID8gcy5hcHBseShudWxsLCBlKSA6IGcuaXNBcnJheShlKSAmJiAyID09PSBlLmxlbmd0aCA/IGIuYXBwbHkobnVsbCwgZS5jb25jYXQoW3RdKSkgOiBnLmlzQXJyYXkoZSkgJiYgNCA9PT0gZS5sZW5ndGggPyBsLmFwcGx5KG51bGwsIGUpIDogITEsIHIgPT09ICExICYmIChyID0gdi5FYXNpbmdzW3YuZGVmYXVsdHMuZWFzaW5nXSA/IHYuZGVmYXVsdHMuZWFzaW5nIDogaCksIHJcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGMoZSkge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgICAgICByID0gdi5TdGF0ZS5jYWxscy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgciA+IDFlNCAmJiAodi5TdGF0ZS5jYWxscyA9IG4odi5TdGF0ZS5jYWxscykpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSAwOyByID4gbzsgbysrKVxuICAgICAgICAgICAgICAgICAgICBpZiAodi5TdGF0ZS5jYWxsc1tvXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB2LlN0YXRlLmNhbGxzW29dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBzWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBzWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBzWzNdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAhIWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBmIHx8IChmID0gdi5TdGF0ZS5jYWxsc1tvXVszXSA9IHQgLSAxNik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB5ID0gTWF0aC5taW4oKHQgLSBmKSAvIHUuZHVyYXRpb24sIDEpLCBoID0gMCwgYiA9IGwubGVuZ3RoOyBiID4gaDsgaCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFMgPSBsW2hdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gUy5lbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpKHcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBWID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1LmRpc3BsYXkgIT09IGEgJiYgbnVsbCAhPT0gdS5kaXNwbGF5ICYmIFwibm9uZVwiICE9PSB1LmRpc3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImZsZXhcIiA9PT0gdS5kaXNwbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEMgPSBbXCItd2Via2l0LWJveFwiLCBcIi1tb3otYm94XCIsIFwiLW1zLWZsZXhib3hcIiwgXCItd2Via2l0LWZsZXhcIl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKEMsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2V0UHJvcGVydHlWYWx1ZSh3LCBcImRpc3BsYXlcIiwgdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5zZXRQcm9wZXJ0eVZhbHVlKHcsIFwiZGlzcGxheVwiLCB1LmRpc3BsYXkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS52aXNpYmlsaXR5ICE9PSBhICYmIFwiaGlkZGVuXCIgIT09IHUudmlzaWJpbGl0eSAmJiB4LnNldFByb3BlcnR5VmFsdWUodywgXCJ2aXNpYmlsaXR5XCIsIHUudmlzaWJpbGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIFQgaW4gUylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImVsZW1lbnRcIiAhPT0gVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0gU1tUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQSwgRiA9IGcuaXNTdHJpbmcoay5lYXNpbmcpID8gdi5FYXNpbmdzW2suZWFzaW5nXSA6IGsuZWFzaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID09PSB5KSBBID0gay5lbmRWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEUgPSBrLmVuZFZhbHVlIC0gay5zdGFydFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQSA9IGsuc3RhcnRWYWx1ZSArIEUgKiBGKHksIHUsIEUpLCAhZCAmJiBBID09PSBrLmN1cnJlbnRWYWx1ZSkgY29udGludWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsuY3VycmVudFZhbHVlID0gQSwgXCJ0d2VlblwiID09PSBUKSBtID0gQTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHguSG9va3MucmVnaXN0ZXJlZFtUXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGogPSB4Lkhvb2tzLmdldFJvb3QoVCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSCA9IGkodykucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEggJiYgKGsucm9vdFByb3BlcnR5VmFsdWUgPSBIKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBOID0geC5zZXRQcm9wZXJ0eVZhbHVlKHcsIFQsIGsuY3VycmVudFZhbHVlICsgKDAgPT09IHBhcnNlRmxvYXQoQSkgPyBcIlwiIDogay51bml0VHlwZSksIGsucm9vdFByb3BlcnR5VmFsdWUsIGsuc2Nyb2xsRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguSG9va3MucmVnaXN0ZXJlZFtUXSAmJiAoaSh3KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW2pdID0geC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2pdID8geC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2pdKFwiZXh0cmFjdFwiLCBudWxsLCBOWzFdKSA6IE5bMV0pLCBcInRyYW5zZm9ybVwiID09PSBOWzBdICYmIChWID0gITApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Lm1vYmlsZUhBICYmIGkodykudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2QgPT09IGEgJiYgKGkodykudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2QgPSBcIigwcHgsIDBweCwgMHB4KVwiLCBWID0gITApLCBWICYmIHguZmx1c2hUcmFuc2Zvcm1DYWNoZSh3KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHUuZGlzcGxheSAhPT0gYSAmJiBcIm5vbmVcIiAhPT0gdS5kaXNwbGF5ICYmICh2LlN0YXRlLmNhbGxzW29dWzJdLmRpc3BsYXkgPSAhMSksIHUudmlzaWJpbGl0eSAhPT0gYSAmJiBcImhpZGRlblwiICE9PSB1LnZpc2liaWxpdHkgJiYgKHYuU3RhdGUuY2FsbHNbb11bMl0udmlzaWJpbGl0eSA9ICExKSwgdS5wcm9ncmVzcyAmJiB1LnByb2dyZXNzLmNhbGwoc1sxXSwgc1sxXSwgeSwgTWF0aC5tYXgoMCwgZiArIHUuZHVyYXRpb24gLSB0KSwgZiwgbSksIDEgPT09IHkgJiYgcChvKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2LlN0YXRlLmlzVGlja2luZyAmJiBQKGMpXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwKGUsIHQpIHtcbiAgICAgICAgICAgIGlmICghdi5TdGF0ZS5jYWxsc1tlXSkgcmV0dXJuICExO1xuICAgICAgICAgICAgZm9yICh2YXIgciA9IHYuU3RhdGUuY2FsbHNbZV1bMF0sIG4gPSB2LlN0YXRlLmNhbGxzW2VdWzFdLCBvID0gdi5TdGF0ZS5jYWxsc1tlXVsyXSwgcyA9IHYuU3RhdGUuY2FsbHNbZV1bNF0sIGwgPSAhMSwgdSA9IDAsIGMgPSByLmxlbmd0aDsgYyA+IHU7IHUrKykge1xuICAgICAgICAgICAgICAgIHZhciBwID0gclt1XS5lbGVtZW50O1xuICAgICAgICAgICAgICAgIGlmICh0IHx8IG8ubG9vcCB8fCAoXCJub25lXCIgPT09IG8uZGlzcGxheSAmJiB4LnNldFByb3BlcnR5VmFsdWUocCwgXCJkaXNwbGF5XCIsIG8uZGlzcGxheSksIFwiaGlkZGVuXCIgPT09IG8udmlzaWJpbGl0eSAmJiB4LnNldFByb3BlcnR5VmFsdWUocCwgXCJ2aXNpYmlsaXR5XCIsIG8udmlzaWJpbGl0eSkpLCBvLmxvb3AgIT09ICEwICYmICgkLnF1ZXVlKHApWzFdID09PSBhIHx8ICEvXFwudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZy9pLnRlc3QoJC5xdWV1ZShwKVsxXSkpICYmIGkocCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaShwKS5pc0FuaW1hdGluZyA9ICExLCBpKHApLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGUgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHguTGlzdHMudHJhbnNmb3JtczNELCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAvXnNjYWxlLy50ZXN0KHQpID8gMSA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGkocCkudHJhbnNmb3JtQ2FjaGVbdF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpKHApLnRyYW5zZm9ybUNhY2hlW3RdICE9PSBhICYmIG5ldyBSZWdFeHAoXCJeXFxcXChcIiArIHIgKyBcIlteLl1cIikudGVzdChuKSAmJiAoZiA9ICEwLCBkZWxldGUgaShwKS50cmFuc2Zvcm1DYWNoZVt0XSlcbiAgICAgICAgICAgICAgICAgICAgfSksIG8ubW9iaWxlSEEgJiYgKGYgPSAhMCwgZGVsZXRlIGkocCkudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2QpLCBmICYmIHguZmx1c2hUcmFuc2Zvcm1DYWNoZShwKSwgeC5WYWx1ZXMucmVtb3ZlQ2xhc3MocCwgXCJ2ZWxvY2l0eS1hbmltYXRpbmdcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0ICYmIG8uY29tcGxldGUgJiYgIW8ubG9vcCAmJiB1ID09PSBjIC0gMSkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgby5jb21wbGV0ZS5jYWxsKG4sIG4pXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGRcbiAgICAgICAgICAgICAgICAgICAgfSwgMSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcyAmJiBvLmxvb3AgIT09ICEwICYmIHMobiksIGkocCkgJiYgby5sb29wID09PSAhMCAmJiAhdCAmJiAoJC5lYWNoKGkocCkudHdlZW5zQ29udGFpbmVyLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAvXnJvdGF0ZS8udGVzdChlKSAmJiAzNjAgPT09IHBhcnNlRmxvYXQodC5lbmRWYWx1ZSkgJiYgKHQuZW5kVmFsdWUgPSAwLCB0LnN0YXJ0VmFsdWUgPSAzNjApLCAvXmJhY2tncm91bmRQb3NpdGlvbi8udGVzdChlKSAmJiAxMDAgPT09IHBhcnNlRmxvYXQodC5lbmRWYWx1ZSkgJiYgXCIlXCIgPT09IHQudW5pdFR5cGUgJiYgKHQuZW5kVmFsdWUgPSAwLCB0LnN0YXJ0VmFsdWUgPSAxMDApXG4gICAgICAgICAgICAgICAgfSksIHYocCwgXCJyZXZlcnNlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogITAsXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiBvLmRlbGF5XG4gICAgICAgICAgICAgICAgfSkpLCBvLnF1ZXVlICE9PSAhMSAmJiAkLmRlcXVldWUocCwgby5xdWV1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHYuU3RhdGUuY2FsbHNbZV0gPSAhMTtcbiAgICAgICAgICAgIGZvciAodmFyIGcgPSAwLCBtID0gdi5TdGF0ZS5jYWxscy5sZW5ndGg7IG0gPiBnOyBnKyspXG4gICAgICAgICAgICAgICAgaWYgKHYuU3RhdGUuY2FsbHNbZ10gIT09ICExKSB7XG4gICAgICAgICAgICAgICAgICAgIGwgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBsID09PSAhMSAmJiAodi5TdGF0ZS5pc1RpY2tpbmcgPSAhMSwgZGVsZXRlIHYuU3RhdGUuY2FsbHMsIHYuU3RhdGUuY2FsbHMgPSBbXSlcbiAgICAgICAgfVxuICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoci5kb2N1bWVudE1vZGUpIHJldHVybiByLmRvY3VtZW50TW9kZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gNzsgZSA+IDQ7IGUtLSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQuaW5uZXJIVE1MID0gXCI8IS0tW2lmIElFIFwiICsgZSArIFwiXT48c3Bhbj48L3NwYW4+PCFbZW5kaWZdLS0+XCIsIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzcGFuXCIpLmxlbmd0aCkgcmV0dXJuIHQgPSBudWxsLCBlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhXG4gICAgICAgICAgICB9KCksXG4gICAgICAgICAgICBkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgdC5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAobmV3IERhdGUpLmdldFRpbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gTWF0aC5tYXgoMCwgMTYgLSAociAtIGUpKSwgZSA9IHIgKyBhLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQociArIGEpXG4gICAgICAgICAgICAgICAgICAgIH0sIGEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSgpLFxuICAgICAgICAgICAgZyA9IHtcbiAgICAgICAgICAgICAgICBpc1N0cmluZzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiW29iamVjdCBBcnJheV1cIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc0Z1bmN0aW9uOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzTm9kZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgZS5ub2RlVHlwZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNOb2RlTGlzdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgL15cXFtvYmplY3QgKEhUTUxDb2xsZWN0aW9ufE5vZGVMaXN0fE9iamVjdClcXF0kLy50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSkgJiYgZS5sZW5ndGggIT09IGEgJiYgKDAgPT09IGUubGVuZ3RoIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIGVbMF0gJiYgZVswXS5ub2RlVHlwZSA+IDApXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc1dyYXBwZWQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlICYmIChlLmpxdWVyeSB8fCB0LlplcHRvICYmIHQuWmVwdG8uemVwdG8uaXNaKGUpKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNTVkc6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0LlNWR0VsZW1lbnQgJiYgZSBpbnN0YW5jZW9mIHQuU1ZHRWxlbWVudFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNFbXB0eU9iamVjdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCBpbiBlKSByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAkLCBtID0gITE7XG4gICAgICAgIGlmIChlLmZuICYmIGUuZm4uanF1ZXJ5ID8gKCQgPSBlLCBtID0gITApIDogJCA9IHQuVmVsb2NpdHkuVXRpbGl0aWVzLCA4ID49IGYgJiYgIW0pIHRocm93IG5ldyBFcnJvcihcIlZlbG9jaXR5OiBJRTggYW5kIGJlbG93IHJlcXVpcmUgalF1ZXJ5IHRvIGJlIGxvYWRlZCBiZWZvcmUgVmVsb2NpdHkuXCIpO1xuICAgICAgICBpZiAoNyA+PSBmKSByZXR1cm4gdm9pZChqUXVlcnkuZm4udmVsb2NpdHkgPSBqUXVlcnkuZm4uYW5pbWF0ZSk7XG4gICAgICAgIHZhciB5ID0gNDAwLFxuICAgICAgICAgICAgaCA9IFwic3dpbmdcIixcbiAgICAgICAgICAgIHYgPSB7XG4gICAgICAgICAgICAgICAgU3RhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgaXNNb2JpbGU6IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcbiAgICAgICAgICAgICAgICAgICAgaXNBbmRyb2lkOiAvQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXG4gICAgICAgICAgICAgICAgICAgIGlzR2luZ2VyYnJlYWQ6IC9BbmRyb2lkIDJcXC4zXFwuWzMtN10vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgICAgICAgICAgICAgICAgICBpc0Nocm9tZTogdC5jaHJvbWUsXG4gICAgICAgICAgICAgICAgICAgIGlzRmlyZWZveDogL0ZpcmVmb3gvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgICAgICAgICAgICAgICAgICBwcmVmaXhFbGVtZW50OiByLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICAgICAgICAgIHByZWZpeE1hdGNoZXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxBbmNob3I6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFByb3BlcnR5TGVmdDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUHJvcGVydHlUb3A6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGlzVGlja2luZzogITEsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxzOiBbXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgQ1NTOiB7fSxcbiAgICAgICAgICAgICAgICBVdGlsaXRpZXM6ICQsXG4gICAgICAgICAgICAgICAgUmVkaXJlY3RzOiB7fSxcbiAgICAgICAgICAgICAgICBFYXNpbmdzOiB7fSxcbiAgICAgICAgICAgICAgICBQcm9taXNlOiB0LlByb21pc2UsXG4gICAgICAgICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB5LFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGgsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiBhLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogYSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGEsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGEsXG4gICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IGEsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6ICExLFxuICAgICAgICAgICAgICAgICAgICBkZWxheTogITEsXG4gICAgICAgICAgICAgICAgICAgIG1vYmlsZUhBOiAhMCxcbiAgICAgICAgICAgICAgICAgICAgX2NhY2hlVmFsdWVzOiAhMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5kYXRhKGUsIFwidmVsb2NpdHlcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTVkc6IGcuaXNTVkcoZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogITEsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW5zQ29udGFpbmVyOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWVDYWNoZToge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1DYWNoZToge31cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhvb2s6IG51bGwsXG4gICAgICAgICAgICAgICAgbW9jazogITEsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICBtYWpvcjogMSxcbiAgICAgICAgICAgICAgICAgICAgbWlub3I6IDIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoOiAyXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWJ1ZzogITFcbiAgICAgICAgICAgIH07XG4gICAgICAgIHQucGFnZVlPZmZzZXQgIT09IGEgPyAodi5TdGF0ZS5zY3JvbGxBbmNob3IgPSB0LCB2LlN0YXRlLnNjcm9sbFByb3BlcnR5TGVmdCA9IFwicGFnZVhPZmZzZXRcIiwgdi5TdGF0ZS5zY3JvbGxQcm9wZXJ0eVRvcCA9IFwicGFnZVlPZmZzZXRcIikgOiAodi5TdGF0ZS5zY3JvbGxBbmNob3IgPSByLmRvY3VtZW50RWxlbWVudCB8fCByLmJvZHkucGFyZW50Tm9kZSB8fCByLmJvZHksIHYuU3RhdGUuc2Nyb2xsUHJvcGVydHlMZWZ0ID0gXCJzY3JvbGxMZWZ0XCIsIHYuU3RhdGUuc2Nyb2xsUHJvcGVydHlUb3AgPSBcInNjcm9sbFRvcFwiKTtcbiAgICAgICAgdmFyIGIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBlKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLWUudGVuc2lvbiAqIGUueCAtIGUuZnJpY3Rpb24gKiBlLnZcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdCh0LCByLCBhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHQueCArIGEuZHggKiByLFxuICAgICAgICAgICAgICAgICAgICB2OiB0LnYgKyBhLmR2ICogcixcbiAgICAgICAgICAgICAgICAgICAgdGVuc2lvbjogdC50ZW5zaW9uLFxuICAgICAgICAgICAgICAgICAgICBmcmljdGlvbjogdC5mcmljdGlvblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZHg6IG4udixcbiAgICAgICAgICAgICAgICAgICAgZHY6IGUobilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHIociwgYSkge1xuICAgICAgICAgICAgICAgIHZhciBuID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHg6IHIudixcbiAgICAgICAgICAgICAgICAgICAgICAgIGR2OiBlKHIpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG8gPSB0KHIsIC41ICogYSwgbiksXG4gICAgICAgICAgICAgICAgICAgIGkgPSB0KHIsIC41ICogYSwgbyksXG4gICAgICAgICAgICAgICAgICAgIHMgPSB0KHIsIGEsIGkpLFxuICAgICAgICAgICAgICAgICAgICBsID0gMSAvIDYgKiAobi5keCArIDIgKiAoby5keCArIGkuZHgpICsgcy5keCksXG4gICAgICAgICAgICAgICAgICAgIHUgPSAxIC8gNiAqIChuLmR2ICsgMiAqIChvLmR2ICsgaS5kdikgKyBzLmR2KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gci54ID0gci54ICsgbCAqIGEsIHIudiA9IHIudiArIHUgKiBhLCByXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gYShlLCB0LCBuKSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHY6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW5zaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJpY3Rpb246IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaSA9IFswXSxcbiAgICAgICAgICAgICAgICAgICAgcyA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGwgPSAxZS00LFxuICAgICAgICAgICAgICAgICAgICB1ID0gLjAxNixcbiAgICAgICAgICAgICAgICAgICAgYywgcCwgZjtcbiAgICAgICAgICAgICAgICBmb3IgKGUgPSBwYXJzZUZsb2F0KGUpIHx8IDUwMCwgdCA9IHBhcnNlRmxvYXQodCkgfHwgMjAsIG4gPSBuIHx8IG51bGwsIG8udGVuc2lvbiA9IGUsIG8uZnJpY3Rpb24gPSB0LCBjID0gbnVsbCAhPT0gbiwgYyA/IChzID0gYShlLCB0KSwgcCA9IHMgLyBuICogdSkgOiBwID0gdTs7KVxuICAgICAgICAgICAgICAgICAgICBpZiAoZiA9IHIoZiB8fCBvLCBwKSwgaS5wdXNoKDEgKyBmLngpLCBzICs9IDE2LCAhKE1hdGguYWJzKGYueCkgPiBsICYmIE1hdGguYWJzKGYudikgPiBsKSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGMgPyBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaVtlICogKGkubGVuZ3RoIC0gMSkgfCAwXVxuICAgICAgICAgICAgICAgIH0gOiBzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0oKTtcbiAgICAgICAgdi5FYXNpbmdzID0ge1xuICAgICAgICAgICAgbGluZWFyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3dpbmc6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC41IC0gTWF0aC5jb3MoZSAqIE1hdGguUEkpIC8gMlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNwcmluZzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAtIE1hdGguY29zKDQuNSAqIGUgKiBNYXRoLlBJKSAqIE1hdGguZXhwKDYgKiAtZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgJC5lYWNoKFtbXCJlYXNlXCIsIFsuMjUsIC4xLCAuMjUsIDFdXSwgW1wiZWFzZS1pblwiLCBbLjQyLCAwLCAxLCAxXV0sIFtcImVhc2Utb3V0XCIsIFswLCAwLCAuNTgsIDFdXSwgW1wiZWFzZS1pbi1vdXRcIiwgWy40MiwgMCwgLjU4LCAxXV0sIFtcImVhc2VJblNpbmVcIiwgWy40NywgMCwgLjc0NSwgLjcxNV1dLCBbXCJlYXNlT3V0U2luZVwiLCBbLjM5LCAuNTc1LCAuNTY1LCAxXV0sIFtcImVhc2VJbk91dFNpbmVcIiwgWy40NDUsIC4wNSwgLjU1LCAuOTVdXSwgW1wiZWFzZUluUXVhZFwiLCBbLjU1LCAuMDg1LCAuNjgsIC41M11dLCBbXCJlYXNlT3V0UXVhZFwiLCBbLjI1LCAuNDYsIC40NSwgLjk0XV0sIFtcImVhc2VJbk91dFF1YWRcIiwgWy40NTUsIC4wMywgLjUxNSwgLjk1NV1dLCBbXCJlYXNlSW5DdWJpY1wiLCBbLjU1LCAuMDU1LCAuNjc1LCAuMTldXSwgW1wiZWFzZU91dEN1YmljXCIsIFsuMjE1LCAuNjEsIC4zNTUsIDFdXSwgW1wiZWFzZUluT3V0Q3ViaWNcIiwgWy42NDUsIC4wNDUsIC4zNTUsIDFdXSwgW1wiZWFzZUluUXVhcnRcIiwgWy44OTUsIC4wMywgLjY4NSwgLjIyXV0sIFtcImVhc2VPdXRRdWFydFwiLCBbLjE2NSwgLjg0LCAuNDQsIDFdXSwgW1wiZWFzZUluT3V0UXVhcnRcIiwgWy43NywgMCwgLjE3NSwgMV1dLCBbXCJlYXNlSW5RdWludFwiLCBbLjc1NSwgLjA1LCAuODU1LCAuMDZdXSwgW1wiZWFzZU91dFF1aW50XCIsIFsuMjMsIDEsIC4zMiwgMV1dLCBbXCJlYXNlSW5PdXRRdWludFwiLCBbLjg2LCAwLCAuMDcsIDFdXSwgW1wiZWFzZUluRXhwb1wiLCBbLjk1LCAuMDUsIC43OTUsIC4wMzVdXSwgW1wiZWFzZU91dEV4cG9cIiwgWy4xOSwgMSwgLjIyLCAxXV0sIFtcImVhc2VJbk91dEV4cG9cIiwgWzEsIDAsIDAsIDFdXSwgW1wiZWFzZUluQ2lyY1wiLCBbLjYsIC4wNCwgLjk4LCAuMzM1XV0sIFtcImVhc2VPdXRDaXJjXCIsIFsuMDc1LCAuODIsIC4xNjUsIDFdXSwgW1wiZWFzZUluT3V0Q2lyY1wiLCBbLjc4NSwgLjEzNSwgLjE1LCAuODZdXV0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB2LkVhc2luZ3NbdFswXV0gPSBsLmFwcGx5KG51bGwsIHRbMV0pXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgeCA9IHYuQ1NTID0ge1xuICAgICAgICAgICAgUmVnRXg6IHtcbiAgICAgICAgICAgICAgICBpc0hleDogL14jKFtBLWZcXGRdezN9KXsxLDJ9JC9pLFxuICAgICAgICAgICAgICAgIHZhbHVlVW53cmFwOiAvXltBLXpdK1xcKCguKilcXCkkL2ksXG4gICAgICAgICAgICAgICAgd3JhcHBlZFZhbHVlQWxyZWFkeUV4dHJhY3RlZDogL1swLTkuXSsgWzAtOS5dKyBbMC05Ll0rKCBbMC05Ll0rKT8vLFxuICAgICAgICAgICAgICAgIHZhbHVlU3BsaXQ6IC8oW0Etel0rXFwoLitcXCkpfCgoW0EtejAtOSMtLl0rPykoPz1cXHN8JCkpL2dpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgTGlzdHM6IHtcbiAgICAgICAgICAgICAgICBjb2xvcnM6IFtcImZpbGxcIiwgXCJzdHJva2VcIiwgXCJzdG9wQ29sb3JcIiwgXCJjb2xvclwiLCBcImJhY2tncm91bmRDb2xvclwiLCBcImJvcmRlckNvbG9yXCIsIFwiYm9yZGVyVG9wQ29sb3JcIiwgXCJib3JkZXJSaWdodENvbG9yXCIsIFwiYm9yZGVyQm90dG9tQ29sb3JcIiwgXCJib3JkZXJMZWZ0Q29sb3JcIiwgXCJvdXRsaW5lQ29sb3JcIl0sXG4gICAgICAgICAgICAgICAgdHJhbnNmb3Jtc0Jhc2U6IFtcInRyYW5zbGF0ZVhcIiwgXCJ0cmFuc2xhdGVZXCIsIFwic2NhbGVcIiwgXCJzY2FsZVhcIiwgXCJzY2FsZVlcIiwgXCJza2V3WFwiLCBcInNrZXdZXCIsIFwicm90YXRlWlwiXSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zM0Q6IFtcInRyYW5zZm9ybVBlcnNwZWN0aXZlXCIsIFwidHJhbnNsYXRlWlwiLCBcInNjYWxlWlwiLCBcInJvdGF0ZVhcIiwgXCJyb3RhdGVZXCJdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSG9va3M6IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dFNoYWRvdzogW1wiQ29sb3IgWCBZIEJsdXJcIiwgXCJibGFjayAwcHggMHB4IDBweFwiXSxcbiAgICAgICAgICAgICAgICAgICAgYm94U2hhZG93OiBbXCJDb2xvciBYIFkgQmx1ciBTcHJlYWRcIiwgXCJibGFjayAwcHggMHB4IDBweCAwcHhcIl0sXG4gICAgICAgICAgICAgICAgICAgIGNsaXA6IFtcIlRvcCBSaWdodCBCb3R0b20gTGVmdFwiLCBcIjBweCAwcHggMHB4IDBweFwiXSxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBbXCJYIFlcIiwgXCIwJSAwJVwiXSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiBbXCJYIFkgWlwiLCBcIjUwJSA1MCUgMHB4XCJdLFxuICAgICAgICAgICAgICAgICAgICBwZXJzcGVjdGl2ZU9yaWdpbjogW1wiWCBZXCIsIFwiNTAlIDUwJVwiXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJlZDoge30sXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCB4Lkxpc3RzLmNvbG9ycy5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBcImNvbG9yXCIgPT09IHguTGlzdHMuY29sb3JzW2VdID8gXCIwIDAgMCAxXCIgOiBcIjI1NSAyNTUgMjU1IDFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHguSG9va3MudGVtcGxhdGVzW3guTGlzdHMuY29sb3JzW2VdXSA9IFtcIlJlZCBHcmVlbiBCbHVlIEFscGhhXCIsIHRdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGEsIG47XG4gICAgICAgICAgICAgICAgICAgIGlmIChmKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyIGluIHguSG9va3MudGVtcGxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHguSG9va3MudGVtcGxhdGVzW3JdLCBuID0gYVswXS5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBhWzFdLm1hdGNoKHguUmVnRXgudmFsdWVTcGxpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb2xvclwiID09PSBuWzBdICYmIChuLnB1c2gobi5zaGlmdCgpKSwgby5wdXNoKG8uc2hpZnQoKSksIHguSG9va3MudGVtcGxhdGVzW3JdID0gW24uam9pbihcIiBcIiksIG8uam9pbihcIiBcIildKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHIgaW4geC5Ib29rcy50ZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB4Lkhvb2tzLnRlbXBsYXRlc1tyXSwgbiA9IGFbMF0uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSBpbiBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSByICsgbltlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5Ib29rcy5yZWdpc3RlcmVkW2ldID0gW3IsIHNdXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFJvb3Q6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0geC5Ib29rcy5yZWdpc3RlcmVkW2VdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IHRbMF0gOiBlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjbGVhblJvb3RQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5SZWdFeC52YWx1ZVVud3JhcC50ZXN0KHQpICYmICh0ID0gdC5tYXRjaCh4LlJlZ0V4LnZhbHVlVW53cmFwKVsxXSksIHguVmFsdWVzLmlzQ1NTTnVsbFZhbHVlKHQpICYmICh0ID0geC5Ib29rcy50ZW1wbGF0ZXNbZV1bMV0pLCB0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBleHRyYWN0VmFsdWU6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0geC5Ib29rcy5yZWdpc3RlcmVkW2VdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSByWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSByWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSB4Lkhvb2tzLmNsZWFuUm9vdFByb3BlcnR5VmFsdWUoYSwgdCksIHQudG9TdHJpbmcoKS5tYXRjaCh4LlJlZ0V4LnZhbHVlU3BsaXQpW25dXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGluamVjdFZhbHVlOiBmdW5jdGlvbiAoZSwgdCwgcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHguSG9va3MucmVnaXN0ZXJlZFtlXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gYVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gYVsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLCBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPSB4Lkhvb2tzLmNsZWFuUm9vdFByb3BlcnR5VmFsdWUobiwgciksIGkgPSByLnRvU3RyaW5nKCkubWF0Y2goeC5SZWdFeC52YWx1ZVNwbGl0KSwgaVtvXSA9IHQsIHMgPSBpLmpvaW4oXCIgXCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgTm9ybWFsaXphdGlvbnM6IHtcbiAgICAgICAgICAgICAgICByZWdpc3RlcmVkOiB7XG4gICAgICAgICAgICAgICAgICAgIGNsaXA6IGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2xpcFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3QocikgPyBhID0gciA6IChhID0gci50b1N0cmluZygpLm1hdGNoKHguUmVnRXgudmFsdWVVbndyYXApLCBhID0gYSA/IGFbMV0ucmVwbGFjZSgvLChcXHMrKT8vZywgXCIgXCIpIDogciksIGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5qZWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVjdChcIiArIHIgKyBcIilcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbiAoZSwgdCwgcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2LlN0YXRlLmlzRmlyZWZveCA/IFwiZmlsdGVyXCIgOiBcIi13ZWJraXQtZmlsdGVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gcGFyc2VGbG9hdChyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWEgJiYgMCAhPT0gYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHIudG9TdHJpbmcoKS5tYXRjaCgvYmx1clxcKChbMC05XStbQS16XSspXFwpL2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbiA/IG5bMV0gOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHIpID8gXCJibHVyKFwiICsgciArIFwiKVwiIDogXCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICg4ID49IGYpIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWx0ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSByLnRvU3RyaW5nKCkubWF0Y2goL2FscGhhXFwob3BhY2l0eT0oLiopXFwpL2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID0gYSA/IGFbMV0gLyAxMDAgOiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnN0eWxlLnpvb20gPSAxLCBwYXJzZUZsb2F0KHIpID49IDEgPyBcIlwiIDogXCJhbHBoYShvcGFjaXR5PVwiICsgcGFyc2VJbnQoMTAwICogcGFyc2VGbG9hdChyKSwgMTApICsgXCIpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib3BhY2l0eVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICA5ID49IGYgfHwgdi5TdGF0ZS5pc0dpbmdlcmJyZWFkIHx8ICh4Lkxpc3RzLnRyYW5zZm9ybXNCYXNlID0geC5MaXN0cy50cmFuc2Zvcm1zQmFzZS5jb25jYXQoeC5MaXN0cy50cmFuc2Zvcm1zM0QpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCB4Lkxpc3RzLnRyYW5zZm9ybXNCYXNlLmxlbmd0aDsgZSsrKSAhIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0geC5MaXN0cy50cmFuc2Zvcm1zQmFzZVtlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFt0XSA9IGZ1bmN0aW9uIChlLCByLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNmb3JtXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkocikgPT09IGEgfHwgaShyKS50cmFuc2Zvcm1DYWNoZVt0XSA9PT0gYSA/IC9ec2NhbGUvaS50ZXN0KHQpID8gMSA6IDAgOiBpKHIpLnRyYW5zZm9ybUNhY2hlW3RdLnJlcGxhY2UoL1soKV0vZywgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9ICExO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHQuc3Vic3RyKDAsIHQubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICEvKCV8cHh8ZW18cmVtfHZ3fHZofFxcZCkkL2kudGVzdChuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2NhbFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2NhbGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuU3RhdGUuaXNBbmRyb2lkICYmIGkocikudHJhbnNmb3JtQ2FjaGVbdF0gPT09IGEgJiYgMSA+IG4gJiYgKG4gPSAxKSwgbyA9ICEvKFxcZCkkL2kudGVzdChuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2tld1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICEvKGRlZ3xcXGQpJC9pLnRlc3Qobik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJvdGF0ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICEvKGRlZ3xcXGQpJC9pLnRlc3QobilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyB8fCAoaShyKS50cmFuc2Zvcm1DYWNoZVt0XSA9IFwiKFwiICsgbiArIFwiKVwiKSwgaShyKS50cmFuc2Zvcm1DYWNoZVt0XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHguTGlzdHMuY29sb3JzLmxlbmd0aDsgZSsrKSAhIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0geC5MaXN0cy5jb2xvcnNbZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbdF0gPSBmdW5jdGlvbiAoZSwgciwgbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3QobikpIG8gPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpLCBzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWNrOiBcInJnYigwLCAwLCAwKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsdWU6IFwicmdiKDAsIDAsIDI1NSlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmF5OiBcInJnYigxMjgsIDEyOCwgMTI4KVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyZWVuOiBcInJnYigwLCAxMjgsIDApXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkOiBcInJnYigyNTUsIDAsIDApXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGU6IFwicmdiKDI1NSwgMjU1LCAyNTUpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXltBLXpdKyQvaS50ZXN0KG4pID8gaSA9IHNbbl0gIT09IGEgPyBzW25dIDogcy5ibGFjayA6IHguUmVnRXguaXNIZXgudGVzdChuKSA/IGkgPSBcInJnYihcIiArIHguVmFsdWVzLmhleFRvUmdiKG4pLmpvaW4oXCIgXCIpICsgXCIpXCIgOiAvXnJnYmE/XFwoL2kudGVzdChuKSB8fCAoaSA9IHMuYmxhY2spLCBvID0gKGkgfHwgbikudG9TdHJpbmcoKS5tYXRjaCh4LlJlZ0V4LnZhbHVlVW53cmFwKVsxXS5yZXBsYWNlKC8sKFxccyspPy9nLCBcIiBcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gOCA+PSBmIHx8IDMgIT09IG8uc3BsaXQoXCIgXCIpLmxlbmd0aCB8fCAobyArPSBcIiAxXCIpLCBvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDggPj0gZiA/IDQgPT09IG4uc3BsaXQoXCIgXCIpLmxlbmd0aCAmJiAobiA9IG4uc3BsaXQoL1xccysvKS5zbGljZSgwLCAzKS5qb2luKFwiIFwiKSkgOiAzID09PSBuLnNwbGl0KFwiIFwiKS5sZW5ndGggJiYgKG4gKz0gXCIgMVwiKSwgKDggPj0gZiA/IFwicmdiXCIgOiBcInJnYmFcIikgKyBcIihcIiArIG4ucmVwbGFjZSgvXFxzKy9nLCBcIixcIikucmVwbGFjZSgvXFwuKFxcZCkrKD89LCkvZywgXCJcIikgKyBcIilcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIE5hbWVzOiB7XG4gICAgICAgICAgICAgICAgY2FtZWxDYXNlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5yZXBsYWNlKC8tKFxcdykvZywgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFNWR0F0dHJpYnV0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBcIndpZHRofGhlaWdodHx4fHl8Y3h8Y3l8cnxyeHxyeXx4MXx4Mnx5MXx5MlwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGYgfHwgdi5TdGF0ZS5pc0FuZHJvaWQgJiYgIXYuU3RhdGUuaXNDaHJvbWUpICYmICh0ICs9IFwifHRyYW5zZm9ybVwiKSwgbmV3IFJlZ0V4cChcIl4oXCIgKyB0ICsgXCIpJFwiLCBcImlcIikudGVzdChlKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJlZml4Q2hlY2s6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2LlN0YXRlLnByZWZpeE1hdGNoZXNbZV0pIHJldHVybiBbdi5TdGF0ZS5wcmVmaXhNYXRjaGVzW2VdLCAhMF07XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSBbXCJcIiwgXCJXZWJraXRcIiwgXCJNb3pcIiwgXCJtc1wiLCBcIk9cIl0sIHIgPSAwLCBhID0gdC5sZW5ndGg7IGEgPiByOyByKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSAwID09PSByID8gZSA6IHRbcl0gKyBlLnJlcGxhY2UoL15cXHcvLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGcuaXNTdHJpbmcodi5TdGF0ZS5wcmVmaXhFbGVtZW50LnN0eWxlW25dKSkgcmV0dXJuIHYuU3RhdGUucHJlZml4TWF0Y2hlc1tlXSA9IG4sIFtuLCAhMF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2UsICExXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBWYWx1ZXM6IHtcbiAgICAgICAgICAgICAgICBoZXhUb1JnYjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAvXiM/KFthLWZcXGRdKShbYS1mXFxkXSkoW2EtZlxcZF0pJC9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgciA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICBhO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9IGUucmVwbGFjZSh0LCBmdW5jdGlvbiAoZSwgdCwgciwgYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgKyB0ICsgciArIHIgKyBhICsgYVxuICAgICAgICAgICAgICAgICAgICB9KSwgYSA9IHIuZXhlYyhlKSwgYSA/IFtwYXJzZUludChhWzFdLCAxNiksIHBhcnNlSW50KGFbMl0sIDE2KSwgcGFyc2VJbnQoYVszXSwgMTYpXSA6IFswLCAwLCAwXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNDU1NOdWxsVmFsdWU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgfHwgL14obm9uZXxhdXRvfHRyYW5zcGFyZW50fChyZ2JhXFwoMCwgPzAsID8wLCA/MFxcKSkpJC9pLnRlc3QoZSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFVuaXRUeXBlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gL14ocm90YXRlfHNrZXcpL2kudGVzdChlKSA/IFwiZGVnXCIgOiAvKF4oc2NhbGV8c2NhbGVYfHNjYWxlWXxzY2FsZVp8YWxwaGF8ZmxleEdyb3d8ZmxleEhlaWdodHx6SW5kZXh8Zm9udFdlaWdodCkkKXwoKG9wYWNpdHl8cmVkfGdyZWVufGJsdWV8YWxwaGEpJCkvaS50ZXN0KGUpID8gXCJcIiA6IFwicHhcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0RGlzcGxheVR5cGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZSAmJiBlLnRhZ05hbWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gL14oYnxiaWd8aXxzbWFsbHx0dHxhYmJyfGFjcm9ueW18Y2l0ZXxjb2RlfGRmbnxlbXxrYmR8c3Ryb25nfHNhbXB8dmFyfGF8YmRvfGJyfGltZ3xtYXB8b2JqZWN0fHF8c2NyaXB0fHNwYW58c3VifHN1cHxidXR0b258aW5wdXR8bGFiZWx8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KHQpID8gXCJpbmxpbmVcIiA6IC9eKGxpKSQvaS50ZXN0KHQpID8gXCJsaXN0LWl0ZW1cIiA6IC9eKHRyKSQvaS50ZXN0KHQpID8gXCJ0YWJsZS1yb3dcIiA6IC9eKHRhYmxlKSQvaS50ZXN0KHQpID8gXCJ0YWJsZVwiIDogL14odGJvZHkpJC9pLnRlc3QodCkgPyBcInRhYmxlLXJvdy1ncm91cFwiIDogXCJibG9ja1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhZGRDbGFzczogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5jbGFzc0xpc3QgPyBlLmNsYXNzTGlzdC5hZGQodCkgOiBlLmNsYXNzTmFtZSArPSAoZS5jbGFzc05hbWUubGVuZ3RoID8gXCIgXCIgOiBcIlwiKSArIHRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICBlLmNsYXNzTGlzdCA/IGUuY2xhc3NMaXN0LnJlbW92ZSh0KSA6IGUuY2xhc3NOYW1lID0gZS5jbGFzc05hbWUudG9TdHJpbmcoKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIHQuc3BsaXQoXCIgXCIpLmpvaW4oXCJ8XCIpICsgXCIoXFxcXHN8JClcIiwgXCJnaVwiKSwgXCIgXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFByb3BlcnR5VmFsdWU6IGZ1bmN0aW9uIChlLCByLCBuLCBvKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcyhlLCByKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1ICYmIHguc2V0UHJvcGVydHlWYWx1ZShlLCBcImRpc3BsYXlcIiwgXCJub25lXCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoOCA+PSBmKSBsID0gJC5jc3MoZSwgcik7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXih3aWR0aHxoZWlnaHQpJC8udGVzdChyKSAmJiAwID09PSB4LmdldFByb3BlcnR5VmFsdWUoZSwgXCJkaXNwbGF5XCIpICYmICh1ID0gITAsIHguc2V0UHJvcGVydHlWYWx1ZShlLCBcImRpc3BsYXlcIiwgeC5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZSkpKSwgIW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJoZWlnaHRcIiA9PT0gciAmJiBcImJvcmRlci1ib3hcIiAhPT0geC5nZXRQcm9wZXJ0eVZhbHVlKGUsIFwiYm94U2l6aW5nXCIpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGUub2Zmc2V0SGVpZ2h0IC0gKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsIFwiYm9yZGVyVG9wV2lkdGhcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsIFwiYm9yZGVyQm90dG9tV2lkdGhcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsIFwicGFkZGluZ1RvcFwiKSkgfHwgMCkgLSAocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoZSwgXCJwYWRkaW5nQm90dG9tXCIpKSB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4oKSwgY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJ3aWR0aFwiID09PSByICYmIFwiYm9yZGVyLWJveFwiICE9PSB4LmdldFByb3BlcnR5VmFsdWUoZSwgXCJib3hTaXppbmdcIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gZS5vZmZzZXRXaWR0aCAtIChwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLCBcImJvcmRlckxlZnRXaWR0aFwiKSkgfHwgMCkgLSAocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoZSwgXCJib3JkZXJSaWdodFdpZHRoXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLCBcInBhZGRpbmdMZWZ0XCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLCBcInBhZGRpbmdSaWdodFwiKSkgfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuKCksIHBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBpKGUpID09PSBhID8gdC5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpIDogaShlKS5jb21wdXRlZFN0eWxlID8gaShlKS5jb21wdXRlZFN0eWxlIDogaShlKS5jb21wdXRlZFN0eWxlID0gdC5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpLCBcImJvcmRlckNvbG9yXCIgPT09IHIgJiYgKHIgPSBcImJvcmRlclRvcENvbG9yXCIpLCBsID0gOSA9PT0gZiAmJiBcImZpbHRlclwiID09PSByID8gZC5nZXRQcm9wZXJ0eVZhbHVlKHIpIDogZFtyXSwgKFwiXCIgPT09IGwgfHwgbnVsbCA9PT0gbCkgJiYgKGwgPSBlLnN0eWxlW3JdKSwgbigpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiYXV0b1wiID09PSBsICYmIC9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkL2kudGVzdChyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBzKGUsIFwicG9zaXRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAoXCJmaXhlZFwiID09PSBnIHx8IFwiYWJzb2x1dGVcIiA9PT0gZyAmJiAvdG9wfGxlZnQvaS50ZXN0KHIpKSAmJiAobCA9ICQoZSkucG9zaXRpb24oKVtyXSArIFwicHhcIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbDtcbiAgICAgICAgICAgICAgICBpZiAoeC5Ib29rcy5yZWdpc3RlcmVkW3JdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1ID0gcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB4Lkhvb2tzLmdldFJvb3QodSk7XG4gICAgICAgICAgICAgICAgICAgIG4gPT09IGEgJiYgKG4gPSB4LmdldFByb3BlcnR5VmFsdWUoZSwgeC5OYW1lcy5wcmVmaXhDaGVjayhjKVswXSkpLCB4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10gJiYgKG4gPSB4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10oXCJleHRyYWN0XCIsIGUsIG4pKSwgbCA9IHguSG9va3MuZXh0cmFjdFZhbHVlKHUsIG4pXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAsIGQ7XG4gICAgICAgICAgICAgICAgICAgIHAgPSB4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oXCJuYW1lXCIsIGUpLCBcInRyYW5zZm9ybVwiICE9PSBwICYmIChkID0gcyhlLCB4Lk5hbWVzLnByZWZpeENoZWNrKHApWzBdKSwgeC5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUoZCkgJiYgeC5Ib29rcy50ZW1wbGF0ZXNbcl0gJiYgKGQgPSB4Lkhvb2tzLnRlbXBsYXRlc1tyXVsxXSkpLCBsID0geC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwiZXh0cmFjdFwiLCBlLCBkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIS9eW1xcZC1dLy50ZXN0KGwpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoaShlKSAmJiBpKGUpLmlzU1ZHICYmIHguTmFtZXMuU1ZHQXR0cmlidXRlKHIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eKGhlaWdodHx3aWR0aCkkL2kudGVzdChyKSkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZS5nZXRCQm94KClbcl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGwgPSBlLmdldEF0dHJpYnV0ZShyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgbCA9IHMoZSwgeC5OYW1lcy5wcmVmaXhDaGVjayhyKVswXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHguVmFsdWVzLmlzQ1NTTnVsbFZhbHVlKGwpICYmIChsID0gMCksIHYuZGVidWcgPj0gMiAmJiBjb25zb2xlLmxvZyhcIkdldCBcIiArIHIgKyBcIjogXCIgKyBsKSwgbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFByb3BlcnR5VmFsdWU6IGZ1bmN0aW9uIChlLCByLCBhLCBuLCBvKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSByO1xuICAgICAgICAgICAgICAgIGlmIChcInNjcm9sbFwiID09PSByKSBvLmNvbnRhaW5lciA/IG8uY29udGFpbmVyW1wic2Nyb2xsXCIgKyBvLmRpcmVjdGlvbl0gPSBhIDogXCJMZWZ0XCIgPT09IG8uZGlyZWN0aW9uID8gdC5zY3JvbGxUbyhhLCBvLmFsdGVybmF0ZVZhbHVlKSA6IHQuc2Nyb2xsVG8oby5hbHRlcm5hdGVWYWx1ZSwgYSk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoeC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdICYmIFwidHJhbnNmb3JtXCIgPT09IHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcIm5hbWVcIiwgZSkpIHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcImluamVjdFwiLCBlLCBhKSwgcyA9IFwidHJhbnNmb3JtXCIsIGEgPSBpKGUpLnRyYW5zZm9ybUNhY2hlW3JdO1xuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeC5Ib29rcy5yZWdpc3RlcmVkW3JdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHguSG9va3MuZ2V0Um9vdChyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBuIHx8IHguZ2V0UHJvcGVydHlWYWx1ZShlLCB1KSwgYSA9IHguSG9va3MuaW5qZWN0VmFsdWUobCwgYSwgbiksIHIgPSB1XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXSAmJiAoYSA9IHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcImluamVjdFwiLCBlLCBhKSwgciA9IHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcIm5hbWVcIiwgZSkpLCBzID0geC5OYW1lcy5wcmVmaXhDaGVjayhyKVswXSwgOCA+PSBmKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdHlsZVtzXSA9IGFcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBbXCIgKyBhICsgXCJdIGZvciBbXCIgKyBzICsgXCJdXCIpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpKGUpICYmIGkoZSkuaXNTVkcgJiYgeC5OYW1lcy5TVkdBdHRyaWJ1dGUocikgPyBlLnNldEF0dHJpYnV0ZShyLCBhKSA6IGUuc3R5bGVbc10gPSBhO1xuICAgICAgICAgICAgICAgICAgICB2LmRlYnVnID49IDIgJiYgY29uc29sZS5sb2coXCJTZXQgXCIgKyByICsgXCIgKFwiICsgcyArIFwiKTogXCIgKyBhKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gW3MsIGFdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmx1c2hUcmFuc2Zvcm1DYWNoZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0KHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsIHQpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgciA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKChmIHx8IHYuU3RhdGUuaXNBbmRyb2lkICYmICF2LlN0YXRlLmlzQ2hyb21lKSAmJiBpKGUpLmlzU1ZHKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlOiBbdChcInRyYW5zbGF0ZVhcIiksIHQoXCJ0cmFuc2xhdGVZXCIpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZXdYOiBbdChcInNrZXdYXCIpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZXdZOiBbdChcInNrZXdZXCIpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAxICE9PSB0KFwic2NhbGVcIikgPyBbdChcInNjYWxlXCIpLCB0KFwic2NhbGVcIildIDogW3QoXCJzY2FsZVhcIiksIHQoXCJzY2FsZVlcIildLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlOiBbdChcInJvdGF0ZVpcIiksIDAsIDBdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChpKGUpLnRyYW5zZm9ybUNhY2hlLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgL150cmFuc2xhdGUvaS50ZXN0KGUpID8gZSA9IFwidHJhbnNsYXRlXCIgOiAvXnNjYWxlL2kudGVzdChlKSA/IGUgPSBcInNjYWxlXCIgOiAvXnJvdGF0ZS9pLnRlc3QoZSkgJiYgKGUgPSBcInJvdGF0ZVwiKSwgYVtlXSAmJiAociArPSBlICsgXCIoXCIgKyBhW2VdLmpvaW4oXCIgXCIpICsgXCIpIFwiLCBkZWxldGUgYVtlXSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbiwgbztcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGkoZSkudHJhbnNmb3JtQ2FjaGUsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IGkoZSkudHJhbnNmb3JtQ2FjaGVbdF0sIFwidHJhbnNmb3JtUGVyc3BlY3RpdmVcIiA9PT0gdCA/IChvID0gbiwgITApIDogKDkgPT09IGYgJiYgXCJyb3RhdGVaXCIgPT09IHQgJiYgKHQgPSBcInJvdGF0ZVwiKSwgdm9pZChyICs9IHQgKyBuICsgXCIgXCIpKVxuICAgICAgICAgICAgICAgICAgICB9KSwgbyAmJiAociA9IFwicGVyc3BlY3RpdmVcIiArIG8gKyBcIiBcIiArIHIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHguc2V0UHJvcGVydHlWYWx1ZShlLCBcInRyYW5zZm9ybVwiLCByKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB4Lkhvb2tzLnJlZ2lzdGVyKCksIHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXIoKSwgdi5ob29rID0gZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgICAgICAgIHZhciBuID0gYTtcbiAgICAgICAgICAgIHJldHVybiBlID0gbyhlKSwgJC5lYWNoKGUsIGZ1bmN0aW9uIChlLCBvKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkobykgPT09IGEgJiYgdi5pbml0KG8pLCByID09PSBhKSBuID09PSBhICYmIChuID0gdi5DU1MuZ2V0UHJvcGVydHlWYWx1ZShvLCB0KSk7XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gdi5DU1Muc2V0UHJvcGVydHlWYWx1ZShvLCB0LCByKTtcbiAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc2Zvcm1cIiA9PT0gc1swXSAmJiB2LkNTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKG8pLCBuID0gc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLCBuXG4gICAgICAgIH07XG4gICAgICAgIHZhciBTID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbCA/IFQucHJvbWlzZSB8fCBudWxsIDogZlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBuKCkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoZSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnLmlzQXJyYXkoZSkgPyAociA9IGVbMF0sICFnLmlzQXJyYXkoZVsxXSkgJiYgL15bXFxkLV0vLnRlc3QoZVsxXSkgfHwgZy5pc0Z1bmN0aW9uKGVbMV0pIHx8IHguUmVnRXguaXNIZXgudGVzdChlWzFdKSA/IHMgPSBlWzFdIDogKGcuaXNTdHJpbmcoZVsxXSkgJiYgIXguUmVnRXguaXNIZXgudGVzdChlWzFdKSB8fCBnLmlzQXJyYXkoZVsxXSkpICYmIChpID0gdCA/IGVbMV0gOiB1KGVbMV0sIG8uZHVyYXRpb24pLCBlWzJdICE9PSBhICYmIChzID0gZVsyXSkpKSA6IHIgPSBlLCB0IHx8IChpID0gaSB8fCBvLmVhc2luZyksIGcuaXNGdW5jdGlvbihyKSAmJiAociA9IHIuY2FsbChuLCB3LCBQKSksIGcuaXNGdW5jdGlvbihzKSAmJiAocyA9IHMuY2FsbChuLCB3LCBQKSksIFtyIHx8IDAsIGksIHNdXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByLCBhO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSAodCB8fCBcIjBcIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1slQS16XSskLywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA9IGUsIFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByIHx8IChyID0geC5WYWx1ZXMuZ2V0VW5pdFR5cGUoZSkpLCBbYSwgcl1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlQYXJlbnQ6IG4ucGFyZW50Tm9kZSB8fCByLmJvZHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB4LmdldFByb3BlcnR5VmFsdWUobiwgXCJwb3NpdGlvblwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IHguZ2V0UHJvcGVydHlWYWx1ZShuLCBcImZvbnRTaXplXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5wb3NpdGlvbiA9PT0gTi5sYXN0UG9zaXRpb24gJiYgZS5teVBhcmVudCA9PT0gTi5sYXN0UGFyZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmZvbnRTaXplID09PSBOLmxhc3RGb250U2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE4ubGFzdFBhcmVudCA9IGUubXlQYXJlbnQsIE4ubGFzdFBvc2l0aW9uID0gZS5wb3NpdGlvbiwgTi5sYXN0Rm9udFNpemUgPSBlLmZvbnRTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgYSkgbC5lbVRvUHggPSBOLmxhc3RFbVRvUHgsIGwucGVyY2VudFRvUHhXaWR0aCA9IE4ubGFzdFBlcmNlbnRUb1B4V2lkdGgsIGwucGVyY2VudFRvUHhIZWlnaHQgPSBOLmxhc3RQZXJjZW50VG9QeEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gaShuKS5pc1NWRyA/IHIuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJyZWN0XCIpIDogci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuaW5pdCh1KSwgZS5teVBhcmVudC5hcHBlbmRDaGlsZCh1KSwgJC5lYWNoKFtcIm92ZXJmbG93XCIsIFwib3ZlcmZsb3dYXCIsIFwib3ZlcmZsb3dZXCJdLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsIHQsIFwiaGlkZGVuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHYuQ1NTLnNldFByb3BlcnR5VmFsdWUodSwgXCJwb3NpdGlvblwiLCBlLnBvc2l0aW9uKSwgdi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LCBcImZvbnRTaXplXCIsIGUuZm9udFNpemUpLCB2LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsIFwiYm94U2l6aW5nXCIsIFwiY29udGVudC1ib3hcIiksICQuZWFjaChbXCJtaW5XaWR0aFwiLCBcIm1heFdpZHRoXCIsIFwid2lkdGhcIiwgXCJtaW5IZWlnaHRcIiwgXCJtYXhIZWlnaHRcIiwgXCJoZWlnaHRcIl0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuQ1NTLnNldFByb3BlcnR5VmFsdWUodSwgdCwgcyArIFwiJVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB2LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsIFwicGFkZGluZ0xlZnRcIiwgcyArIFwiZW1cIiksIGwucGVyY2VudFRvUHhXaWR0aCA9IE4ubGFzdFBlcmNlbnRUb1B4V2lkdGggPSAocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUodSwgXCJ3aWR0aFwiLCBudWxsLCAhMCkpIHx8IDEpIC8gcywgbC5wZXJjZW50VG9QeEhlaWdodCA9IE4ubGFzdFBlcmNlbnRUb1B4SGVpZ2h0ID0gKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKHUsIFwiaGVpZ2h0XCIsIG51bGwsICEwKSkgfHwgMSkgLyBzLCBsLmVtVG9QeCA9IE4ubGFzdEVtVG9QeCA9IChwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZSh1LCBcInBhZGRpbmdMZWZ0XCIpKSB8fCAxKSAvIHMsIGUubXlQYXJlbnQucmVtb3ZlQ2hpbGQodSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09PSBOLnJlbVRvUHggJiYgKE4ucmVtVG9QeCA9IHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKHIuYm9keSwgXCJmb250U2l6ZVwiKSkgfHwgMTYpLCBudWxsID09PSBOLnZ3VG9QeCAmJiAoTi52d1RvUHggPSBwYXJzZUZsb2F0KHQuaW5uZXJXaWR0aCkgLyAxMDAsIE4udmhUb1B4ID0gcGFyc2VGbG9hdCh0LmlubmVySGVpZ2h0KSAvIDEwMCksIGwucmVtVG9QeCA9IE4ucmVtVG9QeCwgbC52d1RvUHggPSBOLnZ3VG9QeCwgbC52aFRvUHggPSBOLnZoVG9QeCwgdi5kZWJ1ZyA+PSAxICYmIGNvbnNvbGUubG9nKFwiVW5pdCByYXRpb3M6IFwiICsgSlNPTi5zdHJpbmdpZnkobCksIG4pLCBsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG8uYmVnaW4gJiYgMCA9PT0gdykgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uYmVnaW4uY2FsbChtLCBtKVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB5XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInNjcm9sbFwiID09PSBrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgUyA9IC9eeCQvaS50ZXN0KG8uYXhpcykgPyBcIkxlZnRcIiA6IFwiVG9wXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgViA9IHBhcnNlRmxvYXQoby5vZmZzZXQpIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQywgQSwgRjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uY29udGFpbmVyID8gZy5pc1dyYXBwZWQoby5jb250YWluZXIpIHx8IGcuaXNOb2RlKG8uY29udGFpbmVyKSA/IChvLmNvbnRhaW5lciA9IG8uY29udGFpbmVyWzBdIHx8IG8uY29udGFpbmVyLCBDID0gby5jb250YWluZXJbXCJzY3JvbGxcIiArIFNdLCBGID0gQyArICQobikucG9zaXRpb24oKVtTLnRvTG93ZXJDYXNlKCldICsgVikgOiBvLmNvbnRhaW5lciA9IG51bGwgOiAoQyA9IHYuU3RhdGUuc2Nyb2xsQW5jaG9yW3YuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiICsgU11dLCBBID0gdi5TdGF0ZS5zY3JvbGxBbmNob3Jbdi5TdGF0ZVtcInNjcm9sbFByb3BlcnR5XCIgKyAoXCJMZWZ0XCIgPT09IFMgPyBcIlRvcFwiIDogXCJMZWZ0XCIpXV0sIEYgPSAkKG4pLm9mZnNldCgpW1MudG9Mb3dlckNhc2UoKV0gKyBWKSwgcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWU6ICExLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlOiBDLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWU6IEMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlOiBGLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0VHlwZTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBvLmVhc2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBvLmNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogUyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdGVybmF0ZVZhbHVlOiBBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHYuZGVidWcgJiYgY29uc29sZS5sb2coXCJ0d2VlbnNDb250YWluZXIgKHNjcm9sbCk6IFwiLCBzLnNjcm9sbCwgbilcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcInJldmVyc2VcIiA9PT0gaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpKG4pLnR3ZWVuc0NvbnRhaW5lcikgcmV0dXJuIHZvaWQgJC5kZXF1ZXVlKG4sIG8ucXVldWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJub25lXCIgPT09IGkobikub3B0cy5kaXNwbGF5ICYmIChpKG4pLm9wdHMuZGlzcGxheSA9IFwiYXV0b1wiKSwgXCJoaWRkZW5cIiA9PT0gaShuKS5vcHRzLnZpc2liaWxpdHkgJiYgKGkobikub3B0cy52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCIpLCBpKG4pLm9wdHMubG9vcCA9ICExLCBpKG4pLm9wdHMuYmVnaW4gPSBudWxsLCBpKG4pLm9wdHMuY29tcGxldGUgPSBudWxsLCBiLmVhc2luZyB8fCBkZWxldGUgby5lYXNpbmcsIGIuZHVyYXRpb24gfHwgZGVsZXRlIG8uZHVyYXRpb24sIG8gPSAkLmV4dGVuZCh7fSwgaShuKS5vcHRzLCBvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBFID0gJC5leHRlbmQoITAsIHt9LCBpKG4pLnR3ZWVuc0NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqIGluIEUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiZWxlbWVudFwiICE9PSBqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBIID0gRVtqXS5zdGFydFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFW2pdLnN0YXJ0VmFsdWUgPSBFW2pdLmN1cnJlbnRWYWx1ZSA9IEVbal0uZW5kVmFsdWUsIEVbal0uZW5kVmFsdWUgPSBILCBnLmlzRW1wdHlPYmplY3QoYikgfHwgKEVbal0uZWFzaW5nID0gby5lYXNpbmcpLCB2LmRlYnVnICYmIGNvbnNvbGUubG9nKFwicmV2ZXJzZSB0d2VlbnNDb250YWluZXIgKFwiICsgaiArIFwiKTogXCIgKyBKU09OLnN0cmluZ2lmeShFW2pdKSwgbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzID0gRVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwic3RhcnRcIiA9PT0gaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKG4pLnR3ZWVuc0NvbnRhaW5lciAmJiBpKG4pLmlzQW5pbWF0aW5nID09PSAhMCAmJiAoRSA9IGkobikudHdlZW5zQ29udGFpbmVyKSwgJC5lYWNoKGgsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlZ0V4cChcIl5cIiArIHguTGlzdHMuY29sb3JzLmpvaW4oXCIkfF5cIikgKyBcIiRcIikudGVzdChlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHAodCwgITApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHJbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gclsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC5SZWdFeC5pc0hleC50ZXN0KG4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gW1wiUmVkXCIsIFwiR3JlZW5cIiwgXCJCbHVlXCJdLCBsID0geC5WYWx1ZXMuaGV4VG9SZ2IobiksIHUgPSBpID8geC5WYWx1ZXMuaGV4VG9SZ2IoaSkgOiBhLCBjID0gMDsgYyA8IHMubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IFtsW2NdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICYmIGYucHVzaChvKSwgdSAhPT0gYSAmJiBmLnB1c2godVtjXSksIGhbZSArIHNbY11dID0gZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGhbZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgUiBpbiBoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSBwKGhbUl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ID0gT1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IE9bMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gPSBPWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIgPSB4Lk5hbWVzLmNhbWVsQ2FzZShSKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSSA9IHguSG9va3MuZ2V0Um9vdChSKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQiA9ICExO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpKG4pLmlzU1ZHIHx8IFwidHdlZW5cIiA9PT0gSSB8fCB4Lk5hbWVzLnByZWZpeENoZWNrKEkpWzFdICE9PSAhMSB8fCB4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbSV0gIT09IGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8uZGlzcGxheSAhPT0gYSAmJiBudWxsICE9PSBvLmRpc3BsYXkgJiYgXCJub25lXCIgIT09IG8uZGlzcGxheSB8fCBvLnZpc2liaWxpdHkgIT09IGEgJiYgXCJoaWRkZW5cIiAhPT0gby52aXNpYmlsaXR5KSAmJiAvb3BhY2l0eXxmaWx0ZXIvLnRlc3QoUikgJiYgIU0gJiYgMCAhPT0geiAmJiAoTSA9IDApLCBvLl9jYWNoZVZhbHVlcyAmJiBFICYmIEVbUl0gPyAoTSA9PT0gYSAmJiAoTSA9IEVbUl0uZW5kVmFsdWUgKyBFW1JdLnVuaXRUeXBlKSwgQiA9IGkobikucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtJXSkgOiB4Lkhvb2tzLnJlZ2lzdGVyZWRbUl0gPyBNID09PSBhID8gKEIgPSB4LmdldFByb3BlcnR5VmFsdWUobiwgSSksIE0gPSB4LmdldFByb3BlcnR5VmFsdWUobiwgUiwgQikpIDogQiA9IHguSG9va3MudGVtcGxhdGVzW0ldWzFdIDogTSA9PT0gYSAmJiAoTSA9IHguZ2V0UHJvcGVydHlWYWx1ZShuLCBSKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBXLCBHLCBELCBYID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChXID0gZihSLCBNKSwgTSA9IFdbMF0sIEQgPSBXWzFdLCBXID0gZihSLCB6KSwgeiA9IFdbMF0ucmVwbGFjZSgvXihbKy1cXC8qXSk9LywgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWCA9IHQsIFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBHID0gV1sxXSwgTSA9IHBhcnNlRmxvYXQoTSkgfHwgMCwgeiA9IHBhcnNlRmxvYXQoeikgfHwgMCwgXCIlXCIgPT09IEcgJiYgKC9eKGZvbnRTaXplfGxpbmVIZWlnaHQpJC8udGVzdChSKSA/ICh6IC89IDEwMCwgRyA9IFwiZW1cIikgOiAvXnNjYWxlLy50ZXN0KFIpID8gKHogLz0gMTAwLCBHID0gXCJcIikgOiAvKFJlZHxHcmVlbnxCbHVlKSQvaS50ZXN0KFIpICYmICh6ID0geiAvIDEwMCAqIDI1NSwgRyA9IFwiXCIpKSwgL1tcXC8qXS8udGVzdChYKSkgRyA9IEQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEQgIT09IEcgJiYgMCAhPT0gTSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB6KSBHID0gRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBsIHx8IGQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgWSA9IC9tYXJnaW58cGFkZGluZ3xsZWZ0fHJpZ2h0fHdpZHRofHRleHR8d29yZHxsZXR0ZXIvaS50ZXN0KFIpIHx8IC9YJC8udGVzdChSKSB8fCBcInhcIiA9PT0gUiA/IFwieFwiIDogXCJ5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTSAqPSBcInhcIiA9PT0gWSA/IGwucGVyY2VudFRvUHhXaWR0aCA6IGwucGVyY2VudFRvUHhIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJweFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNICo9IGxbRCArIFwiVG9QeFwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKEcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNICo9IDEgLyAoXCJ4XCIgPT09IFkgPyBsLnBlcmNlbnRUb1B4V2lkdGggOiBsLnBlcmNlbnRUb1B4SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInB4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gKj0gMSAvIGxbRyArIFwiVG9QeFwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChYKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIrXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ID0gTSArIHo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIi1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHogPSBNIC0gejtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiKlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeiA9IE0gKiB6O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIvXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ID0gTSAvIHpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzW1JdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWU6IEIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlOiBNLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlOiBNLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWU6IHosXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0VHlwZTogRyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB2LmRlYnVnICYmIGNvbnNvbGUubG9nKFwidHdlZW5zQ29udGFpbmVyIChcIiArIFIgKyBcIik6IFwiICsgSlNPTi5zdHJpbmdpZnkoc1tSXSksIG4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHYuZGVidWcgJiYgY29uc29sZS5sb2coXCJTa2lwcGluZyBbXCIgKyBJICsgXCJdIGR1ZSB0byBhIGxhY2sgb2YgYnJvd3NlciBzdXBwb3J0LlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcy5lbGVtZW50ID0gblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHMuZWxlbWVudCAmJiAoeC5WYWx1ZXMuYWRkQ2xhc3MobiwgXCJ2ZWxvY2l0eS1hbmltYXRpbmdcIiksIEwucHVzaChzKSwgXCJcIiA9PT0gby5xdWV1ZSAmJiAoaShuKS50d2VlbnNDb250YWluZXIgPSBzLCBpKG4pLm9wdHMgPSBvKSwgaShuKS5pc0FuaW1hdGluZyA9ICEwLCB3ID09PSBQIC0gMSA/ICh2LlN0YXRlLmNhbGxzLnB1c2goW0wsIG0sIG8sIG51bGwsIFQucmVzb2x2ZXJdKSwgdi5TdGF0ZS5pc1RpY2tpbmcgPT09ICExICYmICh2LlN0YXRlLmlzVGlja2luZyA9ICEwLCBjKCkpKSA6IHcrKylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBvID0gJC5leHRlbmQoe30sIHYuZGVmYXVsdHMsIGIpLFxuICAgICAgICAgICAgICAgICAgICBzID0ge30sXG4gICAgICAgICAgICAgICAgICAgIGw7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChpKG4pID09PSBhICYmIHYuaW5pdChuKSwgcGFyc2VGbG9hdChvLmRlbGF5KSAmJiBvLnF1ZXVlICE9PSAhMSAmJiAkLnF1ZXVlKG4sIG8ucXVldWUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHYudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZyA9ICEwLCBpKG4pLmRlbGF5VGltZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0OiBzZXRUaW1lb3V0KGUsIHBhcnNlRmxvYXQoby5kZWxheSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksIG8uZHVyYXRpb24udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImZhc3RcIjpcbiAgICAgICAgICAgICAgICAgICAgby5kdXJhdGlvbiA9IDIwMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm5vcm1hbFwiOlxuICAgICAgICAgICAgICAgICAgICBvLmR1cmF0aW9uID0geTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNsb3dcIjpcbiAgICAgICAgICAgICAgICAgICAgby5kdXJhdGlvbiA9IDYwMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgby5kdXJhdGlvbiA9IHBhcnNlRmxvYXQoby5kdXJhdGlvbikgfHwgMVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2Lm1vY2sgIT09ICExICYmICh2Lm1vY2sgPT09ICEwID8gby5kdXJhdGlvbiA9IG8uZGVsYXkgPSAxIDogKG8uZHVyYXRpb24gKj0gcGFyc2VGbG9hdCh2Lm1vY2spIHx8IDEsIG8uZGVsYXkgKj0gcGFyc2VGbG9hdCh2Lm1vY2spIHx8IDEpKSwgby5lYXNpbmcgPSB1KG8uZWFzaW5nLCBvLmR1cmF0aW9uKSwgby5iZWdpbiAmJiAhZy5pc0Z1bmN0aW9uKG8uYmVnaW4pICYmIChvLmJlZ2luID0gbnVsbCksIG8ucHJvZ3Jlc3MgJiYgIWcuaXNGdW5jdGlvbihvLnByb2dyZXNzKSAmJiAoby5wcm9ncmVzcyA9IG51bGwpLCBvLmNvbXBsZXRlICYmICFnLmlzRnVuY3Rpb24oby5jb21wbGV0ZSkgJiYgKG8uY29tcGxldGUgPSBudWxsKSwgby5kaXNwbGF5ICE9PSBhICYmIG51bGwgIT09IG8uZGlzcGxheSAmJiAoby5kaXNwbGF5ID0gby5kaXNwbGF5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSwgXCJhdXRvXCIgPT09IG8uZGlzcGxheSAmJiAoby5kaXNwbGF5ID0gdi5DU1MuVmFsdWVzLmdldERpc3BsYXlUeXBlKG4pKSksIG8udmlzaWJpbGl0eSAhPT0gYSAmJiBudWxsICE9PSBvLnZpc2liaWxpdHkgJiYgKG8udmlzaWJpbGl0eSA9IG8udmlzaWJpbGl0eS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpLCBvLm1vYmlsZUhBID0gby5tb2JpbGVIQSAmJiB2LlN0YXRlLmlzTW9iaWxlICYmICF2LlN0YXRlLmlzR2luZ2VyYnJlYWQsIG8ucXVldWUgPT09ICExID8gby5kZWxheSA/IHNldFRpbWVvdXQoZSwgby5kZWxheSkgOiBlKCkgOiAkLnF1ZXVlKG4sIG8ucXVldWUsIGZ1bmN0aW9uICh0LCByKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByID09PSAhMCA/IChULnByb21pc2UgJiYgVC5yZXNvbHZlcihtKSwgITApIDogKHYudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZyA9ICEwLCB2b2lkIGUodCkpXG4gICAgICAgICAgICAgICAgfSksIFwiXCIgIT09IG8ucXVldWUgJiYgXCJmeFwiICE9PSBvLnF1ZXVlIHx8IFwiaW5wcm9ncmVzc1wiID09PSAkLnF1ZXVlKG4pWzBdIHx8ICQuZGVxdWV1ZShuKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHMgPSBhcmd1bWVudHNbMF0gJiYgKGFyZ3VtZW50c1swXS5wIHx8ICQuaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMF0ucHJvcGVydGllcykgJiYgIWFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzLm5hbWVzIHx8IGcuaXNTdHJpbmcoYXJndW1lbnRzWzBdLnByb3BlcnRpZXMpKSxcbiAgICAgICAgICAgICAgICBsLCBmLCBkLCBtLCBoLCBiO1xuICAgICAgICAgICAgaWYgKGcuaXNXcmFwcGVkKHRoaXMpID8gKGwgPSAhMSwgZCA9IDAsIG0gPSB0aGlzLCBmID0gdGhpcykgOiAobCA9ICEwLCBkID0gMSwgbSA9IHMgPyBhcmd1bWVudHNbMF0uZWxlbWVudHMgfHwgYXJndW1lbnRzWzBdLmUgOiBhcmd1bWVudHNbMF0pLCBtID0gbyhtKSkge1xuICAgICAgICAgICAgICAgIHMgPyAoaCA9IGFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzIHx8IGFyZ3VtZW50c1swXS5wLCBiID0gYXJndW1lbnRzWzBdLm9wdGlvbnMgfHwgYXJndW1lbnRzWzBdLm8pIDogKGggPSBhcmd1bWVudHNbZF0sIGIgPSBhcmd1bWVudHNbZCArIDFdKTtcbiAgICAgICAgICAgICAgICB2YXIgUCA9IG0ubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB3ID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoIS9eKHN0b3B8ZmluaXNoKSQvaS50ZXN0KGgpICYmICEkLmlzUGxhaW5PYmplY3QoYikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFYgPSBkICsgMTtcbiAgICAgICAgICAgICAgICAgICAgYiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBDID0gVjsgQyA8IGFyZ3VtZW50cy5sZW5ndGg7IEMrKykgZy5pc0FycmF5KGFyZ3VtZW50c1tDXSkgfHwgIS9eKGZhc3R8bm9ybWFsfHNsb3cpJC9pLnRlc3QoYXJndW1lbnRzW0NdKSAmJiAhL15cXGQvLnRlc3QoYXJndW1lbnRzW0NdKSA/IGcuaXNTdHJpbmcoYXJndW1lbnRzW0NdKSB8fCBnLmlzQXJyYXkoYXJndW1lbnRzW0NdKSA/IGIuZWFzaW5nID0gYXJndW1lbnRzW0NdIDogZy5pc0Z1bmN0aW9uKGFyZ3VtZW50c1tDXSkgJiYgKGIuY29tcGxldGUgPSBhcmd1bWVudHNbQ10pIDogYi5kdXJhdGlvbiA9IGFyZ3VtZW50c1tDXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgVCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdGVyOiBudWxsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBsICYmIHYuUHJvbWlzZSAmJiAoVC5wcm9taXNlID0gbmV3IHYuUHJvbWlzZShmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICBULnJlc29sdmVyID0gZSwgVC5yZWplY3RlciA9IHRcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgdmFyIGs7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChoKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxuICAgICAgICAgICAgICAgICAgICBrID0gXCJzY3JvbGxcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInJldmVyc2VcIjpcbiAgICAgICAgICAgICAgICAgICAgayA9IFwicmV2ZXJzZVwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmluaXNoXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0b3BcIjpcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKG0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKHQpICYmIGkodCkuZGVsYXlUaW1lciAmJiAoY2xlYXJUaW1lb3V0KGkodCkuZGVsYXlUaW1lci5zZXRUaW1lb3V0KSwgaSh0KS5kZWxheVRpbWVyLm5leHQgJiYgaSh0KS5kZWxheVRpbWVyLm5leHQoKSwgZGVsZXRlIGkodCkuZGVsYXlUaW1lcilcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBBID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkLmVhY2godi5TdGF0ZS5jYWxscywgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgJC5lYWNoKHRbMV0sIGZ1bmN0aW9uIChyLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBiID09PSBhID8gXCJcIiA6IGI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8gPT09ICEwIHx8IHRbMl0ucXVldWUgPT09IG8gfHwgYiA9PT0gYSAmJiB0WzJdLnF1ZXVlID09PSAhMSA/IHZvaWQgJC5lYWNoKG0sIGZ1bmN0aW9uIChyLCBhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPT09IG4gJiYgKChiID09PSAhMCB8fCBnLmlzU3RyaW5nKGIpKSAmJiAoJC5lYWNoKCQucXVldWUoYSwgZy5pc1N0cmluZyhiKSA/IGIgOiBcIlwiKSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcuaXNGdW5jdGlvbih0KSAmJiB0KG51bGwsICEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgJC5xdWV1ZShhLCBnLmlzU3RyaW5nKGIpID8gYiA6IFwiXCIsIFtdKSksIFwic3RvcFwiID09PSBoID8gKGkoYSkgJiYgaShhKS50d2VlbnNDb250YWluZXIgJiYgbyAhPT0gITEgJiYgJC5lYWNoKGkoYSkudHdlZW5zQ29udGFpbmVyLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lbmRWYWx1ZSA9IHQuY3VycmVudFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBBLnB1c2goZSkpIDogXCJmaW5pc2hcIiA9PT0gaCAmJiAodFsyXS5kdXJhdGlvbiA9IDEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogITBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pLCBcInN0b3BcIiA9PT0gaCAmJiAoJC5lYWNoKEEsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwKHQsICEwKVxuICAgICAgICAgICAgICAgICAgICB9KSwgVC5wcm9taXNlICYmIFQucmVzb2x2ZXIobSkpLCBlKCk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkLmlzUGxhaW5PYmplY3QoaCkgfHwgZy5pc0VtcHR5T2JqZWN0KGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZy5pc1N0cmluZyhoKSAmJiB2LlJlZGlyZWN0c1toXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBGID0gJC5leHRlbmQoe30sIGIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gRi5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IEYuZGVsYXkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRi5iYWNrd2FyZHMgPT09ICEwICYmIChtID0gJC5leHRlbmQoITAsIFtdLCBtKS5yZXZlcnNlKCkpLCAkLmVhY2gobSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChGLnN0YWdnZXIpID8gRi5kZWxheSA9IGogKyBwYXJzZUZsb2F0KEYuc3RhZ2dlcikgKiBlIDogZy5pc0Z1bmN0aW9uKEYuc3RhZ2dlcikgJiYgKEYuZGVsYXkgPSBqICsgRi5zdGFnZ2VyLmNhbGwodCwgZSwgUCkpLCBGLmRyYWcgJiYgKEYuZHVyYXRpb24gPSBwYXJzZUZsb2F0KEUpIHx8ICgvXihjYWxsb3V0fHRyYW5zaXRpb24pLy50ZXN0KGgpID8gMWUzIDogeSksIEYuZHVyYXRpb24gPSBNYXRoLm1heChGLmR1cmF0aW9uICogKEYuYmFja3dhcmRzID8gMSAtIGUgLyBQIDogKGUgKyAxKSAvIFApLCAuNzUgKiBGLmR1cmF0aW9uLCAyMDApKSwgdi5SZWRpcmVjdHNbaF0uY2FsbCh0LCB0LCBGIHx8IHt9LCBlLCBQLCBtLCBULnByb21pc2UgPyBUIDogYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgSCA9IFwiVmVsb2NpdHk6IEZpcnN0IGFyZ3VtZW50IChcIiArIGggKyBcIikgd2FzIG5vdCBhIHByb3BlcnR5IG1hcCwgYSBrbm93biBhY3Rpb24sIG9yIGEgcmVnaXN0ZXJlZCByZWRpcmVjdC4gQWJvcnRpbmcuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVC5wcm9taXNlID8gVC5yZWplY3RlcihuZXcgRXJyb3IoSCkpIDogY29uc29sZS5sb2coSCksIGUoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGsgPSBcInN0YXJ0XCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIE4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGFyZW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvc2l0aW9uOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEZvbnRTaXplOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBlcmNlbnRUb1B4V2lkdGg6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGVyY2VudFRvUHhIZWlnaHQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0RW1Ub1B4OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtVG9QeDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZ3VG9QeDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZoVG9QeDogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBMID0gW107XG4gICAgICAgICAgICAgICAgJC5lYWNoKG0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGcuaXNOb2RlKHQpICYmIG4uY2FsbCh0KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBGID0gJC5leHRlbmQoe30sIHYuZGVmYXVsdHMsIGIpLFxuICAgICAgICAgICAgICAgICAgICBSO1xuICAgICAgICAgICAgICAgIGlmIChGLmxvb3AgPSBwYXJzZUludChGLmxvb3ApLCBSID0gMiAqIEYubG9vcCAtIDEsIEYubG9vcClcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgTyA9IDA7IFIgPiBPOyBPKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiBGLmRlbGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzOiBGLnByb2dyZXNzXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgTyA9PT0gUiAtIDEgJiYgKHouZGlzcGxheSA9IEYuZGlzcGxheSwgei52aXNpYmlsaXR5ID0gRi52aXNpYmlsaXR5LCB6LmNvbXBsZXRlID0gRi5jb21wbGV0ZSksIFMobSwgXCJyZXZlcnNlXCIsIHopXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHYgPSAkLmV4dGVuZChTLCB2KSwgdi5hbmltYXRlID0gUztcbiAgICAgICAgdmFyIFAgPSB0LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBkO1xuICAgICAgICByZXR1cm4gdi5TdGF0ZS5pc01vYmlsZSB8fCByLmhpZGRlbiA9PT0gYSB8fCByLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHIuaGlkZGVuID8gKFAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZSghMClcbiAgICAgICAgICAgICAgICB9LCAxNilcbiAgICAgICAgICAgIH0sIGMoKSkgOiBQID0gdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZFxuICAgICAgICB9KSwgZS5WZWxvY2l0eSA9IHYsIGUgIT09IHQgJiYgKGUuZm4udmVsb2NpdHkgPSBTLCBlLmZuLnZlbG9jaXR5LmRlZmF1bHRzID0gdi5kZWZhdWx0cyksICQuZWFjaChbXCJEb3duXCIsIFwiVXBcIl0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB2LlJlZGlyZWN0c1tcInNsaWRlXCIgKyB0XSA9IGZ1bmN0aW9uIChlLCByLCBuLCBvLCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSAkLmV4dGVuZCh7fSwgciksXG4gICAgICAgICAgICAgICAgICAgIHUgPSBsLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICBjID0gbC5jb21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgcCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGYgPSB7fTtcbiAgICAgICAgICAgICAgICBsLmRpc3BsYXkgPT09IGEgJiYgKGwuZGlzcGxheSA9IFwiRG93blwiID09PSB0ID8gXCJpbmxpbmVcIiA9PT0gdi5DU1MuVmFsdWVzLmdldERpc3BsYXlUeXBlKGUpID8gXCJpbmxpbmUtYmxvY2tcIiA6IFwiYmxvY2tcIiA6IFwibm9uZVwiKSwgbC5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdSAmJiB1LmNhbGwoaSwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZltyXSA9IGUuc3R5bGVbcl07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHYuQ1NTLmdldFByb3BlcnR5VmFsdWUoZSwgcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwW3JdID0gXCJEb3duXCIgPT09IHQgPyBbYSwgMF0gOiBbMCwgYV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmLm92ZXJmbG93ID0gZS5zdHlsZS5vdmVyZmxvdywgZS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICB9LCBsLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0IGluIGYpIGUuc3R5bGVbdF0gPSBmW3RdO1xuICAgICAgICAgICAgICAgICAgICBjICYmIGMuY2FsbChpLCBpKSwgcyAmJiBzLnJlc29sdmVyKGkpXG4gICAgICAgICAgICAgICAgfSwgdihlLCBwLCBsKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgJC5lYWNoKFtcIkluXCIsIFwiT3V0XCJdLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgdi5SZWRpcmVjdHNbXCJmYWRlXCIgKyB0XSA9IGZ1bmN0aW9uIChlLCByLCBuLCBvLCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSAkLmV4dGVuZCh7fSwgciksXG4gICAgICAgICAgICAgICAgICAgIHUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBcIkluXCIgPT09IHQgPyAxIDogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjID0gbC5jb21wbGV0ZTtcbiAgICAgICAgICAgICAgICBsLmNvbXBsZXRlID0gbiAhPT0gbyAtIDEgPyBsLmJlZ2luID0gbnVsbCA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYyAmJiBjLmNhbGwoaSwgaSksIHMgJiYgcy5yZXNvbHZlcihpKVxuICAgICAgICAgICAgICAgIH0sIGwuZGlzcGxheSA9PT0gYSAmJiAobC5kaXNwbGF5ID0gXCJJblwiID09PSB0ID8gXCJhdXRvXCIgOiBcIm5vbmVcIiksIHYodGhpcywgdSwgbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIHZcbiAgICB9KHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvIHx8IHdpbmRvdywgd2luZG93LCBkb2N1bWVudClcbn0pOy8qIEJ1dHRvbnMgKi9cblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIGpRdWVyeSByZXZlcnNlXG4gICAgICAgICQuZm4ucmV2ZXJzZSA9IFtdLnJldmVyc2U7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXIuZml4ZWRBY3Rpb25CdG4nLCAnLmZpeGVkLWFjdGlvbi1idG4nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgIG9wZW5GQUJNZW51KCR0aGlzKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZS5maXhlZEFjdGlvbkJ0bicsICcuZml4ZWQtYWN0aW9uLWJ0bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgY2xvc2VGQUJNZW51KCR0aGlzKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgb3BlbkZBQjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgIG9wZW5GQUJNZW51KCR0aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2xvc2VGQUI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsb3NlRkFCTWVudSgkdGhpcyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgdmFyIG9wZW5GQUJNZW51ID0gZnVuY3Rpb24gKGJ0bikge1xuICAgICAgICAkdGhpcyA9IGJ0bjtcbiAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgc2NhbGVZOiBcIi40XCIsXG4gICAgICAgICAgICAgICAgc2NhbGVYOiBcIi40XCIsXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlWTogXCI0MHB4XCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB0aW1lID0gMDtcbiAgICAgICAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS5yZXZlcnNlKCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVZOiBcIjBcIlxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDgwLFxuICAgICAgICAgICAgICAgICAgICBkZWxheTogdGltZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRpbWUgKz0gNDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY2xvc2VGQUJNZW51ID0gZnVuY3Rpb24gKGJ0bikge1xuICAgICAgICAkdGhpcyA9IGJ0bjtcbiAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB2YXIgdGltZSA9IDA7XG4gICAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XG4gICAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICBvcGFjaXR5OiBcIjBcIixcbiAgICAgICAgICAgIHNjYWxlWDogXCIuNFwiLFxuICAgICAgICAgICAgc2NhbGVZOiBcIi40XCIsXG4gICAgICAgICAgICB0cmFuc2xhdGVZOiBcIjQwcHhcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogODBcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG59KGpRdWVyeSkpOy8qIVxuICogV2F2ZXMgdjAuNi40XG4gKiBodHRwOi8vZmlhbi5teS5pZC9XYXZlc1xuICpcbiAqIENvcHlyaWdodCAyMDE0IEFsZmlhbmEgRS4gU2lidWVhIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZpYW5zL1dhdmVzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqL1xuXG47XG4oZnVuY3Rpb24gKHdpbmRvdykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBXYXZlcyA9IFdhdmVzIHx8IHt9O1xuICAgIHZhciAkJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7XG5cbiAgICAvLyBGaW5kIGV4YWN0IHBvc2l0aW9uIG9mIGVsZW1lbnRcbiAgICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIGlzV2luZG93KGVsZW0pID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0VmlldztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvZmZzZXQoZWxlbSkge1xuICAgICAgICB2YXIgZG9jRWxlbSwgd2luLFxuICAgICAgICAgICAgYm94ID0ge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cbiAgICAgICAgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gdHlwZW9mIHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgfVxuICAgICAgICB3aW4gPSBnZXRXaW5kb3coZG9jKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvcDogYm94LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsZW0uY2xpZW50VG9wLFxuICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb252ZXJ0U3R5bGUob2JqKSB7XG4gICAgICAgIHZhciBzdHlsZSA9ICcnO1xuXG4gICAgICAgIGZvciAodmFyIGEgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGEpKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUgKz0gKGEgKyAnOicgKyBvYmpbYV0gKyAnOycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cblxuICAgIHZhciBFZmZlY3QgPSB7XG5cbiAgICAgICAgLy8gRWZmZWN0IGRlbGF5XG4gICAgICAgIGR1cmF0aW9uOiA3NTAsXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKGUsIGVsZW1lbnQpIHtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSByaWdodCBjbGlja1xuICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09PSAyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZWwgPSBlbGVtZW50IHx8IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSByaXBwbGVcbiAgICAgICAgICAgIHZhciByaXBwbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSAnd2F2ZXMtcmlwcGxlJztcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKHJpcHBsZSk7XG5cbiAgICAgICAgICAgIC8vIEdldCBjbGljayBjb29yZGluYXRlIGFuZCBlbGVtZW50IHdpdGRoXG4gICAgICAgICAgICB2YXIgcG9zID0gb2Zmc2V0KGVsKTtcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgPSAoZS5wYWdlWSAtIHBvcy50b3ApO1xuICAgICAgICAgICAgdmFyIHJlbGF0aXZlWCA9IChlLnBhZ2VYIC0gcG9zLmxlZnQpO1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gJ3NjYWxlKCcgKyAoKGVsLmNsaWVudFdpZHRoIC8gMTAwKSAqIDEwKSArICcpJztcblxuICAgICAgICAgICAgLy8gU3VwcG9ydCBmb3IgdG91Y2ggZGV2aWNlc1xuICAgICAgICAgICAgaWYgKCd0b3VjaGVzJyBpbiBlKSB7XG4gICAgICAgICAgICAgICAgcmVsYXRpdmVZID0gKGUudG91Y2hlc1swXS5wYWdlWSAtIHBvcy50b3ApO1xuICAgICAgICAgICAgICAgIHJlbGF0aXZlWCA9IChlLnRvdWNoZXNbMF0ucGFnZVggLSBwb3MubGVmdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF0dGFjaCBkYXRhIHRvIGVsZW1lbnRcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaG9sZCcsIERhdGUubm93KCkpO1xuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScsIHNjYWxlKTtcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIHJlbGF0aXZlWCk7XG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXknLCByZWxhdGl2ZVkpO1xuXG4gICAgICAgICAgICAvLyBTZXQgcmlwcGxlIHBvc2l0aW9uXG4gICAgICAgICAgICB2YXIgcmlwcGxlU3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSArICdweCcsXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiByZWxhdGl2ZVggKyAncHgnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZSArICcgd2F2ZXMtbm90cmFuc2l0aW9uJztcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHJpcHBsZVN0eWxlKSk7XG4gICAgICAgICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZS5yZXBsYWNlKCd3YXZlcy1ub3RyYW5zaXRpb24nLCAnJyk7XG5cbiAgICAgICAgICAgIC8vIFNjYWxlIHRoZSByaXBwbGVcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2Zvcm0nXSA9IHNjYWxlO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tcy10cmFuc2Zvcm0nXSA9IHNjYWxlO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICAgICAgICByaXBwbGVTdHlsZS50cmFuc2Zvcm0gPSBzY2FsZTtcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlLm9wYWNpdHkgPSAnMSc7XG5cbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi1kdXJhdGlvbiddID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcblxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJ10gPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xuXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShyaXBwbGVTdHlsZSkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBUb3VjaEhhbmRsZXIudG91Y2h1cChlKTtcblxuICAgICAgICAgICAgdmFyIGVsID0gdGhpcztcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGVsLmNsaWVudFdpZHRoICogMS40O1xuXG4gICAgICAgICAgICAvLyBHZXQgZmlyc3QgcmlwcGxlXG4gICAgICAgICAgICB2YXIgcmlwcGxlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciByaXBwbGVzID0gZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnd2F2ZXMtcmlwcGxlJyk7XG4gICAgICAgICAgICBpZiAocmlwcGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmlwcGxlID0gcmlwcGxlc1tyaXBwbGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVggPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnKTtcblxuICAgICAgICAgICAgLy8gR2V0IGRlbGF5IGJlZXR3ZWVuIG1vdXNlZG93biBhbmQgbW91c2UgbGVhdmVcbiAgICAgICAgICAgIHZhciBkaWZmID0gRGF0ZS5ub3coKSAtIE51bWJlcihyaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnKSk7XG4gICAgICAgICAgICB2YXIgZGVsYXkgPSAzNTAgLSBkaWZmO1xuXG4gICAgICAgICAgICBpZiAoZGVsYXkgPCAwKSB7XG4gICAgICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGYWRlIG91dCByaXBwbGUgYWZ0ZXIgZGVsYXlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSArICdweCcsXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAnMCcsXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgICAgICAgICAgICctbW96LXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICAgICAgICAgICAnLW8tdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcbiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAnLW8tdHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUoc3R5bGUpKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2hpbGQocmlwcGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgRWZmZWN0LmR1cmF0aW9uKTtcbiAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBMaXR0bGUgaGFjayB0byBtYWtlIDxpbnB1dD4gY2FuIHBlcmZvcm0gd2F2ZXMgZWZmZWN0XG4gICAgICAgIHdyYXBJbnB1dDogZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGVsZW1lbnRzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudHNbYV07XG5cbiAgICAgICAgICAgICAgICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGlucHV0IGFscmVhZHkgaGF2ZSBwYXJlbnQganVzdCBwYXNzIHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpJyAmJiBwYXJlbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBQdXQgZWxlbWVudCBjbGFzcyBhbmQgc3R5bGUgdG8gdGhlIHNwZWNpZmllZCBwYXJlbnRcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lICsgJyB3YXZlcy1pbnB1dC13cmFwcGVyJztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFN0eWxlID0gZWwuZ2V0QXR0cmlidXRlKCdzdHlsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50U3R5bGUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsIGVsZW1lbnRTdHlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gJ3dhdmVzLWJ1dHRvbi1pbnB1dCc7XG4gICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQdXQgZWxlbWVudCBhcyBjaGlsZFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKHdyYXBwZXIsIGVsKTtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZSBtb3VzZWRvd24gZXZlbnQgZm9yIDUwMG1zIGR1cmluZyBhbmQgYWZ0ZXIgdG91Y2hcbiAgICAgKi9cbiAgICB2YXIgVG91Y2hIYW5kbGVyID0ge1xuICAgICAgICAvKiB1c2VzIGFuIGludGVnZXIgcmF0aGVyIHRoYW4gYm9vbCBzbyB0aGVyZSdzIG5vIGlzc3VlcyB3aXRoXG4gICAgICAgICAqIG5lZWRpbmcgdG8gY2xlYXIgdGltZW91dHMgaWYgYW5vdGhlciB0b3VjaCBldmVudCBvY2N1cnJlZFxuICAgICAgICAgKiB3aXRoaW4gdGhlIDUwMG1zLiBDYW5ub3QgbW91c2V1cCBiZXR3ZWVuIHRvdWNoc3RhcnQgYW5kXG4gICAgICAgICAqIHRvdWNoZW5kLCBub3IgaW4gdGhlIDUwMG1zIGFmdGVyIHRvdWNoZW5kLiAqL1xuICAgICAgICB0b3VjaGVzOiAwLFxuICAgICAgICBhbGxvd0V2ZW50OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGFsbG93ID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgKz0gMTsgLy9wdXNoXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRvdWNoSGFuZGxlci50b3VjaGVzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgLT0gMTsgLy9wb3AgYWZ0ZXIgNTAwbXNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgVG91Y2hIYW5kbGVyLnRvdWNoZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgYWxsb3cgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFsbG93O1xuICAgICAgICB9LFxuICAgICAgICB0b3VjaHVwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgVG91Y2hIYW5kbGVyLmFsbG93RXZlbnQoZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBEZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlciBmb3IgLndhdmVzLWVmZmVjdCBlbGVtZW50LlxuICAgICAqIHJldHVybnMgbnVsbCB3aGVuIC53YXZlcy1lZmZlY3QgZWxlbWVudCBub3QgaW4gXCJjbGljayB0cmVlXCJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRXYXZlc0VmZmVjdEVsZW1lbnQoZSkge1xuICAgICAgICBpZiAoVG91Y2hIYW5kbGVyLmFsbG93RXZlbnQoZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcblxuICAgICAgICB3aGlsZSAodGFyZ2V0LnBhcmVudEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpICYmIHRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignd2F2ZXMtZWZmZWN0JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2F2ZXMtZWZmZWN0JykpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWJibGUgdGhlIGNsaWNrIGFuZCBzaG93IGVmZmVjdCBpZiAud2F2ZXMtZWZmZWN0IGVsZW0gd2FzIGZvdW5kXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hvd0VmZmVjdChlKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZ2V0V2F2ZXNFZmZlY3RFbGVtZW50KGUpO1xuXG4gICAgICAgIGlmIChlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBFZmZlY3Quc2hvdyhlLCBlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFdhdmVzLmRpc3BsYXlFZmZlY3QgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoJ2R1cmF0aW9uJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBFZmZlY3QuZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9XcmFwIGlucHV0IGluc2lkZSA8aT4gdGFnXG4gICAgICAgIEVmZmVjdC53cmFwSW5wdXQoJCQoJy53YXZlcy1lZmZlY3QnKSk7XG5cbiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBXYXZlcyB0byBhbiBpbnB1dCBlbGVtZW50IChvciBhbnkgZWxlbWVudCB3aGljaCBkb2Vzbid0XG4gICAgICogYnViYmxlIG1vdXNldXAvbW91c2Vkb3duIGV2ZW50cykuXG4gICAgICogICBJbnRlbmRlZCB0byBiZSB1c2VkIHdpdGggZHluYW1pY2FsbHkgbG9hZGVkIGZvcm1zL2lucHV0cywgb3JcbiAgICAgKiB3aGVyZSB0aGUgdXNlciBkb2Vzbid0IHdhbnQgYSBkZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlci5cbiAgICAgKi9cbiAgICBXYXZlcy5hdHRhY2ggPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAvL0ZVVFVSRTogYXV0b21hdGljYWxseSBhZGQgd2F2ZXMgY2xhc3NlcyBhbmQgYWxsb3cgdXNlcnNcbiAgICAgICAgLy8gdG8gc3BlY2lmeSB0aGVtIHdpdGggYW4gb3B0aW9ucyBwYXJhbT8gRWcuIGxpZ2h0L2NsYXNzaWMvYnV0dG9uXG4gICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgICAgICAgRWZmZWN0LndyYXBJbnB1dChbZWxlbWVudF0pO1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHNob3dFZmZlY3QsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgIH07XG5cbiAgICB3aW5kb3cuV2F2ZXMgPSBXYXZlcztcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFdhdmVzLmRpc3BsYXlFZmZlY3QoKTtcbiAgICB9LCBmYWxzZSk7XG5cbn0pKHdpbmRvdyk7IiwiZnVuY3Rpb24gc2NhbGVWaWRlb0NvbnRhaW5lcigpe3ZhciBlPSQod2luZG93KS5oZWlnaHQoKSs1LHQ9cGFyc2VJbnQoZSkrXCJweFwiOyQoXCIuaG9tZXBhZ2UtaGVyby1tb2R1bGVcIikuY3NzKFwiaGVpZ2h0XCIsdCl9ZnVuY3Rpb24gaW5pdEJhbm5lclZpZGVvU2l6ZShlKXskKGUpLmVhY2goZnVuY3Rpb24oKXskKHRoaXMpLmRhdGEoXCJoZWlnaHRcIiwkKHRoaXMpLmhlaWdodCgpKSwkKHRoaXMpLmRhdGEoXCJ3aWR0aFwiLCQodGhpcykud2lkdGgoKSl9KSxzY2FsZUJhbm5lclZpZGVvU2l6ZShlKX1mdW5jdGlvbiBzY2FsZUJhbm5lclZpZGVvU2l6ZShlKXt2YXIgbixyLHQ9JCh3aW5kb3cpLndpZHRoKCksaT0kKHdpbmRvdykuaGVpZ2h0KCkrNTskKGUpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT0kKHRoaXMpLmRhdGEoXCJoZWlnaHRcIikvJCh0aGlzKS5kYXRhKFwid2lkdGhcIik7JCh0aGlzKS53aWR0aCh0KSwxZTM+dCYmKHI9aSxuPXIvZSwkKHRoaXMpLmNzcyh7XCJtYXJnaW4tdG9wXCI6MCxcIm1hcmdpbi1sZWZ0XCI6LShuLXQpLzIrXCJweFwifSksJCh0aGlzKS53aWR0aChuKS5oZWlnaHQocikpLCQoXCIuaG9tZXBhZ2UtaGVyby1tb2R1bGUgLnZpZGVvLWNvbnRhaW5lciB2aWRlb1wiKS5hZGRDbGFzcyhcImZhZGVJbiBhbmltYXRlZFwiKX0pfWZ1bmN0aW9uIHVwVG8oZSx0KXtmb3IodD10LnRvTG93ZXJDYXNlKCk7ZSYmZS5wYXJlbnROb2RlOylpZihlPWUucGFyZW50Tm9kZSxlLnRhZ05hbWUmJmUudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT10KXJldHVybiBlO3JldHVybiBudWxsfSFmdW5jdGlvbihlLHQsaSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKGUsdCxpKXtyZXR1cm4gc2V0VGltZW91dChjKGUsaSksdCl9ZnVuY3Rpb24gYShlLHQsaSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/KG8oZSxpW3RdLGkpLCEwKTohMX1mdW5jdGlvbiBvKGUsdCxpKXt2YXIgcjtpZihlKWlmKGUuZm9yRWFjaCllLmZvckVhY2godCxpKTtlbHNlIGlmKGUubGVuZ3RoIT09bilmb3Iocj0wO3I8ZS5sZW5ndGg7KXQuY2FsbChpLGVbcl0scixlKSxyKys7ZWxzZSBmb3IociBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJnQuY2FsbChpLGVbcl0scixlKX1mdW5jdGlvbiBzKGUsdCxpKXtmb3IodmFyIHI9T2JqZWN0LmtleXModCksYT0wO2E8ci5sZW5ndGg7KSghaXx8aSYmZVtyW2FdXT09PW4pJiYoZVtyW2FdXT10W3JbYV1dKSxhKys7cmV0dXJuIGV9ZnVuY3Rpb24gbChlLHQpe3JldHVybiBzKGUsdCwhMCl9ZnVuY3Rpb24gdShlLHQsaSl7dmFyIG4scj10LnByb3RvdHlwZTtuPWUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUociksbi5jb25zdHJ1Y3Rvcj1lLG4uX3N1cGVyPXIsaSYmcyhuLGkpfWZ1bmN0aW9uIGMoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGYoZSx0KXtyZXR1cm4gdHlwZW9mIGU9PWNlP2UuYXBwbHkodD90WzBdfHxuOm4sdCk6ZX1mdW5jdGlvbiBkKGUsdCl7cmV0dXJuIGU9PT1uP3Q6ZX1mdW5jdGlvbiBwKGUsdCxpKXtvKGcodCksZnVuY3Rpb24odCl7ZS5hZGRFdmVudExpc3RlbmVyKHQsaSwhMSl9KX1mdW5jdGlvbiBoKGUsdCxpKXtvKGcodCksZnVuY3Rpb24odCl7ZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsaSwhMSl9KX1mdW5jdGlvbiB2KGUsdCl7Zm9yKDtlOyl7aWYoZT09dClyZXR1cm4hMDtlPWUucGFyZW50Tm9kZX1yZXR1cm4hMX1mdW5jdGlvbiBtKGUsdCl7cmV0dXJuIGUuaW5kZXhPZih0KT4tMX1mdW5jdGlvbiBnKGUpe3JldHVybiBlLnRyaW0oKS5zcGxpdCgvXFxzKy9nKX1mdW5jdGlvbiB5KGUsdCxpKXtpZihlLmluZGV4T2YmJiFpKXJldHVybiBlLmluZGV4T2YodCk7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDspe2lmKGkmJmVbbl1baV09PXR8fCFpJiZlW25dPT09dClyZXR1cm4gbjtuKyt9cmV0dXJuLTF9ZnVuY3Rpb24gYihlKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSwwKX1mdW5jdGlvbiB3KGUsdCxpKXtmb3IodmFyIG49W10scj1bXSxhPTA7YTxlLmxlbmd0aDspe3ZhciBvPXQ/ZVthXVt0XTplW2FdO3kocixvKTwwJiZuLnB1c2goZVthXSksclthXT1vLGErK31yZXR1cm4gaSYmKG49dD9uLnNvcnQoZnVuY3Rpb24oZSxpKXtyZXR1cm4gZVt0XT5pW3RdfSk6bi5zb3J0KCkpLG59ZnVuY3Rpb24geChlLHQpe2Zvcih2YXIgaSxyLGE9dFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSksbz0wO288bGUubGVuZ3RoOyl7aWYoaT1sZVtvXSxyPWk/aSthOnQsciBpbiBlKXJldHVybiByO28rK31yZXR1cm4gbn1mdW5jdGlvbiBDKCl7cmV0dXJuIGhlKyt9ZnVuY3Rpb24gayhlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQ7cmV0dXJuIHQuZGVmYXVsdFZpZXd8fHQucGFyZW50V2luZG93fWZ1bmN0aW9uIFMoZSx0KXt2YXIgaT10aGlzO3RoaXMubWFuYWdlcj1lLHRoaXMuY2FsbGJhY2s9dCx0aGlzLmVsZW1lbnQ9ZS5lbGVtZW50LHRoaXMudGFyZ2V0PWUub3B0aW9ucy5pbnB1dFRhcmdldCx0aGlzLmRvbUhhbmRsZXI9ZnVuY3Rpb24odCl7ZihlLm9wdGlvbnMuZW5hYmxlLFtlXSkmJmkuaGFuZGxlcih0KX0sdGhpcy5pbml0KCl9ZnVuY3Rpb24gVChlKXt2YXIgdCxpPWUub3B0aW9ucy5pbnB1dENsYXNzO3JldHVybiBuZXcodD1pP2k6Z2U/cTp5ZT9IOm1lP1I6eikoZSxPKX1mdW5jdGlvbiBPKGUsdCxpKXt2YXIgbj1pLnBvaW50ZXJzLmxlbmd0aCxyPWkuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCxhPXQmU2UmJjA9PT1uLXIsbz10JihPZXxFZSkmJjA9PT1uLXI7aS5pc0ZpcnN0PSEhYSxpLmlzRmluYWw9ISFvLGEmJihlLnNlc3Npb249e30pLGkuZXZlbnRUeXBlPXQsRShlLGkpLGUuZW1pdChcImhhbW1lci5pbnB1dFwiLGkpLGUucmVjb2duaXplKGkpLGUuc2Vzc2lvbi5wcmV2SW5wdXQ9aX1mdW5jdGlvbiBFKGUsdCl7dmFyIGk9ZS5zZXNzaW9uLG49dC5wb2ludGVycyxyPW4ubGVuZ3RoO2kuZmlyc3RJbnB1dHx8KGkuZmlyc3RJbnB1dD0kKHQpKSxyPjEmJiFpLmZpcnN0TXVsdGlwbGU/aS5maXJzdE11bHRpcGxlPSQodCk6MT09PXImJihpLmZpcnN0TXVsdGlwbGU9ITEpO3ZhciBhPWkuZmlyc3RJbnB1dCxvPWkuZmlyc3RNdWx0aXBsZSxzPW8/by5jZW50ZXI6YS5jZW50ZXIsbD10LmNlbnRlcj1NKG4pO3QudGltZVN0YW1wPXBlKCksdC5kZWx0YVRpbWU9dC50aW1lU3RhbXAtYS50aW1lU3RhbXAsdC5hbmdsZT1fKHMsbCksdC5kaXN0YW5jZT1EKHMsbCksUChpLHQpLHQub2Zmc2V0RGlyZWN0aW9uPUkodC5kZWx0YVgsdC5kZWx0YVkpLHQuc2NhbGU9bz9qKG8ucG9pbnRlcnMsbik6MSx0LnJvdGF0aW9uPW8/TihvLnBvaW50ZXJzLG4pOjAsQShpLHQpO3ZhciB1PWUuZWxlbWVudDt2KHQuc3JjRXZlbnQudGFyZ2V0LHUpJiYodT10LnNyY0V2ZW50LnRhcmdldCksdC50YXJnZXQ9dX1mdW5jdGlvbiBQKGUsdCl7dmFyIGk9dC5jZW50ZXIsbj1lLm9mZnNldERlbHRhfHx7fSxyPWUucHJldkRlbHRhfHx7fSxhPWUucHJldklucHV0fHx7fTsodC5ldmVudFR5cGU9PT1TZXx8YS5ldmVudFR5cGU9PT1PZSkmJihyPWUucHJldkRlbHRhPXt4OmEuZGVsdGFYfHwwLHk6YS5kZWx0YVl8fDB9LG49ZS5vZmZzZXREZWx0YT17eDppLngseTppLnl9KSx0LmRlbHRhWD1yLngrKGkueC1uLngpLHQuZGVsdGFZPXIueSsoaS55LW4ueSl9ZnVuY3Rpb24gQShlLHQpe3ZhciBpLHIsYSxvLHM9ZS5sYXN0SW50ZXJ2YWx8fHQsbD10LnRpbWVTdGFtcC1zLnRpbWVTdGFtcDtpZih0LmV2ZW50VHlwZSE9RWUmJihsPmtlfHxzLnZlbG9jaXR5PT09bikpe3ZhciB1PXMuZGVsdGFYLXQuZGVsdGFYLGM9cy5kZWx0YVktdC5kZWx0YVksZj1WKGwsdSxjKTtyPWYueCxhPWYueSxpPWRlKGYueCk+ZGUoZi55KT9mLng6Zi55LG89SSh1LGMpLGUubGFzdEludGVydmFsPXR9ZWxzZSBpPXMudmVsb2NpdHkscj1zLnZlbG9jaXR5WCxhPXMudmVsb2NpdHlZLG89cy5kaXJlY3Rpb247dC52ZWxvY2l0eT1pLHQudmVsb2NpdHlYPXIsdC52ZWxvY2l0eVk9YSx0LmRpcmVjdGlvbj1vfWZ1bmN0aW9uICQoZSl7Zm9yKHZhciB0PVtdLGk9MDtpPGUucG9pbnRlcnMubGVuZ3RoOyl0W2ldPXtjbGllbnRYOmZlKGUucG9pbnRlcnNbaV0uY2xpZW50WCksY2xpZW50WTpmZShlLnBvaW50ZXJzW2ldLmNsaWVudFkpfSxpKys7cmV0dXJue3RpbWVTdGFtcDpwZSgpLHBvaW50ZXJzOnQsY2VudGVyOk0odCksZGVsdGFYOmUuZGVsdGFYLGRlbHRhWTplLmRlbHRhWX19ZnVuY3Rpb24gTShlKXt2YXIgdD1lLmxlbmd0aDtpZigxPT09dClyZXR1cm57eDpmZShlWzBdLmNsaWVudFgpLHk6ZmUoZVswXS5jbGllbnRZKX07Zm9yKHZhciBpPTAsbj0wLHI9MDt0PnI7KWkrPWVbcl0uY2xpZW50WCxuKz1lW3JdLmNsaWVudFkscisrO3JldHVybnt4OmZlKGkvdCkseTpmZShuL3QpfX1mdW5jdGlvbiBWKGUsdCxpKXtyZXR1cm57eDp0L2V8fDAseTppL2V8fDB9fWZ1bmN0aW9uIEkoZSx0KXtyZXR1cm4gZT09PXQ/UGU6ZGUoZSk+PWRlKHQpP2U+MD9BZTokZTp0PjA/TWU6VmV9ZnVuY3Rpb24gRChlLHQsaSl7aXx8KGk9TmUpO3ZhciBuPXRbaVswXV0tZVtpWzBdXSxyPXRbaVsxXV0tZVtpWzFdXTtyZXR1cm4gTWF0aC5zcXJ0KG4qbityKnIpfWZ1bmN0aW9uIF8oZSx0LGkpe2l8fChpPU5lKTt2YXIgbj10W2lbMF1dLWVbaVswXV0scj10W2lbMV1dLWVbaVsxXV07cmV0dXJuIDE4MCpNYXRoLmF0YW4yKHIsbikvTWF0aC5QSX1mdW5jdGlvbiBOKGUsdCl7cmV0dXJuIF8odFsxXSx0WzBdLGplKS1fKGVbMV0sZVswXSxqZSl9ZnVuY3Rpb24gaihlLHQpe3JldHVybiBEKHRbMF0sdFsxXSxqZSkvRChlWzBdLGVbMV0samUpfWZ1bmN0aW9uIHooKXt0aGlzLmV2RWw9cWUsdGhpcy5ldldpbj1GZSx0aGlzLmFsbG93PSEwLHRoaXMucHJlc3NlZD0hMSxTLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBxKCl7dGhpcy5ldkVsPVdlLHRoaXMuZXZXaW49UmUsUy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zdG9yZT10aGlzLm1hbmFnZXIuc2Vzc2lvbi5wb2ludGVyRXZlbnRzPVtdfWZ1bmN0aW9uIEYoKXt0aGlzLmV2VGFyZ2V0PUJlLHRoaXMuZXZXaW49WWUsdGhpcy5zdGFydGVkPSExLFMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEwoZSx0KXt2YXIgaT1iKGUudG91Y2hlcyksbj1iKGUuY2hhbmdlZFRvdWNoZXMpO3JldHVybiB0JihPZXxFZSkmJihpPXcoaS5jb25jYXQobiksXCJpZGVudGlmaWVyXCIsITApKSxbaSxuXX1mdW5jdGlvbiBIKCl7dGhpcy5ldlRhcmdldD1HZSx0aGlzLnRhcmdldElkcz17fSxTLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBXKGUsdCl7dmFyIGk9YihlLnRvdWNoZXMpLG49dGhpcy50YXJnZXRJZHM7aWYodCYoU2V8VGUpJiYxPT09aS5sZW5ndGgpcmV0dXJuIG5baVswXS5pZGVudGlmaWVyXT0hMCxbaSxpXTt2YXIgcixhLG89YihlLmNoYW5nZWRUb3VjaGVzKSxzPVtdLGw9dGhpcy50YXJnZXQ7aWYoYT1pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gdihlLnRhcmdldCxsKX0pLHQ9PT1TZSlmb3Iocj0wO3I8YS5sZW5ndGg7KW5bYVtyXS5pZGVudGlmaWVyXT0hMCxyKys7Zm9yKHI9MDtyPG8ubGVuZ3RoOyluW29bcl0uaWRlbnRpZmllcl0mJnMucHVzaChvW3JdKSx0JihPZXxFZSkmJmRlbGV0ZSBuW29bcl0uaWRlbnRpZmllcl0scisrO3JldHVybiBzLmxlbmd0aD9bdyhhLmNvbmNhdChzKSxcImlkZW50aWZpZXJcIiwhMCksc106dm9pZCAwfWZ1bmN0aW9uIFIoKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT1jKHRoaXMuaGFuZGxlcix0aGlzKTt0aGlzLnRvdWNoPW5ldyBIKHRoaXMubWFuYWdlcixlKSx0aGlzLm1vdXNlPW5ldyB6KHRoaXMubWFuYWdlcixlKX1mdW5jdGlvbiBRKGUsdCl7dGhpcy5tYW5hZ2VyPWUsdGhpcy5zZXQodCl9ZnVuY3Rpb24gQihlKXtpZihtKGUsdHQpKXJldHVybiB0dDt2YXIgdD1tKGUsaXQpLGk9bShlLG50KTtyZXR1cm4gdCYmaT9pdCtcIiBcIitudDp0fHxpP3Q/aXQ6bnQ6bShlLGV0KT9ldDpLZX1mdW5jdGlvbiBZKGUpe3RoaXMuaWQ9QygpLHRoaXMubWFuYWdlcj1udWxsLHRoaXMub3B0aW9ucz1sKGV8fHt9LHRoaXMuZGVmYXVsdHMpLHRoaXMub3B0aW9ucy5lbmFibGU9ZCh0aGlzLm9wdGlvbnMuZW5hYmxlLCEwKSx0aGlzLnN0YXRlPXJ0LHRoaXMuc2ltdWx0YW5lb3VzPXt9LHRoaXMucmVxdWlyZUZhaWw9W119ZnVuY3Rpb24gWChlKXtyZXR1cm4gZSZ1dD9cImNhbmNlbFwiOmUmc3Q/XCJlbmRcIjplJm90P1wibW92ZVwiOmUmYXQ/XCJzdGFydFwiOlwiXCJ9ZnVuY3Rpb24gRyhlKXtyZXR1cm4gZT09VmU/XCJkb3duXCI6ZT09TWU/XCJ1cFwiOmU9PUFlP1wibGVmdFwiOmU9PSRlP1wicmlnaHRcIjpcIlwifWZ1bmN0aW9uIFUoZSx0KXt2YXIgaT10Lm1hbmFnZXI7cmV0dXJuIGk/aS5nZXQoZSk6ZX1mdW5jdGlvbiBaKCl7WS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gSigpe1ouYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFg9bnVsbCx0aGlzLnBZPW51bGx9ZnVuY3Rpb24gSygpe1ouYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGVlKCl7WS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fdGltZXI9bnVsbCx0aGlzLl9pbnB1dD1udWxsfWZ1bmN0aW9uIHRlKCl7Wi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gaWUoKXtaLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBuZSgpe1kuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFRpbWU9ITEsdGhpcy5wQ2VudGVyPSExLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5faW5wdXQ9bnVsbCx0aGlzLmNvdW50PTB9ZnVuY3Rpb24gcmUoZSx0KXtyZXR1cm4gdD10fHx7fSx0LnJlY29nbml6ZXJzPWQodC5yZWNvZ25pemVycyxyZS5kZWZhdWx0cy5wcmVzZXQpLG5ldyBhZShlLHQpfWZ1bmN0aW9uIGFlKGUsdCl7dD10fHx7fSx0aGlzLm9wdGlvbnM9bCh0LHJlLmRlZmF1bHRzKSx0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQ9dGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0fHxlLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMucmVjb2duaXplcnM9W10sdGhpcy5lbGVtZW50PWUsdGhpcy5pbnB1dD1UKHRoaXMpLHRoaXMudG91Y2hBY3Rpb249bmV3IFEodGhpcyx0aGlzLm9wdGlvbnMudG91Y2hBY3Rpb24pLG9lKHRoaXMsITApLG8odC5yZWNvZ25pemVycyxmdW5jdGlvbihlKXt2YXIgdD10aGlzLmFkZChuZXcgZVswXShlWzFdKSk7ZVsyXSYmdC5yZWNvZ25pemVXaXRoKGVbMl0pLGVbM10mJnQucmVxdWlyZUZhaWx1cmUoZVszXSl9LHRoaXMpfWZ1bmN0aW9uIG9lKGUsdCl7dmFyIGk9ZS5lbGVtZW50O28oZS5vcHRpb25zLmNzc1Byb3BzLGZ1bmN0aW9uKGUsbil7aS5zdHlsZVt4KGkuc3R5bGUsbildPXQ/ZTpcIlwifSl9ZnVuY3Rpb24gc2UoZSxpKXt2YXIgbj10LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7bi5pbml0RXZlbnQoZSwhMCwhMCksbi5nZXN0dXJlPWksaS50YXJnZXQuZGlzcGF0Y2hFdmVudChuKX12YXIgbGU9W1wiXCIsXCJ3ZWJraXRcIixcIm1velwiLFwiTVNcIixcIm1zXCIsXCJvXCJdLHVlPXQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxjZT1cImZ1bmN0aW9uXCIsZmU9TWF0aC5yb3VuZCxkZT1NYXRoLmFicyxwZT1EYXRlLm5vdyxoZT0xLHZlPS9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaSxtZT1cIm9udG91Y2hzdGFydFwiaW4gZSxnZT14KGUsXCJQb2ludGVyRXZlbnRcIikhPT1uLHllPW1lJiZ2ZS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGJlPVwidG91Y2hcIix3ZT1cInBlblwiLHhlPVwibW91c2VcIixDZT1cImtpbmVjdFwiLGtlPTI1LFNlPTEsVGU9MixPZT00LEVlPTgsUGU9MSxBZT0yLCRlPTQsTWU9OCxWZT0xNixJZT1BZXwkZSxEZT1NZXxWZSxfZT1JZXxEZSxOZT1bXCJ4XCIsXCJ5XCJdLGplPVtcImNsaWVudFhcIixcImNsaWVudFlcIl07Uy5wcm90b3R5cGU9e2hhbmRsZXI6ZnVuY3Rpb24oKXt9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLmV2RWwmJnAodGhpcy5lbGVtZW50LHRoaXMuZXZFbCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZUYXJnZXQmJnAodGhpcy50YXJnZXQsdGhpcy5ldlRhcmdldCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZXaW4mJnAoayh0aGlzLmVsZW1lbnQpLHRoaXMuZXZXaW4sdGhpcy5kb21IYW5kbGVyKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZXZFbCYmaCh0aGlzLmVsZW1lbnQsdGhpcy5ldkVsLHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldlRhcmdldCYmaCh0aGlzLnRhcmdldCx0aGlzLmV2VGFyZ2V0LHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldldpbiYmaChrKHRoaXMuZWxlbWVudCksdGhpcy5ldldpbix0aGlzLmRvbUhhbmRsZXIpfX07dmFyIHplPXttb3VzZWRvd246U2UsbW91c2Vtb3ZlOlRlLG1vdXNldXA6T2V9LHFlPVwibW91c2Vkb3duXCIsRmU9XCJtb3VzZW1vdmUgbW91c2V1cFwiO3UoeixTLHtoYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXplW2UudHlwZV07dCZTZSYmMD09PWUuYnV0dG9uJiYodGhpcy5wcmVzc2VkPSEwKSx0JlRlJiYxIT09ZS53aGljaCYmKHQ9T2UpLHRoaXMucHJlc3NlZCYmdGhpcy5hbGxvdyYmKHQmT2UmJih0aGlzLnByZXNzZWQ9ITEpLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLHQse3BvaW50ZXJzOltlXSxjaGFuZ2VkUG9pbnRlcnM6W2VdLHBvaW50ZXJUeXBlOnhlLHNyY0V2ZW50OmV9KSl9fSk7dmFyIExlPXtwb2ludGVyZG93bjpTZSxwb2ludGVybW92ZTpUZSxwb2ludGVydXA6T2UscG9pbnRlcmNhbmNlbDpFZSxwb2ludGVyb3V0OkVlfSxIZT17MjpiZSwzOndlLDQ6eGUsNTpDZX0sV2U9XCJwb2ludGVyZG93blwiLFJlPVwicG9pbnRlcm1vdmUgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWxcIjtlLk1TUG9pbnRlckV2ZW50JiYoV2U9XCJNU1BvaW50ZXJEb3duXCIsUmU9XCJNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbFwiKSx1KHEsUyx7aGFuZGxlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnN0b3JlLGk9ITEsbj1lLnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwibXNcIixcIlwiKSxyPUxlW25dLGE9SGVbZS5wb2ludGVyVHlwZV18fGUucG9pbnRlclR5cGUsbz1hPT1iZSxzPXkodCxlLnBvaW50ZXJJZCxcInBvaW50ZXJJZFwiKTtyJlNlJiYoMD09PWUuYnV0dG9ufHxvKT8wPnMmJih0LnB1c2goZSkscz10Lmxlbmd0aC0xKTpyJihPZXxFZSkmJihpPSEwKSwwPnN8fCh0W3NdPWUsdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIscix7cG9pbnRlcnM6dCxjaGFuZ2VkUG9pbnRlcnM6W2VdLHBvaW50ZXJUeXBlOmEsc3JjRXZlbnQ6ZX0pLGkmJnQuc3BsaWNlKHMsMSkpfX0pO3ZhciBRZT17dG91Y2hzdGFydDpTZSx0b3VjaG1vdmU6VGUsdG91Y2hlbmQ6T2UsdG91Y2hjYW5jZWw6RWV9LEJlPVwidG91Y2hzdGFydFwiLFllPVwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIjt1KEYsUyx7aGFuZGxlcjpmdW5jdGlvbihlKXt2YXIgdD1RZVtlLnR5cGVdO2lmKHQ9PT1TZSYmKHRoaXMuc3RhcnRlZD0hMCksdGhpcy5zdGFydGVkKXt2YXIgaT1MLmNhbGwodGhpcyxlLHQpO3QmKE9lfEVlKSYmMD09PWlbMF0ubGVuZ3RoLWlbMV0ubGVuZ3RoJiYodGhpcy5zdGFydGVkPSExKSx0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlcix0LHtwb2ludGVyczppWzBdLGNoYW5nZWRQb2ludGVyczppWzFdLHBvaW50ZXJUeXBlOmJlLHNyY0V2ZW50OmV9KX19fSk7dmFyIFhlPXt0b3VjaHN0YXJ0OlNlLHRvdWNobW92ZTpUZSx0b3VjaGVuZDpPZSx0b3VjaGNhbmNlbDpFZX0sR2U9XCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiO3UoSCxTLHtoYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0PVhlW2UudHlwZV0saT1XLmNhbGwodGhpcyxlLHQpO2kmJnRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLHQse3BvaW50ZXJzOmlbMF0sY2hhbmdlZFBvaW50ZXJzOmlbMV0scG9pbnRlclR5cGU6YmUsc3JjRXZlbnQ6ZX0pfX0pLHUoUixTLHtoYW5kbGVyOmZ1bmN0aW9uKGUsdCxpKXt2YXIgbj1pLnBvaW50ZXJUeXBlPT1iZSxyPWkucG9pbnRlclR5cGU9PXhlO2lmKG4pdGhpcy5tb3VzZS5hbGxvdz0hMTtlbHNlIGlmKHImJiF0aGlzLm1vdXNlLmFsbG93KXJldHVybjt0JihPZXxFZSkmJih0aGlzLm1vdXNlLmFsbG93PSEwKSx0aGlzLmNhbGxiYWNrKGUsdCxpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudG91Y2guZGVzdHJveSgpLHRoaXMubW91c2UuZGVzdHJveSgpfX0pO3ZhciBVZT14KHVlLnN0eWxlLFwidG91Y2hBY3Rpb25cIiksWmU9VWUhPT1uLEplPVwiY29tcHV0ZVwiLEtlPVwiYXV0b1wiLGV0PVwibWFuaXB1bGF0aW9uXCIsdHQ9XCJub25lXCIsaXQ9XCJwYW4teFwiLG50PVwicGFuLXlcIjtRLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGUpe2U9PUplJiYoZT10aGlzLmNvbXB1dGUoKSksWmUmJih0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtVZV09ZSksdGhpcy5hY3Rpb25zPWUudG9Mb3dlckNhc2UoKS50cmltKCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKX0sY29tcHV0ZTpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBvKHRoaXMubWFuYWdlci5yZWNvZ25pemVycyxmdW5jdGlvbih0KXtmKHQub3B0aW9ucy5lbmFibGUsW3RdKSYmKGU9ZS5jb25jYXQodC5nZXRUb3VjaEFjdGlvbigpKSl9KSxCKGUuam9pbihcIiBcIikpfSxwcmV2ZW50RGVmYXVsdHM6ZnVuY3Rpb24oZSl7aWYoIVplKXt2YXIgdD1lLnNyY0V2ZW50LGk9ZS5vZmZzZXREaXJlY3Rpb247aWYodGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkKXJldHVybiB2b2lkIHQucHJldmVudERlZmF1bHQoKTt2YXIgbj10aGlzLmFjdGlvbnMscj1tKG4sdHQpLGE9bShuLG50KSxvPW0obixpdCk7cmV0dXJuIHJ8fGEmJmkmSWV8fG8mJmkmRGU/dGhpcy5wcmV2ZW50U3JjKHQpOnZvaWQgMH19LHByZXZlbnRTcmM6ZnVuY3Rpb24oZSl7dGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkPSEwLGUucHJldmVudERlZmF1bHQoKX19O3ZhciBydD0xLGF0PTIsb3Q9NCxzdD04LGx0PXN0LHV0PTE2LGN0PTMyO1kucHJvdG90eXBlPXtkZWZhdWx0czp7fSxzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHModGhpcy5vcHRpb25zLGUpLHRoaXMubWFuYWdlciYmdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLHRoaXN9LHJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oZSl7aWYoYShlLFwicmVjb2duaXplV2l0aFwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciB0PXRoaXMuc2ltdWx0YW5lb3VzO3JldHVybiBlPVUoZSx0aGlzKSx0W2UuaWRdfHwodFtlLmlkXT1lLGUucmVjb2duaXplV2l0aCh0aGlzKSksdGhpc30sZHJvcFJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSxcImRyb3BSZWNvZ25pemVXaXRoXCIsdGhpcyk/dGhpczooZT1VKGUsdGhpcyksZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW2UuaWRdLHRoaXMpfSxyZXF1aXJlRmFpbHVyZTpmdW5jdGlvbihlKXtpZihhKGUsXCJyZXF1aXJlRmFpbHVyZVwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciB0PXRoaXMucmVxdWlyZUZhaWw7cmV0dXJuIGU9VShlLHRoaXMpLC0xPT09eSh0LGUpJiYodC5wdXNoKGUpLGUucmVxdWlyZUZhaWx1cmUodGhpcykpLHRoaXN9LGRyb3BSZXF1aXJlRmFpbHVyZTpmdW5jdGlvbihlKXtpZihhKGUsXCJkcm9wUmVxdWlyZUZhaWx1cmVcIix0aGlzKSlyZXR1cm4gdGhpcztlPVUoZSx0aGlzKTt2YXIgdD15KHRoaXMucmVxdWlyZUZhaWwsZSk7cmV0dXJuIHQ+LTEmJnRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKHQsMSksdGhpc30saGFzUmVxdWlyZUZhaWx1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoPjB9LGNhblJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLnNpbXVsdGFuZW91c1tlLmlkXX0sZW1pdDpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe2kubWFuYWdlci5lbWl0KGkub3B0aW9ucy5ldmVudCsodD9YKG4pOlwiXCIpLGUpfXZhciBpPXRoaXMsbj10aGlzLnN0YXRlO3N0Pm4mJnQoITApLHQoKSxuPj1zdCYmdCghMCl9LHRyeUVtaXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2FuRW1pdCgpP3RoaXMuZW1pdChlKTp2b2lkKHRoaXMuc3RhdGU9Y3QpfSxjYW5FbWl0OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aDspe2lmKCEodGhpcy5yZXF1aXJlRmFpbFtlXS5zdGF0ZSYoY3R8cnQpKSlyZXR1cm4hMTtlKyt9cmV0dXJuITB9LHJlY29nbml6ZTpmdW5jdGlvbihlKXt2YXIgdD1zKHt9LGUpO3JldHVybiBmKHRoaXMub3B0aW9ucy5lbmFibGUsW3RoaXMsdF0pPyh0aGlzLnN0YXRlJihsdHx1dHxjdCkmJih0aGlzLnN0YXRlPXJ0KSx0aGlzLnN0YXRlPXRoaXMucHJvY2Vzcyh0KSx2b2lkKHRoaXMuc3RhdGUmKGF0fG90fHN0fHV0KSYmdGhpcy50cnlFbWl0KHQpKSk6KHRoaXMucmVzZXQoKSx2b2lkKHRoaXMuc3RhdGU9Y3QpKX0scHJvY2VzczpmdW5jdGlvbigpe30sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXt9LHJlc2V0OmZ1bmN0aW9uKCl7fX0sdShaLFkse2RlZmF1bHRzOntwb2ludGVyczoxfSxhdHRyVGVzdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMucG9pbnRlcnM7cmV0dXJuIDA9PT10fHxlLnBvaW50ZXJzLmxlbmd0aD09PXR9LHByb2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zdGF0ZSxpPWUuZXZlbnRUeXBlLG49dCYoYXR8b3QpLHI9dGhpcy5hdHRyVGVzdChlKTtyZXR1cm4gbiYmKGkmRWV8fCFyKT90fHV0Om58fHI/aSZPZT90fHN0OnQmYXQ/dHxvdDphdDpjdH19KSx1KEosWix7ZGVmYXVsdHM6e2V2ZW50OlwicGFuXCIsdGhyZXNob2xkOjEwLHBvaW50ZXJzOjEsZGlyZWN0aW9uOl9lfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5kaXJlY3Rpb24sdD1bXTtyZXR1cm4gZSZJZSYmdC5wdXNoKG50KSxlJkRlJiZ0LnB1c2goaXQpLHR9LGRpcmVjdGlvblRlc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zLGk9ITAsbj1lLmRpc3RhbmNlLHI9ZS5kaXJlY3Rpb24sYT1lLmRlbHRhWCxvPWUuZGVsdGFZO3JldHVybiByJnQuZGlyZWN0aW9ufHwodC5kaXJlY3Rpb24mSWU/KHI9MD09PWE/UGU6MD5hP0FlOiRlLGk9YSE9dGhpcy5wWCxuPU1hdGguYWJzKGUuZGVsdGFYKSk6KHI9MD09PW8/UGU6MD5vP01lOlZlLGk9byE9dGhpcy5wWSxuPU1hdGguYWJzKGUuZGVsdGFZKSkpLGUuZGlyZWN0aW9uPXIsaSYmbj50LnRocmVzaG9sZCYmciZ0LmRpcmVjdGlvbn0sYXR0clRlc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIFoucHJvdG90eXBlLmF0dHJUZXN0LmNhbGwodGhpcyxlKSYmKHRoaXMuc3RhdGUmYXR8fCEodGhpcy5zdGF0ZSZhdCkmJnRoaXMuZGlyZWN0aW9uVGVzdChlKSl9LGVtaXQ6ZnVuY3Rpb24oZSl7dGhpcy5wWD1lLmRlbHRhWCx0aGlzLnBZPWUuZGVsdGFZO3ZhciB0PUcoZS5kaXJlY3Rpb24pO3QmJnRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCt0LGUpLHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLGUpfX0pLHUoSyxaLHtkZWZhdWx0czp7ZXZlbnQ6XCJwaW5jaFwiLHRocmVzaG9sZDowLHBvaW50ZXJzOjJ9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW3R0XX0sYXR0clRlc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcyxlKSYmKE1hdGguYWJzKGUuc2NhbGUtMSk+dGhpcy5vcHRpb25zLnRocmVzaG9sZHx8dGhpcy5zdGF0ZSZhdCl9LGVtaXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsZSksMSE9PWUuc2NhbGUpe3ZhciB0PWUuc2NhbGU8MT9cImluXCI6XCJvdXRcIjt0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQrdCxlKX19fSksdShlZSxZLHtkZWZhdWx0czp7ZXZlbnQ6XCJwcmVzc1wiLHBvaW50ZXJzOjEsdGltZTo1MDAsdGhyZXNob2xkOjV9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW0tlXX0scHJvY2VzczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMsaT1lLnBvaW50ZXJzLmxlbmd0aD09PXQucG9pbnRlcnMsbj1lLmRpc3RhbmNlPHQudGhyZXNob2xkLGE9ZS5kZWx0YVRpbWU+dC50aW1lO2lmKHRoaXMuX2lucHV0PWUsIW58fCFpfHxlLmV2ZW50VHlwZSYoT2V8RWUpJiYhYSl0aGlzLnJlc2V0KCk7ZWxzZSBpZihlLmV2ZW50VHlwZSZTZSl0aGlzLnJlc2V0KCksdGhpcy5fdGltZXI9cihmdW5jdGlvbigpe3RoaXMuc3RhdGU9bHQsdGhpcy50cnlFbWl0KCl9LHQudGltZSx0aGlzKTtlbHNlIGlmKGUuZXZlbnRUeXBlJk9lKXJldHVybiBsdDtyZXR1cm4gY3R9LHJlc2V0OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKX0sZW1pdDpmdW5jdGlvbihlKXt0aGlzLnN0YXRlPT09bHQmJihlJiZlLmV2ZW50VHlwZSZPZT90aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQrXCJ1cFwiLGUpOih0aGlzLl9pbnB1dC50aW1lU3RhbXA9cGUoKSx0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsdGhpcy5faW5wdXQpKSl9fSksdSh0ZSxaLHtkZWZhdWx0czp7ZXZlbnQ6XCJyb3RhdGVcIix0aHJlc2hvbGQ6MCxwb2ludGVyczoyfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVyblt0dF19LGF0dHJUZXN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsZSkmJihNYXRoLmFicyhlLnJvdGF0aW9uKT50aGlzLm9wdGlvbnMudGhyZXNob2xkfHx0aGlzLnN0YXRlJmF0KX19KSx1KGllLFose2RlZmF1bHRzOntldmVudDpcInN3aXBlXCIsdGhyZXNob2xkOjEwLHZlbG9jaXR5Oi42NSxkaXJlY3Rpb246SWV8RGUscG9pbnRlcnM6MX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gSi5wcm90b3R5cGUuZ2V0VG91Y2hBY3Rpb24uY2FsbCh0aGlzKX0sYXR0clRlc3Q6ZnVuY3Rpb24oZSl7dmFyIHQsaT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uO3JldHVybiBpJihJZXxEZSk/dD1lLnZlbG9jaXR5OmkmSWU/dD1lLnZlbG9jaXR5WDppJkRlJiYodD1lLnZlbG9jaXR5WSksdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLGUpJiZpJmUuZGlyZWN0aW9uJiZlLmRpc3RhbmNlPnRoaXMub3B0aW9ucy50aHJlc2hvbGQmJmRlKHQpPnRoaXMub3B0aW9ucy52ZWxvY2l0eSYmZS5ldmVudFR5cGUmT2V9LGVtaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9RyhlLmRpcmVjdGlvbik7dCYmdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50K3QsZSksdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LGUpfX0pLHUobmUsWSx7ZGVmYXVsdHM6e2V2ZW50OlwidGFwXCIscG9pbnRlcnM6MSx0YXBzOjEsaW50ZXJ2YWw6MzAwLHRpbWU6MjUwLHRocmVzaG9sZDoyLHBvc1RocmVzaG9sZDoxMH0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bZXRdfSxwcm9jZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucyxpPWUucG9pbnRlcnMubGVuZ3RoPT09dC5wb2ludGVycyxuPWUuZGlzdGFuY2U8dC50aHJlc2hvbGQsYT1lLmRlbHRhVGltZTx0LnRpbWU7aWYodGhpcy5yZXNldCgpLGUuZXZlbnRUeXBlJlNlJiYwPT09dGhpcy5jb3VudClyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO2lmKG4mJmEmJmkpe2lmKGUuZXZlbnRUeXBlIT1PZSlyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO3ZhciBvPXRoaXMucFRpbWU/ZS50aW1lU3RhbXAtdGhpcy5wVGltZTx0LmludGVydmFsOiEwLHM9IXRoaXMucENlbnRlcnx8RCh0aGlzLnBDZW50ZXIsZS5jZW50ZXIpPHQucG9zVGhyZXNob2xkO3RoaXMucFRpbWU9ZS50aW1lU3RhbXAsdGhpcy5wQ2VudGVyPWUuY2VudGVyLHMmJm8/dGhpcy5jb3VudCs9MTp0aGlzLmNvdW50PTEsdGhpcy5faW5wdXQ9ZTt2YXIgbD10aGlzLmNvdW50JXQudGFwcztpZigwPT09bClyZXR1cm4gdGhpcy5oYXNSZXF1aXJlRmFpbHVyZXMoKT8odGhpcy5fdGltZXI9cihmdW5jdGlvbigpe3RoaXMuc3RhdGU9bHQsdGhpcy50cnlFbWl0KCl9LHQuaW50ZXJ2YWwsdGhpcyksYXQpOmx0fXJldHVybiBjdH0sZmFpbFRpbWVvdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZXI9cihmdW5jdGlvbigpe3RoaXMuc3RhdGU9Y3R9LHRoaXMub3B0aW9ucy5pbnRlcnZhbCx0aGlzKSxjdH0scmVzZXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpfSxlbWl0OmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT09bHQmJih0aGlzLl9pbnB1dC50YXBDb3VudD10aGlzLmNvdW50LHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0aGlzLl9pbnB1dCkpfX0pLHJlLlZFUlNJT049XCIyLjAuNFwiLHJlLmRlZmF1bHRzPXtkb21FdmVudHM6ITEsdG91Y2hBY3Rpb246SmUsZW5hYmxlOiEwLGlucHV0VGFyZ2V0Om51bGwsaW5wdXRDbGFzczpudWxsLHByZXNldDpbW3RlLHtlbmFibGU6ITF9XSxbSyx7ZW5hYmxlOiExfSxbXCJyb3RhdGVcIl1dLFtpZSx7ZGlyZWN0aW9uOkllfV0sW0ose2RpcmVjdGlvbjpJZX0sW1wic3dpcGVcIl1dLFtuZV0sW25lLHtldmVudDpcImRvdWJsZXRhcFwiLHRhcHM6Mn0sW1widGFwXCJdXSxbZWVdXSxjc3NQcm9wczp7dXNlclNlbGVjdDpcImRlZmF1bHRcIix0b3VjaFNlbGVjdDpcIm5vbmVcIix0b3VjaENhbGxvdXQ6XCJub25lXCIsY29udGVudFpvb21pbmc6XCJub25lXCIsdXNlckRyYWc6XCJub25lXCIsdGFwSGlnaGxpZ2h0Q29sb3I6XCJyZ2JhKDAsMCwwLDApXCJ9fTt2YXIgZnQ9MSxkdD0yO2FlLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGUpe3JldHVybiBzKHRoaXMub3B0aW9ucyxlKSxlLnRvdWNoQWN0aW9uJiZ0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGUuaW5wdXRUYXJnZXQmJih0aGlzLmlucHV0LmRlc3Ryb3koKSx0aGlzLmlucHV0LnRhcmdldD1lLmlucHV0VGFyZ2V0LHRoaXMuaW5wdXQuaW5pdCgpKSx0aGlzfSxzdG9wOmZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbi5zdG9wcGVkPWU/ZHQ6ZnR9LHJlY29nbml6ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlc3Npb247aWYoIXQuc3RvcHBlZCl7dGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoZSk7dmFyIGksbj10aGlzLnJlY29nbml6ZXJzLHI9dC5jdXJSZWNvZ25pemVyOyghcnx8ciYmci5zdGF0ZSZsdCkmJihyPXQuY3VyUmVjb2duaXplcj1udWxsKTtmb3IodmFyIGE9MDthPG4ubGVuZ3RoOylpPW5bYV0sdC5zdG9wcGVkPT09ZHR8fHImJmkhPXImJiFpLmNhblJlY29nbml6ZVdpdGgocik/aS5yZXNldCgpOmkucmVjb2duaXplKGUpLCFyJiZpLnN0YXRlJihhdHxvdHxzdCkmJihyPXQuY3VyUmVjb2duaXplcj1pKSxhKyt9fSxnZXQ6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIFkpcmV0dXJuIGU7Zm9yKHZhciB0PXRoaXMucmVjb2duaXplcnMsaT0wO2k8dC5sZW5ndGg7aSsrKWlmKHRbaV0ub3B0aW9ucy5ldmVudD09ZSlyZXR1cm4gdFtpXTtyZXR1cm4gbnVsbH0sYWRkOmZ1bmN0aW9uKGUpe2lmKGEoZSxcImFkZFwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciB0PXRoaXMuZ2V0KGUub3B0aW9ucy5ldmVudCk7cmV0dXJuIHQmJnRoaXMucmVtb3ZlKHQpLHRoaXMucmVjb2duaXplcnMucHVzaChlKSxlLm1hbmFnZXI9dGhpcyx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGV9LHJlbW92ZTpmdW5jdGlvbihlKXtpZihhKGUsXCJyZW1vdmVcIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgdD10aGlzLnJlY29nbml6ZXJzO3JldHVybiBlPXRoaXMuZ2V0KGUpLHQuc3BsaWNlKHkodCxlKSwxKSx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLHRoaXN9LG9uOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5oYW5kbGVycztyZXR1cm4gbyhnKGUpLGZ1bmN0aW9uKGUpe2lbZV09aVtlXXx8W10saVtlXS5wdXNoKHQpfSksdGhpc30sb2ZmOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5oYW5kbGVycztyZXR1cm4gbyhnKGUpLGZ1bmN0aW9uKGUpe3Q/aVtlXS5zcGxpY2UoeShpW2VdLHQpLDEpOmRlbGV0ZSBpW2VdfSksdGhpc30sZW1pdDpmdW5jdGlvbihlLHQpe3RoaXMub3B0aW9ucy5kb21FdmVudHMmJnNlKGUsdCk7dmFyIGk9dGhpcy5oYW5kbGVyc1tlXSYmdGhpcy5oYW5kbGVyc1tlXS5zbGljZSgpO2lmKGkmJmkubGVuZ3RoKXt0LnR5cGU9ZSx0LnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7dC5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpfTtmb3IodmFyIG49MDtuPGkubGVuZ3RoOylpW25dKHQpLG4rK319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJm9lKHRoaXMsITEpLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMuaW5wdXQuZGVzdHJveSgpLHRoaXMuZWxlbWVudD1udWxsfX0scyhyZSx7SU5QVVRfU1RBUlQ6U2UsSU5QVVRfTU9WRTpUZSxJTlBVVF9FTkQ6T2UsSU5QVVRfQ0FOQ0VMOkVlLFNUQVRFX1BPU1NJQkxFOnJ0LFNUQVRFX0JFR0FOOmF0LFNUQVRFX0NIQU5HRUQ6b3QsU1RBVEVfRU5ERUQ6c3QsU1RBVEVfUkVDT0dOSVpFRDpsdCxTVEFURV9DQU5DRUxMRUQ6dXQsU1RBVEVfRkFJTEVEOmN0LERJUkVDVElPTl9OT05FOlBlLERJUkVDVElPTl9MRUZUOkFlLERJUkVDVElPTl9SSUdIVDokZSxESVJFQ1RJT05fVVA6TWUsRElSRUNUSU9OX0RPV046VmUsRElSRUNUSU9OX0hPUklaT05UQUw6SWUsRElSRUNUSU9OX1ZFUlRJQ0FMOkRlLERJUkVDVElPTl9BTEw6X2UsTWFuYWdlcjphZSxJbnB1dDpTLFRvdWNoQWN0aW9uOlEsVG91Y2hJbnB1dDpILE1vdXNlSW5wdXQ6eixQb2ludGVyRXZlbnRJbnB1dDpxLFRvdWNoTW91c2VJbnB1dDpSLFNpbmdsZVRvdWNoSW5wdXQ6RixSZWNvZ25pemVyOlksQXR0clJlY29nbml6ZXI6WixUYXA6bmUsUGFuOkosU3dpcGU6aWUsUGluY2g6SyxSb3RhdGU6dGUsUHJlc3M6ZWUsb246cCxvZmY6aCxlYWNoOm8sbWVyZ2U6bCxleHRlbmQ6cyxpbmhlcml0OnUsYmluZEZuOmMscHJlZml4ZWQ6eH0pLHR5cGVvZiBkZWZpbmU9PWNlJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiByZX0pOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPXJlOmVbaV09cmV9KHdpbmRvdyxkb2N1bWVudCxcIkhhbW1lclwiKSxmdW5jdGlvbihlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiLFwiaGFtbWVyanNcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZShyZXF1aXJlKFwianF1ZXJ5XCIpLHJlcXVpcmUoXCJoYW1tZXJqc1wiKSk6ZShqUXVlcnksSGFtbWVyKX0oZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKGksbil7dmFyIHI9ZShpKTtyLmRhdGEoXCJoYW1tZXJcIil8fHIuZGF0YShcImhhbW1lclwiLG5ldyB0KHJbMF0sbikpfWUuZm4uaGFtbWVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpKHRoaXMsZSl9KX0sdC5NYW5hZ2VyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihpLG4pe3QuY2FsbCh0aGlzLGksbiksZSh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoe3R5cGU6aSxnZXN0dXJlOm59KX19KHQuTWFuYWdlci5wcm90b3R5cGUuZW1pdCl9KSxmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSl7ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe3ZhciBlPXRoaXMuY2xhc3NMaXN0O2UuY29udGFpbnMoXCJmbGlwcGVkXCIpPT09ITA/ZS5yZW1vdmUoXCJmbGlwcGVkXCIpOmUuYWRkKFwiZmxpcHBlZFwiKX0pfWZvcih2YXIgZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcmQxLmVmZmVjdF9fY2xpY2tcIiksdD0wLGk9ZS5sZW5ndGg7aT50O3QrKyl7dmFyIG49ZVt0XTtyKG4pfX0oKSxmdW5jdGlvbihlKXtlKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2UoZG9jdW1lbnQpLm9uKFwiY2xpY2suY2FyZFwiLFwiLmNhcmRcIixmdW5jdGlvbih0KXtlKHRoaXMpLmZpbmQoXCIuY2FyZC1yZXZlYWxcIikubGVuZ3RoJiYoZSh0LnRhcmdldCkuaXMoZShcIi5jYXJkLXJldmVhbCAuY2FyZC10aXRsZVwiKSl8fGUodC50YXJnZXQpLmlzKGUoXCIuY2FyZC1yZXZlYWwgLmNhcmQtdGl0bGUgaVwiKSk/ZSh0aGlzKS5maW5kKFwiLmNhcmQtcmV2ZWFsXCIpLnZlbG9jaXR5KHt0cmFuc2xhdGVZOjB9LHtkdXJhdGlvbjoyMjUscXVldWU6ITEsZWFzaW5nOlwiZWFzZUluT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZSh0aGlzKS5jc3Moe2Rpc3BsYXk6XCJub25lXCJ9KX19KTooZSh0LnRhcmdldCkuaXMoZShcIi5jYXJkIC5hY3RpdmF0b3JcIikpfHxlKHQudGFyZ2V0KS5pcyhlKFwiLmNhcmQgLmFjdGl2YXRvciBpXCIpKSkmJmUodGhpcykuZmluZChcIi5jYXJkLXJldmVhbFwiKS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wifSkudmVsb2NpdHkoXCJzdG9wXCIsITEpLnZlbG9jaXR5KHt0cmFuc2xhdGVZOlwiLTEwMCVcIn0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlSW5PdXRRdWFkXCJ9KSl9KX0pfShqUXVlcnkpLGZ1bmN0aW9uKCl7dmFyIGUsdCxpLG4scixhPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX0sbz1bXS5pbmRleE9mfHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxpPXRoaXMubGVuZ3RoO2k+dDt0KyspaWYodCBpbiB0aGlzJiZ0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX07dD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihlLHQpe3ZhciBpLG47Zm9yKGkgaW4gdCluPXRbaV0sbnVsbD09ZVtpXSYmKGVbaV09bik7cmV0dXJuIGV9LGUucHJvdG90eXBlLmlzTW9iaWxlPWZ1bmN0aW9uKGUpe3JldHVybi9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChlKX0sZS5wcm90b3R5cGUuY3JlYXRlRXZlbnQ9ZnVuY3Rpb24oZSx0LGksbil7dmFyIHI7cmV0dXJuIG51bGw9PXQmJih0PSExKSxudWxsPT1pJiYoaT0hMSksbnVsbD09biYmKG49bnVsbCksbnVsbCE9ZG9jdW1lbnQuY3JlYXRlRXZlbnQ/KHI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKSxyLmluaXRDdXN0b21FdmVudChlLHQsaSxuKSk6bnVsbCE9ZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3Q/KHI9ZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKSxyLmV2ZW50VHlwZT1lKTpyLmV2ZW50TmFtZT1lLHJ9LGUucHJvdG90eXBlLmVtaXRFdmVudD1mdW5jdGlvbihlLHQpe3JldHVybiBudWxsIT1lLmRpc3BhdGNoRXZlbnQ/ZS5kaXNwYXRjaEV2ZW50KHQpOnQgaW4obnVsbCE9ZSk/ZVt0XSgpOlwib25cIit0IGluKG51bGwhPWUpP2VbXCJvblwiK3RdKCk6dm9pZCAwfSxlLnByb3RvdHlwZS5hZGRFdmVudD1mdW5jdGlvbihlLHQsaSl7cmV0dXJuIG51bGwhPWUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIodCxpLCExKTpudWxsIT1lLmF0dGFjaEV2ZW50P2UuYXR0YWNoRXZlbnQoXCJvblwiK3QsaSk6ZVt0XT1pfSxlLnByb3RvdHlwZS5yZW1vdmVFdmVudD1mdW5jdGlvbihlLHQsaSl7cmV0dXJuIG51bGwhPWUucmVtb3ZlRXZlbnRMaXN0ZW5lcj9lLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxpLCExKTpudWxsIT1lLmRldGFjaEV2ZW50P2UuZGV0YWNoRXZlbnQoXCJvblwiK3QsaSk6ZGVsZXRlIGVbdF19LGUucHJvdG90eXBlLmlubmVySGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuXCJpbm5lckhlaWdodFwiaW4gd2luZG93P3dpbmRvdy5pbm5lckhlaWdodDpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0fSxlfSgpLGk9dGhpcy5XZWFrTWFwfHx0aGlzLk1veldlYWtNYXB8fChpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMua2V5cz1bXSx0aGlzLnZhbHVlcz1bXX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciB0LGksbixyLGE7Zm9yKGE9dGhpcy5rZXlzLHQ9bj0wLHI9YS5sZW5ndGg7cj5uO3Q9KytuKWlmKGk9YVt0XSxpPT09ZSlyZXR1cm4gdGhpcy52YWx1ZXNbdF19LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciBpLG4scixhLG87Zm9yKG89dGhpcy5rZXlzLGk9cj0wLGE9by5sZW5ndGg7YT5yO2k9KytyKWlmKG49b1tpXSxuPT09ZSlyZXR1cm4gdm9pZCh0aGlzLnZhbHVlc1tpXT10KTtyZXR1cm4gdGhpcy5rZXlzLnB1c2goZSksdGhpcy52YWx1ZXMucHVzaCh0KX0sZX0oKSksZT10aGlzLk11dGF0aW9uT2JzZXJ2ZXJ8fHRoaXMuV2Via2l0TXV0YXRpb25PYnNlcnZlcnx8dGhpcy5Nb3pNdXRhdGlvbk9ic2VydmVyfHwoZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZSYmbnVsbCE9PWNvbnNvbGUmJmNvbnNvbGUud2FybihcIk11dGF0aW9uT2JzZXJ2ZXIgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZudWxsIT09Y29uc29sZSYmY29uc29sZS53YXJuKFwiV09XLmpzIGNhbm5vdCBkZXRlY3QgZG9tIG11dGF0aW9ucywgcGxlYXNlIGNhbGwgLnN5bmMoKSBhZnRlciBsb2FkaW5nIG5ldyBjb250ZW50LlwiKX1yZXR1cm4gZS5ub3RTdXBwb3J0ZWQ9ITAsZS5wcm90b3R5cGUub2JzZXJ2ZT1mdW5jdGlvbigpe30sZX0oKSksbj10aGlzLmdldENvbXB1dGVkU3R5bGV8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZT1mdW5jdGlvbih0KXt2YXIgaTtyZXR1cm5cImZsb2F0XCI9PT10JiYodD1cInN0eWxlRmxvYXRcIiksci50ZXN0KHQpJiZ0LnJlcGxhY2UocixmdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KSwobnVsbCE9KGk9ZS5jdXJyZW50U3R5bGUpP2lbdF06dm9pZCAwKXx8bnVsbH0sdGhpc30scj0vKFxcLShbYS16XSl7MX0pL2csdGhpcy5XT1c9ZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUpe251bGw9PWUmJihlPXt9KSx0aGlzLnNjcm9sbENhbGxiYWNrPWEodGhpcy5zY3JvbGxDYWxsYmFjayx0aGlzKSx0aGlzLnNjcm9sbEhhbmRsZXI9YSh0aGlzLnNjcm9sbEhhbmRsZXIsdGhpcyksdGhpcy5yZXNldEFuaW1hdGlvbj1hKHRoaXMucmVzZXRBbmltYXRpb24sdGhpcyksdGhpcy5zdGFydD1hKHRoaXMuc3RhcnQsdGhpcyksdGhpcy5zY3JvbGxlZD0hMCx0aGlzLmNvbmZpZz10aGlzLnV0aWwoKS5leHRlbmQoZSx0aGlzLmRlZmF1bHRzKSxudWxsIT1lLnNjcm9sbENvbnRhaW5lciYmKHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUuc2Nyb2xsQ29udGFpbmVyKSksdGhpcy5hbmltYXRpb25OYW1lQ2FjaGU9bmV3IGksdGhpcy53b3dFdmVudD10aGlzLnV0aWwoKS5jcmVhdGVFdmVudCh0aGlzLmNvbmZpZy5ib3hDbGFzcyl9cmV0dXJuIHIucHJvdG90eXBlLmRlZmF1bHRzPXtib3hDbGFzczpcIndvd1wiLGFuaW1hdGVDbGFzczpcImFuaW1hdGVkXCIsb2Zmc2V0OjAsbW9iaWxlOiEwLGxpdmU6ITAsY2FsbGJhY2s6bnVsbCxzY3JvbGxDb250YWluZXI6bnVsbH0sci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBlO3JldHVybiB0aGlzLmVsZW1lbnQ9d2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcImludGVyYWN0aXZlXCI9PT0oZT1kb2N1bWVudC5yZWFkeVN0YXRlKXx8XCJjb21wbGV0ZVwiPT09ZT90aGlzLnN0YXJ0KCk6dGhpcy51dGlsKCkuYWRkRXZlbnQoZG9jdW1lbnQsXCJET01Db250ZW50TG9hZGVkXCIsdGhpcy5zdGFydCksdGhpcy5maW5pc2hlZD1bXX0sci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt2YXIgdCxpLG4scjtpZih0aGlzLnN0b3BwZWQ9ITEsdGhpcy5ib3hlcz1mdW5jdGlvbigpe3ZhciBlLGksbixyO2ZvcihuPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiK3RoaXMuY29uZmlnLmJveENsYXNzKSxyPVtdLGU9MCxpPW4ubGVuZ3RoO2k+ZTtlKyspdD1uW2VdLHIucHVzaCh0KTtyZXR1cm4gcn0uY2FsbCh0aGlzKSx0aGlzLmFsbD1mdW5jdGlvbigpe3ZhciBlLGksbixyO2ZvcihuPXRoaXMuYm94ZXMscj1bXSxlPTAsaT1uLmxlbmd0aDtpPmU7ZSsrKXQ9bltlXSxyLnB1c2godCk7cmV0dXJuIHJ9LmNhbGwodGhpcyksdGhpcy5ib3hlcy5sZW5ndGgpaWYodGhpcy5kaXNhYmxlZCgpKXRoaXMucmVzZXRTdHlsZSgpO2Vsc2UgZm9yKHI9dGhpcy5ib3hlcyxpPTAsbj1yLmxlbmd0aDtuPmk7aSsrKXQ9cltpXSx0aGlzLmFwcGx5U3R5bGUodCwhMCk7cmV0dXJuIHRoaXMuZGlzYWJsZWQoKXx8KHRoaXMudXRpbCgpLmFkZEV2ZW50KHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lcnx8d2luZG93LFwic2Nyb2xsXCIsdGhpcy5zY3JvbGxIYW5kbGVyKSx0aGlzLnV0aWwoKS5hZGRFdmVudCh3aW5kb3csXCJyZXNpemVcIix0aGlzLnNjcm9sbEhhbmRsZXIpLHRoaXMuaW50ZXJ2YWw9c2V0SW50ZXJ2YWwodGhpcy5zY3JvbGxDYWxsYmFjayw1MCkpLHRoaXMuY29uZmlnLmxpdmU/bmV3IGUoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBpLG4scixhLG87Zm9yKG89W10saT0wLG49dC5sZW5ndGg7bj5pO2krKylhPXRbaV0sby5wdXNoKGZ1bmN0aW9uKCl7dmFyIGUsdCxpLG47Zm9yKGk9YS5hZGRlZE5vZGVzfHxbXSxuPVtdLGU9MCx0PWkubGVuZ3RoO3Q+ZTtlKyspcj1pW2VdLG4ucHVzaCh0aGlzLmRvU3luYyhyKSk7cmV0dXJuIG59LmNhbGwoZSkpO3JldHVybiBvfX0odGhpcykpLm9ic2VydmUoZG9jdW1lbnQuYm9keSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KTp2b2lkIDB9LHIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9wcGVkPSEwLHRoaXMudXRpbCgpLnJlbW92ZUV2ZW50KHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lcnx8d2luZG93LFwic2Nyb2xsXCIsdGhpcy5zY3JvbGxIYW5kbGVyKSx0aGlzLnV0aWwoKS5yZW1vdmVFdmVudCh3aW5kb3csXCJyZXNpemVcIix0aGlzLnNjcm9sbEhhbmRsZXIpLG51bGwhPXRoaXMuaW50ZXJ2YWw/Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTp2b2lkIDB9LHIucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIGUubm90U3VwcG9ydGVkP3RoaXMuZG9TeW5jKHRoaXMuZWxlbWVudCk6dm9pZCAwfSxyLnByb3RvdHlwZS5kb1N5bmM9ZnVuY3Rpb24oZSl7dmFyIHQsaSxuLHIsYTtpZihudWxsPT1lJiYoZT10aGlzLmVsZW1lbnQpLDE9PT1lLm5vZGVUeXBlKXtmb3IoZT1lLnBhcmVudE5vZGV8fGUscj1lLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIrdGhpcy5jb25maWcuYm94Q2xhc3MpLGE9W10saT0wLG49ci5sZW5ndGg7bj5pO2krKyl0PXJbaV0sby5jYWxsKHRoaXMuYWxsLHQpPDA/KHRoaXMuYm94ZXMucHVzaCh0KSx0aGlzLmFsbC5wdXNoKHQpLHRoaXMuc3RvcHBlZHx8dGhpcy5kaXNhYmxlZCgpP3RoaXMucmVzZXRTdHlsZSgpOnRoaXMuYXBwbHlTdHlsZSh0LCEwKSxhLnB1c2godGhpcy5zY3JvbGxlZD0hMCkpOmEucHVzaCh2b2lkIDApO3JldHVybiBhfX0sci5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hcHBseVN0eWxlKGUpLGUuY2xhc3NOYW1lPWUuY2xhc3NOYW1lK1wiIFwiK3RoaXMuY29uZmlnLmFuaW1hdGVDbGFzcyxudWxsIT10aGlzLmNvbmZpZy5jYWxsYmFjayYmdGhpcy5jb25maWcuY2FsbGJhY2soZSksdGhpcy51dGlsKCkuZW1pdEV2ZW50KGUsdGhpcy53b3dFdmVudCksdGhpcy51dGlsKCkuYWRkRXZlbnQoZSxcImFuaW1hdGlvbmVuZFwiLHRoaXMucmVzZXRBbmltYXRpb24pLHRoaXMudXRpbCgpLmFkZEV2ZW50KGUsXCJvYW5pbWF0aW9uZW5kXCIsdGhpcy5yZXNldEFuaW1hdGlvbiksdGhpcy51dGlsKCkuYWRkRXZlbnQoZSxcIndlYmtpdEFuaW1hdGlvbkVuZFwiLHRoaXMucmVzZXRBbmltYXRpb24pLHRoaXMudXRpbCgpLmFkZEV2ZW50KGUsXCJNU0FuaW1hdGlvbkVuZFwiLHRoaXMucmVzZXRBbmltYXRpb24pLGV9LHIucHJvdG90eXBlLmFwcGx5U3R5bGU9ZnVuY3Rpb24oZSx0KXt2YXIgaSxuLHI7cmV0dXJuIG49ZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdvdy1kdXJhdGlvblwiKSxpPWUuZ2V0QXR0cmlidXRlKFwiZGF0YS13b3ctZGVsYXlcIikscj1lLmdldEF0dHJpYnV0ZShcImRhdGEtd293LWl0ZXJhdGlvblwiKSx0aGlzLmFuaW1hdGUoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuY3VzdG9tU3R5bGUoZSx0LG4saSxyKX19KHRoaXMpKX0sci5wcm90b3R5cGUuYW5pbWF0ZT1mdW5jdGlvbigpe3JldHVyblwicmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJpbiB3aW5kb3c/ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBlKCl9fSgpLHIucHJvdG90eXBlLnJlc2V0U3R5bGU9ZnVuY3Rpb24oKXt2YXIgZSx0LGksbixyO2ZvcihuPXRoaXMuYm94ZXMscj1bXSx0PTAsaT1uLmxlbmd0aDtpPnQ7dCsrKWU9blt0XSxyLnB1c2goZS5zdHlsZS52aXNpYmlsaXR5PVwidmlzaWJsZVwiKTtyZXR1cm4gcn0sci5wcm90b3R5cGUucmVzZXRBbmltYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUudHlwZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJhbmltYXRpb25lbmRcIik+PTA/KHQ9ZS50YXJnZXR8fGUuc3JjRWxlbWVudCx0LmNsYXNzTmFtZT10LmNsYXNzTmFtZS5yZXBsYWNlKHRoaXMuY29uZmlnLmFuaW1hdGVDbGFzcyxcIlwiKS50cmltKCkpOnZvaWQgMH0sci5wcm90b3R5cGUuY3VzdG9tU3R5bGU9ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4gdCYmdGhpcy5jYWNoZUFuaW1hdGlvbk5hbWUoZSksZS5zdHlsZS52aXNpYmlsaXR5PXQ/XCJoaWRkZW5cIjpcInZpc2libGVcIixpJiZ0aGlzLnZlbmRvclNldChlLnN0eWxlLHthbmltYXRpb25EdXJhdGlvbjppfSksbiYmdGhpcy52ZW5kb3JTZXQoZS5zdHlsZSx7YW5pbWF0aW9uRGVsYXk6bn0pLHImJnRoaXMudmVuZG9yU2V0KGUuc3R5bGUse2FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OnJ9KSx0aGlzLnZlbmRvclNldChlLnN0eWxlLHthbmltYXRpb25OYW1lOnQ/XCJub25lXCI6dGhpcy5jYWNoZWRBbmltYXRpb25OYW1lKGUpfSksZX0sci5wcm90b3R5cGUudmVuZG9ycz1bXCJtb3pcIixcIndlYmtpdFwiXSxyLnByb3RvdHlwZS52ZW5kb3JTZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgaSxuLHIsYTtuPVtdO2ZvcihpIGluIHQpcj10W2ldLGVbXCJcIitpXT1yLG4ucHVzaChmdW5jdGlvbigpe3ZhciB0LG4sbyxzO2ZvcihvPXRoaXMudmVuZG9ycyxzPVtdLHQ9MCxuPW8ubGVuZ3RoO24+dDt0KyspYT1vW3RdLHMucHVzaChlW1wiXCIrYStpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2kuc3Vic3RyKDEpXT1yKTtyZXR1cm4gc30uY2FsbCh0aGlzKSk7cmV0dXJuIG59LHIucHJvdG90eXBlLnZlbmRvckNTUz1mdW5jdGlvbihlLHQpe3ZhciBpLHIsYSxvLHMsbDtmb3Iocz1uKGUpLG89cy5nZXRQcm9wZXJ0eUNTU1ZhbHVlKHQpLGE9dGhpcy52ZW5kb3JzLGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspbD1hW2ldLG89b3x8cy5nZXRQcm9wZXJ0eUNTU1ZhbHVlKFwiLVwiK2wrXCItXCIrdCk7cmV0dXJuIG99LHIucHJvdG90eXBlLmFuaW1hdGlvbk5hbWU9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9dGhpcy52ZW5kb3JDU1MoZSxcImFuaW1hdGlvbi1uYW1lXCIpLmNzc1RleHR9Y2F0Y2goaSl7dD1uKGUpLmdldFByb3BlcnR5VmFsdWUoXCJhbmltYXRpb24tbmFtZVwiKX1yZXR1cm5cIm5vbmVcIj09PXQ/XCJcIjp0fSxyLnByb3RvdHlwZS5jYWNoZUFuaW1hdGlvbk5hbWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLnNldChlLHRoaXMuYW5pbWF0aW9uTmFtZShlKSl9LHIucHJvdG90eXBlLmNhY2hlZEFuaW1hdGlvbk5hbWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLmdldChlKX0sci5wcm90b3R5cGUuc2Nyb2xsSGFuZGxlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbGVkPSEwfSxyLnByb3RvdHlwZS5zY3JvbGxDYWxsYmFjaz1mdW5jdGlvbigpe3ZhciBlO3JldHVybiF0aGlzLnNjcm9sbGVkfHwodGhpcy5zY3JvbGxlZD0hMSx0aGlzLmJveGVzPWZ1bmN0aW9uKCl7dmFyIHQsaSxuLHI7Zm9yKG49dGhpcy5ib3hlcyxyPVtdLHQ9MCxpPW4ubGVuZ3RoO2k+dDt0KyspZT1uW3RdLGUmJih0aGlzLmlzVmlzaWJsZShlKT90aGlzLnNob3coZSk6ci5wdXNoKGUpKTtyZXR1cm4gcn0uY2FsbCh0aGlzKSx0aGlzLmJveGVzLmxlbmd0aHx8dGhpcy5jb25maWcubGl2ZSk/dm9pZCAwOnRoaXMuc3RvcCgpfSxyLnByb3RvdHlwZS5vZmZzZXRUb3A9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0O3ZvaWQgMD09PWUub2Zmc2V0VG9wOyllPWUucGFyZW50Tm9kZTtmb3IodD1lLm9mZnNldFRvcDtlPWUub2Zmc2V0UGFyZW50Oyl0Kz1lLm9mZnNldFRvcDtyZXR1cm4gdH0sci5wcm90b3R5cGUuaXNWaXNpYmxlPWZ1bmN0aW9uKGUpe3ZhciB0LGksbixyLGE7cmV0dXJuIGk9ZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdvdy1vZmZzZXRcIil8fHRoaXMuY29uZmlnLm9mZnNldCxhPXRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciYmdGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcHx8d2luZG93LnBhZ2VZT2Zmc2V0LHI9YStNYXRoLm1pbih0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0LHRoaXMudXRpbCgpLmlubmVySGVpZ2h0KCkpLWksbj10aGlzLm9mZnNldFRvcChlKSx0PW4rZS5jbGllbnRIZWlnaHQscj49biYmdD49YX0sci5wcm90b3R5cGUudXRpbD1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLl91dGlsP3RoaXMuX3V0aWw6dGhpcy5fdXRpbD1uZXcgdH0sci5wcm90b3R5cGUuZGlzYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5jb25maWcubW9iaWxlJiZ0aGlzLnV0aWwoKS5pc01vYmlsZShuYXZpZ2F0b3IudXNlckFnZW50KX0scn0oKX0uY2FsbCh0aGlzKSwkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe3NjYWxlVmlkZW9Db250YWluZXIoKSxpbml0QmFubmVyVmlkZW9TaXplKFwiLnZpZGVvLWNvbnRhaW5lciAucG9zdGVyIGltZ1wiKSxpbml0QmFubmVyVmlkZW9TaXplKFwiLnZpZGVvLWNvbnRhaW5lciAuZmlsdGVyXCIpLGluaXRCYW5uZXJWaWRlb1NpemUoXCIudmlkZW8tY29udGFpbmVyIHZpZGVvXCIpLCQod2luZG93KS5vbihcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7c2NhbGVWaWRlb0NvbnRhaW5lcigpLHNjYWxlQmFubmVyVmlkZW9TaXplKFwiLnZpZGVvLWNvbnRhaW5lciAucG9zdGVyIGltZ1wiKSxzY2FsZUJhbm5lclZpZGVvU2l6ZShcIi52aWRlby1jb250YWluZXIgLmZpbHRlclwiKSxzY2FsZUJhbm5lclZpZGVvU2l6ZShcIi52aWRlby1jb250YWluZXIgdmlkZW9cIil9KX0pLGZ1bmN0aW9uKCl7JChcIi5oYW1idXJnZXItbWVudVwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXskKHRoaXMpLnRvZ2dsZUNsYXNzKFwiYW5pbWF0ZVwiKSwkKFwiLmJhclwiKS50b2dnbGVDbGFzcyhcImFuaW1hdGVcIil9KX0oKSxmdW5jdGlvbihlKXtlKFtcImpxdWVyeVwiXSxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiBzKGUsdCxpKXtyZXR1cm4gdyh7dHlwZTpyLmVycm9yLGljb25DbGFzczp4KCkuaWNvbkNsYXNzZXMuZXJyb3IsbWVzc2FnZTplLG9wdGlvbnNPdmVycmlkZTppLHRpdGxlOnR9KX1mdW5jdGlvbiBsKGksbil7cmV0dXJuIGl8fChpPXgoKSksdD1lKFwiI1wiK2kuY29udGFpbmVySWQpLHQubGVuZ3RoP3Q6KG4mJih0PWcoaSkpLHQpfWZ1bmN0aW9uIHUoZSx0LGkpe3JldHVybiB3KHt0eXBlOnIuaW5mbyxpY29uQ2xhc3M6eCgpLmljb25DbGFzc2VzLmluZm8sbWVzc2FnZTplLG9wdGlvbnNPdmVycmlkZTppLHRpdGxlOnR9KX1mdW5jdGlvbiBjKGUpe2k9ZX1mdW5jdGlvbiBmKGUsdCxpKXtyZXR1cm4gdyh7dHlwZTpyLnN1Y2Nlc3MsaWNvbkNsYXNzOngoKS5pY29uQ2xhc3Nlcy5zdWNjZXNzLG1lc3NhZ2U6ZSxvcHRpb25zT3ZlcnJpZGU6aSx0aXRsZTp0fSl9ZnVuY3Rpb24gZChlLHQsaSl7cmV0dXJuIHcoe3R5cGU6ci53YXJuaW5nLGljb25DbGFzczp4KCkuaWNvbkNsYXNzZXMud2FybmluZyxtZXNzYWdlOmUsb3B0aW9uc092ZXJyaWRlOmksdGl0bGU6dH0pfWZ1bmN0aW9uIHAoZSxpKXt2YXIgbj14KCk7dHx8bChuKSxtKGUsbixpKXx8dihuKX1mdW5jdGlvbiBoKGkpe3ZhciBuPXgoKTtyZXR1cm4gdHx8bChuKSxpJiYwPT09ZShcIjpmb2N1c1wiLGkpLmxlbmd0aD92b2lkIEMoaSk6dm9pZCh0LmNoaWxkcmVuKCkubGVuZ3RoJiZ0LnJlbW92ZSgpKX1mdW5jdGlvbiB2KGkpe2Zvcih2YXIgbj10LmNoaWxkcmVuKCkscj1uLmxlbmd0aC0xO3I+PTA7ci0tKW0oZShuW3JdKSxpKX1mdW5jdGlvbiBtKHQsaSxuKXt2YXIgcj1uJiZuLmZvcmNlP24uZm9yY2U6ITE7cmV0dXJuIHQmJihyfHwwPT09ZShcIjpmb2N1c1wiLHQpLmxlbmd0aCk/KHRbaS5oaWRlTWV0aG9kXSh7ZHVyYXRpb246aS5oaWRlRHVyYXRpb24sZWFzaW5nOmkuaGlkZUVhc2luZyxjb21wbGV0ZTpmdW5jdGlvbigpe0ModCl9fSksITApOiExfWZ1bmN0aW9uIGcoaSl7cmV0dXJuIHQ9ZShcIjxkaXYvPlwiKS5hdHRyKFwiaWRcIixpLmNvbnRhaW5lcklkKS5hZGRDbGFzcyhpLnBvc2l0aW9uQ2xhc3MpLmF0dHIoXCJhcmlhLWxpdmVcIixcInBvbGl0ZVwiKS5hdHRyKFwicm9sZVwiLFwiYWxlcnRcIiksdC5hcHBlbmRUbyhlKGkudGFyZ2V0KSksdH1mdW5jdGlvbiB5KCl7cmV0dXJue3RhcFRvRGlzbWlzczohMCx0b2FzdENsYXNzOlwidG9hc3RcIixjb250YWluZXJJZDpcInRvYXN0LWNvbnRhaW5lclwiLGRlYnVnOiExLHNob3dNZXRob2Q6XCJmYWRlSW5cIixzaG93RHVyYXRpb246MzAwLHNob3dFYXNpbmc6XCJzd2luZ1wiLG9uU2hvd246dm9pZCAwLGhpZGVNZXRob2Q6XCJmYWRlT3V0XCIsaGlkZUR1cmF0aW9uOjFlMyxoaWRlRWFzaW5nOlwic3dpbmdcIixvbkhpZGRlbjp2b2lkIDAsY2xvc2VNZXRob2Q6ITEsY2xvc2VEdXJhdGlvbjohMSxjbG9zZUVhc2luZzohMSxleHRlbmRlZFRpbWVPdXQ6MWUzLGljb25DbGFzc2VzOntlcnJvcjpcInRvYXN0LWVycm9yXCIsaW5mbzpcInRvYXN0LWluZm9cIixzdWNjZXNzOlwidG9hc3Qtc3VjY2Vzc1wiLHdhcm5pbmc6XCJ0b2FzdC13YXJuaW5nXCJ9LGljb25DbGFzczpcInRvYXN0LWluZm9cIixwb3NpdGlvbkNsYXNzOlwidG9hc3QtdG9wLXJpZ2h0XCIsdGltZU91dDo1ZTMsdGl0bGVDbGFzczpcInRvYXN0LXRpdGxlXCIsbWVzc2FnZUNsYXNzOlwidG9hc3QtbWVzc2FnZVwiLGVzY2FwZUh0bWw6ITEsdGFyZ2V0OlwiYm9keVwiLGNsb3NlSHRtbDonPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCI+JnRpbWVzOzwvYnV0dG9uPicsbmV3ZXN0T25Ub3A6ITAscHJldmVudER1cGxpY2F0ZXM6ITEscHJvZ3Jlc3NCYXI6ITF9fWZ1bmN0aW9uIGIoZSl7aSYmaShlKX1mdW5jdGlvbiB3KGkpe2Z1bmN0aW9uIG0oZSl7cmV0dXJuIG51bGw9PWUmJihlPVwiXCIpLG5ldyBTdHJpbmcoZSkucmVwbGFjZSgvJi9nLFwiJmFtcDtcIikucmVwbGFjZSgvXCIvZyxcIiZxdW90O1wiKS5yZXBsYWNlKC8nL2csXCImIzM5O1wiKS5yZXBsYWNlKC88L2csXCImbHQ7XCIpLnJlcGxhY2UoLz4vZyxcIiZndDtcIil9ZnVuY3Rpb24gZygpe2soKSxUKCksTygpLEUoKSxQKCksUygpfWZ1bmN0aW9uIHkoKXt1LmhvdmVyKFYsTSksIXIub25jbGljayYmci50YXBUb0Rpc21pc3MmJnUuY2xpY2soJCksci5jbG9zZUJ1dHRvbiYmcCYmcC5jbGljayhmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbj9lLnN0b3BQcm9wYWdhdGlvbigpOnZvaWQgMCE9PWUuY2FuY2VsQnViYmxlJiZlLmNhbmNlbEJ1YmJsZSE9PSEwJiYoZS5jYW5jZWxCdWJibGU9ITApLCQoITApfSksci5vbmNsaWNrJiZ1LmNsaWNrKGZ1bmN0aW9uKGUpe3Iub25jbGljayhlKSwkKCl9KX1mdW5jdGlvbiB3KCl7dS5oaWRlKCksdVtyLnNob3dNZXRob2RdKHtkdXJhdGlvbjpyLnNob3dEdXJhdGlvbixlYXNpbmc6ci5zaG93RWFzaW5nLGNvbXBsZXRlOnIub25TaG93bn0pLHIudGltZU91dD4wJiYocz1zZXRUaW1lb3V0KCQsci50aW1lT3V0KSxoLm1heEhpZGVUaW1lPXBhcnNlRmxvYXQoci50aW1lT3V0KSxoLmhpZGVFdGE9KG5ldyBEYXRlKS5nZXRUaW1lKCkraC5tYXhIaWRlVGltZSxyLnByb2dyZXNzQmFyJiYoaC5pbnRlcnZhbElkPXNldEludGVydmFsKEksMTApKSl9ZnVuY3Rpb24gaygpe2kuaWNvbkNsYXNzJiZ1LmFkZENsYXNzKHIudG9hc3RDbGFzcykuYWRkQ2xhc3MoYSl9ZnVuY3Rpb24gUygpe3IubmV3ZXN0T25Ub3A/dC5wcmVwZW5kKHUpOnQuYXBwZW5kKHUpfWZ1bmN0aW9uIFQoKXtpLnRpdGxlJiYoYy5hcHBlbmQoci5lc2NhcGVIdG1sP20oaS50aXRsZSk6aS50aXRsZSkuYWRkQ2xhc3Moci50aXRsZUNsYXNzKSx1LmFwcGVuZChjKSl9ZnVuY3Rpb24gTygpe1xuaS5tZXNzYWdlJiYoZi5hcHBlbmQoci5lc2NhcGVIdG1sP20oaS5tZXNzYWdlKTppLm1lc3NhZ2UpLmFkZENsYXNzKHIubWVzc2FnZUNsYXNzKSx1LmFwcGVuZChmKSl9ZnVuY3Rpb24gRSgpe3IuY2xvc2VCdXR0b24mJihwLmFkZENsYXNzKFwidG9hc3QtY2xvc2UtYnV0dG9uXCIpLmF0dHIoXCJyb2xlXCIsXCJidXR0b25cIiksdS5wcmVwZW5kKHApKX1mdW5jdGlvbiBQKCl7ci5wcm9ncmVzc0JhciYmKGQuYWRkQ2xhc3MoXCJ0b2FzdC1wcm9ncmVzc1wiKSx1LnByZXBlbmQoZCkpfWZ1bmN0aW9uIEEoZSx0KXtpZihlLnByZXZlbnREdXBsaWNhdGVzKXtpZih0Lm1lc3NhZ2U9PT1vKXJldHVybiEwO289dC5tZXNzYWdlfXJldHVybiExfWZ1bmN0aW9uICQodCl7dmFyIGk9dCYmci5jbG9zZU1ldGhvZCE9PSExP3IuY2xvc2VNZXRob2Q6ci5oaWRlTWV0aG9kLG49dCYmci5jbG9zZUR1cmF0aW9uIT09ITE/ci5jbG9zZUR1cmF0aW9uOnIuaGlkZUR1cmF0aW9uLGE9dCYmci5jbG9zZUVhc2luZyE9PSExP3IuY2xvc2VFYXNpbmc6ci5oaWRlRWFzaW5nO3JldHVybiFlKFwiOmZvY3VzXCIsdSkubGVuZ3RofHx0PyhjbGVhclRpbWVvdXQoaC5pbnRlcnZhbElkKSx1W2ldKHtkdXJhdGlvbjpuLGVhc2luZzphLGNvbXBsZXRlOmZ1bmN0aW9uKCl7Qyh1KSxyLm9uSGlkZGVuJiZcImhpZGRlblwiIT09di5zdGF0ZSYmci5vbkhpZGRlbigpLHYuc3RhdGU9XCJoaWRkZW5cIix2LmVuZFRpbWU9bmV3IERhdGUsYih2KX19KSk6dm9pZCAwfWZ1bmN0aW9uIE0oKXsoci50aW1lT3V0PjB8fHIuZXh0ZW5kZWRUaW1lT3V0PjApJiYocz1zZXRUaW1lb3V0KCQsci5leHRlbmRlZFRpbWVPdXQpLGgubWF4SGlkZVRpbWU9cGFyc2VGbG9hdChyLmV4dGVuZGVkVGltZU91dCksaC5oaWRlRXRhPShuZXcgRGF0ZSkuZ2V0VGltZSgpK2gubWF4SGlkZVRpbWUpfWZ1bmN0aW9uIFYoKXtjbGVhclRpbWVvdXQocyksaC5oaWRlRXRhPTAsdS5zdG9wKCEwLCEwKVtyLnNob3dNZXRob2RdKHtkdXJhdGlvbjpyLnNob3dEdXJhdGlvbixlYXNpbmc6ci5zaG93RWFzaW5nfSl9ZnVuY3Rpb24gSSgpe3ZhciBlPShoLmhpZGVFdGEtKG5ldyBEYXRlKS5nZXRUaW1lKCkpL2gubWF4SGlkZVRpbWUqMTAwO2Qud2lkdGgoZStcIiVcIil9dmFyIHI9eCgpLGE9aS5pY29uQ2xhc3N8fHIuaWNvbkNsYXNzO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBpLm9wdGlvbnNPdmVycmlkZSYmKHI9ZS5leHRlbmQocixpLm9wdGlvbnNPdmVycmlkZSksYT1pLm9wdGlvbnNPdmVycmlkZS5pY29uQ2xhc3N8fGEpLCFBKHIsaSkpe24rKyx0PWwociwhMCk7dmFyIHM9bnVsbCx1PWUoXCI8ZGl2Lz5cIiksYz1lKFwiPGRpdi8+XCIpLGY9ZShcIjxkaXYvPlwiKSxkPWUoXCI8ZGl2Lz5cIikscD1lKHIuY2xvc2VIdG1sKSxoPXtpbnRlcnZhbElkOm51bGwsaGlkZUV0YTpudWxsLG1heEhpZGVUaW1lOm51bGx9LHY9e3RvYXN0SWQ6bixzdGF0ZTpcInZpc2libGVcIixzdGFydFRpbWU6bmV3IERhdGUsb3B0aW9uczpyLG1hcDppfTtyZXR1cm4gZygpLHcoKSx5KCksYih2KSxyLmRlYnVnJiZjb25zb2xlJiZjb25zb2xlLmxvZyh2KSx1fX1mdW5jdGlvbiB4KCl7cmV0dXJuIGUuZXh0ZW5kKHt9LHkoKSxhLm9wdGlvbnMpfWZ1bmN0aW9uIEMoZSl7dHx8KHQ9bCgpKSxlLmlzKFwiOnZpc2libGVcIil8fChlLnJlbW92ZSgpLGU9bnVsbCwwPT09dC5jaGlsZHJlbigpLmxlbmd0aCYmKHQucmVtb3ZlKCksbz12b2lkIDApKX12YXIgdCxpLG8sbj0wLHI9e2Vycm9yOlwiZXJyb3JcIixpbmZvOlwiaW5mb1wiLHN1Y2Nlc3M6XCJzdWNjZXNzXCIsd2FybmluZzpcIndhcm5pbmdcIn0sYT17Y2xlYXI6cCxyZW1vdmU6aCxlcnJvcjpzLGdldENvbnRhaW5lcjpsLGluZm86dSxvcHRpb25zOnt9LHN1YnNjcmliZTpjLHN1Y2Nlc3M6Zix2ZXJzaW9uOlwiMi4xLjJcIix3YXJuaW5nOmR9O3JldHVybiBhfSgpfSl9KFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmU6ZnVuY3Rpb24oZSx0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10KHJlcXVpcmUoXCJqcXVlcnlcIikpOndpbmRvdy50b2FzdHI9dCh3aW5kb3cualF1ZXJ5KX0pLCQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXskKFwiLm5hdmJhclwiKS5vZmZzZXQoKS50b3A+NTA/JChcIi5uYXZiYXItZml4ZWQtdG9wXCIpLmFkZENsYXNzKFwidG9wLW5hdi1jb2xsYXBzZVwiKTokKFwiLm5hdmJhci1maXhlZC10b3BcIikucmVtb3ZlQ2xhc3MoXCJ0b3AtbmF2LWNvbGxhcHNlXCIpfSksJChmdW5jdGlvbigpeyQoXCJhLnBhZ2Utc2Nyb2xsXCIpLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKGUpe3ZhciB0PSQodGhpcyk7JChcImh0bWwsIGJvZHlcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDokKHQuYXR0cihcImhyZWZcIikpLm9mZnNldCgpLnRvcH0sMTUwMCxcImVhc2VJbk91dEV4cG9cIiksZS5wcmV2ZW50RGVmYXVsdCgpfSl9KSxmdW5jdGlvbihlKXtlLmZuLmNvbGxhcHNpYmxlPWZ1bmN0aW9uKHQpe3ZhciBpPXthY2NvcmRpb246dm9pZCAwfTtyZXR1cm4gdD1lLmV4dGVuZChpLHQpLHRoaXMuZWFjaChmdW5jdGlvbigpe2Z1bmN0aW9uIGEodCl7bj1pLmZpbmQoXCI+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlclwiKSx0Lmhhc0NsYXNzKFwiYWN0aXZlXCIpP3QucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik6dC5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSx0LnBhcmVudCgpLmhhc0NsYXNzKFwiYWN0aXZlXCIpP3Quc2libGluZ3MoXCIuY29sbGFwc2libGUtYm9keVwiKS5zdG9wKCEwLCExKS5zbGlkZURvd24oe2R1cmF0aW9uOjM1MCxlYXNpbmc6XCJlYXNlT3V0UXVhcnRcIixxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe2UodGhpcykuY3NzKFwiaGVpZ2h0XCIsXCJcIil9fSk6dC5zaWJsaW5ncyhcIi5jb2xsYXBzaWJsZS1ib2R5XCIpLnN0b3AoITAsITEpLnNsaWRlVXAoe2R1cmF0aW9uOjM1MCxlYXNpbmc6XCJlYXNlT3V0UXVhcnRcIixxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe2UodGhpcykuY3NzKFwiaGVpZ2h0XCIsXCJcIil9fSksbi5ub3QodCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksbi5ub3QodCkucGFyZW50KCkuY2hpbGRyZW4oXCIuY29sbGFwc2libGUtYm9keVwiKS5zdG9wKCEwLCExKS5zbGlkZVVwKHtkdXJhdGlvbjozNTAsZWFzaW5nOlwiZWFzZU91dFF1YXJ0XCIscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pfWZ1bmN0aW9uIG8odCl7dC5oYXNDbGFzcyhcImFjdGl2ZVwiKT90LnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpOnQucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksdC5wYXJlbnQoKS5oYXNDbGFzcyhcImFjdGl2ZVwiKT90LnNpYmxpbmdzKFwiLmNvbGxhcHNpYmxlLWJvZHlcIikuc3RvcCghMCwhMSkuc2xpZGVEb3duKHtkdXJhdGlvbjozNTAsZWFzaW5nOlwiZWFzZU91dFF1YXJ0XCIscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pOnQuc2libGluZ3MoXCIuY29sbGFwc2libGUtYm9keVwiKS5zdG9wKCEwLCExKS5zbGlkZVVwKHtkdXJhdGlvbjozNTAsZWFzaW5nOlwiZWFzZU91dFF1YXJ0XCIscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9bChlKTtyZXR1cm4gdC5sZW5ndGg+MH1mdW5jdGlvbiBsKGUpe3JldHVybiBlLmNsb3Nlc3QoXCJsaSA+IC5jb2xsYXBzaWJsZS1oZWFkZXJcIil9dmFyIGk9ZSh0aGlzKSxuPWUodGhpcykuZmluZChcIj4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyXCIpLHI9aS5kYXRhKFwiY29sbGFwc2libGVcIik7aS5vZmYoXCJjbGljay5jb2xsYXBzZVwiLFwiLmNvbGxhcHNpYmxlLWhlYWRlclwiKSxuLm9mZihcImNsaWNrLmNvbGxhcHNlXCIpLHQuYWNjb3JkaW9ufHxcImFjY29yZGlvblwiPT09cnx8dm9pZCAwPT09cj8obj1pLmZpbmQoXCI+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlclwiKSxuLm9uKFwiY2xpY2suY29sbGFwc2VcIixmdW5jdGlvbih0KXt2YXIgaT1lKHQudGFyZ2V0KTtzKGkpJiYoaT1sKGkpKSxpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpLGEoaSl9KSxhKG4uZmlsdGVyKFwiLmFjdGl2ZVwiKS5maXJzdCgpKSk6bi5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5vbihcImNsaWNrLmNvbGxhcHNlXCIsZnVuY3Rpb24odCl7dmFyIGk9ZSh0LnRhcmdldCk7cyhpKSYmKGk9bChpKSksaS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKSxvKGkpfSksZSh0aGlzKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSYmbyhlKHRoaXMpKX0pfSl9LGUoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7ZShcIi5jb2xsYXBzaWJsZVwiKS5jb2xsYXBzaWJsZSgpfSl9KGpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9e2luaXQ6ZnVuY3Rpb24odCl7dmFyIGk9e21lbnVXaWR0aDoyNDAsZWRnZTpcImxlZnRcIixjbG9zZU9uQ2xpY2s6ITF9O3Q9ZS5leHRlbmQoaSx0KSxlKHRoaXMpLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiByKGkpe2E9ITEsbz0hMSxlKFwiYm9keVwiKS5jc3MoXCJvdmVyZmxvd1wiLFwiXCIpLGUoXCIjc2lkZW5hdi1vdmVybGF5XCIpLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlKCl9fSksXCJsZWZ0XCI9PT10LmVkZ2U/KGUoXCIuZHJhZy10YXJnZXRcIikuY3NzKHt3aWR0aDpcIlwiLHJpZ2h0OlwiXCIsbGVmdDpcIjBcIn0pLG4udmVsb2NpdHkoe2xlZnQ6LTEqKHQubWVudVdpZHRoKzEwKX0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0Q3ViaWNcIixjb21wbGV0ZTpmdW5jdGlvbigpe2k9PT0hMCYmKG4ucmVtb3ZlQXR0cihcInN0eWxlXCIpLG4uY3NzKFwid2lkdGhcIix0Lm1lbnVXaWR0aCkpfX0pKTooZShcIi5kcmFnLXRhcmdldFwiKS5jc3Moe3dpZHRoOlwiXCIscmlnaHQ6XCIwXCIsbGVmdDpcIlwifSksbi52ZWxvY2l0eSh7cmlnaHQ6LTEqKHQubWVudVdpZHRoKzEwKX0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0Q3ViaWNcIixjb21wbGV0ZTpmdW5jdGlvbigpe2k9PT0hMCYmKG4ucmVtb3ZlQXR0cihcInN0eWxlXCIpLG4uY3NzKFwid2lkdGhcIix0Lm1lbnVXaWR0aCkpfX0pKX12YXIgaT1lKHRoaXMpLG49ZShcIiNcIitpLmF0dHIoXCJkYXRhLWFjdGl2YXRlc1wiKSk7MjQwIT10Lm1lbnVXaWR0aCYmbi5jc3MoXCJ3aWR0aFwiLHQubWVudVdpZHRoKSxlKFwiYm9keVwiKS5hcHBlbmQoZSgnPGRpdiBjbGFzcz1cImRyYWctdGFyZ2V0XCI+PC9kaXY+JykpLFwibGVmdFwiPT10LmVkZ2U/KG4uY3NzKFwibGVmdFwiLC0xKih0Lm1lbnVXaWR0aCsxMCkpLGUoXCIuZHJhZy10YXJnZXRcIikuY3NzKHtsZWZ0OjB9KSk6KG4uYWRkQ2xhc3MoXCJyaWdodC1hbGlnbmVkXCIpLmNzcyhcInJpZ2h0XCIsLTEqKHQubWVudVdpZHRoKzEwKSkuY3NzKFwibGVmdFwiLFwiXCIpLGUoXCIuZHJhZy10YXJnZXRcIikuY3NzKHtyaWdodDowfSkpLG4uaGFzQ2xhc3MoXCJmaXhlZFwiKSYmd2luZG93LmlubmVyV2lkdGg+OTkyJiZuLmNzcyhcImxlZnRcIiwwKSxuLmhhc0NsYXNzKFwiZml4ZWRcIikmJmUod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXt3aW5kb3cuaW5uZXJXaWR0aD45OTI/MCE9PWUoXCIjc2lkZW5hdi1vdmVybGF5XCIpLmNzcyhcIm9wYWNpdHlcIikmJm8/cighMCk6KG4ucmVtb3ZlQXR0cihcInN0eWxlXCIpLG4uY3NzKFwid2lkdGhcIix0Lm1lbnVXaWR0aCkpOm89PT0hMSYmKFwibGVmdFwiPT09dC5lZGdlP24uY3NzKFwibGVmdFwiLC0xKih0Lm1lbnVXaWR0aCsxMCkpOm4uY3NzKFwicmlnaHRcIiwtMSoodC5tZW51V2lkdGgrMTApKSl9KSx0LmNsb3NlT25DbGljaz09PSEwJiZuLm9uKFwiY2xpY2suaXRlbWNsaWNrXCIsXCJhOm5vdCguY29sbGFwc2libGUtaGVhZGVyKVwiLGZ1bmN0aW9uKCl7cigpfSk7dmFyIGE9ITEsbz0hMTtlKFwiLmRyYWctdGFyZ2V0XCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe3IoKX0pLGUoXCIuZHJhZy10YXJnZXRcIikuaGFtbWVyKHtwcmV2ZW50X2RlZmF1bHQ6ITF9KS5iaW5kKFwicGFuXCIsZnVuY3Rpb24oaSl7aWYoXCJ0b3VjaFwiPT1pLmdlc3R1cmUucG9pbnRlclR5cGUpe3ZhciBzPShpLmdlc3R1cmUuZGlyZWN0aW9uLGkuZ2VzdHVyZS5jZW50ZXIueCk7aS5nZXN0dXJlLmNlbnRlci55LGkuZ2VzdHVyZS52ZWxvY2l0eVg7aWYoZShcImJvZHlcIikuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKSwwPT09ZShcIiNzaWRlbmF2LW92ZXJsYXlcIikubGVuZ3RoKXt2YXIgYz1lKCc8ZGl2IGlkPVwic2lkZW5hdi1vdmVybGF5XCI+PC9kaXY+Jyk7Yy5jc3MoXCJvcGFjaXR5XCIsMCkuY2xpY2soZnVuY3Rpb24oKXtyKCl9KSxlKFwiYm9keVwiKS5hcHBlbmQoYyl9aWYoXCJsZWZ0XCI9PT10LmVkZ2UmJihzPnQubWVudVdpZHRoP3M9dC5tZW51V2lkdGg6MD5zJiYocz0wKSksXCJsZWZ0XCI9PT10LmVkZ2Upczx0Lm1lbnVXaWR0aC8yP289ITE6cz49dC5tZW51V2lkdGgvMiYmKG89ITApLG4uY3NzKFwibGVmdFwiLHMtdC5tZW51V2lkdGgpO2Vsc2V7czx3aW5kb3cuaW5uZXJXaWR0aC10Lm1lbnVXaWR0aC8yP289ITA6cz49d2luZG93LmlubmVyV2lkdGgtdC5tZW51V2lkdGgvMiYmKG89ITEpO3ZhciBmPS0xKihzLXQubWVudVdpZHRoLzIpO2Y+MCYmKGY9MCksbi5jc3MoXCJyaWdodFwiLGYpfXZhciBkO1wibGVmdFwiPT09dC5lZGdlPyhkPXMvdC5tZW51V2lkdGgsZShcIiNzaWRlbmF2LW92ZXJsYXlcIikudmVsb2NpdHkoe29wYWNpdHk6ZH0se2R1cmF0aW9uOjUwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSk6KGQ9TWF0aC5hYnMoKHMtd2luZG93LmlubmVyV2lkdGgpL3QubWVudVdpZHRoKSxlKFwiI3NpZGVuYXYtb3ZlcmxheVwiKS52ZWxvY2l0eSh7b3BhY2l0eTpkfSx7ZHVyYXRpb246NTAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pKX19KS5iaW5kKFwicGFuZW5kXCIsZnVuY3Rpb24oaSl7aWYoXCJ0b3VjaFwiPT1pLmdlc3R1cmUucG9pbnRlclR5cGUpe3ZhciByPWkuZ2VzdHVyZS52ZWxvY2l0eVg7YT0hMSxcImxlZnRcIj09PXQuZWRnZT9vJiYuMz49cnx8LS41PnI/KG4udmVsb2NpdHkoe2xlZnQ6MH0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksZShcIiNzaWRlbmF2LW92ZXJsYXlcIikudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOjUwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxlKFwiLmRyYWctdGFyZ2V0XCIpLmNzcyh7d2lkdGg6XCI1MCVcIixyaWdodDowLGxlZnQ6XCJcIn0pKTooIW98fHI+LjMpJiYoZShcImJvZHlcIikuY3NzKFwib3ZlcmZsb3dcIixcIlwiKSxuLnZlbG9jaXR5KHtsZWZ0Oi0xKih0Lm1lbnVXaWR0aCsxMCl9LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGUoXCIjc2lkZW5hdi1vdmVybGF5XCIpLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlKCl9fSksZShcIi5kcmFnLXRhcmdldFwiKS5jc3Moe3dpZHRoOlwiMTBweFwiLHJpZ2h0OlwiXCIsbGVmdDowfSkpOm8mJnI+PS0uM3x8cj4uNT8obi52ZWxvY2l0eSh7cmlnaHQ6MH0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksZShcIiNzaWRlbmF2LW92ZXJsYXlcIikudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOjUwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxlKFwiLmRyYWctdGFyZ2V0XCIpLmNzcyh7d2lkdGg6XCI1MCVcIixyaWdodDpcIlwiLGxlZnQ6MH0pKTooIW98fC0uMz5yKSYmKGUoXCJib2R5XCIpLmNzcyhcIm92ZXJmbG93XCIsXCJcIiksbi52ZWxvY2l0eSh7cmlnaHQ6LTEqKHQubWVudVdpZHRoKzEwKX0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksZShcIiNzaWRlbmF2LW92ZXJsYXlcIikudmVsb2NpdHkoe29wYWNpdHk6MH0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmUoKX19KSxlKFwiLmRyYWctdGFyZ2V0XCIpLmNzcyh7d2lkdGg6XCIxMHB4XCIscmlnaHQ6MCxsZWZ0OlwiXCJ9KSl9fSksaS5jbGljayhmdW5jdGlvbigpe2lmKG89PT0hMClvPSExLGE9ITEscigpO2Vsc2V7ZShcImJvZHlcIikuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKSxcImxlZnRcIj09PXQuZWRnZT8oZShcIi5kcmFnLXRhcmdldFwiKS5jc3Moe3dpZHRoOlwiNTAlXCIscmlnaHQ6MCxsZWZ0OlwiXCJ9KSxuLnZlbG9jaXR5KHtsZWZ0OjB9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pKTooZShcIi5kcmFnLXRhcmdldFwiKS5jc3Moe3dpZHRoOlwiNTAlXCIscmlnaHQ6XCJcIixsZWZ0OjB9KSxuLnZlbG9jaXR5KHtyaWdodDowfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxuLmNzcyhcImxlZnRcIixcIlwiKSk7dmFyIGk9ZSgnPGRpdiBpZD1cInNpZGVuYXYtb3ZlcmxheVwiPjwvZGl2PicpO2kuY3NzKFwib3BhY2l0eVwiLDApLmNsaWNrKGZ1bmN0aW9uKCl7bz0hMSxhPSExLHIoKSxpLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlKCl9fSl9KSxlKFwiYm9keVwiKS5hcHBlbmQoaSksaS52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtvPSEwLGE9ITF9fSl9cmV0dXJuITF9KX0pfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKFwiY2xpY2tcIil9LGhpZGU6ZnVuY3Rpb24oKXtlKFwiI3NpZGVuYXYtb3ZlcmxheVwiKS50cmlnZ2VyKFwiY2xpY2tcIil9fTtlLmZuLnNpZGVOYXY9ZnVuY3Rpb24oaSl7cmV0dXJuIHRbaV0/dFtpXS5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk6XCJvYmplY3RcIiE9dHlwZW9mIGkmJmk/dm9pZCBlLmVycm9yKFwiTWV0aG9kIFwiK2krXCIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnNpZGVOYXZcIik6dC5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KGpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9MCxpPTAsbj1mdW5jdGlvbigpe3JldHVybiBpKyssXCJtYXRlcmlhbGl6ZS1sZWFuLW92ZXJsYXktXCIraX07ZS5mbi5leHRlbmQoe29wZW5Nb2RhbDpmdW5jdGlvbihpKXtlKFwiYm9keVwiKS5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpO3ZhciByPXtvcGFjaXR5Oi41LGluX2R1cmF0aW9uOjM1MCxvdXRfZHVyYXRpb246MjUwLHJlYWR5OnZvaWQgMCxjb21wbGV0ZTp2b2lkIDAsZGlzbWlzc2libGU6ITAsc3RhcnRpbmdfdG9wOlwiNCVcIn0sYT1uKCksbz1lKHRoaXMpLHM9ZSgnPGRpdiBjbGFzcz1cImxlYW4tb3ZlcmxheVwiPjwvZGl2PicpLGw9Kyt0O3MuYXR0cihcImlkXCIsYSkuY3NzKFwiei1pbmRleFwiLDFlMysyKmwpLG8uZGF0YShcIm92ZXJsYXktaWRcIixhKS5jc3MoXCJ6LWluZGV4XCIsMWUzKzIqbCsxKSxlKFwiYm9keVwiKS5hcHBlbmQocyksaT1lLmV4dGVuZChyLGkpLGkuZGlzbWlzc2libGUmJihzLmNsaWNrKGZ1bmN0aW9uKCl7by5jbG9zZU1vZGFsKGkpfSksZShkb2N1bWVudCkub24oXCJrZXl1cC5sZWFuTW9kYWxcIithLGZ1bmN0aW9uKGUpezI3PT09ZS5rZXlDb2RlJiZvLmNsb3NlTW9kYWwoaSl9KSksby5maW5kKFwiLm1vZGFsLWNsb3NlXCIpLm9uKFwiY2xpY2suY2xvc2VcIixmdW5jdGlvbihlKXtvLmNsb3NlTW9kYWwoaSl9KSxzLmNzcyh7ZGlzcGxheTpcImJsb2NrXCIsb3BhY2l0eTowfSksby5jc3Moe2Rpc3BsYXk6XCJibG9ja1wiLG9wYWNpdHk6MH0pLHMudmVsb2NpdHkoe29wYWNpdHk6aS5vcGFjaXR5fSx7ZHVyYXRpb246aS5pbl9kdXJhdGlvbixxdWV1ZTohMSxlYXNlOlwiZWFzZU91dEN1YmljXCJ9KSxvLmRhdGEoXCJhc3NvY2lhdGVkLW92ZXJsYXlcIixzWzBdKSxvLmhhc0NsYXNzKFwiYm90dG9tLXNoZWV0XCIpP28udmVsb2NpdHkoe2JvdHRvbTpcIjBcIixvcGFjaXR5OjF9LHtkdXJhdGlvbjppLmluX2R1cmF0aW9uLHF1ZXVlOiExLGVhc2U6XCJlYXNlT3V0Q3ViaWNcIixjb21wbGV0ZTpmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGkucmVhZHkmJmkucmVhZHkoKX19KTooZS5WZWxvY2l0eS5ob29rKG8sXCJzY2FsZVhcIiwuNyksby5jc3Moe3RvcDppLnN0YXJ0aW5nX3RvcH0pLG8udmVsb2NpdHkoe3RvcDpcIjEwJVwiLG9wYWNpdHk6MSxzY2FsZVg6XCIxXCJ9LHtkdXJhdGlvbjppLmluX2R1cmF0aW9uLHF1ZXVlOiExLGVhc2U6XCJlYXNlT3V0Q3ViaWNcIixjb21wbGV0ZTpmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGkucmVhZHkmJmkucmVhZHkoKX19KSl9fSksZS5mbi5leHRlbmQoe2Nsb3NlTW9kYWw6ZnVuY3Rpb24oaSl7dmFyIG49e291dF9kdXJhdGlvbjoyNTAsY29tcGxldGU6dm9pZCAwfSxyPWUodGhpcyksYT1yLmRhdGEoXCJvdmVybGF5LWlkXCIpLG89ZShcIiNcIithKTtpPWUuZXh0ZW5kKG4saSksZShcImJvZHlcIikuY3NzKFwib3ZlcmZsb3dcIixcIlwiKSxyLmZpbmQoXCIubW9kYWwtY2xvc2VcIikub2ZmKFwiY2xpY2suY2xvc2VcIiksZShkb2N1bWVudCkub2ZmKFwia2V5dXAubGVhbk1vZGFsXCIrYSksby52ZWxvY2l0eSh7b3BhY2l0eTowfSx7ZHVyYXRpb246aS5vdXRfZHVyYXRpb24scXVldWU6ITEsZWFzZTpcImVhc2VPdXRRdWFydFwifSksci5oYXNDbGFzcyhcImJvdHRvbS1zaGVldFwiKT9yLnZlbG9jaXR5KHtib3R0b206XCItMTAwJVwiLG9wYWNpdHk6MH0se2R1cmF0aW9uOmkub3V0X2R1cmF0aW9uLHF1ZXVlOiExLGVhc2U6XCJlYXNlT3V0Q3ViaWNcIixjb21wbGV0ZTpmdW5jdGlvbigpe28uY3NzKHtkaXNwbGF5Olwibm9uZVwifSksXCJmdW5jdGlvblwiPT10eXBlb2YgaS5jb21wbGV0ZSYmaS5jb21wbGV0ZSgpLG8ucmVtb3ZlKCksdC0tfX0pOnIudmVsb2NpdHkoe3RvcDppLnN0YXJ0aW5nX3RvcCxvcGFjaXR5OjAsc2NhbGVYOi43fSx7ZHVyYXRpb246aS5vdXRfZHVyYXRpb24sY29tcGxldGU6ZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksXCJmdW5jdGlvblwiPT10eXBlb2YgaS5jb21wbGV0ZSYmaS5jb21wbGV0ZSgpLG8ucmVtb3ZlKCksdC0tfX0pfX0pLGUuZm4uZXh0ZW5kKHtsZWFuTW9kYWw6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBpPXtzdGFydGluZ190b3A6XCI0JVwifSxuPWUuZXh0ZW5kKGksdCk7ZSh0aGlzKS5jbGljayhmdW5jdGlvbih0KXtuLnN0YXJ0aW5nX3RvcD0oZSh0aGlzKS5vZmZzZXQoKS50b3AtZSh3aW5kb3cpLnNjcm9sbFRvcCgpKS8xLjE1O3ZhciBpPWUodGhpcykuYXR0cihcImhyZWZcIil8fFwiI1wiK2UodGhpcykuZGF0YShcInRhcmdldFwiKTtlKGkpLm9wZW5Nb2RhbChuKSx0LnByZXZlbnREZWZhdWx0KCl9KX0pfX0pfShqUXVlcnkpLGZ1bmN0aW9uKGUpe2UuZm4ubWF0ZXJpYWxib3g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdSgpe2k9ITE7dmFyIG49YS5wYXJlbnQoXCIubWF0ZXJpYWwtcGxhY2Vob2xkZXJcIiksbD0od2luZG93LmlubmVyV2lkdGgsd2luZG93LmlubmVySGVpZ2h0LGEuZGF0YShcIndpZHRoXCIpKSx1PWEuZGF0YShcImhlaWdodFwiKTthLnZlbG9jaXR5KFwic3RvcFwiLCEwKSxlKFwiI21hdGVyaWFsYm94LW92ZXJsYXlcIikudmVsb2NpdHkoXCJzdG9wXCIsITApLGUoXCIubWF0ZXJpYWxib3gtY2FwdGlvblwiKS52ZWxvY2l0eShcInN0b3BcIiwhMCksZShcIiNtYXRlcmlhbGJveC1vdmVybGF5XCIpLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjpyLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXt0PSExLGUodGhpcykucmVtb3ZlKCl9fSksYS52ZWxvY2l0eSh7d2lkdGg6bCxoZWlnaHQ6dSxsZWZ0OjAsdG9wOjB9LHtkdXJhdGlvbjpyLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxlKFwiLm1hdGVyaWFsYm94LWNhcHRpb25cIikudmVsb2NpdHkoe29wYWNpdHk6MH0se2R1cmF0aW9uOnIscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe24uY3NzKHtoZWlnaHQ6XCJcIix3aWR0aDpcIlwiLHBvc2l0aW9uOlwiXCIsdG9wOlwiXCIsbGVmdDpcIlwifSksYS5jc3Moe2hlaWdodDpcIlwiLHRvcDpcIlwiLGxlZnQ6XCJcIix3aWR0aDpcIlwiLFwibWF4LXdpZHRoXCI6XCJcIixwb3NpdGlvbjpcIlwiLFwiei1pbmRleFwiOlwiXCJ9KSxhLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGk9ITAsZSh0aGlzKS5yZW1vdmUoKX19KX1pZighZSh0aGlzKS5oYXNDbGFzcyhcImluaXRpYWxpemVkXCIpKXtlKHRoaXMpLmFkZENsYXNzKFwiaW5pdGlhbGl6ZWRcIik7dmFyIHQ9ITEsaT0hMCxuPTI3NSxyPTIwMCxhPWUodGhpcyksbz1lKFwiPGRpdj48L2Rpdj5cIikuYWRkQ2xhc3MoXCJtYXRlcmlhbC1wbGFjZWhvbGRlclwiKTthLndyYXAobyksYS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXt2YXIgcj1hLnBhcmVudChcIi5tYXRlcmlhbC1wbGFjZWhvbGRlclwiKSxvPXdpbmRvdy5pbm5lcldpZHRoLHM9d2luZG93LmlubmVySGVpZ2h0LGw9YS53aWR0aCgpLGM9YS5oZWlnaHQoKTtpZihpPT09ITEpcmV0dXJuIHUoKSwhMTtpZih0JiZpPT09ITApcmV0dXJuIHUoKSwhMTtpPSExLGEuYWRkQ2xhc3MoXCJhY3RpdmVcIiksdD0hMCxyLmNzcyh7d2lkdGg6clswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCxoZWlnaHQ6clswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQscG9zaXRpb246XCJyZWxhdGl2ZVwiLHRvcDowLGxlZnQ6MH0pLGEuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsXCJ6LWluZGV4XCI6MWUzfSkuZGF0YShcIndpZHRoXCIsbCkuZGF0YShcImhlaWdodFwiLGMpO3ZhciBmPWUoJzxkaXYgaWQ9XCJtYXRlcmlhbGJveC1vdmVybGF5XCI+PC9kaXY+JykuY3NzKHtvcGFjaXR5OjB9KS5jbGljayhmdW5jdGlvbigpe2k9PT0hMCYmdSgpfSk7aWYoZShcImJvZHlcIikuYXBwZW5kKGYpLGYudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOm4scXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLFwiXCIhPT1hLmRhdGEoXCJjYXB0aW9uXCIpKXt2YXIgZD1lKCc8ZGl2IGNsYXNzPVwibWF0ZXJpYWxib3gtY2FwdGlvblwiPjwvZGl2PicpO2QudGV4dChhLmRhdGEoXCJjYXB0aW9uXCIpKSxlKFwiYm9keVwiKS5hcHBlbmQoZCksZC5jc3Moe2Rpc3BsYXk6XCJpbmxpbmVcIn0pLGQudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOm4scXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pfXZhciBwPTAsaD1sL28sdj1jL3MsbT0wLGc9MDtoPnY/KHA9Yy9sLG09LjkqbyxnPS45Km8qcCk6KHA9bC9jLG09LjkqcypwLGc9LjkqcyksYS5oYXNDbGFzcyhcInJlc3BvbnNpdmUtaW1nXCIpP2EudmVsb2NpdHkoe1wibWF4LXdpZHRoXCI6bSx3aWR0aDpsfSx7ZHVyYXRpb246MCxxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe2EuY3NzKHtsZWZ0OjAsdG9wOjB9KS52ZWxvY2l0eSh7aGVpZ2h0Omcsd2lkdGg6bSxsZWZ0OmUoZG9jdW1lbnQpLnNjcm9sbExlZnQoKStvLzItYS5wYXJlbnQoXCIubWF0ZXJpYWwtcGxhY2Vob2xkZXJcIikub2Zmc2V0KCkubGVmdC1tLzIsdG9wOmUoZG9jdW1lbnQpLnNjcm9sbFRvcCgpK3MvMi1hLnBhcmVudChcIi5tYXRlcmlhbC1wbGFjZWhvbGRlclwiKS5vZmZzZXQoKS50b3AtZy8yfSx7ZHVyYXRpb246bixxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7aT0hMH19KX19KTphLmNzcyhcImxlZnRcIiwwKS5jc3MoXCJ0b3BcIiwwKS52ZWxvY2l0eSh7aGVpZ2h0Omcsd2lkdGg6bSxsZWZ0OmUoZG9jdW1lbnQpLnNjcm9sbExlZnQoKStvLzItYS5wYXJlbnQoXCIubWF0ZXJpYWwtcGxhY2Vob2xkZXJcIikub2Zmc2V0KCkubGVmdC1tLzIsdG9wOmUoZG9jdW1lbnQpLnNjcm9sbFRvcCgpK3MvMi1hLnBhcmVudChcIi5tYXRlcmlhbC1wbGFjZWhvbGRlclwiKS5vZmZzZXQoKS50b3AtZy8yfSx7ZHVyYXRpb246bixxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7aT0hMH19KX0pLGUod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXt0JiZ1KCl9KSxlKGRvY3VtZW50KS5rZXl1cChmdW5jdGlvbihlKXsyNz09PWUua2V5Q29kZSYmaT09PSEwJiZ0JiZ1KCl9KX19KX0sZShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtlKFwiLm1hdGVyaWFsYm94ZWRcIikubWF0ZXJpYWxib3goKX0pfShqUXVlcnkpO3ZhciBiYXI9JChcIi5wcm9ncmVzcy1iYXItYW5pbWF0ZWRcIik7JChmdW5jdGlvbigpeyQoYmFyKS5lYWNoKGZ1bmN0aW9uKCl7YmFyX3dpZHRoPSQodGhpcykuYXR0cihcImFyaWEtdmFsdWVub3dcIiksJCh0aGlzKS53aWR0aChiYXJfd2lkdGgrXCIlXCIpfSl9KTt2YXIgc2VsZWN0b3I9XCIucG9wb3V0IC5wYW5lbC1oZWFkaW5nXCIscGFyZW50U2VsZWN0b3I9XCIucG9wb3V0IC5wYW5lbCAuYWN0aXZlXCI7JChzZWxlY3Rvcikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7cGFyZW50RGl2PXVwVG8odGhpcyxcIkRJVlwiKSxjb25zb2xlLmxvZyhwYXJlbnREaXYpLCQodGhpcykuaGFzQ2xhc3MoXCJhY3RpdmVcIik/KCQoc2VsZWN0b3IpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLCQoXCIucG9wb3V0IC5wYW5lbFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSk6KCQoc2VsZWN0b3IpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLCQoXCIucG9wb3V0IC5wYW5lbFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSwkKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpLCQocGFyZW50RGl2KS5hZGRDbGFzcyhcImFjdGl2ZVwiKSl9KSwkKGZ1bmN0aW9uKCl7dmFyIGU9ITA7JChcIiNhY2NvcmRpb25cIikub24oXCJzaG93LmJzLmNvbGxhcHNlXCIsZnVuY3Rpb24oKXtlJiYkKFwiI2FjY29yZGlvbiAuaW5cIikuY29sbGFwc2UoXCJoaWRlXCIpfSl9KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9K2UodGhpcykuYXR0cihcImxlbmd0aFwiKSxpPStlKHRoaXMpLnZhbCgpLmxlbmd0aCxuPXQ+PWk7ZSh0aGlzKS5wYXJlbnQoKS5maW5kKCdzcGFuW2NsYXNzPVwiY2hhcmFjdGVyLWNvdW50ZXJcIl0nKS5odG1sKGkrXCIvXCIrdCkscihuLGUodGhpcykpfWZ1bmN0aW9uIGkodCl7dmFyIGk9ZShcIjxzcGFuLz5cIikuYWRkQ2xhc3MoXCJjaGFyYWN0ZXItY291bnRlclwiKS5jc3MoXCJmbG9hdFwiLFwicmlnaHRcIikuY3NzKFwiZm9udC1zaXplXCIsXCIxMnB4XCIpLmNzcyhcImhlaWdodFwiLDEpO3QucGFyZW50KCkuYXBwZW5kKGkpfWZ1bmN0aW9uIG4oKXtlKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpLmh0bWwoXCJcIil9ZnVuY3Rpb24gcihlLHQpe3ZhciBpPXQuaGFzQ2xhc3MoXCJpbnZhbGlkXCIpO2UmJmk/dC5yZW1vdmVDbGFzcyhcImludmFsaWRcIik6ZXx8aXx8KHQucmVtb3ZlQ2xhc3MoXCJ2YWxpZFwiKSx0LmFkZENsYXNzKFwiaW52YWxpZFwiKSl9ZS5mbi5jaGFyYWN0ZXJDb3VudGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciByPXZvaWQgMCE9PWUodGhpcykuYXR0cihcImxlbmd0aFwiKTtyJiYoZSh0aGlzKS5vbihcImlucHV0XCIsdCksZSh0aGlzKS5vbihcImZvY3VzXCIsdCksZSh0aGlzKS5vbihcImJsdXJcIixuKSxpKGUodGhpcykpKX0pfSxlKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2UoXCJpbnB1dCwgdGV4dGFyZWFcIikuY2hhcmFjdGVyQ291bnRlcigpfSl9KGpRdWVyeSksZnVuY3Rpb24oZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcInBpY2tlclwiLFtcImpxdWVyeVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJqcXVlcnlcIikpOnRoaXMuUGlja2VyPWUoalF1ZXJ5KX0oZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0LGwsdSxmKXtmdW5jdGlvbiBiKCl7cmV0dXJuIHIuXy5ub2RlKFwiZGl2XCIsci5fLm5vZGUoXCJkaXZcIixyLl8ubm9kZShcImRpdlwiLHIuXy5ub2RlKFwiZGl2XCIseS5jb21wb25lbnQubm9kZXMocC5vcGVuKSx2LmJveCksdi53cmFwKSx2LmZyYW1lKSx2LmhvbGRlcil9ZnVuY3Rpb24gdygpe20uZGF0YShsLHkpLmFkZENsYXNzKHYuaW5wdXQpLmF0dHIoXCJ0YWJpbmRleFwiLC0xKS52YWwobS5kYXRhKFwidmFsdWVcIik/eS5nZXQoXCJzZWxlY3RcIixoLmZvcm1hdCk6dC52YWx1ZSksaC5lZGl0YWJsZXx8bS5vbihcImZvY3VzLlwiK3AuaWQrXCIgY2xpY2suXCIrcC5pZCxmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCkseS4kcm9vdFswXS5mb2N1cygpfSkub24oXCJrZXlkb3duLlwiK3AuaWQsaykscyh0LHtoYXNwb3B1cDohMCxleHBhbmRlZDohMSxyZWFkb25seTohMSxvd25zOnQuaWQrXCJfcm9vdFwifSl9ZnVuY3Rpb24geCgpe3kuJHJvb3Qub24oe2tleWRvd246ayxmb2N1c2luOmZ1bmN0aW9uKGUpe3kuJHJvb3QucmVtb3ZlQ2xhc3Modi5mb2N1c2VkKSxlLnN0b3BQcm9wYWdhdGlvbigpfSxcIm1vdXNlZG93biBjbGlja1wiOmZ1bmN0aW9uKHQpe3ZhciBpPXQudGFyZ2V0O2khPXkuJHJvb3QuY2hpbGRyZW4oKVswXSYmKHQuc3RvcFByb3BhZ2F0aW9uKCksXCJtb3VzZWRvd25cIiE9dC50eXBlfHxlKGkpLmlzKFwiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGJ1dHRvbiwgb3B0aW9uXCIpfHwodC5wcmV2ZW50RGVmYXVsdCgpLHkuJHJvb3RbMF0uZm9jdXMoKSkpfX0pLm9uKHtmb2N1czpmdW5jdGlvbigpe20uYWRkQ2xhc3Modi50YXJnZXQpfSxibHVyOmZ1bmN0aW9uKCl7bS5yZW1vdmVDbGFzcyh2LnRhcmdldCl9fSkub24oXCJmb2N1cy50b09wZW5cIixTKS5vbihcImNsaWNrXCIsXCJbZGF0YS1waWNrXSwgW2RhdGEtbmF2XSwgW2RhdGEtY2xlYXJdLCBbZGF0YS1jbG9zZV1cIixmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksaT10LmRhdGEoKSxuPXQuaGFzQ2xhc3Modi5uYXZEaXNhYmxlZCl8fHQuaGFzQ2xhc3Modi5kaXNhYmxlZCkscj1jKCk7cj1yJiYoci50eXBlfHxyLmhyZWYpLChufHxyJiYhZS5jb250YWlucyh5LiRyb290WzBdLHIpKSYmeS4kcm9vdFswXS5mb2N1cygpLCFuJiZpLm5hdj95LnNldChcImhpZ2hsaWdodFwiLHkuY29tcG9uZW50Lml0ZW0uaGlnaGxpZ2h0LHtuYXY6aS5uYXZ9KTohbiYmXCJwaWNrXCJpbiBpP3kuc2V0KFwic2VsZWN0XCIsaS5waWNrKTppLmNsZWFyP3kuY2xlYXIoKS5jbG9zZSghMCk6aS5jbG9zZSYmeS5jbG9zZSghMCl9KSxzKHkuJHJvb3RbMF0sXCJoaWRkZW5cIiwhMCl9ZnVuY3Rpb24gQygpe3ZhciBpO2guaGlkZGVuTmFtZT09PSEwPyhpPXQubmFtZSx0Lm5hbWU9XCJcIik6KGk9W1wic3RyaW5nXCI9PXR5cGVvZiBoLmhpZGRlblByZWZpeD9oLmhpZGRlblByZWZpeDpcIlwiLFwic3RyaW5nXCI9PXR5cGVvZiBoLmhpZGRlblN1ZmZpeD9oLmhpZGRlblN1ZmZpeDpcIl9zdWJtaXRcIl0saT1pWzBdK3QubmFtZStpWzFdKSx5Ll9oaWRkZW49ZSgnPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9XCInK2krJ1wiJysobS5kYXRhKFwidmFsdWVcIil8fHQudmFsdWU/JyB2YWx1ZT1cIicreS5nZXQoXCJzZWxlY3RcIixoLmZvcm1hdFN1Ym1pdCkrJ1wiJzpcIlwiKStcIj5cIilbMF0sbS5vbihcImNoYW5nZS5cIitwLmlkLGZ1bmN0aW9uKCl7eS5faGlkZGVuLnZhbHVlPXQudmFsdWU/eS5nZXQoXCJzZWxlY3RcIixoLmZvcm1hdFN1Ym1pdCk6XCJcIn0pLGguY29udGFpbmVyP2UoaC5jb250YWluZXIpLmFwcGVuZCh5Ll9oaWRkZW4pOm0uYWZ0ZXIoeS5faGlkZGVuKX1mdW5jdGlvbiBrKGUpe3ZhciB0PWUua2V5Q29kZSxpPS9eKDh8NDYpJC8udGVzdCh0KTtyZXR1cm4gMjc9PXQ/KHkuY2xvc2UoKSwhMSk6dm9pZCgoMzI9PXR8fGl8fCFwLm9wZW4mJnkuY29tcG9uZW50LmtleVt0XSkmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxpP3kuY2xlYXIoKS5jbG9zZSgpOnkub3BlbigpKSl9ZnVuY3Rpb24gUyhlKXtlLnN0b3BQcm9wYWdhdGlvbigpLFwiZm9jdXNcIj09ZS50eXBlJiZ5LiRyb290LmFkZENsYXNzKHYuZm9jdXNlZCkseS5vcGVuKCl9aWYoIXQpcmV0dXJuIHI7dmFyIGQ9ITEscD17aWQ6dC5pZHx8XCJQXCIrTWF0aC5hYnMofn4oTWF0aC5yYW5kb20oKSpuZXcgRGF0ZSkpfSxoPXU/ZS5leHRlbmQoITAse30sdS5kZWZhdWx0cyxmKTpmfHx7fSx2PWUuZXh0ZW5kKHt9LHIua2xhc3NlcygpLGgua2xhc3MpLG09ZSh0KSxnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQoKX0seT1nLnByb3RvdHlwZT17Y29uc3RydWN0b3I6Zywkbm9kZTptLHN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHAmJnAuc3RhcnQ/eToocC5tZXRob2RzPXt9LHAuc3RhcnQ9ITAscC5vcGVuPSExLHAudHlwZT10LnR5cGUsdC5hdXRvZm9jdXM9dD09YygpLHQucmVhZE9ubHk9IWguZWRpdGFibGUsdC5pZD10LmlkfHxwLmlkLFwidGV4dFwiIT10LnR5cGUmJih0LnR5cGU9XCJ0ZXh0XCIpLHkuY29tcG9uZW50PW5ldyB1KHksaCkseS4kcm9vdD1lKHIuXy5ub2RlKFwiZGl2XCIsYigpLHYucGlja2VyLCdpZD1cIicrdC5pZCsnX3Jvb3RcIiB0YWJpbmRleD1cIjBcIicpKSx4KCksaC5mb3JtYXRTdWJtaXQmJkMoKSx3KCksaC5jb250YWluZXI/ZShoLmNvbnRhaW5lcikuYXBwZW5kKHkuJHJvb3QpOm0uYWZ0ZXIoeS4kcm9vdCkseS5vbih7c3RhcnQ6eS5jb21wb25lbnQub25TdGFydCxyZW5kZXI6eS5jb21wb25lbnQub25SZW5kZXIsc3RvcDp5LmNvbXBvbmVudC5vblN0b3Asb3Blbjp5LmNvbXBvbmVudC5vbk9wZW4sY2xvc2U6eS5jb21wb25lbnQub25DbG9zZSxzZXQ6eS5jb21wb25lbnQub25TZXR9KS5vbih7c3RhcnQ6aC5vblN0YXJ0LHJlbmRlcjpoLm9uUmVuZGVyLHN0b3A6aC5vblN0b3Asb3BlbjpoLm9uT3BlbixjbG9zZTpoLm9uQ2xvc2Usc2V0Omgub25TZXR9KSxkPWEoeS4kcm9vdC5jaGlsZHJlbigpWzBdKSx0LmF1dG9mb2N1cyYmeS5vcGVuKCkseS50cmlnZ2VyKFwic3RhcnRcIikudHJpZ2dlcihcInJlbmRlclwiKSl9LHJlbmRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZT95LiRyb290Lmh0bWwoYigpKTp5LiRyb290LmZpbmQoXCIuXCIrdi5ib3gpLmh0bWwoeS5jb21wb25lbnQubm9kZXMocC5vcGVuKSkseS50cmlnZ2VyKFwicmVuZGVyXCIpfSxzdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHAuc3RhcnQ/KHkuY2xvc2UoKSx5Ll9oaWRkZW4mJnkuX2hpZGRlbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHkuX2hpZGRlbikseS4kcm9vdC5yZW1vdmUoKSxtLnJlbW92ZUNsYXNzKHYuaW5wdXQpLnJlbW92ZURhdGEobCksc2V0VGltZW91dChmdW5jdGlvbigpe20ub2ZmKFwiLlwiK3AuaWQpfSwwKSx0LnR5cGU9cC50eXBlLHQucmVhZE9ubHk9ITEseS50cmlnZ2VyKFwic3RvcFwiKSxwLm1ldGhvZHM9e30scC5zdGFydD0hMSx5KTp5fSxvcGVuOmZ1bmN0aW9uKGEpe3JldHVybiBwLm9wZW4/eToobS5hZGRDbGFzcyh2LmFjdGl2ZSkscyh0LFwiZXhwYW5kZWRcIiwhMCksc2V0VGltZW91dChmdW5jdGlvbigpe3kuJHJvb3QuYWRkQ2xhc3Modi5vcGVuZWQpLHMoeS4kcm9vdFswXSxcImhpZGRlblwiLCExKX0sMCksYSE9PSExJiYocC5vcGVuPSEwLGQmJm4uY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsXCIrPVwiK28oKSkseS4kcm9vdFswXS5mb2N1cygpLGkub24oXCJjbGljay5cIitwLmlkK1wiIGZvY3VzaW4uXCIrcC5pZCxmdW5jdGlvbihlKXt2YXIgaT1lLnRhcmdldDtpIT10JiZpIT1kb2N1bWVudCYmMyE9ZS53aGljaCYmeS5jbG9zZShpPT09eS4kcm9vdC5jaGlsZHJlbigpWzBdKX0pLm9uKFwia2V5ZG93bi5cIitwLmlkLGZ1bmN0aW9uKHQpe3ZhciBpPXQua2V5Q29kZSxuPXkuY29tcG9uZW50LmtleVtpXSxhPXQudGFyZ2V0OzI3PT1pP3kuY2xvc2UoITApOmEhPXkuJHJvb3RbMF18fCFuJiYxMyE9aT9lLmNvbnRhaW5zKHkuJHJvb3RbMF0sYSkmJjEzPT1pJiYodC5wcmV2ZW50RGVmYXVsdCgpLGEuY2xpY2soKSk6KHQucHJldmVudERlZmF1bHQoKSxuP3IuXy50cmlnZ2VyKHkuY29tcG9uZW50LmtleS5nbyx5LFtyLl8udHJpZ2dlcihuKV0pOnkuJHJvb3QuZmluZChcIi5cIit2LmhpZ2hsaWdodGVkKS5oYXNDbGFzcyh2LmRpc2FibGVkKXx8eS5zZXQoXCJzZWxlY3RcIix5LmNvbXBvbmVudC5pdGVtLmhpZ2hsaWdodCkuY2xvc2UoKSl9KSkseS50cmlnZ2VyKFwib3BlblwiKSl9LGNsb3NlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiYoeS4kcm9vdC5vZmYoXCJmb2N1cy50b09wZW5cIilbMF0uZm9jdXMoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eS4kcm9vdC5vbihcImZvY3VzLnRvT3BlblwiLFMpfSwwKSksbS5yZW1vdmVDbGFzcyh2LmFjdGl2ZSkscyh0LFwiZXhwYW5kZWRcIiwhMSksc2V0VGltZW91dChmdW5jdGlvbigpe3kuJHJvb3QucmVtb3ZlQ2xhc3Modi5vcGVuZWQrXCIgXCIrdi5mb2N1c2VkKSxzKHkuJHJvb3RbMF0sXCJoaWRkZW5cIiwhMCl9LDApLHAub3Blbj8ocC5vcGVuPSExLGQmJm4uY3NzKFwib3ZlcmZsb3dcIixcIlwiKS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsXCItPVwiK28oKSksaS5vZmYoXCIuXCIrcC5pZCkseS50cmlnZ2VyKFwiY2xvc2VcIikpOnl9LGNsZWFyOmZ1bmN0aW9uKGUpe3JldHVybiB5LnNldChcImNsZWFyXCIsbnVsbCxlKX0sc2V0OmZ1bmN0aW9uKHQsaSxuKXt2YXIgcixhLG89ZS5pc1BsYWluT2JqZWN0KHQpLHM9bz90Ont9O2lmKG49byYmZS5pc1BsYWluT2JqZWN0KGkpP2k6bnx8e30sdCl7b3x8KHNbdF09aSk7Zm9yKHIgaW4gcylhPXNbcl0sciBpbiB5LmNvbXBvbmVudC5pdGVtJiYodm9pZCAwPT09YSYmKGE9bnVsbCkseS5jb21wb25lbnQuc2V0KHIsYSxuKSksKFwic2VsZWN0XCI9PXJ8fFwiY2xlYXJcIj09cikmJm0udmFsKFwiY2xlYXJcIj09cj9cIlwiOnkuZ2V0KHIsaC5mb3JtYXQpKS50cmlnZ2VyKFwiY2hhbmdlXCIpO3kucmVuZGVyKCl9cmV0dXJuIG4ubXV0ZWQ/eTp5LnRyaWdnZXIoXCJzZXRcIixzKX0sZ2V0OmZ1bmN0aW9uKGUsaSl7aWYoZT1lfHxcInZhbHVlXCIsbnVsbCE9cFtlXSlyZXR1cm4gcFtlXTtpZihcInZhbHVlU3VibWl0XCI9PWUpe2lmKHkuX2hpZGRlbilyZXR1cm4geS5faGlkZGVuLnZhbHVlO2U9XCJ2YWx1ZVwifWlmKFwidmFsdWVcIj09ZSlyZXR1cm4gdC52YWx1ZTtpZihlIGluIHkuY29tcG9uZW50Lml0ZW0pe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBpKXt2YXIgbj15LmNvbXBvbmVudC5nZXQoZSk7cmV0dXJuIG4/ci5fLnRyaWdnZXIoeS5jb21wb25lbnQuZm9ybWF0cy50b1N0cmluZyx5LmNvbXBvbmVudCxbaSxuXSk6XCJcIn1yZXR1cm4geS5jb21wb25lbnQuZ2V0KGUpfX0sb246ZnVuY3Rpb24odCxpLG4pe3ZhciByLGEsbz1lLmlzUGxhaW5PYmplY3QodCkscz1vP3Q6e307aWYodCl7b3x8KHNbdF09aSk7Zm9yKHIgaW4gcylhPXNbcl0sbiYmKHI9XCJfXCIrcikscC5tZXRob2RzW3JdPXAubWV0aG9kc1tyXXx8W10scC5tZXRob2RzW3JdLnB1c2goYSl9cmV0dXJuIHl9LG9mZjpmdW5jdGlvbigpe3ZhciBlLHQsaT1hcmd1bWVudHM7Zm9yKGU9MCxuYW1lc0NvdW50PWkubGVuZ3RoO2U8bmFtZXNDb3VudDtlKz0xKXQ9aVtlXSx0IGluIHAubWV0aG9kcyYmZGVsZXRlIHAubWV0aG9kc1t0XTtyZXR1cm4geX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciBpPXAubWV0aG9kc1tlXTtpJiZpLm1hcChmdW5jdGlvbihlKXtyLl8udHJpZ2dlcihlLHksW3RdKX0pfTtyZXR1cm4gaShcIl9cIitlKSxpKGUpLHl9fTtyZXR1cm4gbmV3IGd9ZnVuY3Rpb24gYShlKXt2YXIgdCxpPVwicG9zaXRpb25cIjtyZXR1cm4gZS5jdXJyZW50U3R5bGU/dD1lLmN1cnJlbnRTdHlsZVtpXTp3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQ9Z2V0Q29tcHV0ZWRTdHlsZShlKVtpXSksXCJmaXhlZFwiPT10fWZ1bmN0aW9uIG8oKXtpZihuLmhlaWdodCgpPD10LmhlaWdodCgpKXJldHVybiAwO3ZhciBpPWUoJzxkaXYgc3R5bGU9XCJ2aXNpYmlsaXR5OmhpZGRlbjt3aWR0aDoxMDBweFwiIC8+JykuYXBwZW5kVG8oXCJib2R5XCIpLHI9aVswXS5vZmZzZXRXaWR0aDtpLmNzcyhcIm92ZXJmbG93XCIsXCJzY3JvbGxcIik7dmFyIGE9ZSgnPGRpdiBzdHlsZT1cIndpZHRoOjEwMCVcIiAvPicpLmFwcGVuZFRvKGkpLG89YVswXS5vZmZzZXRXaWR0aDtyZXR1cm4gaS5yZW1vdmUoKSxyLW99ZnVuY3Rpb24gcyh0LGksbil7aWYoZS5pc1BsYWluT2JqZWN0KGkpKWZvcih2YXIgciBpbiBpKWwodCxyLGlbcl0pO2Vsc2UgbCh0LGksbil9ZnVuY3Rpb24gbChlLHQsaSl7ZS5zZXRBdHRyaWJ1dGUoKFwicm9sZVwiPT10P1wiXCI6XCJhcmlhLVwiKSt0LGkpfWZ1bmN0aW9uIHUodCxpKXtlLmlzUGxhaW5PYmplY3QodCl8fCh0PXthdHRyaWJ1dGU6aX0pLGk9XCJcIjtmb3IodmFyIG4gaW4gdCl7dmFyIHI9KFwicm9sZVwiPT1uP1wiXCI6XCJhcmlhLVwiKStuLGE9dFtuXTtpKz1udWxsPT1hP1wiXCI6cisnPVwiJyt0W25dKydcIid9cmV0dXJuIGl9ZnVuY3Rpb24gYygpe3RyeXtyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fXZhciB0PWUod2luZG93KSxpPWUoZG9jdW1lbnQpLG49ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO3JldHVybiByLmtsYXNzZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZXx8XCJwaWNrZXJcIix7cGlja2VyOmUsb3BlbmVkOmUrXCItLW9wZW5lZFwiLGZvY3VzZWQ6ZStcIi0tZm9jdXNlZFwiLGlucHV0OmUrXCJfX2lucHV0XCIsYWN0aXZlOmUrXCJfX2lucHV0LS1hY3RpdmVcIix0YXJnZXQ6ZStcIl9faW5wdXQtLXRhcmdldFwiLGhvbGRlcjplK1wiX19ob2xkZXJcIixmcmFtZTplK1wiX19mcmFtZVwiLHdyYXA6ZStcIl9fd3JhcFwiLGJveDplK1wiX19ib3hcIn19LHIuXz17Z3JvdXA6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LGk9XCJcIixuPXIuXy50cmlnZ2VyKGUubWluLGUpO248PXIuXy50cmlnZ2VyKGUubWF4LGUsW25dKTtuKz1lLmkpdD1yLl8udHJpZ2dlcihlLml0ZW0sZSxbbl0pLGkrPXIuXy5ub2RlKGUubm9kZSx0WzBdLHRbMV0sdFsyXSk7cmV0dXJuIGl9LG5vZGU6ZnVuY3Rpb24odCxpLG4scil7cmV0dXJuIGk/KGk9ZS5pc0FycmF5KGkpP2kuam9pbihcIlwiKTppLG49bj8nIGNsYXNzPVwiJytuKydcIic6XCJcIixyPXI/XCIgXCIrcjpcIlwiLFwiPFwiK3QrbityK1wiPlwiK2krXCI8L1wiK3QrXCI+XCIpOlwiXCJ9LGxlYWQ6ZnVuY3Rpb24oZSl7cmV0dXJuKDEwPmU/XCIwXCI6XCJcIikrZX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQsaSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lLmFwcGx5KHQsaXx8W10pOmV9LGRpZ2l0czpmdW5jdGlvbihlKXtyZXR1cm4vXFxkLy50ZXN0KGVbMV0pPzI6MX0saXNEYXRlOmZ1bmN0aW9uKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSkuaW5kZXhPZihcIkRhdGVcIik+LTEmJnRoaXMuaXNJbnRlZ2VyKGUuZ2V0RGF0ZSgpKX0saXNJbnRlZ2VyOmZ1bmN0aW9uKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSkuaW5kZXhPZihcIk51bWJlclwiKT4tMSYmZSUxPT09MH0sYXJpYUF0dHI6dX0sci5leHRlbmQ9ZnVuY3Rpb24odCxpKXtlLmZuW3RdPWZ1bmN0aW9uKG4sYSl7dmFyIG89dGhpcy5kYXRhKHQpO3JldHVyblwicGlja2VyXCI9PW4/bzpvJiZcInN0cmluZ1wiPT10eXBlb2Ygbj9yLl8udHJpZ2dlcihvW25dLG8sW2FdKTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpO2EuZGF0YSh0KXx8bmV3IHIodGhpcyx0LGksbil9KX0sZS5mblt0XS5kZWZhdWx0cz1pLmRlZmF1bHRzfSxyfSksZnVuY3Rpb24oZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJwaWNrZXJcIixcImpxdWVyeVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCIuL3BpY2tlci5qc1wiKSxyZXF1aXJlKFwianF1ZXJ5XCIpKTplKFBpY2tlcixqUXVlcnkpfShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGEoZSx0KXt2YXIgaT10aGlzLG49ZS4kbm9kZVswXSxyPW4udmFsdWUsYT1lLiRub2RlLmRhdGEoXCJ2YWx1ZVwiKSxvPWF8fHIscz1hP3QuZm9ybWF0U3VibWl0OnQuZm9ybWF0LGw9ZnVuY3Rpb24oKXtyZXR1cm4gbi5jdXJyZW50U3R5bGU/XCJydGxcIj09bi5jdXJyZW50U3R5bGUuZGlyZWN0aW9uOlwicnRsXCI9PWdldENvbXB1dGVkU3R5bGUoZS4kcm9vdFswXSkuZGlyZWN0aW9ufTtpLnNldHRpbmdzPXQsaS4kbm9kZT1lLiRub2RlLGkucXVldWU9e21pbjpcIm1lYXN1cmUgY3JlYXRlXCIsbWF4OlwibWVhc3VyZSBjcmVhdGVcIixub3c6XCJub3cgY3JlYXRlXCIsc2VsZWN0OlwicGFyc2UgY3JlYXRlIHZhbGlkYXRlXCIsaGlnaGxpZ2h0OlwicGFyc2UgbmF2aWdhdGUgY3JlYXRlIHZhbGlkYXRlXCIsdmlldzpcInBhcnNlIGNyZWF0ZSB2YWxpZGF0ZSB2aWV3c2V0XCIsZGlzYWJsZTpcImRlYWN0aXZhdGVcIixlbmFibGU6XCJhY3RpdmF0ZVwifSxpLml0ZW09e30saS5pdGVtLmNsZWFyPW51bGwsaS5pdGVtLmRpc2FibGU9KHQuZGlzYWJsZXx8W10pLnNsaWNlKDApLGkuaXRlbS5lbmFibGU9LWZ1bmN0aW9uKGUpe3JldHVybiBlWzBdPT09ITA/ZS5zaGlmdCgpOi0xfShpLml0ZW0uZGlzYWJsZSksaS5zZXQoXCJtaW5cIix0Lm1pbikuc2V0KFwibWF4XCIsdC5tYXgpLnNldChcIm5vd1wiKSxvP2kuc2V0KFwic2VsZWN0XCIsbyx7Zm9ybWF0OnN9KTppLnNldChcInNlbGVjdFwiLG51bGwpLnNldChcImhpZ2hsaWdodFwiLGkuaXRlbS5ub3cpLGkua2V5PXs0MDo3LDM4Oi03LDM5OmZ1bmN0aW9uKCl7cmV0dXJuIGwoKT8tMToxfSwzNzpmdW5jdGlvbigpe3JldHVybiBsKCk/MTotMX0sZ286ZnVuY3Rpb24oZSl7dmFyIHQ9aS5pdGVtLmhpZ2hsaWdodCxuPW5ldyBEYXRlKHQueWVhcix0Lm1vbnRoLHQuZGF0ZStlKTtpLnNldChcImhpZ2hsaWdodFwiLG4se2ludGVydmFsOmV9KSx0aGlzLnJlbmRlcigpfX0sZS5vbihcInJlbmRlclwiLGZ1bmN0aW9uKCl7ZS4kcm9vdC5maW5kKFwiLlwiK3Qua2xhc3Muc2VsZWN0TW9udGgpLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXt2YXIgaT10aGlzLnZhbHVlO2kmJihlLnNldChcImhpZ2hsaWdodFwiLFtlLmdldChcInZpZXdcIikueWVhcixpLGUuZ2V0KFwiaGlnaGxpZ2h0XCIpLmRhdGVdKSxlLiRyb290LmZpbmQoXCIuXCIrdC5rbGFzcy5zZWxlY3RNb250aCkudHJpZ2dlcihcImZvY3VzXCIpKX0pLGUuJHJvb3QuZmluZChcIi5cIit0LmtsYXNzLnNlbGVjdFllYXIpLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXt2YXIgaT10aGlzLnZhbHVlO2kmJihlLnNldChcImhpZ2hsaWdodFwiLFtpLGUuZ2V0KFwidmlld1wiKS5tb250aCxlLmdldChcImhpZ2hsaWdodFwiKS5kYXRlXSksZS4kcm9vdC5maW5kKFwiLlwiK3Qua2xhc3Muc2VsZWN0WWVhcikudHJpZ2dlcihcImZvY3VzXCIpKX0pfSwxKS5vbihcIm9wZW5cIixmdW5jdGlvbigpe3ZhciBuPVwiXCI7aS5kaXNhYmxlZChpLmdldChcIm5vd1wiKSkmJihuPVwiOm5vdCguXCIrdC5rbGFzcy5idXR0b25Ub2RheStcIilcIiksZS4kcm9vdC5maW5kKFwiYnV0dG9uXCIrbitcIiwgc2VsZWN0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCExKX0sMSkub24oXCJjbG9zZVwiLGZ1bmN0aW9uKCl7ZS4kcm9vdC5maW5kKFwiYnV0dG9uLCBzZWxlY3RcIikuYXR0cihcImRpc2FibGVkXCIsITApfSwxKX12YXIgaT03LG49NixyPWUuXzthLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPXRoaXMscj1uLml0ZW07cmV0dXJuIG51bGw9PT10PyhcImNsZWFyXCI9PWUmJihlPVwic2VsZWN0XCIpLHJbZV09dCxuKToocltcImVuYWJsZVwiPT1lP1wiZGlzYWJsZVwiOlwiZmxpcFwiPT1lP1wiZW5hYmxlXCI6ZV09bi5xdWV1ZVtlXS5zcGxpdChcIiBcIikubWFwKGZ1bmN0aW9uKHIpe3JldHVybiB0PW5bcl0oZSx0LGkpfSkucG9wKCksXCJzZWxlY3RcIj09ZT9uLnNldChcImhpZ2hsaWdodFwiLHIuc2VsZWN0LGkpOlwiaGlnaGxpZ2h0XCI9PWU/bi5zZXQoXCJ2aWV3XCIsci5oaWdobGlnaHQsaSk6ZS5tYXRjaCgvXihmbGlwfG1pbnxtYXh8ZGlzYWJsZXxlbmFibGUpJC8pJiYoci5zZWxlY3QmJm4uZGlzYWJsZWQoci5zZWxlY3QpJiZuLnNldChcInNlbGVjdFwiLHIuc2VsZWN0LGkpLHIuaGlnaGxpZ2h0JiZuLmRpc2FibGVkKHIuaGlnaGxpZ2h0KSYmbi5zZXQoXCJoaWdobGlnaHRcIixyLmhpZ2hsaWdodCxpKSksbil9LGEucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pdGVtW2VdfSxhLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24oZSxpLG4pe3ZhciBhLG89dGhpcztyZXR1cm4gaT12b2lkIDA9PT1pP2U6aSxpPT0tKDEvMCl8fGk9PTEvMD9hPWk6dC5pc1BsYWluT2JqZWN0KGkpJiZyLmlzSW50ZWdlcihpLnBpY2spP2k9aS5vYmo6dC5pc0FycmF5KGkpPyhpPW5ldyBEYXRlKGlbMF0saVsxXSxpWzJdKSxpPXIuaXNEYXRlKGkpP2k6by5jcmVhdGUoKS5vYmopOmk9ci5pc0ludGVnZXIoaSl8fHIuaXNEYXRlKGkpP28ubm9ybWFsaXplKG5ldyBEYXRlKGkpLG4pOm8ubm93KGUsaSxuKSx7eWVhcjphfHxpLmdldEZ1bGxZZWFyKCksbW9udGg6YXx8aS5nZXRNb250aCgpLGRhdGU6YXx8aS5nZXREYXRlKCksZGF5OmF8fGkuZ2V0RGF5KCksb2JqOmF8fGkscGljazphfHxpLmdldFRpbWUoKX19LGEucHJvdG90eXBlLmNyZWF0ZVJhbmdlPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpcyxhPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09ITB8fHQuaXNBcnJheShlKXx8ci5pc0RhdGUoZSk/bi5jcmVhdGUoZSk6ZX07cmV0dXJuIHIuaXNJbnRlZ2VyKGUpfHwoZT1hKGUpKSxyLmlzSW50ZWdlcihpKXx8KGk9YShpKSksci5pc0ludGVnZXIoZSkmJnQuaXNQbGFpbk9iamVjdChpKT9lPVtpLnllYXIsaS5tb250aCxpLmRhdGUrZV06ci5pc0ludGVnZXIoaSkmJnQuaXNQbGFpbk9iamVjdChlKSYmKGk9W2UueWVhcixlLm1vbnRoLGUuZGF0ZStpXSkse2Zyb206YShlKSx0bzphKGkpfX0sYS5wcm90b3R5cGUud2l0aGluUmFuZ2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT10aGlzLmNyZWF0ZVJhbmdlKGUuZnJvbSxlLnRvKSx0LnBpY2s+PWUuZnJvbS5waWNrJiZ0LnBpY2s8PWUudG8ucGlja30sYS5wcm90b3R5cGUub3ZlcmxhcFJhbmdlcz1mdW5jdGlvbihlLHQpe3ZhciBpPXRoaXM7cmV0dXJuIGU9aS5jcmVhdGVSYW5nZShlLmZyb20sZS50byksdD1pLmNyZWF0ZVJhbmdlKHQuZnJvbSx0LnRvKSxpLndpdGhpblJhbmdlKGUsdC5mcm9tKXx8aS53aXRoaW5SYW5nZShlLHQudG8pfHxpLndpdGhpblJhbmdlKHQsZS5mcm9tKXx8aS53aXRoaW5SYW5nZSh0LGUudG8pfSxhLnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oZSx0LGkpe3JldHVybiB0PW5ldyBEYXRlLGkmJmkucmVsJiZ0LnNldERhdGUodC5nZXREYXRlKCkraS5yZWwpLHRoaXMubm9ybWFsaXplKHQsaSl9LGEucHJvdG90eXBlLm5hdmlnYXRlPWZ1bmN0aW9uKGUsaSxuKXt2YXIgcixhLG8scyxsPXQuaXNBcnJheShpKSx1PXQuaXNQbGFpbk9iamVjdChpKSxjPXRoaXMuaXRlbS52aWV3O2lmKGx8fHUpe2Zvcih1PyhhPWkueWVhcixvPWkubW9udGgscz1pLmRhdGUpOihhPStpWzBdLG89K2lbMV0scz0raVsyXSksbiYmbi5uYXYmJmMmJmMubW9udGghPT1vJiYoYT1jLnllYXIsbz1jLm1vbnRoKSxyPW5ldyBEYXRlKGEsbysobiYmbi5uYXY/bi5uYXY6MCksMSksYT1yLmdldEZ1bGxZZWFyKCksbz1yLmdldE1vbnRoKCk7bmV3IERhdGUoYSxvLHMpLmdldE1vbnRoKCkhPT1vOylzLT0xO2k9W2EsbyxzXX1yZXR1cm4gaX0sYS5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNldEhvdXJzKDAsMCwwLDApLGV9LGEucHJvdG90eXBlLm1lYXN1cmU9ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzO3JldHVybiB0P1wic3RyaW5nXCI9PXR5cGVvZiB0P3Q9aS5wYXJzZShlLHQpOnIuaXNJbnRlZ2VyKHQpJiYodD1pLm5vdyhlLHQse3JlbDp0fSkpOnQ9XCJtaW5cIj09ZT8tKDEvMCk6MS8wLHR9LGEucHJvdG90eXBlLnZpZXdzZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5jcmVhdGUoW3QueWVhcix0Lm1vbnRoLDFdKX0sYS5wcm90b3R5cGUudmFsaWRhdGU9ZnVuY3Rpb24oZSxpLG4pe3ZhciB1LGMscCxoLGE9dGhpcyxvPWkscz1uJiZuLmludGVydmFsP24uaW50ZXJ2YWw6MSxsPS0xPT09YS5pdGVtLmVuYWJsZSxmPWEuaXRlbS5taW4sZD1hLml0ZW0ubWF4LHY9bCYmYS5pdGVtLmRpc2FibGUuZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKHQuaXNBcnJheShlKSl7dmFyIG49YS5jcmVhdGUoZSkucGljaztuPGkucGljaz91PSEwOm4+aS5waWNrJiYoYz0hMCl9cmV0dXJuIHIuaXNJbnRlZ2VyKGUpfSkubGVuZ3RoO2lmKCghbnx8IW4ubmF2KSYmKCFsJiZhLmRpc2FibGVkKGkpfHxsJiZhLmRpc2FibGVkKGkpJiYodnx8dXx8Yyl8fCFsJiYoaS5waWNrPD1mLnBpY2t8fGkucGljaz49ZC5waWNrKSkpZm9yKGwmJiF2JiYoIWMmJnM+MHx8IXUmJjA+cykmJihzKj0tMSk7YS5kaXNhYmxlZChpKSYmKE1hdGguYWJzKHMpPjEmJihpLm1vbnRoPG8ubW9udGh8fGkubW9udGg+by5tb250aCkmJihpPW8scz1zPjA/MTotMSksaS5waWNrPD1mLnBpY2s/KHA9ITAscz0xLGk9YS5jcmVhdGUoW2YueWVhcixmLm1vbnRoLGYuZGF0ZSsoaS5waWNrPT09Zi5waWNrPzA6LTEpXSkpOmkucGljaz49ZC5waWNrJiYoaD0hMCxzPS0xLGk9YS5jcmVhdGUoW2QueWVhcixkLm1vbnRoLGQuZGF0ZSsoaS5waWNrPT09ZC5waWNrPzA6MSldKSksIXB8fCFoKTspaT1hLmNyZWF0ZShbaS55ZWFyLGkubW9udGgsaS5kYXRlK3NdKTtyZXR1cm4gaX0sYS5wcm90b3R5cGUuZGlzYWJsZWQ9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcyxuPWkuaXRlbS5kaXNhYmxlLmZpbHRlcihmdW5jdGlvbihuKXtyZXR1cm4gci5pc0ludGVnZXIobik/ZS5kYXk9PT0oaS5zZXR0aW5ncy5maXJzdERheT9uOm4tMSklNzp0LmlzQXJyYXkobil8fHIuaXNEYXRlKG4pP2UucGljaz09PWkuY3JlYXRlKG4pLnBpY2s6dC5pc1BsYWluT2JqZWN0KG4pP2kud2l0aGluUmFuZ2UobixlKTp2b2lkIDB9KTtyZXR1cm4gbj1uLmxlbmd0aCYmIW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0LmlzQXJyYXkoZSkmJlwiaW52ZXJ0ZWRcIj09ZVszXXx8dC5pc1BsYWluT2JqZWN0KGUpJiZlLmludmVydGVkfSkubGVuZ3RoLC0xPT09aS5pdGVtLmVuYWJsZT8hbjpufHxlLnBpY2s8aS5pdGVtLm1pbi5waWNrfHxlLnBpY2s+aS5pdGVtLm1heC5waWNrfSxhLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihlLHQsaSl7dmFyIG49dGhpcyxhPXt9O3JldHVybiB0JiZcInN0cmluZ1wiPT10eXBlb2YgdD8oaSYmaS5mb3JtYXR8fChpPWl8fHt9LGkuZm9ybWF0PW4uc2V0dGluZ3MuZm9ybWF0KSxuLmZvcm1hdHMudG9BcnJheShpLmZvcm1hdCkubWFwKGZ1bmN0aW9uKGUpe3ZhciBpPW4uZm9ybWF0c1tlXSxvPWk/ci50cmlnZ2VyKGksbixbdCxhXSk6ZS5yZXBsYWNlKC9eIS8sXCJcIikubGVuZ3RoO2kmJihhW2VdPXQuc3Vic3RyKDAsbykpLHQ9dC5zdWJzdHIobyl9KSxbYS55eXl5fHxhLnl5LCsoYS5tbXx8YS5tKS0xLGEuZGR8fGEuZF0pOnR9LGEucHJvdG90eXBlLmZvcm1hdHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxpKXt2YXIgbj1lLm1hdGNoKC9cXHcrLylbMF07cmV0dXJuIGkubW18fGkubXx8KGkubT10LmluZGV4T2YobikrMSksbi5sZW5ndGh9ZnVuY3Rpb24gdChlKXtyZXR1cm4gZS5tYXRjaCgvXFx3Ky8pWzBdLmxlbmd0aH1yZXR1cm57ZDpmdW5jdGlvbihlLHQpe3JldHVybiBlP3IuZGlnaXRzKGUpOnQuZGF0ZX0sZGQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT8yOnIubGVhZCh0LmRhdGUpfSxkZGQ6ZnVuY3Rpb24oZSxpKXtyZXR1cm4gZT90KGUpOnRoaXMuc2V0dGluZ3Mud2Vla2RheXNTaG9ydFtpLmRheV19LGRkZGQ6ZnVuY3Rpb24oZSxpKXtyZXR1cm4gZT90KGUpOnRoaXMuc2V0dGluZ3Mud2Vla2RheXNGdWxsW2kuZGF5XX0sbTpmdW5jdGlvbihlLHQpe3JldHVybiBlP3IuZGlnaXRzKGUpOnQubW9udGgrMX0sbW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT8yOnIubGVhZCh0Lm1vbnRoKzEpfSxtbW06ZnVuY3Rpb24odCxpKXt2YXIgbj10aGlzLnNldHRpbmdzLm1vbnRoc1Nob3J0O3JldHVybiB0P2UodCxuLGkpOm5baS5tb250aF19LG1tbW06ZnVuY3Rpb24odCxpKXt2YXIgbj10aGlzLnNldHRpbmdzLm1vbnRoc0Z1bGw7cmV0dXJuIHQ/ZSh0LG4saSk6bltpLm1vbnRoXX0seXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT8yOihcIlwiK3QueWVhcikuc2xpY2UoMil9LHl5eXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT80OnQueWVhcn0sdG9BcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdCgvKGR7MSw0fXxtezEsNH18eXs0fXx5eXwhLikvZyl9LHRvU3RyaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcztyZXR1cm4gaS5mb3JtYXRzLnRvQXJyYXkoZSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiByLnRyaWdnZXIoaS5mb3JtYXRzW2VdLGksWzAsdF0pfHxlLnJlcGxhY2UoL14hLyxcIlwiKX0pLmpvaW4oXCJcIil9fX0oKSxhLnByb3RvdHlwZS5pc0RhdGVFeGFjdD1mdW5jdGlvbihlLGkpe3ZhciBuPXRoaXM7cmV0dXJuIHIuaXNJbnRlZ2VyKGUpJiZyLmlzSW50ZWdlcihpKXx8XCJib29sZWFuXCI9PXR5cGVvZiBlJiZcImJvb2xlYW5cIj09dHlwZW9mIGk/ZT09PWk6KHIuaXNEYXRlKGUpfHx0LmlzQXJyYXkoZSkpJiYoci5pc0RhdGUoaSl8fHQuaXNBcnJheShpKSk/bi5jcmVhdGUoZSkucGljaz09PW4uY3JlYXRlKGkpLnBpY2s6dC5pc1BsYWluT2JqZWN0KGUpJiZ0LmlzUGxhaW5PYmplY3QoaSk/bi5pc0RhdGVFeGFjdChlLmZyb20saS5mcm9tKSYmbi5pc0RhdGVFeGFjdChlLnRvLGkudG8pOiExfSxhLnByb3RvdHlwZS5pc0RhdGVPdmVybGFwPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpcyxhPW4uc2V0dGluZ3MuZmlyc3REYXk/MTowO3JldHVybiByLmlzSW50ZWdlcihlKSYmKHIuaXNEYXRlKGkpfHx0LmlzQXJyYXkoaSkpPyhlPWUlNythLGU9PT1uLmNyZWF0ZShpKS5kYXkrMSk6ci5pc0ludGVnZXIoaSkmJihyLmlzRGF0ZShlKXx8dC5pc0FycmF5KGUpKT8oaT1pJTcrYSxpPT09bi5jcmVhdGUoZSkuZGF5KzEpOnQuaXNQbGFpbk9iamVjdChlKSYmdC5pc1BsYWluT2JqZWN0KGkpP24ub3ZlcmxhcFJhbmdlcyhlLGkpOiExfSxhLnByb3RvdHlwZS5mbGlwRW5hYmxlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaXRlbTt0LmVuYWJsZT1lfHwoLTE9PXQuZW5hYmxlPzE6LTEpfSxhLnByb3RvdHlwZS5kZWFjdGl2YXRlPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpcyxhPW4uaXRlbS5kaXNhYmxlLnNsaWNlKDApO3JldHVyblwiZmxpcFwiPT1pP24uZmxpcEVuYWJsZSgpOmk9PT0hMT8obi5mbGlwRW5hYmxlKDEpLGE9W10pOmk9PT0hMD8obi5mbGlwRW5hYmxlKC0xKSxhPVtdKTppLm1hcChmdW5jdGlvbihlKXtmb3IodmFyIGksbz0wO288YS5sZW5ndGg7bys9MSlpZihuLmlzRGF0ZUV4YWN0KGUsYVtvXSkpe2k9ITA7YnJlYWt9aXx8KHIuaXNJbnRlZ2VyKGUpfHxyLmlzRGF0ZShlKXx8dC5pc0FycmF5KGUpfHx0LmlzUGxhaW5PYmplY3QoZSkmJmUuZnJvbSYmZS50bykmJmEucHVzaChlKX0pLGF9LGEucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpcyxhPW4uaXRlbS5kaXNhYmxlLG89YS5sZW5ndGg7cmV0dXJuXCJmbGlwXCI9PWk/bi5mbGlwRW5hYmxlKCk6aT09PSEwPyhuLmZsaXBFbmFibGUoMSksYT1bXSk6aT09PSExPyhuLmZsaXBFbmFibGUoLTEpLGE9W10pOmkubWFwKGZ1bmN0aW9uKGUpe3ZhciBpLHMsbCx1O2ZvcihsPTA7bz5sO2wrPTEpe2lmKHM9YVtsXSxuLmlzRGF0ZUV4YWN0KHMsZSkpe2k9YVtsXT1udWxsLHU9ITA7YnJlYWt9aWYobi5pc0RhdGVPdmVybGFwKHMsZSkpe3QuaXNQbGFpbk9iamVjdChlKT8oZS5pbnZlcnRlZD0hMCxpPWUpOnQuaXNBcnJheShlKT8oaT1lLGlbM118fGkucHVzaChcImludmVydGVkXCIpKTpyLmlzRGF0ZShlKSYmKGk9W2UuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCksXCJpbnZlcnRlZFwiXSk7YnJlYWt9fWlmKGkpZm9yKGw9MDtvPmw7bCs9MSlpZihuLmlzRGF0ZUV4YWN0KGFbbF0sZSkpe2FbbF09bnVsbDticmVha31pZih1KWZvcihsPTA7bz5sO2wrPTEpaWYobi5pc0RhdGVPdmVybGFwKGFbbF0sZSkpe2FbbF09bnVsbDticmVha31pJiZhLnB1c2goaSl9KSxhLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZX0pfSxhLnByb3RvdHlwZS5ub2Rlcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLGE9dC5zZXR0aW5ncyxvPXQuaXRlbSxzPW8ubm93LGw9by5zZWxlY3QsdT1vLmhpZ2hsaWdodCxjPW8udmlldyxmPW8uZGlzYWJsZSxkPW8ubWluLHA9by5tYXgsaD1mdW5jdGlvbihlLHQpe3JldHVybiBhLmZpcnN0RGF5JiYoZS5wdXNoKGUuc2hpZnQoKSksdC5wdXNoKHQuc2hpZnQoKSkpLHIubm9kZShcInRoZWFkXCIsci5ub2RlKFwidHJcIixyLmdyb3VwKHttaW46MCxtYXg6aS0xLGk6MSxub2RlOlwidGhcIixpdGVtOmZ1bmN0aW9uKGkpe3JldHVybltlW2ldLGEua2xhc3Mud2Vla2RheXMsJ3Njb3BlPWNvbCB0aXRsZT1cIicrdFtpXSsnXCInXX19KSkpfSgoYS5zaG93V2Vla2RheXNGdWxsP2Eud2Vla2RheXNGdWxsOmEud2Vla2RheXNMZXR0ZXIpLnNsaWNlKDApLGEud2Vla2RheXNGdWxsLnNsaWNlKDApKSx2PWZ1bmN0aW9uKGUpe1xucmV0dXJuIHIubm9kZShcImRpdlwiLFwiIFwiLGEua2xhc3NbXCJuYXZcIisoZT9cIk5leHRcIjpcIlByZXZcIildKyhlJiZjLnllYXI+PXAueWVhciYmYy5tb250aD49cC5tb250aHx8IWUmJmMueWVhcjw9ZC55ZWFyJiZjLm1vbnRoPD1kLm1vbnRoP1wiIFwiK2Eua2xhc3MubmF2RGlzYWJsZWQ6XCJcIiksXCJkYXRhLW5hdj1cIisoZXx8LTEpK1wiIFwiK3IuYXJpYUF0dHIoe3JvbGU6XCJidXR0b25cIixjb250cm9sczp0LiRub2RlWzBdLmlkK1wiX3RhYmxlXCJ9KSsnIHRpdGxlPVwiJysoZT9hLmxhYmVsTW9udGhOZXh0OmEubGFiZWxNb250aFByZXYpKydcIicpfSxtPWZ1bmN0aW9uKGkpe3ZhciBuPWEuc2hvd01vbnRoc1Nob3J0P2EubW9udGhzU2hvcnQ6YS5tb250aHNGdWxsO3JldHVyblwic2hvcnRfbW9udGhzXCI9PWkmJihuPWEubW9udGhzU2hvcnQpLGEuc2VsZWN0TW9udGhzJiZ2b2lkIDA9PWk/ci5ub2RlKFwic2VsZWN0XCIsci5ncm91cCh7bWluOjAsbWF4OjExLGk6MSxub2RlOlwib3B0aW9uXCIsaXRlbTpmdW5jdGlvbihlKXtyZXR1cm5bbltlXSwwLFwidmFsdWU9XCIrZSsoYy5tb250aD09ZT9cIiBzZWxlY3RlZFwiOlwiXCIpKyhjLnllYXI9PWQueWVhciYmZTxkLm1vbnRofHxjLnllYXI9PXAueWVhciYmZT5wLm1vbnRoP1wiIGRpc2FibGVkXCI6XCJcIildfX0pLGEua2xhc3Muc2VsZWN0TW9udGgrXCIgYnJvd3Nlci1kZWZhdWx0XCIsKGU/XCJcIjpcImRpc2FibGVkXCIpK1wiIFwiK3IuYXJpYUF0dHIoe2NvbnRyb2xzOnQuJG5vZGVbMF0uaWQrXCJfdGFibGVcIn0pKycgdGl0bGU9XCInK2EubGFiZWxNb250aFNlbGVjdCsnXCInKTpcInNob3J0X21vbnRoc1wiPT1pP251bGwhPWw/ci5ub2RlKFwiZGl2XCIsbltsLm1vbnRoXSk6ci5ub2RlKFwiZGl2XCIsbltjLm1vbnRoXSk6ci5ub2RlKFwiZGl2XCIsbltjLm1vbnRoXSxhLmtsYXNzLm1vbnRoKX0sZz1mdW5jdGlvbihpKXt2YXIgbj1jLnllYXIsbz1hLnNlbGVjdFllYXJzPT09ITA/NTp+fihhLnNlbGVjdFllYXJzLzIpO2lmKG8pe3ZhciBzPWQueWVhcixsPXAueWVhcix1PW4tbyxmPW4rbztpZihzPnUmJihmKz1zLXUsdT1zKSxmPmwpe3ZhciBoPXUtcyx2PWYtbDt1LT1oPnY/djpoLGY9bH1pZihhLnNlbGVjdFllYXJzJiZ2b2lkIDA9PWkpcmV0dXJuIHIubm9kZShcInNlbGVjdFwiLHIuZ3JvdXAoe21pbjp1LG1heDpmLGk6MSxub2RlOlwib3B0aW9uXCIsaXRlbTpmdW5jdGlvbihlKXtyZXR1cm5bZSwwLFwidmFsdWU9XCIrZSsobj09ZT9cIiBzZWxlY3RlZFwiOlwiXCIpXX19KSxhLmtsYXNzLnNlbGVjdFllYXIrXCIgYnJvd3Nlci1kZWZhdWx0XCIsKGU/XCJcIjpcImRpc2FibGVkXCIpK1wiIFwiK3IuYXJpYUF0dHIoe2NvbnRyb2xzOnQuJG5vZGVbMF0uaWQrXCJfdGFibGVcIn0pKycgdGl0bGU9XCInK2EubGFiZWxZZWFyU2VsZWN0KydcIicpfXJldHVyblwicmF3XCI9PWk/ci5ub2RlKFwiZGl2XCIsbik6ci5ub2RlKFwiZGl2XCIsbixhLmtsYXNzLnllYXIpfTtyZXR1cm4gY3JlYXRlRGF5TGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9bD9yLm5vZGUoXCJkaXZcIixsLmRhdGUpOnIubm9kZShcImRpdlwiLHMuZGF0ZSl9LGNyZWF0ZVdlZWtkYXlMYWJlbD1mdW5jdGlvbigpe3ZhciBlO2U9bnVsbCE9bD9sLmRheTpzLmRheTt2YXIgdD1hLndlZWtkYXlzRnVsbFtlXTtyZXR1cm4gdH0sci5ub2RlKFwiZGl2XCIsci5ub2RlKFwiZGl2XCIsY3JlYXRlV2Vla2RheUxhYmVsKCksXCJwaWNrZXJfX3dlZWtkYXktZGlzcGxheVwiKStyLm5vZGUoXCJkaXZcIixtKFwic2hvcnRfbW9udGhzXCIpLGEua2xhc3MubW9udGhfZGlzcGxheSkrci5ub2RlKFwiZGl2XCIsY3JlYXRlRGF5TGFiZWwoKSxhLmtsYXNzLmRheV9kaXNwbGF5KStyLm5vZGUoXCJkaXZcIixnKFwicmF3XCIpLGEua2xhc3MueWVhcl9kaXNwbGF5KSxhLmtsYXNzLmRhdGVfZGlzcGxheSkrci5ub2RlKFwiZGl2XCIsci5ub2RlKFwiZGl2XCIsKGEuc2VsZWN0WWVhcnM/bSgpK2coKTptKCkrZygpKSt2KCkrdigxKSxhLmtsYXNzLmhlYWRlcikrci5ub2RlKFwidGFibGVcIixoK3Iubm9kZShcInRib2R5XCIsci5ncm91cCh7bWluOjAsbWF4Om4tMSxpOjEsbm9kZTpcInRyXCIsaXRlbTpmdW5jdGlvbihlKXt2YXIgbj1hLmZpcnN0RGF5JiYwPT09dC5jcmVhdGUoW2MueWVhcixjLm1vbnRoLDFdKS5kYXk/LTc6MDtyZXR1cm5bci5ncm91cCh7bWluOmkqZS1jLmRheStuKzEsbWF4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluK2ktMX0saToxLG5vZGU6XCJ0ZFwiLGl0ZW06ZnVuY3Rpb24oZSl7ZT10LmNyZWF0ZShbYy55ZWFyLGMubW9udGgsZSsoYS5maXJzdERheT8xOjApXSk7dmFyIGk9bCYmbC5waWNrPT1lLnBpY2ssbj11JiZ1LnBpY2s9PWUucGljayxvPWYmJnQuZGlzYWJsZWQoZSl8fGUucGljazxkLnBpY2t8fGUucGljaz5wLnBpY2ssaD1yLnRyaWdnZXIodC5mb3JtYXRzLnRvU3RyaW5nLHQsW2EuZm9ybWF0LGVdKTtyZXR1cm5bci5ub2RlKFwiZGl2XCIsZS5kYXRlLGZ1bmN0aW9uKHQpe3JldHVybiB0LnB1c2goYy5tb250aD09ZS5tb250aD9hLmtsYXNzLmluZm9jdXM6YS5rbGFzcy5vdXRmb2N1cykscy5waWNrPT1lLnBpY2smJnQucHVzaChhLmtsYXNzLm5vdyksaSYmdC5wdXNoKGEua2xhc3Muc2VsZWN0ZWQpLG4mJnQucHVzaChhLmtsYXNzLmhpZ2hsaWdodGVkKSxvJiZ0LnB1c2goYS5rbGFzcy5kaXNhYmxlZCksdC5qb2luKFwiIFwiKX0oW2Eua2xhc3MuZGF5XSksXCJkYXRhLXBpY2s9XCIrZS5waWNrK1wiIFwiK3IuYXJpYUF0dHIoe3JvbGU6XCJncmlkY2VsbFwiLGxhYmVsOmgsc2VsZWN0ZWQ6aSYmdC4kbm9kZS52YWwoKT09PWg/ITA6bnVsbCxhY3RpdmVkZXNjZW5kYW50Om4/ITA6bnVsbCxkaXNhYmxlZDpvPyEwOm51bGx9KSksXCJcIixyLmFyaWFBdHRyKHtyb2xlOlwicHJlc2VudGF0aW9uXCJ9KV19fSldfX0pKSxhLmtsYXNzLnRhYmxlLCdpZD1cIicrdC4kbm9kZVswXS5pZCsnX3RhYmxlXCIgJytyLmFyaWFBdHRyKHtyb2xlOlwiZ3JpZFwiLGNvbnRyb2xzOnQuJG5vZGVbMF0uaWQscmVhZG9ubHk6ITB9KSksYS5rbGFzcy5jYWxlbmRhcl9jb250YWluZXIpK3Iubm9kZShcImRpdlwiLHIubm9kZShcImJ1dHRvblwiLGEudG9kYXksXCJidG4tZmxhdCBwaWNrZXJfX3RvZGF5XCIsXCJ0eXBlPWJ1dHRvbiBkYXRhLXBpY2s9XCIrcy5waWNrKyhlJiYhdC5kaXNhYmxlZChzKT9cIlwiOlwiIGRpc2FibGVkXCIpK1wiIFwiK3IuYXJpYUF0dHIoe2NvbnRyb2xzOnQuJG5vZGVbMF0uaWR9KSkrci5ub2RlKFwiYnV0dG9uXCIsYS5jbGVhcixcImJ0bi1mbGF0IHBpY2tlcl9fY2xlYXJcIixcInR5cGU9YnV0dG9uIGRhdGEtY2xlYXI9MVwiKyhlP1wiXCI6XCIgZGlzYWJsZWRcIikrXCIgXCIrci5hcmlhQXR0cih7Y29udHJvbHM6dC4kbm9kZVswXS5pZH0pKStyLm5vZGUoXCJidXR0b25cIixhLmNsb3NlLFwiYnRuLWZsYXQgcGlja2VyX19jbG9zZVwiLFwidHlwZT1idXR0b24gZGF0YS1jbG9zZT10cnVlIFwiKyhlP1wiXCI6XCIgZGlzYWJsZWRcIikrXCIgXCIrci5hcmlhQXR0cih7Y29udHJvbHM6dC4kbm9kZVswXS5pZH0pKSxhLmtsYXNzLmZvb3Rlcil9LGEuZGVmYXVsdHM9ZnVuY3Rpb24oZSl7cmV0dXJue2xhYmVsTW9udGhOZXh0OlwiTmV4dCBtb250aFwiLGxhYmVsTW9udGhQcmV2OlwiUHJldmlvdXMgbW9udGhcIixsYWJlbE1vbnRoU2VsZWN0OlwiU2VsZWN0IGEgbW9udGhcIixsYWJlbFllYXJTZWxlY3Q6XCJTZWxlY3QgYSB5ZWFyXCIsbW9udGhzRnVsbDpbXCJKYW51YXJ5XCIsXCJGZWJydWFyeVwiLFwiTWFyY2hcIixcIkFwcmlsXCIsXCJNYXlcIixcIkp1bmVcIixcIkp1bHlcIixcIkF1Z3VzdFwiLFwiU2VwdGVtYmVyXCIsXCJPY3RvYmVyXCIsXCJOb3ZlbWJlclwiLFwiRGVjZW1iZXJcIl0sbW9udGhzU2hvcnQ6W1wiSmFuXCIsXCJGZWJcIixcIk1hclwiLFwiQXByXCIsXCJNYXlcIixcIkp1blwiLFwiSnVsXCIsXCJBdWdcIixcIlNlcFwiLFwiT2N0XCIsXCJOb3ZcIixcIkRlY1wiXSx3ZWVrZGF5c0Z1bGw6W1wiU3VuZGF5XCIsXCJNb25kYXlcIixcIlR1ZXNkYXlcIixcIldlZG5lc2RheVwiLFwiVGh1cnNkYXlcIixcIkZyaWRheVwiLFwiU2F0dXJkYXlcIl0sd2Vla2RheXNTaG9ydDpbXCJTdW5cIixcIk1vblwiLFwiVHVlXCIsXCJXZWRcIixcIlRodVwiLFwiRnJpXCIsXCJTYXRcIl0sd2Vla2RheXNMZXR0ZXI6W1wiU1wiLFwiTVwiLFwiVFwiLFwiV1wiLFwiVFwiLFwiRlwiLFwiU1wiXSx0b2RheTpcIlRvZGF5XCIsY2xlYXI6XCJDbGVhclwiLGNsb3NlOlwiQ2xvc2VcIixmb3JtYXQ6XCJkIG1tbW0sIHl5eXlcIixrbGFzczp7dGFibGU6ZStcInRhYmxlXCIsaGVhZGVyOmUrXCJoZWFkZXJcIixkYXRlX2Rpc3BsYXk6ZStcImRhdGUtZGlzcGxheVwiLGRheV9kaXNwbGF5OmUrXCJkYXktZGlzcGxheVwiLG1vbnRoX2Rpc3BsYXk6ZStcIm1vbnRoLWRpc3BsYXlcIix5ZWFyX2Rpc3BsYXk6ZStcInllYXItZGlzcGxheVwiLGNhbGVuZGFyX2NvbnRhaW5lcjplK1wiY2FsZW5kYXItY29udGFpbmVyXCIsbmF2UHJldjplK1wibmF2LS1wcmV2XCIsbmF2TmV4dDplK1wibmF2LS1uZXh0XCIsbmF2RGlzYWJsZWQ6ZStcIm5hdi0tZGlzYWJsZWRcIixtb250aDplK1wibW9udGhcIix5ZWFyOmUrXCJ5ZWFyXCIsc2VsZWN0TW9udGg6ZStcInNlbGVjdC0tbW9udGhcIixzZWxlY3RZZWFyOmUrXCJzZWxlY3QtLXllYXJcIix3ZWVrZGF5czplK1wid2Vla2RheVwiLGRheTplK1wiZGF5XCIsZGlzYWJsZWQ6ZStcImRheS0tZGlzYWJsZWRcIixzZWxlY3RlZDplK1wiZGF5LS1zZWxlY3RlZFwiLGhpZ2hsaWdodGVkOmUrXCJkYXktLWhpZ2hsaWdodGVkXCIsbm93OmUrXCJkYXktLXRvZGF5XCIsaW5mb2N1czplK1wiZGF5LS1pbmZvY3VzXCIsb3V0Zm9jdXM6ZStcImRheS0tb3V0Zm9jdXNcIixmb290ZXI6ZStcImZvb3RlclwiLGJ1dHRvbkNsZWFyOmUrXCJidXR0b24tLWNsZWFyXCIsYnV0dG9uVG9kYXk6ZStcImJ1dHRvbi0tdG9kYXlcIixidXR0b25DbG9zZTplK1wiYnV0dG9uLS1jbG9zZVwifX19KGUua2xhc3NlcygpLnBpY2tlcitcIl9fXCIpLGUuZXh0ZW5kKFwicGlja2FkYXRlXCIsYSl9KSxqUXVlcnkuZWFzaW5nLmpzd2luZz1qUXVlcnkuZWFzaW5nLnN3aW5nLGpRdWVyeS5leHRlbmQoalF1ZXJ5LmVhc2luZyx7ZGVmOlwiZWFzZU91dFF1YWRcIixzd2luZzpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybiBqUXVlcnkuZWFzaW5nW2pRdWVyeS5lYXNpbmcuZGVmXShlLHQsaSxuLHIpfSxlYXNlSW5RdWFkOmZ1bmN0aW9uKGUsdCxpLG4scil7cmV0dXJuIG4qKHQvPXIpKnQraX0sZWFzZU91dFF1YWQ6ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4tbioodC89cikqKHQtMikraX0sZWFzZUluT3V0UXVhZDpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybih0Lz1yLzIpPDE/bi8yKnQqdCtpOi1uLzIqKC0tdCoodC0yKS0xKStpfSxlYXNlSW5DdWJpYzpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybiBuKih0Lz1yKSp0KnQraX0sZWFzZU91dEN1YmljOmZ1bmN0aW9uKGUsdCxpLG4scil7cmV0dXJuIG4qKCh0PXQvci0xKSp0KnQrMSkraX0sZWFzZUluT3V0Q3ViaWM6ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4odC89ci8yKTwxP24vMip0KnQqdCtpOm4vMiooKHQtPTIpKnQqdCsyKStpfSxlYXNlSW5RdWFydDpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybiBuKih0Lz1yKSp0KnQqdCtpfSxlYXNlT3V0UXVhcnQ6ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4tbiooKHQ9dC9yLTEpKnQqdCp0LTEpK2l9LGVhc2VJbk91dFF1YXJ0OmZ1bmN0aW9uKGUsdCxpLG4scil7cmV0dXJuKHQvPXIvMik8MT9uLzIqdCp0KnQqdCtpOi1uLzIqKCh0LT0yKSp0KnQqdC0yKStpfSxlYXNlSW5RdWludDpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybiBuKih0Lz1yKSp0KnQqdCp0K2l9LGVhc2VPdXRRdWludDpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybiBuKigodD10L3ItMSkqdCp0KnQqdCsxKStpfSxlYXNlSW5PdXRRdWludDpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybih0Lz1yLzIpPDE/bi8yKnQqdCp0KnQqdCtpOm4vMiooKHQtPTIpKnQqdCp0KnQrMikraX0sZWFzZUluU2luZTpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybi1uKk1hdGguY29zKHQvciooTWF0aC5QSS8yKSkrbitpfSxlYXNlT3V0U2luZTpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybiBuKk1hdGguc2luKHQvciooTWF0aC5QSS8yKSkraX0sZWFzZUluT3V0U2luZTpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybi1uLzIqKE1hdGguY29zKE1hdGguUEkqdC9yKS0xKStpfSxlYXNlSW5FeHBvOmZ1bmN0aW9uKGUsdCxpLG4scil7cmV0dXJuIDA9PXQ/aTpuKk1hdGgucG93KDIsMTAqKHQvci0xKSkraX0sZWFzZU91dEV4cG86ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4gdD09cj9pK246biooLU1hdGgucG93KDIsLTEwKnQvcikrMSkraX0sZWFzZUluT3V0RXhwbzpmdW5jdGlvbihlLHQsaSxuLHIpe3JldHVybiAwPT10P2k6dD09cj9pK246KHQvPXIvMik8MT9uLzIqTWF0aC5wb3coMiwxMCoodC0xKSkraTpuLzIqKC1NYXRoLnBvdygyLC0xMCotLXQpKzIpK2l9LGVhc2VJbkNpcmM6ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4tbiooTWF0aC5zcXJ0KDEtKHQvPXIpKnQpLTEpK2l9LGVhc2VPdXRDaXJjOmZ1bmN0aW9uKGUsdCxpLG4scil7cmV0dXJuIG4qTWF0aC5zcXJ0KDEtKHQ9dC9yLTEpKnQpK2l9LGVhc2VJbk91dENpcmM6ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4odC89ci8yKTwxPy1uLzIqKE1hdGguc3FydCgxLXQqdCktMSkraTpuLzIqKE1hdGguc3FydCgxLSh0LT0yKSp0KSsxKStpfSxlYXNlSW5FbGFzdGljOmZ1bmN0aW9uKGUsdCxpLG4scil7dmFyIGE9MS43MDE1OCxvPTAscz1uO2lmKDA9PXQpcmV0dXJuIGk7aWYoMT09KHQvPXIpKXJldHVybiBpK247aWYob3x8KG89LjMqciksczxNYXRoLmFicyhuKSl7cz1uO3ZhciBhPW8vNH1lbHNlIHZhciBhPW8vKDIqTWF0aC5QSSkqTWF0aC5hc2luKG4vcyk7cmV0dXJuLShzKk1hdGgucG93KDIsMTAqKHQtPTEpKSpNYXRoLnNpbigodCpyLWEpKigyKk1hdGguUEkpL28pKStpfSxlYXNlT3V0RWxhc3RpYzpmdW5jdGlvbihlLHQsaSxuLHIpe3ZhciBhPTEuNzAxNTgsbz0wLHM9bjtpZigwPT10KXJldHVybiBpO2lmKDE9PSh0Lz1yKSlyZXR1cm4gaStuO2lmKG98fChvPS4zKnIpLHM8TWF0aC5hYnMobikpe3M9bjt2YXIgYT1vLzR9ZWxzZSB2YXIgYT1vLygyKk1hdGguUEkpKk1hdGguYXNpbihuL3MpO3JldHVybiBzKk1hdGgucG93KDIsLTEwKnQpKk1hdGguc2luKCh0KnItYSkqKDIqTWF0aC5QSSkvbykrbitpfSxlYXNlSW5PdXRFbGFzdGljOmZ1bmN0aW9uKGUsdCxpLG4scil7dmFyIGE9MS43MDE1OCxvPTAscz1uO2lmKDA9PXQpcmV0dXJuIGk7aWYoMj09KHQvPXIvMikpcmV0dXJuIGkrbjtpZihvfHwobz1yKiguMyoxLjUpKSxzPE1hdGguYWJzKG4pKXtzPW47dmFyIGE9by80fWVsc2UgdmFyIGE9by8oMipNYXRoLlBJKSpNYXRoLmFzaW4obi9zKTtyZXR1cm4gMT50Py0uNSoocypNYXRoLnBvdygyLDEwKih0LT0xKSkqTWF0aC5zaW4oKHQqci1hKSooMipNYXRoLlBJKS9vKSkraTpzKk1hdGgucG93KDIsLTEwKih0LT0xKSkqTWF0aC5zaW4oKHQqci1hKSooMipNYXRoLlBJKS9vKSouNStuK2l9LGVhc2VJbkJhY2s6ZnVuY3Rpb24oZSx0LGksbixyLGEpe3JldHVybiB2b2lkIDA9PWEmJihhPTEuNzAxNTgpLG4qKHQvPXIpKnQqKChhKzEpKnQtYSkraX0sZWFzZU91dEJhY2s6ZnVuY3Rpb24oZSx0LGksbixyLGEpe3JldHVybiB2b2lkIDA9PWEmJihhPTEuNzAxNTgpLG4qKCh0PXQvci0xKSp0KigoYSsxKSp0K2EpKzEpK2l9LGVhc2VJbk91dEJhY2s6ZnVuY3Rpb24oZSx0LGksbixyLGEpe3JldHVybiB2b2lkIDA9PWEmJihhPTEuNzAxNTgpLCh0Lz1yLzIpPDE/bi8yKih0KnQqKCgoYSo9MS41MjUpKzEpKnQtYSkpK2k6bi8yKigodC09MikqdCooKChhKj0xLjUyNSkrMSkqdCthKSsyKStpfSxlYXNlSW5Cb3VuY2U6ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4gbi1qUXVlcnkuZWFzaW5nLmVhc2VPdXRCb3VuY2UoZSxyLXQsMCxuLHIpK2l9LGVhc2VPdXRCb3VuY2U6ZnVuY3Rpb24oZSx0LGksbixyKXtyZXR1cm4odC89cik8MS8yLjc1P24qKDcuNTYyNSp0KnQpK2k6Mi8yLjc1PnQ/biooNy41NjI1Kih0LT0xLjUvMi43NSkqdCsuNzUpK2k6Mi41LzIuNzU+dD9uKig3LjU2MjUqKHQtPTIuMjUvMi43NSkqdCsuOTM3NSkraTpuKig3LjU2MjUqKHQtPTIuNjI1LzIuNzUpKnQrLjk4NDM3NSkraX0sZWFzZUluT3V0Qm91bmNlOmZ1bmN0aW9uKGUsdCxpLG4scil7cmV0dXJuIHIvMj50Py41KmpRdWVyeS5lYXNpbmcuZWFzZUluQm91bmNlKGUsMip0LDAsbixyKStpOi41KmpRdWVyeS5lYXNpbmcuZWFzZU91dEJvdW5jZShlLDIqdC1yLDAsbixyKSsuNSpuK2l9fSksZnVuY3Rpb24oZSl7ZS5mbi5zY3JvbGxUbz1mdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzKS5zY3JvbGxUb3AoZSh0aGlzKS5zY3JvbGxUb3AoKS1lKHRoaXMpLm9mZnNldCgpLnRvcCtlKHQpLm9mZnNldCgpLnRvcCksdGhpc30sZS5mbi5kcm9wZG93bj1mdW5jdGlvbih0KXt2YXIgaT17aW5EdXJhdGlvbjozMDAsb3V0RHVyYXRpb246MjI1LGNvbnN0cmFpbl93aWR0aDohMCxob3ZlcjohMSxndXR0ZXI6MCxiZWxvd09yaWdpbjohMX07dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbygpe3ZvaWQgMCE9PW4uZGF0YShcImluZHVyYXRpb25cIikmJihyLmluRHVyYXRpb249bi5kYXRhKFwiaW5EdXJhdGlvblwiKSksdm9pZCAwIT09bi5kYXRhKFwib3V0ZHVyYXRpb25cIikmJihyLm91dER1cmF0aW9uPW4uZGF0YShcIm91dER1cmF0aW9uXCIpKSx2b2lkIDAhPT1uLmRhdGEoXCJjb25zdHJhaW53aWR0aFwiKSYmKHIuY29uc3RyYWluX3dpZHRoPW4uZGF0YShcImNvbnN0cmFpbndpZHRoXCIpKSx2b2lkIDAhPT1uLmRhdGEoXCJob3ZlclwiKSYmKHIuaG92ZXI9bi5kYXRhKFwiaG92ZXJcIikpLHZvaWQgMCE9PW4uZGF0YShcImd1dHRlclwiKSYmKHIuZ3V0dGVyPW4uZGF0YShcImd1dHRlclwiKSksdm9pZCAwIT09bi5kYXRhKFwiYmVsb3dvcmlnaW5cIikmJihyLmJlbG93T3JpZ2luPW4uZGF0YShcImJlbG93b3JpZ2luXCIpKX1mdW5jdGlvbiBzKCl7bygpLGEuYWRkQ2xhc3MoXCJhY3RpdmVcIiksci5jb25zdHJhaW5fd2lkdGg9PT0hMCYmYS5jc3MoXCJ3aWR0aFwiLG4ub3V0ZXJXaWR0aCgpKTt2YXIgdD0wO3IuYmVsb3dPcmlnaW49PT0hMCYmKHQ9bi5oZWlnaHQoKSk7dmFyIGk9bi5vZmZzZXQoKS5sZWZ0LHM9MCxsPXIuZ3V0dGVyO2krYS5pbm5lcldpZHRoKCk+ZSh3aW5kb3cpLndpZHRoKCkmJihzPW4uaW5uZXJXaWR0aCgpLWEuaW5uZXJXaWR0aCgpLGw9LTEqbCksYS5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6bi5wb3NpdGlvbigpLnRvcCt0LGxlZnQ6bi5wb3NpdGlvbigpLmxlZnQrcytsfSksYS5zdG9wKCEwLCEwKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2xpZGVEb3duKHtxdWV1ZTohMSxkdXJhdGlvbjpyLmluRHVyYXRpb24sZWFzaW5nOlwiZWFzZU91dEN1YmljXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pLmFuaW1hdGUoe29wYWNpdHk6MX0se3F1ZXVlOiExLGR1cmF0aW9uOnIuaW5EdXJhdGlvbixlYXNpbmc6XCJlYXNlT3V0U2luZVwifSl9ZnVuY3Rpb24gbCgpe2EuZmFkZU91dChyLm91dER1cmF0aW9uKSxhLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfXZhciBuPWUodGhpcykscj1lLmV4dGVuZCh7fSxpLHQpLGE9ZShcIiNcIituLmF0dHIoXCJkYXRhLWFjdGl2YXRlc1wiKSk7aWYobygpLG4uYWZ0ZXIoYSksci5ob3Zlcil7dmFyIHU9ITE7bi51bmJpbmQoXCJjbGljay5cIituLmF0dHIoXCJpZFwiKSksbi5vbihcIm1vdXNlZW50ZXJcIixmdW5jdGlvbihlKXt1PT09ITEmJihzKCksdT0hMCl9KSxuLm9uKFwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKHQpe3ZhciBpPXQudG9FbGVtZW50fHx0LnJlbGF0ZWRUYXJnZXQ7ZShpKS5jbG9zZXN0KFwiLmRyb3Bkb3duLWNvbnRlbnRcIikuaXMoYSl8fChhLnN0b3AoITAsITApLGwoKSx1PSExKX0pLGEub24oXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24odCl7dmFyIGk9dC50b0VsZW1lbnR8fHQucmVsYXRlZFRhcmdldDtlKGkpLmNsb3Nlc3QoXCIuZHJvcGRvd24tYnV0dG9uXCIpLmlzKG4pfHwoYS5zdG9wKCEwLCEwKSxsKCksdT0hMSl9KX1lbHNlIG4udW5iaW5kKFwiY2xpY2suXCIrbi5hdHRyKFwiaWRcIikpLG4uYmluZChcImNsaWNrLlwiK24uYXR0cihcImlkXCIpLGZ1bmN0aW9uKHQpe25bMF09PXQuY3VycmVudFRhcmdldCYmMD09PWUodC50YXJnZXQpLmNsb3Nlc3QoXCIuZHJvcGRvd24tY29udGVudFwiKS5sZW5ndGg/KHQucHJldmVudERlZmF1bHQoKSxzKCkpOm4uaGFzQ2xhc3MoXCJhY3RpdmVcIikmJihsKCksZShkb2N1bWVudCkudW5iaW5kKFwiY2xpY2suXCIrYS5hdHRyKFwiaWRcIikpKSxhLmhhc0NsYXNzKFwiYWN0aXZlXCIpJiZlKGRvY3VtZW50KS5iaW5kKFwiY2xpY2suXCIrYS5hdHRyKFwiaWRcIiksZnVuY3Rpb24odCl7IWEuaXModC50YXJnZXQpJiYhbi5pcyh0LnRhcmdldCkmJiFuLmZpbmQodC50YXJnZXQpLmxlbmd0aD4wJiYobCgpLGUoZG9jdW1lbnQpLnVuYmluZChcImNsaWNrLlwiK2EuYXR0cihcImlkXCIpKSl9KX0pO24ub24oXCJvcGVuXCIscyksbi5vbihcImNsb3NlXCIsbCl9KX0sZShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtlKFwiLmRyb3Bkb3duLWJ1dHRvblwiKS5kcm9wZG93bigpfSl9KGpRdWVyeSksTWF0ZXJpYWxpemU9e30sTWF0ZXJpYWxpemUuZ3VpZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gTWF0aC5mbG9vcig2NTUzNiooMStNYXRoLnJhbmRvbSgpKSkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSgpK2UoKStcIi1cIitlKCkrXCItXCIrZSgpK1wiLVwiK2UoKStcIi1cIitlKCkrZSgpK2UoKX19KCksTWF0ZXJpYWxpemUuZWxlbWVudE9yUGFyZW50SXNGaXhlZD1mdW5jdGlvbihlKXt2YXIgdD0kKGUpLGk9dC5hZGQodC5wYXJlbnRzKCkpLG49ITE7cmV0dXJuIGkuZWFjaChmdW5jdGlvbigpe3JldHVyblwiZml4ZWRcIj09PSQodGhpcykuY3NzKFwicG9zaXRpb25cIik/KG49ITAsITEpOnZvaWQgMH0pLG59O3ZhciBWZWw7VmVsPSQ/JC5WZWxvY2l0eTpWZWxvY2l0eSxmdW5jdGlvbihlKXtlKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2Z1bmN0aW9uIHIodCl7dmFyIG49dC5jc3MoXCJmb250LWZhbWlseVwiKSxyPXQuY3NzKFwiZm9udC1zaXplXCIpO3ImJmkuY3NzKFwiZm9udC1zaXplXCIsciksbiYmaS5jc3MoXCJmb250LWZhbWlseVwiLG4pLFwib2ZmXCI9PT10LmF0dHIoXCJ3cmFwXCIpJiZpLmNzcyhcIm92ZXJmbG93LXdyYXBcIixcIm5vcm1hbFwiKS5jc3MoXCJ3aGl0ZS1zcGFjZVwiLFwicHJlXCIpLGkudGV4dCh0LnZhbCgpK1wiXFxuXCIpO3ZhciBhPWkuaHRtbCgpLnJlcGxhY2UoL1xcbi9nLFwiPGJyPlwiKTtpLmh0bWwoYSksdC5pcyhcIjp2aXNpYmxlXCIpP2kuY3NzKFwid2lkdGhcIix0LndpZHRoKCkpOmkuY3NzKFwid2lkdGhcIixlKHdpbmRvdykud2lkdGgoKS8yKSx0LmNzcyhcImhlaWdodFwiLGkuaGVpZ2h0KCkpfU1hdGVyaWFsaXplLnVwZGF0ZVRleHRGaWVsZHM9ZnVuY3Rpb24oKXt2YXIgdD1cImlucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCB0ZXh0YXJlYVwiO2UodCkuZWFjaChmdW5jdGlvbih0LGkpe2UoaSkudmFsKCkubGVuZ3RoPjB8fHZvaWQgMCE9PWUodGhpcykuYXR0cihcInBsYWNlaG9sZGVyXCIpfHxlKGkpWzBdLnZhbGlkaXR5LmJhZElucHV0PT09ITA/ZSh0aGlzKS5zaWJsaW5ncyhcImxhYmVsLCBpXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpOmUodGhpcykuc2libGluZ3MoXCJsYWJlbCwgaVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX0pfTt2YXIgdD1cImlucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCB0ZXh0YXJlYVwiO2UoXCJpbnB1dFthdXRvZm9jdXNdXCIpLnNpYmxpbmdzKFwibGFiZWwsIGlcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIiksZShkb2N1bWVudCkub24oXCJjaGFuZ2VcIix0LGZ1bmN0aW9uKCl7KDAhPT1lKHRoaXMpLnZhbCgpLmxlbmd0aHx8dm9pZCAwIT09ZSh0aGlzKS5hdHRyKFwicGxhY2Vob2xkZXJcIikpJiZlKHRoaXMpLnNpYmxpbmdzKFwibGFiZWwsIGlcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIiksdmFsaWRhdGVfZmllbGQoZSh0aGlzKSl9KSxlKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe01hdGVyaWFsaXplLnVwZGF0ZVRleHRGaWVsZHMoKX0pLGUoZG9jdW1lbnQpLm9uKFwicmVzZXRcIixmdW5jdGlvbihpKXt2YXIgbj1lKGkudGFyZ2V0KTtuLmlzKFwiZm9ybVwiKSYmKG4uZmluZCh0KS5yZW1vdmVDbGFzcyhcInZhbGlkXCIpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKSxuLmZpbmQodCkuZWFjaChmdW5jdGlvbigpe1wiXCI9PT1lKHRoaXMpLmF0dHIoXCJ2YWx1ZVwiKSYmZSh0aGlzKS5zaWJsaW5ncyhcImxhYmVsLCBpXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfSksbi5maW5kKFwic2VsZWN0LmluaXRpYWxpemVkXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1uLmZpbmQoXCJvcHRpb25bc2VsZWN0ZWRdXCIpLnRleHQoKTtuLnNpYmxpbmdzKFwiaW5wdXQuc2VsZWN0LWRyb3Bkb3duXCIpLnZhbChlKX0pKX0pLGUoZG9jdW1lbnQpLm9uKFwiZm9jdXNcIix0LGZ1bmN0aW9uKCl7ZSh0aGlzKS5zaWJsaW5ncyhcImxhYmVsLCBpXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpfSksZShkb2N1bWVudCkub24oXCJibHVyXCIsdCxmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7MD09PXQudmFsKCkubGVuZ3RoJiZ0WzBdLnZhbGlkaXR5LmJhZElucHV0IT09ITAmJnZvaWQgMD09PXQuYXR0cihcInBsYWNlaG9sZGVyXCIpJiZ0LnNpYmxpbmdzKFwibGFiZWwsIGlcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksdmFsaWRhdGVfZmllbGQodCl9KSx2YWxpZGF0ZV9maWVsZD1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDAhPT1lLmF0dHIoXCJsZW5ndGhcIiksaT1wYXJzZUludChlLmF0dHIoXCJsZW5ndGhcIikpLG49ZS52YWwoKS5sZW5ndGg7MD09PWUudmFsKCkubGVuZ3RoJiZlWzBdLnZhbGlkaXR5LmJhZElucHV0PT09ITE/ZS5oYXNDbGFzcyhcInZhbGlkYXRlXCIpJiYoZS5yZW1vdmVDbGFzcyhcInZhbGlkXCIpLGUucmVtb3ZlQ2xhc3MoXCJpbnZhbGlkXCIpKTplLmhhc0NsYXNzKFwidmFsaWRhdGVcIikmJihlLmlzKFwiOnZhbGlkXCIpJiZ0JiZpPm58fGUuaXMoXCI6dmFsaWRcIikmJiF0PyhlLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKSxlLmFkZENsYXNzKFwidmFsaWRcIikpOihlLnJlbW92ZUNsYXNzKFwidmFsaWRcIiksZS5hZGRDbGFzcyhcImludmFsaWRcIikpKX07dmFyIGk9ZShcIi5oaWRkZW5kaXZcIikuZmlyc3QoKTtpLmxlbmd0aHx8KGk9ZSgnPGRpdiBjbGFzcz1cImhpZGRlbmRpdiBjb21tb25cIj48L2Rpdj4nKSxlKFwiYm9keVwiKS5hcHBlbmQoaSkpO3ZhciBuPVwiLm1hdGVyaWFsaXplLXRleHRhcmVhXCI7ZShuKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTt0LnZhbCgpLmxlbmd0aCYmcih0KX0pLGUoXCJib2R5XCIpLm9uKFwia2V5dXAga2V5ZG93blwiLG4sZnVuY3Rpb24oKXtyKGUodGhpcykpfSksZShcIi5maWxlLWZpZWxkXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLmZpbmQoXCJpbnB1dC5maWxlLXBhdGhcIik7ZSh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpLmNoYW5nZShmdW5jdGlvbigpe3QudmFsKGUodGhpcylbMF0uZmlsZXNbMF0ubmFtZSksdC50cmlnZ2VyKFwiY2hhbmdlXCIpfSl9KTt2YXIgcyxhPVwiaW5wdXRbdHlwZT1yYW5nZV1cIixvPSExO2UoYSkuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUoJzxzcGFuIGNsYXNzPVwidGh1bWJcIj48c3BhbiBjbGFzcz1cInZhbHVlXCI+PC9zcGFuPjwvc3Bhbj4nKTtlKHRoaXMpLmFmdGVyKHQpfSk7dmFyIGw9XCIucmFuZ2UtZmllbGRcIjtlKGRvY3VtZW50KS5vbihcImNoYW5nZVwiLGEsZnVuY3Rpb24odCl7dmFyIGk9ZSh0aGlzKS5zaWJsaW5ncyhcIi50aHVtYlwiKTtpLmZpbmQoXCIudmFsdWVcIikuaHRtbChlKHRoaXMpLnZhbCgpKX0pLGUoZG9jdW1lbnQpLm9uKFwiaW5wdXQgbW91c2Vkb3duIHRvdWNoc3RhcnRcIixhLGZ1bmN0aW9uKHQpe3ZhciBpPWUodGhpcykuc2libGluZ3MoXCIudGh1bWJcIik7aS5sZW5ndGg8PTAmJihpPWUoJzxzcGFuIGNsYXNzPVwidGh1bWJcIj48c3BhbiBjbGFzcz1cInZhbHVlXCI+PC9zcGFuPjwvc3Bhbj4nKSxlKHRoaXMpLmFwcGVuZChpKSksaS5maW5kKFwiLnZhbHVlXCIpLmh0bWwoZSh0aGlzKS52YWwoKSksbz0hMCxlKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGkuaGFzQ2xhc3MoXCJhY3RpdmVcIil8fGkudmVsb2NpdHkoe2hlaWdodDpcIjMwcHhcIix3aWR0aDpcIjMwcHhcIix0b3A6XCItMjBweFwiLG1hcmdpbkxlZnQ6XCItMTVweFwifSx7ZHVyYXRpb246MzAwLGVhc2luZzpcImVhc2VPdXRFeHBvXCJ9KSxzPXZvaWQgMD09PXQucGFnZVh8fG51bGw9PT10LnBhZ2VYP3Qub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYLWUodGhpcykub2Zmc2V0KCkubGVmdDp0LnBhZ2VYLWUodGhpcykub2Zmc2V0KCkubGVmdDt2YXIgbj1lKHRoaXMpLm91dGVyV2lkdGgoKTswPnM/cz0wOnM+biYmKHM9biksaS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5jc3MoXCJsZWZ0XCIscyksaS5maW5kKFwiLnZhbHVlXCIpLmh0bWwoZSh0aGlzKS52YWwoKSl9KSxlKGRvY3VtZW50KS5vbihcIm1vdXNldXAgdG91Y2hlbmRcIixsLGZ1bmN0aW9uKCl7bz0hMSxlKHRoaXMpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfSksZShkb2N1bWVudCkub24oXCJtb3VzZW1vdmUgdG91Y2htb3ZlXCIsbCxmdW5jdGlvbih0KXt2YXIgbixpPWUodGhpcykuY2hpbGRyZW4oXCIudGh1bWJcIik7aWYobyl7aS5oYXNDbGFzcyhcImFjdGl2ZVwiKXx8aS52ZWxvY2l0eSh7aGVpZ2h0OlwiMzBweFwiLHdpZHRoOlwiMzBweFwiLHRvcDpcIi0yMHB4XCIsbWFyZ2luTGVmdDpcIi0xNXB4XCJ9LHtkdXJhdGlvbjozMDAsZWFzaW5nOlwiZWFzZU91dEV4cG9cIn0pLG49dm9pZCAwPT09dC5wYWdlWHx8bnVsbD09PXQucGFnZVg/dC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVgtZSh0aGlzKS5vZmZzZXQoKS5sZWZ0OnQucGFnZVgtZSh0aGlzKS5vZmZzZXQoKS5sZWZ0O3ZhciByPWUodGhpcykub3V0ZXJXaWR0aCgpOzA+bj9uPTA6bj5yJiYobj1yKSxpLmFkZENsYXNzKFwiYWN0aXZlXCIpLmNzcyhcImxlZnRcIixuKSxpLmZpbmQoXCIudmFsdWVcIikuaHRtbChpLnNpYmxpbmdzKGEpLnZhbCgpKX19KSxlKGRvY3VtZW50KS5vbihcIm1vdXNlb3V0IHRvdWNobGVhdmVcIixsLGZ1bmN0aW9uKCl7aWYoIW8pe3ZhciB0PWUodGhpcykuY2hpbGRyZW4oXCIudGh1bWJcIik7dC5oYXNDbGFzcyhcImFjdGl2ZVwiKSYmdC52ZWxvY2l0eSh7aGVpZ2h0OlwiMFwiLHdpZHRoOlwiMFwiLHRvcDpcIjEwcHhcIixtYXJnaW5MZWZ0OlwiLTZweFwifSx7ZHVyYXRpb246MTAwfSksdC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX19KX0pLGUuZm4ubWF0ZXJpYWxfc2VsZWN0PWZ1bmN0aW9uKHQpe2UodGhpcykuZWFjaChmdW5jdGlvbigpe2lmKCRzZWxlY3Q9ZSh0aGlzKSwhJHNlbGVjdC5oYXNDbGFzcyhcImJyb3dzZXItZGVmYXVsdFwiKSl7dmFyIGk9JHNlbGVjdC5kYXRhKFwic2VsZWN0LWlkXCIpO2lmKGkmJigkc2VsZWN0LnBhcmVudCgpLmZpbmQoXCJpXCIpLnJlbW92ZSgpLCRzZWxlY3QucGFyZW50KCkuZmluZChcImlucHV0XCIpLnJlbW92ZSgpLCRzZWxlY3QudW53cmFwKCksZShcInVsI3NlbGVjdC1vcHRpb25zLVwiK2kpLnJlbW92ZSgpKSxcImRlc3Ryb3lcIj09PXQpcmV0dXJuIHZvaWQgJHNlbGVjdC5kYXRhKFwic2VsZWN0LWlkXCIsbnVsbCkucmVtb3ZlQ2xhc3MoXCJpbml0aWFsaXplZFwiKTt2YXIgbj1NYXRlcmlhbGl6ZS5ndWlkKCk7JHNlbGVjdC5kYXRhKFwic2VsZWN0LWlkXCIsbik7dmFyIHI9ZSgnPGRpdiBjbGFzcz1cInNlbGVjdC13cmFwcGVyXCI+PC9kaXY+Jyk7ci5hZGRDbGFzcygkc2VsZWN0LmF0dHIoXCJjbGFzc1wiKSk7dmFyIHMsYT1lKCc8dWwgaWQ9XCJzZWxlY3Qtb3B0aW9ucy0nK24rJ1wiIGNsYXNzPVwiZHJvcGRvd24tY29udGVudCBzZWxlY3QtZHJvcGRvd25cIj48L3VsPicpLG89JHNlbGVjdC5jaGlsZHJlbihcIm9wdGlvblwiKTtzPXZvaWQgMCE9PSRzZWxlY3QuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKT8kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIik6YS5maXJzdCgpLG8uZWFjaChmdW5jdGlvbigpe2EuYXBwZW5kKGUoJzxsaSBjbGFzcz1cIicrKGUodGhpcykuaXMoXCI6ZGlzYWJsZWRcIik/XCJkaXNhYmxlZFwiOlwiXCIpKydcIj48c3Bhbj4nK2UodGhpcykuaHRtbCgpK1wiPC9zcGFuPjwvbGk+XCIpKX0pLGEuZmluZChcImxpXCIpLmVhY2goZnVuY3Rpb24oaSl7dmFyIG49JHNlbGVjdDtlKHRoaXMpLmNsaWNrKGZ1bmN0aW9uKCl7ZSh0aGlzKS5oYXNDbGFzcyhcImRpc2FibGVkXCIpfHwobi5maW5kKFwib3B0aW9uXCIpLmVxKGkpLnByb3AoXCJzZWxlY3RlZFwiLCEwKSxuLnRyaWdnZXIoXCJjaGFuZ2VcIiksbi5zaWJsaW5ncyhcImlucHV0LnNlbGVjdC1kcm9wZG93blwiKS52YWwoZSh0aGlzKS50ZXh0KCkpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiZ0KCkpfSl9KSwkc2VsZWN0LndyYXAocik7dmFyIGw9ZSgnPHNwYW4gY2xhc3M9XCJjYXJldFwiPiYjOTY2MDs8L3NwYW4+Jyk7JHNlbGVjdC5pcyhcIjpkaXNhYmxlZFwiKSYmbC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO3ZhciB1PWUoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwic2VsZWN0LWRyb3Bkb3duXCIgcmVhZG9ubHk9XCJ0cnVlXCIgJysoJHNlbGVjdC5pcyhcIjpkaXNhYmxlZFwiKT9cImRpc2FibGVkXCI6XCJcIikrJyBkYXRhLWFjdGl2YXRlcz1cInNlbGVjdC1vcHRpb25zLScrbisnXCIgdmFsdWU9XCInK3MuaHRtbCgpKydcIi8+Jyk7JHNlbGVjdC5iZWZvcmUodSksdS5iZWZvcmUobCksZShcImJvZHlcIikuYXBwZW5kKGEpLCRzZWxlY3QuaXMoXCI6ZGlzYWJsZWRcIil8fHUuZHJvcGRvd24oe2hvdmVyOiExfSksJHNlbGVjdC5hdHRyKFwidGFiaW5kZXhcIikmJmUodVswXSkuYXR0cihcInRhYmluZGV4XCIsJHNlbGVjdC5hdHRyKFwidGFiaW5kZXhcIikpLCRzZWxlY3QuYWRkQ2xhc3MoXCJpbml0aWFsaXplZFwiKSx1Lm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe2UodGhpcykudHJpZ2dlcihcIm9wZW5cIikscz1lKHRoaXMpLnZhbCgpLHNlbGVjdGVkT3B0aW9uPWEuZmluZChcImxpXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpPT09cy50b0xvd2VyQ2FzZSgpfSlbMF0sYWN0aXZhdGVPcHRpb24oYSxzZWxlY3RlZE9wdGlvbil9KSx1Lm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7ZSh0aGlzKS50cmlnZ2VyKFwiY2xvc2VcIil9KSxhY3RpdmF0ZU9wdGlvbj1mdW5jdGlvbih0LGkpe3QuZmluZChcImxpLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxlKGkpLmFkZENsYXNzKFwiYWN0aXZlXCIpLHQuc2Nyb2xsVG8oaSl9LGZpbHRlclF1ZXJ5PVtdLG9uS2V5RG93bj1mdW5jdGlvbih0KXtpZig5PT10LndoaWNoKXJldHVybiB2b2lkIHUudHJpZ2dlcihcImNsb3NlXCIpO2lmKDQwPT10LndoaWNoJiYhYS5pcyhcIjp2aXNpYmxlXCIpKXJldHVybiB2b2lkIHUudHJpZ2dlcihcIm9wZW5cIik7aWYoMTMhPXQud2hpY2h8fGEuaXMoXCI6dmlzaWJsZVwiKSl7dC5wcmV2ZW50RGVmYXVsdCgpLGxldHRlcj1TdHJpbmcuZnJvbUNoYXJDb2RlKHQud2hpY2gpLnRvTG93ZXJDYXNlKCk7dmFyIGk9WzksMTMsMjcsMzgsNDBdO2xldHRlciYmLTE9PT1pLmluZGV4T2YodC53aGljaCkmJihmaWx0ZXJRdWVyeS5wdXNoKGxldHRlciksc3RyaW5nPWZpbHRlclF1ZXJ5LmpvaW4oXCJcIiksbmV3T3B0aW9uPWEuZmluZChcImxpXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAwPT09ZSh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHN0cmluZyl9KVswXSxuZXdPcHRpb24mJmFjdGl2YXRlT3B0aW9uKGEsbmV3T3B0aW9uKSksMTM9PXQud2hpY2gmJihhY3RpdmVPcHRpb249YS5maW5kKFwibGkuYWN0aXZlOm5vdCguZGlzYWJsZWQpXCIpWzBdLGFjdGl2ZU9wdGlvbiYmKGUoYWN0aXZlT3B0aW9uKS50cmlnZ2VyKFwiY2xpY2tcIiksdS50cmlnZ2VyKFwiY2xvc2VcIikpKSw0MD09dC53aGljaCYmKG5ld09wdGlvbj1hLmZpbmQoXCJsaS5hY3RpdmVcIikubmV4dChcImxpOm5vdCguZGlzYWJsZWQpXCIpWzBdLG5ld09wdGlvbiYmYWN0aXZhdGVPcHRpb24oYSxuZXdPcHRpb24pKSwyNz09dC53aGljaCYmdS50cmlnZ2VyKFwiY2xvc2VcIiksMzg9PXQud2hpY2gmJihuZXdPcHRpb249YS5maW5kKFwibGkuYWN0aXZlXCIpLnByZXYoXCJsaTpub3QoLmRpc2FibGVkKVwiKVswXSxuZXdPcHRpb24mJmFjdGl2YXRlT3B0aW9uKGEsbmV3T3B0aW9uKSksc2V0VGltZW91dChmdW5jdGlvbigpe2ZpbHRlclF1ZXJ5PVtdfSwxZTMpfX0sdS5vbihcImtleWRvd25cIixvbktleURvd24pfX0pfX0oalF1ZXJ5KSwhZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgdD1lLmxlbmd0aCxuPWkudHlwZShlKTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1ufHxpLmlzV2luZG93KGUpPyExOjE9PT1lLm5vZGVUeXBlJiZ0PyEwOlwiYXJyYXlcIj09PW58fDA9PT10fHxcIm51bWJlclwiPT10eXBlb2YgdCYmdD4wJiZ0LTEgaW4gZX1pZighZS5qUXVlcnkpe3ZhciBpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBpLmZuLmluaXQoZSx0KX07aS5pc1dpbmRvdz1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09ZS53aW5kb3d9LGkudHlwZT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lK1wiXCI6XCJvYmplY3RcIj09dHlwZW9mIGV8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGU/cltvLmNhbGwoZSldfHxcIm9iamVjdFwiOnR5cGVvZiBlfSxpLmlzQXJyYXk9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJhcnJheVwiPT09aS50eXBlKGUpfSxpLmlzUGxhaW5PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoIWV8fFwib2JqZWN0XCIhPT1pLnR5cGUoZSl8fGUubm9kZVR5cGV8fGkuaXNXaW5kb3coZSkpcmV0dXJuITE7dHJ5e2lmKGUuY29uc3RydWN0b3ImJiFhLmNhbGwoZSxcImNvbnN0cnVjdG9yXCIpJiYhYS5jYWxsKGUuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKSlyZXR1cm4hMX1jYXRjaChuKXtyZXR1cm4hMX1mb3IodCBpbiBlKTtyZXR1cm4gdm9pZCAwPT09dHx8YS5jYWxsKGUsdCl9LGkuZWFjaD1mdW5jdGlvbihlLGksbil7dmFyIHIsYT0wLG89ZS5sZW5ndGgscz10KGUpO2lmKG4pe2lmKHMpZm9yKDtvPmEmJihyPWkuYXBwbHkoZVthXSxuKSxyIT09ITEpO2ErKyk7ZWxzZSBmb3IoYSBpbiBlKWlmKHI9aS5hcHBseShlW2FdLG4pLHI9PT0hMSlicmVha31lbHNlIGlmKHMpZm9yKDtvPmEmJihyPWkuY2FsbChlW2FdLGEsZVthXSksciE9PSExKTthKyspO2Vsc2UgZm9yKGEgaW4gZSlpZihyPWkuY2FsbChlW2FdLGEsZVthXSkscj09PSExKWJyZWFrO3JldHVybiBlfSxpLmRhdGE9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXIpe3ZhciBhPWVbaS5leHBhbmRvXSxvPWEmJm5bYV07aWYodm9pZCAwPT09dClyZXR1cm4gbztpZihvJiZ0IGluIG8pcmV0dXJuIG9bdF19ZWxzZSBpZih2b2lkIDAhPT10KXt2YXIgYT1lW2kuZXhwYW5kb118fChlW2kuZXhwYW5kb109KytpLnV1aWQpO3JldHVybiBuW2FdPW5bYV18fHt9LG5bYV1bdF09cixyfX0saS5yZW1vdmVEYXRhPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVtpLmV4cGFuZG9dLGE9ciYmbltyXTthJiZpLmVhY2godCxmdW5jdGlvbihlLHQpe2RlbGV0ZSBhW3RdfSl9LGkuZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsYSxvLHM9YXJndW1lbnRzWzBdfHx7fSxsPTEsdT1hcmd1bWVudHMubGVuZ3RoLGM9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgcyYmKGM9cyxzPWFyZ3VtZW50c1tsXXx8e30sbCsrKSxcIm9iamVjdFwiIT10eXBlb2YgcyYmXCJmdW5jdGlvblwiIT09aS50eXBlKHMpJiYocz17fSksbD09PXUmJihzPXRoaXMsbC0tKTt1Pmw7bCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1tsXSkpZm9yKHIgaW4gYSllPXNbcl0sbj1hW3JdLHMhPT1uJiYoYyYmbiYmKGkuaXNQbGFpbk9iamVjdChuKXx8KHQ9aS5pc0FycmF5KG4pKSk/KHQ/KHQ9ITEsbz1lJiZpLmlzQXJyYXkoZSk/ZTpbXSk6bz1lJiZpLmlzUGxhaW5PYmplY3QoZSk/ZTp7fSxzW3JdPWkuZXh0ZW5kKGMsbyxuKSk6dm9pZCAwIT09biYmKHNbcl09bikpO3JldHVybiBzfSxpLnF1ZXVlPWZ1bmN0aW9uKGUsbixyKXtmdW5jdGlvbiBhKGUsaSl7dmFyIG49aXx8W107cmV0dXJuIG51bGwhPWUmJih0KE9iamVjdChlKSk/IWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPSt0Lmxlbmd0aCxuPTAscj1lLmxlbmd0aDtpPm47KWVbcisrXT10W24rK107aWYoaSE9PWkpZm9yKDt2b2lkIDAhPT10W25dOyllW3IrK109dFtuKytdO3JldHVybiBlLmxlbmd0aD1yLGV9KG4sXCJzdHJpbmdcIj09dHlwZW9mIGU/W2VdOmUpOltdLnB1c2guY2FsbChuLGUpKSxufWlmKGUpe249KG58fFwiZnhcIikrXCJxdWV1ZVwiO3ZhciBvPWkuZGF0YShlLG4pO3JldHVybiByPyghb3x8aS5pc0FycmF5KHIpP289aS5kYXRhKGUsbixhKHIpKTpvLnB1c2gociksbyk6b3x8W119fSxpLmRlcXVldWU9ZnVuY3Rpb24oZSx0KXtpLmVhY2goZS5ub2RlVHlwZT9bZV06ZSxmdW5jdGlvbihlLG4pe3Q9dHx8XCJmeFwiO3ZhciByPWkucXVldWUobix0KSxhPXIuc2hpZnQoKTtcImlucHJvZ3Jlc3NcIj09PWEmJihhPXIuc2hpZnQoKSksYSYmKFwiZnhcIj09PXQmJnIudW5zaGlmdChcImlucHJvZ3Jlc3NcIiksYS5jYWxsKG4sZnVuY3Rpb24oKXtpLmRlcXVldWUobix0KX0pKX0pfSxpLmZuPWkucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGUpe2lmKGUubm9kZVR5cGUpcmV0dXJuIHRoaXNbMF09ZSx0aGlzO3Rocm93IG5ldyBFcnJvcihcIk5vdCBhIERPTSBub2RlLlwiKX0sb2Zmc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/dGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTp7dG9wOjAsbGVmdDowfTtyZXR1cm57dG9wOnQudG9wKyhlLnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5zY3JvbGxUb3B8fDApLShkb2N1bWVudC5jbGllbnRUb3B8fDApLGxlZnQ6dC5sZWZ0KyhlLnBhZ2VYT2Zmc2V0fHxkb2N1bWVudC5zY3JvbGxMZWZ0fHwwKS0oZG9jdW1lbnQuY2xpZW50TGVmdHx8MCl9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtmb3IodmFyIGU9dGhpcy5vZmZzZXRQYXJlbnR8fGRvY3VtZW50O2UmJlwiaHRtbFwiPT09IWUubm9kZVR5cGUudG9Mb3dlckNhc2UmJlwic3RhdGljXCI9PT1lLnN0eWxlLnBvc2l0aW9uOyllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxkb2N1bWVudH12YXIgdD10aGlzWzBdLGU9ZS5hcHBseSh0KSxuPXRoaXMub2Zmc2V0KCkscj0vXig/OmJvZHl8aHRtbCkkL2kudGVzdChlLm5vZGVOYW1lKT97dG9wOjAsbGVmdDowfTppKGUpLm9mZnNldCgpO3JldHVybiBuLnRvcC09cGFyc2VGbG9hdCh0LnN0eWxlLm1hcmdpblRvcCl8fDAsbi5sZWZ0LT1wYXJzZUZsb2F0KHQuc3R5bGUubWFyZ2luTGVmdCl8fDAsZS5zdHlsZSYmKHIudG9wKz1wYXJzZUZsb2F0KGUuc3R5bGUuYm9yZGVyVG9wV2lkdGgpfHwwLHIubGVmdCs9cGFyc2VGbG9hdChlLnN0eWxlLmJvcmRlckxlZnRXaWR0aCl8fDApLHt0b3A6bi50b3Atci50b3AsbGVmdDpuLmxlZnQtci5sZWZ0fX19O3ZhciBuPXt9O2kuZXhwYW5kbz1cInZlbG9jaXR5XCIrKG5ldyBEYXRlKS5nZXRUaW1lKCksaS51dWlkPTA7Zm9yKHZhciByPXt9LGE9ci5oYXNPd25Qcm9wZXJ0eSxvPXIudG9TdHJpbmcscz1cIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIiksbD0wO2w8cy5sZW5ndGg7bCsrKXJbXCJbb2JqZWN0IFwiK3NbbF0rXCJdXCJdPXNbbF0udG9Mb3dlckNhc2UoKTtpLmZuLmluaXQucHJvdG90eXBlPWkuZm4sZS5WZWxvY2l0eT17VXRpbGl0aWVzOml9fX0od2luZG93KSxmdW5jdGlvbihlKXtcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6ZSgpfShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQsaSxuKXtmdW5jdGlvbiByKGUpe2Zvcih2YXIgdD0tMSxpPWU/ZS5sZW5ndGg6MCxuPVtdOysrdDxpOyl7dmFyIHI9ZVt0XTtyJiZuLnB1c2gocil9cmV0dXJuIG59ZnVuY3Rpb24gYShlKXtyZXR1cm4gaC5pc1dyYXBwZWQoZSk/ZT1bXS5zbGljZS5jYWxsKGUpOmguaXNOb2RlKGUpJiYoZT1bZV0pLGV9ZnVuY3Rpb24gbyhlKXt2YXIgdD12LmRhdGEoZSxcInZlbG9jaXR5XCIpO3JldHVybiBudWxsPT09dD9uOnR9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucm91bmQodCplKSooMS9lKX19ZnVuY3Rpb24gbChlLGksbixyKXtmdW5jdGlvbiBhKGUsdCl7cmV0dXJuIDEtMyp0KzMqZX1mdW5jdGlvbiBvKGUsdCl7cmV0dXJuIDMqdC02KmV9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gMyplfWZ1bmN0aW9uIGwoZSx0LGkpe3JldHVybigoYSh0LGkpKmUrbyh0LGkpKSplK3ModCkpKmV9ZnVuY3Rpb24gdShlLHQsaSl7cmV0dXJuIDMqYSh0LGkpKmUqZSsyKm8odCxpKSplK3ModCl9ZnVuY3Rpb24gYyh0LGkpe2Zvcih2YXIgcj0wO3Y+cjsrK3Ipe3ZhciBhPXUoaSxlLG4pO2lmKDA9PT1hKXJldHVybiBpO3ZhciBvPWwoaSxlLG4pLXQ7aS09by9hfXJldHVybiBpfWZ1bmN0aW9uIGYoKXtmb3IodmFyIHQ9MDtiPnQ7Kyt0KWtbdF09bCh0KncsZSxuKX1mdW5jdGlvbiBkKHQsaSxyKXt2YXIgYSxvLHM9MDtkbyBvPWkrKHItaSkvMixhPWwobyxlLG4pLXQsYT4wP3I9bzppPW87d2hpbGUoTWF0aC5hYnMoYSk+ZyYmKytzPHkpO3JldHVybiBvfWZ1bmN0aW9uIHAodCl7Zm9yKHZhciBpPTAscj0xLGE9Yi0xO3IhPWEmJmtbcl08PXQ7KytyKWkrPXc7LS1yO3ZhciBvPSh0LWtbcl0pLyhrW3IrMV0ta1tyXSkscz1pK28qdyxsPXUocyxlLG4pO3JldHVybiBsPj1tP2ModCxzKTowPT1sP3M6ZCh0LGksaSt3KX1mdW5jdGlvbiBoKCl7Uz0hMCwoZSE9aXx8biE9cikmJmYoKX12YXIgdj00LG09LjAwMSxnPTFlLTcseT0xMCxiPTExLHc9MS8oYi0xKSx4PVwiRmxvYXQzMkFycmF5XCJpbiB0O2lmKDQhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgQz0wOzQ+QzsrK0MpaWYoXCJudW1iZXJcIiE9dHlwZW9mIGFyZ3VtZW50c1tDXXx8aXNOYU4oYXJndW1lbnRzW0NdKXx8IWlzRmluaXRlKGFyZ3VtZW50c1tDXSkpcmV0dXJuITE7ZT1NYXRoLm1pbihlLDEpLG49TWF0aC5taW4obiwxKSxlPU1hdGgubWF4KGUsMCksbj1NYXRoLm1heChuLDApO3ZhciBrPXg/bmV3IEZsb2F0MzJBcnJheShiKTpuZXcgQXJyYXkoYiksUz0hMSxUPWZ1bmN0aW9uKHQpe3JldHVybiBTfHxoKCksZT09PWkmJm49PT1yP3Q6MD09PXQ/MDoxPT09dD8xOmwocCh0KSxpLHIpfTtULmdldENvbnRyb2xQb2ludHM9ZnVuY3Rpb24oKXtyZXR1cm5be3g6ZSx5Oml9LHt4Om4seTpyfV19O3ZhciBPPVwiZ2VuZXJhdGVCZXppZXIoXCIrW2UsaSxuLHJdK1wiKVwiO3JldHVybiBULnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIE99LFR9ZnVuY3Rpb24gdShlLHQpe3ZhciBpPWU7cmV0dXJuIGguaXNTdHJpbmcoZSk/Yi5FYXNpbmdzW2VdfHwoaT0hMSk6aT1oLmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aD9zLmFwcGx5KG51bGwsZSk6aC5pc0FycmF5KGUpJiYyPT09ZS5sZW5ndGg/dy5hcHBseShudWxsLGUuY29uY2F0KFt0XSkpOmguaXNBcnJheShlKSYmND09PWUubGVuZ3RoP2wuYXBwbHkobnVsbCxlKTohMSxpPT09ITEmJihpPWIuRWFzaW5nc1tiLmRlZmF1bHRzLmVhc2luZ10/Yi5kZWZhdWx0cy5lYXNpbmc6eSksaX1mdW5jdGlvbiBjKGUpe2lmKGUpe3ZhciB0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9Yi5TdGF0ZS5jYWxscy5sZW5ndGg7aT4xZTQmJihiLlN0YXRlLmNhbGxzPXIoYi5TdGF0ZS5jYWxscykpO2Zvcih2YXIgYT0wO2k+YTthKyspaWYoYi5TdGF0ZS5jYWxsc1thXSl7dmFyIHM9Yi5TdGF0ZS5jYWxsc1thXSxsPXNbMF0sdT1zWzJdLGQ9c1szXSxwPSEhZCxtPW51bGw7ZHx8KGQ9Yi5TdGF0ZS5jYWxsc1thXVszXT10LTE2KTtmb3IodmFyIGc9TWF0aC5taW4oKHQtZCkvdS5kdXJhdGlvbiwxKSx5PTAsdz1sLmxlbmd0aDt3Pnk7eSsrKXt2YXIgQz1sW3ldLFM9Qy5lbGVtZW50O2lmKG8oUykpe3ZhciBUPSExO2lmKHUuZGlzcGxheSE9PW4mJm51bGwhPT11LmRpc3BsYXkmJlwibm9uZVwiIT09dS5kaXNwbGF5KXtpZihcImZsZXhcIj09PXUuZGlzcGxheSl7dmFyIE89W1wiLXdlYmtpdC1ib3hcIixcIi1tb3otYm94XCIsXCItbXMtZmxleGJveFwiLFwiLXdlYmtpdC1mbGV4XCJdO3YuZWFjaChPLGZ1bmN0aW9uKGUsdCl7eC5zZXRQcm9wZXJ0eVZhbHVlKFMsXCJkaXNwbGF5XCIsdCl9KX14LnNldFByb3BlcnR5VmFsdWUoUyxcImRpc3BsYXlcIix1LmRpc3BsYXkpfXUudmlzaWJpbGl0eSE9PW4mJlwiaGlkZGVuXCIhPT11LnZpc2liaWxpdHkmJnguc2V0UHJvcGVydHlWYWx1ZShTLFwidmlzaWJpbGl0eVwiLHUudmlzaWJpbGl0eSk7Zm9yKHZhciBFIGluIEMpaWYoXCJlbGVtZW50XCIhPT1FKXt2YXIgQSxQPUNbRV0sJD1oLmlzU3RyaW5nKFAuZWFzaW5nKT9iLkVhc2luZ3NbUC5lYXNpbmddOlAuZWFzaW5nO2lmKDE9PT1nKUE9UC5lbmRWYWx1ZTtlbHNle3ZhciBNPVAuZW5kVmFsdWUtUC5zdGFydFZhbHVlO2lmKEE9UC5zdGFydFZhbHVlK00qJChnLHUsTSksIXAmJkE9PT1QLmN1cnJlbnRWYWx1ZSljb250aW51ZX1pZihQLmN1cnJlbnRWYWx1ZT1BLFwidHdlZW5cIj09PUUpbT1BO2Vsc2V7aWYoeC5Ib29rcy5yZWdpc3RlcmVkW0VdKXt2YXIgVj14Lkhvb2tzLmdldFJvb3QoRSksST1vKFMpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbVl07SSYmKFAucm9vdFByb3BlcnR5VmFsdWU9SSl9dmFyIEQ9eC5zZXRQcm9wZXJ0eVZhbHVlKFMsRSxQLmN1cnJlbnRWYWx1ZSsoMD09PXBhcnNlRmxvYXQoQSk/XCJcIjpQLnVuaXRUeXBlKSxQLnJvb3RQcm9wZXJ0eVZhbHVlLFAuc2Nyb2xsRGF0YSk7eC5Ib29rcy5yZWdpc3RlcmVkW0VdJiYobyhTKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW1ZdPXguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtWXT94Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbVl0oXCJleHRyYWN0XCIsbnVsbCxEWzFdKTpEWzFdKSxcInRyYW5zZm9ybVwiPT09RFswXSYmKFQ9ITApfX11Lm1vYmlsZUhBJiZvKFMpLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkPT09biYmKG8oUykudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2Q9XCIoMHB4LCAwcHgsIDBweClcIixUPSEwKSxUJiZ4LmZsdXNoVHJhbnNmb3JtQ2FjaGUoUyl9fXUuZGlzcGxheSE9PW4mJlwibm9uZVwiIT09dS5kaXNwbGF5JiYoYi5TdGF0ZS5jYWxsc1thXVsyXS5kaXNwbGF5PSExKSx1LnZpc2liaWxpdHkhPT1uJiZcImhpZGRlblwiIT09dS52aXNpYmlsaXR5JiYoYi5TdGF0ZS5jYWxsc1thXVsyXS52aXNpYmlsaXR5PSExKSx1LnByb2dyZXNzJiZ1LnByb2dyZXNzLmNhbGwoc1sxXSxzWzFdLGcsTWF0aC5tYXgoMCxkK3UuZHVyYXRpb24tdCksZCxtKSwxPT09ZyYmZihhKX19Yi5TdGF0ZS5pc1RpY2tpbmcmJmsoYyl9ZnVuY3Rpb24gZihlLHQpe2lmKCFiLlN0YXRlLmNhbGxzW2VdKXJldHVybiExO2Zvcih2YXIgaT1iLlN0YXRlLmNhbGxzW2VdWzBdLHI9Yi5TdGF0ZS5jYWxsc1tlXVsxXSxhPWIuU3RhdGUuY2FsbHNbZV1bMl0scz1iLlN0YXRlLmNhbGxzW2VdWzRdLGw9ITEsdT0wLGM9aS5sZW5ndGg7Yz51O3UrKyl7dmFyIGY9aVt1XS5lbGVtZW50O2lmKHR8fGEubG9vcHx8KFwibm9uZVwiPT09YS5kaXNwbGF5JiZ4LnNldFByb3BlcnR5VmFsdWUoZixcImRpc3BsYXlcIixhLmRpc3BsYXkpLFwiaGlkZGVuXCI9PT1hLnZpc2liaWxpdHkmJnguc2V0UHJvcGVydHlWYWx1ZShmLFwidmlzaWJpbGl0eVwiLGEudmlzaWJpbGl0eSkpLGEubG9vcCE9PSEwJiYodi5xdWV1ZShmKVsxXT09PW58fCEvXFwudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZy9pLnRlc3Qodi5xdWV1ZShmKVsxXSkpJiZvKGYpKXtvKGYpLmlzQW5pbWF0aW5nPSExLG8oZikucm9vdFByb3BlcnR5VmFsdWVDYWNoZT17fTt2YXIgZD0hMTt2LmVhY2goeC5MaXN0cy50cmFuc2Zvcm1zM0QsZnVuY3Rpb24oZSx0KXt2YXIgaT0vXnNjYWxlLy50ZXN0KHQpPzE6MCxyPW8oZikudHJhbnNmb3JtQ2FjaGVbdF07byhmKS50cmFuc2Zvcm1DYWNoZVt0XSE9PW4mJm5ldyBSZWdFeHAoXCJeXFxcXChcIitpK1wiW14uXVwiKS50ZXN0KHIpJiYoZD0hMCxkZWxldGUgbyhmKS50cmFuc2Zvcm1DYWNoZVt0XSl9KSxhLm1vYmlsZUhBJiYoZD0hMCxkZWxldGUgbyhmKS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZCksZCYmeC5mbHVzaFRyYW5zZm9ybUNhY2hlKGYpLHguVmFsdWVzLnJlbW92ZUNsYXNzKGYsXCJ2ZWxvY2l0eS1hbmltYXRpbmdcIil9aWYoIXQmJmEuY29tcGxldGUmJiFhLmxvb3AmJnU9PT1jLTEpdHJ5e2EuY29tcGxldGUuY2FsbChyLHIpfWNhdGNoKHApe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBwfSwxKX1zJiZhLmxvb3AhPT0hMCYmcyhyKSxvKGYpJiZhLmxvb3A9PT0hMCYmIXQmJih2LmVhY2gobyhmKS50d2VlbnNDb250YWluZXIsZnVuY3Rpb24oZSx0KXsvXnJvdGF0ZS8udGVzdChlKSYmMzYwPT09cGFyc2VGbG9hdCh0LmVuZFZhbHVlKSYmKHQuZW5kVmFsdWU9MCx0LnN0YXJ0VmFsdWU9MzYwKSwvXmJhY2tncm91bmRQb3NpdGlvbi8udGVzdChlKSYmMTAwPT09cGFyc2VGbG9hdCh0LmVuZFZhbHVlKSYmXCIlXCI9PT10LnVuaXRUeXBlJiYodC5lbmRWYWx1ZT0wLHQuc3RhcnRWYWx1ZT0xMDApfSksYihmLFwicmV2ZXJzZVwiLHtsb29wOiEwLGRlbGF5OmEuZGVsYXl9KSksYS5xdWV1ZSE9PSExJiZ2LmRlcXVldWUoZixhLnF1ZXVlKX1iLlN0YXRlLmNhbGxzW2VdPSExO2Zvcih2YXIgaD0wLG09Yi5TdGF0ZS5jYWxscy5sZW5ndGg7bT5oO2grKylpZihiLlN0YXRlLmNhbGxzW2hdIT09ITEpe2w9ITA7YnJlYWt9bD09PSExJiYoYi5TdGF0ZS5pc1RpY2tpbmc9ITEsZGVsZXRlIGIuU3RhdGUuY2FsbHMsYi5TdGF0ZS5jYWxscz1bXSl9dmFyIHYsZD1mdW5jdGlvbigpe2lmKGkuZG9jdW1lbnRNb2RlKXJldHVybiBpLmRvY3VtZW50TW9kZTtmb3IodmFyIGU9NztlPjQ7ZS0tKXt2YXIgdD1pLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYodC5pbm5lckhUTUw9XCI8IS0tW2lmIElFIFwiK2UrXCJdPjxzcGFuPjwvc3Bhbj48IVtlbmRpZl0tLT5cIix0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3BhblwiKS5sZW5ndGgpcmV0dXJuIHQ9bnVsbCxlfXJldHVybiBufSgpLHA9ZnVuY3Rpb24oKXt2YXIgZT0wO3JldHVybiB0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKHQpe3ZhciBuLGk9KG5ldyBEYXRlKS5nZXRUaW1lKCk7cmV0dXJuIG49TWF0aC5tYXgoMCwxNi0oaS1lKSksZT1pK24sc2V0VGltZW91dChmdW5jdGlvbigpe3QoaStuKX0sbil9fSgpLGg9e2lzU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlfSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0saXNGdW5jdGlvbjpmdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgRnVuY3Rpb25dXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LGlzTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5ub2RlVHlwZX0saXNOb2RlTGlzdDpmdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmL15cXFtvYmplY3QgKEhUTUxDb2xsZWN0aW9ufE5vZGVMaXN0fE9iamVjdClcXF0kLy50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSkmJmUubGVuZ3RoIT09biYmKDA9PT1lLmxlbmd0aHx8XCJvYmplY3RcIj09dHlwZW9mIGVbMF0mJmVbMF0ubm9kZVR5cGU+MCl9LGlzV3JhcHBlZDpmdW5jdGlvbihlKXtyZXR1cm4gZSYmKGUuanF1ZXJ5fHx0LlplcHRvJiZ0LlplcHRvLnplcHRvLmlzWihlKSl9LGlzU1ZHOmZ1bmN0aW9uKGUpe3JldHVybiB0LlNWR0VsZW1lbnQmJmUgaW5zdGFuY2VvZiB0LlNWR0VsZW1lbnR9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9fSxtPSExO2lmKGUuZm4mJmUuZm4uanF1ZXJ5Pyh2PWUsbT0hMCk6dj10LlZlbG9jaXR5LlV0aWxpdGllcyw4Pj1kJiYhbSl0aHJvdyBuZXcgRXJyb3IoXCJWZWxvY2l0eTogSUU4IGFuZCBiZWxvdyByZXF1aXJlIGpRdWVyeSB0byBiZSBsb2FkZWQgYmVmb3JlIFZlbG9jaXR5LlwiKTtpZig3Pj1kKXJldHVybiB2b2lkKGpRdWVyeS5mbi52ZWxvY2l0eT1qUXVlcnkuZm4uYW5pbWF0ZSk7dmFyIGc9NDAwLHk9XCJzd2luZ1wiLGI9e1N0YXRlOntpc01vYmlsZTovQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaXNBbmRyb2lkOi9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxpc0dpbmdlcmJyZWFkOi9BbmRyb2lkIDJcXC4zXFwuWzMtN10vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGlzQ2hyb21lOnQuY2hyb21lLGlzRmlyZWZveDovRmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscHJlZml4RWxlbWVudDppLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikscHJlZml4TWF0Y2hlczp7fSxzY3JvbGxBbmNob3I6bnVsbCxzY3JvbGxQcm9wZXJ0eUxlZnQ6bnVsbCxzY3JvbGxQcm9wZXJ0eVRvcDpudWxsLGlzVGlja2luZzohMSxjYWxsczpbXX0sQ1NTOnt9LFV0aWxpdGllczp2LFJlZGlyZWN0czp7fSxFYXNpbmdzOnt9LFByb21pc2U6dC5Qcm9taXNlLGRlZmF1bHRzOntxdWV1ZTpcIlwiLGR1cmF0aW9uOmcsZWFzaW5nOnksYmVnaW46bixjb21wbGV0ZTpuLHByb2dyZXNzOm4sZGlzcGxheTpuLHZpc2liaWxpdHk6bixsb29wOiExLGRlbGF5OiExLG1vYmlsZUhBOiEwLF9jYWNoZVZhbHVlczohMH0saW5pdDpmdW5jdGlvbihlKXt2LmRhdGEoZSxcInZlbG9jaXR5XCIse2lzU1ZHOmguaXNTVkcoZSksaXNBbmltYXRpbmc6ITEsY29tcHV0ZWRTdHlsZTpudWxsLHR3ZWVuc0NvbnRhaW5lcjpudWxsLHJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGU6e30sdHJhbnNmb3JtQ2FjaGU6e319KX0saG9vazpudWxsLG1vY2s6ITEsdmVyc2lvbjp7bWFqb3I6MSxtaW5vcjoyLHBhdGNoOjJ9LGRlYnVnOiExfTt0LnBhZ2VZT2Zmc2V0IT09bj8oYi5TdGF0ZS5zY3JvbGxBbmNob3I9dCxiLlN0YXRlLnNjcm9sbFByb3BlcnR5TGVmdD1cInBhZ2VYT2Zmc2V0XCIsYi5TdGF0ZS5zY3JvbGxQcm9wZXJ0eVRvcD1cInBhZ2VZT2Zmc2V0XCIpOihiLlN0YXRlLnNjcm9sbEFuY2hvcj1pLmRvY3VtZW50RWxlbWVudHx8aS5ib2R5LnBhcmVudE5vZGV8fGkuYm9keSxiLlN0YXRlLnNjcm9sbFByb3BlcnR5TGVmdD1cInNjcm9sbExlZnRcIixiLlN0YXRlLnNjcm9sbFByb3BlcnR5VG9wPVwic2Nyb2xsVG9wXCIpO3ZhciB3PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4tZS50ZW5zaW9uKmUueC1lLmZyaWN0aW9uKmUudn1mdW5jdGlvbiB0KHQsaSxuKXt2YXIgcj17eDp0Lngrbi5keCppLHY6dC52K24uZHYqaSx0ZW5zaW9uOnQudGVuc2lvbixmcmljdGlvbjp0LmZyaWN0aW9ufTtyZXR1cm57ZHg6ci52LGR2OmUocil9fWZ1bmN0aW9uIGkoaSxuKXt2YXIgcj17ZHg6aS52LGR2OmUoaSl9LGE9dChpLC41Km4sciksbz10KGksLjUqbixhKSxzPXQoaSxuLG8pLGw9MS82KihyLmR4KzIqKGEuZHgrby5keCkrcy5keCksdT0xLzYqKHIuZHYrMiooYS5kditvLmR2KStzLmR2KTtyZXR1cm4gaS54PWkueCtsKm4saS52PWkudit1Km4saX1yZXR1cm4gZnVuY3Rpb24gbihlLHQscil7dmFyIGMsZixkLGE9e3g6LTEsdjowLHRlbnNpb246bnVsbCxmcmljdGlvbjpudWxsfSxvPVswXSxzPTAsbD0xZS00LHU9LjAxNjtmb3IoZT1wYXJzZUZsb2F0KGUpfHw1MDAsdD1wYXJzZUZsb2F0KHQpfHwyMCxyPXJ8fG51bGwsYS50ZW5zaW9uPWUsYS5mcmljdGlvbj10LGM9bnVsbCE9PXIsYz8ocz1uKGUsdCksZj1zL3IqdSk6Zj11O2Q9aShkfHxhLGYpLG8ucHVzaCgxK2QueCkscys9MTYsTWF0aC5hYnMoZC54KT5sJiZNYXRoLmFicyhkLnYpPmw7KTtyZXR1cm4gYz9mdW5jdGlvbihlKXtyZXR1cm4gb1tlKihvLmxlbmd0aC0xKXwwXX06c319KCk7Yi5FYXNpbmdzPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn0sc3ByaW5nOmZ1bmN0aW9uKGUpe3JldHVybiAxLU1hdGguY29zKDQuNSplKk1hdGguUEkpKk1hdGguZXhwKDYqLWUpfX0sdi5lYWNoKFtbXCJlYXNlXCIsWy4yNSwuMSwuMjUsMV1dLFtcImVhc2UtaW5cIixbLjQyLDAsMSwxXV0sW1wiZWFzZS1vdXRcIixbMCwwLC41OCwxXV0sW1wiZWFzZS1pbi1vdXRcIixbLjQyLDAsLjU4LDFdXSxbXCJlYXNlSW5TaW5lXCIsWy40NywwLC43NDUsLjcxNV1dLFtcImVhc2VPdXRTaW5lXCIsWy4zOSwuNTc1LC41NjUsMV1dLFtcImVhc2VJbk91dFNpbmVcIixbLjQ0NSwuMDUsLjU1LC45NV1dLFtcImVhc2VJblF1YWRcIixbLjU1LC4wODUsLjY4LC41M11dLFtcImVhc2VPdXRRdWFkXCIsWy4yNSwuNDYsLjQ1LC45NF1dLFtcImVhc2VJbk91dFF1YWRcIixbLjQ1NSwuMDMsLjUxNSwuOTU1XV0sW1wiZWFzZUluQ3ViaWNcIixbLjU1LC4wNTUsLjY3NSwuMTldXSxbXCJlYXNlT3V0Q3ViaWNcIixbLjIxNSwuNjEsLjM1NSwxXV0sW1wiZWFzZUluT3V0Q3ViaWNcIixbLjY0NSwuMDQ1LC4zNTUsMV1dLFtcImVhc2VJblF1YXJ0XCIsWy44OTUsLjAzLC42ODUsLjIyXV0sW1wiZWFzZU91dFF1YXJ0XCIsWy4xNjUsLjg0LC40NCwxXV0sW1wiZWFzZUluT3V0UXVhcnRcIixbLjc3LDAsLjE3NSwxXV0sW1wiZWFzZUluUXVpbnRcIixbLjc1NSwuMDUsLjg1NSwuMDZdXSxbXCJlYXNlT3V0UXVpbnRcIixbLjIzLDEsLjMyLDFdXSxbXCJlYXNlSW5PdXRRdWludFwiLFsuODYsMCwuMDcsMV1dLFtcImVhc2VJbkV4cG9cIixbLjk1LC4wNSwuNzk1LC4wMzVdXSxbXCJlYXNlT3V0RXhwb1wiLFsuMTksMSwuMjIsMV1dLFtcImVhc2VJbk91dEV4cG9cIixbMSwwLDAsMV1dLFtcImVhc2VJbkNpcmNcIixbLjYsLjA0LC45OCwuMzM1XV0sW1wiZWFzZU91dENpcmNcIixbLjA3NSwuODIsLjE2NSwxXV0sW1wiZWFzZUluT3V0Q2lyY1wiLFsuNzg1LC4xMzUsLjE1LC44Nl1dXSxmdW5jdGlvbihlLHQpe2IuRWFzaW5nc1t0WzBdXT1sLmFwcGx5KG51bGwsdFsxXSl9KTt2YXIgeD1iLkNTUz17UmVnRXg6e2lzSGV4Oi9eIyhbQS1mXFxkXXszfSl7MSwyfSQvaSx2YWx1ZVVud3JhcDovXltBLXpdK1xcKCguKilcXCkkL2ksd3JhcHBlZFZhbHVlQWxyZWFkeUV4dHJhY3RlZDovWzAtOS5dKyBbMC05Ll0rIFswLTkuXSsoIFswLTkuXSspPy8sdmFsdWVTcGxpdDovKFtBLXpdK1xcKC4rXFwpKXwoKFtBLXowLTkjLS5dKz8pKD89XFxzfCQpKS9naX0sTGlzdHM6e2NvbG9yczpbXCJmaWxsXCIsXCJzdHJva2VcIixcInN0b3BDb2xvclwiLFwiY29sb3JcIixcImJhY2tncm91bmRDb2xvclwiLFwiYm9yZGVyQ29sb3JcIixcImJvcmRlclRvcENvbG9yXCIsXCJib3JkZXJSaWdodENvbG9yXCIsXCJib3JkZXJCb3R0b21Db2xvclwiLFwiYm9yZGVyTGVmdENvbG9yXCIsXCJvdXRsaW5lQ29sb3JcIl0sdHJhbnNmb3Jtc0Jhc2U6W1widHJhbnNsYXRlWFwiLFwidHJhbnNsYXRlWVwiLFwic2NhbGVcIixcInNjYWxlWFwiLFwic2NhbGVZXCIsXCJza2V3WFwiLFwic2tld1lcIixcInJvdGF0ZVpcIl0sdHJhbnNmb3JtczNEOltcInRyYW5zZm9ybVBlcnNwZWN0aXZlXCIsXCJ0cmFuc2xhdGVaXCIsXCJzY2FsZVpcIixcInJvdGF0ZVhcIixcInJvdGF0ZVlcIl19LEhvb2tzOnt0ZW1wbGF0ZXM6e3RleHRTaGFkb3c6W1wiQ29sb3IgWCBZIEJsdXJcIixcImJsYWNrIDBweCAwcHggMHB4XCJdLGJveFNoYWRvdzpbXCJDb2xvciBYIFkgQmx1ciBTcHJlYWRcIixcImJsYWNrIDBweCAwcHggMHB4IDBweFwiXSxjbGlwOltcIlRvcCBSaWdodCBCb3R0b20gTGVmdFwiLFwiMHB4IDBweCAwcHggMHB4XCJdLGJhY2tncm91bmRQb3NpdGlvbjpbXCJYIFlcIixcIjAlIDAlXCJdLHRyYW5zZm9ybU9yaWdpbjpbXCJYIFkgWlwiLFwiNTAlIDUwJSAwcHhcIl0scGVyc3BlY3RpdmVPcmlnaW46W1wiWCBZXCIsXCI1MCUgNTAlXCJdfSxyZWdpc3RlcmVkOnt9LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx4Lkxpc3RzLmNvbG9ycy5sZW5ndGg7ZSsrKXt2YXIgdD1cImNvbG9yXCI9PT14Lkxpc3RzLmNvbG9yc1tlXT9cIjAgMCAwIDFcIjpcIjI1NSAyNTUgMjU1IDFcIjt4Lkhvb2tzLnRlbXBsYXRlc1t4Lkxpc3RzLmNvbG9yc1tlXV09W1wiUmVkIEdyZWVuIEJsdWUgQWxwaGFcIix0XX12YXIgaSxuLHI7aWYoZClmb3IoaSBpbiB4Lkhvb2tzLnRlbXBsYXRlcyl7bj14Lkhvb2tzLnRlbXBsYXRlc1tpXSxyPW5bMF0uc3BsaXQoXCIgXCIpO1xudmFyIGE9blsxXS5tYXRjaCh4LlJlZ0V4LnZhbHVlU3BsaXQpO1wiQ29sb3JcIj09PXJbMF0mJihyLnB1c2goci5zaGlmdCgpKSxhLnB1c2goYS5zaGlmdCgpKSx4Lkhvb2tzLnRlbXBsYXRlc1tpXT1bci5qb2luKFwiIFwiKSxhLmpvaW4oXCIgXCIpXSl9Zm9yKGkgaW4geC5Ib29rcy50ZW1wbGF0ZXMpe249eC5Ib29rcy50ZW1wbGF0ZXNbaV0scj1uWzBdLnNwbGl0KFwiIFwiKTtmb3IodmFyIGUgaW4gcil7dmFyIG89aStyW2VdLHM9ZTt4Lkhvb2tzLnJlZ2lzdGVyZWRbb109W2ksc119fX0sZ2V0Um9vdDpmdW5jdGlvbihlKXt2YXIgdD14Lkhvb2tzLnJlZ2lzdGVyZWRbZV07cmV0dXJuIHQ/dFswXTplfSxjbGVhblJvb3RQcm9wZXJ0eVZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguUmVnRXgudmFsdWVVbndyYXAudGVzdCh0KSYmKHQ9dC5tYXRjaCh4LlJlZ0V4LnZhbHVlVW53cmFwKVsxXSkseC5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUodCkmJih0PXguSG9va3MudGVtcGxhdGVzW2VdWzFdKSx0fSxleHRyYWN0VmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgaT14Lkhvb2tzLnJlZ2lzdGVyZWRbZV07aWYoaSl7dmFyIG49aVswXSxyPWlbMV07cmV0dXJuIHQ9eC5Ib29rcy5jbGVhblJvb3RQcm9wZXJ0eVZhbHVlKG4sdCksdC50b1N0cmluZygpLm1hdGNoKHguUmVnRXgudmFsdWVTcGxpdClbcl19cmV0dXJuIHR9LGluamVjdFZhbHVlOmZ1bmN0aW9uKGUsdCxpKXt2YXIgbj14Lkhvb2tzLnJlZ2lzdGVyZWRbZV07aWYobil7dmFyIG8scyxyPW5bMF0sYT1uWzFdO3JldHVybiBpPXguSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShyLGkpLG89aS50b1N0cmluZygpLm1hdGNoKHguUmVnRXgudmFsdWVTcGxpdCksb1thXT10LHM9by5qb2luKFwiIFwiKX1yZXR1cm4gaX19LE5vcm1hbGl6YXRpb25zOntyZWdpc3RlcmVkOntjbGlwOmZ1bmN0aW9uKGUsdCxpKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwiY2xpcFwiO2Nhc2VcImV4dHJhY3RcIjp2YXIgbjtyZXR1cm4geC5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3QoaSk/bj1pOihuPWkudG9TdHJpbmcoKS5tYXRjaCh4LlJlZ0V4LnZhbHVlVW53cmFwKSxuPW4/blsxXS5yZXBsYWNlKC8sKFxccyspPy9nLFwiIFwiKTppKSxuO2Nhc2VcImluamVjdFwiOnJldHVyblwicmVjdChcIitpK1wiKVwifX0sYmx1cjpmdW5jdGlvbihlLHQsaSl7c3dpdGNoKGUpe2Nhc2VcIm5hbWVcIjpyZXR1cm4gYi5TdGF0ZS5pc0ZpcmVmb3g/XCJmaWx0ZXJcIjpcIi13ZWJraXQtZmlsdGVyXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBuPXBhcnNlRmxvYXQoaSk7aWYoIW4mJjAhPT1uKXt2YXIgcj1pLnRvU3RyaW5nKCkubWF0Y2goL2JsdXJcXCgoWzAtOV0rW0Etel0rKVxcKS9pKTtuPXI/clsxXTowfXJldHVybiBuO2Nhc2VcImluamVjdFwiOnJldHVybiBwYXJzZUZsb2F0KGkpP1wiYmx1cihcIitpK1wiKVwiOlwibm9uZVwifX0sb3BhY2l0eTpmdW5jdGlvbihlLHQsaSl7aWYoOD49ZClzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwiZmlsdGVyXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBuPWkudG9TdHJpbmcoKS5tYXRjaCgvYWxwaGFcXChvcGFjaXR5PSguKilcXCkvaSk7cmV0dXJuIGk9bj9uWzFdLzEwMDoxO2Nhc2VcImluamVjdFwiOnJldHVybiB0LnN0eWxlLnpvb209MSxwYXJzZUZsb2F0KGkpPj0xP1wiXCI6XCJhbHBoYShvcGFjaXR5PVwiK3BhcnNlSW50KDEwMCpwYXJzZUZsb2F0KGkpLDEwKStcIilcIn1lbHNlIHN3aXRjaChlKXtjYXNlXCJuYW1lXCI6cmV0dXJuXCJvcGFjaXR5XCI7Y2FzZVwiZXh0cmFjdFwiOnJldHVybiBpO2Nhc2VcImluamVjdFwiOnJldHVybiBpfX19LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7OT49ZHx8Yi5TdGF0ZS5pc0dpbmdlcmJyZWFkfHwoeC5MaXN0cy50cmFuc2Zvcm1zQmFzZT14Lkxpc3RzLnRyYW5zZm9ybXNCYXNlLmNvbmNhdCh4Lkxpc3RzLnRyYW5zZm9ybXMzRCkpO2Zvcih2YXIgZT0wO2U8eC5MaXN0cy50cmFuc2Zvcm1zQmFzZS5sZW5ndGg7ZSsrKSFmdW5jdGlvbigpe3ZhciB0PXguTGlzdHMudHJhbnNmb3Jtc0Jhc2VbZV07eC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3RdPWZ1bmN0aW9uKGUsaSxyKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwidHJhbnNmb3JtXCI7Y2FzZVwiZXh0cmFjdFwiOnJldHVybiBvKGkpPT09bnx8byhpKS50cmFuc2Zvcm1DYWNoZVt0XT09PW4/L15zY2FsZS9pLnRlc3QodCk/MTowOm8oaSkudHJhbnNmb3JtQ2FjaGVbdF0ucmVwbGFjZSgvWygpXS9nLFwiXCIpO2Nhc2VcImluamVjdFwiOnZhciBhPSExO3N3aXRjaCh0LnN1YnN0cigwLHQubGVuZ3RoLTEpKXtjYXNlXCJ0cmFuc2xhdGVcIjphPSEvKCV8cHh8ZW18cmVtfHZ3fHZofFxcZCkkL2kudGVzdChyKTticmVhaztjYXNlXCJzY2FsXCI6Y2FzZVwic2NhbGVcIjpiLlN0YXRlLmlzQW5kcm9pZCYmbyhpKS50cmFuc2Zvcm1DYWNoZVt0XT09PW4mJjE+ciYmKHI9MSksYT0hLyhcXGQpJC9pLnRlc3Qocik7YnJlYWs7Y2FzZVwic2tld1wiOmE9IS8oZGVnfFxcZCkkL2kudGVzdChyKTticmVhaztjYXNlXCJyb3RhdGVcIjphPSEvKGRlZ3xcXGQpJC9pLnRlc3Qocil9cmV0dXJuIGF8fChvKGkpLnRyYW5zZm9ybUNhY2hlW3RdPVwiKFwiK3IrXCIpXCIpLG8oaSkudHJhbnNmb3JtQ2FjaGVbdF19fX0oKTtmb3IodmFyIGU9MDtlPHguTGlzdHMuY29sb3JzLmxlbmd0aDtlKyspIWZ1bmN0aW9uKCl7dmFyIHQ9eC5MaXN0cy5jb2xvcnNbZV07eC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3RdPWZ1bmN0aW9uKGUsaSxyKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVybiB0O2Nhc2VcImV4dHJhY3RcIjp2YXIgYTtpZih4LlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChyKSlhPXI7ZWxzZXt2YXIgbyxzPXtibGFjazpcInJnYigwLCAwLCAwKVwiLGJsdWU6XCJyZ2IoMCwgMCwgMjU1KVwiLGdyYXk6XCJyZ2IoMTI4LCAxMjgsIDEyOClcIixncmVlbjpcInJnYigwLCAxMjgsIDApXCIscmVkOlwicmdiKDI1NSwgMCwgMClcIix3aGl0ZTpcInJnYigyNTUsIDI1NSwgMjU1KVwifTsvXltBLXpdKyQvaS50ZXN0KHIpP289c1tyXSE9PW4/c1tyXTpzLmJsYWNrOnguUmVnRXguaXNIZXgudGVzdChyKT9vPVwicmdiKFwiK3guVmFsdWVzLmhleFRvUmdiKHIpLmpvaW4oXCIgXCIpK1wiKVwiOi9ecmdiYT9cXCgvaS50ZXN0KHIpfHwobz1zLmJsYWNrKSxhPShvfHxyKS50b1N0cmluZygpLm1hdGNoKHguUmVnRXgudmFsdWVVbndyYXApWzFdLnJlcGxhY2UoLywoXFxzKyk/L2csXCIgXCIpfXJldHVybiA4Pj1kfHwzIT09YS5zcGxpdChcIiBcIikubGVuZ3RofHwoYSs9XCIgMVwiKSxhO2Nhc2VcImluamVjdFwiOnJldHVybiA4Pj1kPzQ9PT1yLnNwbGl0KFwiIFwiKS5sZW5ndGgmJihyPXIuc3BsaXQoL1xccysvKS5zbGljZSgwLDMpLmpvaW4oXCIgXCIpKTozPT09ci5zcGxpdChcIiBcIikubGVuZ3RoJiYocis9XCIgMVwiKSwoOD49ZD9cInJnYlwiOlwicmdiYVwiKStcIihcIityLnJlcGxhY2UoL1xccysvZyxcIixcIikucmVwbGFjZSgvXFwuKFxcZCkrKD89LCkvZyxcIlwiKStcIilcIn19fSgpfX0sTmFtZXM6e2NhbWVsQ2FzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8tKFxcdykvZyxmdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KX0sU1ZHQXR0cmlidXRlOmZ1bmN0aW9uKGUpe3ZhciB0PVwid2lkdGh8aGVpZ2h0fHh8eXxjeHxjeXxyfHJ4fHJ5fHgxfHgyfHkxfHkyXCI7cmV0dXJuKGR8fGIuU3RhdGUuaXNBbmRyb2lkJiYhYi5TdGF0ZS5pc0Nocm9tZSkmJih0Kz1cInx0cmFuc2Zvcm1cIiksbmV3IFJlZ0V4cChcIl4oXCIrdCtcIikkXCIsXCJpXCIpLnRlc3QoZSl9LHByZWZpeENoZWNrOmZ1bmN0aW9uKGUpe2lmKGIuU3RhdGUucHJlZml4TWF0Y2hlc1tlXSlyZXR1cm5bYi5TdGF0ZS5wcmVmaXhNYXRjaGVzW2VdLCEwXTtmb3IodmFyIHQ9W1wiXCIsXCJXZWJraXRcIixcIk1velwiLFwibXNcIixcIk9cIl0saT0wLG49dC5sZW5ndGg7bj5pO2krKyl7dmFyIHI7aWYocj0wPT09aT9lOnRbaV0rZS5yZXBsYWNlKC9eXFx3LyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSksaC5pc1N0cmluZyhiLlN0YXRlLnByZWZpeEVsZW1lbnQuc3R5bGVbcl0pKXJldHVybiBiLlN0YXRlLnByZWZpeE1hdGNoZXNbZV09cixbciwhMF19cmV0dXJuW2UsITFdfX0sVmFsdWVzOntoZXhUb1JnYjpmdW5jdGlvbihlKXt2YXIgbix0PS9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksaT0vXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pO3JldHVybiBlPWUucmVwbGFjZSh0LGZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybiB0K3QraStpK24rbn0pLG49aS5leGVjKGUpLG4/W3BhcnNlSW50KG5bMV0sMTYpLHBhcnNlSW50KG5bMl0sMTYpLHBhcnNlSW50KG5bM10sMTYpXTpbMCwwLDBdfSxpc0NTU051bGxWYWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gMD09ZXx8L14obm9uZXxhdXRvfHRyYW5zcGFyZW50fChyZ2JhXFwoMCwgPzAsID8wLCA/MFxcKSkpJC9pLnRlc3QoZSl9LGdldFVuaXRUeXBlOmZ1bmN0aW9uKGUpe3JldHVybi9eKHJvdGF0ZXxza2V3KS9pLnRlc3QoZSk/XCJkZWdcIjovKF4oc2NhbGV8c2NhbGVYfHNjYWxlWXxzY2FsZVp8YWxwaGF8ZmxleEdyb3d8ZmxleEhlaWdodHx6SW5kZXh8Zm9udFdlaWdodCkkKXwoKG9wYWNpdHl8cmVkfGdyZWVufGJsdWV8YWxwaGEpJCkvaS50ZXN0KGUpP1wiXCI6XCJweFwifSxnZXREaXNwbGF5VHlwZTpmdW5jdGlvbihlKXt2YXIgdD1lJiZlLnRhZ05hbWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO3JldHVybi9eKGJ8YmlnfGl8c21hbGx8dHR8YWJicnxhY3JvbnltfGNpdGV8Y29kZXxkZm58ZW18a2JkfHN0cm9uZ3xzYW1wfHZhcnxhfGJkb3xicnxpbWd8bWFwfG9iamVjdHxxfHNjcmlwdHxzcGFufHN1YnxzdXB8YnV0dG9ufGlucHV0fGxhYmVsfHNlbGVjdHx0ZXh0YXJlYSkkL2kudGVzdCh0KT9cImlubGluZVwiOi9eKGxpKSQvaS50ZXN0KHQpP1wibGlzdC1pdGVtXCI6L14odHIpJC9pLnRlc3QodCk/XCJ0YWJsZS1yb3dcIjovXih0YWJsZSkkL2kudGVzdCh0KT9cInRhYmxlXCI6L14odGJvZHkpJC9pLnRlc3QodCk/XCJ0YWJsZS1yb3ctZ3JvdXBcIjpcImJsb2NrXCJ9LGFkZENsYXNzOmZ1bmN0aW9uKGUsdCl7ZS5jbGFzc0xpc3Q/ZS5jbGFzc0xpc3QuYWRkKHQpOmUuY2xhc3NOYW1lKz0oZS5jbGFzc05hbWUubGVuZ3RoP1wiIFwiOlwiXCIpK3R9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUsdCl7ZS5jbGFzc0xpc3Q/ZS5jbGFzc0xpc3QucmVtb3ZlKHQpOmUuY2xhc3NOYW1lPWUuY2xhc3NOYW1lLnRvU3RyaW5nKCkucmVwbGFjZShuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrdC5zcGxpdChcIiBcIikuam9pbihcInxcIikrXCIoXFxcXHN8JClcIixcImdpXCIpLFwiIFwiKX19LGdldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oZSxpLHIsYSl7ZnVuY3Rpb24gcyhlLGkpe2Z1bmN0aW9uIHIoKXt1JiZ4LnNldFByb3BlcnR5VmFsdWUoZSxcImRpc3BsYXlcIixcIm5vbmVcIil9dmFyIGw9MDtpZig4Pj1kKWw9di5jc3MoZSxpKTtlbHNle3ZhciB1PSExO2lmKC9eKHdpZHRofGhlaWdodCkkLy50ZXN0KGkpJiYwPT09eC5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJkaXNwbGF5XCIpJiYodT0hMCx4LnNldFByb3BlcnR5VmFsdWUoZSxcImRpc3BsYXlcIix4LlZhbHVlcy5nZXREaXNwbGF5VHlwZShlKSkpLCFhKXtpZihcImhlaWdodFwiPT09aSYmXCJib3JkZXItYm94XCIhPT14LmdldFByb3BlcnR5VmFsdWUoZSxcImJveFNpemluZ1wiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe3ZhciBjPWUub2Zmc2V0SGVpZ2h0LShwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLFwiYm9yZGVyVG9wV2lkdGhcIikpfHwwKS0ocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoZSxcImJvcmRlckJvdHRvbVdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nVG9wXCIpKXx8MCktKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nQm90dG9tXCIpKXx8MCk7cmV0dXJuIHIoKSxjfWlmKFwid2lkdGhcIj09PWkmJlwiYm9yZGVyLWJveFwiIT09eC5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJib3hTaXppbmdcIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKXt2YXIgZj1lLm9mZnNldFdpZHRoLShwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLFwiYm9yZGVyTGVmdFdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJib3JkZXJSaWdodFdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nTGVmdFwiKSl8fDApLShwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLFwicGFkZGluZ1JpZ2h0XCIpKXx8MCk7cmV0dXJuIHIoKSxmfX12YXIgcDtwPW8oZSk9PT1uP3QuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpOm8oZSkuY29tcHV0ZWRTdHlsZT9vKGUpLmNvbXB1dGVkU3R5bGU6byhlKS5jb21wdXRlZFN0eWxlPXQuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLFwiYm9yZGVyQ29sb3JcIj09PWkmJihpPVwiYm9yZGVyVG9wQ29sb3JcIiksbD05PT09ZCYmXCJmaWx0ZXJcIj09PWk/cC5nZXRQcm9wZXJ0eVZhbHVlKGkpOnBbaV0sKFwiXCI9PT1sfHxudWxsPT09bCkmJihsPWUuc3R5bGVbaV0pLHIoKX1pZihcImF1dG9cIj09PWwmJi9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkL2kudGVzdChpKSl7dmFyIGg9cyhlLFwicG9zaXRpb25cIik7KFwiZml4ZWRcIj09PWh8fFwiYWJzb2x1dGVcIj09PWgmJi90b3B8bGVmdC9pLnRlc3QoaSkpJiYobD12KGUpLnBvc2l0aW9uKClbaV0rXCJweFwiKX1yZXR1cm4gbH12YXIgbDtpZih4Lkhvb2tzLnJlZ2lzdGVyZWRbaV0pe3ZhciB1PWksYz14Lkhvb2tzLmdldFJvb3QodSk7cj09PW4mJihyPXguZ2V0UHJvcGVydHlWYWx1ZShlLHguTmFtZXMucHJlZml4Q2hlY2soYylbMF0pKSx4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10mJihyPXguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXShcImV4dHJhY3RcIixlLHIpKSxsPXguSG9va3MuZXh0cmFjdFZhbHVlKHUscil9ZWxzZSBpZih4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaV0pe3ZhciBmLHA7Zj14Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaV0oXCJuYW1lXCIsZSksXCJ0cmFuc2Zvcm1cIiE9PWYmJihwPXMoZSx4Lk5hbWVzLnByZWZpeENoZWNrKGYpWzBdKSx4LlZhbHVlcy5pc0NTU051bGxWYWx1ZShwKSYmeC5Ib29rcy50ZW1wbGF0ZXNbaV0mJihwPXguSG9va3MudGVtcGxhdGVzW2ldWzFdKSksbD14Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaV0oXCJleHRyYWN0XCIsZSxwKX1pZighL15bXFxkLV0vLnRlc3QobCkpaWYobyhlKSYmbyhlKS5pc1NWRyYmeC5OYW1lcy5TVkdBdHRyaWJ1dGUoaSkpaWYoL14oaGVpZ2h0fHdpZHRoKSQvaS50ZXN0KGkpKXRyeXtsPWUuZ2V0QkJveCgpW2ldfWNhdGNoKGgpe2w9MH1lbHNlIGw9ZS5nZXRBdHRyaWJ1dGUoaSk7ZWxzZSBsPXMoZSx4Lk5hbWVzLnByZWZpeENoZWNrKGkpWzBdKTtyZXR1cm4geC5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUobCkmJihsPTApLGIuZGVidWc+PTImJmNvbnNvbGUubG9nKFwiR2V0IFwiK2krXCI6IFwiK2wpLGx9LHNldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oZSxpLG4scixhKXt2YXIgcz1pO2lmKFwic2Nyb2xsXCI9PT1pKWEuY29udGFpbmVyP2EuY29udGFpbmVyW1wic2Nyb2xsXCIrYS5kaXJlY3Rpb25dPW46XCJMZWZ0XCI9PT1hLmRpcmVjdGlvbj90LnNjcm9sbFRvKG4sYS5hbHRlcm5hdGVWYWx1ZSk6dC5zY3JvbGxUbyhhLmFsdGVybmF0ZVZhbHVlLG4pO2Vsc2UgaWYoeC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2ldJiZcInRyYW5zZm9ybVwiPT09eC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2ldKFwibmFtZVwiLGUpKXguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtpXShcImluamVjdFwiLGUsbikscz1cInRyYW5zZm9ybVwiLG49byhlKS50cmFuc2Zvcm1DYWNoZVtpXTtlbHNle2lmKHguSG9va3MucmVnaXN0ZXJlZFtpXSl7dmFyIGw9aSx1PXguSG9va3MuZ2V0Um9vdChpKTtyPXJ8fHguZ2V0UHJvcGVydHlWYWx1ZShlLHUpLG49eC5Ib29rcy5pbmplY3RWYWx1ZShsLG4sciksaT11fWlmKHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtpXSYmKG49eC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2ldKFwiaW5qZWN0XCIsZSxuKSxpPXguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtpXShcIm5hbWVcIixlKSkscz14Lk5hbWVzLnByZWZpeENoZWNrKGkpWzBdLDg+PWQpdHJ5e2Uuc3R5bGVbc109bn1jYXRjaChjKXtiLmRlYnVnJiZjb25zb2xlLmxvZyhcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBbXCIrbitcIl0gZm9yIFtcIitzK1wiXVwiKX1lbHNlIG8oZSkmJm8oZSkuaXNTVkcmJnguTmFtZXMuU1ZHQXR0cmlidXRlKGkpP2Uuc2V0QXR0cmlidXRlKGksbik6ZS5zdHlsZVtzXT1uO2IuZGVidWc+PTImJmNvbnNvbGUubG9nKFwiU2V0IFwiK2krXCIgKFwiK3MrXCIpOiBcIituKX1yZXR1cm5bcyxuXX0sZmx1c2hUcmFuc2Zvcm1DYWNoZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3JldHVybiBwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLHQpKX12YXIgaT1cIlwiO2lmKChkfHxiLlN0YXRlLmlzQW5kcm9pZCYmIWIuU3RhdGUuaXNDaHJvbWUpJiZvKGUpLmlzU1ZHKXt2YXIgbj17dHJhbnNsYXRlOlt0KFwidHJhbnNsYXRlWFwiKSx0KFwidHJhbnNsYXRlWVwiKV0sc2tld1g6W3QoXCJza2V3WFwiKV0sc2tld1k6W3QoXCJza2V3WVwiKV0sc2NhbGU6MSE9PXQoXCJzY2FsZVwiKT9bdChcInNjYWxlXCIpLHQoXCJzY2FsZVwiKV06W3QoXCJzY2FsZVhcIiksdChcInNjYWxlWVwiKV0scm90YXRlOlt0KFwicm90YXRlWlwiKSwwLDBdfTt2LmVhY2gobyhlKS50cmFuc2Zvcm1DYWNoZSxmdW5jdGlvbihlKXsvXnRyYW5zbGF0ZS9pLnRlc3QoZSk/ZT1cInRyYW5zbGF0ZVwiOi9ec2NhbGUvaS50ZXN0KGUpP2U9XCJzY2FsZVwiOi9ecm90YXRlL2kudGVzdChlKSYmKGU9XCJyb3RhdGVcIiksbltlXSYmKGkrPWUrXCIoXCIrbltlXS5qb2luKFwiIFwiKStcIikgXCIsZGVsZXRlIG5bZV0pfSl9ZWxzZXt2YXIgcixhO3YuZWFjaChvKGUpLnRyYW5zZm9ybUNhY2hlLGZ1bmN0aW9uKHQpe3JldHVybiByPW8oZSkudHJhbnNmb3JtQ2FjaGVbdF0sXCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiPT09dD8oYT1yLCEwKTooOT09PWQmJlwicm90YXRlWlwiPT09dCYmKHQ9XCJyb3RhdGVcIiksdm9pZChpKz10K3IrXCIgXCIpKX0pLGEmJihpPVwicGVyc3BlY3RpdmVcIithK1wiIFwiK2kpfXguc2V0UHJvcGVydHlWYWx1ZShlLFwidHJhbnNmb3JtXCIsaSl9fTt4Lkhvb2tzLnJlZ2lzdGVyKCkseC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcigpLGIuaG9vaz1mdW5jdGlvbihlLHQsaSl7dmFyIHI9bjtyZXR1cm4gZT1hKGUpLHYuZWFjaChlLGZ1bmN0aW9uKGUsYSl7aWYobyhhKT09PW4mJmIuaW5pdChhKSxpPT09bilyPT09biYmKHI9Yi5DU1MuZ2V0UHJvcGVydHlWYWx1ZShhLHQpKTtlbHNle3ZhciBzPWIuQ1NTLnNldFByb3BlcnR5VmFsdWUoYSx0LGkpO1widHJhbnNmb3JtXCI9PT1zWzBdJiZiLkNTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKGEpLHI9c319KSxyfTt2YXIgQz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbD9FLnByb21pc2V8fG51bGw6ZH1mdW5jdGlvbiByKCl7ZnVuY3Rpb24gZShlKXtmdW5jdGlvbiBmKGUsdCl7dmFyIGk9bixvPW4scz1uO3JldHVybiBoLmlzQXJyYXkoZSk/KGk9ZVswXSwhaC5pc0FycmF5KGVbMV0pJiYvXltcXGQtXS8udGVzdChlWzFdKXx8aC5pc0Z1bmN0aW9uKGVbMV0pfHx4LlJlZ0V4LmlzSGV4LnRlc3QoZVsxXSk/cz1lWzFdOihoLmlzU3RyaW5nKGVbMV0pJiYheC5SZWdFeC5pc0hleC50ZXN0KGVbMV0pfHxoLmlzQXJyYXkoZVsxXSkpJiYobz10P2VbMV06dShlWzFdLGEuZHVyYXRpb24pLGVbMl0hPT1uJiYocz1lWzJdKSkpOmk9ZSx0fHwobz1vfHxhLmVhc2luZyksaC5pc0Z1bmN0aW9uKGkpJiYoaT1pLmNhbGwocixTLGspKSxoLmlzRnVuY3Rpb24ocykmJihzPXMuY2FsbChyLFMsaykpLFtpfHwwLG8sc119ZnVuY3Rpb24gZChlLHQpe3ZhciBpLG47cmV0dXJuIG49KHR8fFwiMFwiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWyVBLXpdKyQvLGZ1bmN0aW9uKGUpe3JldHVybiBpPWUsXCJcIn0pLGl8fChpPXguVmFsdWVzLmdldFVuaXRUeXBlKGUpKSxbbixpXX1mdW5jdGlvbiBwKCl7dmFyIGU9e215UGFyZW50OnIucGFyZW50Tm9kZXx8aS5ib2R5LHBvc2l0aW9uOnguZ2V0UHJvcGVydHlWYWx1ZShyLFwicG9zaXRpb25cIiksZm9udFNpemU6eC5nZXRQcm9wZXJ0eVZhbHVlKHIsXCJmb250U2l6ZVwiKX0sbj1lLnBvc2l0aW9uPT09RC5sYXN0UG9zaXRpb24mJmUubXlQYXJlbnQ9PT1ELmxhc3RQYXJlbnQsYT1lLmZvbnRTaXplPT09RC5sYXN0Rm9udFNpemU7RC5sYXN0UGFyZW50PWUubXlQYXJlbnQsRC5sYXN0UG9zaXRpb249ZS5wb3NpdGlvbixELmxhc3RGb250U2l6ZT1lLmZvbnRTaXplO3ZhciBzPTEwMCxsPXt9O2lmKGEmJm4pbC5lbVRvUHg9RC5sYXN0RW1Ub1B4LGwucGVyY2VudFRvUHhXaWR0aD1ELmxhc3RQZXJjZW50VG9QeFdpZHRoLGwucGVyY2VudFRvUHhIZWlnaHQ9RC5sYXN0UGVyY2VudFRvUHhIZWlnaHQ7ZWxzZXt2YXIgdT1vKHIpLmlzU1ZHP2kuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInJlY3RcIik6aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2IuaW5pdCh1KSxlLm15UGFyZW50LmFwcGVuZENoaWxkKHUpLHYuZWFjaChbXCJvdmVyZmxvd1wiLFwib3ZlcmZsb3dYXCIsXCJvdmVyZmxvd1lcIl0sZnVuY3Rpb24oZSx0KXtiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsdCxcImhpZGRlblwiKX0pLGIuQ1NTLnNldFByb3BlcnR5VmFsdWUodSxcInBvc2l0aW9uXCIsZS5wb3NpdGlvbiksYi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LFwiZm9udFNpemVcIixlLmZvbnRTaXplKSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsXCJib3hTaXppbmdcIixcImNvbnRlbnQtYm94XCIpLHYuZWFjaChbXCJtaW5XaWR0aFwiLFwibWF4V2lkdGhcIixcIndpZHRoXCIsXCJtaW5IZWlnaHRcIixcIm1heEhlaWdodFwiLFwiaGVpZ2h0XCJdLGZ1bmN0aW9uKGUsdCl7Yi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LHQscytcIiVcIil9KSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsXCJwYWRkaW5nTGVmdFwiLHMrXCJlbVwiKSxsLnBlcmNlbnRUb1B4V2lkdGg9RC5sYXN0UGVyY2VudFRvUHhXaWR0aD0ocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUodSxcIndpZHRoXCIsbnVsbCwhMCkpfHwxKS9zLGwucGVyY2VudFRvUHhIZWlnaHQ9RC5sYXN0UGVyY2VudFRvUHhIZWlnaHQ9KHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKHUsXCJoZWlnaHRcIixudWxsLCEwKSl8fDEpL3MsbC5lbVRvUHg9RC5sYXN0RW1Ub1B4PShwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZSh1LFwicGFkZGluZ0xlZnRcIikpfHwxKS9zLGUubXlQYXJlbnQucmVtb3ZlQ2hpbGQodSl9cmV0dXJuIG51bGw9PT1ELnJlbVRvUHgmJihELnJlbVRvUHg9cGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoaS5ib2R5LFwiZm9udFNpemVcIikpfHwxNiksbnVsbD09PUQudndUb1B4JiYoRC52d1RvUHg9cGFyc2VGbG9hdCh0LmlubmVyV2lkdGgpLzEwMCxELnZoVG9QeD1wYXJzZUZsb2F0KHQuaW5uZXJIZWlnaHQpLzEwMCksbC5yZW1Ub1B4PUQucmVtVG9QeCxsLnZ3VG9QeD1ELnZ3VG9QeCxsLnZoVG9QeD1ELnZoVG9QeCxiLmRlYnVnPj0xJiZjb25zb2xlLmxvZyhcIlVuaXQgcmF0aW9zOiBcIitKU09OLnN0cmluZ2lmeShsKSxyKSxsfWlmKGEuYmVnaW4mJjA9PT1TKXRyeXthLmJlZ2luLmNhbGwobSxtKX1jYXRjaChnKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZ30sMSl9aWYoXCJzY3JvbGxcIj09PVApe3ZhciBPLEEsJCxDPS9eeCQvaS50ZXN0KGEuYXhpcyk/XCJMZWZ0XCI6XCJUb3BcIixUPXBhcnNlRmxvYXQoYS5vZmZzZXQpfHwwO2EuY29udGFpbmVyP2guaXNXcmFwcGVkKGEuY29udGFpbmVyKXx8aC5pc05vZGUoYS5jb250YWluZXIpPyhhLmNvbnRhaW5lcj1hLmNvbnRhaW5lclswXXx8YS5jb250YWluZXIsTz1hLmNvbnRhaW5lcltcInNjcm9sbFwiK0NdLCQ9Tyt2KHIpLnBvc2l0aW9uKClbQy50b0xvd2VyQ2FzZSgpXStUKTphLmNvbnRhaW5lcj1udWxsOihPPWIuU3RhdGUuc2Nyb2xsQW5jaG9yW2IuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiK0NdXSxBPWIuU3RhdGUuc2Nyb2xsQW5jaG9yW2IuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiKyhcIkxlZnRcIj09PUM/XCJUb3BcIjpcIkxlZnRcIildXSwkPXYocikub2Zmc2V0KClbQy50b0xvd2VyQ2FzZSgpXStUKSxzPXtzY3JvbGw6e3Jvb3RQcm9wZXJ0eVZhbHVlOiExLHN0YXJ0VmFsdWU6TyxjdXJyZW50VmFsdWU6TyxlbmRWYWx1ZTokLHVuaXRUeXBlOlwiXCIsZWFzaW5nOmEuZWFzaW5nLHNjcm9sbERhdGE6e2NvbnRhaW5lcjphLmNvbnRhaW5lcixkaXJlY3Rpb246QyxhbHRlcm5hdGVWYWx1ZTpBfX0sZWxlbWVudDpyfSxiLmRlYnVnJiZjb25zb2xlLmxvZyhcInR3ZWVuc0NvbnRhaW5lciAoc2Nyb2xsKTogXCIscy5zY3JvbGwscil9ZWxzZSBpZihcInJldmVyc2VcIj09PVApe2lmKCFvKHIpLnR3ZWVuc0NvbnRhaW5lcilyZXR1cm4gdm9pZCB2LmRlcXVldWUocixhLnF1ZXVlKTtcIm5vbmVcIj09PW8ocikub3B0cy5kaXNwbGF5JiYobyhyKS5vcHRzLmRpc3BsYXk9XCJhdXRvXCIpLFwiaGlkZGVuXCI9PT1vKHIpLm9wdHMudmlzaWJpbGl0eSYmKG8ocikub3B0cy52aXNpYmlsaXR5PVwidmlzaWJsZVwiKSxvKHIpLm9wdHMubG9vcD0hMSxvKHIpLm9wdHMuYmVnaW49bnVsbCxvKHIpLm9wdHMuY29tcGxldGU9bnVsbCx3LmVhc2luZ3x8ZGVsZXRlIGEuZWFzaW5nLHcuZHVyYXRpb258fGRlbGV0ZSBhLmR1cmF0aW9uLGE9di5leHRlbmQoe30sbyhyKS5vcHRzLGEpO3ZhciBNPXYuZXh0ZW5kKCEwLHt9LG8ocikudHdlZW5zQ29udGFpbmVyKTtmb3IodmFyIFYgaW4gTSlpZihcImVsZW1lbnRcIiE9PVYpe3ZhciBJPU1bVl0uc3RhcnRWYWx1ZTtNW1ZdLnN0YXJ0VmFsdWU9TVtWXS5jdXJyZW50VmFsdWU9TVtWXS5lbmRWYWx1ZSxNW1ZdLmVuZFZhbHVlPUksaC5pc0VtcHR5T2JqZWN0KHcpfHwoTVtWXS5lYXNpbmc9YS5lYXNpbmcpLGIuZGVidWcmJmNvbnNvbGUubG9nKFwicmV2ZXJzZSB0d2VlbnNDb250YWluZXIgKFwiK1YrXCIpOiBcIitKU09OLnN0cmluZ2lmeShNW1ZdKSxyKX1zPU19ZWxzZSBpZihcInN0YXJ0XCI9PT1QKXt2YXIgTTtvKHIpLnR3ZWVuc0NvbnRhaW5lciYmbyhyKS5pc0FuaW1hdGluZz09PSEwJiYoTT1vKHIpLnR3ZWVuc0NvbnRhaW5lciksdi5lYWNoKHksZnVuY3Rpb24oZSx0KXtpZihSZWdFeHAoXCJeXCIreC5MaXN0cy5jb2xvcnMuam9pbihcIiR8XlwiKStcIiRcIikudGVzdChlKSl7dmFyIGk9Zih0LCEwKSxyPWlbMF0sYT1pWzFdLG89aVsyXTtpZih4LlJlZ0V4LmlzSGV4LnRlc3Qocikpe2Zvcih2YXIgcz1bXCJSZWRcIixcIkdyZWVuXCIsXCJCbHVlXCJdLGw9eC5WYWx1ZXMuaGV4VG9SZ2IociksdT1vP3guVmFsdWVzLmhleFRvUmdiKG8pOm4sYz0wO2M8cy5sZW5ndGg7YysrKXt2YXIgZD1bbFtjXV07YSYmZC5wdXNoKGEpLHUhPT1uJiZkLnB1c2godVtjXSkseVtlK3NbY11dPWR9ZGVsZXRlIHlbZV19fX0pO2Zvcih2YXIgTiBpbiB5KXt2YXIgaj1mKHlbTl0pLHo9alswXSxxPWpbMV0sRj1qWzJdO049eC5OYW1lcy5jYW1lbENhc2UoTik7dmFyIEw9eC5Ib29rcy5nZXRSb290KE4pLEg9ITE7aWYobyhyKS5pc1NWR3x8XCJ0d2VlblwiPT09THx8eC5OYW1lcy5wcmVmaXhDaGVjayhMKVsxXSE9PSExfHx4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbTF0hPT1uKXsoYS5kaXNwbGF5IT09biYmbnVsbCE9PWEuZGlzcGxheSYmXCJub25lXCIhPT1hLmRpc3BsYXl8fGEudmlzaWJpbGl0eSE9PW4mJlwiaGlkZGVuXCIhPT1hLnZpc2liaWxpdHkpJiYvb3BhY2l0eXxmaWx0ZXIvLnRlc3QoTikmJiFGJiYwIT09eiYmKEY9MCksYS5fY2FjaGVWYWx1ZXMmJk0mJk1bTl0/KEY9PT1uJiYoRj1NW05dLmVuZFZhbHVlK01bTl0udW5pdFR5cGUpLEg9byhyKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW0xdKTp4Lkhvb2tzLnJlZ2lzdGVyZWRbTl0/Rj09PW4/KEg9eC5nZXRQcm9wZXJ0eVZhbHVlKHIsTCksRj14LmdldFByb3BlcnR5VmFsdWUocixOLEgpKTpIPXguSG9va3MudGVtcGxhdGVzW0xdWzFdOkY9PT1uJiYoRj14LmdldFByb3BlcnR5VmFsdWUocixOKSk7dmFyIFcsUixRLEI9ITE7aWYoVz1kKE4sRiksRj1XWzBdLFE9V1sxXSxXPWQoTix6KSx6PVdbMF0ucmVwbGFjZSgvXihbKy1cXC8qXSk9LyxmdW5jdGlvbihlLHQpe3JldHVybiBCPXQsXCJcIn0pLFI9V1sxXSxGPXBhcnNlRmxvYXQoRil8fDAsej1wYXJzZUZsb2F0KHopfHwwLFwiJVwiPT09UiYmKC9eKGZvbnRTaXplfGxpbmVIZWlnaHQpJC8udGVzdChOKT8oei89MTAwLFI9XCJlbVwiKTovXnNjYWxlLy50ZXN0KE4pPyh6Lz0xMDAsUj1cIlwiKTovKFJlZHxHcmVlbnxCbHVlKSQvaS50ZXN0KE4pJiYoej16LzEwMCoyNTUsUj1cIlwiKSksL1tcXC8qXS8udGVzdChCKSlSPVE7ZWxzZSBpZihRIT09UiYmMCE9PUYpaWYoMD09PXopUj1RO2Vsc2V7bD1sfHxwKCk7dmFyIFk9L21hcmdpbnxwYWRkaW5nfGxlZnR8cmlnaHR8d2lkdGh8dGV4dHx3b3JkfGxldHRlci9pLnRlc3QoTil8fC9YJC8udGVzdChOKXx8XCJ4XCI9PT1OP1wieFwiOlwieVwiO3N3aXRjaChRKXtjYXNlXCIlXCI6Rio9XCJ4XCI9PT1ZP2wucGVyY2VudFRvUHhXaWR0aDpsLnBlcmNlbnRUb1B4SGVpZ2h0O2JyZWFrO2Nhc2VcInB4XCI6YnJlYWs7ZGVmYXVsdDpGKj1sW1ErXCJUb1B4XCJdfXN3aXRjaChSKXtjYXNlXCIlXCI6Rio9MS8oXCJ4XCI9PT1ZP2wucGVyY2VudFRvUHhXaWR0aDpsLnBlcmNlbnRUb1B4SGVpZ2h0KTticmVhaztjYXNlXCJweFwiOmJyZWFrO2RlZmF1bHQ6Rio9MS9sW1IrXCJUb1B4XCJdfX1zd2l0Y2goQil7Y2FzZVwiK1wiOno9Rit6O2JyZWFrO2Nhc2VcIi1cIjp6PUYtejticmVhaztjYXNlXCIqXCI6ej1GKno7YnJlYWs7Y2FzZVwiL1wiOno9Ri96fXNbTl09e3Jvb3RQcm9wZXJ0eVZhbHVlOkgsc3RhcnRWYWx1ZTpGLGN1cnJlbnRWYWx1ZTpGLGVuZFZhbHVlOnosdW5pdFR5cGU6UixlYXNpbmc6cX0sYi5kZWJ1ZyYmY29uc29sZS5sb2coXCJ0d2VlbnNDb250YWluZXIgKFwiK04rXCIpOiBcIitKU09OLnN0cmluZ2lmeShzW05dKSxyKX1lbHNlIGIuZGVidWcmJmNvbnNvbGUubG9nKFwiU2tpcHBpbmcgW1wiK0wrXCJdIGR1ZSB0byBhIGxhY2sgb2YgYnJvd3NlciBzdXBwb3J0LlwiKX1zLmVsZW1lbnQ9cn1zLmVsZW1lbnQmJih4LlZhbHVlcy5hZGRDbGFzcyhyLFwidmVsb2NpdHktYW5pbWF0aW5nXCIpLF8ucHVzaChzKSxcIlwiPT09YS5xdWV1ZSYmKG8ocikudHdlZW5zQ29udGFpbmVyPXMsbyhyKS5vcHRzPWEpLG8ocikuaXNBbmltYXRpbmc9ITAsUz09PWstMT8oYi5TdGF0ZS5jYWxscy5wdXNoKFtfLG0sYSxudWxsLEUucmVzb2x2ZXJdKSxiLlN0YXRlLmlzVGlja2luZz09PSExJiYoYi5TdGF0ZS5pc1RpY2tpbmc9ITAsYygpKSk6UysrKX12YXIgbCxyPXRoaXMsYT12LmV4dGVuZCh7fSxiLmRlZmF1bHRzLHcpLHM9e307c3dpdGNoKG8ocik9PT1uJiZiLmluaXQocikscGFyc2VGbG9hdChhLmRlbGF5KSYmYS5xdWV1ZSE9PSExJiZ2LnF1ZXVlKHIsYS5xdWV1ZSxmdW5jdGlvbihlKXtiLnZlbG9jaXR5UXVldWVFbnRyeUZsYWc9ITAsbyhyKS5kZWxheVRpbWVyPXtzZXRUaW1lb3V0OnNldFRpbWVvdXQoZSxwYXJzZUZsb2F0KGEuZGVsYXkpKSxuZXh0OmV9fSksYS5kdXJhdGlvbi50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImZhc3RcIjphLmR1cmF0aW9uPTIwMDticmVhaztjYXNlXCJub3JtYWxcIjphLmR1cmF0aW9uPWc7YnJlYWs7Y2FzZVwic2xvd1wiOmEuZHVyYXRpb249NjAwO2JyZWFrO2RlZmF1bHQ6YS5kdXJhdGlvbj1wYXJzZUZsb2F0KGEuZHVyYXRpb24pfHwxfWIubW9jayE9PSExJiYoYi5tb2NrPT09ITA/YS5kdXJhdGlvbj1hLmRlbGF5PTE6KGEuZHVyYXRpb24qPXBhcnNlRmxvYXQoYi5tb2NrKXx8MSxhLmRlbGF5Kj1wYXJzZUZsb2F0KGIubW9jayl8fDEpKSxhLmVhc2luZz11KGEuZWFzaW5nLGEuZHVyYXRpb24pLGEuYmVnaW4mJiFoLmlzRnVuY3Rpb24oYS5iZWdpbikmJihhLmJlZ2luPW51bGwpLGEucHJvZ3Jlc3MmJiFoLmlzRnVuY3Rpb24oYS5wcm9ncmVzcykmJihhLnByb2dyZXNzPW51bGwpLGEuY29tcGxldGUmJiFoLmlzRnVuY3Rpb24oYS5jb21wbGV0ZSkmJihhLmNvbXBsZXRlPW51bGwpLGEuZGlzcGxheSE9PW4mJm51bGwhPT1hLmRpc3BsYXkmJihhLmRpc3BsYXk9YS5kaXNwbGF5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSxcImF1dG9cIj09PWEuZGlzcGxheSYmKGEuZGlzcGxheT1iLkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUocikpKSxhLnZpc2liaWxpdHkhPT1uJiZudWxsIT09YS52aXNpYmlsaXR5JiYoYS52aXNpYmlsaXR5PWEudmlzaWJpbGl0eS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpLGEubW9iaWxlSEE9YS5tb2JpbGVIQSYmYi5TdGF0ZS5pc01vYmlsZSYmIWIuU3RhdGUuaXNHaW5nZXJicmVhZCxhLnF1ZXVlPT09ITE/YS5kZWxheT9zZXRUaW1lb3V0KGUsYS5kZWxheSk6ZSgpOnYucXVldWUocixhLnF1ZXVlLGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGk9PT0hMD8oRS5wcm9taXNlJiZFLnJlc29sdmVyKG0pLCEwKTooYi52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnPSEwLHZvaWQgZSh0KSl9KSxcIlwiIT09YS5xdWV1ZSYmXCJmeFwiIT09YS5xdWV1ZXx8XCJpbnByb2dyZXNzXCI9PT12LnF1ZXVlKHIpWzBdfHx2LmRlcXVldWUocil9dmFyIGwsZCxwLG0seSx3LHM9YXJndW1lbnRzWzBdJiYoYXJndW1lbnRzWzBdLnB8fHYuaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMF0ucHJvcGVydGllcykmJiFhcmd1bWVudHNbMF0ucHJvcGVydGllcy5uYW1lc3x8aC5pc1N0cmluZyhhcmd1bWVudHNbMF0ucHJvcGVydGllcykpO2lmKGguaXNXcmFwcGVkKHRoaXMpPyhsPSExLHA9MCxtPXRoaXMsZD10aGlzKToobD0hMCxwPTEsbT1zP2FyZ3VtZW50c1swXS5lbGVtZW50c3x8YXJndW1lbnRzWzBdLmU6YXJndW1lbnRzWzBdKSxtPWEobSkpe3M/KHk9YXJndW1lbnRzWzBdLnByb3BlcnRpZXN8fGFyZ3VtZW50c1swXS5wLHc9YXJndW1lbnRzWzBdLm9wdGlvbnN8fGFyZ3VtZW50c1swXS5vKTooeT1hcmd1bWVudHNbcF0sdz1hcmd1bWVudHNbcCsxXSk7dmFyIGs9bS5sZW5ndGgsUz0wO2lmKCEvXihzdG9wfGZpbmlzaCkkL2kudGVzdCh5KSYmIXYuaXNQbGFpbk9iamVjdCh3KSl7dmFyIFQ9cCsxO3c9e307Zm9yKHZhciBPPVQ7Tzxhcmd1bWVudHMubGVuZ3RoO08rKyloLmlzQXJyYXkoYXJndW1lbnRzW09dKXx8IS9eKGZhc3R8bm9ybWFsfHNsb3cpJC9pLnRlc3QoYXJndW1lbnRzW09dKSYmIS9eXFxkLy50ZXN0KGFyZ3VtZW50c1tPXSk/aC5pc1N0cmluZyhhcmd1bWVudHNbT10pfHxoLmlzQXJyYXkoYXJndW1lbnRzW09dKT93LmVhc2luZz1hcmd1bWVudHNbT106aC5pc0Z1bmN0aW9uKGFyZ3VtZW50c1tPXSkmJih3LmNvbXBsZXRlPWFyZ3VtZW50c1tPXSk6dy5kdXJhdGlvbj1hcmd1bWVudHNbT119dmFyIEU9e3Byb21pc2U6bnVsbCxyZXNvbHZlcjpudWxsLHJlamVjdGVyOm51bGx9O2wmJmIuUHJvbWlzZSYmKEUucHJvbWlzZT1uZXcgYi5Qcm9taXNlKGZ1bmN0aW9uKGUsdCl7RS5yZXNvbHZlcj1lLEUucmVqZWN0ZXI9dH0pKTt2YXIgUDtzd2l0Y2goeSl7Y2FzZVwic2Nyb2xsXCI6UD1cInNjcm9sbFwiO2JyZWFrO2Nhc2VcInJldmVyc2VcIjpQPVwicmV2ZXJzZVwiO2JyZWFrO2Nhc2VcImZpbmlzaFwiOmNhc2VcInN0b3BcIjp2LmVhY2gobSxmdW5jdGlvbihlLHQpe28odCkmJm8odCkuZGVsYXlUaW1lciYmKGNsZWFyVGltZW91dChvKHQpLmRlbGF5VGltZXIuc2V0VGltZW91dCksbyh0KS5kZWxheVRpbWVyLm5leHQmJm8odCkuZGVsYXlUaW1lci5uZXh0KCksZGVsZXRlIG8odCkuZGVsYXlUaW1lcil9KTt2YXIgQT1bXTtyZXR1cm4gdi5lYWNoKGIuU3RhdGUuY2FsbHMsZnVuY3Rpb24oZSx0KXt0JiZ2LmVhY2godFsxXSxmdW5jdGlvbihpLHIpe3ZhciBhPXc9PT1uP1wiXCI6dztyZXR1cm4gYT09PSEwfHx0WzJdLnF1ZXVlPT09YXx8dz09PW4mJnRbMl0ucXVldWU9PT0hMT92b2lkIHYuZWFjaChtLGZ1bmN0aW9uKGksbil7bj09PXImJigodz09PSEwfHxoLmlzU3RyaW5nKHcpKSYmKHYuZWFjaCh2LnF1ZXVlKG4saC5pc1N0cmluZyh3KT93OlwiXCIpLGZ1bmN0aW9uKGUsdCl7aC5pc0Z1bmN0aW9uKHQpJiZ0KG51bGwsITApfSksdi5xdWV1ZShuLGguaXNTdHJpbmcodyk/dzpcIlwiLFtdKSksXCJzdG9wXCI9PT15PyhvKG4pJiZvKG4pLnR3ZWVuc0NvbnRhaW5lciYmYSE9PSExJiZ2LmVhY2gobyhuKS50d2VlbnNDb250YWluZXIsZnVuY3Rpb24oZSx0KXt0LmVuZFZhbHVlPXQuY3VycmVudFZhbHVlfSksQS5wdXNoKGUpKTpcImZpbmlzaFwiPT09eSYmKHRbMl0uZHVyYXRpb249MSkpfSk6ITB9KX0pLFwic3RvcFwiPT09eSYmKHYuZWFjaChBLGZ1bmN0aW9uKGUsdCl7Zih0LCEwKX0pLEUucHJvbWlzZSYmRS5yZXNvbHZlcihtKSksZSgpO2RlZmF1bHQ6aWYoIXYuaXNQbGFpbk9iamVjdCh5KXx8aC5pc0VtcHR5T2JqZWN0KHkpKXtpZihoLmlzU3RyaW5nKHkpJiZiLlJlZGlyZWN0c1t5XSl7dmFyICQ9di5leHRlbmQoe30sdyksTT0kLmR1cmF0aW9uLFY9JC5kZWxheXx8MDtyZXR1cm4gJC5iYWNrd2FyZHM9PT0hMCYmKG09di5leHRlbmQoITAsW10sbSkucmV2ZXJzZSgpKSx2LmVhY2gobSxmdW5jdGlvbihlLHQpe3BhcnNlRmxvYXQoJC5zdGFnZ2VyKT8kLmRlbGF5PVYrcGFyc2VGbG9hdCgkLnN0YWdnZXIpKmU6aC5pc0Z1bmN0aW9uKCQuc3RhZ2dlcikmJigkLmRlbGF5PVYrJC5zdGFnZ2VyLmNhbGwodCxlLGspKSwkLmRyYWcmJigkLmR1cmF0aW9uPXBhcnNlRmxvYXQoTSl8fCgvXihjYWxsb3V0fHRyYW5zaXRpb24pLy50ZXN0KHkpPzFlMzpnKSwkLmR1cmF0aW9uPU1hdGgubWF4KCQuZHVyYXRpb24qKCQuYmFja3dhcmRzPzEtZS9rOihlKzEpL2spLC43NSokLmR1cmF0aW9uLDIwMCkpLGIuUmVkaXJlY3RzW3ldLmNhbGwodCx0LCR8fHt9LGUsayxtLEUucHJvbWlzZT9FOm4pfSksZSgpfXZhciBJPVwiVmVsb2NpdHk6IEZpcnN0IGFyZ3VtZW50IChcIit5K1wiKSB3YXMgbm90IGEgcHJvcGVydHkgbWFwLCBhIGtub3duIGFjdGlvbiwgb3IgYSByZWdpc3RlcmVkIHJlZGlyZWN0LiBBYm9ydGluZy5cIjtyZXR1cm4gRS5wcm9taXNlP0UucmVqZWN0ZXIobmV3IEVycm9yKEkpKTpjb25zb2xlLmxvZyhJKSxlKCl9UD1cInN0YXJ0XCJ9dmFyIEQ9e2xhc3RQYXJlbnQ6bnVsbCxsYXN0UG9zaXRpb246bnVsbCxsYXN0Rm9udFNpemU6bnVsbCxsYXN0UGVyY2VudFRvUHhXaWR0aDpudWxsLGxhc3RQZXJjZW50VG9QeEhlaWdodDpudWxsLGxhc3RFbVRvUHg6bnVsbCxyZW1Ub1B4Om51bGwsdndUb1B4Om51bGwsdmhUb1B4Om51bGx9LF89W107di5lYWNoKG0sZnVuY3Rpb24oZSx0KXtoLmlzTm9kZSh0KSYmci5jYWxsKHQpfSk7dmFyIE4sJD12LmV4dGVuZCh7fSxiLmRlZmF1bHRzLHcpO2lmKCQubG9vcD1wYXJzZUludCgkLmxvb3ApLE49MiokLmxvb3AtMSwkLmxvb3ApZm9yKHZhciBqPTA7Tj5qO2orKyl7dmFyIHo9e2RlbGF5OiQuZGVsYXkscHJvZ3Jlc3M6JC5wcm9ncmVzc307aj09PU4tMSYmKHouZGlzcGxheT0kLmRpc3BsYXksei52aXNpYmlsaXR5PSQudmlzaWJpbGl0eSx6LmNvbXBsZXRlPSQuY29tcGxldGUpLEMobSxcInJldmVyc2VcIix6KX1yZXR1cm4gZSgpfX07Yj12LmV4dGVuZChDLGIpLGIuYW5pbWF0ZT1DO3ZhciBrPXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxwO3JldHVybiBiLlN0YXRlLmlzTW9iaWxlfHxpLmhpZGRlbj09PW58fGkuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIixmdW5jdGlvbigpe2kuaGlkZGVuPyhrPWZ1bmN0aW9uKGUpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSghMCl9LDE2KX0sYygpKTprPXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxwfSksZS5WZWxvY2l0eT1iLGUhPT10JiYoZS5mbi52ZWxvY2l0eT1DLGUuZm4udmVsb2NpdHkuZGVmYXVsdHM9Yi5kZWZhdWx0cyksdi5lYWNoKFtcIkRvd25cIixcIlVwXCJdLGZ1bmN0aW9uKGUsdCl7Yi5SZWRpcmVjdHNbXCJzbGlkZVwiK3RdPWZ1bmN0aW9uKGUsaSxyLGEsbyxzKXt2YXIgbD12LmV4dGVuZCh7fSxpKSx1PWwuYmVnaW4sYz1sLmNvbXBsZXRlLGY9e2hlaWdodDpcIlwiLG1hcmdpblRvcDpcIlwiLG1hcmdpbkJvdHRvbTpcIlwiLHBhZGRpbmdUb3A6XCJcIixwYWRkaW5nQm90dG9tOlwiXCJ9LGQ9e307bC5kaXNwbGF5PT09biYmKGwuZGlzcGxheT1cIkRvd25cIj09PXQ/XCJpbmxpbmVcIj09PWIuQ1NTLlZhbHVlcy5nZXREaXNwbGF5VHlwZShlKT9cImlubGluZS1ibG9ja1wiOlwiYmxvY2tcIjpcIm5vbmVcIiksbC5iZWdpbj1mdW5jdGlvbigpe3UmJnUuY2FsbChvLG8pO2Zvcih2YXIgaSBpbiBmKXtkW2ldPWUuc3R5bGVbaV07dmFyIG49Yi5DU1MuZ2V0UHJvcGVydHlWYWx1ZShlLGkpO2ZbaV09XCJEb3duXCI9PT10P1tuLDBdOlswLG5dfWQub3ZlcmZsb3c9ZS5zdHlsZS5vdmVyZmxvdyxlLnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCJ9LGwuY29tcGxldGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gZCllLnN0eWxlW3RdPWRbdF07YyYmYy5jYWxsKG8sbykscyYmcy5yZXNvbHZlcihvKX0sYihlLGYsbCl9fSksdi5lYWNoKFtcIkluXCIsXCJPdXRcIl0sZnVuY3Rpb24oZSx0KXtiLlJlZGlyZWN0c1tcImZhZGVcIit0XT1mdW5jdGlvbihlLGkscixhLG8scyl7dmFyIGw9di5leHRlbmQoe30saSksdT17b3BhY2l0eTpcIkluXCI9PT10PzE6MH0sYz1sLmNvbXBsZXRlO2wuY29tcGxldGU9ciE9PWEtMT9sLmJlZ2luPW51bGw6ZnVuY3Rpb24oKXtjJiZjLmNhbGwobyxvKSxzJiZzLnJlc29sdmVyKG8pfSxsLmRpc3BsYXk9PT1uJiYobC5kaXNwbGF5PVwiSW5cIj09PXQ/XCJhdXRvXCI6XCJub25lXCIpLGIodGhpcyx1LGwpfX0pLGJ9KHdpbmRvdy5qUXVlcnl8fHdpbmRvdy5aZXB0b3x8d2luZG93LHdpbmRvdyxkb2N1bWVudCl9KSxmdW5jdGlvbihlKXtlKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2UuZm4ucmV2ZXJzZT1bXS5yZXZlcnNlLGUoZG9jdW1lbnQpLm9uKFwibW91c2VlbnRlci5maXhlZEFjdGlvbkJ0blwiLFwiLmZpeGVkLWFjdGlvbi1idG5cIixmdW5jdGlvbihpKXt2YXIgbj1lKHRoaXMpO3Qobil9KSxlKGRvY3VtZW50KS5vbihcIm1vdXNlbGVhdmUuZml4ZWRBY3Rpb25CdG5cIixcIi5maXhlZC1hY3Rpb24tYnRuXCIsZnVuY3Rpb24odCl7dmFyIG49ZSh0aGlzKTtpKG4pfSl9KSxlLmZuLmV4dGVuZCh7b3BlbkZBQjpmdW5jdGlvbigpe3ZhciBpPWUodGhpcyk7dChpKX0sY2xvc2VGQUI6ZnVuY3Rpb24oKXtpKCR0aGlzKX19KTt2YXIgdD1mdW5jdGlvbih0KXtpZigkdGhpcz10LCR0aGlzLmhhc0NsYXNzKFwiYWN0aXZlXCIpPT09ITEpeyR0aGlzLmFkZENsYXNzKFwiYWN0aXZlXCIpLCR0aGlzLmZpbmQoXCJ1bCAuYnRuLWZsb2F0aW5nXCIpLnZlbG9jaXR5KHtzY2FsZVk6XCIuNFwiLHNjYWxlWDpcIi40XCIsdHJhbnNsYXRlWTpcIjQwcHhcIn0se2R1cmF0aW9uOjB9KTt2YXIgaT0wOyR0aGlzLmZpbmQoXCJ1bCAuYnRuLWZsb2F0aW5nXCIpLnJldmVyc2UoKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS52ZWxvY2l0eSh7b3BhY2l0eTpcIjFcIixzY2FsZVg6XCIxXCIsc2NhbGVZOlwiMVwiLHRyYW5zbGF0ZVk6XCIwXCJ9LHtkdXJhdGlvbjo4MCxkZWxheTppfSksaSs9NDB9KX19LGk9ZnVuY3Rpb24oZSl7JHRoaXM9ZSwkdGhpcy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTskdGhpcy5maW5kKFwidWwgLmJ0bi1mbG9hdGluZ1wiKS52ZWxvY2l0eShcInN0b3BcIiwhMCksJHRoaXMuZmluZChcInVsIC5idG4tZmxvYXRpbmdcIikudmVsb2NpdHkoe29wYWNpdHk6XCIwXCIsc2NhbGVYOlwiLjRcIixzY2FsZVk6XCIuNFwiLHRyYW5zbGF0ZVk6XCI0MHB4XCJ9LHtkdXJhdGlvbjo4MH0pfX0oalF1ZXJ5KSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBudWxsIT09ZSYmZT09PWUud2luZG93fWZ1bmN0aW9uIHIoZSl7cmV0dXJuIG4oZSk/ZTo5PT09ZS5ub2RlVHlwZSYmZS5kZWZhdWx0Vmlld31mdW5jdGlvbiBhKGUpe3ZhciB0LGksbj17dG9wOjAsbGVmdDowfSxhPWUmJmUub3duZXJEb2N1bWVudDtyZXR1cm4gdD1hLmRvY3VtZW50RWxlbWVudCxcInVuZGVmaW5lZFwiIT10eXBlb2YgZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJihuPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGk9cihhKSx7dG9wOm4udG9wK2kucGFnZVlPZmZzZXQtdC5jbGllbnRUb3AsbGVmdDpuLmxlZnQraS5wYWdlWE9mZnNldC10LmNsaWVudExlZnR9fWZ1bmN0aW9uIG8oZSl7dmFyIHQ9XCJcIjtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodCs9aStcIjpcIitlW2ldK1wiO1wiKTtyZXR1cm4gdH1mdW5jdGlvbiB1KGUpe2lmKGwuYWxsb3dFdmVudChlKT09PSExKXJldHVybiBudWxsO2Zvcih2YXIgdD1udWxsLGk9ZS50YXJnZXR8fGUuc3JjRWxlbWVudDtudWxsIT09aS5wYXJlbnRFbGVtZW50Oyl7aWYoIShpIGluc3RhbmNlb2YgU1ZHRWxlbWVudHx8LTE9PT1pLmNsYXNzTmFtZS5pbmRleE9mKFwid2F2ZXMtZWZmZWN0XCIpKSl7dD1pO2JyZWFrfWlmKGkuY2xhc3NMaXN0LmNvbnRhaW5zKFwid2F2ZXMtZWZmZWN0XCIpKXt0PWk7YnJlYWt9aT1pLnBhcmVudEVsZW1lbnR9cmV0dXJuIHR9ZnVuY3Rpb24gYyh0KXt2YXIgaT11KHQpO251bGwhPT1pJiYocy5zaG93KHQsaSksXCJvbnRvdWNoc3RhcnRcImluIGUmJihpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHMuaGlkZSwhMSksaS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIixzLmhpZGUsITEpKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIscy5oaWRlLCExKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIscy5oaWRlLCExKSl9dmFyIHQ9dHx8e30saT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpLHM9e2R1cmF0aW9uOjc1MCxzaG93OmZ1bmN0aW9uKGUsdCl7aWYoMj09PWUuYnV0dG9uKXJldHVybiExO3ZhciBpPXR8fHRoaXMsbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NOYW1lPVwid2F2ZXMtcmlwcGxlXCIsaS5hcHBlbmRDaGlsZChuKTt2YXIgcj1hKGkpLGw9ZS5wYWdlWS1yLnRvcCx1PWUucGFnZVgtci5sZWZ0LGM9XCJzY2FsZShcIitpLmNsaWVudFdpZHRoLzEwMCoxMCtcIilcIjtcInRvdWNoZXNcImluIGUmJihsPWUudG91Y2hlc1swXS5wYWdlWS1yLnRvcCx1PWUudG91Y2hlc1swXS5wYWdlWC1yLmxlZnQpLG4uc2V0QXR0cmlidXRlKFwiZGF0YS1ob2xkXCIsRGF0ZS5ub3coKSksbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNjYWxlXCIsYyksbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIix1KSxuLnNldEF0dHJpYnV0ZShcImRhdGEteVwiLGwpO3ZhciBmPXt0b3A6bCtcInB4XCIsbGVmdDp1K1wicHhcIn07bi5jbGFzc05hbWU9bi5jbGFzc05hbWUrXCIgd2F2ZXMtbm90cmFuc2l0aW9uXCIsbi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLG8oZikpLG4uY2xhc3NOYW1lPW4uY2xhc3NOYW1lLnJlcGxhY2UoXCJ3YXZlcy1ub3RyYW5zaXRpb25cIixcIlwiKSxmW1wiLXdlYmtpdC10cmFuc2Zvcm1cIl09YyxmW1wiLW1vei10cmFuc2Zvcm1cIl09YyxmW1wiLW1zLXRyYW5zZm9ybVwiXT1jLGZbXCItby10cmFuc2Zvcm1cIl09YyxmLnRyYW5zZm9ybT1jLGYub3BhY2l0eT1cIjFcIixmW1wiLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uXCJdPXMuZHVyYXRpb24rXCJtc1wiLGZbXCItbW96LXRyYW5zaXRpb24tZHVyYXRpb25cIl09cy5kdXJhdGlvbitcIm1zXCIsZltcIi1vLXRyYW5zaXRpb24tZHVyYXRpb25cIl09cy5kdXJhdGlvbitcIm1zXCIsZltcInRyYW5zaXRpb24tZHVyYXRpb25cIl09cy5kdXJhdGlvbitcIm1zXCIsZltcIi13ZWJraXQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIl09XCJjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApXCIsZltcIi1tb3otdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIl09XCJjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApXCIsZltcIi1vLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uXCJdPVwiY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKVwiLGZbXCJ0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvblwiXT1cImN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MClcIixuLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsbyhmKSl9LGhpZGU6ZnVuY3Rpb24oZSl7bC50b3VjaHVwKGUpO3ZhciB0PXRoaXMsbj0oMS40KnQuY2xpZW50V2lkdGgsbnVsbCkscj10LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ3YXZlcy1yaXBwbGVcIik7aWYoIShyLmxlbmd0aD4wKSlyZXR1cm4hMTtuPXJbci5sZW5ndGgtMV07dmFyIGE9bi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiksdT1uLmdldEF0dHJpYnV0ZShcImRhdGEteVwiKSxjPW4uZ2V0QXR0cmlidXRlKFwiZGF0YS1zY2FsZVwiKSxmPURhdGUubm93KCktTnVtYmVyKG4uZ2V0QXR0cmlidXRlKFwiZGF0YS1ob2xkXCIpKSxkPTM1MC1mOzA+ZCYmKGQ9MCksc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPXt0b3A6dStcInB4XCIsbGVmdDphK1wicHhcIixvcGFjaXR5OlwiMFwiLFwiLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uXCI6cy5kdXJhdGlvbitcIm1zXCIsXCItbW96LXRyYW5zaXRpb24tZHVyYXRpb25cIjpzLmR1cmF0aW9uK1wibXNcIixcIi1vLXRyYW5zaXRpb24tZHVyYXRpb25cIjpzLmR1cmF0aW9uK1wibXNcIixcInRyYW5zaXRpb24tZHVyYXRpb25cIjpzLmR1cmF0aW9uK1wibXNcIixcIi13ZWJraXQtdHJhbnNmb3JtXCI6YyxcIi1tb3otdHJhbnNmb3JtXCI6YyxcIi1tcy10cmFuc2Zvcm1cIjpjLFwiLW8tdHJhbnNmb3JtXCI6Yyx0cmFuc2Zvcm06Y307bi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLG8oZSkpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7dC5yZW1vdmVDaGlsZChuKX1jYXRjaChlKXtyZXR1cm4hMX19LHMuZHVyYXRpb24pfSxkKX0sd3JhcElucHV0OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgaT1lW3RdO2lmKFwiaW5wdXRcIj09PWkudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgbj1pLnBhcmVudE5vZGU7aWYoXCJpXCI9PT1uLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmLTEhPT1uLmNsYXNzTmFtZS5pbmRleE9mKFwid2F2ZXMtZWZmZWN0XCIpKWNvbnRpbnVlO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO3IuY2xhc3NOYW1lPWkuY2xhc3NOYW1lK1wiIHdhdmVzLWlucHV0LXdyYXBwZXJcIjt2YXIgYT1pLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO2F8fChhPVwiXCIpLHIuc2V0QXR0cmlidXRlKFwic3R5bGVcIixhKSxpLmNsYXNzTmFtZT1cIndhdmVzLWJ1dHRvbi1pbnB1dFwiLGkucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiksbi5yZXBsYWNlQ2hpbGQocixpKSxyLmFwcGVuZENoaWxkKGkpfX19fSxsPXt0b3VjaGVzOjAsYWxsb3dFdmVudDpmdW5jdGlvbihlKXt2YXIgdD0hMDtyZXR1cm5cInRvdWNoc3RhcnRcIj09PWUudHlwZT9sLnRvdWNoZXMrPTE6XCJ0b3VjaGVuZFwiPT09ZS50eXBlfHxcInRvdWNoY2FuY2VsXCI9PT1lLnR5cGU/c2V0VGltZW91dChmdW5jdGlvbigpe2wudG91Y2hlcz4wJiYobC50b3VjaGVzLT0xKX0sNTAwKTpcIm1vdXNlZG93blwiPT09ZS50eXBlJiZsLnRvdWNoZXM+MCYmKHQ9ITEpLHR9LHRvdWNodXA6ZnVuY3Rpb24oZSl7bC5hbGxvd0V2ZW50KGUpfX07dC5kaXNwbGF5RWZmZWN0PWZ1bmN0aW9uKHQpe3Q9dHx8e30sXCJkdXJhdGlvblwiaW4gdCYmKHMuZHVyYXRpb249dC5kdXJhdGlvbikscy53cmFwSW5wdXQoaShcIi53YXZlcy1lZmZlY3RcIikpLFwib250b3VjaHN0YXJ0XCJpbiBlJiZkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsYywhMSksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsYywhMSl9LHQuYXR0YWNoPWZ1bmN0aW9uKHQpe1wiaW5wdXRcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYocy53cmFwSW5wdXQoW3RdKSx0PXQucGFyZW50RWxlbWVudCksXCJvbnRvdWNoc3RhcnRcImluIGUmJnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixjLCExKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIixjLCExKX0sZS5XYXZlcz10LGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXt0LmRpc3BsYXlFZmZlY3QoKX0sITEpfSh3aW5kb3cpOyIsIi8qIEJ1dHRvbnMgKi9cblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIGpRdWVyeSByZXZlcnNlXG4gICAgICAgICQuZm4ucmV2ZXJzZSA9IFtdLnJldmVyc2U7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXIuZml4ZWRBY3Rpb25CdG4nLCAnLmZpeGVkLWFjdGlvbi1idG4nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgIG9wZW5GQUJNZW51KCR0aGlzKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZS5maXhlZEFjdGlvbkJ0bicsICcuZml4ZWQtYWN0aW9uLWJ0bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgY2xvc2VGQUJNZW51KCR0aGlzKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgb3BlbkZBQjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgIG9wZW5GQUJNZW51KCR0aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2xvc2VGQUI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsb3NlRkFCTWVudSgkdGhpcyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgdmFyIG9wZW5GQUJNZW51ID0gZnVuY3Rpb24gKGJ0bikge1xuICAgICAgICAkdGhpcyA9IGJ0bjtcbiAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgc2NhbGVZOiBcIi40XCIsXG4gICAgICAgICAgICAgICAgc2NhbGVYOiBcIi40XCIsXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlWTogXCI0MHB4XCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB0aW1lID0gMDtcbiAgICAgICAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS5yZXZlcnNlKCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVZOiBcIjBcIlxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDgwLFxuICAgICAgICAgICAgICAgICAgICBkZWxheTogdGltZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRpbWUgKz0gNDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY2xvc2VGQUJNZW51ID0gZnVuY3Rpb24gKGJ0bikge1xuICAgICAgICAkdGhpcyA9IGJ0bjtcbiAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB2YXIgdGltZSA9IDA7XG4gICAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XG4gICAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICBvcGFjaXR5OiBcIjBcIixcbiAgICAgICAgICAgIHNjYWxlWDogXCIuNFwiLFxuICAgICAgICAgICAgc2NhbGVZOiBcIi40XCIsXG4gICAgICAgICAgICB0cmFuc2xhdGVZOiBcIjQwcHhcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogODBcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG59KGpRdWVyeSkpOyIsIi8qIENBUkQgUkVWRUFMICovXG5cbihmdW5jdGlvbiAoJCkge1xuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2suY2FyZCcsICcuY2FyZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuY2FyZC1yZXZlYWwnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJChlLnRhcmdldCkuaXMoJCgnLmNhcmQtcmV2ZWFsIC5jYXJkLXRpdGxlJykpIHx8ICQoZS50YXJnZXQpLmlzKCQoJy5jYXJkLXJldmVhbCAuY2FyZC10aXRsZSBpJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgUmV2ZWFsIGFuaW1hdGUgZG93biBhbmQgZGlzcGxheSBub25lXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNhcmQtcmV2ZWFsJykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlWTogMFxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjI1LFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJChlLnRhcmdldCkuaXMoJCgnLmNhcmQgLmFjdGl2YXRvcicpKSB8fFxuICAgICAgICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5pcygkKCcuY2FyZCAuYWN0aXZhdG9yIGknKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2FyZC1yZXZlYWwnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgICAgICB9KS52ZWxvY2l0eShcInN0b3BcIiwgZmFsc2UpLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVk6ICctMTAwJSdcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG59KGpRdWVyeSkpOyIsIi8qIENIQVJBQ1RFUiBDT1VOVEVSICovXG5cbihmdW5jdGlvbiAoJCkge1xuXG4gICAgJC5mbi5jaGFyYWN0ZXJDb3VudGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGl0SGFzTGVuZ3RoQXR0cmlidXRlID0gJCh0aGlzKS5hdHRyKCdsZW5ndGgnKSAhPT0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICBpZiAoaXRIYXNMZW5ndGhBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKCdpbnB1dCcsIHVwZGF0ZUNvdW50ZXIpO1xuICAgICAgICAgICAgICAgICQodGhpcykub24oJ2ZvY3VzJywgdXBkYXRlQ291bnRlcik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vbignYmx1cicsIHJlbW92ZUNvdW50ZXJFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIGFkZENvdW50ZXJFbGVtZW50KCQodGhpcykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVDb3VudGVyKCkge1xuICAgICAgICB2YXIgbWF4TGVuZ3RoID0gKyQodGhpcykuYXR0cignbGVuZ3RoJyksXG4gICAgICAgICAgICBhY3R1YWxMZW5ndGggPSArJCh0aGlzKS52YWwoKS5sZW5ndGgsXG4gICAgICAgICAgICBpc1ZhbGlkTGVuZ3RoID0gYWN0dWFsTGVuZ3RoIDw9IG1heExlbmd0aDtcblxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpXG4gICAgICAgICAgICAuaHRtbChhY3R1YWxMZW5ndGggKyAnLycgKyBtYXhMZW5ndGgpO1xuXG4gICAgICAgIGFkZElucHV0U3R5bGUoaXNWYWxpZExlbmd0aCwgJCh0aGlzKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkQ291bnRlckVsZW1lbnQoJGlucHV0KSB7XG4gICAgICAgIHZhciAkY291bnRlckVsZW1lbnQgPSAkKCc8c3Bhbi8+JylcbiAgICAgICAgICAgIC5hZGRDbGFzcygnY2hhcmFjdGVyLWNvdW50ZXInKVxuICAgICAgICAgICAgLmNzcygnZmxvYXQnLCAncmlnaHQnKVxuICAgICAgICAgICAgLmNzcygnZm9udC1zaXplJywgJzEycHgnKVxuICAgICAgICAgICAgLmNzcygnaGVpZ2h0JywgMSk7XG5cbiAgICAgICAgJGlucHV0LnBhcmVudCgpLmFwcGVuZCgkY291bnRlckVsZW1lbnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUNvdW50ZXJFbGVtZW50KCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpLmh0bWwoJycpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZElucHV0U3R5bGUoaXNWYWxpZExlbmd0aCwgJGlucHV0KSB7XG4gICAgICAgIHZhciBpbnB1dEhhc0ludmFsaWRDbGFzcyA9ICRpbnB1dC5oYXNDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICBpZiAoaXNWYWxpZExlbmd0aCAmJiBpbnB1dEhhc0ludmFsaWRDbGFzcykge1xuICAgICAgICAgICAgJGlucHV0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzVmFsaWRMZW5ndGggJiYgIWlucHV0SGFzSW52YWxpZENsYXNzKSB7XG4gICAgICAgICAgICAkaW5wdXQucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgICAkaW5wdXQuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnaW5wdXQsIHRleHRhcmVhJykuY2hhcmFjdGVyQ291bnRlcigpO1xuICAgIH0pO1xuXG59KGpRdWVyeSkpOyIsIi8qIENPTExBUFNJQkxFICovXG5cbihmdW5jdGlvbiAoJCkge1xuICAgICQuZm4uY29sbGFwc2libGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBhY2NvcmRpb246IHVuZGVmaW5lZFxuICAgICAgICB9O1xuXG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgdmFyICRwYW5lbF9oZWFkZXJzID0gJCh0aGlzKS5maW5kKCc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xuXG4gICAgICAgICAgICB2YXIgY29sbGFwc2libGVfdHlwZSA9ICR0aGlzLmRhdGEoXCJjb2xsYXBzaWJsZVwiKTtcblxuICAgICAgICAgICAgLy8gVHVybiBvZmYgYW55IGV4aXN0aW5nIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgICAgICAkdGhpcy5vZmYoJ2NsaWNrLmNvbGxhcHNlJywgJy5jb2xsYXBzaWJsZS1oZWFkZXInKTtcbiAgICAgICAgICAgICRwYW5lbF9oZWFkZXJzLm9mZignY2xpY2suY29sbGFwc2UnKTtcblxuXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKlxuICAgICAgICAgICAgSGVscGVyIEZ1bmN0aW9uc1xuICAgICAgICAgICAgKioqKioqKioqKioqKioqKi9cblxuICAgICAgICAgICAgLy8gQWNjb3JkaW9uIE9wZW5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFjY29yZGlvbk9wZW4ob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgJHBhbmVsX2hlYWRlcnMgPSAkdGhpcy5maW5kKCc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5wYXJlbnQoKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSwgZmFsc2UpLnNsaWRlRG93bih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2libGluZ3MoJy5jb2xsYXBzaWJsZS1ib2R5Jykuc3RvcCh0cnVlLCBmYWxzZSkuc2xpZGVVcCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkcGFuZWxfaGVhZGVycy5ub3Qob2JqZWN0KS5yZW1vdmVDbGFzcygnYWN0aXZlJykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICRwYW5lbF9oZWFkZXJzLm5vdChvYmplY3QpLnBhcmVudCgpLmNoaWxkcmVuKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSwgZmFsc2UpLnNsaWRlVXAoe1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IFwiZWFzZU91dFF1YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRXhwYW5kYWJsZSBPcGVuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHBhbmRhYmxlT3BlbihvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QucGFyZW50KCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zaWJsaW5ncygnLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsIGZhbHNlKS5zbGlkZURvd24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDM1MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlT3V0UXVhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2hlaWdodCcsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSwgZmFsc2UpLnNsaWRlVXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDM1MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlT3V0UXVhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2hlaWdodCcsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENoZWNrIGlmIG9iamVjdCBpcyBjaGlsZHJlbiBvZiBwYW5lbCBoZWFkZXJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge09iamVjdH0gIG9iamVjdCBKcXVlcnkgb2JqZWN0XG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGl0IGlzIGNoaWxkcmVuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzQ2hpbGRyZW5PZlBhbmVsSGVhZGVyKG9iamVjdCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhbmVsSGVhZGVyID0gZ2V0UGFuZWxIZWFkZXIob2JqZWN0KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBwYW5lbEhlYWRlci5sZW5ndGggPiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBwYW5lbCBoZWFkZXIgZnJvbSBhIGNoaWxkcmVuIGVsZW1lbnRcbiAgICAgICAgICAgICAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IEpxdWVyeSBvYmplY3RcbiAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gcGFuZWwgaGVhZGVyIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRQYW5lbEhlYWRlcihvYmplY3QpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3QuY2xvc2VzdCgnbGkgPiAuY29sbGFwc2libGUtaGVhZGVyJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKioqKiAgRW5kIEhlbHBlciBGdW5jdGlvbnMgICoqKioqL1xuXG5cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWNjb3JkaW9uIHx8IGNvbGxhcHNpYmxlX3R5cGUgPT09IFwiYWNjb3JkaW9uXCIgfHwgY29sbGFwc2libGVfdHlwZSA9PT0gdW5kZWZpbmVkKSB7IC8vIEhhbmRsZSBBY2NvcmRpb25cbiAgICAgICAgICAgICAgICAvLyBBZGQgY2xpY2sgaGFuZGxlciB0byBvbmx5IGRpcmVjdCBjb2xsYXBzaWJsZSBoZWFkZXIgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAkcGFuZWxfaGVhZGVycyA9ICR0aGlzLmZpbmQoJz4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgJHBhbmVsX2hlYWRlcnMub24oJ2NsaWNrLmNvbGxhcHNlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAkKGUudGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDaGlsZHJlbk9mUGFuZWxIZWFkZXIoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBnZXRQYW5lbEhlYWRlcihlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBhY2NvcmRpb25PcGVuKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9wZW4gZmlyc3QgYWN0aXZlXG4gICAgICAgICAgICAgICAgYWNjb3JkaW9uT3BlbigkcGFuZWxfaGVhZGVycy5maWx0ZXIoJy5hY3RpdmUnKS5maXJzdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIEhhbmRsZSBFeHBhbmRhYmxlc1xuICAgICAgICAgICAgICAgICRwYW5lbF9oZWFkZXJzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY2xpY2sgaGFuZGxlciB0byBvbmx5IGRpcmVjdCBjb2xsYXBzaWJsZSBoZWFkZXIgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5vbignY2xpY2suY29sbGFwc2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NoaWxkcmVuT2ZQYW5lbEhlYWRlcihlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBnZXRQYW5lbEhlYWRlcihlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kYWJsZU9wZW4oZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBPcGVuIGFueSBib2RpZXMgdGhhdCBoYXZlIHRoZSBhY3RpdmUgY2xhc3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRhYmxlT3BlbigkKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmNvbGxhcHNpYmxlJykuY29sbGFwc2libGUoKTtcbiAgICB9KTtcbn0oalF1ZXJ5KSk7IiwiLyogRFJPUERPV04gKi9cblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgICAvLyBBZGQgcG9zaWJpbGl0eSB0byBzY3JvbGwgdG8gc2VsZWN0ZWQgb3B0aW9uXG4gICAgLy8gdXNlZnVsbCBmb3Igc2VsZWN0IGZvciBleGFtcGxlXG4gICAgJC5mbi5zY3JvbGxUbyA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICQodGhpcykuc2Nyb2xsVG9wKCQodGhpcykuc2Nyb2xsVG9wKCkgLSAkKHRoaXMpLm9mZnNldCgpLnRvcCArICQoZWxlbSkub2Zmc2V0KCkudG9wKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgICQuZm4uZHJvcGRvd24gPSBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIGluRHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgIG91dER1cmF0aW9uOiAyMjUsXG4gICAgICAgICAgICBjb25zdHJhaW5fd2lkdGg6IHRydWUsIC8vIENvbnN0cmFpbnMgd2lkdGggb2YgZHJvcGRvd24gdG8gdGhlIGFjdGl2YXRvclxuICAgICAgICAgICAgaG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgZ3V0dGVyOiAwLCAvLyBTcGFjaW5nIGZyb20gZWRnZVxuICAgICAgICAgICAgYmVsb3dPcmlnaW46IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvcmlnaW4gPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbik7XG5cbiAgICAgICAgICAgIC8vIERyb3Bkb3duIG1lbnVcbiAgICAgICAgICAgIHZhciBhY3RpdmF0ZXMgPSAkKFwiI1wiICsgb3JpZ2luLmF0dHIoJ2RhdGEtYWN0aXZhdGVzJykpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKCkge1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW4uZGF0YSgnaW5kdXJhdGlvbicpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuaW5EdXJhdGlvbiA9IG9yaWdpbi5kYXRhKCdpbkR1cmF0aW9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdvdXRkdXJhdGlvbicpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMub3V0RHVyYXRpb24gPSBvcmlnaW4uZGF0YSgnb3V0RHVyYXRpb24nKTtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2NvbnN0cmFpbndpZHRoJykgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb25zdHJhaW5fd2lkdGggPSBvcmlnaW4uZGF0YSgnY29uc3RyYWlud2lkdGgnKTtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2hvdmVyJykgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5ob3ZlciA9IG9yaWdpbi5kYXRhKCdob3ZlcicpO1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW4uZGF0YSgnZ3V0dGVyJykgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5ndXR0ZXIgPSBvcmlnaW4uZGF0YSgnZ3V0dGVyJyk7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdiZWxvd29yaWdpbicpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYmVsb3dPcmlnaW4gPSBvcmlnaW4uZGF0YSgnYmVsb3dvcmlnaW4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXBkYXRlT3B0aW9ucygpO1xuXG4gICAgICAgICAgICAvLyBBdHRhY2ggZHJvcGRvd24gdG8gaXRzIGFjdGl2YXRvclxuICAgICAgICAgICAgb3JpZ2luLmFmdGVyKGFjdGl2YXRlcyk7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgIEhlbHBlciBmdW5jdGlvbiB0byBwb3NpdGlvbiBhbmQgcmVzaXplIGRyb3Bkb3duLlxuICAgICAgICAgICAgICBVc2VkIGluIGhvdmVyIGFuZCBjbGljayBoYW5kbGVyLlxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBsYWNlRHJvcGRvd24oKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaHRtbCBkYXRhIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICB1cGRhdGVPcHRpb25zKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgRHJvcGRvd24gc3RhdGVcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZXMuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uc3RyYWluIHdpZHRoXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29uc3RyYWluX3dpZHRoID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlcy5jc3MoJ3dpZHRoJywgb3JpZ2luLm91dGVyV2lkdGgoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmJlbG93T3JpZ2luID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IG9yaWdpbi5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZWRnZSBhbGlnbm1lbnRcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IG9yaWdpbi5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aF9kaWZmZXJlbmNlID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgZ3V0dGVyX3NwYWNpbmcgPSBvcHRpb25zLmd1dHRlcjtcblxuXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldExlZnQgKyBhY3RpdmF0ZXMuaW5uZXJXaWR0aCgpID4gJCh3aW5kb3cpLndpZHRoKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGhfZGlmZmVyZW5jZSA9IG9yaWdpbi5pbm5lcldpZHRoKCkgLSBhY3RpdmF0ZXMuaW5uZXJXaWR0aCgpO1xuICAgICAgICAgICAgICAgICAgICBndXR0ZXJfc3BhY2luZyA9IGd1dHRlcl9zcGFjaW5nICogLTE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUG9zaXRpb24gZHJvcGRvd25cbiAgICAgICAgICAgICAgICBhY3RpdmF0ZXMuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogb3JpZ2luLnBvc2l0aW9uKCkudG9wICsgb2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBvcmlnaW4ucG9zaXRpb24oKS5sZWZ0ICsgd2lkdGhfZGlmZmVyZW5jZSArIGd1dHRlcl9zcGFjaW5nXG4gICAgICAgICAgICAgICAgfSk7XG5cblxuXG4gICAgICAgICAgICAgICAgLy8gU2hvdyBkcm9wZG93blxuICAgICAgICAgICAgICAgIGFjdGl2YXRlcy5zdG9wKHRydWUsIHRydWUpLmNzcygnb3BhY2l0eScsIDApXG4gICAgICAgICAgICAgICAgICAgIC5zbGlkZURvd24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRTaW5lJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaGlkZURyb3Bkb3duKCkge1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlcy5mYWRlT3V0KG9wdGlvbnMub3V0RHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhvdmVyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ob3Zlcikge1xuICAgICAgICAgICAgICAgIHZhciBvcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgb3JpZ2luLnVuYmluZCgnY2xpY2suJyArIG9yaWdpbi5hdHRyKCdpZCcpKTtcbiAgICAgICAgICAgICAgICAvLyBIb3ZlciBoYW5kbGVyIHRvIHNob3cgZHJvcGRvd25cbiAgICAgICAgICAgICAgICBvcmlnaW4ub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSkgeyAvLyBNb3VzZSBvdmVyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVuID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VEcm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBvcmlnaW4ub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBob3ZlciBvbiBvcmlnaW4gdGhlbiB0byBzb21ldGhpbmcgb3RoZXIgdGhhbiBkcm9wZG93biBjb250ZW50LCB0aGVuIGNsb3NlXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b0VsID0gZS50b0VsZW1lbnQgfHwgZS5yZWxhdGVkVGFyZ2V0OyAvLyBhZGRlZCBicm93c2VyIGNvbXBhdGliaWxpdHkgZm9yIHRhcmdldCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIGlmICghJCh0b0VsKS5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpLmlzKGFjdGl2YXRlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlcy5zdG9wKHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZURyb3Bkb3duKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGFjdGl2YXRlcy5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlKSB7IC8vIE1vdXNlIG91dFxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9FbCA9IGUudG9FbGVtZW50IHx8IGUucmVsYXRlZFRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi1idXR0b24nKS5pcyhvcmlnaW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZXMuc3RvcCh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVEcm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDbGlja1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIC8vIENsaWNrIGhhbmRsZXIgdG8gc2hvdyBkcm9wZG93blxuICAgICAgICAgICAgICAgIG9yaWdpbi51bmJpbmQoJ2NsaWNrLicgKyBvcmlnaW4uYXR0cignaWQnKSk7XG4gICAgICAgICAgICAgICAgb3JpZ2luLmJpbmQoJ2NsaWNrLicgKyBvcmlnaW4uYXR0cignaWQnKSwgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luWzBdID09IGUuY3VycmVudFRhcmdldCAmJiAoJChlLnRhcmdldCkuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnRzIGJ1dHRvbiBjbGljayBmcm9tIG1vdmluZyB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlRHJvcGRvd24oKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIG9yaWdpbiBpcyBjbGlja2VkIGFuZCBtZW51IGlzIG9wZW4sIGNsb3NlIG1lbnVcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVEcm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnVuYmluZCgnY2xpY2suJyArIGFjdGl2YXRlcy5hdHRyKCdpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBtZW51IG9wZW4sIGFkZCBjbGljayBjbG9zZSBoYW5kbGVyIHRvIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmF0ZXMuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5iaW5kKCdjbGljay4nICsgYWN0aXZhdGVzLmF0dHIoJ2lkJyksIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY3RpdmF0ZXMuaXMoZS50YXJnZXQpICYmICFvcmlnaW4uaXMoZS50YXJnZXQpICYmICghb3JpZ2luLmZpbmQoZS50YXJnZXQpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVEcm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoJ2NsaWNrLicgKyBhY3RpdmF0ZXMuYXR0cignaWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSAvLyBFbmQgZWxzZVxuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gdG8gb3BlbiBhbmQgY2xvc2UgZXZlbnQgLSB1c2VmdWwgZm9yIHNlbGVjdCBjb21wb25lbnRcbiAgICAgICAgICAgIG9yaWdpbi5vbignb3BlbicsIHBsYWNlRHJvcGRvd24pO1xuICAgICAgICAgICAgb3JpZ2luLm9uKCdjbG9zZScsIGhpZGVEcm9wZG93bik7XG5cblxuICAgICAgICB9KTtcbiAgICB9OyAvLyBFbmQgZHJvcGRvd24gcGx1Z2luXG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5kcm9wZG93bi1idXR0b24nKS5kcm9wZG93bigpO1xuICAgIH0pO1xufShqUXVlcnkpKTsiLCIvKiBGT1JNUyAqL1xuXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIGxhYmVscyBvZiB0ZXh0IGZpZWxkc1xuICAgICAgICBNYXRlcmlhbGl6ZS51cGRhdGVUZXh0RmllbGRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0X3NlbGVjdG9yID0gJ2lucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCB0ZXh0YXJlYSc7XG4gICAgICAgICAgICAkKGlucHV0X3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLnZhbCgpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSB1bmRlZmluZWQgfHwgJChlbGVtZW50KVswXS52YWxpZGl0eS5iYWRJbnB1dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCwgaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCwgaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBUZXh0IGJhc2VkIGlucHV0c1xuICAgICAgICB2YXIgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIHRleHRhcmVhJztcblxuICAgICAgICAvLyBIYW5kbGUgSFRNTDUgYXV0b2ZvY3VzXG4gICAgICAgICQoJ2lucHV0W2F1dG9mb2N1c10nKS5zaWJsaW5ncygnbGFiZWwsIGknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgLy8gQWRkIGFjdGl2ZSBpZiBmb3JtIGF1dG8gY29tcGxldGVcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggIT09IDAgfHwgJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCwgaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbGlkYXRlX2ZpZWxkKCQodGhpcykpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgYWN0aXZlIGlmIGlucHV0IGVsZW1lbnQgaGFzIGJlZW4gcHJlLXBvcHVsYXRlZCBvbiBkb2N1bWVudCByZWFkeVxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBNYXRlcmlhbGl6ZS51cGRhdGVUZXh0RmllbGRzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEhUTUwgRE9NIEZPUk0gUkVTRVQgaGFuZGxpbmdcbiAgICAgICAgJChkb2N1bWVudCkub24oJ3Jlc2V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBmb3JtUmVzZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChmb3JtUmVzZXQuaXMoJ2Zvcm0nKSkge1xuICAgICAgICAgICAgICAgIGZvcm1SZXNldC5maW5kKGlucHV0X3NlbGVjdG9yKS5yZW1vdmVDbGFzcygndmFsaWQnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgIGZvcm1SZXNldC5maW5kKGlucHV0X3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cigndmFsdWUnKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsLCBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCBzZWxlY3RcbiAgICAgICAgICAgICAgICBmb3JtUmVzZXQuZmluZCgnc2VsZWN0LmluaXRpYWxpemVkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNldF90ZXh0ID0gZm9ybVJlc2V0LmZpbmQoJ29wdGlvbltzZWxlY3RlZF0nKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1SZXNldC5zaWJsaW5ncygnaW5wdXQuc2VsZWN0LWRyb3Bkb3duJykudmFsKHJlc2V0X3RleHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgYWN0aXZlIHdoZW4gZWxlbWVudCBoYXMgZm9jdXNcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2ZvY3VzJywgaW5wdXRfc2VsZWN0b3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsLCBpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGlucHV0RWxlbWVudCA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoJGlucHV0RWxlbWVudC52YWwoKS5sZW5ndGggPT09IDAgJiYgJGlucHV0RWxlbWVudFswXS52YWxpZGl0eS5iYWRJbnB1dCAhPT0gdHJ1ZSAmJiAkaW5wdXRFbGVtZW50LmF0dHIoJ3BsYWNlaG9sZGVyJykgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICRpbnB1dEVsZW1lbnQuc2libGluZ3MoJ2xhYmVsLCBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsaWRhdGVfZmllbGQoJGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhbGlkYXRlX2ZpZWxkID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGhhc0xlbmd0aCA9IG9iamVjdC5hdHRyKCdsZW5ndGgnKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIGxlbkF0dHIgPSBwYXJzZUludChvYmplY3QuYXR0cignbGVuZ3RoJykpO1xuICAgICAgICAgICAgdmFyIGxlbiA9IG9iamVjdC52YWwoKS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChvYmplY3QudmFsKCkubGVuZ3RoID09PSAwICYmIG9iamVjdFswXS52YWxpZGl0eS5iYWRJbnB1dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygndmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBjaGFyYWN0ZXIgY291bnRlciBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgICAgIGlmICgob2JqZWN0LmlzKCc6dmFsaWQnKSAmJiBoYXNMZW5ndGggJiYgKGxlbiA8IGxlbkF0dHIpKSB8fCAob2JqZWN0LmlzKCc6dmFsaWQnKSAmJiAhaGFzTGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8vIFRleHRhcmVhIEF1dG8gUmVzaXplXG4gICAgICAgIHZhciBoaWRkZW5EaXYgPSAkKCcuaGlkZGVuZGl2JykuZmlyc3QoKTtcbiAgICAgICAgaWYgKCFoaWRkZW5EaXYubGVuZ3RoKSB7XG4gICAgICAgICAgICBoaWRkZW5EaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaGlkZGVuZGl2IGNvbW1vblwiPjwvZGl2PicpO1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChoaWRkZW5EaXYpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0ZXh0X2FyZWFfc2VsZWN0b3IgPSAnLm1hdGVyaWFsaXplLXRleHRhcmVhJztcblxuICAgICAgICBmdW5jdGlvbiB0ZXh0YXJlYUF1dG9SZXNpemUoJHRleHRhcmVhKSB7XG4gICAgICAgICAgICAvLyBTZXQgZm9udCBwcm9wZXJ0aWVzIG9mIGhpZGRlbkRpdlxuXG4gICAgICAgICAgICB2YXIgZm9udEZhbWlseSA9ICR0ZXh0YXJlYS5jc3MoJ2ZvbnQtZmFtaWx5Jyk7XG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSAkdGV4dGFyZWEuY3NzKCdmb250LXNpemUnKTtcblxuICAgICAgICAgICAgaWYgKGZvbnRTaXplKSB7XG4gICAgICAgICAgICAgICAgaGlkZGVuRGl2LmNzcygnZm9udC1zaXplJywgZm9udFNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgICAgICBoaWRkZW5EaXYuY3NzKCdmb250LWZhbWlseScsIGZvbnRGYW1pbHkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJHRleHRhcmVhLmF0dHIoJ3dyYXAnKSA9PT0gXCJvZmZcIikge1xuICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5jc3MoJ292ZXJmbG93LXdyYXAnLCBcIm5vcm1hbFwiKVxuICAgICAgICAgICAgICAgICAgICAuY3NzKCd3aGl0ZS1zcGFjZScsIFwicHJlXCIpO1xuICAgICAgICAgICAgfVxuXG5cblxuXG4gICAgICAgICAgICBoaWRkZW5EaXYudGV4dCgkdGV4dGFyZWEudmFsKCkgKyAnXFxuJyk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGhpZGRlbkRpdi5odG1sKCkucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gICAgICAgICAgICBoaWRkZW5EaXYuaHRtbChjb250ZW50KTtcblxuXG4gICAgICAgICAgICAvLyBXaGVuIHRleHRhcmVhIGlzIGhpZGRlbiwgd2lkdGggZ29lcyBjcmF6eS5cbiAgICAgICAgICAgIC8vIEFwcHJveGltYXRlIHdpdGggaGFsZiBvZiB3aW5kb3cgc2l6ZVxuXG4gICAgICAgICAgICBpZiAoJHRleHRhcmVhLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgaGlkZGVuRGl2LmNzcygnd2lkdGgnLCAkdGV4dGFyZWEud2lkdGgoKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgJCh3aW5kb3cpLndpZHRoKCkgLyAyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywgaGlkZGVuRGl2LmhlaWdodCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGV4dF9hcmVhX3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGV4dGFyZWEgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCR0ZXh0YXJlYS52YWwoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYUF1dG9SZXNpemUoJHRleHRhcmVhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnYm9keScpLm9uKCdrZXl1cCBrZXlkb3duJywgdGV4dF9hcmVhX3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuXG5cblxuXG5cblxuICAgIH0pOyAvLyBFbmQgb2YgJChkb2N1bWVudCkucmVhZHlcblxufShqUXVlcnkpKTsiLCIvKiBGT1JNUyAqL1xuXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIGxhYmVscyBvZiB0ZXh0IGZpZWxkc1xuICAgICAgICBNYXRlcmlhbGl6ZS51cGRhdGVUZXh0RmllbGRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0X3NlbGVjdG9yID0gJ2lucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCB0ZXh0YXJlYSc7XG4gICAgICAgICAgICAkKGlucHV0X3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLnZhbCgpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSB1bmRlZmluZWQgfHwgJChlbGVtZW50KVswXS52YWxpZGl0eS5iYWRJbnB1dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCwgaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCwgaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBUZXh0IGJhc2VkIGlucHV0c1xuICAgICAgICB2YXIgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIHRleHRhcmVhJztcblxuICAgICAgICAvLyBIYW5kbGUgSFRNTDUgYXV0b2ZvY3VzXG4gICAgICAgICQoJ2lucHV0W2F1dG9mb2N1c10nKS5zaWJsaW5ncygnbGFiZWwsIGknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgLy8gQWRkIGFjdGl2ZSBpZiBmb3JtIGF1dG8gY29tcGxldGVcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggIT09IDAgfHwgJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCwgaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbGlkYXRlX2ZpZWxkKCQodGhpcykpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgYWN0aXZlIGlmIGlucHV0IGVsZW1lbnQgaGFzIGJlZW4gcHJlLXBvcHVsYXRlZCBvbiBkb2N1bWVudCByZWFkeVxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBNYXRlcmlhbGl6ZS51cGRhdGVUZXh0RmllbGRzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEhUTUwgRE9NIEZPUk0gUkVTRVQgaGFuZGxpbmdcbiAgICAgICAgJChkb2N1bWVudCkub24oJ3Jlc2V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBmb3JtUmVzZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChmb3JtUmVzZXQuaXMoJ2Zvcm0nKSkge1xuICAgICAgICAgICAgICAgIGZvcm1SZXNldC5maW5kKGlucHV0X3NlbGVjdG9yKS5yZW1vdmVDbGFzcygndmFsaWQnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgIGZvcm1SZXNldC5maW5kKGlucHV0X3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cigndmFsdWUnKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsLCBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCBzZWxlY3RcbiAgICAgICAgICAgICAgICBmb3JtUmVzZXQuZmluZCgnc2VsZWN0LmluaXRpYWxpemVkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNldF90ZXh0ID0gZm9ybVJlc2V0LmZpbmQoJ29wdGlvbltzZWxlY3RlZF0nKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1SZXNldC5zaWJsaW5ncygnaW5wdXQuc2VsZWN0LWRyb3Bkb3duJykudmFsKHJlc2V0X3RleHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgYWN0aXZlIHdoZW4gZWxlbWVudCBoYXMgZm9jdXNcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2ZvY3VzJywgaW5wdXRfc2VsZWN0b3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsLCBpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGlucHV0RWxlbWVudCA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoJGlucHV0RWxlbWVudC52YWwoKS5sZW5ndGggPT09IDAgJiYgJGlucHV0RWxlbWVudFswXS52YWxpZGl0eS5iYWRJbnB1dCAhPT0gdHJ1ZSAmJiAkaW5wdXRFbGVtZW50LmF0dHIoJ3BsYWNlaG9sZGVyJykgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICRpbnB1dEVsZW1lbnQuc2libGluZ3MoJ2xhYmVsLCBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsaWRhdGVfZmllbGQoJGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhbGlkYXRlX2ZpZWxkID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGhhc0xlbmd0aCA9IG9iamVjdC5hdHRyKCdsZW5ndGgnKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIGxlbkF0dHIgPSBwYXJzZUludChvYmplY3QuYXR0cignbGVuZ3RoJykpO1xuICAgICAgICAgICAgdmFyIGxlbiA9IG9iamVjdC52YWwoKS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChvYmplY3QudmFsKCkubGVuZ3RoID09PSAwICYmIG9iamVjdFswXS52YWxpZGl0eS5iYWRJbnB1dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygndmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBjaGFyYWN0ZXIgY291bnRlciBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgICAgIGlmICgob2JqZWN0LmlzKCc6dmFsaWQnKSAmJiBoYXNMZW5ndGggJiYgKGxlbiA8IGxlbkF0dHIpKSB8fCAob2JqZWN0LmlzKCc6dmFsaWQnKSAmJiAhaGFzTGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8vIFRleHRhcmVhIEF1dG8gUmVzaXplXG4gICAgICAgIHZhciBoaWRkZW5EaXYgPSAkKCcuaGlkZGVuZGl2JykuZmlyc3QoKTtcbiAgICAgICAgaWYgKCFoaWRkZW5EaXYubGVuZ3RoKSB7XG4gICAgICAgICAgICBoaWRkZW5EaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaGlkZGVuZGl2IGNvbW1vblwiPjwvZGl2PicpO1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChoaWRkZW5EaXYpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0ZXh0X2FyZWFfc2VsZWN0b3IgPSAnLm1hdGVyaWFsaXplLXRleHRhcmVhJztcblxuICAgICAgICBmdW5jdGlvbiB0ZXh0YXJlYUF1dG9SZXNpemUoJHRleHRhcmVhKSB7XG4gICAgICAgICAgICAvLyBTZXQgZm9udCBwcm9wZXJ0aWVzIG9mIGhpZGRlbkRpdlxuXG4gICAgICAgICAgICB2YXIgZm9udEZhbWlseSA9ICR0ZXh0YXJlYS5jc3MoJ2ZvbnQtZmFtaWx5Jyk7XG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSAkdGV4dGFyZWEuY3NzKCdmb250LXNpemUnKTtcblxuICAgICAgICAgICAgaWYgKGZvbnRTaXplKSB7XG4gICAgICAgICAgICAgICAgaGlkZGVuRGl2LmNzcygnZm9udC1zaXplJywgZm9udFNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgICAgICBoaWRkZW5EaXYuY3NzKCdmb250LWZhbWlseScsIGZvbnRGYW1pbHkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJHRleHRhcmVhLmF0dHIoJ3dyYXAnKSA9PT0gXCJvZmZcIikge1xuICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5jc3MoJ292ZXJmbG93LXdyYXAnLCBcIm5vcm1hbFwiKVxuICAgICAgICAgICAgICAgICAgICAuY3NzKCd3aGl0ZS1zcGFjZScsIFwicHJlXCIpO1xuICAgICAgICAgICAgfVxuXG5cblxuXG4gICAgICAgICAgICBoaWRkZW5EaXYudGV4dCgkdGV4dGFyZWEudmFsKCkgKyAnXFxuJyk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGhpZGRlbkRpdi5odG1sKCkucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gICAgICAgICAgICBoaWRkZW5EaXYuaHRtbChjb250ZW50KTtcblxuXG4gICAgICAgICAgICAvLyBXaGVuIHRleHRhcmVhIGlzIGhpZGRlbiwgd2lkdGggZ29lcyBjcmF6eS5cbiAgICAgICAgICAgIC8vIEFwcHJveGltYXRlIHdpdGggaGFsZiBvZiB3aW5kb3cgc2l6ZVxuXG4gICAgICAgICAgICBpZiAoJHRleHRhcmVhLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgaGlkZGVuRGl2LmNzcygnd2lkdGgnLCAkdGV4dGFyZWEud2lkdGgoKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgJCh3aW5kb3cpLndpZHRoKCkgLyAyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywgaGlkZGVuRGl2LmhlaWdodCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGV4dF9hcmVhX3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGV4dGFyZWEgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCR0ZXh0YXJlYS52YWwoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYUF1dG9SZXNpemUoJHRleHRhcmVhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnYm9keScpLm9uKCdrZXl1cCBrZXlkb3duJywgdGV4dF9hcmVhX3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gRmlsZSBJbnB1dCBQYXRoXG4gICAgICAgICQoJy5maWxlLWZpZWxkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGF0aF9pbnB1dCA9ICQodGhpcykuZmluZCgnaW5wdXQuZmlsZS1wYXRoJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJmaWxlXCJdJykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwYXRoX2lucHV0LnZhbCgkKHRoaXMpWzBdLmZpbGVzWzBdLm5hbWUpO1xuICAgICAgICAgICAgICAgIHBhdGhfaW5wdXQudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cblxuXG4gICAgICAgIC8qKioqKioqKioqKioqKioqXG4gICAgICAgICAqICBSYW5nZSBJbnB1dCAgKlxuICAgICAgICAgKioqKioqKioqKioqKioqKi9cblxuICAgICAgICB2YXIgcmFuZ2VfdHlwZSA9ICdpbnB1dFt0eXBlPXJhbmdlXSc7XG4gICAgICAgIHZhciByYW5nZV9tb3VzZWRvd24gPSBmYWxzZTtcbiAgICAgICAgdmFyIGxlZnQ7XG5cbiAgICAgICAgJChyYW5nZV90eXBlKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aHVtYiA9ICQoJzxzcGFuIGNsYXNzPVwidGh1bWJcIj48c3BhbiBjbGFzcz1cInZhbHVlXCI+PC9zcGFuPjwvc3Bhbj4nKTtcbiAgICAgICAgICAgICQodGhpcykuYWZ0ZXIodGh1bWIpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgcmFuZ2Vfd3JhcHBlciA9ICcucmFuZ2UtZmllbGQnO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgcmFuZ2VfdHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0aHVtYiA9ICQodGhpcykuc2libGluZ3MoJy50aHVtYicpO1xuICAgICAgICAgICAgdGh1bWIuZmluZCgnLnZhbHVlJykuaHRtbCgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2lucHV0IG1vdXNlZG93biB0b3VjaHN0YXJ0JywgcmFuZ2VfdHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0aHVtYiA9ICQodGhpcykuc2libGluZ3MoJy50aHVtYicpO1xuXG4gICAgICAgICAgICAvLyBJZiB0aHVtYiBpbmRpY2F0b3IgZG9lcyBub3QgZXhpc3QgeWV0LCBjcmVhdGUgaXRcbiAgICAgICAgICAgIGlmICh0aHVtYi5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgICAgIHRodW1iID0gJCgnPHNwYW4gY2xhc3M9XCJ0aHVtYlwiPjxzcGFuIGNsYXNzPVwidmFsdWVcIj48L3NwYW4+PC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKHRodW1iKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IGluZGljYXRvciB2YWx1ZVxuICAgICAgICAgICAgdGh1bWIuZmluZCgnLnZhbHVlJykuaHRtbCgkKHRoaXMpLnZhbCgpKTtcblxuICAgICAgICAgICAgcmFuZ2VfbW91c2Vkb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICBpZiAoIXRodW1iLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIHRodW1iLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcIjMwcHhcIixcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMzBweFwiLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IFwiLTIwcHhcIixcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogXCItMTVweFwiXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0RXhwbydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGUucGFnZVggPT09IHVuZGVmaW5lZCB8fCBlLnBhZ2VYID09PSBudWxsKSB7IC8vbW9iaWxlXG4gICAgICAgICAgICAgICAgbGVmdCA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYIC0gJCh0aGlzKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICAgICAgfSBlbHNlIHsgLy8gZGVza3RvcFxuICAgICAgICAgICAgICAgIGxlZnQgPSBlLnBhZ2VYIC0gJCh0aGlzKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHdpZHRoID0gJCh0aGlzKS5vdXRlcldpZHRoKCk7XG5cbiAgICAgICAgICAgIGlmIChsZWZ0IDwgMCkge1xuICAgICAgICAgICAgICAgIGxlZnQgPSAwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0ID4gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gd2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHVtYi5hZGRDbGFzcygnYWN0aXZlJykuY3NzKCdsZWZ0JywgbGVmdCk7XG4gICAgICAgICAgICB0aHVtYi5maW5kKCcudmFsdWUnKS5odG1sKCQodGhpcykudmFsKCkpO1xuXG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNldXAgdG91Y2hlbmQnLCByYW5nZV93cmFwcGVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByYW5nZV9tb3VzZWRvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2Vtb3ZlIHRvdWNobW92ZScsIHJhbmdlX3dyYXBwZXIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGh1bWIgPSAkKHRoaXMpLmNoaWxkcmVuKCcudGh1bWInKTtcbiAgICAgICAgICAgIHZhciBsZWZ0O1xuICAgICAgICAgICAgaWYgKHJhbmdlX21vdXNlZG93bikge1xuICAgICAgICAgICAgICAgIGlmICghdGh1bWIuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzMwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICczMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJy0yMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICctMTVweCdcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRFeHBvJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUucGFnZVggPT09IHVuZGVmaW5lZCB8fCBlLnBhZ2VYID09PSBudWxsKSB7IC8vbW9iaWxlXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBkZXNrdG9wXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBlLnBhZ2VYIC0gJCh0aGlzKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSAkKHRoaXMpLm91dGVyV2lkdGgoKTtcblxuICAgICAgICAgICAgICAgIGlmIChsZWZ0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxlZnQgPiB3aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gd2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRodW1iLmFkZENsYXNzKCdhY3RpdmUnKS5jc3MoJ2xlZnQnLCBsZWZ0KTtcbiAgICAgICAgICAgICAgICB0aHVtYi5maW5kKCcudmFsdWUnKS5odG1sKHRodW1iLnNpYmxpbmdzKHJhbmdlX3R5cGUpLnZhbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlb3V0IHRvdWNobGVhdmUnLCByYW5nZV93cmFwcGVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXJhbmdlX21vdXNlZG93bikge1xuXG4gICAgICAgICAgICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5jaGlsZHJlbignLnRodW1iJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGh1bWIuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJzEwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogJy02cHgnXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRodW1iLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9KTsgLy8gRW5kIG9mICQoZG9jdW1lbnQpLnJlYWR5XG5cblxuXG5cbiAgICAvLyBTZWxlY3QgUGx1Z2luXG4gICAgJC5mbi5tYXRlcmlhbF9zZWxlY3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJCh0aGlzKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzZWxlY3QgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICBpZiAoJHNlbGVjdC5oYXNDbGFzcygnYnJvd3Nlci1kZWZhdWx0JykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIENvbnRpbnVlIHRvIG5leHQgKHJldHVybiBmYWxzZSBicmVha3Mgb3V0IG9mIGVudGlyZSBsb29wKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUZWFyIGRvd24gc3RydWN0dXJlIGlmIFNlbGVjdCBuZWVkcyB0byBiZSByZWJ1aWx0XG4gICAgICAgICAgICB2YXIgbGFzdElEID0gJHNlbGVjdC5kYXRhKCdzZWxlY3QtaWQnKTtcbiAgICAgICAgICAgIGlmIChsYXN0SUQpIHtcbiAgICAgICAgICAgICAgICAkc2VsZWN0LnBhcmVudCgpLmZpbmQoJ2knKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkc2VsZWN0LnBhcmVudCgpLmZpbmQoJ2lucHV0JykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAkc2VsZWN0LnVud3JhcCgpO1xuICAgICAgICAgICAgICAgICQoJ3VsI3NlbGVjdC1vcHRpb25zLScgKyBsYXN0SUQpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBkZXN0cm95aW5nIHRoZSBzZWxlY3QsIHJlbW92ZSB0aGUgc2VsZWxjdC1pZCBhbmQgcmVzZXQgaXQgdG8gaXQncyB1bmluaXRpYWxpemVkIHN0YXRlLlxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrID09PSAnZGVzdHJveScpIHtcbiAgICAgICAgICAgICAgICAkc2VsZWN0LmRhdGEoJ3NlbGVjdC1pZCcsIG51bGwpLnJlbW92ZUNsYXNzKCdpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHVuaXF1ZUlEID0gTWF0ZXJpYWxpemUuZ3VpZCgpO1xuICAgICAgICAgICAgJHNlbGVjdC5kYXRhKCdzZWxlY3QtaWQnLCB1bmlxdWVJRCk7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9ICQoJzxkaXYgY2xhc3M9XCJzZWxlY3Qtd3JhcHBlclwiPjwvZGl2PicpO1xuICAgICAgICAgICAgd3JhcHBlci5hZGRDbGFzcygkc2VsZWN0LmF0dHIoJ2NsYXNzJykpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkKCc8dWwgaWQ9XCJzZWxlY3Qtb3B0aW9ucy0nICsgdW5pcXVlSUQgKyAnXCIgY2xhc3M9XCJkcm9wZG93bi1jb250ZW50IHNlbGVjdC1kcm9wZG93blwiPjwvdWw+Jyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0T3B0aW9ucyA9ICRzZWxlY3QuY2hpbGRyZW4oJ29wdGlvbicpO1xuXG4gICAgICAgICAgICB2YXIgbGFiZWw7XG4gICAgICAgICAgICBpZiAoJHNlbGVjdC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSAkc2VsZWN0LmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYWJlbCA9IG9wdGlvbnMuZmlyc3QoKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBDcmVhdGUgRHJvcGRvd24gc3RydWN0dXJlXG4gICAgICAgICAgICBzZWxlY3RPcHRpb25zLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBkaXNhYmxlZCBhdHRyIGlmIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hcHBlbmQoJCgnPGxpIGNsYXNzPVwiJyArICgoJCh0aGlzKS5pcygnOmRpc2FibGVkJykpID8gJ2Rpc2FibGVkJyA6ICcnKSArICdcIj48c3Bhbj4nICsgJCh0aGlzKS5odG1sKCkgKyAnPC9zcGFuPjwvbGk+JykpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgb3B0aW9ucy5maW5kKCdsaScpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGN1cnJfc2VsZWN0ID0gJHNlbGVjdDtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb3B0aW9uIGVsZW1lbnQgaXMgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY3Vycl9zZWxlY3QuZmluZCgnb3B0aW9uJykuZXEoaSkucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgb25jaGFuZ2UoKSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJfc2VsZWN0LnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJfc2VsZWN0LnNpYmxpbmdzKCdpbnB1dC5zZWxlY3QtZHJvcGRvd24nKS52YWwoJCh0aGlzKS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFdyYXAgRWxlbWVudHNcbiAgICAgICAgICAgICRzZWxlY3Qud3JhcCh3cmFwcGVyKTtcbiAgICAgICAgICAgIC8vIEFkZCBTZWxlY3QgRGlzcGxheSBFbGVtZW50XG4gICAgICAgICAgICB2YXIgZHJvcGRvd25JY29uID0gJCgnPHNwYW4gY2xhc3M9XCJjYXJldFwiPiYjOTY2MDs8L3NwYW4+Jyk7XG4gICAgICAgICAgICBpZiAoJHNlbGVjdC5pcygnOmRpc2FibGVkJykpXG4gICAgICAgICAgICAgICAgZHJvcGRvd25JY29uLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgICAgICB2YXIgJG5ld1NlbGVjdCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwic2VsZWN0LWRyb3Bkb3duXCIgcmVhZG9ubHk9XCJ0cnVlXCIgJyArICgoJHNlbGVjdC5pcygnOmRpc2FibGVkJykpID8gJ2Rpc2FibGVkJyA6ICcnKSArICcgZGF0YS1hY3RpdmF0ZXM9XCJzZWxlY3Qtb3B0aW9ucy0nICsgdW5pcXVlSUQgKyAnXCIgdmFsdWU9XCInICsgbGFiZWwuaHRtbCgpICsgJ1wiLz4nKTtcbiAgICAgICAgICAgICRzZWxlY3QuYmVmb3JlKCRuZXdTZWxlY3QpO1xuICAgICAgICAgICAgJG5ld1NlbGVjdC5iZWZvcmUoZHJvcGRvd25JY29uKTtcblxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChvcHRpb25zKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlY3Rpb24gZWxlbWVudCBpcyBkaXNhYmxlZFxuICAgICAgICAgICAgaWYgKCEkc2VsZWN0LmlzKCc6ZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICRuZXdTZWxlY3QuZHJvcGRvd24oe1xuICAgICAgICAgICAgICAgICAgICBcImhvdmVyXCI6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvcHkgdGFiaW5kZXhcbiAgICAgICAgICAgIGlmICgkc2VsZWN0LmF0dHIoJ3RhYmluZGV4JykpIHtcbiAgICAgICAgICAgICAgICAkKCRuZXdTZWxlY3RbMF0pLmF0dHIoJ3RhYmluZGV4JywgJHNlbGVjdC5hdHRyKCd0YWJpbmRleCcpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNlbGVjdC5hZGRDbGFzcygnaW5pdGlhbGl6ZWQnKTtcblxuICAgICAgICAgICAgJG5ld1NlbGVjdC5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uID0gb3B0aW9ucy5maW5kKCdsaScpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpID09PSBsYWJlbC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsIHNlbGVjdGVkT3B0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkbmV3U2VsZWN0Lm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykudHJpZ2dlcignY2xvc2UnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBNYWtlIG9wdGlvbiBhcyBzZWxlY3RlZCBhbmQgc2Nyb2xsIHRvIHNlbGVjdGVkIHBvc2l0aW9uXG4gICAgICAgICAgICBhY3RpdmF0ZU9wdGlvbiA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBuZXdPcHRpb24pIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmZpbmQoJ2xpLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkKG5ld09wdGlvbikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uc2Nyb2xsVG8obmV3T3B0aW9uKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEFsbG93IHVzZXIgdG8gc2VhcmNoIGJ5IHR5cGluZ1xuICAgICAgICAgICAgLy8gdGhpcyBhcnJheSBpcyBjbGVhcmVkIGFmdGVyIDEgc2Vjb25kXG4gICAgICAgICAgICBmaWx0ZXJRdWVyeSA9IFtdO1xuXG4gICAgICAgICAgICBvbktleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBUQUIgLSBzd2l0Y2ggdG8gYW5vdGhlciBpbnB1dFxuICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignY2xvc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFSUk9XIERPV04gV0hFTiBTRUxFQ1QgSVMgQ0xPU0VEIC0gb3BlbiBzZWxlY3Qgb3B0aW9uc1xuICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PSA0MCAmJiAhb3B0aW9ucy5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignb3BlbicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRU5URVIgV0hFTiBTRUxFQ1QgSVMgQ0xPU0VEIC0gc3VibWl0IGZvcm1cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT0gMTMgJiYgIW9wdGlvbnMuaXMoXCI6dmlzaWJsZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIC8vIENBU0UgV0hFTiBVU0VSIFRZUEUgTEVUVEVSU1xuICAgICAgICAgICAgICAgIGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQud2hpY2gpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIG5vbkxldHRlcnMgPSBbOSwgMTMsIDI3LCAzOCwgNDBdO1xuICAgICAgICAgICAgICAgIGlmIChsZXR0ZXIgJiYgKG5vbkxldHRlcnMuaW5kZXhPZihldmVudC53aGljaCkgPT09IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJRdWVyeS5wdXNoKGxldHRlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nID0gZmlsdGVyUXVlcnkuam9pbihcIlwiKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXdPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpJykuZmlsdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc3RyaW5nKSA9PT0gMDtcbiAgICAgICAgICAgICAgICAgICAgfSlbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld09wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgbmV3T3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEVOVEVSIC0gc2VsZWN0IG9wdGlvbiBhbmQgY2xvc2Ugd2hlbiBzZWxlY3Qgb3B0aW9ucyBhcmUgb3BlbmVkXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZU9wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGkuYWN0aXZlOm5vdCguZGlzYWJsZWQpJylbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVPcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoYWN0aXZlT3B0aW9uKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJG5ld1NlbGVjdC50cmlnZ2VyKCdjbG9zZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQVJST1cgRE9XTiAtIG1vdmUgdG8gbmV4dCBub3QgZGlzYWJsZWQgb3B0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IDQwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld09wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGkuYWN0aXZlJykubmV4dCgnbGk6bm90KC5kaXNhYmxlZCknKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld09wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgbmV3T3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEVTQyAtIGNsb3NlIG9wdGlvbnNcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT0gMjcpIHtcbiAgICAgICAgICAgICAgICAgICAgJG5ld1NlbGVjdC50cmlnZ2VyKCdjbG9zZScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFSUk9XIFVQIC0gbW92ZSB0byBwcmV2aW91cyBub3QgZGlzYWJsZWQgb3B0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IDM4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld09wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGkuYWN0aXZlJykucHJldignbGk6bm90KC5kaXNhYmxlZCknKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld09wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgbmV3T3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEF1dG9tYXRpY2FseSBjbGVhbiBmaWx0ZXIgcXVlcnkgc28gdXNlciBjYW4gc2VhcmNoIGFnYWluIGJ5IHN0YXJ0aW5nIGxldHRlcnNcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUXVlcnkgPSBbXTtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRuZXdTZWxlY3Qub24oJ2tleWRvd24nLCBvbktleURvd24pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG59KGpRdWVyeSkpOyIsIi8qIEdMT0JBTCAqL1xuXG5NYXRlcmlhbGl6ZSA9IHt9O1xuXG4vLyBVbmlxdWUgSURcbk1hdGVyaWFsaXplLmd1aWQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHM0KCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcbiAgICAgICAgICAgIC50b1N0cmluZygxNilcbiAgICAgICAgICAgIC5zdWJzdHJpbmcoMSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICtcbiAgICAgICAgICAgIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG4gICAgfTtcbn0pKCk7XG5cbk1hdGVyaWFsaXplLmVsZW1lbnRPclBhcmVudElzRml4ZWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gICAgdmFyICRjaGVja0VsZW1lbnRzID0gJGVsZW1lbnQuYWRkKCRlbGVtZW50LnBhcmVudHMoKSk7XG4gICAgdmFyIGlzRml4ZWQgPSBmYWxzZTtcbiAgICAkY2hlY2tFbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykuY3NzKFwicG9zaXRpb25cIikgPT09IFwiZml4ZWRcIikge1xuICAgICAgICAgICAgaXNGaXhlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaXNGaXhlZDtcbn07XG5cbi8vIFZlbG9jaXR5IGhhcyBjb25mbGljdHMgd2hlbiBsb2FkZWQgd2l0aCBqUXVlcnksIHRoaXMgd2lsbCBjaGVjayBmb3IgaXRcbnZhciBWZWw7XG5pZiAoJCkge1xuICAgIFZlbCA9ICQuVmVsb2NpdHk7XG59IGVsc2Uge1xuICAgIFZlbCA9IFZlbG9jaXR5O1xufSIsIiEgZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIGsoYSwgYiwgYykge1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChxKGEsIGMpLCBiKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGwoYSwgYiwgYykge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhKSA/IChtKGEsIGNbYl0sIGMpLCAhMCkgOiAhMVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG0oYSwgYiwgYykge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKGEpXG4gICAgICAgICAgICBpZiAoYS5mb3JFYWNoKSBhLmZvckVhY2goYiwgYyk7XG4gICAgICAgICAgICBlbHNlIGlmIChhLmxlbmd0aCAhPT0gZClcbiAgICAgICAgICAgIGZvciAoZSA9IDA7IGUgPCBhLmxlbmd0aDspIGIuY2FsbChjLCBhW2VdLCBlLCBhKSwgZSsrO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmb3IgKGUgaW4gYSkgYS5oYXNPd25Qcm9wZXJ0eShlKSAmJiBiLmNhbGwoYywgYVtlXSwgZSwgYSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuKGEsIGIsIGMpIHtcbiAgICAgICAgZm9yICh2YXIgZSA9IE9iamVjdC5rZXlzKGIpLCBmID0gMDsgZiA8IGUubGVuZ3RoOykoIWMgfHwgYyAmJiBhW2VbZl1dID09PSBkKSAmJiAoYVtlW2ZdXSA9IGJbZVtmXV0pLCBmKys7XG4gICAgICAgIHJldHVybiBhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbyhhLCBiKSB7XG4gICAgICAgIHJldHVybiBuKGEsIGIsICEwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHAoYSwgYiwgYykge1xuICAgICAgICB2YXIgZSwgZCA9IGIucHJvdG90eXBlO1xuICAgICAgICBlID0gYS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGQpLCBlLmNvbnN0cnVjdG9yID0gYSwgZS5fc3VwZXIgPSBkLCBjICYmIG4oZSwgYylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBxKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmFwcGx5KGIsIGFyZ3VtZW50cylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHIoYSwgYikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGEgPT0gZyA/IGEuYXBwbHkoYiA/IGJbMF0gfHwgZCA6IGQsIGIpIDogYVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHMoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA9PT0gZCA/IGIgOiBhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdChhLCBiLCBjKSB7XG4gICAgICAgIG0oeChiKSwgZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcihiLCBjLCAhMSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1KGEsIGIsIGMpIHtcbiAgICAgICAgbSh4KGIpLCBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsIGMsICExKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHYoYSwgYikge1xuICAgICAgICBmb3IgKDsgYTspIHtcbiAgICAgICAgICAgIGlmIChhID09IGIpIHJldHVybiAhMDtcbiAgICAgICAgICAgIGEgPSBhLnBhcmVudE5vZGVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITFcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEuaW5kZXhPZihiKSA+IC0xXG4gICAgfVxuXG4gICAgZnVuY3Rpb24geChhKSB7XG4gICAgICAgIHJldHVybiBhLnRyaW0oKS5zcGxpdCgvXFxzKy9nKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHkoYSwgYiwgYykge1xuICAgICAgICBpZiAoYS5pbmRleE9mICYmICFjKSByZXR1cm4gYS5pbmRleE9mKGIpO1xuICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IGEubGVuZ3RoOykge1xuICAgICAgICAgICAgaWYgKGMgJiYgYVtkXVtjXSA9PSBiIHx8ICFjICYmIGFbZF0gPT09IGIpIHJldHVybiBkO1xuICAgICAgICAgICAgZCsrXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xXG4gICAgfVxuXG4gICAgZnVuY3Rpb24geihhKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCAwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEEoYSwgYiwgYykge1xuICAgICAgICBmb3IgKHZhciBkID0gW10sIGUgPSBbXSwgZiA9IDA7IGYgPCBhLmxlbmd0aDspIHtcbiAgICAgICAgICAgIHZhciBnID0gYiA/IGFbZl1bYl0gOiBhW2ZdO1xuICAgICAgICAgICAgeShlLCBnKSA8IDAgJiYgZC5wdXNoKGFbZl0pLCBlW2ZdID0gZywgZisrXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGMgJiYgKGQgPSBiID8gZC5zb3J0KGZ1bmN0aW9uIChhLCBjKSB7XG4gICAgICAgICAgICByZXR1cm4gYVtiXSA+IGNbYl1cbiAgICAgICAgfSkgOiBkLnNvcnQoKSksIGRcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBCKGEsIGIpIHtcbiAgICAgICAgZm9yICh2YXIgYywgZiwgZyA9IGJbMF0udG9VcHBlckNhc2UoKSArIGIuc2xpY2UoMSksIGggPSAwOyBoIDwgZS5sZW5ndGg7KSB7XG4gICAgICAgICAgICBpZiAoYyA9IGVbaF0sIGYgPSBjID8gYyArIGcgOiBiLCBmIGluIGEpIHJldHVybiBmO1xuICAgICAgICAgICAgaCsrXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBEKCkge1xuICAgICAgICByZXR1cm4gQysrXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRShhKSB7XG4gICAgICAgIHZhciBiID0gYS5vd25lckRvY3VtZW50O1xuICAgICAgICByZXR1cm4gYi5kZWZhdWx0VmlldyB8fCBiLnBhcmVudFdpbmRvd1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFiKGEsIGIpIHtcbiAgICAgICAgdmFyIGMgPSB0aGlzO1xuICAgICAgICB0aGlzLm1hbmFnZXIgPSBhLCB0aGlzLmNhbGxiYWNrID0gYiwgdGhpcy5lbGVtZW50ID0gYS5lbGVtZW50LCB0aGlzLnRhcmdldCA9IGEub3B0aW9ucy5pbnB1dFRhcmdldCwgdGhpcy5kb21IYW5kbGVyID0gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIHIoYS5vcHRpb25zLmVuYWJsZSwgW2FdKSAmJiBjLmhhbmRsZXIoYilcbiAgICAgICAgfSwgdGhpcy5pbml0KClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiYihhKSB7XG4gICAgICAgIHZhciBiLCBjID0gYS5vcHRpb25zLmlucHV0Q2xhc3M7XG4gICAgICAgIHJldHVybiBiID0gYyA/IGMgOiBIID8gd2IgOiBJID8gRWIgOiBHID8gR2IgOiByYiwgbmV3IGIoYSwgY2IpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2IoYSwgYiwgYykge1xuICAgICAgICB2YXIgZCA9IGMucG9pbnRlcnMubGVuZ3RoLFxuICAgICAgICAgICAgZSA9IGMuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCxcbiAgICAgICAgICAgIGYgPSBiICYgTyAmJiAwID09PSBkIC0gZSxcbiAgICAgICAgICAgIGcgPSBiICYgKFEgfCBSKSAmJiAwID09PSBkIC0gZTtcbiAgICAgICAgYy5pc0ZpcnN0ID0gISFmLCBjLmlzRmluYWwgPSAhIWcsIGYgJiYgKGEuc2Vzc2lvbiA9IHt9KSwgYy5ldmVudFR5cGUgPSBiLCBkYihhLCBjKSwgYS5lbWl0KFwiaGFtbWVyLmlucHV0XCIsIGMpLCBhLnJlY29nbml6ZShjKSwgYS5zZXNzaW9uLnByZXZJbnB1dCA9IGNcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYihhLCBiKSB7XG4gICAgICAgIHZhciBjID0gYS5zZXNzaW9uLFxuICAgICAgICAgICAgZCA9IGIucG9pbnRlcnMsXG4gICAgICAgICAgICBlID0gZC5sZW5ndGg7XG4gICAgICAgIGMuZmlyc3RJbnB1dCB8fCAoYy5maXJzdElucHV0ID0gZ2IoYikpLCBlID4gMSAmJiAhYy5maXJzdE11bHRpcGxlID8gYy5maXJzdE11bHRpcGxlID0gZ2IoYikgOiAxID09PSBlICYmIChjLmZpcnN0TXVsdGlwbGUgPSAhMSk7XG4gICAgICAgIHZhciBmID0gYy5maXJzdElucHV0LFxuICAgICAgICAgICAgZyA9IGMuZmlyc3RNdWx0aXBsZSxcbiAgICAgICAgICAgIGggPSBnID8gZy5jZW50ZXIgOiBmLmNlbnRlcixcbiAgICAgICAgICAgIGkgPSBiLmNlbnRlciA9IGhiKGQpO1xuICAgICAgICBiLnRpbWVTdGFtcCA9IGooKSwgYi5kZWx0YVRpbWUgPSBiLnRpbWVTdGFtcCAtIGYudGltZVN0YW1wLCBiLmFuZ2xlID0gbGIoaCwgaSksIGIuZGlzdGFuY2UgPSBrYihoLCBpKSwgZWIoYywgYiksIGIub2Zmc2V0RGlyZWN0aW9uID0gamIoYi5kZWx0YVgsIGIuZGVsdGFZKSwgYi5zY2FsZSA9IGcgPyBuYihnLnBvaW50ZXJzLCBkKSA6IDEsIGIucm90YXRpb24gPSBnID8gbWIoZy5wb2ludGVycywgZCkgOiAwLCBmYihjLCBiKTtcbiAgICAgICAgdmFyIGsgPSBhLmVsZW1lbnQ7XG4gICAgICAgIHYoYi5zcmNFdmVudC50YXJnZXQsIGspICYmIChrID0gYi5zcmNFdmVudC50YXJnZXQpLCBiLnRhcmdldCA9IGtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlYihhLCBiKSB7XG4gICAgICAgIHZhciBjID0gYi5jZW50ZXIsXG4gICAgICAgICAgICBkID0gYS5vZmZzZXREZWx0YSB8fCB7fSxcbiAgICAgICAgICAgIGUgPSBhLnByZXZEZWx0YSB8fCB7fSxcbiAgICAgICAgICAgIGYgPSBhLnByZXZJbnB1dCB8fCB7fTtcbiAgICAgICAgKGIuZXZlbnRUeXBlID09PSBPIHx8IGYuZXZlbnRUeXBlID09PSBRKSAmJiAoZSA9IGEucHJldkRlbHRhID0ge1xuICAgICAgICAgICAgeDogZi5kZWx0YVggfHwgMCxcbiAgICAgICAgICAgIHk6IGYuZGVsdGFZIHx8IDBcbiAgICAgICAgfSwgZCA9IGEub2Zmc2V0RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBjLngsXG4gICAgICAgICAgICB5OiBjLnlcbiAgICAgICAgfSksIGIuZGVsdGFYID0gZS54ICsgKGMueCAtIGQueCksIGIuZGVsdGFZID0gZS55ICsgKGMueSAtIGQueSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmYihhLCBiKSB7XG4gICAgICAgIHZhciBmLCBnLCBoLCBqLCBjID0gYS5sYXN0SW50ZXJ2YWwgfHwgYixcbiAgICAgICAgICAgIGUgPSBiLnRpbWVTdGFtcCAtIGMudGltZVN0YW1wO1xuICAgICAgICBpZiAoYi5ldmVudFR5cGUgIT0gUiAmJiAoZSA+IE4gfHwgYy52ZWxvY2l0eSA9PT0gZCkpIHtcbiAgICAgICAgICAgIHZhciBrID0gYy5kZWx0YVggLSBiLmRlbHRhWCxcbiAgICAgICAgICAgICAgICBsID0gYy5kZWx0YVkgLSBiLmRlbHRhWSxcbiAgICAgICAgICAgICAgICBtID0gaWIoZSwgaywgbCk7XG4gICAgICAgICAgICBnID0gbS54LCBoID0gbS55LCBmID0gaShtLngpID4gaShtLnkpID8gbS54IDogbS55LCBqID0gamIoaywgbCksIGEubGFzdEludGVydmFsID0gYlxuICAgICAgICB9IGVsc2UgZiA9IGMudmVsb2NpdHksIGcgPSBjLnZlbG9jaXR5WCwgaCA9IGMudmVsb2NpdHlZLCBqID0gYy5kaXJlY3Rpb247XG4gICAgICAgIGIudmVsb2NpdHkgPSBmLCBiLnZlbG9jaXR5WCA9IGcsIGIudmVsb2NpdHlZID0gaCwgYi5kaXJlY3Rpb24gPSBqXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2IoYSkge1xuICAgICAgICBmb3IgKHZhciBiID0gW10sIGMgPSAwOyBjIDwgYS5wb2ludGVycy5sZW5ndGg7KSBiW2NdID0ge1xuICAgICAgICAgICAgY2xpZW50WDogaChhLnBvaW50ZXJzW2NdLmNsaWVudFgpLFxuICAgICAgICAgICAgY2xpZW50WTogaChhLnBvaW50ZXJzW2NdLmNsaWVudFkpXG4gICAgICAgIH0sIGMrKztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpbWVTdGFtcDogaigpLFxuICAgICAgICAgICAgcG9pbnRlcnM6IGIsXG4gICAgICAgICAgICBjZW50ZXI6IGhiKGIpLFxuICAgICAgICAgICAgZGVsdGFYOiBhLmRlbHRhWCxcbiAgICAgICAgICAgIGRlbHRhWTogYS5kZWx0YVlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhiKGEpIHtcbiAgICAgICAgdmFyIGIgPSBhLmxlbmd0aDtcbiAgICAgICAgaWYgKDEgPT09IGIpIHJldHVybiB7XG4gICAgICAgICAgICB4OiBoKGFbMF0uY2xpZW50WCksXG4gICAgICAgICAgICB5OiBoKGFbMF0uY2xpZW50WSlcbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgYyA9IDAsIGQgPSAwLCBlID0gMDsgYiA+IGU7KSBjICs9IGFbZV0uY2xpZW50WCwgZCArPSBhW2VdLmNsaWVudFksIGUrKztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGgoYyAvIGIpLFxuICAgICAgICAgICAgeTogaChkIC8gYilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGliKGEsIGIsIGMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGIgLyBhIHx8IDAsXG4gICAgICAgICAgICB5OiBjIC8gYSB8fCAwXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBqYihhLCBiKSB7XG4gICAgICAgIHJldHVybiBhID09PSBiID8gUyA6IGkoYSkgPj0gaShiKSA/IGEgPiAwID8gVCA6IFUgOiBiID4gMCA/IFYgOiBXXG4gICAgfVxuXG4gICAgZnVuY3Rpb24ga2IoYSwgYiwgYykge1xuICAgICAgICBjIHx8IChjID0gJCk7XG4gICAgICAgIHZhciBkID0gYltjWzBdXSAtIGFbY1swXV0sXG4gICAgICAgICAgICBlID0gYltjWzFdXSAtIGFbY1sxXV07XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoZCAqIGQgKyBlICogZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsYihhLCBiLCBjKSB7XG4gICAgICAgIGMgfHwgKGMgPSAkKTtcbiAgICAgICAgdmFyIGQgPSBiW2NbMF1dIC0gYVtjWzBdXSxcbiAgICAgICAgICAgIGUgPSBiW2NbMV1dIC0gYVtjWzFdXTtcbiAgICAgICAgcmV0dXJuIDE4MCAqIE1hdGguYXRhbjIoZSwgZCkgLyBNYXRoLlBJXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWIoYSwgYikge1xuICAgICAgICByZXR1cm4gbGIoYlsxXSwgYlswXSwgXykgLSBsYihhWzFdLCBhWzBdLCBfKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5iKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGtiKGJbMF0sIGJbMV0sIF8pIC8ga2IoYVswXSwgYVsxXSwgXylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByYigpIHtcbiAgICAgICAgdGhpcy5ldkVsID0gcGIsIHRoaXMuZXZXaW4gPSBxYiwgdGhpcy5hbGxvdyA9ICEwLCB0aGlzLnByZXNzZWQgPSAhMSwgYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdiKCkge1xuICAgICAgICB0aGlzLmV2RWwgPSB1YiwgdGhpcy5ldldpbiA9IHZiLCBhYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLnN0b3JlID0gdGhpcy5tYW5hZ2VyLnNlc3Npb24ucG9pbnRlckV2ZW50cyA9IFtdXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQWIoKSB7XG4gICAgICAgIHRoaXMuZXZUYXJnZXQgPSB5YiwgdGhpcy5ldldpbiA9IHpiLCB0aGlzLnN0YXJ0ZWQgPSAhMSwgYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEJiKGEsIGIpIHtcbiAgICAgICAgdmFyIGMgPSB6KGEudG91Y2hlcyksXG4gICAgICAgICAgICBkID0geihhLmNoYW5nZWRUb3VjaGVzKTtcbiAgICAgICAgcmV0dXJuIGIgJiAoUSB8IFIpICYmIChjID0gQShjLmNvbmNhdChkKSwgXCJpZGVudGlmaWVyXCIsICEwKSksIFtjLCBkXVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIEViKCkge1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ID0gRGIsIHRoaXMudGFyZ2V0SWRzID0ge30sIGFiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBGYihhLCBiKSB7XG4gICAgICAgIHZhciBjID0geihhLnRvdWNoZXMpLFxuICAgICAgICAgICAgZCA9IHRoaXMudGFyZ2V0SWRzO1xuICAgICAgICBpZiAoYiAmIChPIHwgUCkgJiYgMSA9PT0gYy5sZW5ndGgpIHJldHVybiBkW2NbMF0uaWRlbnRpZmllcl0gPSAhMCwgW2MsIGNdO1xuICAgICAgICB2YXIgZSwgZiwgZyA9IHooYS5jaGFuZ2VkVG91Y2hlcyksXG4gICAgICAgICAgICBoID0gW10sXG4gICAgICAgICAgICBpID0gdGhpcy50YXJnZXQ7XG4gICAgICAgIGlmIChmID0gYy5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdihhLnRhcmdldCwgaSlcbiAgICAgICAgICAgIH0pLCBiID09PSBPKVxuICAgICAgICAgICAgZm9yIChlID0gMDsgZSA8IGYubGVuZ3RoOykgZFtmW2VdLmlkZW50aWZpZXJdID0gITAsIGUrKztcbiAgICAgICAgZm9yIChlID0gMDsgZSA8IGcubGVuZ3RoOykgZFtnW2VdLmlkZW50aWZpZXJdICYmIGgucHVzaChnW2VdKSwgYiAmIChRIHwgUikgJiYgZGVsZXRlIGRbZ1tlXS5pZGVudGlmaWVyXSwgZSsrO1xuICAgICAgICByZXR1cm4gaC5sZW5ndGggPyBbQShmLmNvbmNhdChoKSwgXCJpZGVudGlmaWVyXCIsICEwKSwgaF0gOiB2b2lkIDBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBHYigpIHtcbiAgICAgICAgYWIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIGEgPSBxKHRoaXMuaGFuZGxlciwgdGhpcyk7XG4gICAgICAgIHRoaXMudG91Y2ggPSBuZXcgRWIodGhpcy5tYW5hZ2VyLCBhKSwgdGhpcy5tb3VzZSA9IG5ldyByYih0aGlzLm1hbmFnZXIsIGEpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gUGIoYSwgYikge1xuICAgICAgICB0aGlzLm1hbmFnZXIgPSBhLCB0aGlzLnNldChiKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIFFiKGEpIHtcbiAgICAgICAgaWYgKHcoYSwgTWIpKSByZXR1cm4gTWI7XG4gICAgICAgIHZhciBiID0gdyhhLCBOYiksXG4gICAgICAgICAgICBjID0gdyhhLCBPYik7XG4gICAgICAgIHJldHVybiBiICYmIGMgPyBOYiArIFwiIFwiICsgT2IgOiBiIHx8IGMgPyBiID8gTmIgOiBPYiA6IHcoYSwgTGIpID8gTGIgOiBLYlxuICAgIH1cblxuICAgIGZ1bmN0aW9uIFliKGEpIHtcbiAgICAgICAgdGhpcy5pZCA9IEQoKSwgdGhpcy5tYW5hZ2VyID0gbnVsbCwgdGhpcy5vcHRpb25zID0gbyhhIHx8IHt9LCB0aGlzLmRlZmF1bHRzKSwgdGhpcy5vcHRpb25zLmVuYWJsZSA9IHModGhpcy5vcHRpb25zLmVuYWJsZSwgITApLCB0aGlzLnN0YXRlID0gUmIsIHRoaXMuc2ltdWx0YW5lb3VzID0ge30sIHRoaXMucmVxdWlyZUZhaWwgPSBbXVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIFpiKGEpIHtcbiAgICAgICAgcmV0dXJuIGEgJiBXYiA/IFwiY2FuY2VsXCIgOiBhICYgVWIgPyBcImVuZFwiIDogYSAmIFRiID8gXCJtb3ZlXCIgOiBhICYgU2IgPyBcInN0YXJ0XCIgOiBcIlwiXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gJGIoYSkge1xuICAgICAgICByZXR1cm4gYSA9PSBXID8gXCJkb3duXCIgOiBhID09IFYgPyBcInVwXCIgOiBhID09IFQgPyBcImxlZnRcIiA6IGEgPT0gVSA/IFwicmlnaHRcIiA6IFwiXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYihhLCBiKSB7XG4gICAgICAgIHZhciBjID0gYi5tYW5hZ2VyO1xuICAgICAgICByZXR1cm4gYyA/IGMuZ2V0KGEpIDogYVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFjKCkge1xuICAgICAgICBZYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYmMoKSB7XG4gICAgICAgIGFjLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMucFggPSBudWxsLCB0aGlzLnBZID0gbnVsbFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNjKCkge1xuICAgICAgICBhYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGMoKSB7XG4gICAgICAgIFliLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuX3RpbWVyID0gbnVsbCwgdGhpcy5faW5wdXQgPSBudWxsXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWMoKSB7XG4gICAgICAgIGFjLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmYygpIHtcbiAgICAgICAgYWMuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdjKCkge1xuICAgICAgICBZYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aGlzLnBUaW1lID0gITEsIHRoaXMucENlbnRlciA9ICExLCB0aGlzLl90aW1lciA9IG51bGwsIHRoaXMuX2lucHV0ID0gbnVsbCwgdGhpcy5jb3VudCA9IDBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYyhhLCBiKSB7XG4gICAgICAgIHJldHVybiBiID0gYiB8fCB7fSwgYi5yZWNvZ25pemVycyA9IHMoYi5yZWNvZ25pemVycywgaGMuZGVmYXVsdHMucHJlc2V0KSwgbmV3IGtjKGEsIGIpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24ga2MoYSwgYikge1xuICAgICAgICBiID0gYiB8fCB7fSwgdGhpcy5vcHRpb25zID0gbyhiLCBoYy5kZWZhdWx0cyksIHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCA9IHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCB8fCBhLCB0aGlzLmhhbmRsZXJzID0ge30sIHRoaXMuc2Vzc2lvbiA9IHt9LCB0aGlzLnJlY29nbml6ZXJzID0gW10sIHRoaXMuZWxlbWVudCA9IGEsIHRoaXMuaW5wdXQgPSBiYih0aGlzKSwgdGhpcy50b3VjaEFjdGlvbiA9IG5ldyBQYih0aGlzLCB0aGlzLm9wdGlvbnMudG91Y2hBY3Rpb24pLCBsYyh0aGlzLCAhMCksIG0oYi5yZWNvZ25pemVycywgZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5hZGQobmV3IGFbMF0oYVsxXSkpO1xuICAgICAgICAgICAgYVsyXSAmJiBiLnJlY29nbml6ZVdpdGgoYVsyXSksIGFbM10gJiYgYi5yZXF1aXJlRmFpbHVyZShhWzNdKVxuICAgICAgICB9LCB0aGlzKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxjKGEsIGIpIHtcbiAgICAgICAgdmFyIGMgPSBhLmVsZW1lbnQ7XG4gICAgICAgIG0oYS5vcHRpb25zLmNzc1Byb3BzLCBmdW5jdGlvbiAoYSwgZCkge1xuICAgICAgICAgICAgYy5zdHlsZVtCKGMuc3R5bGUsIGQpXSA9IGIgPyBhIDogXCJcIlxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1jKGEsIGMpIHtcbiAgICAgICAgdmFyIGQgPSBiLmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgICAgIGQuaW5pdEV2ZW50KGEsICEwLCAhMCksIGQuZ2VzdHVyZSA9IGMsIGMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZClcbiAgICB9XG4gICAgdmFyIGUgPSBbXCJcIiwgXCJ3ZWJraXRcIiwgXCJtb3pcIiwgXCJNU1wiLCBcIm1zXCIsIFwib1wiXSxcbiAgICAgICAgZiA9IGIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgZyA9IFwiZnVuY3Rpb25cIixcbiAgICAgICAgaCA9IE1hdGgucm91bmQsXG4gICAgICAgIGkgPSBNYXRoLmFicyxcbiAgICAgICAgaiA9IERhdGUubm93LFxuICAgICAgICBDID0gMSxcbiAgICAgICAgRiA9IC9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaSxcbiAgICAgICAgRyA9IFwib250b3VjaHN0YXJ0XCIgaW4gYSxcbiAgICAgICAgSCA9IEIoYSwgXCJQb2ludGVyRXZlbnRcIikgIT09IGQsXG4gICAgICAgIEkgPSBHICYmIEYudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcbiAgICAgICAgSiA9IFwidG91Y2hcIixcbiAgICAgICAgSyA9IFwicGVuXCIsXG4gICAgICAgIEwgPSBcIm1vdXNlXCIsXG4gICAgICAgIE0gPSBcImtpbmVjdFwiLFxuICAgICAgICBOID0gMjUsXG4gICAgICAgIE8gPSAxLFxuICAgICAgICBQID0gMixcbiAgICAgICAgUSA9IDQsXG4gICAgICAgIFIgPSA4LFxuICAgICAgICBTID0gMSxcbiAgICAgICAgVCA9IDIsXG4gICAgICAgIFUgPSA0LFxuICAgICAgICBWID0gOCxcbiAgICAgICAgVyA9IDE2LFxuICAgICAgICBYID0gVCB8IFUsXG4gICAgICAgIFkgPSBWIHwgVyxcbiAgICAgICAgWiA9IFggfCBZLFxuICAgICAgICAkID0gW1wieFwiLCBcInlcIl0sXG4gICAgICAgIF8gPSBbXCJjbGllbnRYXCIsIFwiY2xpZW50WVwiXTtcbiAgICBhYi5wcm90b3R5cGUgPSB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV2RWwgJiYgdCh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKSwgdGhpcy5ldlRhcmdldCAmJiB0KHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpLCB0aGlzLmV2V2luICYmIHQoRSh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpXG4gICAgICAgIH0sXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXZFbCAmJiB1KHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpLCB0aGlzLmV2VGFyZ2V0ICYmIHUodGhpcy50YXJnZXQsIHRoaXMuZXZUYXJnZXQsIHRoaXMuZG9tSGFuZGxlciksIHRoaXMuZXZXaW4gJiYgdShFKHRoaXMuZWxlbWVudCksIHRoaXMuZXZXaW4sIHRoaXMuZG9tSGFuZGxlcilcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIG9iID0ge1xuICAgICAgICAgICAgbW91c2Vkb3duOiBPLFxuICAgICAgICAgICAgbW91c2Vtb3ZlOiBQLFxuICAgICAgICAgICAgbW91c2V1cDogUVxuICAgICAgICB9LFxuICAgICAgICBwYiA9IFwibW91c2Vkb3duXCIsXG4gICAgICAgIHFiID0gXCJtb3VzZW1vdmUgbW91c2V1cFwiO1xuICAgIHAocmIsIGFiLCB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IG9iW2EudHlwZV07XG4gICAgICAgICAgICBiICYgTyAmJiAwID09PSBhLmJ1dHRvbiAmJiAodGhpcy5wcmVzc2VkID0gITApLCBiICYgUCAmJiAxICE9PSBhLndoaWNoICYmIChiID0gUSksIHRoaXMucHJlc3NlZCAmJiB0aGlzLmFsbG93ICYmIChiICYgUSAmJiAodGhpcy5wcmVzc2VkID0gITEpLCB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgYiwge1xuICAgICAgICAgICAgICAgIHBvaW50ZXJzOiBbYV0sXG4gICAgICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbYV0sXG4gICAgICAgICAgICAgICAgcG9pbnRlclR5cGU6IEwsXG4gICAgICAgICAgICAgICAgc3JjRXZlbnQ6IGFcbiAgICAgICAgICAgIH0pKVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIHNiID0ge1xuICAgICAgICAgICAgcG9pbnRlcmRvd246IE8sXG4gICAgICAgICAgICBwb2ludGVybW92ZTogUCxcbiAgICAgICAgICAgIHBvaW50ZXJ1cDogUSxcbiAgICAgICAgICAgIHBvaW50ZXJjYW5jZWw6IFIsXG4gICAgICAgICAgICBwb2ludGVyb3V0OiBSXG4gICAgICAgIH0sXG4gICAgICAgIHRiID0ge1xuICAgICAgICAgICAgMjogSixcbiAgICAgICAgICAgIDM6IEssXG4gICAgICAgICAgICA0OiBMLFxuICAgICAgICAgICAgNTogTVxuICAgICAgICB9LFxuICAgICAgICB1YiA9IFwicG9pbnRlcmRvd25cIixcbiAgICAgICAgdmIgPSBcInBvaW50ZXJtb3ZlIHBvaW50ZXJ1cCBwb2ludGVyY2FuY2VsXCI7XG4gICAgYS5NU1BvaW50ZXJFdmVudCAmJiAodWIgPSBcIk1TUG9pbnRlckRvd25cIiwgdmIgPSBcIk1TUG9pbnRlck1vdmUgTVNQb2ludGVyVXAgTVNQb2ludGVyQ2FuY2VsXCIpLCBwKHdiLCBhYiwge1xuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnN0b3JlLFxuICAgICAgICAgICAgICAgIGMgPSAhMSxcbiAgICAgICAgICAgICAgICBkID0gYS50eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZShcIm1zXCIsIFwiXCIpLFxuICAgICAgICAgICAgICAgIGUgPSBzYltkXSxcbiAgICAgICAgICAgICAgICBmID0gdGJbYS5wb2ludGVyVHlwZV0gfHwgYS5wb2ludGVyVHlwZSxcbiAgICAgICAgICAgICAgICBnID0gZiA9PSBKLFxuICAgICAgICAgICAgICAgIGggPSB5KGIsIGEucG9pbnRlcklkLCBcInBvaW50ZXJJZFwiKTtcbiAgICAgICAgICAgIGUgJiBPICYmICgwID09PSBhLmJ1dHRvbiB8fCBnKSA/IDAgPiBoICYmIChiLnB1c2goYSksIGggPSBiLmxlbmd0aCAtIDEpIDogZSAmIChRIHwgUikgJiYgKGMgPSAhMCksIDAgPiBoIHx8IChiW2hdID0gYSwgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGUsIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyczogYixcbiAgICAgICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFthXSxcbiAgICAgICAgICAgICAgICBwb2ludGVyVHlwZTogZixcbiAgICAgICAgICAgICAgICBzcmNFdmVudDogYVxuICAgICAgICAgICAgfSksIGMgJiYgYi5zcGxpY2UoaCwgMSkpXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgeGIgPSB7XG4gICAgICAgICAgICB0b3VjaHN0YXJ0OiBPLFxuICAgICAgICAgICAgdG91Y2htb3ZlOiBQLFxuICAgICAgICAgICAgdG91Y2hlbmQ6IFEsXG4gICAgICAgICAgICB0b3VjaGNhbmNlbDogUlxuICAgICAgICB9LFxuICAgICAgICB5YiA9IFwidG91Y2hzdGFydFwiLFxuICAgICAgICB6YiA9IFwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIjtcbiAgICBwKEFiLCBhYiwge1xuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSB4YlthLnR5cGVdO1xuICAgICAgICAgICAgaWYgKGIgPT09IE8gJiYgKHRoaXMuc3RhcnRlZCA9ICEwKSwgdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBCYi5jYWxsKHRoaXMsIGEsIGIpO1xuICAgICAgICAgICAgICAgIGIgJiAoUSB8IFIpICYmIDAgPT09IGNbMF0ubGVuZ3RoIC0gY1sxXS5sZW5ndGggJiYgKHRoaXMuc3RhcnRlZCA9ICExKSwgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGIsIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlcnM6IGNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogY1sxXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlclR5cGU6IEosXG4gICAgICAgICAgICAgICAgICAgIHNyY0V2ZW50OiBhXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBDYiA9IHtcbiAgICAgICAgICAgIHRvdWNoc3RhcnQ6IE8sXG4gICAgICAgICAgICB0b3VjaG1vdmU6IFAsXG4gICAgICAgICAgICB0b3VjaGVuZDogUSxcbiAgICAgICAgICAgIHRvdWNoY2FuY2VsOiBSXG4gICAgICAgIH0sXG4gICAgICAgIERiID0gXCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiO1xuICAgIHAoRWIsIGFiLCB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IENiW2EudHlwZV0sXG4gICAgICAgICAgICAgICAgYyA9IEZiLmNhbGwodGhpcywgYSwgYik7XG4gICAgICAgICAgICBjICYmIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCBiLCB7XG4gICAgICAgICAgICAgICAgcG9pbnRlcnM6IGNbMF0sXG4gICAgICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBjWzFdLFxuICAgICAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBKLFxuICAgICAgICAgICAgICAgIHNyY0V2ZW50OiBhXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSksIHAoR2IsIGFiLCB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgICAgICAgICB2YXIgZCA9IGMucG9pbnRlclR5cGUgPT0gSixcbiAgICAgICAgICAgICAgICBlID0gYy5wb2ludGVyVHlwZSA9PSBMO1xuICAgICAgICAgICAgaWYgKGQpIHRoaXMubW91c2UuYWxsb3cgPSAhMTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGUgJiYgIXRoaXMubW91c2UuYWxsb3cpIHJldHVybjtcbiAgICAgICAgICAgIGIgJiAoUSB8IFIpICYmICh0aGlzLm1vdXNlLmFsbG93ID0gITApLCB0aGlzLmNhbGxiYWNrKGEsIGIsIGMpXG4gICAgICAgIH0sXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2guZGVzdHJveSgpLCB0aGlzLm1vdXNlLmRlc3Ryb3koKVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIEhiID0gQihmLnN0eWxlLCBcInRvdWNoQWN0aW9uXCIpLFxuICAgICAgICBJYiA9IEhiICE9PSBkLFxuICAgICAgICBKYiA9IFwiY29tcHV0ZVwiLFxuICAgICAgICBLYiA9IFwiYXV0b1wiLFxuICAgICAgICBMYiA9IFwibWFuaXB1bGF0aW9uXCIsXG4gICAgICAgIE1iID0gXCJub25lXCIsXG4gICAgICAgIE5iID0gXCJwYW4teFwiLFxuICAgICAgICBPYiA9IFwicGFuLXlcIjtcbiAgICBQYi5wcm90b3R5cGUgPSB7XG4gICAgICAgIHNldDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGEgPT0gSmIgJiYgKGEgPSB0aGlzLmNvbXB1dGUoKSksIEliICYmICh0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtIYl0gPSBhKSwgdGhpcy5hY3Rpb25zID0gYS50b0xvd2VyQ2FzZSgpLnRyaW0oKVxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKVxuICAgICAgICB9LFxuICAgICAgICBjb21wdXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIG0odGhpcy5tYW5hZ2VyLnJlY29nbml6ZXJzLCBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgICAgIHIoYi5vcHRpb25zLmVuYWJsZSwgW2JdKSAmJiAoYSA9IGEuY29uY2F0KGIuZ2V0VG91Y2hBY3Rpb24oKSkpXG4gICAgICAgICAgICB9KSwgUWIoYS5qb2luKFwiIFwiKSlcbiAgICAgICAgfSxcbiAgICAgICAgcHJldmVudERlZmF1bHRzOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKCFJYikge1xuICAgICAgICAgICAgICAgIHZhciBiID0gYS5zcmNFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgYyA9IGEub2Zmc2V0RGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQpIHJldHVybiBiLnByZXZlbnREZWZhdWx0KCksIHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgZCA9IHRoaXMuYWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgZSA9IHcoZCwgTWIpLFxuICAgICAgICAgICAgICAgICAgICBmID0gdyhkLCBPYiksXG4gICAgICAgICAgICAgICAgICAgIGcgPSB3KGQsIE5iKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZSB8fCBmICYmIGMgJiBYIHx8IGcgJiYgYyAmIFkgPyB0aGlzLnByZXZlbnRTcmMoYikgOiB2b2lkIDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcHJldmVudFNyYzogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCA9ICEwLCBhLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIFJiID0gMSxcbiAgICAgICAgU2IgPSAyLFxuICAgICAgICBUYiA9IDQsXG4gICAgICAgIFViID0gOCxcbiAgICAgICAgVmIgPSBVYixcbiAgICAgICAgV2IgPSAxNixcbiAgICAgICAgWGIgPSAzMjtcbiAgICBZYi5wcm90b3R5cGUgPSB7XG4gICAgICAgIGRlZmF1bHRzOiB7fSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIG4odGhpcy5vcHRpb25zLCBhKSwgdGhpcy5tYW5hZ2VyICYmIHRoaXMubWFuYWdlci50b3VjaEFjdGlvbi51cGRhdGUoKSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICByZWNvZ25pemVXaXRoOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKGwoYSwgXCJyZWNvZ25pemVXaXRoXCIsIHRoaXMpKSByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5zaW11bHRhbmVvdXM7XG4gICAgICAgICAgICByZXR1cm4gYSA9IF9iKGEsIHRoaXMpLCBiW2EuaWRdIHx8IChiW2EuaWRdID0gYSwgYS5yZWNvZ25pemVXaXRoKHRoaXMpKSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBkcm9wUmVjb2duaXplV2l0aDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBsKGEsIFwiZHJvcFJlY29nbml6ZVdpdGhcIiwgdGhpcykgPyB0aGlzIDogKGEgPSBfYihhLCB0aGlzKSwgZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW2EuaWRdLCB0aGlzKVxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlRmFpbHVyZTogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGlmIChsKGEsIFwicmVxdWlyZUZhaWx1cmVcIiwgdGhpcykpIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnJlcXVpcmVGYWlsO1xuICAgICAgICAgICAgcmV0dXJuIGEgPSBfYihhLCB0aGlzKSwgLTEgPT09IHkoYiwgYSkgJiYgKGIucHVzaChhKSwgYS5yZXF1aXJlRmFpbHVyZSh0aGlzKSksIHRoaXNcbiAgICAgICAgfSxcbiAgICAgICAgZHJvcFJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKGwoYSwgXCJkcm9wUmVxdWlyZUZhaWx1cmVcIiwgdGhpcykpIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgYSA9IF9iKGEsIHRoaXMpO1xuICAgICAgICAgICAgdmFyIGIgPSB5KHRoaXMucmVxdWlyZUZhaWwsIGEpO1xuICAgICAgICAgICAgcmV0dXJuIGIgPiAtMSAmJiB0aGlzLnJlcXVpcmVGYWlsLnNwbGljZShiLCAxKSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBoYXNSZXF1aXJlRmFpbHVyZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCA+IDBcbiAgICAgICAgfSxcbiAgICAgICAgY2FuUmVjb2duaXplV2l0aDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuc2ltdWx0YW5lb3VzW2EuaWRdXG4gICAgICAgIH0sXG4gICAgICAgIGVtaXQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBkKGQpIHtcbiAgICAgICAgICAgICAgICBiLm1hbmFnZXIuZW1pdChiLm9wdGlvbnMuZXZlbnQgKyAoZCA/IFpiKGMpIDogXCJcIiksIGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMsXG4gICAgICAgICAgICAgICAgYyA9IHRoaXMuc3RhdGU7XG4gICAgICAgICAgICBVYiA+IGMgJiYgZCghMCksIGQoKSwgYyA+PSBVYiAmJiBkKCEwKVxuICAgICAgICB9LFxuICAgICAgICB0cnlFbWl0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FuRW1pdCgpID8gdGhpcy5lbWl0KGEpIDogKHRoaXMuc3RhdGUgPSBYYiwgdm9pZCAwKVxuICAgICAgICB9LFxuICAgICAgICBjYW5FbWl0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoOykge1xuICAgICAgICAgICAgICAgIGlmICghKHRoaXMucmVxdWlyZUZhaWxbYV0uc3RhdGUgJiAoWGIgfCBSYikpKSByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgYSsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITBcbiAgICAgICAgfSxcbiAgICAgICAgcmVjb2duaXplOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSBuKHt9LCBhKTtcbiAgICAgICAgICAgIHJldHVybiByKHRoaXMub3B0aW9ucy5lbmFibGUsIFt0aGlzLCBiXSkgPyAodGhpcy5zdGF0ZSAmIChWYiB8IFdiIHwgWGIpICYmICh0aGlzLnN0YXRlID0gUmIpLCB0aGlzLnN0YXRlID0gdGhpcy5wcm9jZXNzKGIpLCB0aGlzLnN0YXRlICYgKFNiIHwgVGIgfCBVYiB8IFdiKSAmJiB0aGlzLnRyeUVtaXQoYiksIHZvaWQgMCkgOiAodGhpcy5yZXNldCgpLCB0aGlzLnN0YXRlID0gWGIsIHZvaWQgMClcbiAgICAgICAgfSxcbiAgICAgICAgcHJvY2VzczogZnVuY3Rpb24gKCkge30sXG4gICAgICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHt9XG4gICAgfSwgcChhYywgWWIsIHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiAxXG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJUZXN0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLm9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gYiB8fCBhLnBvaW50ZXJzLmxlbmd0aCA9PT0gYlxuICAgICAgICB9LFxuICAgICAgICBwcm9jZXNzOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgICAgIGMgPSBhLmV2ZW50VHlwZSxcbiAgICAgICAgICAgICAgICBkID0gYiAmIChTYiB8IFRiKSxcbiAgICAgICAgICAgICAgICBlID0gdGhpcy5hdHRyVGVzdChhKTtcbiAgICAgICAgICAgIHJldHVybiBkICYmIChjICYgUiB8fCAhZSkgPyBiIHwgV2IgOiBkIHx8IGUgPyBjICYgUSA/IGIgfCBVYiA6IGIgJiBTYiA/IGIgfCBUYiA6IFNiIDogWGJcbiAgICAgICAgfVxuICAgIH0pLCBwKGJjLCBhYywge1xuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgZXZlbnQ6IFwicGFuXCIsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuICAgICAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgICAgICBkaXJlY3Rpb246IFpcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICBiID0gW107XG4gICAgICAgICAgICByZXR1cm4gYSAmIFggJiYgYi5wdXNoKE9iKSwgYSAmIFkgJiYgYi5wdXNoKE5iKSwgYlxuICAgICAgICB9LFxuICAgICAgICBkaXJlY3Rpb25UZXN0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYyA9ICEwLFxuICAgICAgICAgICAgICAgIGQgPSBhLmRpc3RhbmNlLFxuICAgICAgICAgICAgICAgIGUgPSBhLmRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICBmID0gYS5kZWx0YVgsXG4gICAgICAgICAgICAgICAgZyA9IGEuZGVsdGFZO1xuICAgICAgICAgICAgcmV0dXJuIGUgJiBiLmRpcmVjdGlvbiB8fCAoYi5kaXJlY3Rpb24gJiBYID8gKGUgPSAwID09PSBmID8gUyA6IDAgPiBmID8gVCA6IFUsIGMgPSBmICE9IHRoaXMucFgsIGQgPSBNYXRoLmFicyhhLmRlbHRhWCkpIDogKGUgPSAwID09PSBnID8gUyA6IDAgPiBnID8gViA6IFcsIGMgPSBnICE9IHRoaXMucFksIGQgPSBNYXRoLmFicyhhLmRlbHRhWSkpKSwgYS5kaXJlY3Rpb24gPSBlLCBjICYmIGQgPiBiLnRocmVzaG9sZCAmJiBlICYgYi5kaXJlY3Rpb25cbiAgICAgICAgfSxcbiAgICAgICAgYXR0clRlc3Q6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gYWMucHJvdG90eXBlLmF0dHJUZXN0LmNhbGwodGhpcywgYSkgJiYgKHRoaXMuc3RhdGUgJiBTYiB8fCAhKHRoaXMuc3RhdGUgJiBTYikgJiYgdGhpcy5kaXJlY3Rpb25UZXN0KGEpKVxuICAgICAgICB9LFxuICAgICAgICBlbWl0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdGhpcy5wWCA9IGEuZGVsdGFYLCB0aGlzLnBZID0gYS5kZWx0YVk7XG4gICAgICAgICAgICB2YXIgYiA9ICRiKGEuZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGIgJiYgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50ICsgYiwgYSksIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBhKVxuICAgICAgICB9XG4gICAgfSksIHAoY2MsIGFjLCB7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBldmVudDogXCJwaW5jaFwiLFxuICAgICAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICAgICAgcG9pbnRlcnM6IDJcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbTWJdXG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJUZXN0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgYSkgJiYgKE1hdGguYWJzKGEuc2NhbGUgLSAxKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNiKVxuICAgICAgICB9LFxuICAgICAgICBlbWl0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBhKSwgMSAhPT0gYS5zY2FsZSkge1xuICAgICAgICAgICAgICAgIHZhciBiID0gYS5zY2FsZSA8IDEgPyBcImluXCIgOiBcIm91dFwiO1xuICAgICAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIGIsIGEpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KSwgcChkYywgWWIsIHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGV2ZW50OiBcInByZXNzXCIsXG4gICAgICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgICAgIHRpbWU6IDUwMCxcbiAgICAgICAgICAgIHRocmVzaG9sZDogNVxuICAgICAgICB9LFxuICAgICAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFtLYl1cbiAgICAgICAgfSxcbiAgICAgICAgcHJvY2VzczogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGMgPSBhLnBvaW50ZXJzLmxlbmd0aCA9PT0gYi5wb2ludGVycyxcbiAgICAgICAgICAgICAgICBkID0gYS5kaXN0YW5jZSA8IGIudGhyZXNob2xkLFxuICAgICAgICAgICAgICAgIGUgPSBhLmRlbHRhVGltZSA+IGIudGltZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pbnB1dCA9IGEsICFkIHx8ICFjIHx8IGEuZXZlbnRUeXBlICYgKFEgfCBSKSAmJiAhZSkgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgZWxzZSBpZiAoYS5ldmVudFR5cGUgJiBPKSB0aGlzLnJlc2V0KCksIHRoaXMuX3RpbWVyID0gayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFZiLCB0aGlzLnRyeUVtaXQoKVxuICAgICAgICAgICAgfSwgYi50aW1lLCB0aGlzKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGEuZXZlbnRUeXBlICYgUSkgcmV0dXJuIFZiO1xuICAgICAgICAgICAgcmV0dXJuIFhiXG4gICAgICAgIH0sXG4gICAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpXG4gICAgICAgIH0sXG4gICAgICAgIGVtaXQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID09PSBWYiAmJiAoYSAmJiBhLmV2ZW50VHlwZSAmIFEgPyB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBcInVwXCIsIGEpIDogKHRoaXMuX2lucHV0LnRpbWVTdGFtcCA9IGooKSwgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCkpKVxuICAgICAgICB9XG4gICAgfSksIHAoZWMsIGFjLCB7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBldmVudDogXCJyb3RhdGVcIixcbiAgICAgICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgICAgIHBvaW50ZXJzOiAyXG4gICAgICAgIH0sXG4gICAgICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gW01iXVxuICAgICAgICB9LFxuICAgICAgICBhdHRyVGVzdDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGEpICYmIChNYXRoLmFicyhhLnJvdGF0aW9uKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNiKVxuICAgICAgICB9XG4gICAgfSksIHAoZmMsIGFjLCB7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBldmVudDogXCJzd2lwZVwiLFxuICAgICAgICAgICAgdGhyZXNob2xkOiAxMCxcbiAgICAgICAgICAgIHZlbG9jaXR5OiAuNjUsXG4gICAgICAgICAgICBkaXJlY3Rpb246IFggfCBZLFxuICAgICAgICAgICAgcG9pbnRlcnM6IDFcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBiYy5wcm90b3R5cGUuZ2V0VG91Y2hBY3Rpb24uY2FsbCh0aGlzKVxuICAgICAgICB9LFxuICAgICAgICBhdHRyVGVzdDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHZhciBjLCBiID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgICAgIHJldHVybiBiICYgKFggfCBZKSA/IGMgPSBhLnZlbG9jaXR5IDogYiAmIFggPyBjID0gYS52ZWxvY2l0eVggOiBiICYgWSAmJiAoYyA9IGEudmVsb2NpdHlZKSwgdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBhKSAmJiBiICYgYS5kaXJlY3Rpb24gJiYgYS5kaXN0YW5jZSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgJiYgaShjKSA+IHRoaXMub3B0aW9ucy52ZWxvY2l0eSAmJiBhLmV2ZW50VHlwZSAmIFFcbiAgICAgICAgfSxcbiAgICAgICAgZW1pdDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHZhciBiID0gJGIoYS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgYiAmJiB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBiLCBhKSwgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCBhKVxuICAgICAgICB9XG4gICAgfSksIHAoZ2MsIFliLCB7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBldmVudDogXCJ0YXBcIixcbiAgICAgICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICAgICAgdGFwczogMSxcbiAgICAgICAgICAgIGludGVydmFsOiAzMDAsXG4gICAgICAgICAgICB0aW1lOiAyNTAsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDIsXG4gICAgICAgICAgICBwb3NUaHJlc2hvbGQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gW0xiXVxuICAgICAgICB9LFxuICAgICAgICBwcm9jZXNzOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYyA9IGEucG9pbnRlcnMubGVuZ3RoID09PSBiLnBvaW50ZXJzLFxuICAgICAgICAgICAgICAgIGQgPSBhLmRpc3RhbmNlIDwgYi50aHJlc2hvbGQsXG4gICAgICAgICAgICAgICAgZSA9IGEuZGVsdGFUaW1lIDwgYi50aW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzZXQoKSwgYS5ldmVudFR5cGUgJiBPICYmIDAgPT09IHRoaXMuY291bnQpIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG4gICAgICAgICAgICBpZiAoZCAmJiBlICYmIGMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYS5ldmVudFR5cGUgIT0gUSkgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHRoaXMucFRpbWUgPyBhLnRpbWVTdGFtcCAtIHRoaXMucFRpbWUgPCBiLmludGVydmFsIDogITAsXG4gICAgICAgICAgICAgICAgICAgIGcgPSAhdGhpcy5wQ2VudGVyIHx8IGtiKHRoaXMucENlbnRlciwgYS5jZW50ZXIpIDwgYi5wb3NUaHJlc2hvbGQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wVGltZSA9IGEudGltZVN0YW1wLCB0aGlzLnBDZW50ZXIgPSBhLmNlbnRlciwgZyAmJiBmID8gdGhpcy5jb3VudCArPSAxIDogdGhpcy5jb3VudCA9IDEsIHRoaXMuX2lucHV0ID0gYTtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHRoaXMuY291bnQgJSBiLnRhcHM7XG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IGgpIHJldHVybiB0aGlzLmhhc1JlcXVpcmVGYWlsdXJlcygpID8gKHRoaXMuX3RpbWVyID0gayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBWYiwgdGhpcy50cnlFbWl0KClcbiAgICAgICAgICAgICAgICB9LCBiLmludGVydmFsLCB0aGlzKSwgU2IpIDogVmJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBYYlxuICAgICAgICB9LFxuICAgICAgICBmYWlsVGltZW91dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVyID0gayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFhiXG4gICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpLCBYYlxuICAgICAgICB9LFxuICAgICAgICByZXNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKVxuICAgICAgICB9LFxuICAgICAgICBlbWl0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID09IFZiICYmICh0aGlzLl9pbnB1dC50YXBDb3VudCA9IHRoaXMuY291bnQsIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpKVxuICAgICAgICB9XG4gICAgfSksIGhjLlZFUlNJT04gPSBcIjIuMC40XCIsIGhjLmRlZmF1bHRzID0ge1xuICAgICAgICBkb21FdmVudHM6ICExLFxuICAgICAgICB0b3VjaEFjdGlvbjogSmIsXG4gICAgICAgIGVuYWJsZTogITAsXG4gICAgICAgIGlucHV0VGFyZ2V0OiBudWxsLFxuICAgICAgICBpbnB1dENsYXNzOiBudWxsLFxuICAgICAgICBwcmVzZXQ6IFtbZWMsIHtcbiAgICAgICAgICAgIGVuYWJsZTogITFcbiAgICAgICAgfV0sIFtjYywge1xuICAgICAgICAgICAgZW5hYmxlOiAhMVxuICAgICAgICB9LCBbXCJyb3RhdGVcIl1dLCBbZmMsIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbjogWFxuICAgICAgICB9XSwgW2JjLCB7XG4gICAgICAgICAgICBkaXJlY3Rpb246IFhcbiAgICAgICAgfSwgW1wic3dpcGVcIl1dLCBbZ2NdLCBbZ2MsIHtcbiAgICAgICAgICAgIGV2ZW50OiBcImRvdWJsZXRhcFwiLFxuICAgICAgICAgICAgdGFwczogMlxuICAgICAgICB9LCBbXCJ0YXBcIl1dLCBbZGNdXSxcbiAgICAgICAgY3NzUHJvcHM6IHtcbiAgICAgICAgICAgIHVzZXJTZWxlY3Q6IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgdG91Y2hTZWxlY3Q6IFwibm9uZVwiLFxuICAgICAgICAgICAgdG91Y2hDYWxsb3V0OiBcIm5vbmVcIixcbiAgICAgICAgICAgIGNvbnRlbnRab29taW5nOiBcIm5vbmVcIixcbiAgICAgICAgICAgIHVzZXJEcmFnOiBcIm5vbmVcIixcbiAgICAgICAgICAgIHRhcEhpZ2hsaWdodENvbG9yOiBcInJnYmEoMCwwLDAsMClcIlxuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgaWMgPSAxLFxuICAgICAgICBqYyA9IDI7XG4gICAga2MucHJvdG90eXBlID0ge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gbih0aGlzLm9wdGlvbnMsIGEpLCBhLnRvdWNoQWN0aW9uICYmIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCksIGEuaW5wdXRUYXJnZXQgJiYgKHRoaXMuaW5wdXQuZGVzdHJveSgpLCB0aGlzLmlucHV0LnRhcmdldCA9IGEuaW5wdXRUYXJnZXQsIHRoaXMuaW5wdXQuaW5pdCgpKSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBzdG9wOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLnN0b3BwZWQgPSBhID8gamMgOiBpY1xuICAgICAgICB9LFxuICAgICAgICByZWNvZ25pemU6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgICAgIGlmICghYi5zdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoYSk7XG4gICAgICAgICAgICAgICAgdmFyIGMsIGQgPSB0aGlzLnJlY29nbml6ZXJzLFxuICAgICAgICAgICAgICAgICAgICBlID0gYi5jdXJSZWNvZ25pemVyO1xuICAgICAgICAgICAgICAgICghZSB8fCBlICYmIGUuc3RhdGUgJiBWYikgJiYgKGUgPSBiLmN1clJlY29nbml6ZXIgPSBudWxsKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGQubGVuZ3RoOykgYyA9IGRbZl0sIGIuc3RvcHBlZCA9PT0gamMgfHwgZSAmJiBjICE9IGUgJiYgIWMuY2FuUmVjb2duaXplV2l0aChlKSA/IGMucmVzZXQoKSA6IGMucmVjb2duaXplKGEpLCAhZSAmJiBjLnN0YXRlICYgKFNiIHwgVGIgfCBVYikgJiYgKGUgPSBiLmN1clJlY29nbml6ZXIgPSBjKSwgZisrXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGlmIChhIGluc3RhbmNlb2YgWWIpIHJldHVybiBhO1xuICAgICAgICAgICAgZm9yICh2YXIgYiA9IHRoaXMucmVjb2duaXplcnMsIGMgPSAwOyBjIDwgYi5sZW5ndGg7IGMrKylcbiAgICAgICAgICAgICAgICBpZiAoYltjXS5vcHRpb25zLmV2ZW50ID09IGEpIHJldHVybiBiW2NdO1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgYWRkOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKGwoYSwgXCJhZGRcIiwgdGhpcykpIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmdldChhLm9wdGlvbnMuZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGIgJiYgdGhpcy5yZW1vdmUoYiksIHRoaXMucmVjb2duaXplcnMucHVzaChhKSwgYS5tYW5hZ2VyID0gdGhpcywgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKSwgYVxuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAobChhLCBcInJlbW92ZVwiLCB0aGlzKSkgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgICAgICByZXR1cm4gYSA9IHRoaXMuZ2V0KGEpLCBiLnNwbGljZSh5KGIsIGEpLCAxKSwgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKSwgdGhpc1xuICAgICAgICB9LFxuICAgICAgICBvbjogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgICAgIHJldHVybiBtKHgoYSksIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgY1thXSA9IGNbYV0gfHwgW10sIGNbYV0ucHVzaChiKVxuICAgICAgICAgICAgfSksIHRoaXNcbiAgICAgICAgfSxcbiAgICAgICAgb2ZmOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICAgICAgcmV0dXJuIG0oeChhKSwgZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICBiID8gY1thXS5zcGxpY2UoeShjW2FdLCBiKSwgMSkgOiBkZWxldGUgY1thXVxuICAgICAgICAgICAgfSksIHRoaXNcbiAgICAgICAgfSxcbiAgICAgICAgZW1pdDogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kb21FdmVudHMgJiYgbWMoYSwgYik7XG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMuaGFuZGxlcnNbYV0gJiYgdGhpcy5oYW5kbGVyc1thXS5zbGljZSgpO1xuICAgICAgICAgICAgaWYgKGMgJiYgYy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBiLnR5cGUgPSBhLCBiLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBiLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgYy5sZW5ndGg7KSBjW2RdKGIpLCBkKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ICYmIGxjKHRoaXMsICExKSwgdGhpcy5oYW5kbGVycyA9IHt9LCB0aGlzLnNlc3Npb24gPSB7fSwgdGhpcy5pbnB1dC5kZXN0cm95KCksIHRoaXMuZWxlbWVudCA9IG51bGxcbiAgICAgICAgfVxuICAgIH0sIG4oaGMsIHtcbiAgICAgICAgSU5QVVRfU1RBUlQ6IE8sXG4gICAgICAgIElOUFVUX01PVkU6IFAsXG4gICAgICAgIElOUFVUX0VORDogUSxcbiAgICAgICAgSU5QVVRfQ0FOQ0VMOiBSLFxuICAgICAgICBTVEFURV9QT1NTSUJMRTogUmIsXG4gICAgICAgIFNUQVRFX0JFR0FOOiBTYixcbiAgICAgICAgU1RBVEVfQ0hBTkdFRDogVGIsXG4gICAgICAgIFNUQVRFX0VOREVEOiBVYixcbiAgICAgICAgU1RBVEVfUkVDT0dOSVpFRDogVmIsXG4gICAgICAgIFNUQVRFX0NBTkNFTExFRDogV2IsXG4gICAgICAgIFNUQVRFX0ZBSUxFRDogWGIsXG4gICAgICAgIERJUkVDVElPTl9OT05FOiBTLFxuICAgICAgICBESVJFQ1RJT05fTEVGVDogVCxcbiAgICAgICAgRElSRUNUSU9OX1JJR0hUOiBVLFxuICAgICAgICBESVJFQ1RJT05fVVA6IFYsXG4gICAgICAgIERJUkVDVElPTl9ET1dOOiBXLFxuICAgICAgICBESVJFQ1RJT05fSE9SSVpPTlRBTDogWCxcbiAgICAgICAgRElSRUNUSU9OX1ZFUlRJQ0FMOiBZLFxuICAgICAgICBESVJFQ1RJT05fQUxMOiBaLFxuICAgICAgICBNYW5hZ2VyOiBrYyxcbiAgICAgICAgSW5wdXQ6IGFiLFxuICAgICAgICBUb3VjaEFjdGlvbjogUGIsXG4gICAgICAgIFRvdWNoSW5wdXQ6IEViLFxuICAgICAgICBNb3VzZUlucHV0OiByYixcbiAgICAgICAgUG9pbnRlckV2ZW50SW5wdXQ6IHdiLFxuICAgICAgICBUb3VjaE1vdXNlSW5wdXQ6IEdiLFxuICAgICAgICBTaW5nbGVUb3VjaElucHV0OiBBYixcbiAgICAgICAgUmVjb2duaXplcjogWWIsXG4gICAgICAgIEF0dHJSZWNvZ25pemVyOiBhYyxcbiAgICAgICAgVGFwOiBnYyxcbiAgICAgICAgUGFuOiBiYyxcbiAgICAgICAgU3dpcGU6IGZjLFxuICAgICAgICBQaW5jaDogY2MsXG4gICAgICAgIFJvdGF0ZTogZWMsXG4gICAgICAgIFByZXNzOiBkYyxcbiAgICAgICAgb246IHQsXG4gICAgICAgIG9mZjogdSxcbiAgICAgICAgZWFjaDogbSxcbiAgICAgICAgbWVyZ2U6IG8sXG4gICAgICAgIGV4dGVuZDogbixcbiAgICAgICAgaW5oZXJpdDogcCxcbiAgICAgICAgYmluZEZuOiBxLFxuICAgICAgICBwcmVmaXhlZDogQlxuICAgIH0pLCB0eXBlb2YgZGVmaW5lID09IGcgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBoY1xuICAgIH0pIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzID8gbW9kdWxlLmV4cG9ydHMgPSBoYyA6IGFbY10gPSBoY1xufSh3aW5kb3csIGRvY3VtZW50LCBcIkhhbW1lclwiKTsiLCIvKiBKUVVFUlkgRUFTSU5HIDEuMyAqL1xuXG4vKlxuICogalF1ZXJ5IEVhc2luZyB2MS4zIC0gaHR0cDovL2dzZ2QuY28udWsvc2FuZGJveC9qcXVlcnkvZWFzaW5nL1xuICpcbiAqIFVzZXMgdGhlIGJ1aWx0IGluIGVhc2luZyBjYXBhYmlsaXRpZXMgYWRkZWQgSW4galF1ZXJ5IDEuMVxuICogdG8gb2ZmZXIgbXVsdGlwbGUgZWFzaW5nIG9wdGlvbnNcbiAqXG4gKiBURVJNUyBPRiBVU0UgLSBqUXVlcnkgRWFzaW5nXG4gKlxuICogT3BlbiBzb3VyY2UgdW5kZXIgdGhlIEJTRCBMaWNlbnNlLlxuICpcbiAqIENvcHlyaWdodCDCqSAyMDA4IEdlb3JnZSBNY0dpbmxleSBTbWl0aFxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuICogYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICpcbiAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mXG4gKiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdFxuICogb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHNcbiAqIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqXG4gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBhdXRob3Igbm9yIHRoZSBuYW1lcyBvZiBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZVxuICogb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkQgQU5ZXG4gKiBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0ZcbiAqIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogIENPUFlSSUdIVCBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCxcbiAqICBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEVcbiAqICBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRURcbiAqIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HXG4gKiAgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRURcbiAqIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKi9cblxuLy8gdDogY3VycmVudCB0aW1lLCBiOiBiZWdJbm5JbmcgdmFsdWUsIGM6IGNoYW5nZSBJbiB2YWx1ZSwgZDogZHVyYXRpb25cbmpRdWVyeS5lYXNpbmdbJ2pzd2luZyddID0galF1ZXJ5LmVhc2luZ1snc3dpbmcnXTtcblxualF1ZXJ5LmV4dGVuZChqUXVlcnkuZWFzaW5nLCB7XG4gICAgZGVmOiAnZWFzZU91dFF1YWQnLFxuICAgIHN3aW5nOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICAvL2FsZXJ0KGpRdWVyeS5lYXNpbmcuZGVmYXVsdCk7XG4gICAgICAgIHJldHVybiBqUXVlcnkuZWFzaW5nW2pRdWVyeS5lYXNpbmcuZGVmXSh4LCB0LCBiLCBjLCBkKTtcbiAgICB9LFxuICAgIGVhc2VJblF1YWQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRRdWFkOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gLWMgKiAodCAvPSBkKSAqICh0IC0gMikgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0UXVhZDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICsgYjtcbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqICgoLS10KSAqICh0IC0gMikgLSAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5DdWJpYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKiB0ICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRDdWJpYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKyAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRDdWJpYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCArIGI7XG4gICAgICAgIHJldHVybiBjIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICsgMikgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluUXVhcnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICogdCAqIHQgKyBiO1xuICAgIH0sXG4gICAgZWFzZU91dFF1YXJ0OiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gLWMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKiB0IC0gMSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0UXVhcnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gYyAvIDIgKiB0ICogdCAqIHQgKiB0ICsgYjtcbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICogdCAtIDIpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJblF1aW50OiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCAqIHQgKiB0ICogdCArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0UXVpbnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiB0ICogdCAqIHQgKyAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRRdWludDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKiB0ICsgYjtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKiB0ICogdCArIDIpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJblNpbmU6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiAtYyAqIE1hdGguY29zKHQgLyBkICogKE1hdGguUEkgLyAyKSkgKyBjICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRTaW5lOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqIE1hdGguc2luKHQgLyBkICogKE1hdGguUEkgLyAyKSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0U2luZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqIChNYXRoLmNvcyhNYXRoLlBJICogdCAvIGQpIC0gMSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluRXhwbzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuICh0ID09IDApID8gYiA6IGMgKiBNYXRoLnBvdygyLCAxMCAqICh0IC8gZCAtIDEpKSArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0RXhwbzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuICh0ID09IGQpID8gYiArIGMgOiBjICogKC1NYXRoLnBvdygyLCAtMTAgKiB0IC8gZCkgKyAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRFeHBvOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICBpZiAodCA9PSAwKSByZXR1cm4gYjtcbiAgICAgICAgaWYgKHQgPT0gZCkgcmV0dXJuIGIgKyBjO1xuICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkgcmV0dXJuIGMgLyAyICogTWF0aC5wb3coMiwgMTAgKiAodCAtIDEpKSArIGI7XG4gICAgICAgIHJldHVybiBjIC8gMiAqICgtTWF0aC5wb3coMiwgLTEwICogLS10KSArIDIpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbkNpcmM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiAtYyAqIChNYXRoLnNxcnQoMSAtICh0IC89IGQpICogdCkgLSAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0Q2lyYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiBNYXRoLnNxcnQoMSAtICh0ID0gdCAvIGQgLSAxKSAqIHQpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbk91dENpcmM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gLWMgLyAyICogKE1hdGguc3FydCgxIC0gdCAqIHQpIC0gMSkgKyBiO1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAoTWF0aC5zcXJ0KDEgLSAodCAtPSAyKSAqIHQpICsgMSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluRWxhc3RpYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgICB2YXIgcCA9IDA7XG4gICAgICAgIHZhciBhID0gYztcbiAgICAgICAgaWYgKHQgPT0gMCkgcmV0dXJuIGI7XG4gICAgICAgIGlmICgodCAvPSBkKSA9PSAxKSByZXR1cm4gYiArIGM7XG4gICAgICAgIGlmICghcCkgcCA9IGQgKiAuMztcbiAgICAgICAgaWYgKGEgPCBNYXRoLmFicyhjKSkge1xuICAgICAgICAgICAgYSA9IGM7XG4gICAgICAgICAgICB2YXIgcyA9IHAgLyA0O1xuICAgICAgICB9IGVsc2UgdmFyIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XG4gICAgICAgIHJldHVybiAtKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0RWxhc3RpYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgICB2YXIgcCA9IDA7XG4gICAgICAgIHZhciBhID0gYztcbiAgICAgICAgaWYgKHQgPT0gMCkgcmV0dXJuIGI7XG4gICAgICAgIGlmICgodCAvPSBkKSA9PSAxKSByZXR1cm4gYiArIGM7XG4gICAgICAgIGlmICghcCkgcCA9IGQgKiAuMztcbiAgICAgICAgaWYgKGEgPCBNYXRoLmFicyhjKSkge1xuICAgICAgICAgICAgYSA9IGM7XG4gICAgICAgICAgICB2YXIgcyA9IHAgLyA0O1xuICAgICAgICB9IGVsc2UgdmFyIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XG4gICAgICAgIHJldHVybiBhICogTWF0aC5wb3coMiwgLTEwICogdCkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSArIGMgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0RWxhc3RpYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgICB2YXIgcCA9IDA7XG4gICAgICAgIHZhciBhID0gYztcbiAgICAgICAgaWYgKHQgPT0gMCkgcmV0dXJuIGI7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPT0gMikgcmV0dXJuIGIgKyBjO1xuICAgICAgICBpZiAoIXApIHAgPSBkICogKC4zICogMS41KTtcbiAgICAgICAgaWYgKGEgPCBNYXRoLmFicyhjKSkge1xuICAgICAgICAgICAgYSA9IGM7XG4gICAgICAgICAgICB2YXIgcyA9IHAgLyA0O1xuICAgICAgICB9IGVsc2UgdmFyIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XG4gICAgICAgIGlmICh0IDwgMSkgcmV0dXJuIC0uNSAqIChhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSkgKyBiO1xuICAgICAgICByZXR1cm4gYSAqIE1hdGgucG93KDIsIC0xMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICogLjUgKyBjICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbkJhY2s6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkLCBzKSB7XG4gICAgICAgIGlmIChzID09IHVuZGVmaW5lZCkgcyA9IDEuNzAxNTg7XG4gICAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICogKChzICsgMSkgKiB0IC0gcykgKyBiO1xuICAgIH0sXG4gICAgZWFzZU91dEJhY2s6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkLCBzKSB7XG4gICAgICAgIGlmIChzID09IHVuZGVmaW5lZCkgcyA9IDEuNzAxNTg7XG4gICAgICAgIHJldHVybiBjICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiAoKHMgKyAxKSAqIHQgKyBzKSArIDEpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbk91dEJhY2s6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkLCBzKSB7XG4gICAgICAgIGlmIChzID09IHVuZGVmaW5lZCkgcyA9IDEuNzAxNTg7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gYyAvIDIgKiAodCAqIHQgKiAoKChzICo9ICgxLjUyNSkpICsgMSkgKiB0IC0gcykpICsgYjtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHQgKyBzKSArIDIpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbkJvdW5jZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgLSBqUXVlcnkuZWFzaW5nLmVhc2VPdXRCb3VuY2UoeCwgZCAtIHQsIDAsIGMsIGQpICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRCb3VuY2U6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICgodCAvPSBkKSA8ICgxIC8gMi43NSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqIHQgKiB0KSArIGI7XG4gICAgICAgIH0gZWxzZSBpZiAodCA8ICgyIC8gMi43NSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqICh0IC09ICgxLjUgLyAyLjc1KSkgKiB0ICsgLjc1KSArIGI7XG4gICAgICAgIH0gZWxzZSBpZiAodCA8ICgyLjUgLyAyLjc1KSkge1xuICAgICAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gKDIuMjUgLyAyLjc1KSkgKiB0ICsgLjkzNzUpICsgYjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqICh0IC09ICgyLjYyNSAvIDIuNzUpKSAqIHQgKyAuOTg0Mzc1KSArIGI7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGVhc2VJbk91dEJvdW5jZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKHQgPCBkIC8gMikgcmV0dXJuIGpRdWVyeS5lYXNpbmcuZWFzZUluQm91bmNlKHgsIHQgKiAyLCAwLCBjLCBkKSAqIC41ICsgYjtcbiAgICAgICAgcmV0dXJuIGpRdWVyeS5lYXNpbmcuZWFzZU91dEJvdW5jZSh4LCB0ICogMiAtIGQsIDAsIGMsIGQpICogLjUgKyBjICogLjUgKyBiO1xuICAgIH1cbn0pO1xuXG4vKlxuICpcbiAqIFRFUk1TIE9GIFVTRSAtIEVBU0lORyBFUVVBVElPTlNcbiAqXG4gKiBPcGVuIHNvdXJjZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UuXG4gKlxuICogQ29weXJpZ2h0IMKpIDIwMDEgUm9iZXJ0IFBlbm5lclxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuICogYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICpcbiAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mXG4gKiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdFxuICogb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHNcbiAqIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqXG4gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBhdXRob3Igbm9yIHRoZSBuYW1lcyBvZiBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZVxuICogb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkQgQU5ZXG4gKiBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0ZcbiAqIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogIENPUFlSSUdIVCBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCxcbiAqICBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEVcbiAqICBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRURcbiAqIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HXG4gKiAgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRURcbiAqIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKi8iLCIoZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5JywgJ2hhbW1lcmpzJ10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIHJlcXVpcmUoJ2hhbW1lcmpzJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5LCBIYW1tZXIpO1xuICAgIH1cbn0oZnVuY3Rpb24oJCwgSGFtbWVyKSB7XG4gICAgZnVuY3Rpb24gaGFtbWVyaWZ5KGVsLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciAkZWwgPSAkKGVsKTtcbiAgICAgICAgaWYoISRlbC5kYXRhKFwiaGFtbWVyXCIpKSB7XG4gICAgICAgICAgICAkZWwuZGF0YShcImhhbW1lclwiLCBuZXcgSGFtbWVyKCRlbFswXSwgb3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJC5mbi5oYW1tZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBoYW1tZXJpZnkodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBleHRlbmQgdGhlIGVtaXQgbWV0aG9kIHRvIGFsc28gdHJpZ2dlciBqUXVlcnkgZXZlbnRzXG4gICAgSGFtbWVyLk1hbmFnZXIucHJvdG90eXBlLmVtaXQgPSAoZnVuY3Rpb24ob3JpZ2luYWxFbWl0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0eXBlLCBkYXRhKSB7XG4gICAgICAgICAgICBvcmlnaW5hbEVtaXQuY2FsbCh0aGlzLCB0eXBlLCBkYXRhKTtcbiAgICAgICAgICAgICQodGhpcy5lbGVtZW50KS50cmlnZ2VyKHtcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgIGdlc3R1cmU6IGRhdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0pKEhhbW1lci5NYW5hZ2VyLnByb3RvdHlwZS5lbWl0KTtcbn0pKTtcbiIsIi8qIExFQU4gTU9EQUwgKi9cblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgdmFyIF9zdGFjayA9IDAsXG4gICAgICAgIF9sYXN0SUQgPSAwLFxuICAgICAgICBfZ2VuZXJhdGVJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sYXN0SUQrKztcbiAgICAgICAgICAgIHJldHVybiAnbWF0ZXJpYWxpemUtbGVhbi1vdmVybGF5LScgKyBfbGFzdElEO1xuICAgICAgICB9O1xuXG4gICAgJC5mbi5leHRlbmQoe1xuICAgICAgICBvcGVuTW9kYWw6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuXG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNSxcbiAgICAgICAgICAgICAgICAgICAgaW5fZHVyYXRpb246IDM1MCxcbiAgICAgICAgICAgICAgICAgICAgb3V0X2R1cmF0aW9uOiAyNTAsXG4gICAgICAgICAgICAgICAgICAgIHJlYWR5OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdGFydGluZ190b3A6ICc0JSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG92ZXJsYXlJRCA9IF9nZW5lcmF0ZUlEKCksXG4gICAgICAgICAgICAgICAgJG1vZGFsID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAkb3ZlcmxheSA9ICQoJzxkaXYgY2xhc3M9XCJsZWFuLW92ZXJsYXlcIj48L2Rpdj4nKSxcbiAgICAgICAgICAgICAgICBsU3RhY2sgPSAoKytfc3RhY2spO1xuXG4gICAgICAgICAgICAvLyBTdG9yZSBhIHJlZmVyZW5jZSBvZiB0aGUgb3ZlcmxheVxuICAgICAgICAgICAgJG92ZXJsYXkuYXR0cignaWQnLCBvdmVybGF5SUQpLmNzcygnei1pbmRleCcsIDEwMDAgKyBsU3RhY2sgKiAyKTtcbiAgICAgICAgICAgICRtb2RhbC5kYXRhKCdvdmVybGF5LWlkJywgb3ZlcmxheUlEKS5jc3MoJ3otaW5kZXgnLCAxMDAwICsgbFN0YWNrICogMiArIDEpO1xuXG4gICAgICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQoJG92ZXJsYXkpO1xuXG4gICAgICAgICAgICAvLyBPdmVycmlkZSBkZWZhdWx0c1xuICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlzbWlzc2libGUpIHtcbiAgICAgICAgICAgICAgICAkb3ZlcmxheS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRtb2RhbC5jbG9zZU1vZGFsKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiBvbiBFU0NcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAubGVhbk1vZGFsJyArIG92ZXJsYXlJRCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsgLy8gRVNDIGtleVxuICAgICAgICAgICAgICAgICAgICAgICAgJG1vZGFsLmNsb3NlTW9kYWwob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJG1vZGFsLmZpbmQoXCIubW9kYWwtY2xvc2VcIikub24oJ2NsaWNrLmNsb3NlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAkbW9kYWwuY2xvc2VNb2RhbChvcHRpb25zKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkb3ZlcmxheS5jc3Moe1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkb3ZlcmxheS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogb3B0aW9ucy5vcGFjaXR5XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuaW5fZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVhc2U6IFwiZWFzZU91dEN1YmljXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJG1vZGFsLmRhdGEoJ2Fzc29jaWF0ZWQtb3ZlcmxheScsICRvdmVybGF5WzBdKTtcblxuICAgICAgICAgICAgLy8gRGVmaW5lIEJvdHRvbSBTaGVldCBhbmltYXRpb25cbiAgICAgICAgICAgIGlmICgkbW9kYWwuaGFzQ2xhc3MoJ2JvdHRvbS1zaGVldCcpKSB7XG4gICAgICAgICAgICAgICAgJG1vZGFsLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBcIjBcIixcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuaW5fZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogXCJlYXNlT3V0Q3ViaWNcIixcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG1vZGFsIHJlYWR5IGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChvcHRpb25zLnJlYWR5KSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZWFkeSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQuVmVsb2NpdHkuaG9vaygkbW9kYWwsIFwic2NhbGVYXCIsIDAuNyk7XG4gICAgICAgICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogb3B0aW9ucy5zdGFydGluZ190b3BcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkbW9kYWwudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IFwiMTAlXCIsXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWDogJzEnXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5pbl9kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBcImVhc2VPdXRDdWJpY1wiLFxuICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbW9kYWwgcmVhZHkgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG9wdGlvbnMucmVhZHkpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlYWR5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgY2xvc2VNb2RhbDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3V0X2R1cmF0aW9uOiAyNTAsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICRtb2RhbCA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgb3ZlcmxheUlEID0gJG1vZGFsLmRhdGEoJ292ZXJsYXktaWQnKSxcbiAgICAgICAgICAgICAgICAkb3ZlcmxheSA9ICQoJyMnICsgb3ZlcmxheUlEKTtcblxuICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSBzY3JvbGxpbmdcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJycpO1xuXG4gICAgICAgICAgICAkbW9kYWwuZmluZCgnLm1vZGFsLWNsb3NlJykub2ZmKCdjbGljay5jbG9zZScpO1xuICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdrZXl1cC5sZWFuTW9kYWwnICsgb3ZlcmxheUlEKTtcblxuICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5vdXRfZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVhc2U6IFwiZWFzZU91dFF1YXJ0XCJcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIC8vIERlZmluZSBCb3R0b20gU2hlZXQgYW5pbWF0aW9uXG4gICAgICAgICAgICBpZiAoJG1vZGFsLmhhc0NsYXNzKCdib3R0b20tc2hlZXQnKSkge1xuICAgICAgICAgICAgICAgICRtb2RhbC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogXCItMTAwJVwiLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5vdXRfZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogXCJlYXNlT3V0Q3ViaWNcIixcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG1vZGFsIHJlYWR5IGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkb3ZlcmxheS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCBjb21wbGV0ZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAob3B0aW9ucy5jb21wbGV0ZSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3N0YWNrLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJG1vZGFsLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBvcHRpb25zLnN0YXJ0aW5nX3RvcCxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiAwLjdcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLm91dF9kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCBjb21wbGV0ZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAob3B0aW9ucy5jb21wbGV0ZSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3N0YWNrLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJC5mbi5leHRlbmQoe1xuICAgICAgICBsZWFuTW9kYWw6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRpbmdfdG9wOiAnNCUnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIGRlZmF1bHRzXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9uKTtcblxuICAgICAgICAgICAgICAgIC8vIENsb3NlIEhhbmRsZXJzXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0YXJ0aW5nX3RvcCA9ICgkKHRoaXMpLm9mZnNldCgpLnRvcCAtICQod2luZG93KS5zY3JvbGxUb3AoKSkgLyAxLjE1O1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kYWxfaWQgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAgICAgICAgICAgICAgICQobW9kYWxfaWQpLm9wZW5Nb2RhbChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0pOyAvLyBkb25lIHNldCBvbiBjbGlja1xuICAgICAgICAgICAgfSk7IC8vIGRvbmUgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9KTtcbn0pKGpRdWVyeSk7IiwiLyogTUFURVJJQUxCT1ggKi9cblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgICAkLmZuLm1hdGVyaWFsYm94ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnaW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaW5pdGlhbGl6ZWQnKTtcblxuICAgICAgICAgICAgdmFyIG92ZXJsYXlBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBkb25lQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBpbkR1cmF0aW9uID0gMjc1O1xuICAgICAgICAgICAgdmFyIG91dER1cmF0aW9uID0gMjAwO1xuICAgICAgICAgICAgdmFyIG9yaWdpbiA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSAkKCc8ZGl2PjwvZGl2PicpLmFkZENsYXNzKCdtYXRlcmlhbC1wbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSAwO1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIG9yaWdpbi53cmFwKHBsYWNlaG9sZGVyKTtcblxuXG4gICAgICAgICAgICBvcmlnaW4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSBvcmlnaW4ud2lkdGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSBvcmlnaW4uaGVpZ2h0KCk7XG5cblxuICAgICAgICAgICAgICAgIC8vIElmIGFscmVhZHkgbW9kYWwsIHJldHVybiB0byBvcmlnaW5hbFxuICAgICAgICAgICAgICAgIGlmIChkb25lQW5pbWF0aW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub09yaWdpbmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG92ZXJsYXlBY3RpdmUgJiYgZG9uZUFuaW1hdGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub09yaWdpbmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8vIFNldCBzdGF0ZXNcbiAgICAgICAgICAgICAgICBkb25lQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgb3JpZ2luLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBvdmVybGF5QWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCBwb3NpdGlvbmluZyBmb3IgcGxhY2Vob2xkZXJcblxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBwbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBwbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgY3NzIG9uIG9yaWdpblxuICAgICAgICAgICAgICAgIG9yaWdpbi5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnei1pbmRleCc6IDEwMDBcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ3dpZHRoJywgb3JpZ2luYWxXaWR0aClcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ2hlaWdodCcsIG9yaWdpbmFsSGVpZ2h0KTtcblxuICAgICAgICAgICAgICAgIC8vIEFkZCBvdmVybGF5XG4gICAgICAgICAgICAgICAgdmFyIG92ZXJsYXkgPSAkKCc8ZGl2IGlkPVwibWF0ZXJpYWxib3gtb3ZlcmxheVwiPjwvZGl2PicpXG4gICAgICAgICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmVBbmltYXRpbmcgPT09IHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBBbmltYXRlIE92ZXJsYXlcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKG92ZXJsYXkpO1xuICAgICAgICAgICAgICAgIG92ZXJsYXkudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogaW5EdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGFuZCBhbmltYXRlIGNhcHRpb24gaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdjYXB0aW9uJykgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRwaG90b19jYXB0aW9uID0gJCgnPGRpdiBjbGFzcz1cIm1hdGVyaWFsYm94LWNhcHRpb25cIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgJHBob3RvX2NhcHRpb24udGV4dChvcmlnaW4uZGF0YSgnY2FwdGlvbicpKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkcGhvdG9fY2FwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICRwaG90b19jYXB0aW9uLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRpc3BsYXlcIjogXCJpbmxpbmVcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgJHBob3RvX2NhcHRpb24udmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogaW5EdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAgICAgLy8gUmVzaXplIEltYWdlXG4gICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGhQZXJjZW50ID0gb3JpZ2luYWxXaWR0aCAvIHdpbmRvd1dpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRQZXJjZW50ID0gb3JpZ2luYWxIZWlnaHQgLyB3aW5kb3dIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1dpZHRoID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gMDtcblxuICAgICAgICAgICAgICAgIGlmICh3aWR0aFBlcmNlbnQgPiBoZWlnaHRQZXJjZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvID0gb3JpZ2luYWxIZWlnaHQgLyBvcmlnaW5hbFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBuZXdXaWR0aCA9IHdpbmRvd1dpZHRoICogMC45O1xuICAgICAgICAgICAgICAgICAgICBuZXdIZWlnaHQgPSB3aW5kb3dXaWR0aCAqIDAuOSAqIHJhdGlvO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvID0gb3JpZ2luYWxXaWR0aCAvIG9yaWdpbmFsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBuZXdXaWR0aCA9ICh3aW5kb3dIZWlnaHQgKiAwLjkpICogcmF0aW87XG4gICAgICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IHdpbmRvd0hlaWdodCAqIDAuOTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBbmltYXRlIGltYWdlICsgc2V0IHotaW5kZXhcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luLmhhc0NsYXNzKCdyZXNwb25zaXZlLWltZycpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbi52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWF4LXdpZHRoJzogbmV3V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiBvcmlnaW5hbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogbmV3SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBuZXdXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgKyB3aW5kb3dXaWR0aCAvIDIgLSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKS5vZmZzZXQoKS5sZWZ0IC0gbmV3V2lkdGggLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgKyB3aW5kb3dIZWlnaHQgLyAyIC0gb3JpZ2luLnBhcmVudCgnLm1hdGVyaWFsLXBsYWNlaG9sZGVyJykub2Zmc2V0KCkudG9wIC0gbmV3SGVpZ2h0IC8gMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBpbkR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZUFuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBFbmQgQ29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgfSk7IC8vIEVuZCBWZWxvY2l0eVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbi5jc3MoJ2xlZnQnLCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygndG9wJywgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBuZXdIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG5ld1dpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSArIHdpbmRvd1dpZHRoIC8gMiAtIG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpLm9mZnNldCgpLmxlZnQgLSBuZXdXaWR0aCAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSArIHdpbmRvd0hlaWdodCAvIDIgLSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKS5vZmZzZXQoKS50b3AgLSBuZXdIZWlnaHQgLyAyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGluRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gRW5kIFZlbG9jaXR5XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTsgLy8gRW5kIG9yaWdpbiBvbiBjbGlja1xuXG5cbiAgICAgICAgICAgIC8vIFJldHVybiBvbiBzY3JvbGxcbiAgICAgICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChvdmVybGF5QWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRvT3JpZ2luYWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmV0dXJuIG9uIEVTQ1xuICAgICAgICAgICAgJChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3ICYmIGRvbmVBbmltYXRpbmcgPT09IHRydWUpIHsgLy8gRVNDIGtleVxuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheUFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBtb2RhbGVkIGltYWdlIHRvIHRoZSBvcmlnaW5hbCBzcG90XG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub09yaWdpbmFsKCkge1xuXG4gICAgICAgICAgICAgICAgZG9uZUFuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gb3JpZ2luLnBhcmVudCgnLm1hdGVyaWFsLXBsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxXaWR0aCA9IG9yaWdpbi5kYXRhKCd3aWR0aCcpO1xuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbEhlaWdodCA9IG9yaWdpbi5kYXRhKCdoZWlnaHQnKTtcblxuICAgICAgICAgICAgICAgIG9yaWdpbi52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgJCgnI21hdGVyaWFsYm94LW92ZXJsYXknKS52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgJCgnLm1hdGVyaWFsYm94LWNhcHRpb24nKS52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XG5cblxuICAgICAgICAgICAgICAgICQoJyNtYXRlcmlhbGJveC1vdmVybGF5JykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3V0RHVyYXRpb24sIC8vIERlbGF5IHByZXZlbnRzIGFuaW1hdGlvbiBvdmVybGFwcGluZ1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBPdmVybGF5XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5QWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXNpemUgSW1hZ2VcbiAgICAgICAgICAgICAgICBvcmlnaW4udmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogb3JpZ2luYWxXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBvcmlnaW5hbEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3V0RHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgQ2FwdGlvbiArIHJlc2V0IGNzcyBzZXR0aW5ncyBvbiBpbWFnZVxuICAgICAgICAgICAgICAgICQoJy5tYXRlcmlhbGJveC1jYXB0aW9uJykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3V0RHVyYXRpb24sIC8vIERlbGF5IHByZXZlbnRzIGFuaW1hdGlvbiBvdmVybGFwcGluZ1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW4uY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXgtd2lkdGgnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3otaW5kZXgnOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzc1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5tYXRlcmlhbGJveGVkJykubWF0ZXJpYWxib3goKTtcbiAgICB9KTtcblxufShqUXVlcnkpKTsiLCIvLyBNT1JQSElORyBIQU1CVVJHRVIgSUNPTlxuKGZ1bmN0aW9uICgpIHtcbiAgICAkKCcuaGFtYnVyZ2VyLW1lbnUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FuaW1hdGUnKVxuICAgICAgICAkKCcuYmFyJykudG9nZ2xlQ2xhc3MoJ2FuaW1hdGUnKTtcbiAgICB9KVxufSkoKTsiLCIvL0NvbGxhcHNlIG90aGVyIHRhYnMgZm9yIHBvcG91dCBcbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhY3RpdmUgPSB0cnVlO1xuXG4gICAgJCgnI2FjY29yZGlvbicpLm9uKCdzaG93LmJzLmNvbGxhcHNlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYWN0aXZlKSAkKCcjYWNjb3JkaW9uIC5pbicpLmNvbGxhcHNlKCdoaWRlJyk7XG4gICAgfSk7XG5cbn0pO1xuIiwiLyohXG4gKiBEYXRlIHBpY2tlciBmb3IgcGlja2FkYXRlLmpzIHYzLjUuMFxuICogaHR0cDovL2Ftc3VsLmdpdGh1Yi5pby9waWNrYWRhdGUuanMvZGF0ZS5odG1cbiAqL1xuXG4oZnVuY3Rpb24gKCBmYWN0b3J5ICkge1xuXG4gICAgLy8gQU1ELlxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKVxuICAgICAgICBkZWZpbmUoIFsncGlja2VyJywgJ2pxdWVyeSddLCBmYWN0b3J5IClcblxuICAgIC8vIE5vZGUuanMvYnJvd3NlcmlmeS5cbiAgICBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgKVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJy4vcGlja2VyLmpzJyksIHJlcXVpcmUoJ2pxdWVyeScpIClcblxuICAgIC8vIEJyb3dzZXIgZ2xvYmFscy5cbiAgICBlbHNlIGZhY3RvcnkoIFBpY2tlciwgalF1ZXJ5IClcblxufShmdW5jdGlvbiggUGlja2VyLCAkICkge1xuXG5cbi8qKlxuICogR2xvYmFscyBhbmQgY29uc3RhbnRzXG4gKi9cbnZhciBEQVlTX0lOX1dFRUsgPSA3LFxuICAgIFdFRUtTX0lOX0NBTEVOREFSID0gNixcbiAgICBfID0gUGlja2VyLl9cblxuXG5cbi8qKlxuICogVGhlIGRhdGUgcGlja2VyIGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERhdGVQaWNrZXIoIHBpY2tlciwgc2V0dGluZ3MgKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxuICAgICAgICBlbGVtZW50ID0gcGlja2VyLiRub2RlWyAwIF0sXG4gICAgICAgIGVsZW1lbnRWYWx1ZSA9IGVsZW1lbnQudmFsdWUsXG4gICAgICAgIGVsZW1lbnREYXRhVmFsdWUgPSBwaWNrZXIuJG5vZGUuZGF0YSggJ3ZhbHVlJyApLFxuICAgICAgICB2YWx1ZVN0cmluZyA9IGVsZW1lbnREYXRhVmFsdWUgfHwgZWxlbWVudFZhbHVlLFxuICAgICAgICBmb3JtYXRTdHJpbmcgPSBlbGVtZW50RGF0YVZhbHVlID8gc2V0dGluZ3MuZm9ybWF0U3VibWl0IDogc2V0dGluZ3MuZm9ybWF0LFxuICAgICAgICBpc1JUTCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jdXJyZW50U3R5bGUgP1xuXG4gICAgICAgICAgICAgICAgLy8gRm9yIElFLlxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY3VycmVudFN0eWxlLmRpcmVjdGlvbiA9PSAncnRsJyA6XG5cbiAgICAgICAgICAgICAgICAvLyBGb3Igbm9ybWFsIGJyb3dzZXJzLlxuICAgICAgICAgICAgICAgIGdldENvbXB1dGVkU3R5bGUoIHBpY2tlci4kcm9vdFswXSApLmRpcmVjdGlvbiA9PSAncnRsJ1xuICAgICAgICB9XG5cbiAgICBjYWxlbmRhci5zZXR0aW5ncyA9IHNldHRpbmdzXG4gICAgY2FsZW5kYXIuJG5vZGUgPSBwaWNrZXIuJG5vZGVcblxuICAgIC8vIFRoZSBxdWV1ZSBvZiBtZXRob2RzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIGl0ZW0gb2JqZWN0cy5cbiAgICBjYWxlbmRhci5xdWV1ZSA9IHtcbiAgICAgICAgbWluOiAnbWVhc3VyZSBjcmVhdGUnLFxuICAgICAgICBtYXg6ICdtZWFzdXJlIGNyZWF0ZScsXG4gICAgICAgIG5vdzogJ25vdyBjcmVhdGUnLFxuICAgICAgICBzZWxlY3Q6ICdwYXJzZSBjcmVhdGUgdmFsaWRhdGUnLFxuICAgICAgICBoaWdobGlnaHQ6ICdwYXJzZSBuYXZpZ2F0ZSBjcmVhdGUgdmFsaWRhdGUnLFxuICAgICAgICB2aWV3OiAncGFyc2UgY3JlYXRlIHZhbGlkYXRlIHZpZXdzZXQnLFxuICAgICAgICBkaXNhYmxlOiAnZGVhY3RpdmF0ZScsXG4gICAgICAgIGVuYWJsZTogJ2FjdGl2YXRlJ1xuICAgIH1cblxuICAgIC8vIFRoZSBjb21wb25lbnQncyBpdGVtIG9iamVjdC5cbiAgICBjYWxlbmRhci5pdGVtID0ge31cblxuICAgIGNhbGVuZGFyLml0ZW0uY2xlYXIgPSBudWxsXG4gICAgY2FsZW5kYXIuaXRlbS5kaXNhYmxlID0gKCBzZXR0aW5ncy5kaXNhYmxlIHx8IFtdICkuc2xpY2UoIDAgKVxuICAgIGNhbGVuZGFyLml0ZW0uZW5hYmxlID0gLShmdW5jdGlvbiggY29sbGVjdGlvbkRpc2FibGVkICkge1xuICAgICAgICByZXR1cm4gY29sbGVjdGlvbkRpc2FibGVkWyAwIF0gPT09IHRydWUgPyBjb2xsZWN0aW9uRGlzYWJsZWQuc2hpZnQoKSA6IC0xXG4gICAgfSkoIGNhbGVuZGFyLml0ZW0uZGlzYWJsZSApXG5cbiAgICBjYWxlbmRhci5cbiAgICAgICAgc2V0KCAnbWluJywgc2V0dGluZ3MubWluICkuXG4gICAgICAgIHNldCggJ21heCcsIHNldHRpbmdzLm1heCApLlxuICAgICAgICBzZXQoICdub3cnIClcblxuICAgIC8vIFdoZW4gdGhlcmXigJlzIGEgdmFsdWUsIHNldCB0aGUgYHNlbGVjdGAsIHdoaWNoIGluIHR1cm5cbiAgICAvLyBhbHNvIHNldHMgdGhlIGBoaWdobGlnaHRgIGFuZCBgdmlld2AuXG4gICAgaWYgKCB2YWx1ZVN0cmluZyApIHtcbiAgICAgICAgY2FsZW5kYXIuc2V0KCAnc2VsZWN0JywgdmFsdWVTdHJpbmcsIHsgZm9ybWF0OiBmb3JtYXRTdHJpbmcgfSlcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZeKAmXMgbm8gdmFsdWUsIGRlZmF1bHQgdG8gaGlnaGxpZ2h0aW5nIOKAnHRvZGF54oCdLlxuICAgIGVsc2Uge1xuICAgICAgICBjYWxlbmRhci5cbiAgICAgICAgICAgIHNldCggJ3NlbGVjdCcsIG51bGwgKS5cbiAgICAgICAgICAgIHNldCggJ2hpZ2hsaWdodCcsIGNhbGVuZGFyLml0ZW0ubm93IClcbiAgICB9XG5cblxuICAgIC8vIFRoZSBrZXljb2RlIHRvIG1vdmVtZW50IG1hcHBpbmcuXG4gICAgY2FsZW5kYXIua2V5ID0ge1xuICAgICAgICA0MDogNywgLy8gRG93blxuICAgICAgICAzODogLTcsIC8vIFVwXG4gICAgICAgIDM5OiBmdW5jdGlvbigpIHsgcmV0dXJuIGlzUlRMKCkgPyAtMSA6IDEgfSwgLy8gUmlnaHRcbiAgICAgICAgMzc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNSVEwoKSA/IDEgOiAtMSB9LCAvLyBMZWZ0XG4gICAgICAgIGdvOiBmdW5jdGlvbiggdGltZUNoYW5nZSApIHtcbiAgICAgICAgICAgIHZhciBoaWdobGlnaHRlZE9iamVjdCA9IGNhbGVuZGFyLml0ZW0uaGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSBuZXcgRGF0ZSggaGlnaGxpZ2h0ZWRPYmplY3QueWVhciwgaGlnaGxpZ2h0ZWRPYmplY3QubW9udGgsIGhpZ2hsaWdodGVkT2JqZWN0LmRhdGUgKyB0aW1lQ2hhbmdlIClcbiAgICAgICAgICAgIGNhbGVuZGFyLnNldChcbiAgICAgICAgICAgICAgICAnaGlnaGxpZ2h0JyxcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlLFxuICAgICAgICAgICAgICAgIHsgaW50ZXJ2YWw6IHRpbWVDaGFuZ2UgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBCaW5kIHNvbWUgcGlja2VyIGV2ZW50cy5cbiAgICBwaWNrZXIuXG4gICAgICAgIG9uKCAncmVuZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0TW9udGggKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoIHZhbHVlICkge1xuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuc2V0KCAnaGlnaGxpZ2h0JywgWyBwaWNrZXIuZ2V0KCAndmlldycgKS55ZWFyLCB2YWx1ZSwgcGlja2VyLmdldCggJ2hpZ2hsaWdodCcgKS5kYXRlIF0gKVxuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0TW9udGggKS50cmlnZ2VyKCAnZm9jdXMnIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICcuJyArIHNldHRpbmdzLmtsYXNzLnNlbGVjdFllYXIgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoIHZhbHVlICkge1xuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuc2V0KCAnaGlnaGxpZ2h0JywgWyB2YWx1ZSwgcGlja2VyLmdldCggJ3ZpZXcnICkubW9udGgsIHBpY2tlci5nZXQoICdoaWdobGlnaHQnICkuZGF0ZSBdIClcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICcuJyArIHNldHRpbmdzLmtsYXNzLnNlbGVjdFllYXIgKS50cmlnZ2VyKCAnZm9jdXMnIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCAxICkuXG4gICAgICAgIG9uKCAnb3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGluY2x1ZGVUb2RheSA9ICcnXG4gICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmRpc2FibGVkKCBjYWxlbmRhci5nZXQoJ25vdycpICkgKSB7XG4gICAgICAgICAgICAgICAgaW5jbHVkZVRvZGF5ID0gJzpub3QoLicgKyBzZXR0aW5ncy5rbGFzcy5idXR0b25Ub2RheSArICcpJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICdidXR0b24nICsgaW5jbHVkZVRvZGF5ICsgJywgc2VsZWN0JyApLmF0dHIoICdkaXNhYmxlZCcsIGZhbHNlIClcbiAgICAgICAgfSwgMSApLlxuICAgICAgICBvbiggJ2Nsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJ2J1dHRvbiwgc2VsZWN0JyApLmF0dHIoICdkaXNhYmxlZCcsIHRydWUgKVxuICAgICAgICB9LCAxIClcblxufSAvL0RhdGVQaWNrZXJcblxuXG4vKipcbiAqIFNldCBhIGRhdGVwaWNrZXIgaXRlbSBvYmplY3QuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIGNhbGVuZGFySXRlbSA9IGNhbGVuZGFyLml0ZW1cblxuICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBgbnVsbGAganVzdCBzZXQgaXQgaW1tZWRpYXRlbHkuXG4gICAgaWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcbiAgICAgICAgaWYgKCB0eXBlID09ICdjbGVhcicgKSB0eXBlID0gJ3NlbGVjdCdcbiAgICAgICAgY2FsZW5kYXJJdGVtWyB0eXBlIF0gPSB2YWx1ZVxuICAgICAgICByZXR1cm4gY2FsZW5kYXJcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCB0aGUgcXVldWUgb2YgbWV0aG9kcywgYW5kIGludm9rZSB0aGUgZnVuY3Rpb25zLlxuICAgIC8vIFVwZGF0ZSB0aGlzIGFzIHRoZSB0aW1lIHVuaXQsIGFuZCBzZXQgdGhlIGZpbmFsIHZhbHVlIGFzIHRoaXMgaXRlbS5cbiAgICAvLyAqIEluIHRoZSBjYXNlIG9mIGBlbmFibGVgLCBrZWVwIHRoZSBxdWV1ZSBidXQgc2V0IGBkaXNhYmxlYCBpbnN0ZWFkLlxuICAgIC8vICAgQW5kIGluIHRoZSBjYXNlIG9mIGBmbGlwYCwga2VlcCB0aGUgcXVldWUgYnV0IHNldCBgZW5hYmxlYCBpbnN0ZWFkLlxuICAgIGNhbGVuZGFySXRlbVsgKCB0eXBlID09ICdlbmFibGUnID8gJ2Rpc2FibGUnIDogdHlwZSA9PSAnZmxpcCcgPyAnZW5hYmxlJyA6IHR5cGUgKSBdID0gY2FsZW5kYXIucXVldWVbIHR5cGUgXS5zcGxpdCggJyAnICkubWFwKCBmdW5jdGlvbiggbWV0aG9kICkge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyWyBtZXRob2QgXSggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKVxuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICB9KS5wb3AoKVxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBjYXNjYWRlIHRocm91Z2ggbW9yZSB1cGRhdGVzLlxuICAgIGlmICggdHlwZSA9PSAnc2VsZWN0JyApIHtcbiAgICAgICAgY2FsZW5kYXIuc2V0KCAnaGlnaGxpZ2h0JywgY2FsZW5kYXJJdGVtLnNlbGVjdCwgb3B0aW9ucyApXG4gICAgfVxuICAgIGVsc2UgaWYgKCB0eXBlID09ICdoaWdobGlnaHQnICkge1xuICAgICAgICBjYWxlbmRhci5zZXQoICd2aWV3JywgY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCwgb3B0aW9ucyApXG4gICAgfVxuICAgIGVsc2UgaWYgKCB0eXBlLm1hdGNoKCAvXihmbGlwfG1pbnxtYXh8ZGlzYWJsZXxlbmFibGUpJC8gKSApIHtcbiAgICAgICAgaWYgKCBjYWxlbmRhckl0ZW0uc2VsZWN0ICYmIGNhbGVuZGFyLmRpc2FibGVkKCBjYWxlbmRhckl0ZW0uc2VsZWN0ICkgKSB7XG4gICAgICAgICAgICBjYWxlbmRhci5zZXQoICdzZWxlY3QnLCBjYWxlbmRhckl0ZW0uc2VsZWN0LCBvcHRpb25zIClcbiAgICAgICAgfVxuICAgICAgICBpZiAoIGNhbGVuZGFySXRlbS5oaWdobGlnaHQgJiYgY2FsZW5kYXIuZGlzYWJsZWQoIGNhbGVuZGFySXRlbS5oaWdobGlnaHQgKSApIHtcbiAgICAgICAgICAgIGNhbGVuZGFyLnNldCggJ2hpZ2hsaWdodCcsIGNhbGVuZGFySXRlbS5oaWdobGlnaHQsIG9wdGlvbnMgKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbGVuZGFyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuc2V0XG5cblxuLyoqXG4gKiBHZXQgYSBkYXRlcGlja2VyIGl0ZW0gb2JqZWN0LlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiggdHlwZSApIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtWyB0eXBlIF1cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5nZXRcblxuXG4vKipcbiAqIENyZWF0ZSBhIHBpY2tlciBkYXRlIG9iamVjdC5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkge1xuXG4gICAgdmFyIGlzSW5maW5pdGVWYWx1ZSxcbiAgICAgICAgY2FsZW5kYXIgPSB0aGlzXG5cbiAgICAvLyBJZiB0aGVyZeKAmXMgbm8gdmFsdWUsIHVzZSB0aGUgdHlwZSBhcyB0aGUgdmFsdWUuXG4gICAgdmFsdWUgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdHlwZSA6IHZhbHVlXG5cblxuICAgIC8vIElmIGl04oCZcyBpbmZpbml0eSwgdXBkYXRlIHRoZSB2YWx1ZS5cbiAgICBpZiAoIHZhbHVlID09IC1JbmZpbml0eSB8fCB2YWx1ZSA9PSBJbmZpbml0eSApIHtcbiAgICAgICAgaXNJbmZpbml0ZVZhbHVlID0gdmFsdWVcbiAgICB9XG5cbiAgICAvLyBJZiBpdOKAmXMgYW4gb2JqZWN0LCB1c2UgdGhlIG5hdGl2ZSBkYXRlIG9iamVjdC5cbiAgICBlbHNlIGlmICggJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApICYmIF8uaXNJbnRlZ2VyKCB2YWx1ZS5waWNrICkgKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUub2JqXG4gICAgfVxuXG4gICAgLy8gSWYgaXTigJlzIGFuIGFycmF5LCBjb252ZXJ0IGl0IGludG8gYSBkYXRlIGFuZCBtYWtlIHN1cmVcbiAgICAvLyB0aGF0IGl04oCZcyBhIHZhbGlkIGRhdGUg4oCTIG90aGVyd2lzZSBkZWZhdWx0IHRvIHRvZGF5LlxuICAgIGVsc2UgaWYgKCAkLmlzQXJyYXkoIHZhbHVlICkgKSB7XG4gICAgICAgIHZhbHVlID0gbmV3IERhdGUoIHZhbHVlWyAwIF0sIHZhbHVlWyAxIF0sIHZhbHVlWyAyIF0gKVxuICAgICAgICB2YWx1ZSA9IF8uaXNEYXRlKCB2YWx1ZSApID8gdmFsdWUgOiBjYWxlbmRhci5jcmVhdGUoKS5vYmpcbiAgICB9XG5cbiAgICAvLyBJZiBpdOKAmXMgYSBudW1iZXIgb3IgZGF0ZSBvYmplY3QsIG1ha2UgYSBub3JtYWxpemVkIGRhdGUuXG4gICAgZWxzZSBpZiAoIF8uaXNJbnRlZ2VyKCB2YWx1ZSApIHx8IF8uaXNEYXRlKCB2YWx1ZSApICkge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLm5vcm1hbGl6ZSggbmV3IERhdGUoIHZhbHVlICksIG9wdGlvbnMgKVxuICAgIH1cblxuICAgIC8vIElmIGl04oCZcyBhIGxpdGVyYWwgdHJ1ZSBvciBhbnkgb3RoZXIgY2FzZSwgc2V0IGl0IHRvIG5vdy5cbiAgICBlbHNlIC8qaWYgKCB2YWx1ZSA9PT0gdHJ1ZSApKi8ge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLm5vdyggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgY29tcGlsZWQgb2JqZWN0LlxuICAgIHJldHVybiB7XG4gICAgICAgIHllYXI6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICBtb250aDogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldE1vbnRoKCksXG4gICAgICAgIGRhdGU6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZS5nZXREYXRlKCksXG4gICAgICAgIGRheTogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldERheSgpLFxuICAgICAgICBvYmo6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZSxcbiAgICAgICAgcGljazogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldFRpbWUoKVxuICAgIH1cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVcblxuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmdlIGxpbWl0IG9iamVjdCB1c2luZyBhbiBhcnJheSwgZGF0ZSBvYmplY3QsXG4gKiBsaXRlcmFsIOKAnHRydWXigJ0sIG9yIGludGVnZXIgcmVsYXRpdmUgdG8gYW5vdGhlciB0aW1lLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVSYW5nZSA9IGZ1bmN0aW9uKCBmcm9tLCB0byApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIGNyZWF0ZURhdGUgPSBmdW5jdGlvbiggZGF0ZSApIHtcbiAgICAgICAgICAgIGlmICggZGF0ZSA9PT0gdHJ1ZSB8fCAkLmlzQXJyYXkoIGRhdGUgKSB8fCBfLmlzRGF0ZSggZGF0ZSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxlbmRhci5jcmVhdGUoIGRhdGUgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGVcbiAgICAgICAgfVxuXG4gICAgLy8gQ3JlYXRlIG9iamVjdHMgaWYgcG9zc2libGUuXG4gICAgaWYgKCAhXy5pc0ludGVnZXIoIGZyb20gKSApIHtcbiAgICAgICAgZnJvbSA9IGNyZWF0ZURhdGUoIGZyb20gKVxuICAgIH1cbiAgICBpZiAoICFfLmlzSW50ZWdlciggdG8gKSApIHtcbiAgICAgICAgdG8gPSBjcmVhdGVEYXRlKCB0byApXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHJlbGF0aXZlIGRhdGVzLlxuICAgIGlmICggXy5pc0ludGVnZXIoIGZyb20gKSAmJiAkLmlzUGxhaW5PYmplY3QoIHRvICkgKSB7XG4gICAgICAgIGZyb20gPSBbIHRvLnllYXIsIHRvLm1vbnRoLCB0by5kYXRlICsgZnJvbSBdO1xuICAgIH1cbiAgICBlbHNlIGlmICggXy5pc0ludGVnZXIoIHRvICkgJiYgJC5pc1BsYWluT2JqZWN0KCBmcm9tICkgKSB7XG4gICAgICAgIHRvID0gWyBmcm9tLnllYXIsIGZyb20ubW9udGgsIGZyb20uZGF0ZSArIHRvIF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbTogY3JlYXRlRGF0ZSggZnJvbSApLFxuICAgICAgICB0bzogY3JlYXRlRGF0ZSggdG8gKVxuICAgIH1cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVSYW5nZVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgYSBkYXRlIHVuaXQgZmFsbHMgd2l0aGluIGEgZGF0ZSByYW5nZSBvYmplY3QuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLndpdGhpblJhbmdlID0gZnVuY3Rpb24oIHJhbmdlLCBkYXRlVW5pdCApIHtcbiAgICByYW5nZSA9IHRoaXMuY3JlYXRlUmFuZ2UocmFuZ2UuZnJvbSwgcmFuZ2UudG8pXG4gICAgcmV0dXJuIGRhdGVVbml0LnBpY2sgPj0gcmFuZ2UuZnJvbS5waWNrICYmIGRhdGVVbml0LnBpY2sgPD0gcmFuZ2UudG8ucGlja1xufVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIGRhdGUgcmFuZ2Ugb2JqZWN0cyBvdmVybGFwLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5vdmVybGFwUmFuZ2VzID0gZnVuY3Rpb24oIG9uZSwgdHdvICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpc1xuXG4gICAgLy8gQ29udmVydCB0aGUgcmFuZ2VzIGludG8gY29tcGFyYWJsZSBkYXRlcy5cbiAgICBvbmUgPSBjYWxlbmRhci5jcmVhdGVSYW5nZSggb25lLmZyb20sIG9uZS50byApXG4gICAgdHdvID0gY2FsZW5kYXIuY3JlYXRlUmFuZ2UoIHR3by5mcm9tLCB0d28udG8gKVxuXG4gICAgcmV0dXJuIGNhbGVuZGFyLndpdGhpblJhbmdlKCBvbmUsIHR3by5mcm9tICkgfHwgY2FsZW5kYXIud2l0aGluUmFuZ2UoIG9uZSwgdHdvLnRvICkgfHxcbiAgICAgICAgY2FsZW5kYXIud2l0aGluUmFuZ2UoIHR3bywgb25lLmZyb20gKSB8fCBjYWxlbmRhci53aXRoaW5SYW5nZSggdHdvLCBvbmUudG8gKVxufVxuXG5cbi8qKlxuICogR2V0IHRoZSBkYXRlIHRvZGF5LlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5ub3cgPSBmdW5jdGlvbiggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKSB7XG4gICAgdmFsdWUgPSBuZXcgRGF0ZSgpXG4gICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMucmVsICkge1xuICAgICAgICB2YWx1ZS5zZXREYXRlKCB2YWx1ZS5nZXREYXRlKCkgKyBvcHRpb25zLnJlbCApXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZSggdmFsdWUsIG9wdGlvbnMgKVxufVxuXG5cbi8qKlxuICogTmF2aWdhdGUgdG8gbmV4dC9wcmV2IG1vbnRoLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5uYXZpZ2F0ZSA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHtcblxuICAgIHZhciB0YXJnZXREYXRlT2JqZWN0LFxuICAgICAgICB0YXJnZXRZZWFyLFxuICAgICAgICB0YXJnZXRNb250aCxcbiAgICAgICAgdGFyZ2V0RGF0ZSxcbiAgICAgICAgaXNUYXJnZXRBcnJheSA9ICQuaXNBcnJheSggdmFsdWUgKSxcbiAgICAgICAgaXNUYXJnZXRPYmplY3QgPSAkLmlzUGxhaW5PYmplY3QoIHZhbHVlICksXG4gICAgICAgIHZpZXdzZXRPYmplY3QgPSB0aGlzLml0ZW0udmlldy8qLFxuICAgICAgICBzYWZldHkgPSAxMDAqL1xuXG5cbiAgICBpZiAoIGlzVGFyZ2V0QXJyYXkgfHwgaXNUYXJnZXRPYmplY3QgKSB7XG5cbiAgICAgICAgaWYgKCBpc1RhcmdldE9iamVjdCApIHtcbiAgICAgICAgICAgIHRhcmdldFllYXIgPSB2YWx1ZS55ZWFyXG4gICAgICAgICAgICB0YXJnZXRNb250aCA9IHZhbHVlLm1vbnRoXG4gICAgICAgICAgICB0YXJnZXREYXRlID0gdmFsdWUuZGF0ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0WWVhciA9ICt2YWx1ZVswXVxuICAgICAgICAgICAgdGFyZ2V0TW9udGggPSArdmFsdWVbMV1cbiAgICAgICAgICAgIHRhcmdldERhdGUgPSArdmFsdWVbMl1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHdl4oCZcmUgbmF2aWdhdGluZyBtb250aHMgYnV0IHRoZSB2aWV3IGlzIGluIGEgZGlmZmVyZW50XG4gICAgICAgIC8vIG1vbnRoLCBuYXZpZ2F0ZSB0byB0aGUgdmlld+KAmXMgeWVhciBhbmQgbW9udGguXG4gICAgICAgIGlmICggb3B0aW9ucyAmJiBvcHRpb25zLm5hdiAmJiB2aWV3c2V0T2JqZWN0ICYmIHZpZXdzZXRPYmplY3QubW9udGggIT09IHRhcmdldE1vbnRoICkge1xuICAgICAgICAgICAgdGFyZ2V0WWVhciA9IHZpZXdzZXRPYmplY3QueWVhclxuICAgICAgICAgICAgdGFyZ2V0TW9udGggPSB2aWV3c2V0T2JqZWN0Lm1vbnRoXG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaWd1cmUgb3V0IHRoZSBleHBlY3RlZCB0YXJnZXQgeWVhciBhbmQgbW9udGguXG4gICAgICAgIHRhcmdldERhdGVPYmplY3QgPSBuZXcgRGF0ZSggdGFyZ2V0WWVhciwgdGFyZ2V0TW9udGggKyAoIG9wdGlvbnMgJiYgb3B0aW9ucy5uYXYgPyBvcHRpb25zLm5hdiA6IDAgKSwgMSApXG4gICAgICAgIHRhcmdldFllYXIgPSB0YXJnZXREYXRlT2JqZWN0LmdldEZ1bGxZZWFyKClcbiAgICAgICAgdGFyZ2V0TW9udGggPSB0YXJnZXREYXRlT2JqZWN0LmdldE1vbnRoKClcblxuICAgICAgICAvLyBJZiB0aGUgbW9udGggd2XigJlyZSBnb2luZyB0byBkb2VzbuKAmXQgaGF2ZSBlbm91Z2ggZGF5cyxcbiAgICAgICAgLy8ga2VlcCBkZWNyZWFzaW5nIHRoZSBkYXRlIHVudGlsIHdlIHJlYWNoIHRoZSBtb250aOKAmXMgbGFzdCBkYXRlLlxuICAgICAgICB3aGlsZSAoIC8qc2FmZXR5ICYmKi8gbmV3IERhdGUoIHRhcmdldFllYXIsIHRhcmdldE1vbnRoLCB0YXJnZXREYXRlICkuZ2V0TW9udGgoKSAhPT0gdGFyZ2V0TW9udGggKSB7XG4gICAgICAgICAgICB0YXJnZXREYXRlIC09IDFcbiAgICAgICAgICAgIC8qc2FmZXR5IC09IDFcbiAgICAgICAgICAgIGlmICggIXNhZmV0eSApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnRmVsbCBpbnRvIGFuIGluZmluaXRlIGxvb3Agd2hpbGUgbmF2aWdhdGluZyB0byAnICsgbmV3IERhdGUoIHRhcmdldFllYXIsIHRhcmdldE1vbnRoLCB0YXJnZXREYXRlICkgKyAnLidcbiAgICAgICAgICAgIH0qL1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSBbIHRhcmdldFllYXIsIHRhcmdldE1vbnRoLCB0YXJnZXREYXRlIF1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5uYXZpZ2F0ZVxuXG5cbi8qKlxuICogTm9ybWFsaXplIGEgZGF0ZSBieSBzZXR0aW5nIHRoZSBob3VycyB0byBtaWRuaWdodC5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24oIHZhbHVlLyosIG9wdGlvbnMqLyApIHtcbiAgICB2YWx1ZS5zZXRIb3VycyggMCwgMCwgMCwgMCApXG4gICAgcmV0dXJuIHZhbHVlXG59XG5cblxuLyoqXG4gKiBNZWFzdXJlIHRoZSByYW5nZSBvZiBkYXRlcy5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUubWVhc3VyZSA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZS8qLCBvcHRpb25zKi8gKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzXG5cbiAgICAvLyBJZiBpdOKAmXMgYW55dGhpbmcgZmFsc2UteSwgcmVtb3ZlIHRoZSBsaW1pdHMuXG4gICAgaWYgKCAhdmFsdWUgKSB7XG4gICAgICAgIHZhbHVlID0gdHlwZSA9PSAnbWluJyA/IC1JbmZpbml0eSA6IEluZmluaXR5XG4gICAgfVxuXG4gICAgLy8gSWYgaXTigJlzIGEgc3RyaW5nLCBwYXJzZSBpdC5cbiAgICBlbHNlIGlmICggdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnICkge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLnBhcnNlKCB0eXBlLCB2YWx1ZSApXG4gICAgfVxuXG4gICAgLy8gSWYgaXQncyBhbiBpbnRlZ2VyLCBnZXQgYSBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LlxuICAgIGVsc2UgaWYgKCBfLmlzSW50ZWdlciggdmFsdWUgKSApIHtcbiAgICAgICAgdmFsdWUgPSBjYWxlbmRhci5ub3coIHR5cGUsIHZhbHVlLCB7IHJlbDogdmFsdWUgfSApXG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlXG59IC8vL0RhdGVQaWNrZXIucHJvdG90eXBlLm1lYXN1cmVcblxuXG4vKipcbiAqIENyZWF0ZSBhIHZpZXdzZXQgb2JqZWN0IGJhc2VkIG9uIG5hdmlnYXRpb24uXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLnZpZXdzZXQgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZU9iamVjdC8qLCBvcHRpb25zKi8gKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKFsgZGF0ZU9iamVjdC55ZWFyLCBkYXRlT2JqZWN0Lm1vbnRoLCAxIF0pXG59XG5cblxuLyoqXG4gKiBWYWxpZGF0ZSBhIGRhdGUgYXMgZW5hYmxlZCBhbmQgc2hpZnQgaWYgbmVlZGVkLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uKCB0eXBlLCBkYXRlT2JqZWN0LCBvcHRpb25zICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpcyxcblxuICAgICAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBvcmlnaW5hbCBkYXRlLlxuICAgICAgICBvcmlnaW5hbERhdGVPYmplY3QgPSBkYXRlT2JqZWN0LFxuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGFuIGludGVydmFsLlxuICAgICAgICBpbnRlcnZhbCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnZhbCA/IG9wdGlvbnMuaW50ZXJ2YWwgOiAxLFxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYWxlbmRhciBlbmFibGVkIGRhdGVzIGFyZSBpbnZlcnRlZC5cbiAgICAgICAgaXNGbGlwcGVkQmFzZSA9IGNhbGVuZGFyLml0ZW0uZW5hYmxlID09PSAtMSxcblxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFueSBlbmFibGVkIGRhdGVzIGFmdGVyL2JlZm9yZSBub3cuXG4gICAgICAgIGhhc0VuYWJsZWRCZWZvcmVUYXJnZXQsIGhhc0VuYWJsZWRBZnRlclRhcmdldCxcblxuICAgICAgICAvLyBUaGUgbWluICYgbWF4IGxpbWl0cy5cbiAgICAgICAgbWluTGltaXRPYmplY3QgPSBjYWxlbmRhci5pdGVtLm1pbixcbiAgICAgICAgbWF4TGltaXRPYmplY3QgPSBjYWxlbmRhci5pdGVtLm1heCxcblxuICAgICAgICAvLyBDaGVjayBpZiB3ZeKAmXZlIHJlYWNoZWQgdGhlIGxpbWl0IGR1cmluZyBzaGlmdGluZy5cbiAgICAgICAgcmVhY2hlZE1pbiwgcmVhY2hlZE1heCxcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FsZW5kYXIgaXMgaW52ZXJ0ZWQgYW5kIGF0IGxlYXN0IG9uZSB3ZWVrZGF5IGlzIGVuYWJsZWQuXG4gICAgICAgIGhhc0VuYWJsZWRXZWVrZGF5cyA9IGlzRmxpcHBlZEJhc2UgJiYgY2FsZW5kYXIuaXRlbS5kaXNhYmxlLmZpbHRlciggZnVuY3Rpb24oIHZhbHVlICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBkYXRlLCBjaGVjayB3aGVyZSBpdCBpcyByZWxhdGl2ZSB0byB0aGUgdGFyZ2V0LlxuICAgICAgICAgICAgaWYgKCAkLmlzQXJyYXkoIHZhbHVlICkgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUaW1lID0gY2FsZW5kYXIuY3JlYXRlKCB2YWx1ZSApLnBpY2tcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGVUaW1lIDwgZGF0ZU9iamVjdC5waWNrICkgaGFzRW5hYmxlZEJlZm9yZVRhcmdldCA9IHRydWVcbiAgICAgICAgICAgICAgICBlbHNlIGlmICggZGF0ZVRpbWUgPiBkYXRlT2JqZWN0LnBpY2sgKSBoYXNFbmFibGVkQWZ0ZXJUYXJnZXQgPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJldHVybiBvbmx5IGludGVnZXJzIGZvciBlbmFibGVkIHdlZWtkYXlzLlxuICAgICAgICAgICAgcmV0dXJuIF8uaXNJbnRlZ2VyKCB2YWx1ZSApXG4gICAgICAgIH0pLmxlbmd0aC8qLFxuXG4gICAgICAgIHNhZmV0eSA9IDEwMCovXG5cblxuXG4gICAgLy8gQ2FzZXMgdG8gdmFsaWRhdGUgZm9yOlxuICAgIC8vIFsxXSBOb3QgaW52ZXJ0ZWQgYW5kIGRhdGUgZGlzYWJsZWQuXG4gICAgLy8gWzJdIEludmVydGVkIGFuZCBzb21lIGRhdGVzIGVuYWJsZWQuXG4gICAgLy8gWzNdIE5vdCBpbnZlcnRlZCBhbmQgb3V0IG9mIHJhbmdlLlxuICAgIC8vXG4gICAgLy8gQ2FzZXMgdG8gKipub3QqKiB2YWxpZGF0ZSBmb3I6XG4gICAgLy8g4oCiIE5hdmlnYXRpbmcgbW9udGhzLlxuICAgIC8vIOKAoiBOb3QgaW52ZXJ0ZWQgYW5kIGRhdGUgZW5hYmxlZC5cbiAgICAvLyDigKIgSW52ZXJ0ZWQgYW5kIGFsbCBkYXRlcyBkaXNhYmxlZC5cbiAgICAvLyDigKIgLi5hbmQgYW55dGhpbmcgZWxzZS5cbiAgICBpZiAoICFvcHRpb25zIHx8ICFvcHRpb25zLm5hdiApIGlmIChcbiAgICAgICAgLyogMSAqLyAoICFpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgKSB8fFxuICAgICAgICAvKiAyICovICggaXNGbGlwcGVkQmFzZSAmJiBjYWxlbmRhci5kaXNhYmxlZCggZGF0ZU9iamVjdCApICYmICggaGFzRW5hYmxlZFdlZWtkYXlzIHx8IGhhc0VuYWJsZWRCZWZvcmVUYXJnZXQgfHwgaGFzRW5hYmxlZEFmdGVyVGFyZ2V0ICkgKSB8fFxuICAgICAgICAvKiAzICovICggIWlzRmxpcHBlZEJhc2UgJiYgKGRhdGVPYmplY3QucGljayA8PSBtaW5MaW1pdE9iamVjdC5waWNrIHx8IGRhdGVPYmplY3QucGljayA+PSBtYXhMaW1pdE9iamVjdC5waWNrKSApXG4gICAgKSB7XG5cblxuICAgICAgICAvLyBXaGVuIGludmVydGVkLCBmbGlwIHRoZSBkaXJlY3Rpb24gaWYgdGhlcmUgYXJlbuKAmXQgYW55IGVuYWJsZWQgd2Vla2RheXNcbiAgICAgICAgLy8gYW5kIHRoZXJlIGFyZSBubyBlbmFibGVkIGRhdGVzIGluIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGludGVydmFsLlxuICAgICAgICBpZiAoIGlzRmxpcHBlZEJhc2UgJiYgIWhhc0VuYWJsZWRXZWVrZGF5cyAmJiAoICggIWhhc0VuYWJsZWRBZnRlclRhcmdldCAmJiBpbnRlcnZhbCA+IDAgKSB8fCAoICFoYXNFbmFibGVkQmVmb3JlVGFyZ2V0ICYmIGludGVydmFsIDwgMCApICkgKSB7XG4gICAgICAgICAgICBpbnRlcnZhbCAqPSAtMVxuICAgICAgICB9XG5cblxuICAgICAgICAvLyBLZWVwIGxvb3BpbmcgdW50aWwgd2UgcmVhY2ggYW4gZW5hYmxlZCBkYXRlLlxuICAgICAgICB3aGlsZSAoIC8qc2FmZXR5ICYmKi8gY2FsZW5kYXIuZGlzYWJsZWQoIGRhdGVPYmplY3QgKSApIHtcblxuICAgICAgICAgICAgLypzYWZldHkgLT0gMVxuICAgICAgICAgICAgaWYgKCAhc2FmZXR5ICkge1xuICAgICAgICAgICAgICAgIHRocm93ICdGZWxsIGludG8gYW4gaW5maW5pdGUgbG9vcCB3aGlsZSB2YWxpZGF0aW5nICcgKyBkYXRlT2JqZWN0Lm9iaiArICcuJ1xuICAgICAgICAgICAgfSovXG5cblxuICAgICAgICAgICAgLy8gSWYgd2XigJl2ZSBsb29wZWQgaW50byB0aGUgbmV4dC9wcmV2IG1vbnRoIHdpdGggYSBsYXJnZSBpbnRlcnZhbCwgcmV0dXJuIHRvIHRoZSBvcmlnaW5hbCBkYXRlIGFuZCBmbGF0dGVuIHRoZSBpbnRlcnZhbC5cbiAgICAgICAgICAgIGlmICggTWF0aC5hYnMoIGludGVydmFsICkgPiAxICYmICggZGF0ZU9iamVjdC5tb250aCA8IG9yaWdpbmFsRGF0ZU9iamVjdC5tb250aCB8fCBkYXRlT2JqZWN0Lm1vbnRoID4gb3JpZ2luYWxEYXRlT2JqZWN0Lm1vbnRoICkgKSB7XG4gICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG9yaWdpbmFsRGF0ZU9iamVjdFxuICAgICAgICAgICAgICAgIGludGVydmFsID0gaW50ZXJ2YWwgPiAwID8gMSA6IC0xXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gSWYgd2XigJl2ZSByZWFjaGVkIHRoZSBtaW4vbWF4IGxpbWl0LCByZXZlcnNlIHRoZSBkaXJlY3Rpb24sIGZsYXR0ZW4gdGhlIGludGVydmFsIGFuZCBzZXQgaXQgdG8gdGhlIGxpbWl0LlxuICAgICAgICAgICAgaWYgKCBkYXRlT2JqZWN0LnBpY2sgPD0gbWluTGltaXRPYmplY3QucGljayApIHtcbiAgICAgICAgICAgICAgICByZWFjaGVkTWluID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGludGVydmFsID0gMVxuICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoW1xuICAgICAgICAgICAgICAgICAgICBtaW5MaW1pdE9iamVjdC55ZWFyLFxuICAgICAgICAgICAgICAgICAgICBtaW5MaW1pdE9iamVjdC5tb250aCxcbiAgICAgICAgICAgICAgICAgICAgbWluTGltaXRPYmplY3QuZGF0ZSArIChkYXRlT2JqZWN0LnBpY2sgPT09IG1pbkxpbWl0T2JqZWN0LnBpY2sgPyAwIDogLTEpXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCBkYXRlT2JqZWN0LnBpY2sgPj0gbWF4TGltaXRPYmplY3QucGljayApIHtcbiAgICAgICAgICAgICAgICByZWFjaGVkTWF4ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGludGVydmFsID0gLTFcbiAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gY2FsZW5kYXIuY3JlYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgbWF4TGltaXRPYmplY3QueWVhcixcbiAgICAgICAgICAgICAgICAgICAgbWF4TGltaXRPYmplY3QubW9udGgsXG4gICAgICAgICAgICAgICAgICAgIG1heExpbWl0T2JqZWN0LmRhdGUgKyAoZGF0ZU9iamVjdC5waWNrID09PSBtYXhMaW1pdE9iamVjdC5waWNrID8gMCA6IDEpXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBJZiB3ZeKAmXZlIHJlYWNoZWQgYm90aCBsaW1pdHMsIGp1c3QgYnJlYWsgb3V0IG9mIHRoZSBsb29wLlxuICAgICAgICAgICAgaWYgKCByZWFjaGVkTWluICYmIHJlYWNoZWRNYXggKSB7XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBGaW5hbGx5LCBjcmVhdGUgdGhlIHNoaWZ0ZWQgZGF0ZSB1c2luZyB0aGUgaW50ZXJ2YWwgYW5kIGtlZXAgbG9vcGluZy5cbiAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoWyBkYXRlT2JqZWN0LnllYXIsIGRhdGVPYmplY3QubW9udGgsIGRhdGVPYmplY3QuZGF0ZSArIGludGVydmFsIF0pXG4gICAgICAgIH1cblxuICAgIH0gLy9lbmRpZlxuXG5cbiAgICAvLyBSZXR1cm4gdGhlIGRhdGUgb2JqZWN0IHNldHRsZWQgb24uXG4gICAgcmV0dXJuIGRhdGVPYmplY3Rcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS52YWxpZGF0ZVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgYSBkYXRlIGlzIGRpc2FibGVkLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5kaXNhYmxlZCA9IGZ1bmN0aW9uKCBkYXRlVG9WZXJpZnkgKSB7XG5cbiAgICB2YXJcbiAgICAgICAgY2FsZW5kYXIgPSB0aGlzLFxuXG4gICAgICAgIC8vIEZpbHRlciB0aHJvdWdoIHRoZSBkaXNhYmxlZCBkYXRlcyB0byBjaGVjayBpZiB0aGlzIGlzIG9uZS5cbiAgICAgICAgaXNEaXNhYmxlZE1hdGNoID0gY2FsZW5kYXIuaXRlbS5kaXNhYmxlLmZpbHRlciggZnVuY3Rpb24oIGRhdGVUb0Rpc2FibGUgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBkYXRlIGlzIGEgbnVtYmVyLCBtYXRjaCB0aGUgd2Vla2RheSB3aXRoIDBpbmRleCBhbmQgYGZpcnN0RGF5YCBjaGVjay5cbiAgICAgICAgICAgIGlmICggXy5pc0ludGVnZXIoIGRhdGVUb0Rpc2FibGUgKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZVRvVmVyaWZ5LmRheSA9PT0gKCBjYWxlbmRhci5zZXR0aW5ncy5maXJzdERheSA/IGRhdGVUb0Rpc2FibGUgOiBkYXRlVG9EaXNhYmxlIC0gMSApICUgN1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBpdOKAmXMgYW4gYXJyYXkgb3IgYSBuYXRpdmUgSlMgZGF0ZSwgY3JlYXRlIGFuZCBtYXRjaCB0aGUgZXhhY3QgZGF0ZS5cbiAgICAgICAgICAgIGlmICggJC5pc0FycmF5KCBkYXRlVG9EaXNhYmxlICkgfHwgXy5pc0RhdGUoIGRhdGVUb0Rpc2FibGUgKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZVRvVmVyaWZ5LnBpY2sgPT09IGNhbGVuZGFyLmNyZWF0ZSggZGF0ZVRvRGlzYWJsZSApLnBpY2tcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgaXTigJlzIGFuIG9iamVjdCwgbWF0Y2ggYSBkYXRlIHdpdGhpbiB0aGUg4oCcZnJvbeKAnSBhbmQg4oCcdG/igJ0gcmFuZ2UuXG4gICAgICAgICAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggZGF0ZVRvRGlzYWJsZSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxlbmRhci53aXRoaW5SYW5nZSggZGF0ZVRvRGlzYWJsZSwgZGF0ZVRvVmVyaWZ5IClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIC8vIElmIHRoaXMgZGF0ZSBtYXRjaGVzIGEgZGlzYWJsZWQgZGF0ZSwgY29uZmlybSBpdOKAmXMgbm90IGludmVydGVkLlxuICAgIGlzRGlzYWJsZWRNYXRjaCA9IGlzRGlzYWJsZWRNYXRjaC5sZW5ndGggJiYgIWlzRGlzYWJsZWRNYXRjaC5maWx0ZXIoZnVuY3Rpb24oIGRhdGVUb0Rpc2FibGUgKSB7XG4gICAgICAgIHJldHVybiAkLmlzQXJyYXkoIGRhdGVUb0Rpc2FibGUgKSAmJiBkYXRlVG9EaXNhYmxlWzNdID09ICdpbnZlcnRlZCcgfHxcbiAgICAgICAgICAgICQuaXNQbGFpbk9iamVjdCggZGF0ZVRvRGlzYWJsZSApICYmIGRhdGVUb0Rpc2FibGUuaW52ZXJ0ZWRcbiAgICB9KS5sZW5ndGhcblxuICAgIC8vIENoZWNrIHRoZSBjYWxlbmRhciDigJxlbmFibGVk4oCdIGZsYWcgYW5kIHJlc3BlY3RpdmVseSBmbGlwIHRoZVxuICAgIC8vIGRpc2FibGVkIHN0YXRlLiBUaGVuIGFsc28gY2hlY2sgaWYgaXTigJlzIGJleW9uZCB0aGUgbWluL21heCBsaW1pdHMuXG4gICAgcmV0dXJuIGNhbGVuZGFyLml0ZW0uZW5hYmxlID09PSAtMSA/ICFpc0Rpc2FibGVkTWF0Y2ggOiBpc0Rpc2FibGVkTWF0Y2ggfHxcbiAgICAgICAgZGF0ZVRvVmVyaWZ5LnBpY2sgPCBjYWxlbmRhci5pdGVtLm1pbi5waWNrIHx8XG4gICAgICAgIGRhdGVUb1ZlcmlmeS5waWNrID4gY2FsZW5kYXIuaXRlbS5tYXgucGlja1xuXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuZGlzYWJsZWRcblxuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIGludG8gYSB1c2FibGUgdHlwZS5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxuICAgICAgICBwYXJzaW5nT2JqZWN0ID0ge31cblxuICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IHBhcnNlZCwgd2XigJlyZSBnb29kLlxuICAgIGlmICggIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJyApIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuXG4gICAgLy8gV2UgbmVlZCBhIGAuZm9ybWF0YCB0byBwYXJzZSB0aGUgdmFsdWUgd2l0aC5cbiAgICBpZiAoICEoIG9wdGlvbnMgJiYgb3B0aW9ucy5mb3JtYXQgKSApIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICAgICAgb3B0aW9ucy5mb3JtYXQgPSBjYWxlbmRhci5zZXR0aW5ncy5mb3JtYXRcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHRoZSBmb3JtYXQgaW50byBhbiBhcnJheSBhbmQgdGhlbiBtYXAgdGhyb3VnaCBpdC5cbiAgICBjYWxlbmRhci5mb3JtYXRzLnRvQXJyYXkoIG9wdGlvbnMuZm9ybWF0ICkubWFwKCBmdW5jdGlvbiggbGFiZWwgKSB7XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICAvLyBHcmFiIHRoZSBmb3JtYXR0aW5nIGxhYmVsLlxuICAgICAgICAgICAgZm9ybWF0dGluZ0xhYmVsID0gY2FsZW5kYXIuZm9ybWF0c1sgbGFiZWwgXSxcblxuICAgICAgICAgICAgLy8gVGhlIGZvcm1hdCBsZW5ndGggaXMgZnJvbSB0aGUgZm9ybWF0dGluZyBsYWJlbCBmdW5jdGlvbiBvciB0aGVcbiAgICAgICAgICAgIC8vIGxhYmVsIGxlbmd0aCB3aXRob3V0IHRoZSBlc2NhcGluZyBleGNsYW1hdGlvbiAoISkgbWFyay5cbiAgICAgICAgICAgIGZvcm1hdExlbmd0aCA9IGZvcm1hdHRpbmdMYWJlbCA/IF8udHJpZ2dlciggZm9ybWF0dGluZ0xhYmVsLCBjYWxlbmRhciwgWyB2YWx1ZSwgcGFyc2luZ09iamVjdCBdICkgOiBsYWJlbC5yZXBsYWNlKCAvXiEvLCAnJyApLmxlbmd0aFxuXG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYSBmb3JtYXQgbGFiZWwsIHNwbGl0IHRoZSB2YWx1ZSB1cCB0byB0aGUgZm9ybWF0IGxlbmd0aC5cbiAgICAgICAgLy8gVGhlbiBhZGQgaXQgdG8gdGhlIHBhcnNpbmcgb2JqZWN0IHdpdGggYXBwcm9wcmlhdGUgbGFiZWwuXG4gICAgICAgIGlmICggZm9ybWF0dGluZ0xhYmVsICkge1xuICAgICAgICAgICAgcGFyc2luZ09iamVjdFsgbGFiZWwgXSA9IHZhbHVlLnN1YnN0ciggMCwgZm9ybWF0TGVuZ3RoIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgYXMgdGhlIHN1YnN0cmluZyBmcm9tIGZvcm1hdCBsZW5ndGggdG8gZW5kLlxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0ciggZm9ybWF0TGVuZ3RoIClcbiAgICB9KVxuXG4gICAgLy8gQ29tcGVuc2F0ZSBmb3IgbW9udGggMGluZGV4LlxuICAgIHJldHVybiBbXG4gICAgICAgIHBhcnNpbmdPYmplY3QueXl5eSB8fCBwYXJzaW5nT2JqZWN0Lnl5LFxuICAgICAgICArKCBwYXJzaW5nT2JqZWN0Lm1tIHx8IHBhcnNpbmdPYmplY3QubSApIC0gMSxcbiAgICAgICAgcGFyc2luZ09iamVjdC5kZCB8fCBwYXJzaW5nT2JqZWN0LmRcbiAgICBdXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUucGFyc2VcblxuXG4vKipcbiAqIFZhcmlvdXMgZm9ybWF0cyB0byBkaXNwbGF5IHRoZSBvYmplY3QgaW4uXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmZvcm1hdHMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3Qgd29yZCBpbiBhIGNvbGxlY3Rpb24uXG4gICAgZnVuY3Rpb24gZ2V0V29yZExlbmd0aEZyb21Db2xsZWN0aW9uKCBzdHJpbmcsIGNvbGxlY3Rpb24sIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgLy8gR3JhYiB0aGUgZmlyc3Qgd29yZCBmcm9tIHRoZSBzdHJpbmcuXG4gICAgICAgIHZhciB3b3JkID0gc3RyaW5nLm1hdGNoKCAvXFx3Ky8gKVsgMCBdXG5cbiAgICAgICAgLy8gSWYgdGhlcmUncyBubyBtb250aCBpbmRleCwgYWRkIGl0IHRvIHRoZSBkYXRlIG9iamVjdFxuICAgICAgICBpZiAoICFkYXRlT2JqZWN0Lm1tICYmICFkYXRlT2JqZWN0Lm0gKSB7XG4gICAgICAgICAgICBkYXRlT2JqZWN0Lm0gPSBjb2xsZWN0aW9uLmluZGV4T2YoIHdvcmQgKSArIDFcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSB3b3JkLlxuICAgICAgICByZXR1cm4gd29yZC5sZW5ndGhcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3Qgd29yZCBpbiBhIHN0cmluZy5cbiAgICBmdW5jdGlvbiBnZXRGaXJzdFdvcmRMZW5ndGgoIHN0cmluZyApIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5tYXRjaCggL1xcdysvIClbIDAgXS5sZW5ndGhcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuXG4gICAgICAgIGQ6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgc3RyaW5nLCB0aGVuIGdldCB0aGUgZGlnaXRzIGxlbmd0aC5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIGRhdGUuXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gXy5kaWdpdHMoIHN0cmluZyApIDogZGF0ZU9iamVjdC5kYXRlXG4gICAgICAgIH0sXG4gICAgICAgIGRkOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIHRoZSBsZW5ndGggaXMgYWx3YXlzIDIuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBkYXRlIHdpdGggYSBsZWFkaW5nIHplcm8uXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gMiA6IF8ubGVhZCggZGF0ZU9iamVjdC5kYXRlIClcbiAgICAgICAgfSxcbiAgICAgICAgZGRkOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIGdldCB0aGUgbGVuZ3RoIG9mIHRoZSBmaXJzdCB3b3JkLlxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2hvcnQgc2VsZWN0ZWQgd2Vla2RheS5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRGaXJzdFdvcmRMZW5ndGgoIHN0cmluZyApIDogdGhpcy5zZXR0aW5ncy53ZWVrZGF5c1Nob3J0WyBkYXRlT2JqZWN0LmRheSBdXG4gICAgICAgIH0sXG4gICAgICAgIGRkZGQ6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gZ2V0IHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IHdvcmQuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBmdWxsIHNlbGVjdGVkIHdlZWtkYXkuXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gZ2V0Rmlyc3RXb3JkTGVuZ3RoKCBzdHJpbmcgKSA6IHRoaXMuc2V0dGluZ3Mud2Vla2RheXNGdWxsWyBkYXRlT2JqZWN0LmRheSBdXG4gICAgICAgIH0sXG4gICAgICAgIG06IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gZ2V0IHRoZSBsZW5ndGggb2YgdGhlIGRpZ2l0c1xuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgbW9udGggd2l0aCAwaW5kZXggY29tcGVuc2F0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IF8uZGlnaXRzKCBzdHJpbmcgKSA6IGRhdGVPYmplY3QubW9udGggKyAxXG4gICAgICAgIH0sXG4gICAgICAgIG1tOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIHRoZSBsZW5ndGggaXMgYWx3YXlzIDIuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCB3aXRoIDBpbmRleCBhbmQgbGVhZGluZyB6ZXJvLlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IDIgOiBfLmxlYWQoIGRhdGVPYmplY3QubW9udGggKyAxIClcbiAgICAgICAgfSxcbiAgICAgICAgbW1tOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXMuc2V0dGluZ3MubW9udGhzU2hvcnRcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgZ2V0IGxlbmd0aCBvZiB0aGUgcmVsZXZhbnQgbW9udGggZnJvbSB0aGUgc2hvcnRcbiAgICAgICAgICAgIC8vIG1vbnRocyBjb2xsZWN0aW9uLiBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCBmcm9tIHRoYXQgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRXb3JkTGVuZ3RoRnJvbUNvbGxlY3Rpb24oIHN0cmluZywgY29sbGVjdGlvbiwgZGF0ZU9iamVjdCApIDogY29sbGVjdGlvblsgZGF0ZU9iamVjdC5tb250aCBdXG4gICAgICAgIH0sXG4gICAgICAgIG1tbW06IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcy5zZXR0aW5ncy5tb250aHNGdWxsXG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIGdldCBsZW5ndGggb2YgdGhlIHJlbGV2YW50IG1vbnRoIGZyb20gdGhlIGZ1bGxcbiAgICAgICAgICAgIC8vIG1vbnRocyBjb2xsZWN0aW9uLiBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCBmcm9tIHRoYXQgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRXb3JkTGVuZ3RoRnJvbUNvbGxlY3Rpb24oIHN0cmluZywgY29sbGVjdGlvbiwgZGF0ZU9iamVjdCApIDogY29sbGVjdGlvblsgZGF0ZU9iamVjdC5tb250aCBdXG4gICAgICAgIH0sXG4gICAgICAgIHl5OiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIHRoZSBsZW5ndGggaXMgYWx3YXlzIDIuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCB5ZWFyIGJ5IHNsaWNpbmcgb3V0IHRoZSBmaXJzdCAyIGRpZ2l0cy5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyAyIDogKCAnJyArIGRhdGVPYmplY3QueWVhciApLnNsaWNlKCAyIClcbiAgICAgICAgfSxcbiAgICAgICAgeXl5eTogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiB0aGUgbGVuZ3RoIGlzIGFsd2F5cyA0LlxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgeWVhci5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyA0IDogZGF0ZU9iamVjdC55ZWFyXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGFycmF5IGJ5IHNwbGl0dGluZyB0aGUgZm9ybWF0dGluZyBzdHJpbmcgcGFzc2VkLlxuICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiggZm9ybWF0U3RyaW5nICkgeyByZXR1cm4gZm9ybWF0U3RyaW5nLnNwbGl0KCAvKGR7MSw0fXxtezEsNH18eXs0fXx5eXwhLikvZyApIH0sXG5cbiAgICAgICAgLy8gRm9ybWF0IGFuIG9iamVjdCBpbnRvIGEgc3RyaW5nIHVzaW5nIHRoZSBmb3JtYXR0aW5nIG9wdGlvbnMuXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoIGZvcm1hdFN0cmluZywgaXRlbU9iamVjdCApIHtcbiAgICAgICAgICAgIHZhciBjYWxlbmRhciA9IHRoaXNcbiAgICAgICAgICAgIHJldHVybiBjYWxlbmRhci5mb3JtYXRzLnRvQXJyYXkoIGZvcm1hdFN0cmluZyApLm1hcCggZnVuY3Rpb24oIGxhYmVsICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLnRyaWdnZXIoIGNhbGVuZGFyLmZvcm1hdHNbIGxhYmVsIF0sIGNhbGVuZGFyLCBbIDAsIGl0ZW1PYmplY3QgXSApIHx8IGxhYmVsLnJlcGxhY2UoIC9eIS8sICcnIClcbiAgICAgICAgICAgIH0pLmpvaW4oICcnIClcbiAgICAgICAgfVxuICAgIH1cbn0pKCkgLy9EYXRlUGlja2VyLnByb3RvdHlwZS5mb3JtYXRzXG5cblxuXG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIGRhdGUgdW5pdHMgYXJlIHRoZSBleGFjdC5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuaXNEYXRlRXhhY3QgPSBmdW5jdGlvbiggb25lLCB0d28gKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzXG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIHdlZWtkYXlzLCBkbyBhIGRpcmVjdCBjb21wYXJpc29uLlxuICAgIGlmIChcbiAgICAgICAgKCBfLmlzSW50ZWdlciggb25lICkgJiYgXy5pc0ludGVnZXIoIHR3byApICkgfHxcbiAgICAgICAgKCB0eXBlb2Ygb25lID09ICdib29sZWFuJyAmJiB0eXBlb2YgdHdvID09ICdib29sZWFuJyApXG4gICAgICkge1xuICAgICAgICByZXR1cm4gb25lID09PSB0d29cbiAgICB9XG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIGRhdGUgcmVwcmVzZW50YXRpb25zLCBjb21wYXJlIHRoZSDigJxwaWNr4oCdIHZhbHVlLlxuICAgIGlmIChcbiAgICAgICAgKCBfLmlzRGF0ZSggb25lICkgfHwgJC5pc0FycmF5KCBvbmUgKSApICYmXG4gICAgICAgICggXy5pc0RhdGUoIHR3byApIHx8ICQuaXNBcnJheSggdHdvICkgKVxuICAgICkge1xuICAgICAgICByZXR1cm4gY2FsZW5kYXIuY3JlYXRlKCBvbmUgKS5waWNrID09PSBjYWxlbmRhci5jcmVhdGUoIHR3byApLnBpY2tcbiAgICB9XG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIHJhbmdlIG9iamVjdHMsIGNvbXBhcmUgdGhlIOKAnGZyb23igJ0gYW5kIOKAnHRv4oCdLlxuICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCBvbmUgKSAmJiAkLmlzUGxhaW5PYmplY3QoIHR3byApICkge1xuICAgICAgICByZXR1cm4gY2FsZW5kYXIuaXNEYXRlRXhhY3QoIG9uZS5mcm9tLCB0d28uZnJvbSApICYmIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCBvbmUudG8sIHR3by50byApXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gZGF0ZSB1bml0cyBvdmVybGFwLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5pc0RhdGVPdmVybGFwID0gZnVuY3Rpb24oIG9uZSwgdHdvICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpcyxcbiAgICAgICAgZmlyc3REYXkgPSBjYWxlbmRhci5zZXR0aW5ncy5maXJzdERheSA/IDEgOiAwXG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIGEgd2Vla2RheSBpbmRleCwgY29tcGFyZSB0aGUgZGF5cy5cbiAgICBpZiAoIF8uaXNJbnRlZ2VyKCBvbmUgKSAmJiAoIF8uaXNEYXRlKCB0d28gKSB8fCAkLmlzQXJyYXkoIHR3byApICkgKSB7XG4gICAgICAgIG9uZSA9IG9uZSAlIDcgKyBmaXJzdERheVxuICAgICAgICByZXR1cm4gb25lID09PSBjYWxlbmRhci5jcmVhdGUoIHR3byApLmRheSArIDFcbiAgICB9XG4gICAgaWYgKCBfLmlzSW50ZWdlciggdHdvICkgJiYgKCBfLmlzRGF0ZSggb25lICkgfHwgJC5pc0FycmF5KCBvbmUgKSApICkge1xuICAgICAgICB0d28gPSB0d28gJSA3ICsgZmlyc3REYXlcbiAgICAgICAgcmV0dXJuIHR3byA9PT0gY2FsZW5kYXIuY3JlYXRlKCBvbmUgKS5kYXkgKyAxXG4gICAgfVxuXG4gICAgLy8gV2hlbiB3ZeKAmXJlIHdvcmtpbmcgd2l0aCByYW5nZSBvYmplY3RzLCBjaGVjayBpZiB0aGUgcmFuZ2VzIG92ZXJsYXAuXG4gICAgaWYgKCAkLmlzUGxhaW5PYmplY3QoIG9uZSApICYmICQuaXNQbGFpbk9iamVjdCggdHdvICkgKSB7XG4gICAgICAgIHJldHVybiBjYWxlbmRhci5vdmVybGFwUmFuZ2VzKCBvbmUsIHR3byApXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cblxuLyoqXG4gKiBGbGlwIHRoZSDigJxlbmFibGVk4oCdIHN0YXRlLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5mbGlwRW5hYmxlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdmFyIGl0ZW1PYmplY3QgPSB0aGlzLml0ZW1cbiAgICBpdGVtT2JqZWN0LmVuYWJsZSA9IHZhbCB8fCAoaXRlbU9iamVjdC5lbmFibGUgPT0gLTEgPyAxIDogLTEpXG59XG5cblxuLyoqXG4gKiBNYXJrIGEgY29sbGVjdGlvbiBvZiBkYXRlcyBhcyDigJxkaXNhYmxlZOKAnS5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuZGVhY3RpdmF0ZSA9IGZ1bmN0aW9uKCB0eXBlLCBkYXRlc1RvRGlzYWJsZSApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIGRpc2FibGVkSXRlbXMgPSBjYWxlbmRhci5pdGVtLmRpc2FibGUuc2xpY2UoMClcblxuXG4gICAgLy8gSWYgd2XigJlyZSBmbGlwcGluZywgdGhhdOKAmXMgYWxsIHdlIG5lZWQgdG8gZG8uXG4gICAgaWYgKCBkYXRlc1RvRGlzYWJsZSA9PSAnZmxpcCcgKSB7XG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoKVxuICAgIH1cblxuICAgIGVsc2UgaWYgKCBkYXRlc1RvRGlzYWJsZSA9PT0gZmFsc2UgKSB7XG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoMSlcbiAgICAgICAgZGlzYWJsZWRJdGVtcyA9IFtdXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9EaXNhYmxlID09PSB0cnVlICkge1xuICAgICAgICBjYWxlbmRhci5mbGlwRW5hYmxlKC0xKVxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gW11cbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCB0aGUgZGF0ZXMgdG8gZGlzYWJsZS5cbiAgICBlbHNlIHtcblxuICAgICAgICBkYXRlc1RvRGlzYWJsZS5tYXAoZnVuY3Rpb24oIHVuaXRUb0Rpc2FibGUgKSB7XG5cbiAgICAgICAgICAgIHZhciBtYXRjaEZvdW5kXG5cbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBkaXNhYmxlZCBpdGVtcywgY2hlY2sgZm9yIG1hdGNoZXMuXG4gICAgICAgICAgICAvLyBJZiBzb21ldGhpbmcgaXMgbWF0Y2hlZCwgaW1tZWRpYXRlbHkgYnJlYWsgb3V0LlxuICAgICAgICAgICAgZm9yICggdmFyIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zLmxlbmd0aDsgaW5kZXggKz0gMSApIHtcbiAgICAgICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCB1bml0VG9EaXNhYmxlLCBkaXNhYmxlZEl0ZW1zW2luZGV4XSApICkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgbm90aGluZyB3YXMgZm91bmQsIGFkZCB0aGUgdmFsaWRhdGVkIHVuaXQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gICAgICAgICAgICBpZiAoICFtYXRjaEZvdW5kICkge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgXy5pc0ludGVnZXIoIHVuaXRUb0Rpc2FibGUgKSB8fFxuICAgICAgICAgICAgICAgICAgICBfLmlzRGF0ZSggdW5pdFRvRGlzYWJsZSApIHx8XG4gICAgICAgICAgICAgICAgICAgICQuaXNBcnJheSggdW5pdFRvRGlzYWJsZSApIHx8XG4gICAgICAgICAgICAgICAgICAgICggJC5pc1BsYWluT2JqZWN0KCB1bml0VG9EaXNhYmxlICkgJiYgdW5pdFRvRGlzYWJsZS5mcm9tICYmIHVuaXRUb0Rpc2FibGUudG8gKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zLnB1c2goIHVuaXRUb0Rpc2FibGUgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIHVwZGF0ZWQgY29sbGVjdGlvbi5cbiAgICByZXR1cm4gZGlzYWJsZWRJdGVtc1xufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmRlYWN0aXZhdGVcblxuXG4vKipcbiAqIE1hcmsgYSBjb2xsZWN0aW9uIG9mIGRhdGVzIGFzIOKAnGVuYWJsZWTigJ0uXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24oIHR5cGUsIGRhdGVzVG9FbmFibGUgKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gY2FsZW5kYXIuaXRlbS5kaXNhYmxlLFxuICAgICAgICBkaXNhYmxlZEl0ZW1zQ291bnQgPSBkaXNhYmxlZEl0ZW1zLmxlbmd0aFxuXG4gICAgLy8gSWYgd2XigJlyZSBmbGlwcGluZywgdGhhdOKAmXMgYWxsIHdlIG5lZWQgdG8gZG8uXG4gICAgaWYgKCBkYXRlc1RvRW5hYmxlID09ICdmbGlwJyApIHtcbiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgpXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9FbmFibGUgPT09IHRydWUgKSB7XG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoMSlcbiAgICAgICAgZGlzYWJsZWRJdGVtcyA9IFtdXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9FbmFibGUgPT09IGZhbHNlICkge1xuICAgICAgICBjYWxlbmRhci5mbGlwRW5hYmxlKC0xKVxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gW11cbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCB0aGUgZGlzYWJsZWQgZGF0ZXMuXG4gICAgZWxzZSB7XG5cbiAgICAgICAgZGF0ZXNUb0VuYWJsZS5tYXAoZnVuY3Rpb24oIHVuaXRUb0VuYWJsZSApIHtcblxuICAgICAgICAgICAgdmFyIG1hdGNoRm91bmQsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWRVbml0LFxuICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgIGlzRXhhY3RSYW5nZVxuXG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBkaXNhYmxlZCBpdGVtcyBhbmQgdHJ5IHRvIGZpbmQgYSBtYXRjaC5cbiAgICAgICAgICAgIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zQ291bnQ7IGluZGV4ICs9IDEgKSB7XG5cbiAgICAgICAgICAgICAgICBkaXNhYmxlZFVuaXQgPSBkaXNhYmxlZEl0ZW1zW2luZGV4XVxuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBhbiBleGFjdCBtYXRjaCBpcyBmb3VuZCwgcmVtb3ZlIGl0IGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICAgICAgICAgICAgaWYgKCBjYWxlbmRhci5pc0RhdGVFeGFjdCggZGlzYWJsZWRVbml0LCB1bml0VG9FbmFibGUgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IGRpc2FibGVkSXRlbXNbaW5kZXhdID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICBpc0V4YWN0UmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBhbiBvdmVybGFwcGVkIG1hdGNoIGlzIGZvdW5kLCBhZGQgdGhlIOKAnGludmVydGVk4oCdIHN0YXRlIHRvIGl0LlxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCBjYWxlbmRhci5pc0RhdGVPdmVybGFwKCBkaXNhYmxlZFVuaXQsIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggdW5pdFRvRW5hYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bml0VG9FbmFibGUuaW52ZXJ0ZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdW5pdFRvRW5hYmxlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoICQuaXNBcnJheSggdW5pdFRvRW5hYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdW5pdFRvRW5hYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFtYXRjaEZvdW5kWzNdICkgbWF0Y2hGb3VuZC5wdXNoKCAnaW52ZXJ0ZWQnIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggXy5pc0RhdGUoIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IFsgdW5pdFRvRW5hYmxlLmdldEZ1bGxZZWFyKCksIHVuaXRUb0VuYWJsZS5nZXRNb250aCgpLCB1bml0VG9FbmFibGUuZ2V0RGF0ZSgpLCAnaW52ZXJ0ZWQnIF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgYSBtYXRjaCB3YXMgZm91bmQsIHJlbW92ZSBhIHByZXZpb3VzIGR1cGxpY2F0ZSBlbnRyeS5cbiAgICAgICAgICAgIGlmICggbWF0Y2hGb3VuZCApIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zQ291bnQ7IGluZGV4ICs9IDEgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBjYWxlbmRhci5pc0RhdGVFeGFjdCggZGlzYWJsZWRJdGVtc1tpbmRleF0sIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zW2luZGV4XSA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluIHRoZSBldmVudCB0aGF0IHdl4oCZcmUgZGVhbGluZyB3aXRoIGFuIGV4YWN0IHJhbmdlIG9mIGRhdGVzLFxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXJlIGFyZSBubyDigJxpbnZlcnRlZOKAnSBkYXRlcyBiZWNhdXNlIG9mIGl0LlxuICAgICAgICAgICAgaWYgKCBpc0V4YWN0UmFuZ2UgKSBmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgZGlzYWJsZWRJdGVtc0NvdW50OyBpbmRleCArPSAxICkge1xuICAgICAgICAgICAgICAgIGlmICggY2FsZW5kYXIuaXNEYXRlT3ZlcmxhcCggZGlzYWJsZWRJdGVtc1tpbmRleF0sIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zW2luZGV4XSA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHNvbWV0aGluZyBpcyBzdGlsbCBtYXRjaGVkLCBhZGQgaXQgaW50byB0aGUgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIGlmICggbWF0Y2hGb3VuZCApIHtcbiAgICAgICAgICAgICAgICBkaXNhYmxlZEl0ZW1zLnB1c2goIG1hdGNoRm91bmQgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgdXBkYXRlZCBjb2xsZWN0aW9uLlxuICAgIHJldHVybiBkaXNhYmxlZEl0ZW1zLmZpbHRlcihmdW5jdGlvbiggdmFsICkgeyByZXR1cm4gdmFsICE9IG51bGwgfSlcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5hY3RpdmF0ZVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgc3RyaW5nIGZvciB0aGUgbm9kZXMgaW4gdGhlIHBpY2tlci5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUubm9kZXMgPSBmdW5jdGlvbiggaXNPcGVuICkge1xuXG4gICAgdmFyXG4gICAgICAgIGNhbGVuZGFyID0gdGhpcyxcbiAgICAgICAgc2V0dGluZ3MgPSBjYWxlbmRhci5zZXR0aW5ncyxcbiAgICAgICAgY2FsZW5kYXJJdGVtID0gY2FsZW5kYXIuaXRlbSxcbiAgICAgICAgbm93T2JqZWN0ID0gY2FsZW5kYXJJdGVtLm5vdyxcbiAgICAgICAgc2VsZWN0ZWRPYmplY3QgPSBjYWxlbmRhckl0ZW0uc2VsZWN0LFxuICAgICAgICBoaWdobGlnaHRlZE9iamVjdCA9IGNhbGVuZGFySXRlbS5oaWdobGlnaHQsXG4gICAgICAgIHZpZXdzZXRPYmplY3QgPSBjYWxlbmRhckl0ZW0udmlldyxcbiAgICAgICAgZGlzYWJsZWRDb2xsZWN0aW9uID0gY2FsZW5kYXJJdGVtLmRpc2FibGUsXG4gICAgICAgIG1pbkxpbWl0T2JqZWN0ID0gY2FsZW5kYXJJdGVtLm1pbixcbiAgICAgICAgbWF4TGltaXRPYmplY3QgPSBjYWxlbmRhckl0ZW0ubWF4LFxuXG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWxlbmRhciB0YWJsZSBoZWFkIHVzaW5nIGEgY29weSBvZiB3ZWVrZGF5IGxhYmVscyBjb2xsZWN0aW9uLlxuICAgICAgICAvLyAqIFdlIGRvIGEgY29weSBzbyB3ZSBkb24ndCBtdXRhdGUgdGhlIG9yaWdpbmFsIGFycmF5LlxuICAgICAgICB0YWJsZUhlYWQgPSAoZnVuY3Rpb24oIGNvbGxlY3Rpb24sIGZ1bGxDb2xsZWN0aW9uICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IHNob3VsZCBiZSBNb25kYXksIG1vdmUgU3VuZGF5IHRvIHRoZSBlbmQuXG4gICAgICAgICAgICBpZiAoIHNldHRpbmdzLmZpcnN0RGF5ICkge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCggY29sbGVjdGlvbi5zaGlmdCgpIClcbiAgICAgICAgICAgICAgICBmdWxsQ29sbGVjdGlvbi5wdXNoKCBmdWxsQ29sbGVjdGlvbi5zaGlmdCgpIClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCByZXR1cm4gdGhlIHRhYmxlIGhlYWQgZ3JvdXAuXG4gICAgICAgICAgICByZXR1cm4gXy5ub2RlKFxuICAgICAgICAgICAgICAgICd0aGVhZCcsXG4gICAgICAgICAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgICAgICAgICAndHInLFxuICAgICAgICAgICAgICAgICAgICBfLmdyb3VwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogREFZU19JTl9XRUVLIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAndGgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogZnVuY3Rpb24oIGNvdW50ZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvblsgY291bnRlciBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy53ZWVrZGF5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Njb3BlPWNvbCB0aXRsZT1cIicgKyBmdWxsQ29sbGVjdGlvblsgY291bnRlciBdICsgJ1wiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIC8vZW5kcmV0dXJuXG5cbiAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcbiAgICAgICAgfSkoICggc2V0dGluZ3Muc2hvd1dlZWtkYXlzRnVsbCA/IHNldHRpbmdzLndlZWtkYXlzRnVsbCA6IHNldHRpbmdzLndlZWtkYXlzTGV0dGVyICkuc2xpY2UoIDAgKSwgc2V0dGluZ3Mud2Vla2RheXNGdWxsLnNsaWNlKCAwICkgKSwgLy90YWJsZUhlYWRcblxuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbmF2IGZvciBuZXh0L3ByZXYgbW9udGguXG4gICAgICAgIGNyZWF0ZU1vbnRoTmF2ID0gZnVuY3Rpb24oIG5leHQgKSB7XG5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgcmV0dXJuIHRoZSBjcmVhdGVkIG1vbnRoIHRhZy5cbiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgJyAnLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzWyAnbmF2JyArICggbmV4dCA/ICdOZXh0JyA6ICdQcmV2JyApIF0gKyAoXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZvY3VzZWQgbW9udGggaXMgb3V0c2lkZSB0aGUgcmFuZ2UsIGRpc2FibGVkIHRoZSBidXR0b24uXG4gICAgICAgICAgICAgICAgICAgICggbmV4dCAmJiB2aWV3c2V0T2JqZWN0LnllYXIgPj0gbWF4TGltaXRPYmplY3QueWVhciAmJiB2aWV3c2V0T2JqZWN0Lm1vbnRoID49IG1heExpbWl0T2JqZWN0Lm1vbnRoICkgfHxcbiAgICAgICAgICAgICAgICAgICAgKCAhbmV4dCAmJiB2aWV3c2V0T2JqZWN0LnllYXIgPD0gbWluTGltaXRPYmplY3QueWVhciAmJiB2aWV3c2V0T2JqZWN0Lm1vbnRoIDw9IG1pbkxpbWl0T2JqZWN0Lm1vbnRoICkgP1xuICAgICAgICAgICAgICAgICAgICAnICcgKyBzZXR0aW5ncy5rbGFzcy5uYXZEaXNhYmxlZCA6ICcnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYXY9JyArICggbmV4dCB8fCAtMSApICsgJyAnICtcbiAgICAgICAgICAgICAgICBfLmFyaWFBdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCArICdfdGFibGUnXG4gICAgICAgICAgICAgICAgfSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICd0aXRsZT1cIicgKyAobmV4dCA/IHNldHRpbmdzLmxhYmVsTW9udGhOZXh0IDogc2V0dGluZ3MubGFiZWxNb250aFByZXYgKSArICdcIidcbiAgICAgICAgICAgICkgLy9lbmRyZXR1cm5cbiAgICAgICAgfSwgLy9jcmVhdGVNb250aE5hdlxuXG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtb250aCBsYWJlbC5cbiAgICAgICAgLy9NYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICBjcmVhdGVNb250aExhYmVsID0gZnVuY3Rpb24ob3ZlcnJpZGUpIHtcblxuICAgICAgICAgICAgdmFyIG1vbnRoc0NvbGxlY3Rpb24gPSBzZXR0aW5ncy5zaG93TW9udGhzU2hvcnQgPyBzZXR0aW5ncy5tb250aHNTaG9ydCA6IHNldHRpbmdzLm1vbnRoc0Z1bGxcblxuICAgICAgICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkXG4gICAgICAgICAgICBpZiAob3ZlcnJpZGUgPT0gXCJzaG9ydF9tb250aHNcIikge1xuICAgICAgICAgICAgICBtb250aHNDb2xsZWN0aW9uID0gc2V0dGluZ3MubW9udGhzU2hvcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBtb250aHMgdG8gc2VsZWN0LCBhZGQgYSBkcm9wZG93biBtZW51LlxuICAgICAgICAgICAgaWYgKCBzZXR0aW5ncy5zZWxlY3RNb250aHMgICYmIG92ZXJyaWRlID09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgICAgIF8uZ3JvdXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAxMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAnb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCBsb29wZWRNb250aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGxvb3BlZCBtb250aCBhbmQgbm8gY2xhc3Nlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhzQ29sbGVjdGlvblsgbG9vcGVkTW9udGggXSwgMCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHZhbHVlIGFuZCBzZWxlY3RlZCBpbmRleC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlPScgKyBsb29wZWRNb250aCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggdmlld3NldE9iamVjdC5tb250aCA9PSBsb29wZWRNb250aCA/ICcgc2VsZWN0ZWQnIDogJycgKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIHZpZXdzZXRPYmplY3QueWVhciA9PSBtaW5MaW1pdE9iamVjdC55ZWFyICYmIGxvb3BlZE1vbnRoIDwgbWluTGltaXRPYmplY3QubW9udGggKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggdmlld3NldE9iamVjdC55ZWFyID09IG1heExpbWl0T2JqZWN0LnllYXIgJiYgbG9vcGVkTW9udGggPiBtYXhMaW1pdE9iamVjdC5tb250aCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZGlzYWJsZWQnIDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLnNlbGVjdE1vbnRoICsgJyBicm93c2VyLWRlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICAoIGlzT3BlbiA/ICcnIDogJ2Rpc2FibGVkJyApICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCArICdfdGFibGUnIH0pICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ3RpdGxlPVwiJyArIHNldHRpbmdzLmxhYmVsTW9udGhTZWxlY3QgKyAnXCInXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICAgICAgaWYgKG92ZXJyaWRlID09IFwic2hvcnRfbW9udGhzXCIpXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT2JqZWN0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ2RpdicsIG1vbnRoc0NvbGxlY3Rpb25bIHNlbGVjdGVkT2JqZWN0Lm1vbnRoIF0gKTtcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBfLm5vZGUoICdkaXYnLCBtb250aHNDb2xsZWN0aW9uWyB2aWV3c2V0T2JqZWN0Lm1vbnRoIF0gKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIG5lZWQgZm9yIGEgbW9udGggc2VsZWN0b3JcbiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdkaXYnLCBtb250aHNDb2xsZWN0aW9uWyB2aWV3c2V0T2JqZWN0Lm1vbnRoIF0sIHNldHRpbmdzLmtsYXNzLm1vbnRoIClcbiAgICAgICAgfSwgLy9jcmVhdGVNb250aExhYmVsXG5cblxuICAgICAgICAvLyBDcmVhdGUgdGhlIHllYXIgbGFiZWwuXG4gICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkXG4gICAgICAgIGNyZWF0ZVllYXJMYWJlbCA9IGZ1bmN0aW9uKG92ZXJyaWRlKSB7XG5cbiAgICAgICAgICAgIHZhciBmb2N1c2VkWWVhciA9IHZpZXdzZXRPYmplY3QueWVhcixcblxuICAgICAgICAgICAgLy8gSWYgeWVhcnMgc2VsZWN0b3IgaXMgc2V0IHRvIGEgbGl0ZXJhbCBcInRydWVcIiwgc2V0IGl0IHRvIDUuIE90aGVyd2lzZVxuICAgICAgICAgICAgLy8gZGl2aWRlIGluIGhhbGYgdG8gZ2V0IGhhbGYgYmVmb3JlIGFuZCBoYWxmIGFmdGVyIGZvY3VzZWQgeWVhci5cbiAgICAgICAgICAgIG51bWJlclllYXJzID0gc2V0dGluZ3Muc2VsZWN0WWVhcnMgPT09IHRydWUgPyA1IDogfn4oIHNldHRpbmdzLnNlbGVjdFllYXJzIC8gMiApXG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSB5ZWFycyB0byBzZWxlY3QsIGFkZCBhIGRyb3Bkb3duIG1lbnUuXG4gICAgICAgICAgICBpZiAoIG51bWJlclllYXJzICkge1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG1pblllYXIgPSBtaW5MaW1pdE9iamVjdC55ZWFyLFxuICAgICAgICAgICAgICAgICAgICBtYXhZZWFyID0gbWF4TGltaXRPYmplY3QueWVhcixcbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0WWVhciA9IGZvY3VzZWRZZWFyIC0gbnVtYmVyWWVhcnMsXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RZZWFyID0gZm9jdXNlZFllYXIgKyBudW1iZXJZZWFyc1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1pbiB5ZWFyIGlzIGdyZWF0ZXIgdGhhbiB0aGUgbG93ZXN0IHllYXIsIGluY3JlYXNlIHRoZSBoaWdoZXN0IHllYXJcbiAgICAgICAgICAgICAgICAvLyBieSB0aGUgZGlmZmVyZW5jZSBhbmQgc2V0IHRoZSBsb3dlc3QgeWVhciB0byB0aGUgbWluIHllYXIuXG4gICAgICAgICAgICAgICAgaWYgKCBtaW5ZZWFyID4gbG93ZXN0WWVhciApIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGVzdFllYXIgKz0gbWluWWVhciAtIGxvd2VzdFllYXJcbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0WWVhciA9IG1pblllYXJcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbWF4IHllYXIgaXMgbGVzcyB0aGFuIHRoZSBoaWdoZXN0IHllYXIsIGRlY3JlYXNlIHRoZSBsb3dlc3QgeWVhclxuICAgICAgICAgICAgICAgIC8vIGJ5IHRoZSBsb3dlciBvZiB0aGUgdHdvOiBhdmFpbGFibGUgYW5kIG5lZWRlZCB5ZWFycy4gVGhlbiBzZXQgdGhlXG4gICAgICAgICAgICAgICAgLy8gaGlnaGVzdCB5ZWFyIHRvIHRoZSBtYXggeWVhci5cbiAgICAgICAgICAgICAgICBpZiAoIG1heFllYXIgPCBoaWdoZXN0WWVhciApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYXZhaWxhYmxlWWVhcnMgPSBsb3dlc3RZZWFyIC0gbWluWWVhcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRlZFllYXJzID0gaGlnaGVzdFllYXIgLSBtYXhZZWFyXG5cbiAgICAgICAgICAgICAgICAgICAgbG93ZXN0WWVhciAtPSBhdmFpbGFibGVZZWFycyA+IG5lZWRlZFllYXJzID8gbmVlZGVkWWVhcnMgOiBhdmFpbGFibGVZZWFyc1xuICAgICAgICAgICAgICAgICAgICBoaWdoZXN0WWVhciA9IG1heFllYXJcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIHNldHRpbmdzLnNlbGVjdFllYXJzICAmJiBvdmVycmlkZSA9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgXy5ncm91cCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBsb3dlc3RZZWFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogaGlnaGVzdFllYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAnb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBmdW5jdGlvbiggbG9vcGVkWWVhciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGxvb3BlZCB5ZWFyIGFuZCBubyBjbGFzc2VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcGVkWWVhciwgMCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZSBhbmQgc2VsZWN0ZWQgaW5kZXguXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsdWU9JyArIGxvb3BlZFllYXIgKyAoIGZvY3VzZWRZZWFyID09IGxvb3BlZFllYXIgPyAnIHNlbGVjdGVkJyA6ICcnIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3Muc2VsZWN0WWVhciArICcgYnJvd3Nlci1kZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICggaXNPcGVuID8gJycgOiAnZGlzYWJsZWQnICkgKyAnICcgKyBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZScgfSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlPVwiJyArIHNldHRpbmdzLmxhYmVsWWVhclNlbGVjdCArICdcIidcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcbiAgICAgICAgICAgIGlmIChvdmVycmlkZSA9PSBcInJhd1wiKVxuICAgICAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdkaXYnLCBmb2N1c2VkWWVhciApXG5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBqdXN0IHJldHVybiB0aGUgeWVhciBmb2N1c2VkXG4gICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2JywgZm9jdXNlZFllYXIsIHNldHRpbmdzLmtsYXNzLnllYXIgKVxuICAgICAgICB9IC8vY3JlYXRlWWVhckxhYmVsXG5cblxuICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICBjcmVhdGVEYXlMYWJlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE9iamVjdCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2Jywgc2VsZWN0ZWRPYmplY3QuZGF0ZSlcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBfLm5vZGUoICdkaXYnLCBub3dPYmplY3QuZGF0ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgY3JlYXRlV2Vla2RheUxhYmVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZGlzcGxheV9kYXk7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZE9iamVjdCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIGRpc3BsYXlfZGF5ID0gc2VsZWN0ZWRPYmplY3QuZGF5O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRpc3BsYXlfZGF5ID0gbm93T2JqZWN0LmRheTtcbiAgICAgICAgICAgIHZhciB3ZWVrZGF5ID0gc2V0dGluZ3Mud2Vla2RheXNGdWxsWyBkaXNwbGF5X2RheSBdXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheVxuICAgICAgICB9XG5cblxuICAgIC8vIENyZWF0ZSBhbmQgcmV0dXJuIHRoZSBlbnRpcmUgY2FsZW5kYXIuXG5yZXR1cm4gXy5ub2RlKFxuICAgICAgICAvLyBEYXRlIHByZXNlbnRhdGlvbiBWaWV3XG4gICAgICAgICdkaXYnLFxuICAgICAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVdlZWtkYXlMYWJlbCgpLFxuICAgICAgICAgICAgICAgIFwicGlja2VyX193ZWVrZGF5LWRpc3BsYXlcIlxuICAgICAgICAgICAgKStcbiAgICAgICAgICAgIF8ubm9kZShcbiAgICAgICAgICAgICAgICAvLyBEaXYgZm9yIHNob3J0IE1vbnRoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgY3JlYXRlTW9udGhMYWJlbChcInNob3J0X21vbnRoc1wiKSxcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy5tb250aF9kaXNwbGF5XG4gICAgICAgICAgICApK1xuICAgICAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgICAgIC8vIERpdiBmb3IgRGF5XG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgY3JlYXRlRGF5TGFiZWwoKSAsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3MuZGF5X2Rpc3BsYXlcbiAgICAgICAgICAgICkrXG4gICAgICAgICAgICBfLm5vZGUoXG4gICAgICAgICAgICAgICAgLy8gRGl2IGZvciBZZWFyXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgY3JlYXRlWWVhckxhYmVsKFwicmF3XCIpICxcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy55ZWFyX2Rpc3BsYXlcbiAgICAgICAgICAgICksXG4gICAgICAgIHNldHRpbmdzLmtsYXNzLmRhdGVfZGlzcGxheVxuICAgICkrXG4gICAgLy8gQ2FsZW5kYXIgY29udGFpbmVyXG4gICAgXy5ub2RlKCdkaXYnLFxuICAgICAgICBfLm5vZGUoJ2RpdicsXG4gICAgICAgICggc2V0dGluZ3Muc2VsZWN0WWVhcnMgPyAgY3JlYXRlTW9udGhMYWJlbCgpICsgY3JlYXRlWWVhckxhYmVsKCkgOiBjcmVhdGVNb250aExhYmVsKCkgKyBjcmVhdGVZZWFyTGFiZWwoKSApICtcbiAgICAgICAgY3JlYXRlTW9udGhOYXYoKSArIGNyZWF0ZU1vbnRoTmF2KCAxICksXG4gICAgICAgIHNldHRpbmdzLmtsYXNzLmhlYWRlclxuICAgICkgKyBfLm5vZGUoXG4gICAgICAgICd0YWJsZScsXG4gICAgICAgIHRhYmxlSGVhZCArXG4gICAgICAgIF8ubm9kZShcbiAgICAgICAgICAgICd0Ym9keScsXG4gICAgICAgICAgICBfLmdyb3VwKHtcbiAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgbWF4OiBXRUVLU19JTl9DQUxFTkRBUiAtIDEsXG4gICAgICAgICAgICAgICAgaTogMSxcbiAgICAgICAgICAgICAgICBub2RlOiAndHInLFxuICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCByb3dDb3VudGVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IGFuZCB0aGUgbW9udGggc3RhcnRzIG9uIFN1bmRheSwgc2hpZnQgdGhlIGRhdGUgYmFjayBhIHdlZWsuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaGlmdERhdGVCeSA9IHNldHRpbmdzLmZpcnN0RGF5ICYmIGNhbGVuZGFyLmNyZWF0ZShbIHZpZXdzZXRPYmplY3QueWVhciwgdmlld3NldE9iamVjdC5tb250aCwgMSBdKS5kYXkgPT09IDAgPyAtNyA6IDBcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5ncm91cCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBEQVlTX0lOX1dFRUsgKiByb3dDb3VudGVyIC0gdmlld3NldE9iamVjdC5kYXkgKyBzaGlmdERhdGVCeSArIDEsIC8vIEFkZCAxIGZvciB3ZWVrZGF5IDBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1pbiArIERBWVNfSU5fV0VFSyAtIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogJ3RkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBmdW5jdGlvbiggdGFyZ2V0RGF0ZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSB0aW1lIGRhdGUgZnJvbSBhIHJlbGF0aXZlIGRhdGUgdG8gYSB0YXJnZXQgZGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZSA9IGNhbGVuZGFyLmNyZWF0ZShbIHZpZXdzZXRPYmplY3QueWVhciwgdmlld3NldE9iamVjdC5tb250aCwgdGFyZ2V0RGF0ZSArICggc2V0dGluZ3MuZmlyc3REYXkgPyAxIDogMCApIF0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBzZWxlY3RlZE9iamVjdCAmJiBzZWxlY3RlZE9iamVjdC5waWNrID09IHRhcmdldERhdGUucGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGlnaGxpZ2h0ZWQgPSBoaWdobGlnaHRlZE9iamVjdCAmJiBoaWdobGlnaHRlZE9iamVjdC5waWNrID09IHRhcmdldERhdGUucGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQgPSBkaXNhYmxlZENvbGxlY3Rpb24gJiYgY2FsZW5kYXIuZGlzYWJsZWQoIHRhcmdldERhdGUgKSB8fCB0YXJnZXREYXRlLnBpY2sgPCBtaW5MaW1pdE9iamVjdC5waWNrIHx8IHRhcmdldERhdGUucGljayA+IG1heExpbWl0T2JqZWN0LnBpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWREYXRlID0gXy50cmlnZ2VyKCBjYWxlbmRhci5mb3JtYXRzLnRvU3RyaW5nLCBjYWxlbmRhciwgWyBzZXR0aW5ncy5mb3JtYXQsIHRhcmdldERhdGUgXSApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ubm9kZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlLmRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCBrbGFzc2VzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYGluZm9jdXNgIG9yIGBvdXRmb2N1c2AgY2xhc3NlcyBiYXNlZCBvbiBtb250aCBpbiB2aWV3LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHZpZXdzZXRPYmplY3QubW9udGggPT0gdGFyZ2V0RGF0ZS5tb250aCA/IHNldHRpbmdzLmtsYXNzLmluZm9jdXMgOiBzZXR0aW5ncy5rbGFzcy5vdXRmb2N1cyApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgdG9kYXlgIGNsYXNzIGlmIG5lZWRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub3dPYmplY3QucGljayA9PSB0YXJnZXREYXRlLnBpY2sgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHNldHRpbmdzLmtsYXNzLm5vdyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGBzZWxlY3RlZGAgY2xhc3MgaWYgc29tZXRoaW5nJ3Mgc2VsZWN0ZWQgYW5kIHRoZSB0aW1lIG1hdGNoZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNTZWxlY3RlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggc2V0dGluZ3Mua2xhc3Muc2VsZWN0ZWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgaGlnaGxpZ2h0ZWRgIGNsYXNzIGlmIHNvbWV0aGluZydzIGhpZ2hsaWdodGVkIGFuZCB0aGUgdGltZSBtYXRjaGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGlzSGlnaGxpZ2h0ZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHNldHRpbmdzLmtsYXNzLmhpZ2hsaWdodGVkIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYGRpc2FibGVkYCBjbGFzcyBpZiBzb21ldGhpbmcncyBkaXNhYmxlZCBhbmQgdGhlIG9iamVjdCBtYXRjaGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGlzRGlzYWJsZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHNldHRpbmdzLmtsYXNzLmRpc2FibGVkIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrbGFzc2VzLmpvaW4oICcgJyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoWyBzZXR0aW5ncy5rbGFzcy5kYXkgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcGljaz0nICsgdGFyZ2V0RGF0ZS5waWNrICsgJyAnICsgXy5hcmlhQXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICdncmlkY2VsbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmb3JtYXR0ZWREYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCAmJiBjYWxlbmRhci4kbm9kZS52YWwoKSA9PT0gZm9ybWF0dGVkRGF0ZSA/IHRydWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVkZXNjZW5kYW50OiBpc0hpZ2hsaWdodGVkID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkID8gdHJ1ZSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5hcmlhQXR0cih7IHJvbGU6ICdwcmVzZW50YXRpb24nIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gLy9lbmRyZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdIC8vZW5kcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKSxcbiAgICAgICAgc2V0dGluZ3Mua2xhc3MudGFibGUsXG4gICAgICAgICdpZD1cIicgKyBjYWxlbmRhci4kbm9kZVswXS5pZCArICdfdGFibGUnICsgJ1wiICcgKyBfLmFyaWFBdHRyKHtcbiAgICAgICAgICAgIHJvbGU6ICdncmlkJyxcbiAgICAgICAgICAgIGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCxcbiAgICAgICAgICAgIHJlYWRvbmx5OiB0cnVlXG4gICAgICAgIH0pXG4gICAgKVxuICAgICwgc2V0dGluZ3Mua2xhc3MuY2FsZW5kYXJfY29udGFpbmVyKSAvLyBlbmQgY2FsZW5kYXJcblxuICAgICArXG5cbiAgICAvLyAqIEZvciBGaXJlZm94IGZvcm1zIHRvIHN1Ym1pdCwgbWFrZSBzdXJlIHRvIHNldCB0aGUgYnV0dG9uc+KAmSBgdHlwZWAgYXR0cmlidXRlcyBhcyDigJxidXR0b27igJ0uXG4gICAgXy5ub2RlKFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgXy5ub2RlKCAnYnV0dG9uJywgc2V0dGluZ3MudG9kYXksIFwiYnRuLWZsYXQgcGlja2VyX190b2RheVwiLFxuICAgICAgICAgICAgJ3R5cGU9YnV0dG9uIGRhdGEtcGljaz0nICsgbm93T2JqZWN0LnBpY2sgK1xuICAgICAgICAgICAgKCBpc09wZW4gJiYgIWNhbGVuZGFyLmRpc2FibGVkKG5vd09iamVjdCkgPyAnJyA6ICcgZGlzYWJsZWQnICkgKyAnICcgK1xuICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCB9KSApICtcbiAgICAgICAgXy5ub2RlKCAnYnV0dG9uJywgc2V0dGluZ3MuY2xlYXIsIFwiYnRuLWZsYXQgcGlja2VyX19jbGVhclwiLFxuICAgICAgICAgICAgJ3R5cGU9YnV0dG9uIGRhdGEtY2xlYXI9MScgK1xuICAgICAgICAgICAgKCBpc09wZW4gPyAnJyA6ICcgZGlzYWJsZWQnICkgKyAnICcgK1xuICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCB9KSApICtcbiAgICAgICAgXy5ub2RlKCdidXR0b24nLCBzZXR0aW5ncy5jbG9zZSwgXCJidG4tZmxhdCBwaWNrZXJfX2Nsb3NlXCIsXG4gICAgICAgICAgICAndHlwZT1idXR0b24gZGF0YS1jbG9zZT10cnVlICcgK1xuICAgICAgICAgICAgKCBpc09wZW4gPyAnJyA6ICcgZGlzYWJsZWQnICkgKyAnICcgK1xuICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCB9KSApLFxuICAgICAgICBzZXR0aW5ncy5rbGFzcy5mb290ZXJcbiAgICApIC8vZW5kcmV0dXJuXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUubm9kZXNcblxuXG5cblxuLyoqXG4gKiBUaGUgZGF0ZSBwaWNrZXIgZGVmYXVsdHMuXG4gKi9cbkRhdGVQaWNrZXIuZGVmYXVsdHMgPSAoZnVuY3Rpb24oIHByZWZpeCApIHtcblxuICAgIHJldHVybiB7XG5cbiAgICAgICAgLy8gVGhlIHRpdGxlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIG1vbnRoIG5hdiBidXR0b25zXG4gICAgICAgIGxhYmVsTW9udGhOZXh0OiAnTmV4dCBtb250aCcsXG4gICAgICAgIGxhYmVsTW9udGhQcmV2OiAnUHJldmlvdXMgbW9udGgnLFxuXG4gICAgICAgIC8vIFRoZSB0aXRsZSBsYWJlbCB0byB1c2UgZm9yIHRoZSBkcm9wZG93biBzZWxlY3RvcnNcbiAgICAgICAgbGFiZWxNb250aFNlbGVjdDogJ1NlbGVjdCBhIG1vbnRoJyxcbiAgICAgICAgbGFiZWxZZWFyU2VsZWN0OiAnU2VsZWN0IGEgeWVhcicsXG5cbiAgICAgICAgLy8gTW9udGhzIGFuZCB3ZWVrZGF5c1xuICAgICAgICBtb250aHNGdWxsOiBbICdKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJyBdLFxuICAgICAgICBtb250aHNTaG9ydDogWyAnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnIF0sXG4gICAgICAgIHdlZWtkYXlzRnVsbDogWyAnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknIF0sXG4gICAgICAgIHdlZWtkYXlzU2hvcnQ6IFsgJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcgXSxcblxuICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICB3ZWVrZGF5c0xldHRlcjogWyAnUycsICdNJywgJ1QnLCAnVycsICdUJywgJ0YnLCAnUycgXSxcblxuICAgICAgICAvLyBUb2RheSBhbmQgY2xlYXJcbiAgICAgICAgdG9kYXk6ICdUb2RheScsXG4gICAgICAgIGNsZWFyOiAnQ2xlYXInLFxuICAgICAgICBjbG9zZTogJ0Nsb3NlJyxcblxuICAgICAgICAvLyBUaGUgZm9ybWF0IHRvIHNob3cgb24gdGhlIGBpbnB1dGAgZWxlbWVudFxuICAgICAgICBmb3JtYXQ6ICdkIG1tbW0sIHl5eXknLFxuXG4gICAgICAgIC8vIENsYXNzZXNcbiAgICAgICAga2xhc3M6IHtcblxuICAgICAgICAgICAgdGFibGU6IHByZWZpeCArICd0YWJsZScsXG5cbiAgICAgICAgICAgIGhlYWRlcjogcHJlZml4ICsgJ2hlYWRlcicsXG5cblxuICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgQWRkZWQga2xhc3Nlc1xuICAgICAgICAgICAgZGF0ZV9kaXNwbGF5OiBwcmVmaXggKyAnZGF0ZS1kaXNwbGF5JyxcbiAgICAgICAgICAgIGRheV9kaXNwbGF5OiBwcmVmaXggKyAnZGF5LWRpc3BsYXknLFxuICAgICAgICAgICAgbW9udGhfZGlzcGxheTogcHJlZml4ICsgJ21vbnRoLWRpc3BsYXknLFxuICAgICAgICAgICAgeWVhcl9kaXNwbGF5OiBwcmVmaXggKyAneWVhci1kaXNwbGF5JyxcbiAgICAgICAgICAgIGNhbGVuZGFyX2NvbnRhaW5lcjogcHJlZml4ICsgJ2NhbGVuZGFyLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAvLyBlbmRcblxuXG5cbiAgICAgICAgICAgIG5hdlByZXY6IHByZWZpeCArICduYXYtLXByZXYnLFxuICAgICAgICAgICAgbmF2TmV4dDogcHJlZml4ICsgJ25hdi0tbmV4dCcsXG4gICAgICAgICAgICBuYXZEaXNhYmxlZDogcHJlZml4ICsgJ25hdi0tZGlzYWJsZWQnLFxuXG4gICAgICAgICAgICBtb250aDogcHJlZml4ICsgJ21vbnRoJyxcbiAgICAgICAgICAgIHllYXI6IHByZWZpeCArICd5ZWFyJyxcblxuICAgICAgICAgICAgc2VsZWN0TW9udGg6IHByZWZpeCArICdzZWxlY3QtLW1vbnRoJyxcbiAgICAgICAgICAgIHNlbGVjdFllYXI6IHByZWZpeCArICdzZWxlY3QtLXllYXInLFxuXG4gICAgICAgICAgICB3ZWVrZGF5czogcHJlZml4ICsgJ3dlZWtkYXknLFxuXG4gICAgICAgICAgICBkYXk6IHByZWZpeCArICdkYXknLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHByZWZpeCArICdkYXktLWRpc2FibGVkJyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBwcmVmaXggKyAnZGF5LS1zZWxlY3RlZCcsXG4gICAgICAgICAgICBoaWdobGlnaHRlZDogcHJlZml4ICsgJ2RheS0taGlnaGxpZ2h0ZWQnLFxuICAgICAgICAgICAgbm93OiBwcmVmaXggKyAnZGF5LS10b2RheScsXG4gICAgICAgICAgICBpbmZvY3VzOiBwcmVmaXggKyAnZGF5LS1pbmZvY3VzJyxcbiAgICAgICAgICAgIG91dGZvY3VzOiBwcmVmaXggKyAnZGF5LS1vdXRmb2N1cycsXG5cbiAgICAgICAgICAgIGZvb3RlcjogcHJlZml4ICsgJ2Zvb3RlcicsXG5cbiAgICAgICAgICAgIGJ1dHRvbkNsZWFyOiBwcmVmaXggKyAnYnV0dG9uLS1jbGVhcicsXG4gICAgICAgICAgICBidXR0b25Ub2RheTogcHJlZml4ICsgJ2J1dHRvbi0tdG9kYXknLFxuICAgICAgICAgICAgYnV0dG9uQ2xvc2U6IHByZWZpeCArICdidXR0b24tLWNsb3NlJ1xuICAgICAgICB9XG4gICAgfVxufSkoIFBpY2tlci5rbGFzc2VzKCkucGlja2VyICsgJ19fJyApXG5cblxuXG5cblxuLyoqXG4gKiBFeHRlbmQgdGhlIHBpY2tlciB0byBhZGQgdGhlIGRhdGUgcGlja2VyLlxuICovXG5QaWNrZXIuZXh0ZW5kKCAncGlja2FkYXRlJywgRGF0ZVBpY2tlciApXG5cblxufSkpO1xuXG5cbiIsIi8qIVxuICogcGlja2FkYXRlLmpzIHYzLjUuMCwgMjAxNC8wNC8xM1xuICogQnkgQW1zdWwsIGh0dHA6Ly9hbXN1bC5jYVxuICogSG9zdGVkIG9uIGh0dHA6Ly9hbXN1bC5naXRodWIuaW8vcGlja2FkYXRlLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVRcbiAqL1xuXG4oZnVuY3Rpb24gKCBmYWN0b3J5ICkge1xuXG4gICAgLy8gQU1ELlxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKVxuICAgICAgICBkZWZpbmUoICdwaWNrZXInLCBbJ2pxdWVyeSddLCBmYWN0b3J5IClcblxuICAgIC8vIE5vZGUuanMvYnJvd3NlcmlmeS5cbiAgICBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgKVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJ2pxdWVyeScpIClcblxuICAgIC8vIEJyb3dzZXIgZ2xvYmFscy5cbiAgICBlbHNlIHRoaXMuUGlja2VyID0gZmFjdG9yeSggalF1ZXJ5IClcblxufShmdW5jdGlvbiggJCApIHtcblxudmFyICR3aW5kb3cgPSAkKCB3aW5kb3cgKVxudmFyICRkb2N1bWVudCA9ICQoIGRvY3VtZW50IClcbnZhciAkaHRtbCA9ICQoIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCApXG5cblxuLyoqXG4gKiBUaGUgcGlja2VyIGNvbnN0cnVjdG9yIHRoYXQgY3JlYXRlcyBhIGJsYW5rIHBpY2tlci5cbiAqL1xuZnVuY3Rpb24gUGlja2VyQ29uc3RydWN0b3IoIEVMRU1FTlQsIE5BTUUsIENPTVBPTkVOVCwgT1BUSU9OUyApIHtcblxuICAgIC8vIElmIHRoZXJl4oCZcyBubyBlbGVtZW50LCByZXR1cm4gdGhlIHBpY2tlciBjb25zdHJ1Y3Rvci5cbiAgICBpZiAoICFFTEVNRU5UICkgcmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yXG5cblxuICAgIHZhclxuICAgICAgICBJU19ERUZBVUxUX1RIRU1FID0gZmFsc2UsXG5cblxuICAgICAgICAvLyBUaGUgc3RhdGUgb2YgdGhlIHBpY2tlci5cbiAgICAgICAgU1RBVEUgPSB7XG4gICAgICAgICAgICBpZDogRUxFTUVOVC5pZCB8fCAnUCcgKyBNYXRoLmFicyggfn4oTWF0aC5yYW5kb20oKSAqIG5ldyBEYXRlKCkpIClcbiAgICAgICAgfSxcblxuXG4gICAgICAgIC8vIE1lcmdlIHRoZSBkZWZhdWx0cyBhbmQgb3B0aW9ucyBwYXNzZWQuXG4gICAgICAgIFNFVFRJTkdTID0gQ09NUE9ORU5UID8gJC5leHRlbmQoIHRydWUsIHt9LCBDT01QT05FTlQuZGVmYXVsdHMsIE9QVElPTlMgKSA6IE9QVElPTlMgfHwge30sXG5cblxuICAgICAgICAvLyBNZXJnZSB0aGUgZGVmYXVsdCBjbGFzc2VzIHdpdGggdGhlIHNldHRpbmdzIGNsYXNzZXMuXG4gICAgICAgIENMQVNTRVMgPSAkLmV4dGVuZCgge30sIFBpY2tlckNvbnN0cnVjdG9yLmtsYXNzZXMoKSwgU0VUVElOR1Mua2xhc3MgKSxcblxuXG4gICAgICAgIC8vIFRoZSBlbGVtZW50IG5vZGUgd3JhcHBlciBpbnRvIGEgalF1ZXJ5IG9iamVjdC5cbiAgICAgICAgJEVMRU1FTlQgPSAkKCBFTEVNRU5UICksXG5cblxuICAgICAgICAvLyBQc2V1ZG8gcGlja2VyIGNvbnN0cnVjdG9yLlxuICAgICAgICBQaWNrZXJJbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQoKVxuICAgICAgICB9LFxuXG5cbiAgICAgICAgLy8gVGhlIHBpY2tlciBwcm90b3R5cGUuXG4gICAgICAgIFAgPSBQaWNrZXJJbnN0YW5jZS5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBQaWNrZXJJbnN0YW5jZSxcblxuICAgICAgICAgICAgJG5vZGU6ICRFTEVNRU5ULFxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSW5pdGlhbGl6ZSBldmVyeXRoaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IHN0YXJ0ZWQsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgaWYgKCBTVEFURSAmJiBTVEFURS5zdGFydCApIHJldHVybiBQXG5cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcGlja2VyIHN0YXRlcy5cbiAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzID0ge31cbiAgICAgICAgICAgICAgICBTVEFURS5zdGFydCA9IHRydWVcbiAgICAgICAgICAgICAgICBTVEFURS5vcGVuID0gZmFsc2VcbiAgICAgICAgICAgICAgICBTVEFURS50eXBlID0gRUxFTUVOVC50eXBlXG5cblxuICAgICAgICAgICAgICAgIC8vIENvbmZpcm0gZm9jdXMgc3RhdGUsIGNvbnZlcnQgaW50byB0ZXh0IGlucHV0IHRvIHJlbW92ZSBVQSBzdHlsaW5ncyxcbiAgICAgICAgICAgICAgICAvLyBhbmQgc2V0IGFzIHJlYWRvbmx5IHRvIHByZXZlbnQga2V5Ym9hcmQgcG9wdXAuXG4gICAgICAgICAgICAgICAgRUxFTUVOVC5hdXRvZm9jdXMgPSBFTEVNRU5UID09IGdldEFjdGl2ZUVsZW1lbnQoKVxuICAgICAgICAgICAgICAgIEVMRU1FTlQucmVhZE9ubHkgPSAhU0VUVElOR1MuZWRpdGFibGVcbiAgICAgICAgICAgICAgICBFTEVNRU5ULmlkID0gRUxFTUVOVC5pZCB8fCBTVEFURS5pZFxuICAgICAgICAgICAgICAgIGlmICggRUxFTUVOVC50eXBlICE9ICd0ZXh0JyApIHtcbiAgICAgICAgICAgICAgICAgICAgRUxFTUVOVC50eXBlID0gJ3RleHQnXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGlja2VyIGNvbXBvbmVudCB3aXRoIHRoZSBzZXR0aW5ncy5cbiAgICAgICAgICAgICAgICBQLmNvbXBvbmVudCA9IG5ldyBDT01QT05FTlQoUCwgU0VUVElOR1MpXG5cblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcGlja2VyIHJvb3Qgd2l0aCBhIGhvbGRlciBhbmQgdGhlbiBwcmVwYXJlIGl0LlxuICAgICAgICAgICAgICAgIFAuJHJvb3QgPSAkKCBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoJ2RpdicsIGNyZWF0ZVdyYXBwZWRDb21wb25lbnQoKSwgQ0xBU1NFUy5waWNrZXIsICdpZD1cIicgKyBFTEVNRU5ULmlkICsgJ19yb290XCIgdGFiaW5kZXg9XCIwXCInKSApXG4gICAgICAgICAgICAgICAgcHJlcGFyZUVsZW1lbnRSb290KClcblxuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlcmXigJlzIGEgZm9ybWF0IGZvciB0aGUgaGlkZGVuIGlucHV0IGVsZW1lbnQsIGNyZWF0ZSB0aGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBpZiAoIFNFVFRJTkdTLmZvcm1hdFN1Ym1pdCApIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZUVsZW1lbnRIaWRkZW4oKVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBwcmVwYXJlRWxlbWVudCgpXG5cblxuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgcm9vdCBhcyBzcGVjaWZpZWQgaW4gdGhlIHNldHRpbmdzLlxuICAgICAgICAgICAgICAgIGlmICggU0VUVElOR1MuY29udGFpbmVyICkgJCggU0VUVElOR1MuY29udGFpbmVyICkuYXBwZW5kKCBQLiRyb290IClcbiAgICAgICAgICAgICAgICBlbHNlICRFTEVNRU5ULmFmdGVyKCBQLiRyb290IClcblxuXG4gICAgICAgICAgICAgICAgLy8gQmluZCB0aGUgZGVmYXVsdCBjb21wb25lbnQgYW5kIHNldHRpbmdzIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBQLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFAuY29tcG9uZW50Lm9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogUC5jb21wb25lbnQub25SZW5kZXIsXG4gICAgICAgICAgICAgICAgICAgIHN0b3A6IFAuY29tcG9uZW50Lm9uU3RvcCxcbiAgICAgICAgICAgICAgICAgICAgb3BlbjogUC5jb21wb25lbnQub25PcGVuLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZTogUC5jb21wb25lbnQub25DbG9zZSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBQLmNvbXBvbmVudC5vblNldFxuICAgICAgICAgICAgICAgIH0pLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFNFVFRJTkdTLm9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogU0VUVElOR1Mub25SZW5kZXIsXG4gICAgICAgICAgICAgICAgICAgIHN0b3A6IFNFVFRJTkdTLm9uU3RvcCxcbiAgICAgICAgICAgICAgICAgICAgb3BlbjogU0VUVElOR1Mub25PcGVuLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZTogU0VUVElOR1Mub25DbG9zZSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBTRVRUSU5HUy5vblNldFxuICAgICAgICAgICAgICAgIH0pXG5cblxuICAgICAgICAgICAgICAgIC8vIE9uY2Ugd2XigJlyZSBhbGwgc2V0LCBjaGVjayB0aGUgdGhlbWUgaW4gdXNlLlxuICAgICAgICAgICAgICAgIElTX0RFRkFVTFRfVEhFTUUgPSBpc1VzaW5nRGVmYXVsdFRoZW1lKCBQLiRyb290LmNoaWxkcmVuKClbIDAgXSApXG5cblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGhhcyBhdXRvZm9jdXMsIG9wZW4gdGhlIHBpY2tlci5cbiAgICAgICAgICAgICAgICBpZiAoIEVMRU1FTlQuYXV0b2ZvY3VzICkge1xuICAgICAgICAgICAgICAgICAgICBQLm9wZW4oKVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciBxdWV1ZWQgdGhlIOKAnHN0YXJ04oCdIGFuZCDigJxyZW5kZXLigJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdzdGFydCcgKS50cmlnZ2VyKCAncmVuZGVyJyApXG4gICAgICAgICAgICB9LCAvL3N0YXJ0XG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZW5kZXIgYSBuZXcgcGlja2VyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oIGVudGlyZUNvbXBvbmVudCApIHtcblxuICAgICAgICAgICAgICAgIC8vIEluc2VydCBhIG5ldyBjb21wb25lbnQgaG9sZGVyIGluIHRoZSByb290IG9yIGJveC5cbiAgICAgICAgICAgICAgICBpZiAoIGVudGlyZUNvbXBvbmVudCApIFAuJHJvb3QuaHRtbCggY3JlYXRlV3JhcHBlZENvbXBvbmVudCgpIClcbiAgICAgICAgICAgICAgICBlbHNlIFAuJHJvb3QuZmluZCggJy4nICsgQ0xBU1NFUy5ib3ggKS5odG1sKCBQLmNvbXBvbmVudC5ub2RlcyggU1RBVEUub3BlbiApIClcblxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHF1ZXVlZCDigJxyZW5kZXLigJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdyZW5kZXInIClcbiAgICAgICAgICAgIH0sIC8vcmVuZGVyXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZXN0cm95IGV2ZXJ5dGhpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgYWxyZWFkeSBzdG9wcGVkLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICAgIGlmICggIVNUQVRFLnN0YXJ0ICkgcmV0dXJuIFBcblxuICAgICAgICAgICAgICAgIC8vIFRoZW4gY2xvc2UgdGhlIHBpY2tlci5cbiAgICAgICAgICAgICAgICBQLmNsb3NlKClcblxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaGlkZGVuIGZpZWxkLlxuICAgICAgICAgICAgICAgIGlmICggUC5faGlkZGVuICkge1xuICAgICAgICAgICAgICAgICAgICBQLl9oaWRkZW4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggUC5faGlkZGVuIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHJvb3QuXG4gICAgICAgICAgICAgICAgUC4kcm9vdC5yZW1vdmUoKVxuXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBpbnB1dCBjbGFzcywgcmVtb3ZlIHRoZSBzdG9yZWQgZGF0YSwgYW5kIHVuYmluZFxuICAgICAgICAgICAgICAgIC8vIHRoZSBldmVudHMgKGFmdGVyIGEgdGljayBmb3IgSUUgLSBzZWUgYFAuY2xvc2VgKS5cbiAgICAgICAgICAgICAgICAkRUxFTUVOVC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5pbnB1dCApLnJlbW92ZURhdGEoIE5BTUUgKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkRUxFTUVOVC5vZmYoICcuJyArIFNUQVRFLmlkIClcbiAgICAgICAgICAgICAgICB9LCAwKVxuXG4gICAgICAgICAgICAgICAgLy8gUmVzdG9yZSB0aGUgZWxlbWVudCBzdGF0ZVxuICAgICAgICAgICAgICAgIEVMRU1FTlQudHlwZSA9IFNUQVRFLnR5cGVcbiAgICAgICAgICAgICAgICBFTEVNRU5ULnJlYWRPbmx5ID0gZmFsc2VcblxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHF1ZXVlZCDigJxzdG9w4oCdIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBQLnRyaWdnZXIoICdzdG9wJyApXG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgcGlja2VyIHN0YXRlcy5cbiAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzID0ge31cbiAgICAgICAgICAgICAgICBTVEFURS5zdGFydCA9IGZhbHNlXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUFxuICAgICAgICAgICAgfSwgLy9zdG9wXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBPcGVuIHVwIHRoZSBwaWNrZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb3BlbjogZnVuY3Rpb24oIGRvbnRHaXZlRm9jdXMgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgYWxyZWFkeSBvcGVuLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICAgIGlmICggU1RBVEUub3BlbiApIHJldHVybiBQXG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIOKAnGFjdGl2ZeKAnSBjbGFzcy5cbiAgICAgICAgICAgICAgICAkRUxFTUVOVC5hZGRDbGFzcyggQ0xBU1NFUy5hY3RpdmUgKVxuICAgICAgICAgICAgICAgIGFyaWEoIEVMRU1FTlQsICdleHBhbmRlZCcsIHRydWUgKVxuXG4gICAgICAgICAgICAgICAgLy8gKiBBIEZpcmVmb3ggYnVnLCB3aGVuIGBodG1sYCBoYXMgYG92ZXJmbG93OmhpZGRlbmAsIHJlc3VsdHMgaW5cbiAgICAgICAgICAgICAgICAvLyAgIGtpbGxpbmcgdHJhbnNpdGlvbnMgOiguIFNvIGFkZCB0aGUg4oCcb3BlbmVk4oCdIHN0YXRlIG9uIHRoZSBuZXh0IHRpY2suXG4gICAgICAgICAgICAgICAgLy8gICBCdWc6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTYyNTI4OVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg4oCcb3BlbmVk4oCdIGNsYXNzIHRvIHRoZSBwaWNrZXIgcm9vdC5cbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5hZGRDbGFzcyggQ0xBU1NFUy5vcGVuZWQgKVxuICAgICAgICAgICAgICAgICAgICBhcmlhKCBQLiRyb290WzBdLCAnaGlkZGVuJywgZmFsc2UgKVxuXG4gICAgICAgICAgICAgICAgfSwgMCApXG5cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIHRvIGdpdmUgZm9jdXMsIGJpbmQgdGhlIGVsZW1lbnQgYW5kIGRvYyBldmVudHMuXG4gICAgICAgICAgICAgICAgaWYgKCBkb250R2l2ZUZvY3VzICE9PSBmYWxzZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgaXQgYXMgb3Blbi5cbiAgICAgICAgICAgICAgICAgICAgU1RBVEUub3BlbiA9IHRydWVcblxuICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRoZSBwYWdlIGZyb20gc2Nyb2xsaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIElTX0RFRkFVTFRfVEhFTUUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaHRtbC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MoICdvdmVyZmxvdycsICdoaWRkZW4nICkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAncGFkZGluZy1yaWdodCcsICcrPScgKyBnZXRTY3JvbGxiYXJXaWR0aCgpIClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgZm9jdXMgdG8gdGhlIHJvb3QgZWxlbWVudOKAmXMgalF1ZXJ5IG9iamVjdC5cbiAgICAgICAgICAgICAgICAgICAgLy8gKiBXb3JrYXJvdW5kIGZvciBpT1M4IHRvIGJyaW5nIHRoZSBwaWNrZXLigJlzIHJvb3QgaW50byB2aWV3LlxuICAgICAgICAgICAgICAgICAgICBQLiRyb290WzBdLmZvY3VzKClcblxuICAgICAgICAgICAgICAgICAgICAvLyBCaW5kIHRoZSBkb2N1bWVudCBldmVudHMuXG4gICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vbiggJ2NsaWNrLicgKyBTVEFURS5pZCArICcgZm9jdXNpbi4nICsgU1RBVEUuaWQsIGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IG9mIHRoZSBldmVudCBpcyBub3QgdGhlIGVsZW1lbnQsIGNsb3NlIHRoZSBwaWNrZXIgcGlja2VyLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gKiBEb27igJl0IHdvcnJ5IGFib3V0IGNsaWNrcyBvciBmb2N1c2lucyBvbiB0aGUgcm9vdCBiZWNhdXNlIHRob3NlIGRvbuKAmXQgYnViYmxlIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBBbHNvLCBmb3IgRmlyZWZveCwgYSBjbGljayBvbiBhbiBgb3B0aW9uYCBlbGVtZW50IGJ1YmJsZXMgdXAgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdG8gdGhlIGRvYy4gU28gbWFrZSBzdXJlIHRoZSB0YXJnZXQgd2Fzbid0IHRoZSBkb2MuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAqIEluIEZpcmVmb3ggc3RvcFByb3BhZ2F0aW9uKCkgZG9lc27igJl0IHByZXZlbnQgcmlnaHQtY2xpY2sgZXZlbnRzIGZyb20gYnViYmxpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHdoaWNoIGNhdXNlcyB0aGUgcGlja2VyIHRvIHVuZXhwZWN0ZWRseSBjbG9zZSB3aGVuIHJpZ2h0LWNsaWNraW5nIGl0LiBTbyBtYWtlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHN1cmUgdGhlIGV2ZW50IHdhc27igJl0IGEgcmlnaHQtY2xpY2suXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRhcmdldCAhPSBFTEVNRU5UICYmIHRhcmdldCAhPSBkb2N1bWVudCAmJiBldmVudC53aGljaCAhPSAzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCB3YXMgdGhlIGhvbGRlciB0aGF0IGNvdmVycyB0aGUgc2NyZWVuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlIGVsZW1lbnQgZm9jdXNlZCB0byBtYWludGFpbiB0YWJpbmRleC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLmNsb3NlKCB0YXJnZXQgPT09IFAuJHJvb3QuY2hpbGRyZW4oKVswXSApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSkub24oICdrZXlkb3duLicgKyBTVEFURS5pZCwgZnVuY3Rpb24oIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGtleWNvZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Y29kZSA9IGV2ZW50LmtleUNvZGUsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmFuc2xhdGUgdGhhdCB0byBhIHNlbGVjdGlvbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Y29kZVRvTW92ZSA9IFAuY29tcG9uZW50LmtleVsga2V5Y29kZSBdLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGV2ZW50LnRhcmdldFxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIGVzY2FwZSwgY2xvc2UgdGhlIHBpY2tlciBhbmQgZ2l2ZSBmb2N1cy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgga2V5Y29kZSA9PSAyNyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLmNsb3NlKCB0cnVlIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIGtleSBtb3ZlbWVudCBvciDigJxlbnRlcuKAnSBrZXlwcmVzcyBvbiB0aGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0YXJnZXQgPT0gUC4kcm9vdFswXSAmJiAoIGtleWNvZGVUb01vdmUgfHwga2V5Y29kZSA9PSAxMyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24gdG8gc3RvcCBwYWdlIG1vdmVtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGtleSBtb3ZlbWVudCBhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBrZXljb2RlVG9Nb3ZlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIFAuY29tcG9uZW50LmtleS5nbywgUCwgWyBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGtleWNvZGVUb01vdmUgKSBdIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiDigJxlbnRlcuKAnSwgaWYgdGhlIGhpZ2hsaWdodGVkIGl0ZW0gaXNu4oCZdCBkaXNhYmxlZCwgc2V0IHRoZSB2YWx1ZSBhbmQgY2xvc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoICFQLiRyb290LmZpbmQoICcuJyArIENMQVNTRVMuaGlnaGxpZ2h0ZWQgKS5oYXNDbGFzcyggQ0xBU1NFUy5kaXNhYmxlZCApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLnNldCggJ3NlbGVjdCcsIFAuY29tcG9uZW50Lml0ZW0uaGlnaGxpZ2h0ICkuY2xvc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IGlzIHdpdGhpbiB0aGUgcm9vdCBhbmQg4oCcZW50ZXLigJ0gaXMgcHJlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uIGFuZCB0cmlnZ2VyIGEgY2xpY2sgb24gdGhlIHRhcmdldCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoICQuY29udGFpbnMoIFAuJHJvb3RbMF0sIHRhcmdldCApICYmIGtleWNvZGUgPT0gMTMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGljaygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgcXVldWVkIOKAnG9wZW7igJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdvcGVuJyApXG4gICAgICAgICAgICB9LCAvL29wZW5cblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENsb3NlIHRoZSBwaWNrZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uKCBnaXZlRm9jdXMgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIGdpdmUgZm9jdXMsIGRvIGl0IGJlZm9yZSBjaGFuZ2luZyBzdGF0ZXMuXG4gICAgICAgICAgICAgICAgaWYgKCBnaXZlRm9jdXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uLi5haCB5ZXMhIEl0IHdvdWxk4oCZdmUgYmVlbiBpbmNvbXBsZXRlIHdpdGhvdXQgYSBjcmF6eSB3b3JrYXJvdW5kIGZvciBJRSA6fFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZm9jdXMgaXMgdHJpZ2dlcmVkICphZnRlciogdGhlIGNsb3NlIGhhcyBjb21wbGV0ZWQgLSBjYXVzaW5nIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIG9wZW4gYWdhaW4uIFNvIHVuYmluZCBhbmQgcmViaW5kIHRoZSBldmVudCBhdCB0aGUgbmV4dCB0aWNrLlxuICAgICAgICAgICAgICAgICAgICBQLiRyb290Lm9mZiggJ2ZvY3VzLnRvT3BlbicgKVswXS5mb2N1cygpXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5vbiggJ2ZvY3VzLnRvT3BlbicsIGhhbmRsZUZvY3VzVG9PcGVuRXZlbnQgKVxuICAgICAgICAgICAgICAgICAgICB9LCAwIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIOKAnGFjdGl2ZeKAnSBjbGFzcy5cbiAgICAgICAgICAgICAgICAkRUxFTUVOVC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5hY3RpdmUgKVxuICAgICAgICAgICAgICAgIGFyaWEoIEVMRU1FTlQsICdleHBhbmRlZCcsIGZhbHNlIClcblxuICAgICAgICAgICAgICAgIC8vICogQSBGaXJlZm94IGJ1Zywgd2hlbiBgaHRtbGAgaGFzIGBvdmVyZmxvdzpoaWRkZW5gLCByZXN1bHRzIGluXG4gICAgICAgICAgICAgICAgLy8gICBraWxsaW5nIHRyYW5zaXRpb25zIDooLiBTbyByZW1vdmUgdGhlIOKAnG9wZW5lZOKAnSBzdGF0ZSBvbiB0aGUgbmV4dCB0aWNrLlxuICAgICAgICAgICAgICAgIC8vICAgQnVnOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02MjUyODlcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIOKAnG9wZW5lZOKAnSBhbmQg4oCcZm9jdXNlZOKAnSBjbGFzcyBmcm9tIHRoZSBwaWNrZXIgcm9vdC5cbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5vcGVuZWQgKyAnICcgKyBDTEFTU0VTLmZvY3VzZWQgKVxuICAgICAgICAgICAgICAgICAgICBhcmlhKCBQLiRyb290WzBdLCAnaGlkZGVuJywgdHJ1ZSApXG5cbiAgICAgICAgICAgICAgICB9LCAwIClcblxuICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IGNsb3NlZCwgZG8gbm90aGluZyBtb3JlLlxuICAgICAgICAgICAgICAgIGlmICggIVNUQVRFLm9wZW4gKSByZXR1cm4gUFxuXG4gICAgICAgICAgICAgICAgLy8gU2V0IGl0IGFzIGNsb3NlZC5cbiAgICAgICAgICAgICAgICBTVEFURS5vcGVuID0gZmFsc2VcblxuICAgICAgICAgICAgICAgIC8vIEFsbG93IHRoZSBwYWdlIHRvIHNjcm9sbC5cbiAgICAgICAgICAgICAgICBpZiAoIElTX0RFRkFVTFRfVEhFTUUgKSB7XG4gICAgICAgICAgICAgICAgICAgICRodG1sLlxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAnb3ZlcmZsb3cnLCAnJyApLlxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAncGFkZGluZy1yaWdodCcsICctPScgKyBnZXRTY3JvbGxiYXJXaWR0aCgpIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBVbmJpbmQgdGhlIGRvY3VtZW50IGV2ZW50cy5cbiAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKCAnLicgKyBTVEFURS5pZCApXG5cbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBxdWV1ZWQg4oCcY2xvc2XigJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdjbG9zZScgKVxuICAgICAgICAgICAgfSwgLy9jbG9zZVxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2xlYXIgdGhlIHZhbHVlc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFAuc2V0KCAnY2xlYXInLCBudWxsLCBvcHRpb25zIClcbiAgICAgICAgICAgIH0sIC8vY2xlYXJcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNldCBzb21ldGhpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiggdGhpbmcsIHZhbHVlLCBvcHRpb25zICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nSXRlbSwgdGhpbmdWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdJc09iamVjdCA9ICQuaXNQbGFpbk9iamVjdCggdGhpbmcgKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3QgPSB0aGluZ0lzT2JqZWN0ID8gdGhpbmcgOiB7fVxuXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgdXNhYmxlIG9wdGlvbnMuXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHRoaW5nSXNPYmplY3QgJiYgJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApID8gdmFsdWUgOiBvcHRpb25zIHx8IHt9XG5cbiAgICAgICAgICAgICAgICBpZiAoIHRoaW5nICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0aGluZyBpc27igJl0IGFuIG9iamVjdCwgbWFrZSBpdCBvbmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXRoaW5nSXNPYmplY3QgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGluZ09iamVjdFsgdGhpbmcgXSA9IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSB0aGluZ3Mgb2YgaXRlbXMgdG8gc2V0LlxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB0aGluZ0l0ZW0gaW4gdGhpbmdPYmplY3QgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIHZhbHVlIG9mIHRoZSB0aGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5nVmFsdWUgPSB0aGluZ09iamVjdFsgdGhpbmdJdGVtIF1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QsIGlmIHRoZSBpdGVtIGV4aXN0cyBhbmQgdGhlcmXigJlzIGEgdmFsdWUsIHNldCBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdJdGVtIGluIFAuY29tcG9uZW50Lml0ZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGluZ1ZhbHVlID09PSB1bmRlZmluZWQgKSB0aGluZ1ZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50LnNldCggdGhpbmdJdGVtLCB0aGluZ1ZhbHVlLCBvcHRpb25zIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlbiwgY2hlY2sgdG8gdXBkYXRlIHRoZSBlbGVtZW50IHZhbHVlIGFuZCBicm9hZGNhc3QgYSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaW5nSXRlbSA9PSAnc2VsZWN0JyB8fCB0aGluZ0l0ZW0gPT0gJ2NsZWFyJyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRUxFTUVOVC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsKCB0aGluZ0l0ZW0gPT0gJ2NsZWFyJyA/ICcnIDogUC5nZXQoIHRoaW5nSXRlbSwgU0VUVElOR1MuZm9ybWF0ICkgKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlciggJ2NoYW5nZScgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVuZGVyIGEgbmV3IHBpY2tlci5cbiAgICAgICAgICAgICAgICAgICAgUC5yZW5kZXIoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIG1ldGhvZCBpc27igJl0IG11dGVkLCB0cmlnZ2VyIHF1ZXVlZCDigJxzZXTigJ0gZXZlbnRzIGFuZCBwYXNzIHRoZSBgdGhpbmdPYmplY3RgLlxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLm11dGVkID8gUCA6IFAudHJpZ2dlciggJ3NldCcsIHRoaW5nT2JqZWN0IClcbiAgICAgICAgICAgIH0sIC8vc2V0XG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXQgc29tZXRoaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oIHRoaW5nLCBmb3JtYXQgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlcmXigJlzIHNvbWV0aGluZyB0byBnZXQuXG4gICAgICAgICAgICAgICAgdGhpbmcgPSB0aGluZyB8fCAndmFsdWUnXG5cbiAgICAgICAgICAgICAgICAvLyBJZiBhIHBpY2tlciBzdGF0ZSBleGlzdHMsIHJldHVybiB0aGF0LlxuICAgICAgICAgICAgICAgIGlmICggU1RBVEVbIHRoaW5nIF0gIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFWyB0aGluZyBdXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzdWJtaXNzaW9uIHZhbHVlLCBpZiB0aGF0LlxuICAgICAgICAgICAgICAgIGlmICggdGhpbmcgPT0gJ3ZhbHVlU3VibWl0JyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBQLl9oaWRkZW4gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUC5faGlkZGVuLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpbmcgPSAndmFsdWUnXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSB2YWx1ZSwgaWYgdGhhdC5cbiAgICAgICAgICAgICAgICBpZiAoIHRoaW5nID09ICd2YWx1ZScgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBFTEVNRU5ULnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYSBjb21wb25lbnQgaXRlbSBleGlzdHMsIHJldHVybiB0aGF0LlxuICAgICAgICAgICAgICAgIGlmICggdGhpbmcgaW4gUC5jb21wb25lbnQuaXRlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgZm9ybWF0ID09ICdzdHJpbmcnICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaW5nVmFsdWUgPSBQLmNvbXBvbmVudC5nZXQoIHRoaW5nIClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGluZ1ZhbHVlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50LmZvcm1hdHMudG9TdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIGZvcm1hdCwgdGhpbmdWYWx1ZSBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFAuY29tcG9uZW50LmdldCggdGhpbmcgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIC8vZ2V0XG5cblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJpbmQgZXZlbnRzIG9uIHRoZSB0aGluZ3MuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uOiBmdW5jdGlvbiggdGhpbmcsIG1ldGhvZCwgaW50ZXJuYWwgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGhpbmdOYW1lLCB0aGluZ01ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdJc09iamVjdCA9ICQuaXNQbGFpbk9iamVjdCggdGhpbmcgKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3QgPSB0aGluZ0lzT2JqZWN0ID8gdGhpbmcgOiB7fVxuXG4gICAgICAgICAgICAgICAgaWYgKCB0aGluZyApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGhpbmcgaXNu4oCZdCBhbiBvYmplY3QsIG1ha2UgaXQgb25lLlxuICAgICAgICAgICAgICAgICAgICBpZiAoICF0aGluZ0lzT2JqZWN0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3RbIHRoaW5nIF0gPSBtZXRob2RcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIHRoaW5ncyB0byBiaW5kIHRvLlxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB0aGluZ05hbWUgaW4gdGhpbmdPYmplY3QgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIG1ldGhvZCBvZiB0aGUgdGhpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGluZ01ldGhvZCA9IHRoaW5nT2JqZWN0WyB0aGluZ05hbWUgXVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCB3YXMgYW4gaW50ZXJuYWwgYmluZGluZywgcHJlZml4IGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpbnRlcm5hbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGluZ05hbWUgPSAnXycgKyB0aGluZ05hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0aGluZyBtZXRob2RzIGNvbGxlY3Rpb24gZXhpc3RzLlxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEUubWV0aG9kc1sgdGhpbmdOYW1lIF0gPSBTVEFURS5tZXRob2RzWyB0aGluZ05hbWUgXSB8fCBbXVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIG1ldGhvZCB0byB0aGUgcmVsYXRpdmUgbWV0aG9kIGNvbGxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzWyB0aGluZ05hbWUgXS5wdXNoKCB0aGluZ01ldGhvZCApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUFxuICAgICAgICAgICAgfSwgLy9vblxuXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBVbmJpbmQgZXZlbnRzIG9uIHRoZSB0aGluZ3MuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9mZjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGksIHRoaW5nTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIG5hbWVzQ291bnQgPSBuYW1lcy5sZW5ndGg7IGkgPCBuYW1lc0NvdW50OyBpICs9IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaW5nTmFtZSA9IG5hbWVzW2ldXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdOYW1lIGluIFNUQVRFLm1ldGhvZHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgU1RBVEUubWV0aG9kc1t0aGluZ05hbWVdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBcbiAgICAgICAgICAgIH0sXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBGaXJlIG9mZiBtZXRob2QgZXZlbnRzLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbiggbmFtZSwgZGF0YSApIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RyaWdnZXIgPSBmdW5jdGlvbiggbmFtZSApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZExpc3QgPSBTVEFURS5tZXRob2RzWyBuYW1lIF1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtZXRob2RMaXN0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTGlzdC5tYXAoIGZ1bmN0aW9uKCBtZXRob2QgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBtZXRob2QsIFAsIFsgZGF0YSBdIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RyaWdnZXIoICdfJyArIG5hbWUgKVxuICAgICAgICAgICAgICAgIF90cmlnZ2VyKCBuYW1lIClcbiAgICAgICAgICAgICAgICByZXR1cm4gUFxuICAgICAgICAgICAgfSAvL3RyaWdnZXJcbiAgICAgICAgfSAvL1BpY2tlckluc3RhbmNlLnByb3RvdHlwZVxuXG5cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSBwaWNrZXIgaG9sZGVyIGNvbXBvbmVudHMgdG9nZXRoZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlV3JhcHBlZENvbXBvbmVudCgpIHtcblxuICAgICAgICAvLyBDcmVhdGUgYSBwaWNrZXIgd3JhcHBlciBob2xkZXJcbiAgICAgICAgcmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSggJ2RpdicsXG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHBpY2tlciB3cmFwcGVyIG5vZGVcbiAgICAgICAgICAgIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSggJ2RpdicsXG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBwaWNrZXIgZnJhbWVcbiAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoICdkaXYnLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIHBpY2tlciBib3ggbm9kZVxuICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoICdkaXYnLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbXBvbmVudHMgbm9kZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICBQLmNvbXBvbmVudC5ub2RlcyggU1RBVEUub3BlbiApLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcGlja2VyIGJveCBjbGFzc1xuICAgICAgICAgICAgICAgICAgICAgICAgQ0xBU1NFUy5ib3hcbiAgICAgICAgICAgICAgICAgICAgKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBQaWNrZXIgd3JhcCBjbGFzc1xuICAgICAgICAgICAgICAgICAgICBDTEFTU0VTLndyYXBcbiAgICAgICAgICAgICAgICApLFxuXG4gICAgICAgICAgICAgICAgLy8gUGlja2VyIGZyYW1lIGNsYXNzXG4gICAgICAgICAgICAgICAgQ0xBU1NFUy5mcmFtZVxuICAgICAgICAgICAgKSxcblxuICAgICAgICAgICAgLy8gUGlja2VyIGhvbGRlciBjbGFzc1xuICAgICAgICAgICAgQ0xBU1NFUy5ob2xkZXJcbiAgICAgICAgKSAvL2VuZHJldHVyblxuICAgIH0gLy9jcmVhdGVXcmFwcGVkQ29tcG9uZW50XG5cblxuXG4gICAgLyoqXG4gICAgICogUHJlcGFyZSB0aGUgaW5wdXQgZWxlbWVudCB3aXRoIGFsbCBiaW5kaW5ncy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcmVwYXJlRWxlbWVudCgpIHtcblxuICAgICAgICAkRUxFTUVOVC5cblxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHBpY2tlciBkYXRhIGJ5IGNvbXBvbmVudCBuYW1lLlxuICAgICAgICAgICAgZGF0YShOQU1FLCBQKS5cblxuICAgICAgICAgICAgLy8gQWRkIHRoZSDigJxpbnB1dOKAnSBjbGFzcyBuYW1lLlxuICAgICAgICAgICAgYWRkQ2xhc3MoQ0xBU1NFUy5pbnB1dCkuXG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdGFiaW5kZXguXG4gICAgICAgICAgICBhdHRyKCd0YWJpbmRleCcsIC0xKS5cblxuICAgICAgICAgICAgLy8gSWYgdGhlcmXigJlzIGEgYGRhdGEtdmFsdWVgLCB1cGRhdGUgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50LlxuICAgICAgICAgICAgdmFsKCAkRUxFTUVOVC5kYXRhKCd2YWx1ZScpID9cbiAgICAgICAgICAgICAgICBQLmdldCgnc2VsZWN0JywgU0VUVElOR1MuZm9ybWF0KSA6XG4gICAgICAgICAgICAgICAgRUxFTUVOVC52YWx1ZVxuICAgICAgICAgICAgKVxuXG5cbiAgICAgICAgLy8gT25seSBiaW5kIGtleWRvd24gZXZlbnRzIGlmIHRoZSBlbGVtZW50IGlzbuKAmXQgZWRpdGFibGUuXG4gICAgICAgIGlmICggIVNFVFRJTkdTLmVkaXRhYmxlICkge1xuXG4gICAgICAgICAgICAkRUxFTUVOVC5cblxuICAgICAgICAgICAgICAgIC8vIE9uIGZvY3VzL2NsaWNrLCBmb2N1cyBvbnRvIHRoZSByb290IHRvIG9wZW4gaXQgdXAuXG4gICAgICAgICAgICAgICAgb24oICdmb2N1cy4nICsgU1RBVEUuaWQgKyAnIGNsaWNrLicgKyBTVEFURS5pZCwgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIFAuJHJvb3RbMF0uZm9jdXMoKVxuICAgICAgICAgICAgICAgIH0pLlxuXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIGtleWJvYXJkIGV2ZW50IGJhc2VkIG9uIHRoZSBwaWNrZXIgYmVpbmcgb3BlbmVkIG9yIG5vdC5cbiAgICAgICAgICAgICAgICBvbiggJ2tleWRvd24uJyArIFNUQVRFLmlkLCBoYW5kbGVLZXlkb3duRXZlbnQgKVxuICAgICAgICB9XG5cblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGFyaWEgYXR0cmlidXRlcy5cbiAgICAgICAgYXJpYShFTEVNRU5ULCB7XG4gICAgICAgICAgICBoYXNwb3B1cDogdHJ1ZSxcbiAgICAgICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlYWRvbmx5OiBmYWxzZSxcbiAgICAgICAgICAgIG93bnM6IEVMRU1FTlQuaWQgKyAnX3Jvb3QnXG4gICAgICAgIH0pXG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIHRoZSByb290IHBpY2tlciBlbGVtZW50IHdpdGggYWxsIGJpbmRpbmdzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByZXBhcmVFbGVtZW50Um9vdCgpIHtcblxuICAgICAgICBQLiRyb290LlxuXG4gICAgICAgICAgICBvbih7XG5cbiAgICAgICAgICAgICAgICAvLyBGb3IgaU9TOC5cbiAgICAgICAgICAgICAgICBrZXlkb3duOiBoYW5kbGVLZXlkb3duRXZlbnQsXG5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHNvbWV0aGluZyB3aXRoaW4gdGhlIHJvb3QgaXMgZm9jdXNlZCwgc3RvcCBmcm9tIGJ1YmJsaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIGRvYyBhbmQgcmVtb3ZlIHRoZSDigJxmb2N1c2Vk4oCdIHN0YXRlIGZyb20gdGhlIHJvb3QuXG4gICAgICAgICAgICAgICAgZm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICBQLiRyb290LnJlbW92ZUNsYXNzKCBDTEFTU0VTLmZvY3VzZWQgKVxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHNvbWV0aGluZyB3aXRoaW4gdGhlIHJvb3QgaG9sZGVyIGlzIGNsaWNrZWQsIHN0b3AgaXRcbiAgICAgICAgICAgICAgICAvLyBmcm9tIGJ1YmJsaW5nIHRvIHRoZSBkb2MuXG4gICAgICAgICAgICAgICAgJ21vdXNlZG93biBjbGljayc6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0YXJnZXQgaXNu4oCZdCB0aGUgcm9vdCBob2xkZXIgc28gaXQgY2FuIGJ1YmJsZSB1cC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0YXJnZXQgIT0gUC4kcm9vdC5jaGlsZHJlbigpWyAwIF0gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICogRm9yIG1vdXNlZG93biBldmVudHMsIGNhbmNlbCB0aGUgZGVmYXVsdCBhY3Rpb24gaW4gb3JkZXIgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcHJldmVudCBjYXNlcyB3aGVyZSBmb2N1cyBpcyBzaGlmdGVkIG9udG8gZXh0ZXJuYWwgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgd2hlbiB1c2luZyB0aGluZ3MgbGlrZSBqUXVlcnkgbW9iaWxlIG9yIE1hZ25pZmljUG9wdXAgKHJlZjogIzI0OSAmICMxMjApLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBBbHNvLCBmb3IgRmlyZWZveCwgZG9u4oCZdCBwcmV2ZW50IGFjdGlvbiBvbiB0aGUgYG9wdGlvbmAgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZXZlbnQudHlwZSA9PSAnbW91c2Vkb3duJyAmJiAhJCggdGFyZ2V0ICkuaXMoICdpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYnV0dG9uLCBvcHRpb24nICkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlLWZvY3VzIG9udG8gdGhlIHJvb3Qgc28gdGhhdCB1c2VycyBjYW4gY2xpY2sgYXdheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gZWxlbWVudHMgZm9jdXNlZCB3aXRoaW4gdGhlIHBpY2tlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLiRyb290WzBdLmZvY3VzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLlxuXG4gICAgICAgICAgICAvLyBBZGQvcmVtb3ZlIHRoZSDigJx0YXJnZXTigJ0gY2xhc3Mgb24gZm9jdXMgYW5kIGJsdXIuXG4gICAgICAgICAgICBvbih7XG4gICAgICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkRUxFTUVOVC5hZGRDbGFzcyggQ0xBU1NFUy50YXJnZXQgKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRFTEVNRU5ULnJlbW92ZUNsYXNzKCBDTEFTU0VTLnRhcmdldCApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuXG5cbiAgICAgICAgICAgIC8vIE9wZW4gdGhlIHBpY2tlciBhbmQgYWRqdXN0IHRoZSByb290IOKAnGZvY3VzZWTigJ0gc3RhdGVcbiAgICAgICAgICAgIG9uKCAnZm9jdXMudG9PcGVuJywgaGFuZGxlRm9jdXNUb09wZW5FdmVudCApLlxuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBjbGljayBvbiBhbiBhY3Rpb25hYmxlIGVsZW1lbnQsIGNhcnJ5IG91dCB0aGUgYWN0aW9ucy5cbiAgICAgICAgICAgIG9uKCAnY2xpY2snLCAnW2RhdGEtcGlja10sIFtkYXRhLW5hdl0sIFtkYXRhLWNsZWFyXSwgW2RhdGEtY2xvc2VdJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9ICR0YXJnZXQuZGF0YSgpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREaXNhYmxlZCA9ICR0YXJnZXQuaGFzQ2xhc3MoIENMQVNTRVMubmF2RGlzYWJsZWQgKSB8fCAkdGFyZ2V0Lmhhc0NsYXNzKCBDTEFTU0VTLmRpc2FibGVkICksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gKiBGb3IgSUUsIG5vbi1mb2N1c2FibGUgZWxlbWVudHMgY2FuIGJlIGFjdGl2ZSBlbGVtZW50cyBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgKGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2ODQ1NjEpLlxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50ID0gZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBhY3RpdmVFbGVtZW50ICYmICggYWN0aXZlRWxlbWVudC50eXBlIHx8IGFjdGl2ZUVsZW1lbnQuaHJlZiApXG5cbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgZGlzYWJsZWQgb3Igbm90aGluZyBpbnNpZGUgaXMgYWN0aXZlbHkgZm9jdXNlZCwgcmUtZm9jdXMgdGhlIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgaWYgKCB0YXJnZXREaXNhYmxlZCB8fCBhY3RpdmVFbGVtZW50ICYmICEkLmNvbnRhaW5zKCBQLiRyb290WzBdLCBhY3RpdmVFbGVtZW50ICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIFAuJHJvb3RbMF0uZm9jdXMoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIHNvbWV0aGluZyBpcyBzdXBlcmZpY2lhbGx5IGNoYW5nZWQsIHVwZGF0ZSB0aGUgYGhpZ2hsaWdodGAgYmFzZWQgb24gdGhlIGBuYXZgLlxuICAgICAgICAgICAgICAgIGlmICggIXRhcmdldERpc2FibGVkICYmIHRhcmdldERhdGEubmF2ICkge1xuICAgICAgICAgICAgICAgICAgICBQLnNldCggJ2hpZ2hsaWdodCcsIFAuY29tcG9uZW50Lml0ZW0uaGlnaGxpZ2h0LCB7IG5hdjogdGFyZ2V0RGF0YS5uYXYgfSApXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgc29tZXRoaW5nIGlzIHBpY2tlZCwgc2V0IGBzZWxlY3RgIHRoZW4gY2xvc2Ugd2l0aCBmb2N1cy5cbiAgICAgICAgICAgICAgICBlbHNlIGlmICggIXRhcmdldERpc2FibGVkICYmICdwaWNrJyBpbiB0YXJnZXREYXRhICkge1xuICAgICAgICAgICAgICAgICAgICBQLnNldCggJ3NlbGVjdCcsIHRhcmdldERhdGEucGljayApXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgYSDigJxjbGVhcuKAnSBidXR0b24gaXMgcHJlc3NlZCwgZW1wdHkgdGhlIHZhbHVlcyBhbmQgY2xvc2Ugd2l0aCBmb2N1cy5cbiAgICAgICAgICAgICAgICBlbHNlIGlmICggdGFyZ2V0RGF0YS5jbGVhciApIHtcbiAgICAgICAgICAgICAgICAgICAgUC5jbGVhcigpLmNsb3NlKCB0cnVlIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbHNlIGlmICggdGFyZ2V0RGF0YS5jbG9zZSApIHtcbiAgICAgICAgICAgICAgICAgICAgUC5jbG9zZSggdHJ1ZSApXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KSAvL1AuJHJvb3RcblxuICAgICAgICBhcmlhKCBQLiRyb290WzBdLCAnaGlkZGVuJywgdHJ1ZSApXG4gICAgfVxuXG5cbiAgICAgLyoqXG4gICAgICAqIFByZXBhcmUgdGhlIGhpZGRlbiBpbnB1dCBlbGVtZW50IGFsb25nIHdpdGggYWxsIGJpbmRpbmdzLlxuICAgICAgKi9cbiAgICBmdW5jdGlvbiBwcmVwYXJlRWxlbWVudEhpZGRlbigpIHtcblxuICAgICAgICB2YXIgbmFtZVxuXG4gICAgICAgIGlmICggU0VUVElOR1MuaGlkZGVuTmFtZSA9PT0gdHJ1ZSApIHtcbiAgICAgICAgICAgIG5hbWUgPSBFTEVNRU5ULm5hbWVcbiAgICAgICAgICAgIEVMRU1FTlQubmFtZSA9ICcnXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuYW1lID0gW1xuICAgICAgICAgICAgICAgIHR5cGVvZiBTRVRUSU5HUy5oaWRkZW5QcmVmaXggPT0gJ3N0cmluZycgPyBTRVRUSU5HUy5oaWRkZW5QcmVmaXggOiAnJyxcbiAgICAgICAgICAgICAgICB0eXBlb2YgU0VUVElOR1MuaGlkZGVuU3VmZml4ID09ICdzdHJpbmcnID8gU0VUVElOR1MuaGlkZGVuU3VmZml4IDogJ19zdWJtaXQnXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICBuYW1lID0gbmFtZVswXSArIEVMRU1FTlQubmFtZSArIG5hbWVbMV1cbiAgICAgICAgfVxuXG4gICAgICAgIFAuX2hpZGRlbiA9ICQoXG4gICAgICAgICAgICAnPGlucHV0ICcgK1xuICAgICAgICAgICAgJ3R5cGU9aGlkZGVuICcgK1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG5hbWUgdXNpbmcgdGhlIG9yaWdpbmFsIGlucHV04oCZcyB3aXRoIGEgcHJlZml4IGFuZCBzdWZmaXguXG4gICAgICAgICAgICAnbmFtZT1cIicgKyBuYW1lICsgJ1wiJyArXG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIHZhbHVlLCBzZXQgdGhlIGhpZGRlbiB2YWx1ZSBhcyB3ZWxsLlxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICRFTEVNRU5ULmRhdGEoJ3ZhbHVlJykgfHwgRUxFTUVOVC52YWx1ZSA/XG4gICAgICAgICAgICAgICAgICAgICcgdmFsdWU9XCInICsgUC5nZXQoJ3NlbGVjdCcsIFNFVFRJTkdTLmZvcm1hdFN1Ym1pdCkgKyAnXCInIDpcbiAgICAgICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgJz4nXG4gICAgICAgIClbMF1cblxuICAgICAgICAkRUxFTUVOVC5cblxuICAgICAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGNoYW5nZXMsIHVwZGF0ZSB0aGUgaGlkZGVuIGlucHV0IHdpdGggdGhlIGNvcnJlY3QgZm9ybWF0LlxuICAgICAgICAgICAgb24oJ2NoYW5nZS4nICsgU1RBVEUuaWQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIFAuX2hpZGRlbi52YWx1ZSA9IEVMRU1FTlQudmFsdWUgP1xuICAgICAgICAgICAgICAgICAgICBQLmdldCgnc2VsZWN0JywgU0VUVElOR1MuZm9ybWF0U3VibWl0KSA6XG4gICAgICAgICAgICAgICAgICAgICcnXG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBoaWRkZW4gaW5wdXQgYXMgc3BlY2lmaWVkIGluIHRoZSBzZXR0aW5ncy5cbiAgICAgICAgaWYgKCBTRVRUSU5HUy5jb250YWluZXIgKSAkKCBTRVRUSU5HUy5jb250YWluZXIgKS5hcHBlbmQoIFAuX2hpZGRlbiApXG4gICAgICAgIGVsc2UgJEVMRU1FTlQuYWZ0ZXIoIFAuX2hpZGRlbiApXG4gICAgfVxuXG5cbiAgICAvLyBGb3IgaU9TOC5cbiAgICBmdW5jdGlvbiBoYW5kbGVLZXlkb3duRXZlbnQoIGV2ZW50ICkge1xuXG4gICAgICAgIHZhciBrZXljb2RlID0gZXZlbnQua2V5Q29kZSxcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb25lIG9mIHRoZSBkZWxldGUga2V5cyB3YXMgcHJlc3NlZC5cbiAgICAgICAgICAgIGlzS2V5Y29kZURlbGV0ZSA9IC9eKDh8NDYpJC8udGVzdChrZXljb2RlKVxuXG4gICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiBJRSBjbGVhcnMgdGhlIGlucHV0IHZhbHVlIG9uIOKAnGVzY2FwZeKAnS5cbiAgICAgICAgaWYgKCBrZXljb2RlID09IDI3ICkge1xuICAgICAgICAgICAgUC5jbG9zZSgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGBzcGFjZWAgb3IgYGRlbGV0ZWAgd2FzIHByZXNzZWQgb3IgdGhlIHBpY2tlciBpcyBjbG9zZWQgd2l0aCBhIGtleSBtb3ZlbWVudC5cbiAgICAgICAgaWYgKCBrZXljb2RlID09IDMyIHx8IGlzS2V5Y29kZURlbGV0ZSB8fCAhU1RBVEUub3BlbiAmJiBQLmNvbXBvbmVudC5rZXlba2V5Y29kZV0gKSB7XG5cbiAgICAgICAgICAgIC8vIFByZXZlbnQgaXQgZnJvbSBtb3ZpbmcgdGhlIHBhZ2UgYW5kIGJ1YmJsaW5nIHRvIGRvYy5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICAgICAgICAgIC8vIElmIGBkZWxldGVgIHdhcyBwcmVzc2VkLCBjbGVhciB0aGUgdmFsdWVzIGFuZCBjbG9zZSB0aGUgcGlja2VyLlxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIG9wZW4gdGhlIHBpY2tlci5cbiAgICAgICAgICAgIGlmICggaXNLZXljb2RlRGVsZXRlICkgeyBQLmNsZWFyKCkuY2xvc2UoKSB9XG4gICAgICAgICAgICBlbHNlIHsgUC5vcGVuKCkgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBTZXBhcmF0ZWQgZm9yIElFXG4gICAgZnVuY3Rpb24gaGFuZGxlRm9jdXNUb09wZW5FdmVudCggZXZlbnQgKSB7XG5cbiAgICAgICAgLy8gU3RvcCB0aGUgZXZlbnQgZnJvbSBwcm9wYWdhdGluZyB0byB0aGUgZG9jLlxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICAgIC8vIElmIGl04oCZcyBhIGZvY3VzIGV2ZW50LCBhZGQgdGhlIOKAnGZvY3VzZWTigJ0gY2xhc3MgdG8gdGhlIHJvb3QuXG4gICAgICAgIGlmICggZXZlbnQudHlwZSA9PSAnZm9jdXMnICkge1xuICAgICAgICAgICAgUC4kcm9vdC5hZGRDbGFzcyggQ0xBU1NFUy5mb2N1c2VkIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFuZCB0aGVuIGZpbmFsbHkgb3BlbiB0aGUgcGlja2VyLlxuICAgICAgICBQLm9wZW4oKVxuICAgIH1cblxuXG4gICAgLy8gUmV0dXJuIGEgbmV3IHBpY2tlciBpbnN0YW5jZS5cbiAgICByZXR1cm4gbmV3IFBpY2tlckluc3RhbmNlKClcbn0gLy9QaWNrZXJDb25zdHJ1Y3RvclxuXG5cblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBjbGFzc2VzIGFuZCBwcmVmaXggdG8gdXNlIGZvciB0aGUgSFRNTCBjbGFzc2VzLlxuICovXG5QaWNrZXJDb25zdHJ1Y3Rvci5rbGFzc2VzID0gZnVuY3Rpb24oIHByZWZpeCApIHtcbiAgICBwcmVmaXggPSBwcmVmaXggfHwgJ3BpY2tlcidcbiAgICByZXR1cm4ge1xuXG4gICAgICAgIHBpY2tlcjogcHJlZml4LFxuICAgICAgICBvcGVuZWQ6IHByZWZpeCArICctLW9wZW5lZCcsXG4gICAgICAgIGZvY3VzZWQ6IHByZWZpeCArICctLWZvY3VzZWQnLFxuXG4gICAgICAgIGlucHV0OiBwcmVmaXggKyAnX19pbnB1dCcsXG4gICAgICAgIGFjdGl2ZTogcHJlZml4ICsgJ19faW5wdXQtLWFjdGl2ZScsXG4gICAgICAgIHRhcmdldDogcHJlZml4ICsgJ19faW5wdXQtLXRhcmdldCcsXG5cbiAgICAgICAgaG9sZGVyOiBwcmVmaXggKyAnX19ob2xkZXInLFxuXG4gICAgICAgIGZyYW1lOiBwcmVmaXggKyAnX19mcmFtZScsXG4gICAgICAgIHdyYXA6IHByZWZpeCArICdfX3dyYXAnLFxuXG4gICAgICAgIGJveDogcHJlZml4ICsgJ19fYm94J1xuICAgIH1cbn0gLy9QaWNrZXJDb25zdHJ1Y3Rvci5rbGFzc2VzXG5cblxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBkZWZhdWx0IHRoZW1lIGlzIGJlaW5nIHVzZWQuXG4gKi9cbmZ1bmN0aW9uIGlzVXNpbmdEZWZhdWx0VGhlbWUoIGVsZW1lbnQgKSB7XG5cbiAgICB2YXIgdGhlbWUsXG4gICAgICAgIHByb3AgPSAncG9zaXRpb24nXG5cbiAgICAvLyBGb3IgSUUuXG4gICAgaWYgKCBlbGVtZW50LmN1cnJlbnRTdHlsZSApIHtcbiAgICAgICAgdGhlbWUgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtwcm9wXVxuICAgIH1cblxuICAgIC8vIEZvciBub3JtYWwgYnJvd3NlcnMuXG4gICAgZWxzZSBpZiAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlICkge1xuICAgICAgICB0aGVtZSA9IGdldENvbXB1dGVkU3R5bGUoIGVsZW1lbnQgKVtwcm9wXVxuICAgIH1cblxuICAgIHJldHVybiB0aGVtZSA9PSAnZml4ZWQnXG59XG5cblxuXG4vKipcbiAqIEdldCB0aGUgd2lkdGggb2YgdGhlIGJyb3dzZXLigJlzIHNjcm9sbGJhci5cbiAqIFRha2VuIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9Wb2RrYUJlYXJzL1JlbW9kYWwvYmxvYi9tYXN0ZXIvc3JjL2pxdWVyeS5yZW1vZGFsLmpzXG4gKi9cbmZ1bmN0aW9uIGdldFNjcm9sbGJhcldpZHRoKCkge1xuXG4gICAgaWYgKCAkaHRtbC5oZWlnaHQoKSA8PSAkd2luZG93LmhlaWdodCgpICkge1xuICAgICAgICByZXR1cm4gMFxuICAgIH1cblxuICAgIHZhciAkb3V0ZXIgPSAkKCAnPGRpdiBzdHlsZT1cInZpc2liaWxpdHk6aGlkZGVuO3dpZHRoOjEwMHB4XCIgLz4nICkuXG4gICAgICAgIGFwcGVuZFRvKCAnYm9keScgKVxuXG4gICAgLy8gR2V0IHRoZSB3aWR0aCB3aXRob3V0IHNjcm9sbGJhcnMuXG4gICAgdmFyIHdpZHRoV2l0aG91dFNjcm9sbCA9ICRvdXRlclswXS5vZmZzZXRXaWR0aFxuXG4gICAgLy8gRm9yY2UgYWRkaW5nIHNjcm9sbGJhcnMuXG4gICAgJG91dGVyLmNzcyggJ292ZXJmbG93JywgJ3Njcm9sbCcgKVxuXG4gICAgLy8gQWRkIHRoZSBpbm5lciBkaXYuXG4gICAgdmFyICRpbm5lciA9ICQoICc8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJVwiIC8+JyApLmFwcGVuZFRvKCAkb3V0ZXIgKVxuXG4gICAgLy8gR2V0IHRoZSB3aWR0aCB3aXRoIHNjcm9sbGJhcnMuXG4gICAgdmFyIHdpZHRoV2l0aFNjcm9sbCA9ICRpbm5lclswXS5vZmZzZXRXaWR0aFxuXG4gICAgLy8gUmVtb3ZlIHRoZSBkaXZzLlxuICAgICRvdXRlci5yZW1vdmUoKVxuXG4gICAgLy8gUmV0dXJuIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHdpZHRocy5cbiAgICByZXR1cm4gd2lkdGhXaXRob3V0U2Nyb2xsIC0gd2lkdGhXaXRoU2Nyb2xsXG59XG5cblxuXG4vKipcbiAqIFBpY2tlckNvbnN0cnVjdG9yIGhlbHBlciBtZXRob2RzLlxuICovXG5QaWNrZXJDb25zdHJ1Y3Rvci5fID0ge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgZ3JvdXAgb2Ygbm9kZXMuIEV4cGVjdHM6XG4gICAgICogYFxuICAgICAgICB7XG4gICAgICAgICAgICBtaW46ICAgIHtJbnRlZ2VyfSxcbiAgICAgICAgICAgIG1heDogICAge0ludGVnZXJ9LFxuICAgICAgICAgICAgaTogICAgICB7SW50ZWdlcn0sXG4gICAgICAgICAgICBub2RlOiAgIHtTdHJpbmd9LFxuICAgICAgICAgICAgaXRlbTogICB7RnVuY3Rpb259XG4gICAgICAgIH1cbiAgICAgKiBgXG4gICAgICovXG4gICAgZ3JvdXA6IGZ1bmN0aW9uKCBncm91cE9iamVjdCApIHtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIC8vIFNjb3BlIGZvciB0aGUgbG9vcGVkIG9iamVjdFxuICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlLFxuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG5vZGVzIGxpc3RcbiAgICAgICAgICAgIG5vZGVzTGlzdCA9ICcnLFxuXG4gICAgICAgICAgICAvLyBUaGUgY291bnRlciBzdGFydHMgZnJvbSB0aGUgYG1pbmBcbiAgICAgICAgICAgIGNvdW50ZXIgPSBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGdyb3VwT2JqZWN0Lm1pbiwgZ3JvdXBPYmplY3QgKVxuXG5cbiAgICAgICAgLy8gTG9vcCBmcm9tIHRoZSBgbWluYCB0byBgbWF4YCwgaW5jcmVtZW50aW5nIGJ5IGBpYFxuICAgICAgICBmb3IgKCA7IGNvdW50ZXIgPD0gUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBncm91cE9iamVjdC5tYXgsIGdyb3VwT2JqZWN0LCBbIGNvdW50ZXIgXSApOyBjb3VudGVyICs9IGdyb3VwT2JqZWN0LmkgKSB7XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGBpdGVtYCBmdW5jdGlvbiB3aXRoaW4gc2NvcGUgb2YgdGhlIG9iamVjdFxuICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlID0gUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBncm91cE9iamVjdC5pdGVtLCBncm91cE9iamVjdCwgWyBjb3VudGVyIF0gKVxuXG4gICAgICAgICAgICAvLyBTcGxpY2UgdGhlIHN1Ymdyb3VwIGFuZCBjcmVhdGUgbm9kZXMgb3V0IG9mIHRoZSBzdWIgbm9kZXNcbiAgICAgICAgICAgIG5vZGVzTGlzdCArPSBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoXG4gICAgICAgICAgICAgICAgZ3JvdXBPYmplY3Qubm9kZSxcbiAgICAgICAgICAgICAgICBsb29wT2JqZWN0U2NvcGVbIDAgXSwgICAvLyB0aGUgbm9kZVxuICAgICAgICAgICAgICAgIGxvb3BPYmplY3RTY29wZVsgMSBdLCAgIC8vIHRoZSBjbGFzc2VzXG4gICAgICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlWyAyIF0gICAgLy8gdGhlIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgbGlzdCBvZiBub2Rlc1xuICAgICAgICByZXR1cm4gbm9kZXNMaXN0XG4gICAgfSwgLy9ncm91cFxuXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBkb20gbm9kZSBzdHJpbmdcbiAgICAgKi9cbiAgICBub2RlOiBmdW5jdGlvbiggd3JhcHBlciwgaXRlbSwga2xhc3MsIGF0dHJpYnV0ZSApIHtcblxuICAgICAgICAvLyBJZiB0aGUgaXRlbSBpcyBmYWxzZS15LCBqdXN0IHJldHVybiBhbiBlbXB0eSBzdHJpbmdcbiAgICAgICAgaWYgKCAhaXRlbSApIHJldHVybiAnJ1xuXG4gICAgICAgIC8vIElmIHRoZSBpdGVtIGlzIGFuIGFycmF5LCBkbyBhIGpvaW5cbiAgICAgICAgaXRlbSA9ICQuaXNBcnJheSggaXRlbSApID8gaXRlbS5qb2luKCAnJyApIDogaXRlbVxuXG4gICAgICAgIC8vIENoZWNrIGZvciB0aGUgY2xhc3NcbiAgICAgICAga2xhc3MgPSBrbGFzcyA/ICcgY2xhc3M9XCInICsga2xhc3MgKyAnXCInIDogJydcblxuICAgICAgICAvLyBDaGVjayBmb3IgYW55IGF0dHJpYnV0ZXNcbiAgICAgICAgYXR0cmlidXRlID0gYXR0cmlidXRlID8gJyAnICsgYXR0cmlidXRlIDogJydcblxuICAgICAgICAvLyBSZXR1cm4gdGhlIHdyYXBwZWQgaXRlbVxuICAgICAgICByZXR1cm4gJzwnICsgd3JhcHBlciArIGtsYXNzICsgYXR0cmlidXRlICsgJz4nICsgaXRlbSArICc8LycgKyB3cmFwcGVyICsgJz4nXG4gICAgfSwgLy9ub2RlXG5cblxuICAgIC8qKlxuICAgICAqIExlYWQgbnVtYmVycyBiZWxvdyAxMCB3aXRoIGEgemVyby5cbiAgICAgKi9cbiAgICBsZWFkOiBmdW5jdGlvbiggbnVtYmVyICkge1xuICAgICAgICByZXR1cm4gKCBudW1iZXIgPCAxMCA/ICcwJzogJycgKSArIG51bWJlclxuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgYSBmdW5jdGlvbiBvdGhlcndpc2UgcmV0dXJuIHRoZSB2YWx1ZS5cbiAgICAgKi9cbiAgICB0cmlnZ2VyOiBmdW5jdGlvbiggY2FsbGJhY2ssIHNjb3BlLCBhcmdzICkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicgPyBjYWxsYmFjay5hcHBseSggc2NvcGUsIGFyZ3MgfHwgW10gKSA6IGNhbGxiYWNrXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIHNlY29uZCBjaGFyYWN0ZXIgaXMgYSBkaWdpdCwgbGVuZ3RoIGlzIDIgb3RoZXJ3aXNlIDEuXG4gICAgICovXG4gICAgZGlnaXRzOiBmdW5jdGlvbiggc3RyaW5nICkge1xuICAgICAgICByZXR1cm4gKCAvXFxkLyApLnRlc3QoIHN0cmluZ1sgMSBdICkgPyAyIDogMVxuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIFRlbGwgaWYgc29tZXRoaW5nIGlzIGEgZGF0ZSBvYmplY3QuXG4gICAgICovXG4gICAgaXNEYXRlOiBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgIHJldHVybiB7fS50b1N0cmluZy5jYWxsKCB2YWx1ZSApLmluZGV4T2YoICdEYXRlJyApID4gLTEgJiYgdGhpcy5pc0ludGVnZXIoIHZhbHVlLmdldERhdGUoKSApXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogVGVsbCBpZiBzb21ldGhpbmcgaXMgYW4gaW50ZWdlci5cbiAgICAgKi9cbiAgICBpc0ludGVnZXI6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwoIHZhbHVlICkuaW5kZXhPZiggJ051bWJlcicgKSA+IC0xICYmIHZhbHVlICUgMSA9PT0gMFxuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBBUklBIGF0dHJpYnV0ZSBzdHJpbmdzLlxuICAgICAqL1xuICAgIGFyaWFBdHRyOiBhcmlhQXR0clxufSAvL1BpY2tlckNvbnN0cnVjdG9yLl9cblxuXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBwaWNrZXIgd2l0aCBhIGNvbXBvbmVudCBhbmQgZGVmYXVsdHMuXG4gKi9cblBpY2tlckNvbnN0cnVjdG9yLmV4dGVuZCA9IGZ1bmN0aW9uKCBuYW1lLCBDb21wb25lbnQgKSB7XG5cbiAgICAvLyBFeHRlbmQgalF1ZXJ5LlxuICAgICQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zLCBhY3Rpb24gKSB7XG5cbiAgICAgICAgLy8gR3JhYiB0aGUgY29tcG9uZW50IGRhdGEuXG4gICAgICAgIHZhciBjb21wb25lbnREYXRhID0gdGhpcy5kYXRhKCBuYW1lIClcblxuICAgICAgICAvLyBJZiB0aGUgcGlja2VyIGlzIHJlcXVlc3RlZCwgcmV0dXJuIHRoZSBkYXRhIG9iamVjdC5cbiAgICAgICAgaWYgKCBvcHRpb25zID09ICdwaWNrZXInICkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudERhdGFcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBjb21wb25lbnQgZGF0YSBleGlzdHMgYW5kIGBvcHRpb25zYCBpcyBhIHN0cmluZywgY2Fycnkgb3V0IHRoZSBhY3Rpb24uXG4gICAgICAgIGlmICggY29tcG9uZW50RGF0YSAmJiB0eXBlb2Ygb3B0aW9ucyA9PSAnc3RyaW5nJyApIHtcbiAgICAgICAgICAgIHJldHVybiBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGNvbXBvbmVudERhdGFbIG9wdGlvbnMgXSwgY29tcG9uZW50RGF0YSwgWyBhY3Rpb24gXSApXG4gICAgICAgIH1cblxuICAgICAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCBlYWNoIG1hdGNoZWQgZWxlbWVudCBhbmQgaWYgdGhlIGNvbXBvbmVudFxuICAgICAgICAvLyBkb2VzbuKAmXQgZXhpc3QsIGNyZWF0ZSBhIG5ldyBwaWNrZXIgdXNpbmcgYHRoaXNgIGVsZW1lbnRcbiAgICAgICAgLy8gYW5kIG1lcmdpbmcgdGhlIGRlZmF1bHRzIGFuZCBvcHRpb25zIHdpdGggYSBkZWVwIGNvcHkuXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCggdGhpcyApXG4gICAgICAgICAgICBpZiAoICEkdGhpcy5kYXRhKCBuYW1lICkgKSB7XG4gICAgICAgICAgICAgICAgbmV3IFBpY2tlckNvbnN0cnVjdG9yKCB0aGlzLCBuYW1lLCBDb21wb25lbnQsIG9wdGlvbnMgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMuXG4gICAgJC5mblsgbmFtZSBdLmRlZmF1bHRzID0gQ29tcG9uZW50LmRlZmF1bHRzXG59IC8vUGlja2VyQ29uc3RydWN0b3IuZXh0ZW5kXG5cblxuXG5mdW5jdGlvbiBhcmlhKGVsZW1lbnQsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBpZiAoICQuaXNQbGFpbk9iamVjdChhdHRyaWJ1dGUpICkge1xuICAgICAgICBmb3IgKCB2YXIga2V5IGluIGF0dHJpYnV0ZSApIHtcbiAgICAgICAgICAgIGFyaWFTZXQoZWxlbWVudCwga2V5LCBhdHRyaWJ1dGVba2V5XSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXJpYVNldChlbGVtZW50LCBhdHRyaWJ1dGUsIHZhbHVlKVxuICAgIH1cbn1cbmZ1bmN0aW9uIGFyaWFTZXQoZWxlbWVudCwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgICAoYXR0cmlidXRlID09ICdyb2xlJyA/ICcnIDogJ2FyaWEtJykgKyBhdHRyaWJ1dGUsXG4gICAgICAgIHZhbHVlXG4gICAgKVxufVxuZnVuY3Rpb24gYXJpYUF0dHIoYXR0cmlidXRlLCBkYXRhKSB7XG4gICAgaWYgKCAhJC5pc1BsYWluT2JqZWN0KGF0dHJpYnV0ZSkgKSB7XG4gICAgICAgIGF0dHJpYnV0ZSA9IHsgYXR0cmlidXRlOiBkYXRhIH1cbiAgICB9XG4gICAgZGF0YSA9ICcnXG4gICAgZm9yICggdmFyIGtleSBpbiBhdHRyaWJ1dGUgKSB7XG4gICAgICAgIHZhciBhdHRyID0gKGtleSA9PSAncm9sZScgPyAnJyA6ICdhcmlhLScpICsga2V5LFxuICAgICAgICAgICAgYXR0clZhbCA9IGF0dHJpYnV0ZVtrZXldXG4gICAgICAgIGRhdGEgKz0gYXR0clZhbCA9PSBudWxsID8gJycgOiBhdHRyICsgJz1cIicgKyBhdHRyaWJ1dGVba2V5XSArICdcIidcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbn1cblxuLy8gSUU4IGJ1ZyB0aHJvd3MgYW4gZXJyb3IgZm9yIGFjdGl2ZUVsZW1lbnRzIHdpdGhpbiBpZnJhbWVzLlxuZnVuY3Rpb24gZ2V0QWN0aXZlRWxlbWVudCgpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIH0gY2F0Y2ggKCBlcnIgKSB7IH1cbn1cblxuXG5cbi8vIEV4cG9zZSB0aGUgcGlja2VyIGNvbnN0cnVjdG9yLlxucmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yXG5cblxufSkpO1xuXG5cbiIsIi8qIFBST0dSRVNTIEJBUiAqL1xudmFyIGJhciA9ICQoJy5wcm9ncmVzcy1iYXItYW5pbWF0ZWQnKTtcbiQoZnVuY3Rpb24gKCkge1xuICAgICQoYmFyKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmFyX3dpZHRoID0gJCh0aGlzKS5hdHRyKCdhcmlhLXZhbHVlbm93Jyk7XG4gICAgICAgICQodGhpcykud2lkdGgoYmFyX3dpZHRoICsgJyUnKTtcbiAgICB9KTtcbn0pO1xuXG4vKiBQQU5FTCAqL1xuXG5mdW5jdGlvbiB1cFRvKGVsLCB0YWdOYW1lKSB7XG4gICAgdGFnTmFtZSA9IHRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB3aGlsZSAoZWwgJiYgZWwucGFyZW50Tm9kZSkge1xuICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSB0YWdOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZWw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNYW55IERPTSBtZXRob2RzIHJldHVybiBudWxsIGlmIHRoZXkgZG9uJ3QgXG4gICAgLy8gZmluZCB0aGUgZWxlbWVudCB0aGV5IGFyZSBzZWFyY2hpbmcgZm9yXG4gICAgLy8gSXQgd291bGQgYmUgT0sgdG8gb21pdCB0aGUgZm9sbG93aW5nIGFuZCBqdXN0XG4gICAgLy8gcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiBudWxsO1xufVxuLy9BZGQgLyByZW1vdmUgYWN0aXZlIGNsYXNzIHRvIExJIGVsZW1lbnQgaW5zaWRlIHBvcG91dCBcbnZhciBzZWxlY3RvciA9ICcucG9wb3V0IC5wYW5lbC1oZWFkaW5nJztcbnZhciBwYXJlbnRTZWxlY3RvciA9ICcucG9wb3V0IC5wYW5lbCAuYWN0aXZlJztcblxuJChzZWxlY3Rvcikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXG4gICAgcGFyZW50RGl2ID0gdXBUbyh0aGlzLCAnRElWJyk7XG4gICAgY29uc29sZS5sb2cocGFyZW50RGl2KTtcbiAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcblxuICAgICAgICAkKHNlbGVjdG9yKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoXCIucG9wb3V0IC5wYW5lbFwiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAkKHNlbGVjdG9yKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoXCIucG9wb3V0IC5wYW5lbFwiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKHBhcmVudERpdikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbn0pOyIsIi8qIFJPVEFUSU5HIENBUkRTICovXG4oZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2FyZDEuZWZmZWN0X19jbGlja1wiKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2FyZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGNhcmQxID0gY2FyZHNbaV07XG4gICAgICAgIGNsaWNrTGlzdGVuZXIoY2FyZDEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsaWNrTGlzdGVuZXIoY2FyZCkge1xuICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMuY2xhc3NMaXN0O1xuICAgICAgICAgICAgYy5jb250YWlucyhcImZsaXBwZWRcIikgPT09IHRydWUgPyBjLnJlbW92ZShcImZsaXBwZWRcIikgOiBjLmFkZChcImZsaXBwZWRcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7IiwiLyogU0NST0xMSU5HIE5BVkJBUiAqL1xuLy9qUXVlcnkgdG8gY29sbGFwc2UgdGhlIG5hdmJhciBvbiBzY3JvbGxcbiQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgIGlmICgkKFwiLm5hdmJhclwiKS5vZmZzZXQoKS50b3AgPiA1MCkge1xuICAgICAgICAkKFwiLm5hdmJhci1maXhlZC10b3BcIikuYWRkQ2xhc3MoXCJ0b3AtbmF2LWNvbGxhcHNlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIubmF2YmFyLWZpeGVkLXRvcFwiKS5yZW1vdmVDbGFzcyhcInRvcC1uYXYtY29sbGFwc2VcIik7XG4gICAgfVxufSk7XG5cbi8valF1ZXJ5IGZvciBwYWdlIHNjcm9sbGluZyBmZWF0dXJlIC0gcmVxdWlyZXMgalF1ZXJ5IEVhc2luZyBwbHVnaW5cbiQoZnVuY3Rpb24gKCkge1xuICAgICQoJ2EucGFnZS1zY3JvbGwnKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgJGFuY2hvciA9ICQodGhpcyk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5zdG9wKCkuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoJGFuY2hvci5hdHRyKCdocmVmJykpLm9mZnNldCgpLnRvcFxuICAgICAgICB9LCAxNTAwLCAnZWFzZUluT3V0RXhwbycpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xufSk7XG4iLCIvKiBTSURFIE5BViAqL1xuXG4oZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBtZXRob2RzID0ge1xuICAgICAgICBpbml0OiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgIG1lbnVXaWR0aDogMjQwLFxuICAgICAgICAgICAgICAgIGVkZ2U6ICdsZWZ0JyxcbiAgICAgICAgICAgICAgICBjbG9zZU9uQ2xpY2s6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgJCh0aGlzKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciBtZW51X2lkID0gJChcIiNcIiArICR0aGlzLmF0dHIoJ2RhdGEtYWN0aXZhdGVzJykpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRvIHdpZHRoXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWVudVdpZHRoICE9IDI0MCkge1xuICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygnd2lkdGgnLCBvcHRpb25zLm1lbnVXaWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIFRvdWNoIEFyZWFcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCQoJzxkaXYgY2xhc3M9XCJkcmFnLXRhcmdldFwiPjwvZGl2PicpKTtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCdsZWZ0JywgLTEgKiAob3B0aW9ucy5tZW51V2lkdGggKyAxMCkpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZy10YXJnZXQnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiAwXG4gICAgICAgICAgICAgICAgICAgIH0pOyAvLyBBZGQgVG91Y2ggQXJlYVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuYWRkQ2xhc3MoJ3JpZ2h0LWFsaWduZWQnKSAvLyBDaGFuZ2UgdGV4dC1hbGlnbm1lbnQgdG8gcmlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ3JpZ2h0JywgLTEgKiAob3B0aW9ucy5tZW51V2lkdGggKyAxMCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdsZWZ0JywgJycpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZy10YXJnZXQnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3JpZ2h0JzogMFxuICAgICAgICAgICAgICAgICAgICB9KTsgLy8gQWRkIFRvdWNoIEFyZWFcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBmaXhlZCBzaWRlbmF2LCBicmluZyBtZW51IG91dFxuICAgICAgICAgICAgICAgIGlmIChtZW51X2lkLmhhc0NsYXNzKCdmaXhlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDk5Mikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ2xlZnQnLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFdpbmRvdyByZXNpemUgdG8gcmVzZXQgb24gbGFyZ2Ugc2NyZWVucyBmaXhlZFxuICAgICAgICAgICAgICAgIGlmIChtZW51X2lkLmhhc0NsYXNzKCdmaXhlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gOTkyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xvc2UgbWVudSBpZiB3aW5kb3cgaXMgcmVzaXplZCBiaWdnZXIgdGhhbiA5OTIgYW5kIHVzZXIgaGFzIGZpeGVkIHNpZGVuYXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnI3NpZGVuYXYtb3ZlcmxheScpLmNzcygnb3BhY2l0eScpICE9PSAwICYmIG1lbnVPdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCd3aWR0aCcsIG9wdGlvbnMubWVudVdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lbnVPdXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygnbGVmdCcsIC0xICogKG9wdGlvbnMubWVudVdpZHRoICsgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCdyaWdodCcsIC0xICogKG9wdGlvbnMubWVudVdpZHRoICsgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBjbG9zZU9uQ2xpY2ssIHRoZW4gYWRkIGNsb3NlIGV2ZW50IGZvciBhbGwgYSB0YWdzIGluIHNpZGUgc2lkZU5hdlxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsb3NlT25DbGljayA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBtZW51X2lkLm9uKFwiY2xpY2suaXRlbWNsaWNrXCIsIFwiYTpub3QoLmNvbGxhcHNpYmxlLWhlYWRlcilcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVNZW51KHJlc3RvcmVOYXYpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBtZW51T3V0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVlbmFibGUgc2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNzaWRlbmF2LW92ZXJsYXknKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHBoYW50b20gZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZy10YXJnZXQnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJzAnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IC0xICogKG9wdGlvbnMubWVudVdpZHRoICsgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdG9yZU5hdiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBGaXhlZCBzaWRlbmF2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygnd2lkdGgnLCBvcHRpb25zLm1lbnVXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgcGhhbnRvbSBkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0xICogKG9wdGlvbnMubWVudVdpZHRoICsgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdG9yZU5hdiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBGaXhlZCBzaWRlbmF2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygnd2lkdGgnLCBvcHRpb25zLm1lbnVXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgICAgICAvLyBUb3VjaCBFdmVudFxuICAgICAgICAgICAgICAgIHZhciBwYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIG1lbnVPdXQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuaGFtbWVyKHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudF9kZWZhdWx0OiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pLmJpbmQoJ3BhbicsIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZ2VzdHVyZS5wb2ludGVyVHlwZSA9PSBcInRvdWNoXCIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGUuZ2VzdHVyZS5kaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGUuZ2VzdHVyZS5jZW50ZXIueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gZS5nZXN0dXJlLmNlbnRlci55O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlbG9jaXR5WCA9IGUuZ2VzdHVyZS52ZWxvY2l0eVg7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpc2FibGUgU2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgb3ZlcmxheSBkb2VzIG5vdCBleGlzdCwgY3JlYXRlIG9uZSBhbmQgaWYgaXQgaXMgY2xpY2tlZCwgY2xvc2UgbWVudVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNzaWRlbmF2LW92ZXJsYXknKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlcmxheSA9ICQoJzxkaXYgaWQ9XCJzaWRlbmF2LW92ZXJsYXlcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LmNzcygnb3BhY2l0eScsIDApLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQob3ZlcmxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgd2l0aGluIGJvdW5kYXJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ID4gb3B0aW9ucy5tZW51V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IG9wdGlvbnMubWVudVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0IERpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4IDwgKG9wdGlvbnMubWVudVdpZHRoIC8gMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudU91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSaWdodCBEaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh4ID49IChvcHRpb25zLm1lbnVXaWR0aCAvIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVPdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCdsZWZ0JywgKHggLSBvcHRpb25zLm1lbnVXaWR0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0IERpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4IDwgKHdpbmRvdy5pbm5lcldpZHRoIC0gb3B0aW9ucy5tZW51V2lkdGggLyAyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51T3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHQgRGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA+PSAod2luZG93LmlubmVyV2lkdGggLSBvcHRpb25zLm1lbnVXaWR0aCAvIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVPdXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0UG9zID0gLTEgKiAoeCAtIG9wdGlvbnMubWVudVdpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0UG9zID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodFBvcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3JpZ2h0JywgcmlnaHRQb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQZXJjZW50YWdlIG92ZXJsYXlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdmVybGF5UGVyYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXlQZXJjID0geCAvIG9wdGlvbnMubWVudVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaWRlbmF2LW92ZXJsYXknKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IG92ZXJsYXlQZXJjXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXlQZXJjID0gTWF0aC5hYnMoKHggLSB3aW5kb3cuaW5uZXJXaWR0aCkgLyBvcHRpb25zLm1lbnVXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGVuYXYtb3ZlcmxheScpLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogb3ZlcmxheVBlcmNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSkuYmluZCgncGFuZW5kJywgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5nZXN0dXJlLnBvaW50ZXJUeXBlID09IFwidG91Y2hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlbG9jaXR5WCA9IGUuZ2VzdHVyZS52ZWxvY2l0eVg7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB2ZWxvY2l0eVggPD0gMC4zIHRoZW4gdGhlIHVzZXIgaXMgZmxpbmdpbmcgdGhlIG1lbnUgY2xvc2VkIHNvIGlnbm9yZSBtZW51T3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChtZW51T3V0ICYmIHZlbG9jaXR5WCA8PSAwLjMpIHx8IHZlbG9jaXR5WCA8IC0wLjUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaWRlbmF2LW92ZXJsYXknKS52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnNTAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghbWVudU91dCB8fCB2ZWxvY2l0eVggPiAwLjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5hYmxlIFNjcm9sbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2xpZGUgbWVudSBjbG9zZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtMSAqIChvcHRpb25zLm1lbnVXaWR0aCArIDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChtZW51T3V0ICYmIHZlbG9jaXR5WCA+PSAtMC4zKSB8fCB2ZWxvY2l0eVggPiAwLjUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kcmFnLXRhcmdldCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzUwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW1lbnVPdXQgfHwgdmVsb2NpdHlYIDwgLTAuMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbmFibGUgU2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTbGlkZSBtZW51IGNsb3NlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtMSAqIChvcHRpb25zLm1lbnVXaWR0aCArIDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkdGhpcy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZW51T3V0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51T3V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVNZW51KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpc2FibGUgU2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICc1MCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWctdGFyZ2V0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICc1MCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnZlbG9jaXR5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ2xlZnQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdmVybGF5ID0gJCgnPGRpdiBpZD1cInNpZGVuYXYtb3ZlcmxheVwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5jc3MoJ29wYWNpdHknLCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVPdXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVNZW51KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChvdmVybGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudU91dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfSxcbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9LFxuICAgICAgICBoaWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgICQuZm4uc2lkZU5hdiA9IGZ1bmN0aW9uIChtZXRob2RPck9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXSkge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXS5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSAnb2JqZWN0JyB8fCAhbWV0aG9kT3JPcHRpb25zKSB7XG4gICAgICAgICAgICAvLyBEZWZhdWx0IHRvIFwiaW5pdFwiXG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkLmVycm9yKCdNZXRob2QgJyArIG1ldGhvZE9yT3B0aW9ucyArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnNpZGVOYXYnKTtcbiAgICAgICAgfVxuICAgIH07IC8vIFBsdWdpbiBlbmRcbn0oalF1ZXJ5KSk7IiwiLy9TTU9PVEggU0NST0xMXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJCgnYVtocmVmXj1cIiNcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuaGFzaDtcbiAgICAgICAgdmFyICR0YXJnZXQgPSAkKHRhcmdldCk7XG5cbiAgICAgICAgJCgnaHRtbCwgYm9keScpLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgICAgICdzY3JvbGxUb3AnOiAkdGFyZ2V0Lm9mZnNldCgpLnRvcFxuICAgICAgICB9LCA5MDAsICdzd2luZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdGFyZ2V0O1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIiwiLypcbiAqIFRvYXN0clxuICogQ29weXJpZ2h0IDIwMTItMjAxNVxuICogQXV0aG9yczogSm9obiBQYXBhLCBIYW5zIEZqw6RsbGVtYXJrLCBhbmQgVGltIEZlcnJlbGwuXG4gKiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogVXNlLCByZXByb2R1Y3Rpb24sIGRpc3RyaWJ1dGlvbiwgYW5kIG1vZGlmaWNhdGlvbiBvZiB0aGlzIGNvZGUgaXMgc3ViamVjdCB0byB0aGUgdGVybXMgYW5kXG4gKiBjb25kaXRpb25zIG9mIHRoZSBNSVQgbGljZW5zZSwgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gKlxuICogQVJJQSBTdXBwb3J0OiBHcmV0YSBLcmFmc2lnXG4gKlxuICogUHJvamVjdDogaHR0cHM6Ly9naXRodWIuY29tL0NvZGVTZXZlbi90b2FzdHJcbiAqL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuKGZ1bmN0aW9uIChkZWZpbmUpIHtcbiAgICBkZWZpbmUoWydqcXVlcnknXSwgZnVuY3Rpb24gKCQpIHtcbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGNvbnRhaW5lcjtcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciB0b2FzdElkID0gMDtcbiAgICAgICAgICAgIHZhciB0b2FzdFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgZXJyb3I6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgaW5mbzogJ2luZm8nLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICB3YXJuaW5nOiAnd2FybmluZydcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB0b2FzdHIgPSB7XG4gICAgICAgICAgICAgICAgY2xlYXI6IGNsZWFyLFxuICAgICAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBnZXRDb250YWluZXI6IGdldENvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBpbmZvOiBpbmZvLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZTogc3Vic2NyaWJlLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzIuMS4yJyxcbiAgICAgICAgICAgICAgICB3YXJuaW5nOiB3YXJuaW5nXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNUb2FzdDtcblxuICAgICAgICAgICAgcmV0dXJuIHRvYXN0cjtcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRvYXN0VHlwZS5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBnZXRPcHRpb25zKCkuaWNvbkNsYXNzZXMuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNPdmVycmlkZTogb3B0aW9uc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q29udGFpbmVyKG9wdGlvbnMsIGNyZWF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucykgeyBvcHRpb25zID0gZ2V0T3B0aW9ucygpOyB9XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lciA9ICQoJyMnICsgb3B0aW9ucy5jb250YWluZXJJZCk7XG4gICAgICAgICAgICAgICAgaWYgKCRjb250YWluZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkY29udGFpbmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3JlYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIgPSBjcmVhdGVDb250YWluZXIob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAkY29udGFpbmVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbmZvKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdG9hc3RUeXBlLmluZm8sXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogZ2V0T3B0aW9ucygpLmljb25DbGFzc2VzLmluZm8sXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNPdmVycmlkZTogb3B0aW9uc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBjYWxsYmFjaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRvYXN0VHlwZS5zdWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6IGdldE9wdGlvbnMoKS5pY29uQ2xhc3Nlcy5zdWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zT3ZlcnJpZGU6IG9wdGlvbnNPdmVycmlkZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHdhcm5pbmcobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0b2FzdFR5cGUud2FybmluZyxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBnZXRPcHRpb25zKCkuaWNvbkNsYXNzZXMud2FybmluZyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc092ZXJyaWRlOiBvcHRpb25zT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhcigkdG9hc3RFbGVtZW50LCBjbGVhck9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBpZiAoISRjb250YWluZXIpIHsgZ2V0Q29udGFpbmVyKG9wdGlvbnMpOyB9XG4gICAgICAgICAgICAgICAgaWYgKCFjbGVhclRvYXN0KCR0b2FzdEVsZW1lbnQsIG9wdGlvbnMsIGNsZWFyT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJDb250YWluZXIob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmUoJHRvYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgICAgIGlmICghJGNvbnRhaW5lcikgeyBnZXRDb250YWluZXIob3B0aW9ucyk7IH1cbiAgICAgICAgICAgICAgICBpZiAoJHRvYXN0RWxlbWVudCAmJiAkKCc6Zm9jdXMnLCAkdG9hc3RFbGVtZW50KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVG9hc3QoJHRvYXN0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRjb250YWluZXIuY2hpbGRyZW4oKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGludGVybmFsIGZ1bmN0aW9uc1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhckNvbnRhaW5lciAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciB0b2FzdHNUb0NsZWFyID0gJGNvbnRhaW5lci5jaGlsZHJlbigpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0b2FzdHNUb0NsZWFyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVG9hc3QoJCh0b2FzdHNUb0NsZWFyW2ldKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhclRvYXN0ICgkdG9hc3RFbGVtZW50LCBvcHRpb25zLCBjbGVhck9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9yY2UgPSBjbGVhck9wdGlvbnMgJiYgY2xlYXJPcHRpb25zLmZvcmNlID8gY2xlYXJPcHRpb25zLmZvcmNlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCR0b2FzdEVsZW1lbnQgJiYgKGZvcmNlIHx8ICQoJzpmb2N1cycsICR0b2FzdEVsZW1lbnQpLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudFtvcHRpb25zLmhpZGVNZXRob2RdKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmhpZGVEdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5oaWRlRWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsgcmVtb3ZlVG9hc3QoJHRvYXN0RWxlbWVudCk7IH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbnRhaW5lcihvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lciA9ICQoJzxkaXYvPicpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIG9wdGlvbnMuY29udGFpbmVySWQpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhvcHRpb25zLnBvc2l0aW9uQ2xhc3MpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWxpdmUnLCAncG9saXRlJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3JvbGUnLCAnYWxlcnQnKTtcblxuICAgICAgICAgICAgICAgICRjb250YWluZXIuYXBwZW5kVG8oJChvcHRpb25zLnRhcmdldCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkY29udGFpbmVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXREZWZhdWx0cygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXBUb0Rpc21pc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0Q2xhc3M6ICd0b2FzdCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiAndG9hc3QtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgZGVidWc6IGZhbHNlLFxuXG4gICAgICAgICAgICAgICAgICAgIHNob3dNZXRob2Q6ICdmYWRlSW4nLCAvL2ZhZGVJbiwgc2xpZGVEb3duLCBhbmQgc2hvdyBhcmUgYnVpbHQgaW50byBqUXVlcnlcbiAgICAgICAgICAgICAgICAgICAgc2hvd0R1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgIHNob3dFYXNpbmc6ICdzd2luZycsIC8vc3dpbmcgYW5kIGxpbmVhciBhcmUgYnVpbHQgaW50byBqUXVlcnlcbiAgICAgICAgICAgICAgICAgICAgb25TaG93bjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBoaWRlTWV0aG9kOiAnZmFkZU91dCcsXG4gICAgICAgICAgICAgICAgICAgIGhpZGVEdXJhdGlvbjogMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgaGlkZUVhc2luZzogJ3N3aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgb25IaWRkZW46IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VNZXRob2Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZUR1cmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VFYXNpbmc6IGZhbHNlLFxuXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkVGltZU91dDogMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAndG9hc3QtZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mbzogJ3RvYXN0LWluZm8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogJ3RvYXN0LXN1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ3RvYXN0LXdhcm5pbmcnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogJ3RvYXN0LWluZm8nLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbkNsYXNzOiAndG9hc3QtdG9wLXJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgdGltZU91dDogNTAwMCwgLy8gU2V0IHRpbWVPdXQgYW5kIGV4dGVuZGVkVGltZU91dCB0byAwIHRvIG1ha2UgaXQgc3RpY2t5XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlQ2xhc3M6ICd0b2FzdC10aXRsZScsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VDbGFzczogJ3RvYXN0LW1lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICBlc2NhcGVIdG1sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAnYm9keScsXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlSHRtbDogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiPiZ0aW1lczs8L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAgICAgICBuZXdlc3RPblRvcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudER1cGxpY2F0ZXM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0JhcjogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwdWJsaXNoKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxpc3RlbmVyKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKGFyZ3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBub3RpZnkobWFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgdmFyIGljb25DbGFzcyA9IG1hcC5pY29uQ2xhc3MgfHwgb3B0aW9ucy5pY29uQ2xhc3M7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChtYXAub3B0aW9uc092ZXJyaWRlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKG9wdGlvbnMsIG1hcC5vcHRpb25zT3ZlcnJpZGUpO1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSBtYXAub3B0aW9uc092ZXJyaWRlLmljb25DbGFzcyB8fCBpY29uQ2xhc3M7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZEV4aXQob3B0aW9ucywgbWFwKSkgeyByZXR1cm47IH1cblxuICAgICAgICAgICAgICAgIHRvYXN0SWQrKztcblxuICAgICAgICAgICAgICAgICRjb250YWluZXIgPSBnZXRDb250YWluZXIob3B0aW9ucywgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJ2YWxJZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyICR0b2FzdEVsZW1lbnQgPSAkKCc8ZGl2Lz4nKTtcbiAgICAgICAgICAgICAgICB2YXIgJHRpdGxlRWxlbWVudCA9ICQoJzxkaXYvPicpO1xuICAgICAgICAgICAgICAgIHZhciAkbWVzc2FnZUVsZW1lbnQgPSAkKCc8ZGl2Lz4nKTtcbiAgICAgICAgICAgICAgICB2YXIgJHByb2dyZXNzRWxlbWVudCA9ICQoJzxkaXYvPicpO1xuICAgICAgICAgICAgICAgIHZhciAkY2xvc2VFbGVtZW50ID0gJChvcHRpb25zLmNsb3NlSHRtbCk7XG4gICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzQmFyID0ge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbElkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBoaWRlRXRhOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtYXhIaWRlVGltZTogbnVsbFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdElkOiB0b2FzdElkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ3Zpc2libGUnLFxuICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbWFwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHBlcnNvbmFsaXplVG9hc3QoKTtcblxuICAgICAgICAgICAgICAgIGRpc3BsYXlUb2FzdCgpO1xuXG4gICAgICAgICAgICAgICAgaGFuZGxlRXZlbnRzKCk7XG5cbiAgICAgICAgICAgICAgICBwdWJsaXNoKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlYnVnICYmIGNvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiAkdG9hc3RFbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXNjYXBlSHRtbChzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0gXCJcIjtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgJyYjMzk7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcGVyc29uYWxpemVUb2FzdCgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbigpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaXRsZSgpO1xuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldENsb3NlQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFByb2dyZXNzQmFyKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFNlcXVlbmNlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRXZlbnRzKCkge1xuICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmhvdmVyKHN0aWNrQXJvdW5kLCBkZWxheWVkSGlkZVRvYXN0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLm9uY2xpY2sgJiYgb3B0aW9ucy50YXBUb0Rpc21pc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuY2xpY2soaGlkZVRvYXN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsb3NlQnV0dG9uICYmICRjbG9zZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjbG9zZUVsZW1lbnQuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNhbmNlbEJ1YmJsZSAhPT0gdW5kZWZpbmVkICYmIGV2ZW50LmNhbmNlbEJ1YmJsZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlVG9hc3QodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uY2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbmNsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlVG9hc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGlzcGxheVRvYXN0KCkge1xuICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50W29wdGlvbnMuc2hvd01ldGhvZF0oXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZHVyYXRpb246IG9wdGlvbnMuc2hvd0R1cmF0aW9uLCBlYXNpbmc6IG9wdGlvbnMuc2hvd0Vhc2luZywgY29tcGxldGU6IG9wdGlvbnMub25TaG93bn1cbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50aW1lT3V0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxJZCA9IHNldFRpbWVvdXQoaGlkZVRvYXN0LCBvcHRpb25zLnRpbWVPdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIubWF4SGlkZVRpbWUgPSBwYXJzZUZsb2F0KG9wdGlvbnMudGltZU91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5oaWRlRXRhID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBwcm9ncmVzc0Jhci5tYXhIaWRlVGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnByb2dyZXNzQmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHVwZGF0ZVByb2dyZXNzLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRJY29uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFwLmljb25DbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLnRvYXN0Q2xhc3MpLmFkZENsYXNzKGljb25DbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRTZXF1ZW5jZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubmV3ZXN0T25Ub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250YWluZXIucHJlcGVuZCgkdG9hc3RFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250YWluZXIuYXBwZW5kKCR0b2FzdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0VGl0bGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXAudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aXRsZUVsZW1lbnQuYXBwZW5kKCFvcHRpb25zLmVzY2FwZUh0bWwgPyBtYXAudGl0bGUgOiBlc2NhcGVIdG1sKG1hcC50aXRsZSkpLmFkZENsYXNzKG9wdGlvbnMudGl0bGVDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmFwcGVuZCgkdGl0bGVFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldE1lc3NhZ2UoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXAubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VFbGVtZW50LmFwcGVuZCghb3B0aW9ucy5lc2NhcGVIdG1sID8gbWFwLm1lc3NhZ2UgOiBlc2NhcGVIdG1sKG1hcC5tZXNzYWdlKSkuYWRkQ2xhc3Mob3B0aW9ucy5tZXNzYWdlQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5hcHBlbmQoJG1lc3NhZ2VFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldENsb3NlQnV0dG9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jbG9zZUJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNsb3NlRWxlbWVudC5hZGRDbGFzcygndG9hc3QtY2xvc2UtYnV0dG9uJykuYXR0cigncm9sZScsICdidXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQucHJlcGVuZCgkY2xvc2VFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldFByb2dyZXNzQmFyKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wcm9ncmVzc0Jhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHByb2dyZXNzRWxlbWVudC5hZGRDbGFzcygndG9hc3QtcHJvZ3Jlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQucHJlcGVuZCgkcHJvZ3Jlc3NFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNob3VsZEV4aXQob3B0aW9ucywgbWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnByZXZlbnREdXBsaWNhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwLm1lc3NhZ2UgPT09IHByZXZpb3VzVG9hc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNUb2FzdCA9IG1hcC5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoaWRlVG9hc3Qob3ZlcnJpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9IG92ZXJyaWRlICYmIG9wdGlvbnMuY2xvc2VNZXRob2QgIT09IGZhbHNlID8gb3B0aW9ucy5jbG9zZU1ldGhvZCA6IG9wdGlvbnMuaGlkZU1ldGhvZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gb3ZlcnJpZGUgJiYgb3B0aW9ucy5jbG9zZUR1cmF0aW9uICE9PSBmYWxzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNsb3NlRHVyYXRpb24gOiBvcHRpb25zLmhpZGVEdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVhc2luZyA9IG92ZXJyaWRlICYmIG9wdGlvbnMuY2xvc2VFYXNpbmcgIT09IGZhbHNlID8gb3B0aW9ucy5jbG9zZUVhc2luZyA6IG9wdGlvbnMuaGlkZUVhc2luZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJzpmb2N1cycsICR0b2FzdEVsZW1lbnQpLmxlbmd0aCAmJiAhb3ZlcnJpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocHJvZ3Jlc3NCYXIuaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdG9hc3RFbGVtZW50W21ldGhvZF0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVRvYXN0KCR0b2FzdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uSGlkZGVuICYmIHJlc3BvbnNlLnN0YXRlICE9PSAnaGlkZGVuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm9uSGlkZGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXRlID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGlzaChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGF5ZWRIaWRlVG9hc3QoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRpbWVPdXQgPiAwIHx8IG9wdGlvbnMuZXh0ZW5kZWRUaW1lT3V0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxJZCA9IHNldFRpbWVvdXQoaGlkZVRvYXN0LCBvcHRpb25zLmV4dGVuZGVkVGltZU91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5tYXhIaWRlVGltZSA9IHBhcnNlRmxvYXQob3B0aW9ucy5leHRlbmRlZFRpbWVPdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuaGlkZUV0YSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgcHJvZ3Jlc3NCYXIubWF4SGlkZVRpbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdGlja0Fyb3VuZCgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGludGVydmFsSWQpO1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5oaWRlRXRhID0gMDtcbiAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5zdG9wKHRydWUsIHRydWUpW29wdGlvbnMuc2hvd01ldGhvZF0oXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZHVyYXRpb246IG9wdGlvbnMuc2hvd0R1cmF0aW9uLCBlYXNpbmc6IG9wdGlvbnMuc2hvd0Vhc2luZ31cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSAoKHByb2dyZXNzQmFyLmhpZGVFdGEgLSAobmV3IERhdGUoKS5nZXRUaW1lKCkpKSAvIHByb2dyZXNzQmFyLm1heEhpZGVUaW1lKSAqIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgJHByb2dyZXNzRWxlbWVudC53aWR0aChwZXJjZW50YWdlICsgJyUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHt9LCBnZXREZWZhdWx0cygpLCB0b2FzdHIub3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZVRvYXN0KCR0b2FzdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRjb250YWluZXIpIHsgJGNvbnRhaW5lciA9IGdldENvbnRhaW5lcigpOyB9XG4gICAgICAgICAgICAgICAgaWYgKCR0b2FzdEVsZW1lbnQuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICgkY29udGFpbmVyLmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVG9hc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pKCk7XG4gICAgfSk7XG59KHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSA6IGZ1bmN0aW9uIChkZXBzLCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7IC8vTm9kZVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy50b2FzdHIgPSBmYWN0b3J5KHdpbmRvdy5qUXVlcnkpO1xuICAgIH1cbn0pKTtcbiIsIi8qISBWZWxvY2l0eUpTLm9yZyAoMS4yLjIpLiAoQykgMjAxNCBKdWxpYW4gU2hhcGlyby4gTUlUIEBsaWNlbnNlOiBlbi53aWtpcGVkaWEub3JnL3dpa2kvTUlUX0xpY2Vuc2UgKi9cbi8qISBWZWxvY2l0eUpTLm9yZyBqUXVlcnkgU2hpbSAoMS4wLjEpLiAoQykgMjAxNCBUaGUgalF1ZXJ5IEZvdW5kYXRpb24uIE1JVCBAbGljZW5zZTogZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlLiAqL1xuISBmdW5jdGlvbiAoZSkge1xuICAgIGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICB2YXIgdCA9IGUubGVuZ3RoLFxuICAgICAgICAgICAgciA9ICQudHlwZShlKTtcbiAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PT0gciB8fCAkLmlzV2luZG93KGUpID8gITEgOiAxID09PSBlLm5vZGVUeXBlICYmIHQgPyAhMCA6IFwiYXJyYXlcIiA9PT0gciB8fCAwID09PSB0IHx8IFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgJiYgdCA+IDAgJiYgdCAtIDEgaW4gZVxuICAgIH1cbiAgICBpZiAoIWUualF1ZXJ5KSB7XG4gICAgICAgIHZhciAkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgJC5mbi5pbml0KGUsIHQpXG4gICAgICAgIH07XG4gICAgICAgICQuaXNXaW5kb3cgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gZSAmJiBlID09IGUud2luZG93XG4gICAgICAgIH0sICQudHlwZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlID8gZSArIFwiXCIgOiBcIm9iamVjdFwiID09IHR5cGVvZiBlIHx8IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSA/IGFbby5jYWxsKGUpXSB8fCBcIm9iamVjdFwiIDogdHlwZW9mIGVcbiAgICAgICAgfSwgJC5pc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXlcIiA9PT0gJC50eXBlKGUpXG4gICAgICAgIH0sICQuaXNQbGFpbk9iamVjdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgIGlmICghZSB8fCBcIm9iamVjdFwiICE9PSAkLnR5cGUoZSkgfHwgZS5ub2RlVHlwZSB8fCAkLmlzV2luZG93KGUpKSByZXR1cm4gITE7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChlLmNvbnN0cnVjdG9yICYmICFuLmNhbGwoZSwgXCJjb25zdHJ1Y3RvclwiKSAmJiAhbi5jYWxsKGUuY29uc3RydWN0b3IucHJvdG90eXBlLCBcImlzUHJvdG90eXBlT2ZcIikpIHJldHVybiAhMVxuICAgICAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgIHJldHVybiAhMVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh0IGluIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCB8fCBuLmNhbGwoZSwgdClcbiAgICAgICAgfSwgJC5lYWNoID0gZnVuY3Rpb24gKGUsIHIsIGEpIHtcbiAgICAgICAgICAgIHZhciBuLCBvID0gMCxcbiAgICAgICAgICAgICAgICBpID0gZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcyA9IHQoZSk7XG4gICAgICAgICAgICBpZiAoYSkge1xuICAgICAgICAgICAgICAgIGlmIChzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgaSA+IG8gJiYgKG4gPSByLmFwcGx5KGVbb10sIGEpLCBuICE9PSAhMSk7IG8rKyk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBmb3IgKG8gaW4gZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gci5hcHBseShlW29dLCBhKSwgbiA9PT0gITEpIGJyZWFrXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHMpXG4gICAgICAgICAgICAgICAgZm9yICg7IGkgPiBvICYmIChuID0gci5jYWxsKGVbb10sIG8sIGVbb10pLCBuICE9PSAhMSk7IG8rKyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZm9yIChvIGluIGUpXG4gICAgICAgICAgICAgICAgICAgIGlmIChuID0gci5jYWxsKGVbb10sIG8sIGVbb10pLCBuID09PSAhMSkgYnJlYWs7IHJldHVybiBlXG4gICAgICAgIH0sICQuZGF0YSA9IGZ1bmN0aW9uIChlLCB0LCBhKSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBlWyQuZXhwYW5kb10sXG4gICAgICAgICAgICAgICAgICAgIG8gPSBuICYmIHJbbl07XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIG87XG4gICAgICAgICAgICAgICAgaWYgKG8gJiYgdCBpbiBvKSByZXR1cm4gb1t0XVxuICAgICAgICAgICAgfSBlbHNlIGlmICh2b2lkIDAgIT09IHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbiA9IGVbJC5leHBhbmRvXSB8fCAoZVskLmV4cGFuZG9dID0gKyskLnV1aWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiByW25dID0gcltuXSB8fCB7fSwgcltuXVt0XSA9IGEsIGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgJC5yZW1vdmVEYXRhID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBhID0gZVskLmV4cGFuZG9dLFxuICAgICAgICAgICAgICAgIG4gPSBhICYmIHJbYV07XG4gICAgICAgICAgICBuICYmICQuZWFjaCh0LCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBuW3RdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCAkLmV4dGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlLCB0LCByLCBhLCBuLCBvLCBpID0gYXJndW1lbnRzWzBdIHx8IHt9LFxuICAgICAgICAgICAgICAgIHMgPSAxLFxuICAgICAgICAgICAgICAgIGwgPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHUgPSAhMTtcbiAgICAgICAgICAgIGZvciAoXCJib29sZWFuXCIgPT0gdHlwZW9mIGkgJiYgKHUgPSBpLCBpID0gYXJndW1lbnRzW3NdIHx8IHt9LCBzKyspLCBcIm9iamVjdFwiICE9IHR5cGVvZiBpICYmIFwiZnVuY3Rpb25cIiAhPT0gJC50eXBlKGkpICYmIChpID0ge30pLCBzID09PSBsICYmIChpID0gdGhpcywgcy0tKTsgbCA+IHM7IHMrKylcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSAobiA9IGFyZ3VtZW50c1tzXSkpXG4gICAgICAgICAgICAgICAgICAgIGZvciAoYSBpbiBuKSBlID0gaVthXSwgciA9IG5bYV0sIGkgIT09IHIgJiYgKHUgJiYgciAmJiAoJC5pc1BsYWluT2JqZWN0KHIpIHx8ICh0ID0gJC5pc0FycmF5KHIpKSkgPyAodCA/ICh0ID0gITEsIG8gPSBlICYmICQuaXNBcnJheShlKSA/IGUgOiBbXSkgOiBvID0gZSAmJiAkLmlzUGxhaW5PYmplY3QoZSkgPyBlIDoge30sIGlbYV0gPSAkLmV4dGVuZCh1LCBvLCByKSkgOiB2b2lkIDAgIT09IHIgJiYgKGlbYV0gPSByKSk7XG4gICAgICAgICAgICByZXR1cm4gaVxuICAgICAgICB9LCAkLnF1ZXVlID0gZnVuY3Rpb24gKGUsIHIsIGEpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG4oZSwgcikge1xuICAgICAgICAgICAgICAgIHZhciBhID0gciB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPSBlICYmICh0KE9iamVjdChlKSkgPyAhIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSArdC5sZW5ndGgsIGEgPSAwLCBuID0gZS5sZW5ndGg7IHIgPiBhOykgZVtuKytdID0gdFthKytdO1xuICAgICAgICAgICAgICAgICAgICBpZiAociAhPT0gcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyB2b2lkIDAgIT09IHRbYV07KSBlW24rK10gPSB0W2ErK107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmxlbmd0aCA9IG4sIGVcbiAgICAgICAgICAgICAgICB9KGEsIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBbZV0gOiBlKSA6IFtdLnB1c2guY2FsbChhLCBlKSksIGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgciA9IChyIHx8IFwiZnhcIikgKyBcInF1ZXVlXCI7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSAkLmRhdGEoZSwgcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgPyAoIW8gfHwgJC5pc0FycmF5KGEpID8gbyA9ICQuZGF0YShlLCByLCBuKGEpKSA6IG8ucHVzaChhKSwgbykgOiBvIHx8IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sICQuZGVxdWV1ZSA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAkLmVhY2goZS5ub2RlVHlwZSA/IFtlXSA6IGUsIGZ1bmN0aW9uIChlLCByKSB7XG4gICAgICAgICAgICAgICAgdCA9IHQgfHwgXCJmeFwiO1xuICAgICAgICAgICAgICAgIHZhciBhID0gJC5xdWV1ZShyLCB0KSxcbiAgICAgICAgICAgICAgICAgICAgbiA9IGEuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBcImlucHJvZ3Jlc3NcIiA9PT0gbiAmJiAobiA9IGEuc2hpZnQoKSksIG4gJiYgKFwiZnhcIiA9PT0gdCAmJiBhLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLCBuLmNhbGwociwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkLmRlcXVldWUociwgdClcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sICQuZm4gPSAkLnByb3RvdHlwZSA9IHtcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUubm9kZVR5cGUpIHJldHVybiB0aGlzWzBdID0gZSwgdGhpcztcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgYSBET00gbm9kZS5cIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID8gdGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHQudG9wICsgKGUucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuc2Nyb2xsVG9wIHx8IDApIC0gKGRvY3VtZW50LmNsaWVudFRvcCB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogdC5sZWZ0ICsgKGUucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuc2Nyb2xsTGVmdCB8fCAwKSAtIChkb2N1bWVudC5jbGllbnRMZWZ0IHx8IDApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50OyBlICYmIFwiaHRtbFwiID09PSAhZS5ub2RlVHlwZS50b0xvd2VyQ2FzZSAmJiBcInN0YXRpY1wiID09PSBlLnN0eWxlLnBvc2l0aW9uOykgZSA9IGUub2Zmc2V0UGFyZW50O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSB8fCBkb2N1bWVudFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGUgPSBlLmFwcGx5KHQpLFxuICAgICAgICAgICAgICAgICAgICByID0gdGhpcy5vZmZzZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgYSA9IC9eKD86Ym9keXxodG1sKSQvaS50ZXN0KGUubm9kZU5hbWUpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICB9IDogJChlKS5vZmZzZXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gci50b3AgLT0gcGFyc2VGbG9hdCh0LnN0eWxlLm1hcmdpblRvcCkgfHwgMCwgci5sZWZ0IC09IHBhcnNlRmxvYXQodC5zdHlsZS5tYXJnaW5MZWZ0KSB8fCAwLCBlLnN0eWxlICYmIChhLnRvcCArPSBwYXJzZUZsb2F0KGUuc3R5bGUuYm9yZGVyVG9wV2lkdGgpIHx8IDAsIGEubGVmdCArPSBwYXJzZUZsb2F0KGUuc3R5bGUuYm9yZGVyTGVmdFdpZHRoKSB8fCAwKSwge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHIudG9wIC0gYS50b3AsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHIubGVmdCAtIGEubGVmdFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHIgPSB7fTtcbiAgICAgICAgJC5leHBhbmRvID0gXCJ2ZWxvY2l0eVwiICsgKG5ldyBEYXRlKS5nZXRUaW1lKCksICQudXVpZCA9IDA7XG4gICAgICAgIGZvciAodmFyIGEgPSB7fSwgbiA9IGEuaGFzT3duUHJvcGVydHksIG8gPSBhLnRvU3RyaW5nLCBpID0gXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLCBzID0gMDsgcyA8IGkubGVuZ3RoOyBzKyspIGFbXCJbb2JqZWN0IFwiICsgaVtzXSArIFwiXVwiXSA9IGlbc10udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgJC5mbi5pbml0LnByb3RvdHlwZSA9ICQuZm4sIGUuVmVsb2NpdHkgPSB7XG4gICAgICAgICAgICBVdGlsaXRpZXM6ICRcbiAgICAgICAgfVxuICAgIH1cbn0od2luZG93KSxcbmZ1bmN0aW9uIChlKSB7XG4gICAgXCJvYmplY3RcIiA9PSB0eXBlb2YgbW9kdWxlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIG1vZHVsZS5leHBvcnRzID8gbW9kdWxlLmV4cG9ydHMgPSBlKCkgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGUpIDogZSgpXG59KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIHIsIGEpIHtcbiAgICAgICAgZnVuY3Rpb24gbihlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB0ID0gLTEsIHIgPSBlID8gZS5sZW5ndGggOiAwLCBhID0gW107ICsrdCA8IHI7KSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBlW3RdO1xuICAgICAgICAgICAgICAgIG4gJiYgYS5wdXNoKG4pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICAgICAgICByZXR1cm4gZy5pc1dyYXBwZWQoZSkgPyBlID0gW10uc2xpY2UuY2FsbChlKSA6IGcuaXNOb2RlKGUpICYmIChlID0gW2VdKSwgZVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaShlKSB7XG4gICAgICAgICAgICB2YXIgdCA9ICQuZGF0YShlLCBcInZlbG9jaXR5XCIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IHQgPyBhIDogdFxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcyhlKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh0ICogZSkgKiAoMSAvIGUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsKGUsIHIsIGEsIG4pIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG8oZSwgdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxIC0gMyAqIHQgKyAzICogZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpKGUsIHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMyAqIHQgLSA2ICogZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMyAqIGVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbChlLCB0LCByKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgobyh0LCByKSAqIGUgKyBpKHQsIHIpKSAqIGUgKyBzKHQpKSAqIGVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdShlLCB0LCByKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDMgKiBvKHQsIHIpICogZSAqIGUgKyAyICogaSh0LCByKSAqIGUgKyBzKHQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGModCwgcikge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBtID4gbjsgKytuKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0gdShyLCBlLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IG8pIHJldHVybiByO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGwociwgZSwgYSkgLSB0O1xuICAgICAgICAgICAgICAgICAgICByIC09IGkgLyBvXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHAoKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDA7IGIgPiB0OyArK3QpIHdbdF0gPSBsKHQgKiB4LCBlLCBhKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmKHQsIHIsIG4pIHtcbiAgICAgICAgICAgICAgICB2YXIgbywgaSwgcyA9IDA7XG4gICAgICAgICAgICAgICAgZG8gaSA9IHIgKyAobiAtIHIpIC8gMiwgbyA9IGwoaSwgZSwgYSkgLSB0LCBvID4gMCA/IG4gPSBpIDogciA9IGk7IHdoaWxlIChNYXRoLmFicyhvKSA+IGggJiYgKytzIDwgdik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZCh0KSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIG4gPSAxLCBvID0gYiAtIDE7IG4gIT0gbyAmJiB3W25dIDw9IHQ7ICsrbikgciArPSB4O1xuICAgICAgICAgICAgICAgIC0tbjtcbiAgICAgICAgICAgICAgICB2YXIgaSA9ICh0IC0gd1tuXSkgLyAod1tuICsgMV0gLSB3W25dKSxcbiAgICAgICAgICAgICAgICAgICAgcyA9IHIgKyBpICogeCxcbiAgICAgICAgICAgICAgICAgICAgbCA9IHUocywgZSwgYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGwgPj0geSA/IGModCwgcykgOiAwID09IGwgPyBzIDogZih0LCByLCByICsgeClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZygpIHtcbiAgICAgICAgICAgICAgICBWID0gITAsIChlICE9IHIgfHwgYSAhPSBuKSAmJiBwKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtID0gNCxcbiAgICAgICAgICAgICAgICB5ID0gLjAwMSxcbiAgICAgICAgICAgICAgICBoID0gMWUtNyxcbiAgICAgICAgICAgICAgICB2ID0gMTAsXG4gICAgICAgICAgICAgICAgYiA9IDExLFxuICAgICAgICAgICAgICAgIHggPSAxIC8gKGIgLSAxKSxcbiAgICAgICAgICAgICAgICBTID0gXCJGbG9hdDMyQXJyYXlcIiBpbiB0O1xuICAgICAgICAgICAgaWYgKDQgIT09IGFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAodmFyIFAgPSAwOyA0ID4gUDsgKytQKVxuICAgICAgICAgICAgICAgIGlmIChcIm51bWJlclwiICE9IHR5cGVvZiBhcmd1bWVudHNbUF0gfHwgaXNOYU4oYXJndW1lbnRzW1BdKSB8fCAhaXNGaW5pdGUoYXJndW1lbnRzW1BdKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgZSA9IE1hdGgubWluKGUsIDEpLCBhID0gTWF0aC5taW4oYSwgMSksIGUgPSBNYXRoLm1heChlLCAwKSwgYSA9IE1hdGgubWF4KGEsIDApO1xuICAgICAgICAgICAgdmFyIHcgPSBTID8gbmV3IEZsb2F0MzJBcnJheShiKSA6IG5ldyBBcnJheShiKSxcbiAgICAgICAgICAgICAgICBWID0gITEsXG4gICAgICAgICAgICAgICAgQyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBWIHx8IGcoKSwgZSA9PT0gciAmJiBhID09PSBuID8gdCA6IDAgPT09IHQgPyAwIDogMSA9PT0gdCA/IDEgOiBsKGQodCksIHIsIG4pXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIEMuZ2V0Q29udHJvbFBvaW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgICAgICAgICAgeDogZSxcbiAgICAgICAgICAgICAgICAgICAgeTogclxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgeDogYSxcbiAgICAgICAgICAgICAgICAgICAgeTogblxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIFQgPSBcImdlbmVyYXRlQmV6aWVyKFwiICsgW2UsIHIsIGEsIG5dICsgXCIpXCI7XG4gICAgICAgICAgICByZXR1cm4gQy50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVFxuICAgICAgICAgICAgfSwgQ1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdShlLCB0KSB7XG4gICAgICAgICAgICB2YXIgciA9IGU7XG4gICAgICAgICAgICByZXR1cm4gZy5pc1N0cmluZyhlKSA/IHYuRWFzaW5nc1tlXSB8fCAociA9ICExKSA6IHIgPSBnLmlzQXJyYXkoZSkgJiYgMSA9PT0gZS5sZW5ndGggPyBzLmFwcGx5KG51bGwsIGUpIDogZy5pc0FycmF5KGUpICYmIDIgPT09IGUubGVuZ3RoID8gYi5hcHBseShudWxsLCBlLmNvbmNhdChbdF0pKSA6IGcuaXNBcnJheShlKSAmJiA0ID09PSBlLmxlbmd0aCA/IGwuYXBwbHkobnVsbCwgZSkgOiAhMSwgciA9PT0gITEgJiYgKHIgPSB2LkVhc2luZ3Nbdi5kZWZhdWx0cy5lYXNpbmddID8gdi5kZWZhdWx0cy5lYXNpbmcgOiBoKSwgclxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYyhlKSB7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gKG5ldyBEYXRlKS5nZXRUaW1lKCksXG4gICAgICAgICAgICAgICAgICAgIHIgPSB2LlN0YXRlLmNhbGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICByID4gMWU0ICYmICh2LlN0YXRlLmNhbGxzID0gbih2LlN0YXRlLmNhbGxzKSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IDA7IHIgPiBvOyBvKyspXG4gICAgICAgICAgICAgICAgICAgIGlmICh2LlN0YXRlLmNhbGxzW29dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHYuU3RhdGUuY2FsbHNbb10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHNbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHNbMl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHNbM10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9ICEhZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgfHwgKGYgPSB2LlN0YXRlLmNhbGxzW29dWzNdID0gdCAtIDE2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHkgPSBNYXRoLm1pbigodCAtIGYpIC8gdS5kdXJhdGlvbiwgMSksIGggPSAwLCBiID0gbC5sZW5ndGg7IGIgPiBoOyBoKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUyA9IGxbaF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBTLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkodykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFYgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUuZGlzcGxheSAhPT0gYSAmJiBudWxsICE9PSB1LmRpc3BsYXkgJiYgXCJub25lXCIgIT09IHUuZGlzcGxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiZmxleFwiID09PSB1LmRpc3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQyA9IFtcIi13ZWJraXQtYm94XCIsIFwiLW1vei1ib3hcIiwgXCItbXMtZmxleGJveFwiLCBcIi13ZWJraXQtZmxleFwiXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goQywgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5zZXRQcm9wZXJ0eVZhbHVlKHcsIFwiZGlzcGxheVwiLCB0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnNldFByb3BlcnR5VmFsdWUodywgXCJkaXNwbGF5XCIsIHUuZGlzcGxheSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnZpc2liaWxpdHkgIT09IGEgJiYgXCJoaWRkZW5cIiAhPT0gdS52aXNpYmlsaXR5ICYmIHguc2V0UHJvcGVydHlWYWx1ZSh3LCBcInZpc2liaWxpdHlcIiwgdS52aXNpYmlsaXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgVCBpbiBTKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiZWxlbWVudFwiICE9PSBUKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBTW1RdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBLCBGID0gZy5pc1N0cmluZyhrLmVhc2luZykgPyB2LkVhc2luZ3Nbay5lYXNpbmddIDogay5lYXNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHkpIEEgPSBrLmVuZFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRSA9IGsuZW5kVmFsdWUgLSBrLnN0YXJ0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBID0gay5zdGFydFZhbHVlICsgRSAqIEYoeSwgdSwgRSksICFkICYmIEEgPT09IGsuY3VycmVudFZhbHVlKSBjb250aW51ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoay5jdXJyZW50VmFsdWUgPSBBLCBcInR3ZWVuXCIgPT09IFQpIG0gPSBBO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC5Ib29rcy5yZWdpc3RlcmVkW1RdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IHguSG9va3MuZ2V0Um9vdChUKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIID0gaSh3KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSCAmJiAoay5yb290UHJvcGVydHlWYWx1ZSA9IEgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE4gPSB4LnNldFByb3BlcnR5VmFsdWUodywgVCwgay5jdXJyZW50VmFsdWUgKyAoMCA9PT0gcGFyc2VGbG9hdChBKSA/IFwiXCIgOiBrLnVuaXRUeXBlKSwgay5yb290UHJvcGVydHlWYWx1ZSwgay5zY3JvbGxEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5Ib29rcy5yZWdpc3RlcmVkW1RdICYmIChpKHcpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbal0gPSB4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbal0gPyB4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbal0oXCJleHRyYWN0XCIsIG51bGwsIE5bMV0pIDogTlsxXSksIFwidHJhbnNmb3JtXCIgPT09IE5bMF0gJiYgKFYgPSAhMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUubW9iaWxlSEEgJiYgaSh3KS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZCA9PT0gYSAmJiAoaSh3KS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZCA9IFwiKDBweCwgMHB4LCAwcHgpXCIsIFYgPSAhMCksIFYgJiYgeC5mbHVzaFRyYW5zZm9ybUNhY2hlKHcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdS5kaXNwbGF5ICE9PSBhICYmIFwibm9uZVwiICE9PSB1LmRpc3BsYXkgJiYgKHYuU3RhdGUuY2FsbHNbb11bMl0uZGlzcGxheSA9ICExKSwgdS52aXNpYmlsaXR5ICE9PSBhICYmIFwiaGlkZGVuXCIgIT09IHUudmlzaWJpbGl0eSAmJiAodi5TdGF0ZS5jYWxsc1tvXVsyXS52aXNpYmlsaXR5ID0gITEpLCB1LnByb2dyZXNzICYmIHUucHJvZ3Jlc3MuY2FsbChzWzFdLCBzWzFdLCB5LCBNYXRoLm1heCgwLCBmICsgdS5kdXJhdGlvbiAtIHQpLCBmLCBtKSwgMSA9PT0geSAmJiBwKG8pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHYuU3RhdGUuaXNUaWNraW5nICYmIFAoYylcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHAoZSwgdCkge1xuICAgICAgICAgICAgaWYgKCF2LlN0YXRlLmNhbGxzW2VdKSByZXR1cm4gITE7XG4gICAgICAgICAgICBmb3IgKHZhciByID0gdi5TdGF0ZS5jYWxsc1tlXVswXSwgbiA9IHYuU3RhdGUuY2FsbHNbZV1bMV0sIG8gPSB2LlN0YXRlLmNhbGxzW2VdWzJdLCBzID0gdi5TdGF0ZS5jYWxsc1tlXVs0XSwgbCA9ICExLCB1ID0gMCwgYyA9IHIubGVuZ3RoOyBjID4gdTsgdSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHAgPSByW3VdLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHQgfHwgby5sb29wIHx8IChcIm5vbmVcIiA9PT0gby5kaXNwbGF5ICYmIHguc2V0UHJvcGVydHlWYWx1ZShwLCBcImRpc3BsYXlcIiwgby5kaXNwbGF5KSwgXCJoaWRkZW5cIiA9PT0gby52aXNpYmlsaXR5ICYmIHguc2V0UHJvcGVydHlWYWx1ZShwLCBcInZpc2liaWxpdHlcIiwgby52aXNpYmlsaXR5KSksIG8ubG9vcCAhPT0gITAgJiYgKCQucXVldWUocClbMV0gPT09IGEgfHwgIS9cXC52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnL2kudGVzdCgkLnF1ZXVlKHApWzFdKSkgJiYgaShwKSkge1xuICAgICAgICAgICAgICAgICAgICBpKHApLmlzQW5pbWF0aW5nID0gITEsIGkocCkucm9vdFByb3BlcnR5VmFsdWVDYWNoZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9ICExO1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2goeC5MaXN0cy50cmFuc2Zvcm1zM0QsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IC9ec2NhbGUvLnRlc3QodCkgPyAxIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gaShwKS50cmFuc2Zvcm1DYWNoZVt0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkocCkudHJhbnNmb3JtQ2FjaGVbdF0gIT09IGEgJiYgbmV3IFJlZ0V4cChcIl5cXFxcKFwiICsgciArIFwiW14uXVwiKS50ZXN0KG4pICYmIChmID0gITAsIGRlbGV0ZSBpKHApLnRyYW5zZm9ybUNhY2hlW3RdKVxuICAgICAgICAgICAgICAgICAgICB9KSwgby5tb2JpbGVIQSAmJiAoZiA9ICEwLCBkZWxldGUgaShwKS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZCksIGYgJiYgeC5mbHVzaFRyYW5zZm9ybUNhY2hlKHApLCB4LlZhbHVlcy5yZW1vdmVDbGFzcyhwLCBcInZlbG9jaXR5LWFuaW1hdGluZ1wiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXQgJiYgby5jb21wbGV0ZSAmJiAhby5sb29wICYmIHUgPT09IGMgLSAxKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvLmNvbXBsZXRlLmNhbGwobiwgbilcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZFxuICAgICAgICAgICAgICAgICAgICB9LCAxKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzICYmIG8ubG9vcCAhPT0gITAgJiYgcyhuKSwgaShwKSAmJiBvLmxvb3AgPT09ICEwICYmICF0ICYmICgkLmVhY2goaShwKS50d2VlbnNDb250YWluZXIsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIC9ecm90YXRlLy50ZXN0KGUpICYmIDM2MCA9PT0gcGFyc2VGbG9hdCh0LmVuZFZhbHVlKSAmJiAodC5lbmRWYWx1ZSA9IDAsIHQuc3RhcnRWYWx1ZSA9IDM2MCksIC9eYmFja2dyb3VuZFBvc2l0aW9uLy50ZXN0KGUpICYmIDEwMCA9PT0gcGFyc2VGbG9hdCh0LmVuZFZhbHVlKSAmJiBcIiVcIiA9PT0gdC51bml0VHlwZSAmJiAodC5lbmRWYWx1ZSA9IDAsIHQuc3RhcnRWYWx1ZSA9IDEwMClcbiAgICAgICAgICAgICAgICB9KSwgdihwLCBcInJldmVyc2VcIiwge1xuICAgICAgICAgICAgICAgICAgICBsb29wOiAhMCxcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IG8uZGVsYXlcbiAgICAgICAgICAgICAgICB9KSksIG8ucXVldWUgIT09ICExICYmICQuZGVxdWV1ZShwLCBvLnF1ZXVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdi5TdGF0ZS5jYWxsc1tlXSA9ICExO1xuICAgICAgICAgICAgZm9yICh2YXIgZyA9IDAsIG0gPSB2LlN0YXRlLmNhbGxzLmxlbmd0aDsgbSA+IGc7IGcrKylcbiAgICAgICAgICAgICAgICBpZiAodi5TdGF0ZS5jYWxsc1tnXSAhPT0gITEpIHtcbiAgICAgICAgICAgICAgICAgICAgbCA9ICEwO1xuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGwgPT09ICExICYmICh2LlN0YXRlLmlzVGlja2luZyA9ICExLCBkZWxldGUgdi5TdGF0ZS5jYWxscywgdi5TdGF0ZS5jYWxscyA9IFtdKVxuICAgICAgICB9XG4gICAgICAgIHZhciBmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChyLmRvY3VtZW50TW9kZSkgcmV0dXJuIHIuZG9jdW1lbnRNb2RlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSA3OyBlID4gNDsgZS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5pbm5lckhUTUwgPSBcIjwhLS1baWYgSUUgXCIgKyBlICsgXCJdPjxzcGFuPjwvc3Bhbj48IVtlbmRpZl0tLT5cIiwgdC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNwYW5cIikubGVuZ3RoKSByZXR1cm4gdCA9IG51bGwsIGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFcbiAgICAgICAgICAgIH0oKSxcbiAgICAgICAgICAgIGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSBNYXRoLm1heCgwLCAxNiAtIChyIC0gZSkpLCBlID0gciArIGEsIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdChyICsgYSlcbiAgICAgICAgICAgICAgICAgICAgfSwgYSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KCksXG4gICAgICAgICAgICBnID0ge1xuICAgICAgICAgICAgICAgIGlzU3RyaW5nOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJbb2JqZWN0IEFycmF5XVwiID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzRnVuY3Rpb246IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIltvYmplY3QgRnVuY3Rpb25dXCIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNOb2RlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiBlLm5vZGVUeXBlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc05vZGVMaXN0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSAmJiAvXlxcW29iamVjdCAoSFRNTENvbGxlY3Rpb258Tm9kZUxpc3R8T2JqZWN0KVxcXSQvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKSAmJiBlLmxlbmd0aCAhPT0gYSAmJiAoMCA9PT0gZS5sZW5ndGggfHwgXCJvYmplY3RcIiA9PSB0eXBlb2YgZVswXSAmJiBlWzBdLm5vZGVUeXBlID4gMClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzV3JhcHBlZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgKGUuanF1ZXJ5IHx8IHQuWmVwdG8gJiYgdC5aZXB0by56ZXB0by5pc1ooZSkpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc1NWRzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuU1ZHRWxlbWVudCAmJiBlIGluc3RhbmNlb2YgdC5TVkdFbGVtZW50XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0IGluIGUpIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICQsIG0gPSAhMTtcbiAgICAgICAgaWYgKGUuZm4gJiYgZS5mbi5qcXVlcnkgPyAoJCA9IGUsIG0gPSAhMCkgOiAkID0gdC5WZWxvY2l0eS5VdGlsaXRpZXMsIDggPj0gZiAmJiAhbSkgdGhyb3cgbmV3IEVycm9yKFwiVmVsb2NpdHk6IElFOCBhbmQgYmVsb3cgcmVxdWlyZSBqUXVlcnkgdG8gYmUgbG9hZGVkIGJlZm9yZSBWZWxvY2l0eS5cIik7XG4gICAgICAgIGlmICg3ID49IGYpIHJldHVybiB2b2lkKGpRdWVyeS5mbi52ZWxvY2l0eSA9IGpRdWVyeS5mbi5hbmltYXRlKTtcbiAgICAgICAgdmFyIHkgPSA0MDAsXG4gICAgICAgICAgICBoID0gXCJzd2luZ1wiLFxuICAgICAgICAgICAgdiA9IHtcbiAgICAgICAgICAgICAgICBTdGF0ZToge1xuICAgICAgICAgICAgICAgICAgICBpc01vYmlsZTogL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgICAgICAgICAgICAgICAgICBpc0FuZHJvaWQ6IC9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcbiAgICAgICAgICAgICAgICAgICAgaXNHaW5nZXJicmVhZDogL0FuZHJvaWQgMlxcLjNcXC5bMy03XS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXG4gICAgICAgICAgICAgICAgICAgIGlzQ2hyb21lOiB0LmNocm9tZSxcbiAgICAgICAgICAgICAgICAgICAgaXNGaXJlZm94OiAvRmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXG4gICAgICAgICAgICAgICAgICAgIHByZWZpeEVsZW1lbnQ6IHIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4TWF0Y2hlczoge30sXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUHJvcGVydHlMZWZ0OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQcm9wZXJ0eVRvcDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaXNUaWNraW5nOiAhMSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbHM6IFtdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBDU1M6IHt9LFxuICAgICAgICAgICAgICAgIFV0aWxpdGllczogJCxcbiAgICAgICAgICAgICAgICBSZWRpcmVjdHM6IHt9LFxuICAgICAgICAgICAgICAgIEVhc2luZ3M6IHt9LFxuICAgICAgICAgICAgICAgIFByb21pc2U6IHQuUHJvbWlzZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHksXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogaCxcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBhLFxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogYSxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYSxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogYSxcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogITEsXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiAhMSxcbiAgICAgICAgICAgICAgICAgICAgbW9iaWxlSEE6ICEwLFxuICAgICAgICAgICAgICAgICAgICBfY2FjaGVWYWx1ZXM6ICEwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAkLmRhdGEoZSwgXCJ2ZWxvY2l0eVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NWRzogZy5pc1NWRyhlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiAhMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGU6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZUNhY2hlOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUNhY2hlOiB7fVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaG9vazogbnVsbCxcbiAgICAgICAgICAgICAgICBtb2NrOiAhMSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ham9yOiAxLFxuICAgICAgICAgICAgICAgICAgICBtaW5vcjogMixcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2g6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlYnVnOiAhMVxuICAgICAgICAgICAgfTtcbiAgICAgICAgdC5wYWdlWU9mZnNldCAhPT0gYSA/ICh2LlN0YXRlLnNjcm9sbEFuY2hvciA9IHQsIHYuU3RhdGUuc2Nyb2xsUHJvcGVydHlMZWZ0ID0gXCJwYWdlWE9mZnNldFwiLCB2LlN0YXRlLnNjcm9sbFByb3BlcnR5VG9wID0gXCJwYWdlWU9mZnNldFwiKSA6ICh2LlN0YXRlLnNjcm9sbEFuY2hvciA9IHIuZG9jdW1lbnRFbGVtZW50IHx8IHIuYm9keS5wYXJlbnROb2RlIHx8IHIuYm9keSwgdi5TdGF0ZS5zY3JvbGxQcm9wZXJ0eUxlZnQgPSBcInNjcm9sbExlZnRcIiwgdi5TdGF0ZS5zY3JvbGxQcm9wZXJ0eVRvcCA9IFwic2Nyb2xsVG9wXCIpO1xuICAgICAgICB2YXIgYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGUoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAtZS50ZW5zaW9uICogZS54IC0gZS5mcmljdGlvbiAqIGUudlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0KHQsIHIsIGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogdC54ICsgYS5keCAqIHIsXG4gICAgICAgICAgICAgICAgICAgIHY6IHQudiArIGEuZHYgKiByLFxuICAgICAgICAgICAgICAgICAgICB0ZW5zaW9uOiB0LnRlbnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGZyaWN0aW9uOiB0LmZyaWN0aW9uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkeDogbi52LFxuICAgICAgICAgICAgICAgICAgICBkdjogZShuKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcihyLCBhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkeDogci52LFxuICAgICAgICAgICAgICAgICAgICAgICAgZHY6IGUocilcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbyA9IHQociwgLjUgKiBhLCBuKSxcbiAgICAgICAgICAgICAgICAgICAgaSA9IHQociwgLjUgKiBhLCBvKSxcbiAgICAgICAgICAgICAgICAgICAgcyA9IHQociwgYSwgaSksXG4gICAgICAgICAgICAgICAgICAgIGwgPSAxIC8gNiAqIChuLmR4ICsgMiAqIChvLmR4ICsgaS5keCkgKyBzLmR4KSxcbiAgICAgICAgICAgICAgICAgICAgdSA9IDEgLyA2ICogKG4uZHYgKyAyICogKG8uZHYgKyBpLmR2KSArIHMuZHYpO1xuICAgICAgICAgICAgICAgIHJldHVybiByLnggPSByLnggKyBsICogYSwgci52ID0gci52ICsgdSAqIGEsIHJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBhKGUsIHQsIG4pIHtcbiAgICAgICAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbnNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmljdGlvbjogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpID0gWzBdLFxuICAgICAgICAgICAgICAgICAgICBzID0gMCxcbiAgICAgICAgICAgICAgICAgICAgbCA9IDFlLTQsXG4gICAgICAgICAgICAgICAgICAgIHUgPSAuMDE2LFxuICAgICAgICAgICAgICAgICAgICBjLCBwLCBmO1xuICAgICAgICAgICAgICAgIGZvciAoZSA9IHBhcnNlRmxvYXQoZSkgfHwgNTAwLCB0ID0gcGFyc2VGbG9hdCh0KSB8fCAyMCwgbiA9IG4gfHwgbnVsbCwgby50ZW5zaW9uID0gZSwgby5mcmljdGlvbiA9IHQsIGMgPSBudWxsICE9PSBuLCBjID8gKHMgPSBhKGUsIHQpLCBwID0gcyAvIG4gKiB1KSA6IHAgPSB1OzspXG4gICAgICAgICAgICAgICAgICAgIGlmIChmID0gcihmIHx8IG8sIHApLCBpLnB1c2goMSArIGYueCksIHMgKz0gMTYsICEoTWF0aC5hYnMoZi54KSA+IGwgJiYgTWF0aC5hYnMoZi52KSA+IGwpKSBicmVhaztcbiAgICAgICAgICAgICAgICByZXR1cm4gYyA/IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpW2UgKiAoaS5sZW5ndGggLSAxKSB8IDBdXG4gICAgICAgICAgICAgICAgfSA6IHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSgpO1xuICAgICAgICB2LkVhc2luZ3MgPSB7XG4gICAgICAgICAgICBsaW5lYXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzd2luZzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLjUgLSBNYXRoLmNvcyhlICogTWF0aC5QSSkgLyAyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3ByaW5nOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxIC0gTWF0aC5jb3MoNC41ICogZSAqIE1hdGguUEkpICogTWF0aC5leHAoNiAqIC1lKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCAkLmVhY2goW1tcImVhc2VcIiwgWy4yNSwgLjEsIC4yNSwgMV1dLCBbXCJlYXNlLWluXCIsIFsuNDIsIDAsIDEsIDFdXSwgW1wiZWFzZS1vdXRcIiwgWzAsIDAsIC41OCwgMV1dLCBbXCJlYXNlLWluLW91dFwiLCBbLjQyLCAwLCAuNTgsIDFdXSwgW1wiZWFzZUluU2luZVwiLCBbLjQ3LCAwLCAuNzQ1LCAuNzE1XV0sIFtcImVhc2VPdXRTaW5lXCIsIFsuMzksIC41NzUsIC41NjUsIDFdXSwgW1wiZWFzZUluT3V0U2luZVwiLCBbLjQ0NSwgLjA1LCAuNTUsIC45NV1dLCBbXCJlYXNlSW5RdWFkXCIsIFsuNTUsIC4wODUsIC42OCwgLjUzXV0sIFtcImVhc2VPdXRRdWFkXCIsIFsuMjUsIC40NiwgLjQ1LCAuOTRdXSwgW1wiZWFzZUluT3V0UXVhZFwiLCBbLjQ1NSwgLjAzLCAuNTE1LCAuOTU1XV0sIFtcImVhc2VJbkN1YmljXCIsIFsuNTUsIC4wNTUsIC42NzUsIC4xOV1dLCBbXCJlYXNlT3V0Q3ViaWNcIiwgWy4yMTUsIC42MSwgLjM1NSwgMV1dLCBbXCJlYXNlSW5PdXRDdWJpY1wiLCBbLjY0NSwgLjA0NSwgLjM1NSwgMV1dLCBbXCJlYXNlSW5RdWFydFwiLCBbLjg5NSwgLjAzLCAuNjg1LCAuMjJdXSwgW1wiZWFzZU91dFF1YXJ0XCIsIFsuMTY1LCAuODQsIC40NCwgMV1dLCBbXCJlYXNlSW5PdXRRdWFydFwiLCBbLjc3LCAwLCAuMTc1LCAxXV0sIFtcImVhc2VJblF1aW50XCIsIFsuNzU1LCAuMDUsIC44NTUsIC4wNl1dLCBbXCJlYXNlT3V0UXVpbnRcIiwgWy4yMywgMSwgLjMyLCAxXV0sIFtcImVhc2VJbk91dFF1aW50XCIsIFsuODYsIDAsIC4wNywgMV1dLCBbXCJlYXNlSW5FeHBvXCIsIFsuOTUsIC4wNSwgLjc5NSwgLjAzNV1dLCBbXCJlYXNlT3V0RXhwb1wiLCBbLjE5LCAxLCAuMjIsIDFdXSwgW1wiZWFzZUluT3V0RXhwb1wiLCBbMSwgMCwgMCwgMV1dLCBbXCJlYXNlSW5DaXJjXCIsIFsuNiwgLjA0LCAuOTgsIC4zMzVdXSwgW1wiZWFzZU91dENpcmNcIiwgWy4wNzUsIC44MiwgLjE2NSwgMV1dLCBbXCJlYXNlSW5PdXRDaXJjXCIsIFsuNzg1LCAuMTM1LCAuMTUsIC44Nl1dXSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHYuRWFzaW5nc1t0WzBdXSA9IGwuYXBwbHkobnVsbCwgdFsxXSlcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB4ID0gdi5DU1MgPSB7XG4gICAgICAgICAgICBSZWdFeDoge1xuICAgICAgICAgICAgICAgIGlzSGV4OiAvXiMoW0EtZlxcZF17M30pezEsMn0kL2ksXG4gICAgICAgICAgICAgICAgdmFsdWVVbndyYXA6IC9eW0Etel0rXFwoKC4qKVxcKSQvaSxcbiAgICAgICAgICAgICAgICB3cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkOiAvWzAtOS5dKyBbMC05Ll0rIFswLTkuXSsoIFswLTkuXSspPy8sXG4gICAgICAgICAgICAgICAgdmFsdWVTcGxpdDogLyhbQS16XStcXCguK1xcKSl8KChbQS16MC05Iy0uXSs/KSg/PVxcc3wkKSkvZ2lcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBMaXN0czoge1xuICAgICAgICAgICAgICAgIGNvbG9yczogW1wiZmlsbFwiLCBcInN0cm9rZVwiLCBcInN0b3BDb2xvclwiLCBcImNvbG9yXCIsIFwiYmFja2dyb3VuZENvbG9yXCIsIFwiYm9yZGVyQ29sb3JcIiwgXCJib3JkZXJUb3BDb2xvclwiLCBcImJvcmRlclJpZ2h0Q29sb3JcIiwgXCJib3JkZXJCb3R0b21Db2xvclwiLCBcImJvcmRlckxlZnRDb2xvclwiLCBcIm91dGxpbmVDb2xvclwiXSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zQmFzZTogW1widHJhbnNsYXRlWFwiLCBcInRyYW5zbGF0ZVlcIiwgXCJzY2FsZVwiLCBcInNjYWxlWFwiLCBcInNjYWxlWVwiLCBcInNrZXdYXCIsIFwic2tld1lcIiwgXCJyb3RhdGVaXCJdLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybXMzRDogW1widHJhbnNmb3JtUGVyc3BlY3RpdmVcIiwgXCJ0cmFuc2xhdGVaXCIsIFwic2NhbGVaXCIsIFwicm90YXRlWFwiLCBcInJvdGF0ZVlcIl1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBIb29rczoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlczoge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0U2hhZG93OiBbXCJDb2xvciBYIFkgQmx1clwiLCBcImJsYWNrIDBweCAwcHggMHB4XCJdLFxuICAgICAgICAgICAgICAgICAgICBib3hTaGFkb3c6IFtcIkNvbG9yIFggWSBCbHVyIFNwcmVhZFwiLCBcImJsYWNrIDBweCAwcHggMHB4IDBweFwiXSxcbiAgICAgICAgICAgICAgICAgICAgY2xpcDogW1wiVG9wIFJpZ2h0IEJvdHRvbSBMZWZ0XCIsIFwiMHB4IDBweCAwcHggMHB4XCJdLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IFtcIlggWVwiLCBcIjAlIDAlXCJdLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFtcIlggWSBaXCIsIFwiNTAlIDUwJSAwcHhcIl0sXG4gICAgICAgICAgICAgICAgICAgIHBlcnNwZWN0aXZlT3JpZ2luOiBbXCJYIFlcIiwgXCI1MCUgNTAlXCJdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZWdpc3RlcmVkOiB7fSxcbiAgICAgICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHguTGlzdHMuY29sb3JzLmxlbmd0aDsgZSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFwiY29sb3JcIiA9PT0geC5MaXN0cy5jb2xvcnNbZV0gPyBcIjAgMCAwIDFcIiA6IFwiMjU1IDI1NSAyNTUgMVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgeC5Ib29rcy50ZW1wbGF0ZXNbeC5MaXN0cy5jb2xvcnNbZV1dID0gW1wiUmVkIEdyZWVuIEJsdWUgQWxwaGFcIiwgdF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgciwgYSwgbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgaW4geC5Ib29rcy50ZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0geC5Ib29rcy50ZW1wbGF0ZXNbcl0sIG4gPSBhWzBdLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGFbMV0ubWF0Y2goeC5SZWdFeC52YWx1ZVNwbGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNvbG9yXCIgPT09IG5bMF0gJiYgKG4ucHVzaChuLnNoaWZ0KCkpLCBvLnB1c2goby5zaGlmdCgpKSwgeC5Ib29rcy50ZW1wbGF0ZXNbcl0gPSBbbi5qb2luKFwiIFwiKSwgby5qb2luKFwiIFwiKV0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAociBpbiB4Lkhvb2tzLnRlbXBsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHguSG9va3MudGVtcGxhdGVzW3JdLCBuID0gYVswXS5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlIGluIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHIgKyBuW2VdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Lkhvb2tzLnJlZ2lzdGVyZWRbaV0gPSBbciwgc11cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0Um9vdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB4Lkhvb2tzLnJlZ2lzdGVyZWRbZV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gdFswXSA6IGVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNsZWFuUm9vdFByb3BlcnR5VmFsdWU6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4LlJlZ0V4LnZhbHVlVW53cmFwLnRlc3QodCkgJiYgKHQgPSB0Lm1hdGNoKHguUmVnRXgudmFsdWVVbndyYXApWzFdKSwgeC5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUodCkgJiYgKHQgPSB4Lkhvb2tzLnRlbXBsYXRlc1tlXVsxXSksIHRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGV4dHJhY3RWYWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB4Lkhvb2tzLnJlZ2lzdGVyZWRbZV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHJbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHJbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHguSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShhLCB0KSwgdC50b1N0cmluZygpLm1hdGNoKHguUmVnRXgudmFsdWVTcGxpdClbbl1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5qZWN0VmFsdWU6IGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0geC5Ib29rcy5yZWdpc3RlcmVkW2VdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBhWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBhWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksIHM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA9IHguSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShuLCByKSwgaSA9IHIudG9TdHJpbmcoKS5tYXRjaCh4LlJlZ0V4LnZhbHVlU3BsaXQpLCBpW29dID0gdCwgcyA9IGkuam9pbihcIiBcIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBOb3JtYWxpemF0aW9uczoge1xuICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpcDogZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjbGlwXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4LlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChyKSA/IGEgPSByIDogKGEgPSByLnRvU3RyaW5nKCkubWF0Y2goeC5SZWdFeC52YWx1ZVVud3JhcCksIGEgPSBhID8gYVsxXS5yZXBsYWNlKC8sKFxccyspPy9nLCBcIiBcIikgOiByKSwgYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZWN0KFwiICsgciArIFwiKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuU3RhdGUuaXNGaXJlZm94ID8gXCJmaWx0ZXJcIiA6IFwiLXdlYmtpdC1maWx0ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBwYXJzZUZsb2F0KHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYSAmJiAwICE9PSBhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gci50b1N0cmluZygpLm1hdGNoKC9ibHVyXFwoKFswLTldK1tBLXpdKylcXCkvaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuID8gblsxXSA6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5qZWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocikgPyBcImJsdXIoXCIgKyByICsgXCIpXCIgOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBmdW5jdGlvbiAoZSwgdCwgcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDggPj0gZikgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImZpbHRlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHIudG9TdHJpbmcoKS5tYXRjaCgvYWxwaGFcXChvcGFjaXR5PSguKilcXCkvaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPSBhID8gYVsxXSAvIDEwMCA6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5qZWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc3R5bGUuem9vbSA9IDEsIHBhcnNlRmxvYXQocikgPj0gMSA/IFwiXCIgOiBcImFscGhhKG9wYWNpdHk9XCIgKyBwYXJzZUludCgxMDAgKiBwYXJzZUZsb2F0KHIpLCAxMCkgKyBcIilcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvcGFjaXR5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIDkgPj0gZiB8fCB2LlN0YXRlLmlzR2luZ2VyYnJlYWQgfHwgKHguTGlzdHMudHJhbnNmb3Jtc0Jhc2UgPSB4Lkxpc3RzLnRyYW5zZm9ybXNCYXNlLmNvbmNhdCh4Lkxpc3RzLnRyYW5zZm9ybXMzRCkpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHguTGlzdHMudHJhbnNmb3Jtc0Jhc2UubGVuZ3RoOyBlKyspICEgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB4Lkxpc3RzLnRyYW5zZm9ybXNCYXNlW2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgeC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3RdID0gZnVuY3Rpb24gKGUsIHIsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2Zvcm1cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaShyKSA9PT0gYSB8fCBpKHIpLnRyYW5zZm9ybUNhY2hlW3RdID09PSBhID8gL15zY2FsZS9pLnRlc3QodCkgPyAxIDogMCA6IGkocikudHJhbnNmb3JtQ2FjaGVbdF0ucmVwbGFjZSgvWygpXS9nLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5qZWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodC5zdWJzdHIoMCwgdC5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gIS8oJXxweHxlbXxyZW18dnd8dmh8XFxkKSQvaS50ZXN0KG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzY2FsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzY2FsZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5TdGF0ZS5pc0FuZHJvaWQgJiYgaShyKS50cmFuc2Zvcm1DYWNoZVt0XSA9PT0gYSAmJiAxID4gbiAmJiAobiA9IDEpLCBvID0gIS8oXFxkKSQvaS50ZXN0KG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJza2V3XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gIS8oZGVnfFxcZCkkL2kudGVzdChuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm90YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gIS8oZGVnfFxcZCkkL2kudGVzdChuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvIHx8IChpKHIpLnRyYW5zZm9ybUNhY2hlW3RdID0gXCIoXCIgKyBuICsgXCIpXCIpLCBpKHIpLnRyYW5zZm9ybUNhY2hlW3RdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgeC5MaXN0cy5jb2xvcnMubGVuZ3RoOyBlKyspICEgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB4Lkxpc3RzLmNvbG9yc1tlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFt0XSA9IGZ1bmN0aW9uIChlLCByLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4LlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChuKSkgbyA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksIHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhY2s6IFwicmdiKDAsIDAsIDApXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmx1ZTogXCJyZ2IoMCwgMCwgMjU1KVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYXk6IFwicmdiKDEyOCwgMTI4LCAxMjgpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JlZW46IFwicmdiKDAsIDEyOCwgMClcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWQ6IFwicmdiKDI1NSwgMCwgMClcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZTogXCJyZ2IoMjU1LCAyNTUsIDI1NSlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9eW0Etel0rJC9pLnRlc3QobikgPyBpID0gc1tuXSAhPT0gYSA/IHNbbl0gOiBzLmJsYWNrIDogeC5SZWdFeC5pc0hleC50ZXN0KG4pID8gaSA9IFwicmdiKFwiICsgeC5WYWx1ZXMuaGV4VG9SZ2Iobikuam9pbihcIiBcIikgKyBcIilcIiA6IC9ecmdiYT9cXCgvaS50ZXN0KG4pIHx8IChpID0gcy5ibGFjayksIG8gPSAoaSB8fCBuKS50b1N0cmluZygpLm1hdGNoKHguUmVnRXgudmFsdWVVbndyYXApWzFdLnJlcGxhY2UoLywoXFxzKyk/L2csIFwiIFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA4ID49IGYgfHwgMyAhPT0gby5zcGxpdChcIiBcIikubGVuZ3RoIHx8IChvICs9IFwiIDFcIiksIG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gOCA+PSBmID8gNCA9PT0gbi5zcGxpdChcIiBcIikubGVuZ3RoICYmIChuID0gbi5zcGxpdCgvXFxzKy8pLnNsaWNlKDAsIDMpLmpvaW4oXCIgXCIpKSA6IDMgPT09IG4uc3BsaXQoXCIgXCIpLmxlbmd0aCAmJiAobiArPSBcIiAxXCIpLCAoOCA+PSBmID8gXCJyZ2JcIiA6IFwicmdiYVwiKSArIFwiKFwiICsgbi5yZXBsYWNlKC9cXHMrL2csIFwiLFwiKS5yZXBsYWNlKC9cXC4oXFxkKSsoPz0sKS9nLCBcIlwiKSArIFwiKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgTmFtZXM6IHtcbiAgICAgICAgICAgICAgICBjYW1lbENhc2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnJlcGxhY2UoLy0oXFx3KS9nLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgU1ZHQXR0cmlidXRlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFwid2lkdGh8aGVpZ2h0fHh8eXxjeHxjeXxyfHJ4fHJ5fHgxfHgyfHkxfHkyXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZiB8fCB2LlN0YXRlLmlzQW5kcm9pZCAmJiAhdi5TdGF0ZS5pc0Nocm9tZSkgJiYgKHQgKz0gXCJ8dHJhbnNmb3JtXCIpLCBuZXcgUmVnRXhwKFwiXihcIiArIHQgKyBcIikkXCIsIFwiaVwiKS50ZXN0KGUpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcmVmaXhDaGVjazogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYuU3RhdGUucHJlZml4TWF0Y2hlc1tlXSkgcmV0dXJuIFt2LlN0YXRlLnByZWZpeE1hdGNoZXNbZV0sICEwXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IFtcIlwiLCBcIldlYmtpdFwiLCBcIk1velwiLCBcIm1zXCIsIFwiT1wiXSwgciA9IDAsIGEgPSB0Lmxlbmd0aDsgYSA+IHI7IHIrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IDAgPT09IHIgPyBlIDogdFtyXSArIGUucmVwbGFjZSgvXlxcdy8sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgZy5pc1N0cmluZyh2LlN0YXRlLnByZWZpeEVsZW1lbnQuc3R5bGVbbl0pKSByZXR1cm4gdi5TdGF0ZS5wcmVmaXhNYXRjaGVzW2VdID0gbiwgW24sICEwXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbZSwgITFdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFZhbHVlczoge1xuICAgICAgICAgICAgICAgIGhleFRvUmdiOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IC9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICByID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gZS5yZXBsYWNlKHQsIGZ1bmN0aW9uIChlLCB0LCByLCBhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCArIHQgKyByICsgciArIGEgKyBhXG4gICAgICAgICAgICAgICAgICAgIH0pLCBhID0gci5leGVjKGUpLCBhID8gW3BhcnNlSW50KGFbMV0sIDE2KSwgcGFyc2VJbnQoYVsyXSwgMTYpLCBwYXJzZUludChhWzNdLCAxNildIDogWzAsIDAsIDBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc0NTU051bGxWYWx1ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSB8fCAvXihub25lfGF1dG98dHJhbnNwYXJlbnR8KHJnYmFcXCgwLCA/MCwgPzAsID8wXFwpKSkkL2kudGVzdChlKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0VW5pdFR5cGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAvXihyb3RhdGV8c2tldykvaS50ZXN0KGUpID8gXCJkZWdcIiA6IC8oXihzY2FsZXxzY2FsZVh8c2NhbGVZfHNjYWxlWnxhbHBoYXxmbGV4R3Jvd3xmbGV4SGVpZ2h0fHpJbmRleHxmb250V2VpZ2h0KSQpfCgob3BhY2l0eXxyZWR8Z3JlZW58Ymx1ZXxhbHBoYSkkKS9pLnRlc3QoZSkgPyBcIlwiIDogXCJweFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXREaXNwbGF5VHlwZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlICYmIGUudGFnTmFtZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAvXihifGJpZ3xpfHNtYWxsfHR0fGFiYnJ8YWNyb255bXxjaXRlfGNvZGV8ZGZufGVtfGtiZHxzdHJvbmd8c2FtcHx2YXJ8YXxiZG98YnJ8aW1nfG1hcHxvYmplY3R8cXxzY3JpcHR8c3BhbnxzdWJ8c3VwfGJ1dHRvbnxpbnB1dHxsYWJlbHxzZWxlY3R8dGV4dGFyZWEpJC9pLnRlc3QodCkgPyBcImlubGluZVwiIDogL14obGkpJC9pLnRlc3QodCkgPyBcImxpc3QtaXRlbVwiIDogL14odHIpJC9pLnRlc3QodCkgPyBcInRhYmxlLXJvd1wiIDogL14odGFibGUpJC9pLnRlc3QodCkgPyBcInRhYmxlXCIgOiAvXih0Ym9keSkkL2kudGVzdCh0KSA/IFwidGFibGUtcm93LWdyb3VwXCIgOiBcImJsb2NrXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFkZENsYXNzOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICBlLmNsYXNzTGlzdCA/IGUuY2xhc3NMaXN0LmFkZCh0KSA6IGUuY2xhc3NOYW1lICs9IChlLmNsYXNzTmFtZS5sZW5ndGggPyBcIiBcIiA6IFwiXCIpICsgdFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGUuY2xhc3NMaXN0ID8gZS5jbGFzc0xpc3QucmVtb3ZlKHQpIDogZS5jbGFzc05hbWUgPSBlLmNsYXNzTmFtZS50b1N0cmluZygpLnJlcGxhY2UobmV3IFJlZ0V4cChcIihefFxcXFxzKVwiICsgdC5zcGxpdChcIiBcIikuam9pbihcInxcIikgKyBcIihcXFxcc3wkKVwiLCBcImdpXCIpLCBcIiBcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0UHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gKGUsIHIsIG4sIG8pIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzKGUsIHIpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHUgJiYgeC5zZXRQcm9wZXJ0eVZhbHVlKGUsIFwiZGlzcGxheVwiLCBcIm5vbmVcIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICg4ID49IGYpIGwgPSAkLmNzcyhlLCByKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9ICExO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eKHdpZHRofGhlaWdodCkkLy50ZXN0KHIpICYmIDAgPT09IHguZ2V0UHJvcGVydHlWYWx1ZShlLCBcImRpc3BsYXlcIikgJiYgKHUgPSAhMCwgeC5zZXRQcm9wZXJ0eVZhbHVlKGUsIFwiZGlzcGxheVwiLCB4LlZhbHVlcy5nZXREaXNwbGF5VHlwZShlKSkpLCAhbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImhlaWdodFwiID09PSByICYmIFwiYm9yZGVyLWJveFwiICE9PSB4LmdldFByb3BlcnR5VmFsdWUoZSwgXCJib3hTaXppbmdcIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZS5vZmZzZXRIZWlnaHQgLSAocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoZSwgXCJib3JkZXJUb3BXaWR0aFwiKSkgfHwgMCkgLSAocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoZSwgXCJib3JkZXJCb3R0b21XaWR0aFwiKSkgfHwgMCkgLSAocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoZSwgXCJwYWRkaW5nVG9wXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLCBcInBhZGRpbmdCb3R0b21cIikpIHx8IDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbigpLCBjXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcIndpZHRoXCIgPT09IHIgJiYgXCJib3JkZXItYm94XCIgIT09IHguZ2V0UHJvcGVydHlWYWx1ZShlLCBcImJveFNpemluZ1wiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBlLm9mZnNldFdpZHRoIC0gKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsIFwiYm9yZGVyTGVmdFdpZHRoXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZShlLCBcImJvcmRlclJpZ2h0V2lkdGhcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsIFwicGFkZGluZ0xlZnRcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKGUsIFwicGFkZGluZ1JpZ2h0XCIpKSB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4oKSwgcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGkoZSkgPT09IGEgPyB0LmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCkgOiBpKGUpLmNvbXB1dGVkU3R5bGUgPyBpKGUpLmNvbXB1dGVkU3R5bGUgOiBpKGUpLmNvbXB1dGVkU3R5bGUgPSB0LmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCksIFwiYm9yZGVyQ29sb3JcIiA9PT0gciAmJiAociA9IFwiYm9yZGVyVG9wQ29sb3JcIiksIGwgPSA5ID09PSBmICYmIFwiZmlsdGVyXCIgPT09IHIgPyBkLmdldFByb3BlcnR5VmFsdWUocikgOiBkW3JdLCAoXCJcIiA9PT0gbCB8fCBudWxsID09PSBsKSAmJiAobCA9IGUuc3R5bGVbcl0pLCBuKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJhdXRvXCIgPT09IGwgJiYgL14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvaS50ZXN0KHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHMoZSwgXCJwb3NpdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChcImZpeGVkXCIgPT09IGcgfHwgXCJhYnNvbHV0ZVwiID09PSBnICYmIC90b3B8bGVmdC9pLnRlc3QocikpICYmIChsID0gJChlKS5wb3NpdGlvbigpW3JdICsgXCJweFwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsO1xuICAgICAgICAgICAgICAgIGlmICh4Lkhvb2tzLnJlZ2lzdGVyZWRbcl0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSByLFxuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHguSG9va3MuZ2V0Um9vdCh1KTtcbiAgICAgICAgICAgICAgICAgICAgbiA9PT0gYSAmJiAobiA9IHguZ2V0UHJvcGVydHlWYWx1ZShlLCB4Lk5hbWVzLnByZWZpeENoZWNrKGMpWzBdKSksIHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXSAmJiAobiA9IHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXShcImV4dHJhY3RcIiwgZSwgbikpLCBsID0geC5Ib29rcy5leHRyYWN0VmFsdWUodSwgbilcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcCwgZDtcbiAgICAgICAgICAgICAgICAgICAgcCA9IHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcIm5hbWVcIiwgZSksIFwidHJhbnNmb3JtXCIgIT09IHAgJiYgKGQgPSBzKGUsIHguTmFtZXMucHJlZml4Q2hlY2socClbMF0pLCB4LlZhbHVlcy5pc0NTU051bGxWYWx1ZShkKSAmJiB4Lkhvb2tzLnRlbXBsYXRlc1tyXSAmJiAoZCA9IHguSG9va3MudGVtcGxhdGVzW3JdWzFdKSksIGwgPSB4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oXCJleHRyYWN0XCIsIGUsIGQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghL15bXFxkLV0vLnRlc3QobCkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChpKGUpICYmIGkoZSkuaXNTVkcgJiYgeC5OYW1lcy5TVkdBdHRyaWJ1dGUocikpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoL14oaGVpZ2h0fHdpZHRoKSQvaS50ZXN0KHIpKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlLmdldEJCb3goKVtyXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbCA9IGUuZ2V0QXR0cmlidXRlKHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBsID0gcyhlLCB4Lk5hbWVzLnByZWZpeENoZWNrKHIpWzBdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geC5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUobCkgJiYgKGwgPSAwKSwgdi5kZWJ1ZyA+PSAyICYmIGNvbnNvbGUubG9nKFwiR2V0IFwiICsgciArIFwiOiBcIiArIGwpLCBsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0UHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gKGUsIHIsIGEsIG4sIG8pIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHI7XG4gICAgICAgICAgICAgICAgaWYgKFwic2Nyb2xsXCIgPT09IHIpIG8uY29udGFpbmVyID8gby5jb250YWluZXJbXCJzY3JvbGxcIiArIG8uZGlyZWN0aW9uXSA9IGEgOiBcIkxlZnRcIiA9PT0gby5kaXJlY3Rpb24gPyB0LnNjcm9sbFRvKGEsIG8uYWx0ZXJuYXRlVmFsdWUpIDogdC5zY3JvbGxUbyhvLmFsdGVybmF0ZVZhbHVlLCBhKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh4Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0gJiYgXCJ0cmFuc2Zvcm1cIiA9PT0geC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwibmFtZVwiLCBlKSkgeC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwiaW5qZWN0XCIsIGUsIGEpLCBzID0gXCJ0cmFuc2Zvcm1cIiwgYSA9IGkoZSkudHJhbnNmb3JtQ2FjaGVbcl07XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4Lkhvb2tzLnJlZ2lzdGVyZWRbcl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0geC5Ib29rcy5nZXRSb290KHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG4gfHwgeC5nZXRQcm9wZXJ0eVZhbHVlKGUsIHUpLCBhID0geC5Ib29rcy5pbmplY3RWYWx1ZShsLCBhLCBuKSwgciA9IHVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdICYmIChhID0geC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwiaW5qZWN0XCIsIGUsIGEpLCByID0geC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwibmFtZVwiLCBlKSksIHMgPSB4Lk5hbWVzLnByZWZpeENoZWNrKHIpWzBdLCA4ID49IGYpIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0eWxlW3NdID0gYVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChjKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2LmRlYnVnICYmIGNvbnNvbGUubG9nKFwiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFtcIiArIGEgKyBcIl0gZm9yIFtcIiArIHMgKyBcIl1cIilcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGkoZSkgJiYgaShlKS5pc1NWRyAmJiB4Lk5hbWVzLlNWR0F0dHJpYnV0ZShyKSA/IGUuc2V0QXR0cmlidXRlKHIsIGEpIDogZS5zdHlsZVtzXSA9IGE7XG4gICAgICAgICAgICAgICAgICAgIHYuZGVidWcgPj0gMiAmJiBjb25zb2xlLmxvZyhcIlNldCBcIiArIHIgKyBcIiAoXCIgKyBzICsgXCIpOiBcIiArIGEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbcywgYV1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmbHVzaFRyYW5zZm9ybUNhY2hlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQodCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoZSwgdCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByID0gXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAoKGYgfHwgdi5TdGF0ZS5pc0FuZHJvaWQgJiYgIXYuU3RhdGUuaXNDaHJvbWUpICYmIGkoZSkuaXNTVkcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGU6IFt0KFwidHJhbnNsYXRlWFwiKSwgdChcInRyYW5zbGF0ZVlcIildLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2tld1g6IFt0KFwic2tld1hcIildLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2tld1k6IFt0KFwic2tld1lcIildLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDEgIT09IHQoXCJzY2FsZVwiKSA/IFt0KFwic2NhbGVcIiksIHQoXCJzY2FsZVwiKV0gOiBbdChcInNjYWxlWFwiKSwgdChcInNjYWxlWVwiKV0sXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGU6IFt0KFwicm90YXRlWlwiKSwgMCwgMF1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGkoZSkudHJhbnNmb3JtQ2FjaGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvXnRyYW5zbGF0ZS9pLnRlc3QoZSkgPyBlID0gXCJ0cmFuc2xhdGVcIiA6IC9ec2NhbGUvaS50ZXN0KGUpID8gZSA9IFwic2NhbGVcIiA6IC9ecm90YXRlL2kudGVzdChlKSAmJiAoZSA9IFwicm90YXRlXCIpLCBhW2VdICYmIChyICs9IGUgKyBcIihcIiArIGFbZV0uam9pbihcIiBcIikgKyBcIikgXCIsIGRlbGV0ZSBhW2VdKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuLCBvO1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2goaShlKS50cmFuc2Zvcm1DYWNoZSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID0gaShlKS50cmFuc2Zvcm1DYWNoZVt0XSwgXCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiID09PSB0ID8gKG8gPSBuLCAhMCkgOiAoOSA9PT0gZiAmJiBcInJvdGF0ZVpcIiA9PT0gdCAmJiAodCA9IFwicm90YXRlXCIpLCB2b2lkKHIgKz0gdCArIG4gKyBcIiBcIikpXG4gICAgICAgICAgICAgICAgICAgIH0pLCBvICYmIChyID0gXCJwZXJzcGVjdGl2ZVwiICsgbyArIFwiIFwiICsgcilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeC5zZXRQcm9wZXJ0eVZhbHVlKGUsIFwidHJhbnNmb3JtXCIsIHIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHguSG9va3MucmVnaXN0ZXIoKSwgeC5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcigpLCB2Lmhvb2sgPSBmdW5jdGlvbiAoZSwgdCwgcikge1xuICAgICAgICAgICAgdmFyIG4gPSBhO1xuICAgICAgICAgICAgcmV0dXJuIGUgPSBvKGUpLCAkLmVhY2goZSwgZnVuY3Rpb24gKGUsIG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoaShvKSA9PT0gYSAmJiB2LmluaXQobyksIHIgPT09IGEpIG4gPT09IGEgJiYgKG4gPSB2LkNTUy5nZXRQcm9wZXJ0eVZhbHVlKG8sIHQpKTtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB2LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKG8sIHQsIHIpO1xuICAgICAgICAgICAgICAgICAgICBcInRyYW5zZm9ybVwiID09PSBzWzBdICYmIHYuQ1NTLmZsdXNoVHJhbnNmb3JtQ2FjaGUobyksIG4gPSBzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksIG5cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsID8gVC5wcm9taXNlIHx8IG51bGwgOiBmXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZShlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGcuaXNBcnJheShlKSA/IChyID0gZVswXSwgIWcuaXNBcnJheShlWzFdKSAmJiAvXltcXGQtXS8udGVzdChlWzFdKSB8fCBnLmlzRnVuY3Rpb24oZVsxXSkgfHwgeC5SZWdFeC5pc0hleC50ZXN0KGVbMV0pID8gcyA9IGVbMV0gOiAoZy5pc1N0cmluZyhlWzFdKSAmJiAheC5SZWdFeC5pc0hleC50ZXN0KGVbMV0pIHx8IGcuaXNBcnJheShlWzFdKSkgJiYgKGkgPSB0ID8gZVsxXSA6IHUoZVsxXSwgby5kdXJhdGlvbiksIGVbMl0gIT09IGEgJiYgKHMgPSBlWzJdKSkpIDogciA9IGUsIHQgfHwgKGkgPSBpIHx8IG8uZWFzaW5nKSwgZy5pc0Z1bmN0aW9uKHIpICYmIChyID0gci5jYWxsKG4sIHcsIFApKSwgZy5pc0Z1bmN0aW9uKHMpICYmIChzID0gcy5jYWxsKG4sIHcsIFApKSwgW3IgfHwgMCwgaSwgc11cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGYoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGE7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9ICh0IHx8IFwiMFwiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWyVBLXpdKyQvLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID0gZSwgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSksIHIgfHwgKHIgPSB4LlZhbHVlcy5nZXRVbml0VHlwZShlKSksIFthLCByXVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteVBhcmVudDogbi5wYXJlbnROb2RlIHx8IHIuYm9keSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHguZ2V0UHJvcGVydHlWYWx1ZShuLCBcInBvc2l0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogeC5nZXRQcm9wZXJ0eVZhbHVlKG4sIFwiZm9udFNpemVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLnBvc2l0aW9uID09PSBOLmxhc3RQb3NpdGlvbiAmJiBlLm15UGFyZW50ID09PSBOLmxhc3RQYXJlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuZm9udFNpemUgPT09IE4ubGFzdEZvbnRTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgTi5sYXN0UGFyZW50ID0gZS5teVBhcmVudCwgTi5sYXN0UG9zaXRpb24gPSBlLnBvc2l0aW9uLCBOLmxhc3RGb250U2l6ZSA9IGUuZm9udFNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiBhKSBsLmVtVG9QeCA9IE4ubGFzdEVtVG9QeCwgbC5wZXJjZW50VG9QeFdpZHRoID0gTi5sYXN0UGVyY2VudFRvUHhXaWR0aCwgbC5wZXJjZW50VG9QeEhlaWdodCA9IE4ubGFzdFBlcmNlbnRUb1B4SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBpKG4pLmlzU1ZHID8gci5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInJlY3RcIikgOiByLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5pbml0KHUpLCBlLm15UGFyZW50LmFwcGVuZENoaWxkKHUpLCAkLmVhY2goW1wib3ZlcmZsb3dcIiwgXCJvdmVyZmxvd1hcIiwgXCJvdmVyZmxvd1lcIl0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuQ1NTLnNldFByb3BlcnR5VmFsdWUodSwgdCwgXCJoaWRkZW5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LCBcInBvc2l0aW9uXCIsIGUucG9zaXRpb24pLCB2LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsIFwiZm9udFNpemVcIiwgZS5mb250U2l6ZSksIHYuQ1NTLnNldFByb3BlcnR5VmFsdWUodSwgXCJib3hTaXppbmdcIiwgXCJjb250ZW50LWJveFwiKSwgJC5lYWNoKFtcIm1pbldpZHRoXCIsIFwibWF4V2lkdGhcIiwgXCJ3aWR0aFwiLCBcIm1pbkhlaWdodFwiLCBcIm1heEhlaWdodFwiLCBcImhlaWdodFwiXSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LCB0LCBzICsgXCIlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHYuQ1NTLnNldFByb3BlcnR5VmFsdWUodSwgXCJwYWRkaW5nTGVmdFwiLCBzICsgXCJlbVwiKSwgbC5wZXJjZW50VG9QeFdpZHRoID0gTi5sYXN0UGVyY2VudFRvUHhXaWR0aCA9IChwYXJzZUZsb2F0KHguZ2V0UHJvcGVydHlWYWx1ZSh1LCBcIndpZHRoXCIsIG51bGwsICEwKSkgfHwgMSkgLyBzLCBsLnBlcmNlbnRUb1B4SGVpZ2h0ID0gTi5sYXN0UGVyY2VudFRvUHhIZWlnaHQgPSAocGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUodSwgXCJoZWlnaHRcIiwgbnVsbCwgITApKSB8fCAxKSAvIHMsIGwuZW1Ub1B4ID0gTi5sYXN0RW1Ub1B4ID0gKHBhcnNlRmxvYXQoeC5nZXRQcm9wZXJ0eVZhbHVlKHUsIFwicGFkZGluZ0xlZnRcIikpIHx8IDEpIC8gcywgZS5teVBhcmVudC5yZW1vdmVDaGlsZCh1KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IE4ucmVtVG9QeCAmJiAoTi5yZW1Ub1B4ID0gcGFyc2VGbG9hdCh4LmdldFByb3BlcnR5VmFsdWUoci5ib2R5LCBcImZvbnRTaXplXCIpKSB8fCAxNiksIG51bGwgPT09IE4udndUb1B4ICYmIChOLnZ3VG9QeCA9IHBhcnNlRmxvYXQodC5pbm5lcldpZHRoKSAvIDEwMCwgTi52aFRvUHggPSBwYXJzZUZsb2F0KHQuaW5uZXJIZWlnaHQpIC8gMTAwKSwgbC5yZW1Ub1B4ID0gTi5yZW1Ub1B4LCBsLnZ3VG9QeCA9IE4udndUb1B4LCBsLnZoVG9QeCA9IE4udmhUb1B4LCB2LmRlYnVnID49IDEgJiYgY29uc29sZS5sb2coXCJVbml0IHJhdGlvczogXCIgKyBKU09OLnN0cmluZ2lmeShsKSwgbiksIGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoby5iZWdpbiAmJiAwID09PSB3KSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgby5iZWdpbi5jYWxsKG0sIG0pXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic2Nyb2xsXCIgPT09IGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBTID0gL154JC9pLnRlc3Qoby5heGlzKSA/IFwiTGVmdFwiIDogXCJUb3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWID0gcGFyc2VGbG9hdChvLm9mZnNldCkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDLCBBLCBGO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5jb250YWluZXIgPyBnLmlzV3JhcHBlZChvLmNvbnRhaW5lcikgfHwgZy5pc05vZGUoby5jb250YWluZXIpID8gKG8uY29udGFpbmVyID0gby5jb250YWluZXJbMF0gfHwgby5jb250YWluZXIsIEMgPSBvLmNvbnRhaW5lcltcInNjcm9sbFwiICsgU10sIEYgPSBDICsgJChuKS5wb3NpdGlvbigpW1MudG9Mb3dlckNhc2UoKV0gKyBWKSA6IG8uY29udGFpbmVyID0gbnVsbCA6IChDID0gdi5TdGF0ZS5zY3JvbGxBbmNob3Jbdi5TdGF0ZVtcInNjcm9sbFByb3BlcnR5XCIgKyBTXV0sIEEgPSB2LlN0YXRlLnNjcm9sbEFuY2hvclt2LlN0YXRlW1wic2Nyb2xsUHJvcGVydHlcIiArIChcIkxlZnRcIiA9PT0gUyA/IFwiVG9wXCIgOiBcIkxlZnRcIildXSwgRiA9ICQobikub2Zmc2V0KClbUy50b0xvd2VyQ2FzZSgpXSArIFYpLCBzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZTogITEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWU6IEMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZTogQyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWU6IEYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRUeXBlOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IG8uZWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IG8uY29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBTLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0ZXJuYXRlVmFsdWU6IEFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogblxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhcInR3ZWVuc0NvbnRhaW5lciAoc2Nyb2xsKTogXCIsIHMuc2Nyb2xsLCBuKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwicmV2ZXJzZVwiID09PSBrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWkobikudHdlZW5zQ29udGFpbmVyKSByZXR1cm4gdm9pZCAkLmRlcXVldWUobiwgby5xdWV1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5vbmVcIiA9PT0gaShuKS5vcHRzLmRpc3BsYXkgJiYgKGkobikub3B0cy5kaXNwbGF5ID0gXCJhdXRvXCIpLCBcImhpZGRlblwiID09PSBpKG4pLm9wdHMudmlzaWJpbGl0eSAmJiAoaShuKS5vcHRzLnZpc2liaWxpdHkgPSBcInZpc2libGVcIiksIGkobikub3B0cy5sb29wID0gITEsIGkobikub3B0cy5iZWdpbiA9IG51bGwsIGkobikub3B0cy5jb21wbGV0ZSA9IG51bGwsIGIuZWFzaW5nIHx8IGRlbGV0ZSBvLmVhc2luZywgYi5kdXJhdGlvbiB8fCBkZWxldGUgby5kdXJhdGlvbiwgbyA9ICQuZXh0ZW5kKHt9LCBpKG4pLm9wdHMsIG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEUgPSAkLmV4dGVuZCghMCwge30sIGkobikudHdlZW5zQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gRSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJlbGVtZW50XCIgIT09IGopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEggPSBFW2pdLnN0YXJ0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVbal0uc3RhcnRWYWx1ZSA9IEVbal0uY3VycmVudFZhbHVlID0gRVtqXS5lbmRWYWx1ZSwgRVtqXS5lbmRWYWx1ZSA9IEgsIGcuaXNFbXB0eU9iamVjdChiKSB8fCAoRVtqXS5lYXNpbmcgPSBvLmVhc2luZyksIHYuZGVidWcgJiYgY29uc29sZS5sb2coXCJyZXZlcnNlIHR3ZWVuc0NvbnRhaW5lciAoXCIgKyBqICsgXCIpOiBcIiArIEpTT04uc3RyaW5naWZ5KEVbal0pLCBuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBFXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJzdGFydFwiID09PSBrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgRTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkobikudHdlZW5zQ29udGFpbmVyICYmIGkobikuaXNBbmltYXRpbmcgPT09ICEwICYmIChFID0gaShuKS50d2VlbnNDb250YWluZXIpLCAkLmVhY2goaCwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVnRXhwKFwiXlwiICsgeC5MaXN0cy5jb2xvcnMuam9pbihcIiR8XlwiKSArIFwiJFwiKS50ZXN0KGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gcCh0LCAhMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gclswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHJbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4LlJlZ0V4LmlzSGV4LnRlc3QobikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSBbXCJSZWRcIiwgXCJHcmVlblwiLCBcIkJsdWVcIl0sIGwgPSB4LlZhbHVlcy5oZXhUb1JnYihuKSwgdSA9IGkgPyB4LlZhbHVlcy5oZXhUb1JnYihpKSA6IGEsIGMgPSAwOyBjIDwgcy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gW2xbY11dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gJiYgZi5wdXNoKG8pLCB1ICE9PSBhICYmIGYucHVzaCh1W2NdKSwgaFtlICsgc1tjXV0gPSBmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaFtlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBSIGluIGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHAoaFtSXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHogPSBPWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gT1sxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTSA9IE9bMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUiA9IHguTmFtZXMuY2FtZWxDYXNlKFIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJID0geC5Ib29rcy5nZXRSb290KFIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkobikuaXNTVkcgfHwgXCJ0d2VlblwiID09PSBJIHx8IHguTmFtZXMucHJlZml4Q2hlY2soSSlbMV0gIT09ICExIHx8IHguTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtJXSAhPT0gYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoby5kaXNwbGF5ICE9PSBhICYmIG51bGwgIT09IG8uZGlzcGxheSAmJiBcIm5vbmVcIiAhPT0gby5kaXNwbGF5IHx8IG8udmlzaWJpbGl0eSAhPT0gYSAmJiBcImhpZGRlblwiICE9PSBvLnZpc2liaWxpdHkpICYmIC9vcGFjaXR5fGZpbHRlci8udGVzdChSKSAmJiAhTSAmJiAwICE9PSB6ICYmIChNID0gMCksIG8uX2NhY2hlVmFsdWVzICYmIEUgJiYgRVtSXSA/IChNID09PSBhICYmIChNID0gRVtSXS5lbmRWYWx1ZSArIEVbUl0udW5pdFR5cGUpLCBCID0gaShuKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW0ldKSA6IHguSG9va3MucmVnaXN0ZXJlZFtSXSA/IE0gPT09IGEgPyAoQiA9IHguZ2V0UHJvcGVydHlWYWx1ZShuLCBJKSwgTSA9IHguZ2V0UHJvcGVydHlWYWx1ZShuLCBSLCBCKSkgOiBCID0geC5Ib29rcy50ZW1wbGF0ZXNbSV1bMV0gOiBNID09PSBhICYmIChNID0geC5nZXRQcm9wZXJ0eVZhbHVlKG4sIFIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFcsIEcsIEQsIFggPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFcgPSBmKFIsIE0pLCBNID0gV1swXSwgRCA9IFdbMV0sIFcgPSBmKFIsIHopLCB6ID0gV1swXS5yZXBsYWNlKC9eKFsrLVxcLypdKT0vLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBYID0gdCwgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIEcgPSBXWzFdLCBNID0gcGFyc2VGbG9hdChNKSB8fCAwLCB6ID0gcGFyc2VGbG9hdCh6KSB8fCAwLCBcIiVcIiA9PT0gRyAmJiAoL14oZm9udFNpemV8bGluZUhlaWdodCkkLy50ZXN0KFIpID8gKHogLz0gMTAwLCBHID0gXCJlbVwiKSA6IC9ec2NhbGUvLnRlc3QoUikgPyAoeiAvPSAxMDAsIEcgPSBcIlwiKSA6IC8oUmVkfEdyZWVufEJsdWUpJC9pLnRlc3QoUikgJiYgKHogPSB6IC8gMTAwICogMjU1LCBHID0gXCJcIikpLCAvW1xcLypdLy50ZXN0KFgpKSBHID0gRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoRCAhPT0gRyAmJiAwICE9PSBNKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHopIEcgPSBEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGwgfHwgZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBZID0gL21hcmdpbnxwYWRkaW5nfGxlZnR8cmlnaHR8d2lkdGh8dGV4dHx3b3JkfGxldHRlci9pLnRlc3QoUikgfHwgL1gkLy50ZXN0KFIpIHx8IFwieFwiID09PSBSID8gXCJ4XCIgOiBcInlcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNICo9IFwieFwiID09PSBZID8gbC5wZXJjZW50VG9QeFdpZHRoIDogbC5wZXJjZW50VG9QeEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInB4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gKj0gbFtEICsgXCJUb1B4XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoRykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gKj0gMSAvIChcInhcIiA9PT0gWSA/IGwucGVyY2VudFRvUHhXaWR0aCA6IGwucGVyY2VudFRvUHhIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTSAqPSAxIC8gbFtHICsgXCJUb1B4XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKFgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIitcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHogPSBNICsgejtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiLVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeiA9IE0gLSB6O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIqXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ID0gTSAqIHo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIi9cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHogPSBNIC8gelxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNbUl0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZTogQixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWU6IE0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWU6IE0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZTogeixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRUeXBlOiBHLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHYuZGVidWcgJiYgY29uc29sZS5sb2coXCJ0d2VlbnNDb250YWluZXIgKFwiICsgUiArIFwiKTogXCIgKyBKU09OLnN0cmluZ2lmeShzW1JdKSwgbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugdi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhcIlNraXBwaW5nIFtcIiArIEkgKyBcIl0gZHVlIHRvIGEgbGFjayBvZiBicm93c2VyIHN1cHBvcnQuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzLmVsZW1lbnQgPSBuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcy5lbGVtZW50ICYmICh4LlZhbHVlcy5hZGRDbGFzcyhuLCBcInZlbG9jaXR5LWFuaW1hdGluZ1wiKSwgTC5wdXNoKHMpLCBcIlwiID09PSBvLnF1ZXVlICYmIChpKG4pLnR3ZWVuc0NvbnRhaW5lciA9IHMsIGkobikub3B0cyA9IG8pLCBpKG4pLmlzQW5pbWF0aW5nID0gITAsIHcgPT09IFAgLSAxID8gKHYuU3RhdGUuY2FsbHMucHVzaChbTCwgbSwgbywgbnVsbCwgVC5yZXNvbHZlcl0pLCB2LlN0YXRlLmlzVGlja2luZyA9PT0gITEgJiYgKHYuU3RhdGUuaXNUaWNraW5nID0gITAsIGMoKSkpIDogdysrKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIG8gPSAkLmV4dGVuZCh7fSwgdi5kZWZhdWx0cywgYiksXG4gICAgICAgICAgICAgICAgICAgIHMgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgbDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGkobikgPT09IGEgJiYgdi5pbml0KG4pLCBwYXJzZUZsb2F0KG8uZGVsYXkpICYmIG8ucXVldWUgIT09ICExICYmICQucXVldWUobiwgby5xdWV1ZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdi52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnID0gITAsIGkobikuZGVsYXlUaW1lciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQ6IHNldFRpbWVvdXQoZSwgcGFyc2VGbG9hdChvLmRlbGF5KSksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSwgby5kdXJhdGlvbi50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmFzdFwiOlxuICAgICAgICAgICAgICAgICAgICBvLmR1cmF0aW9uID0gMjAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwibm9ybWFsXCI6XG4gICAgICAgICAgICAgICAgICAgIG8uZHVyYXRpb24gPSB5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic2xvd1wiOlxuICAgICAgICAgICAgICAgICAgICBvLmR1cmF0aW9uID0gNjAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBvLmR1cmF0aW9uID0gcGFyc2VGbG9hdChvLmR1cmF0aW9uKSB8fCAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHYubW9jayAhPT0gITEgJiYgKHYubW9jayA9PT0gITAgPyBvLmR1cmF0aW9uID0gby5kZWxheSA9IDEgOiAoby5kdXJhdGlvbiAqPSBwYXJzZUZsb2F0KHYubW9jaykgfHwgMSwgby5kZWxheSAqPSBwYXJzZUZsb2F0KHYubW9jaykgfHwgMSkpLCBvLmVhc2luZyA9IHUoby5lYXNpbmcsIG8uZHVyYXRpb24pLCBvLmJlZ2luICYmICFnLmlzRnVuY3Rpb24oby5iZWdpbikgJiYgKG8uYmVnaW4gPSBudWxsKSwgby5wcm9ncmVzcyAmJiAhZy5pc0Z1bmN0aW9uKG8ucHJvZ3Jlc3MpICYmIChvLnByb2dyZXNzID0gbnVsbCksIG8uY29tcGxldGUgJiYgIWcuaXNGdW5jdGlvbihvLmNvbXBsZXRlKSAmJiAoby5jb21wbGV0ZSA9IG51bGwpLCBvLmRpc3BsYXkgIT09IGEgJiYgbnVsbCAhPT0gby5kaXNwbGF5ICYmIChvLmRpc3BsYXkgPSBvLmRpc3BsYXkudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLCBcImF1dG9cIiA9PT0gby5kaXNwbGF5ICYmIChvLmRpc3BsYXkgPSB2LkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUobikpKSwgby52aXNpYmlsaXR5ICE9PSBhICYmIG51bGwgIT09IG8udmlzaWJpbGl0eSAmJiAoby52aXNpYmlsaXR5ID0gby52aXNpYmlsaXR5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSksIG8ubW9iaWxlSEEgPSBvLm1vYmlsZUhBICYmIHYuU3RhdGUuaXNNb2JpbGUgJiYgIXYuU3RhdGUuaXNHaW5nZXJicmVhZCwgby5xdWV1ZSA9PT0gITEgPyBvLmRlbGF5ID8gc2V0VGltZW91dChlLCBvLmRlbGF5KSA6IGUoKSA6ICQucXVldWUobiwgby5xdWV1ZSwgZnVuY3Rpb24gKHQsIHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPT09ICEwID8gKFQucHJvbWlzZSAmJiBULnJlc29sdmVyKG0pLCAhMCkgOiAodi52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnID0gITAsIHZvaWQgZSh0KSlcbiAgICAgICAgICAgICAgICB9KSwgXCJcIiAhPT0gby5xdWV1ZSAmJiBcImZ4XCIgIT09IG8ucXVldWUgfHwgXCJpbnByb2dyZXNzXCIgPT09ICQucXVldWUobilbMF0gfHwgJC5kZXF1ZXVlKG4pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcyA9IGFyZ3VtZW50c1swXSAmJiAoYXJndW1lbnRzWzBdLnAgfHwgJC5pc1BsYWluT2JqZWN0KGFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzKSAmJiAhYXJndW1lbnRzWzBdLnByb3BlcnRpZXMubmFtZXMgfHwgZy5pc1N0cmluZyhhcmd1bWVudHNbMF0ucHJvcGVydGllcykpLFxuICAgICAgICAgICAgICAgIGwsIGYsIGQsIG0sIGgsIGI7XG4gICAgICAgICAgICBpZiAoZy5pc1dyYXBwZWQodGhpcykgPyAobCA9ICExLCBkID0gMCwgbSA9IHRoaXMsIGYgPSB0aGlzKSA6IChsID0gITAsIGQgPSAxLCBtID0gcyA/IGFyZ3VtZW50c1swXS5lbGVtZW50cyB8fCBhcmd1bWVudHNbMF0uZSA6IGFyZ3VtZW50c1swXSksIG0gPSBvKG0pKSB7XG4gICAgICAgICAgICAgICAgcyA/IChoID0gYXJndW1lbnRzWzBdLnByb3BlcnRpZXMgfHwgYXJndW1lbnRzWzBdLnAsIGIgPSBhcmd1bWVudHNbMF0ub3B0aW9ucyB8fCBhcmd1bWVudHNbMF0ubykgOiAoaCA9IGFyZ3VtZW50c1tkXSwgYiA9IGFyZ3VtZW50c1tkICsgMV0pO1xuICAgICAgICAgICAgICAgIHZhciBQID0gbS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHcgPSAwO1xuICAgICAgICAgICAgICAgIGlmICghL14oc3RvcHxmaW5pc2gpJC9pLnRlc3QoaCkgJiYgISQuaXNQbGFpbk9iamVjdChiKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgViA9IGQgKyAxO1xuICAgICAgICAgICAgICAgICAgICBiID0ge307XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIEMgPSBWOyBDIDwgYXJndW1lbnRzLmxlbmd0aDsgQysrKSBnLmlzQXJyYXkoYXJndW1lbnRzW0NdKSB8fCAhL14oZmFzdHxub3JtYWx8c2xvdykkL2kudGVzdChhcmd1bWVudHNbQ10pICYmICEvXlxcZC8udGVzdChhcmd1bWVudHNbQ10pID8gZy5pc1N0cmluZyhhcmd1bWVudHNbQ10pIHx8IGcuaXNBcnJheShhcmd1bWVudHNbQ10pID8gYi5lYXNpbmcgPSBhcmd1bWVudHNbQ10gOiBnLmlzRnVuY3Rpb24oYXJndW1lbnRzW0NdKSAmJiAoYi5jb21wbGV0ZSA9IGFyZ3VtZW50c1tDXSkgOiBiLmR1cmF0aW9uID0gYXJndW1lbnRzW0NdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBUID0ge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0ZXI6IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGwgJiYgdi5Qcm9taXNlICYmIChULnByb21pc2UgPSBuZXcgdi5Qcm9taXNlKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIFQucmVzb2x2ZXIgPSBlLCBULnJlamVjdGVyID0gdFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB2YXIgaztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGgpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsXCI6XG4gICAgICAgICAgICAgICAgICAgIGsgPSBcInNjcm9sbFwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicmV2ZXJzZVwiOlxuICAgICAgICAgICAgICAgICAgICBrID0gXCJyZXZlcnNlXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJmaW5pc2hcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwic3RvcFwiOlxuICAgICAgICAgICAgICAgICAgICAkLmVhY2gobSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkodCkgJiYgaSh0KS5kZWxheVRpbWVyICYmIChjbGVhclRpbWVvdXQoaSh0KS5kZWxheVRpbWVyLnNldFRpbWVvdXQpLCBpKHQpLmRlbGF5VGltZXIubmV4dCAmJiBpKHQpLmRlbGF5VGltZXIubmV4dCgpLCBkZWxldGUgaSh0KS5kZWxheVRpbWVyKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIEEgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQuZWFjaCh2LlN0YXRlLmNhbGxzLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAkLmVhY2godFsxXSwgZnVuY3Rpb24gKHIsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGIgPT09IGEgPyBcIlwiIDogYjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyA9PT0gITAgfHwgdFsyXS5xdWV1ZSA9PT0gbyB8fCBiID09PSBhICYmIHRbMl0ucXVldWUgPT09ICExID8gdm9pZCAkLmVhY2gobSwgZnVuY3Rpb24gKHIsIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9PT0gbiAmJiAoKGIgPT09ICEwIHx8IGcuaXNTdHJpbmcoYikpICYmICgkLmVhY2goJC5xdWV1ZShhLCBnLmlzU3RyaW5nKGIpID8gYiA6IFwiXCIpLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5pc0Z1bmN0aW9uKHQpICYmIHQobnVsbCwgITApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAkLnF1ZXVlKGEsIGcuaXNTdHJpbmcoYikgPyBiIDogXCJcIiwgW10pKSwgXCJzdG9wXCIgPT09IGggPyAoaShhKSAmJiBpKGEpLnR3ZWVuc0NvbnRhaW5lciAmJiBvICE9PSAhMSAmJiAkLmVhY2goaShhKS50d2VlbnNDb250YWluZXIsIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmVuZFZhbHVlID0gdC5jdXJyZW50VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIEEucHVzaChlKSkgOiBcImZpbmlzaFwiID09PSBoICYmICh0WzJdLmR1cmF0aW9uID0gMSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiAhMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSksIFwic3RvcFwiID09PSBoICYmICgkLmVhY2goQSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAodCwgITApXG4gICAgICAgICAgICAgICAgICAgIH0pLCBULnByb21pc2UgJiYgVC5yZXNvbHZlcihtKSksIGUoKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISQuaXNQbGFpbk9iamVjdChoKSB8fCBnLmlzRW1wdHlPYmplY3QoaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLmlzU3RyaW5nKGgpICYmIHYuUmVkaXJlY3RzW2hdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEYgPSAkLmV4dGVuZCh7fSwgYiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBGLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqID0gRi5kZWxheSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGLmJhY2t3YXJkcyA9PT0gITAgJiYgKG0gPSAkLmV4dGVuZCghMCwgW10sIG0pLnJldmVyc2UoKSksICQuZWFjaChtLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KEYuc3RhZ2dlcikgPyBGLmRlbGF5ID0gaiArIHBhcnNlRmxvYXQoRi5zdGFnZ2VyKSAqIGUgOiBnLmlzRnVuY3Rpb24oRi5zdGFnZ2VyKSAmJiAoRi5kZWxheSA9IGogKyBGLnN0YWdnZXIuY2FsbCh0LCBlLCBQKSksIEYuZHJhZyAmJiAoRi5kdXJhdGlvbiA9IHBhcnNlRmxvYXQoRSkgfHwgKC9eKGNhbGxvdXR8dHJhbnNpdGlvbikvLnRlc3QoaCkgPyAxZTMgOiB5KSwgRi5kdXJhdGlvbiA9IE1hdGgubWF4KEYuZHVyYXRpb24gKiAoRi5iYWNrd2FyZHMgPyAxIC0gZSAvIFAgOiAoZSArIDEpIC8gUCksIC43NSAqIEYuZHVyYXRpb24sIDIwMCkpLCB2LlJlZGlyZWN0c1toXS5jYWxsKHQsIHQsIEYgfHwge30sIGUsIFAsIG0sIFQucHJvbWlzZSA/IFQgOiBhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBIID0gXCJWZWxvY2l0eTogRmlyc3QgYXJndW1lbnQgKFwiICsgaCArIFwiKSB3YXMgbm90IGEgcHJvcGVydHkgbWFwLCBhIGtub3duIGFjdGlvbiwgb3IgYSByZWdpc3RlcmVkIHJlZGlyZWN0LiBBYm9ydGluZy5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBULnByb21pc2UgPyBULnJlamVjdGVyKG5ldyBFcnJvcihIKSkgOiBjb25zb2xlLmxvZyhIKSwgZSgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgayA9IFwic3RhcnRcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgTiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UG9zaXRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Rm9udFNpemU6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGVyY2VudFRvUHhXaWR0aDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQZXJjZW50VG9QeEhlaWdodDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RFbVRvUHg6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1Ub1B4OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdndUb1B4OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmhUb1B4OiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIEwgPSBbXTtcbiAgICAgICAgICAgICAgICAkLmVhY2gobSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZy5pc05vZGUodCkgJiYgbi5jYWxsKHQpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIEYgPSAkLmV4dGVuZCh7fSwgdi5kZWZhdWx0cywgYiksXG4gICAgICAgICAgICAgICAgICAgIFI7XG4gICAgICAgICAgICAgICAgaWYgKEYubG9vcCA9IHBhcnNlSW50KEYubG9vcCksIFIgPSAyICogRi5sb29wIC0gMSwgRi5sb29wKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBPID0gMDsgUiA+IE87IE8rKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXk6IEYuZGVsYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IEYucHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBPID09PSBSIC0gMSAmJiAoei5kaXNwbGF5ID0gRi5kaXNwbGF5LCB6LnZpc2liaWxpdHkgPSBGLnZpc2liaWxpdHksIHouY29tcGxldGUgPSBGLmNvbXBsZXRlKSwgUyhtLCBcInJldmVyc2VcIiwgeilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdiA9ICQuZXh0ZW5kKFMsIHYpLCB2LmFuaW1hdGUgPSBTO1xuICAgICAgICB2YXIgUCA9IHQucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGQ7XG4gICAgICAgIHJldHVybiB2LlN0YXRlLmlzTW9iaWxlIHx8IHIuaGlkZGVuID09PSBhIHx8IHIuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgci5oaWRkZW4gPyAoUCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBlKCEwKVxuICAgICAgICAgICAgICAgIH0sIDE2KVxuICAgICAgICAgICAgfSwgYygpKSA6IFAgPSB0LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBkXG4gICAgICAgIH0pLCBlLlZlbG9jaXR5ID0gdiwgZSAhPT0gdCAmJiAoZS5mbi52ZWxvY2l0eSA9IFMsIGUuZm4udmVsb2NpdHkuZGVmYXVsdHMgPSB2LmRlZmF1bHRzKSwgJC5lYWNoKFtcIkRvd25cIiwgXCJVcFwiXSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHYuUmVkaXJlY3RzW1wic2xpZGVcIiArIHRdID0gZnVuY3Rpb24gKGUsIHIsIG4sIG8sIGksIHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9ICQuZXh0ZW5kKHt9LCByKSxcbiAgICAgICAgICAgICAgICAgICAgdSA9IGwuYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgIGMgPSBsLmNvbXBsZXRlLFxuICAgICAgICAgICAgICAgICAgICBwID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZiA9IHt9O1xuICAgICAgICAgICAgICAgIGwuZGlzcGxheSA9PT0gYSAmJiAobC5kaXNwbGF5ID0gXCJEb3duXCIgPT09IHQgPyBcImlubGluZVwiID09PSB2LkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZSkgPyBcImlubGluZS1ibG9ja1wiIDogXCJibG9ja1wiIDogXCJub25lXCIpLCBsLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB1ICYmIHUuY2FsbChpLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciBpbiBwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmW3JdID0gZS5zdHlsZVtyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdi5DU1MuZ2V0UHJvcGVydHlWYWx1ZShlLCByKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBbcl0gPSBcIkRvd25cIiA9PT0gdCA/IFthLCAwXSA6IFswLCBhXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGYub3ZlcmZsb3cgPSBlLnN0eWxlLm92ZXJmbG93LCBlLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIlxuICAgICAgICAgICAgICAgIH0sIGwuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgaW4gZikgZS5zdHlsZVt0XSA9IGZbdF07XG4gICAgICAgICAgICAgICAgICAgIGMgJiYgYy5jYWxsKGksIGkpLCBzICYmIHMucmVzb2x2ZXIoaSlcbiAgICAgICAgICAgICAgICB9LCB2KGUsIHAsIGwpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAkLmVhY2goW1wiSW5cIiwgXCJPdXRcIl0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB2LlJlZGlyZWN0c1tcImZhZGVcIiArIHRdID0gZnVuY3Rpb24gKGUsIHIsIG4sIG8sIGksIHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9ICQuZXh0ZW5kKHt9LCByKSxcbiAgICAgICAgICAgICAgICAgICAgdSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IFwiSW5cIiA9PT0gdCA/IDEgOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGMgPSBsLmNvbXBsZXRlO1xuICAgICAgICAgICAgICAgIGwuY29tcGxldGUgPSBuICE9PSBvIC0gMSA/IGwuYmVnaW4gPSBudWxsIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjICYmIGMuY2FsbChpLCBpKSwgcyAmJiBzLnJlc29sdmVyKGkpXG4gICAgICAgICAgICAgICAgfSwgbC5kaXNwbGF5ID09PSBhICYmIChsLmRpc3BsYXkgPSBcIkluXCIgPT09IHQgPyBcImF1dG9cIiA6IFwibm9uZVwiKSwgdih0aGlzLCB1LCBsKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgdlxuICAgIH0od2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG8gfHwgd2luZG93LCB3aW5kb3csIGRvY3VtZW50KVxufSk7IiwiLy8gVklERU8gQkFDS0dST1VORFxuXG4kKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgc2NhbGVWaWRlb0NvbnRhaW5lcigpO1xuXG4gICAgaW5pdEJhbm5lclZpZGVvU2l6ZSgnLnZpZGVvLWNvbnRhaW5lciAucG9zdGVyIGltZycpO1xuICAgIGluaXRCYW5uZXJWaWRlb1NpemUoJy52aWRlby1jb250YWluZXIgLmZpbHRlcicpO1xuICAgIGluaXRCYW5uZXJWaWRlb1NpemUoJy52aWRlby1jb250YWluZXIgdmlkZW8nKTtcblxuICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNjYWxlVmlkZW9Db250YWluZXIoKTtcbiAgICAgICAgc2NhbGVCYW5uZXJWaWRlb1NpemUoJy52aWRlby1jb250YWluZXIgLnBvc3RlciBpbWcnKTtcbiAgICAgICAgc2NhbGVCYW5uZXJWaWRlb1NpemUoJy52aWRlby1jb250YWluZXIgLmZpbHRlcicpO1xuICAgICAgICBzY2FsZUJhbm5lclZpZGVvU2l6ZSgnLnZpZGVvLWNvbnRhaW5lciB2aWRlbycpO1xuICAgIH0pO1xuXG59KTtcblxuZnVuY3Rpb24gc2NhbGVWaWRlb0NvbnRhaW5lcigpIHtcblxuICAgIHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCkgKyA1O1xuICAgIHZhciB1bml0SGVpZ2h0ID0gcGFyc2VJbnQoaGVpZ2h0KSArICdweCc7XG4gICAgJCgnLmhvbWVwYWdlLWhlcm8tbW9kdWxlJykuY3NzKCdoZWlnaHQnLHVuaXRIZWlnaHQpO1xuXG59XG5cbmZ1bmN0aW9uIGluaXRCYW5uZXJWaWRlb1NpemUoZWxlbWVudCl7XG5cbiAgICAkKGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgJCh0aGlzKS5kYXRhKCdoZWlnaHQnLCAkKHRoaXMpLmhlaWdodCgpKTtcbiAgICAgICAgJCh0aGlzKS5kYXRhKCd3aWR0aCcsICQodGhpcykud2lkdGgoKSk7XG4gICAgfSk7XG5cbiAgICBzY2FsZUJhbm5lclZpZGVvU2l6ZShlbGVtZW50KTtcblxufVxuXG5mdW5jdGlvbiBzY2FsZUJhbm5lclZpZGVvU2l6ZShlbGVtZW50KXtcblxuICAgIHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpLFxuICAgIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSArIDUsXG4gICAgdmlkZW9XaWR0aCxcbiAgICB2aWRlb0hlaWdodDtcblxuICAgIC8qIGNvbnNvbGUubG9nKHdpbmRvd0hlaWdodCk7ICovXG5cbiAgICAkKGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHZpZGVvQXNwZWN0UmF0aW8gPSAkKHRoaXMpLmRhdGEoJ2hlaWdodCcpLyQodGhpcykuZGF0YSgnd2lkdGgnKTtcblxuICAgICAgICAkKHRoaXMpLndpZHRoKHdpbmRvd1dpZHRoKTtcblxuICAgICAgICBpZih3aW5kb3dXaWR0aCA8IDEwMDApe1xuICAgICAgICAgICAgdmlkZW9IZWlnaHQgPSB3aW5kb3dIZWlnaHQ7XG4gICAgICAgICAgICB2aWRlb1dpZHRoID0gdmlkZW9IZWlnaHQgLyB2aWRlb0FzcGVjdFJhdGlvO1xuICAgICAgICAgICAgJCh0aGlzKS5jc3MoeydtYXJnaW4tdG9wJyA6IDAsICdtYXJnaW4tbGVmdCcgOiAtKHZpZGVvV2lkdGggLSB3aW5kb3dXaWR0aCkgLyAyICsgJ3B4J30pO1xuXG4gICAgICAgICAgICAkKHRoaXMpLndpZHRoKHZpZGVvV2lkdGgpLmhlaWdodCh2aWRlb0hlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcuaG9tZXBhZ2UtaGVyby1tb2R1bGUgLnZpZGVvLWNvbnRhaW5lciB2aWRlbycpLmFkZENsYXNzKCdmYWRlSW4gYW5pbWF0ZWQnKTtcblxuICAgIH0pO1xufSIsIi8qIVxuICogV2F2ZXMgdjAuNi40XG4gKiBodHRwOi8vZmlhbi5teS5pZC9XYXZlc1xuICpcbiAqIENvcHlyaWdodCAyMDE0IEFsZmlhbmEgRS4gU2lidWVhIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZpYW5zL1dhdmVzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqL1xuXG47XG4oZnVuY3Rpb24gKHdpbmRvdykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBXYXZlcyA9IFdhdmVzIHx8IHt9O1xuICAgIHZhciAkJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7XG5cbiAgICAvLyBGaW5kIGV4YWN0IHBvc2l0aW9uIG9mIGVsZW1lbnRcbiAgICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIGlzV2luZG93KGVsZW0pID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0VmlldztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvZmZzZXQoZWxlbSkge1xuICAgICAgICB2YXIgZG9jRWxlbSwgd2luLFxuICAgICAgICAgICAgYm94ID0ge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cbiAgICAgICAgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gdHlwZW9mIHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgfVxuICAgICAgICB3aW4gPSBnZXRXaW5kb3coZG9jKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvcDogYm94LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsZW0uY2xpZW50VG9wLFxuICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb252ZXJ0U3R5bGUob2JqKSB7XG4gICAgICAgIHZhciBzdHlsZSA9ICcnO1xuXG4gICAgICAgIGZvciAodmFyIGEgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGEpKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUgKz0gKGEgKyAnOicgKyBvYmpbYV0gKyAnOycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cblxuICAgIHZhciBFZmZlY3QgPSB7XG5cbiAgICAgICAgLy8gRWZmZWN0IGRlbGF5XG4gICAgICAgIGR1cmF0aW9uOiA3NTAsXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKGUsIGVsZW1lbnQpIHtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSByaWdodCBjbGlja1xuICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09PSAyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZWwgPSBlbGVtZW50IHx8IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSByaXBwbGVcbiAgICAgICAgICAgIHZhciByaXBwbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSAnd2F2ZXMtcmlwcGxlJztcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKHJpcHBsZSk7XG5cbiAgICAgICAgICAgIC8vIEdldCBjbGljayBjb29yZGluYXRlIGFuZCBlbGVtZW50IHdpdGRoXG4gICAgICAgICAgICB2YXIgcG9zID0gb2Zmc2V0KGVsKTtcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgPSAoZS5wYWdlWSAtIHBvcy50b3ApO1xuICAgICAgICAgICAgdmFyIHJlbGF0aXZlWCA9IChlLnBhZ2VYIC0gcG9zLmxlZnQpO1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gJ3NjYWxlKCcgKyAoKGVsLmNsaWVudFdpZHRoIC8gMTAwKSAqIDEwKSArICcpJztcblxuICAgICAgICAgICAgLy8gU3VwcG9ydCBmb3IgdG91Y2ggZGV2aWNlc1xuICAgICAgICAgICAgaWYgKCd0b3VjaGVzJyBpbiBlKSB7XG4gICAgICAgICAgICAgICAgcmVsYXRpdmVZID0gKGUudG91Y2hlc1swXS5wYWdlWSAtIHBvcy50b3ApO1xuICAgICAgICAgICAgICAgIHJlbGF0aXZlWCA9IChlLnRvdWNoZXNbMF0ucGFnZVggLSBwb3MubGVmdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF0dGFjaCBkYXRhIHRvIGVsZW1lbnRcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaG9sZCcsIERhdGUubm93KCkpO1xuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScsIHNjYWxlKTtcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIHJlbGF0aXZlWCk7XG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXknLCByZWxhdGl2ZVkpO1xuXG4gICAgICAgICAgICAvLyBTZXQgcmlwcGxlIHBvc2l0aW9uXG4gICAgICAgICAgICB2YXIgcmlwcGxlU3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSArICdweCcsXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiByZWxhdGl2ZVggKyAncHgnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZSArICcgd2F2ZXMtbm90cmFuc2l0aW9uJztcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHJpcHBsZVN0eWxlKSk7XG4gICAgICAgICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZS5yZXBsYWNlKCd3YXZlcy1ub3RyYW5zaXRpb24nLCAnJyk7XG5cbiAgICAgICAgICAgIC8vIFNjYWxlIHRoZSByaXBwbGVcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2Zvcm0nXSA9IHNjYWxlO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tcy10cmFuc2Zvcm0nXSA9IHNjYWxlO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICAgICAgICByaXBwbGVTdHlsZS50cmFuc2Zvcm0gPSBzY2FsZTtcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlLm9wYWNpdHkgPSAnMSc7XG5cbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi1kdXJhdGlvbiddID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcblxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJ10gPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xuXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShyaXBwbGVTdHlsZSkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBUb3VjaEhhbmRsZXIudG91Y2h1cChlKTtcblxuICAgICAgICAgICAgdmFyIGVsID0gdGhpcztcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGVsLmNsaWVudFdpZHRoICogMS40O1xuXG4gICAgICAgICAgICAvLyBHZXQgZmlyc3QgcmlwcGxlXG4gICAgICAgICAgICB2YXIgcmlwcGxlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciByaXBwbGVzID0gZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnd2F2ZXMtcmlwcGxlJyk7XG4gICAgICAgICAgICBpZiAocmlwcGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmlwcGxlID0gcmlwcGxlc1tyaXBwbGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVggPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnKTtcblxuICAgICAgICAgICAgLy8gR2V0IGRlbGF5IGJlZXR3ZWVuIG1vdXNlZG93biBhbmQgbW91c2UgbGVhdmVcbiAgICAgICAgICAgIHZhciBkaWZmID0gRGF0ZS5ub3coKSAtIE51bWJlcihyaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnKSk7XG4gICAgICAgICAgICB2YXIgZGVsYXkgPSAzNTAgLSBkaWZmO1xuXG4gICAgICAgICAgICBpZiAoZGVsYXkgPCAwKSB7XG4gICAgICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGYWRlIG91dCByaXBwbGUgYWZ0ZXIgZGVsYXlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSArICdweCcsXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAnMCcsXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgICAgICAgICAgICctbW96LXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICAgICAgICAgICAnLW8tdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcbiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAnLW8tdHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUoc3R5bGUpKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2hpbGQocmlwcGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgRWZmZWN0LmR1cmF0aW9uKTtcbiAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBMaXR0bGUgaGFjayB0byBtYWtlIDxpbnB1dD4gY2FuIHBlcmZvcm0gd2F2ZXMgZWZmZWN0XG4gICAgICAgIHdyYXBJbnB1dDogZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGVsZW1lbnRzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudHNbYV07XG5cbiAgICAgICAgICAgICAgICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGlucHV0IGFscmVhZHkgaGF2ZSBwYXJlbnQganVzdCBwYXNzIHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpJyAmJiBwYXJlbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBQdXQgZWxlbWVudCBjbGFzcyBhbmQgc3R5bGUgdG8gdGhlIHNwZWNpZmllZCBwYXJlbnRcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lICsgJyB3YXZlcy1pbnB1dC13cmFwcGVyJztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFN0eWxlID0gZWwuZ2V0QXR0cmlidXRlKCdzdHlsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50U3R5bGUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsIGVsZW1lbnRTdHlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gJ3dhdmVzLWJ1dHRvbi1pbnB1dCc7XG4gICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQdXQgZWxlbWVudCBhcyBjaGlsZFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKHdyYXBwZXIsIGVsKTtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZSBtb3VzZWRvd24gZXZlbnQgZm9yIDUwMG1zIGR1cmluZyBhbmQgYWZ0ZXIgdG91Y2hcbiAgICAgKi9cbiAgICB2YXIgVG91Y2hIYW5kbGVyID0ge1xuICAgICAgICAvKiB1c2VzIGFuIGludGVnZXIgcmF0aGVyIHRoYW4gYm9vbCBzbyB0aGVyZSdzIG5vIGlzc3VlcyB3aXRoXG4gICAgICAgICAqIG5lZWRpbmcgdG8gY2xlYXIgdGltZW91dHMgaWYgYW5vdGhlciB0b3VjaCBldmVudCBvY2N1cnJlZFxuICAgICAgICAgKiB3aXRoaW4gdGhlIDUwMG1zLiBDYW5ub3QgbW91c2V1cCBiZXR3ZWVuIHRvdWNoc3RhcnQgYW5kXG4gICAgICAgICAqIHRvdWNoZW5kLCBub3IgaW4gdGhlIDUwMG1zIGFmdGVyIHRvdWNoZW5kLiAqL1xuICAgICAgICB0b3VjaGVzOiAwLFxuICAgICAgICBhbGxvd0V2ZW50OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGFsbG93ID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgKz0gMTsgLy9wdXNoXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRvdWNoSGFuZGxlci50b3VjaGVzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgLT0gMTsgLy9wb3AgYWZ0ZXIgNTAwbXNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgVG91Y2hIYW5kbGVyLnRvdWNoZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgYWxsb3cgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFsbG93O1xuICAgICAgICB9LFxuICAgICAgICB0b3VjaHVwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgVG91Y2hIYW5kbGVyLmFsbG93RXZlbnQoZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBEZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlciBmb3IgLndhdmVzLWVmZmVjdCBlbGVtZW50LlxuICAgICAqIHJldHVybnMgbnVsbCB3aGVuIC53YXZlcy1lZmZlY3QgZWxlbWVudCBub3QgaW4gXCJjbGljayB0cmVlXCJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRXYXZlc0VmZmVjdEVsZW1lbnQoZSkge1xuICAgICAgICBpZiAoVG91Y2hIYW5kbGVyLmFsbG93RXZlbnQoZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcblxuICAgICAgICB3aGlsZSAodGFyZ2V0LnBhcmVudEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpICYmIHRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignd2F2ZXMtZWZmZWN0JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2F2ZXMtZWZmZWN0JykpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWJibGUgdGhlIGNsaWNrIGFuZCBzaG93IGVmZmVjdCBpZiAud2F2ZXMtZWZmZWN0IGVsZW0gd2FzIGZvdW5kXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hvd0VmZmVjdChlKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZ2V0V2F2ZXNFZmZlY3RFbGVtZW50KGUpO1xuXG4gICAgICAgIGlmIChlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBFZmZlY3Quc2hvdyhlLCBlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFdhdmVzLmRpc3BsYXlFZmZlY3QgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoJ2R1cmF0aW9uJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBFZmZlY3QuZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9XcmFwIGlucHV0IGluc2lkZSA8aT4gdGFnXG4gICAgICAgIEVmZmVjdC53cmFwSW5wdXQoJCQoJy53YXZlcy1lZmZlY3QnKSk7XG5cbiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBXYXZlcyB0byBhbiBpbnB1dCBlbGVtZW50IChvciBhbnkgZWxlbWVudCB3aGljaCBkb2Vzbid0XG4gICAgICogYnViYmxlIG1vdXNldXAvbW91c2Vkb3duIGV2ZW50cykuXG4gICAgICogICBJbnRlbmRlZCB0byBiZSB1c2VkIHdpdGggZHluYW1pY2FsbHkgbG9hZGVkIGZvcm1zL2lucHV0cywgb3JcbiAgICAgKiB3aGVyZSB0aGUgdXNlciBkb2Vzbid0IHdhbnQgYSBkZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlci5cbiAgICAgKi9cbiAgICBXYXZlcy5hdHRhY2ggPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAvL0ZVVFVSRTogYXV0b21hdGljYWxseSBhZGQgd2F2ZXMgY2xhc3NlcyBhbmQgYWxsb3cgdXNlcnNcbiAgICAgICAgLy8gdG8gc3BlY2lmeSB0aGVtIHdpdGggYW4gb3B0aW9ucyBwYXJhbT8gRWcuIGxpZ2h0L2NsYXNzaWMvYnV0dG9uXG4gICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgICAgICAgRWZmZWN0LndyYXBJbnB1dChbZWxlbWVudF0pO1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHNob3dFZmZlY3QsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgIH07XG5cbiAgICB3aW5kb3cuV2F2ZXMgPSBXYXZlcztcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFdhdmVzLmRpc3BsYXlFZmZlY3QoKTtcbiAgICB9LCBmYWxzZSk7XG5cbn0pKHdpbmRvdyk7IiwiLy9XT1cgU0NSSVBUIC0gUkVWRUFMIEFOSU1BVElPTlMgV0hFTiBTQ1JPTExJTkdcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgTXV0YXRpb25PYnNlcnZlciwgVXRpbCwgV2Vha01hcCwgZ2V0Q29tcHV0ZWRTdHlsZSwgZ2V0Q29tcHV0ZWRTdHlsZVJYLFxuICAgIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICAgIGluZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfTtcblxuICBVdGlsID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFV0aWwoKSB7fVxuXG4gICAgVXRpbC5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24oY3VzdG9tLCBkZWZhdWx0cykge1xuICAgICAgdmFyIGtleSwgdmFsdWU7XG4gICAgICBmb3IgKGtleSBpbiBkZWZhdWx0cykge1xuICAgICAgICB2YWx1ZSA9IGRlZmF1bHRzW2tleV07XG4gICAgICAgIGlmIChjdXN0b21ba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgY3VzdG9tW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGN1c3RvbTtcbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuaXNNb2JpbGUgPSBmdW5jdGlvbihhZ2VudCkge1xuICAgICAgcmV0dXJuIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChhZ2VudCk7XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLmNyZWF0ZUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQsIGJ1YmJsZSwgY2FuY2VsLCBkZXRhaWwpIHtcbiAgICAgIHZhciBjdXN0b21FdmVudDtcbiAgICAgIGlmIChidWJibGUgPT0gbnVsbCkge1xuICAgICAgICBidWJibGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChjYW5jZWwgPT0gbnVsbCkge1xuICAgICAgICBjYW5jZWwgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChkZXRhaWwgPT0gbnVsbCkge1xuICAgICAgICBkZXRhaWwgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgY3VzdG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICAgICAgY3VzdG9tRXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCBidWJibGUsIGNhbmNlbCwgZGV0YWlsKTtcbiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QgIT0gbnVsbCkge1xuICAgICAgICBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgICAgIGN1c3RvbUV2ZW50LmV2ZW50VHlwZSA9IGV2ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VzdG9tRXZlbnQuZXZlbnROYW1lID0gZXZlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VzdG9tRXZlbnQ7XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLmVtaXRFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50KSB7XG4gICAgICBpZiAoZWxlbS5kaXNwYXRjaEV2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50IGluIChlbGVtICE9IG51bGwpKSB7XG4gICAgICAgIHJldHVybiBlbGVtW2V2ZW50XSgpO1xuICAgICAgfSBlbHNlIGlmICgoXCJvblwiICsgZXZlbnQpIGluIChlbGVtICE9IG51bGwpKSB7XG4gICAgICAgIHJldHVybiBlbGVtW1wib25cIiArIGV2ZW50XSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5hZGRFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50LCBmbikge1xuICAgICAgaWYgKGVsZW0uYWRkRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5hdHRhY2hFdmVudChcIm9uXCIgKyBldmVudCwgZm4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVsZW1bZXZlbnRdID0gZm47XG4gICAgICB9XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oZWxlbSwgZXZlbnQsIGZuKSB7XG4gICAgICBpZiAoZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAoZWxlbS5kZXRhY2hFdmVudCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLmRldGFjaEV2ZW50KFwib25cIiArIGV2ZW50LCBmbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVsZXRlIGVsZW1bZXZlbnRdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5pbm5lckhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCdpbm5lckhlaWdodCcgaW4gd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFV0aWw7XG5cbiAgfSkoKTtcblxuICBXZWFrTWFwID0gdGhpcy5XZWFrTWFwIHx8IHRoaXMuTW96V2Vha01hcCB8fCAoV2Vha01hcCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBXZWFrTWFwKCkge1xuICAgICAgdGhpcy5rZXlzID0gW107XG4gICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgIH1cblxuICAgIFdlYWtNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGksIGl0ZW0sIGosIGxlbiwgcmVmO1xuICAgICAgcmVmID0gdGhpcy5rZXlzO1xuICAgICAgZm9yIChpID0gaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGkgPSArK2opIHtcbiAgICAgICAgaXRlbSA9IHJlZltpXTtcbiAgICAgICAgaWYgKGl0ZW0gPT09IGtleSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBXZWFrTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgaSwgaXRlbSwgaiwgbGVuLCByZWY7XG4gICAgICByZWYgPSB0aGlzLmtleXM7XG4gICAgICBmb3IgKGkgPSBqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICBpdGVtID0gcmVmW2ldO1xuICAgICAgICBpZiAoaXRlbSA9PT0ga2V5KSB7XG4gICAgICAgICAgdGhpcy52YWx1ZXNbaV0gPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMua2V5cy5wdXNoKGtleSk7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBXZWFrTWFwO1xuXG4gIH0pKCkpO1xuXG4gIE11dGF0aW9uT2JzZXJ2ZXIgPSB0aGlzLk11dGF0aW9uT2JzZXJ2ZXIgfHwgdGhpcy5XZWJraXRNdXRhdGlvbk9ic2VydmVyIHx8IHRoaXMuTW96TXV0YXRpb25PYnNlcnZlciB8fCAoTXV0YXRpb25PYnNlcnZlciA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBNdXRhdGlvbk9ic2VydmVyKCkge1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNdXRhdGlvbk9ic2VydmVyIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyLicpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdXT1cuanMgY2Fubm90IGRldGVjdCBkb20gbXV0YXRpb25zLCBwbGVhc2UgY2FsbCAuc3luYygpIGFmdGVyIGxvYWRpbmcgbmV3IGNvbnRlbnQuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgTXV0YXRpb25PYnNlcnZlci5ub3RTdXBwb3J0ZWQgPSB0cnVlO1xuXG4gICAgTXV0YXRpb25PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uKCkge307XG5cbiAgICByZXR1cm4gTXV0YXRpb25PYnNlcnZlcjtcblxuICB9KSgpKTtcblxuICBnZXRDb21wdXRlZFN0eWxlID0gdGhpcy5nZXRDb21wdXRlZFN0eWxlIHx8IGZ1bmN0aW9uKGVsLCBwc2V1ZG8pIHtcbiAgICB0aGlzLmdldFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbihwcm9wKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgaWYgKHByb3AgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgcHJvcCA9ICdzdHlsZUZsb2F0JztcbiAgICAgIH1cbiAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlUlgudGVzdChwcm9wKSkge1xuICAgICAgICBwcm9wLnJlcGxhY2UoZ2V0Q29tcHV0ZWRTdHlsZVJYLCBmdW5jdGlvbihfLCBfY2hhcikge1xuICAgICAgICAgIHJldHVybiBfY2hhci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKHJlZiA9IGVsLmN1cnJlbnRTdHlsZSkgIT0gbnVsbCA/IHJlZltwcm9wXSA6IHZvaWQgMCkgfHwgbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIGdldENvbXB1dGVkU3R5bGVSWCA9IC8oXFwtKFthLXpdKXsxfSkvZztcblxuICB0aGlzLldPVyA9IChmdW5jdGlvbigpIHtcbiAgICBXT1cucHJvdG90eXBlLmRlZmF1bHRzID0ge1xuICAgICAgYm94Q2xhc3M6ICd3b3cnLFxuICAgICAgYW5pbWF0ZUNsYXNzOiAnYW5pbWF0ZWQnLFxuICAgICAgb2Zmc2V0OiAwLFxuICAgICAgbW9iaWxlOiB0cnVlLFxuICAgICAgbGl2ZTogdHJ1ZSxcbiAgICAgIGNhbGxiYWNrOiBudWxsLFxuICAgICAgc2Nyb2xsQ29udGFpbmVyOiBudWxsXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFdPVyhvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2Nyb2xsQ2FsbGJhY2sgPSBiaW5kKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIHRoaXMpO1xuICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyID0gYmluZCh0aGlzLnNjcm9sbEhhbmRsZXIsIHRoaXMpO1xuICAgICAgdGhpcy5yZXNldEFuaW1hdGlvbiA9IGJpbmQodGhpcy5yZXNldEFuaW1hdGlvbiwgdGhpcyk7XG4gICAgICB0aGlzLnN0YXJ0ID0gYmluZCh0aGlzLnN0YXJ0LCB0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jb25maWcgPSB0aGlzLnV0aWwoKS5leHRlbmQob3B0aW9ucywgdGhpcy5kZWZhdWx0cyk7XG4gICAgICBpZiAob3B0aW9ucy5zY3JvbGxDb250YWluZXIgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmNvbmZpZy5zY3JvbGxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuc2Nyb2xsQ29udGFpbmVyKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgIHRoaXMud293RXZlbnQgPSB0aGlzLnV0aWwoKS5jcmVhdGVFdmVudCh0aGlzLmNvbmZpZy5ib3hDbGFzcyk7XG4gICAgfVxuXG4gICAgV09XLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgdGhpcy5lbGVtZW50ID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIGlmICgocmVmID0gZG9jdW1lbnQucmVhZHlTdGF0ZSkgPT09IFwiaW50ZXJhY3RpdmVcIiB8fCByZWYgPT09IFwiY29tcGxldGVcIikge1xuICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChkb2N1bWVudCwgJ0RPTUNvbnRlbnRMb2FkZWQnLCB0aGlzLnN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmZpbmlzaGVkID0gW107XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3gsIGosIGxlbiwgcmVmO1xuICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmJveGVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaiwgbGVuLCByZWYsIHJlc3VsdHM7XG4gICAgICAgIHJlZiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgdGhpcy5jb25maWcuYm94Q2xhc3MpO1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGJveCA9IHJlZltqXTtcbiAgICAgICAgICByZXN1bHRzLnB1c2goYm94KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmFsbCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGosIGxlbiwgcmVmLCByZXN1bHRzO1xuICAgICAgICByZWYgPSB0aGlzLmJveGVzO1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGJveCA9IHJlZltqXTtcbiAgICAgICAgICByZXN1bHRzLnB1c2goYm94KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICBpZiAodGhpcy5ib3hlcy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQoKSkge1xuICAgICAgICAgIHRoaXMucmVzZXRTdHlsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlZiA9IHRoaXMuYm94ZXM7XG4gICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBib3ggPSByZWZbal07XG4gICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGUoYm94LCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCgpKSB7XG4gICAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciB8fCB3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5zY3JvbGxDYWxsYmFjaywgNTApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29uZmlnLmxpdmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbk9ic2VydmVyKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNvcmRzKSB7XG4gICAgICAgICAgICB2YXIgaywgbGVuMSwgbm9kZSwgcmVjb3JkLCByZXN1bHRzO1xuICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChrID0gMCwgbGVuMSA9IHJlY29yZHMubGVuZ3RoOyBrIDwgbGVuMTsgaysrKSB7XG4gICAgICAgICAgICAgIHJlY29yZCA9IHJlY29yZHNba107XG4gICAgICAgICAgICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwsIGxlbjIsIHJlZjEsIHJlc3VsdHMxO1xuICAgICAgICAgICAgICAgIHJlZjEgPSByZWNvcmQuYWRkZWROb2RlcyB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXN1bHRzMSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobCA9IDAsIGxlbjIgPSByZWYxLmxlbmd0aDsgbCA8IGxlbjI7IGwrKykge1xuICAgICAgICAgICAgICAgICAgbm9kZSA9IHJlZjFbbF07XG4gICAgICAgICAgICAgICAgICByZXN1bHRzMS5wdXNoKHRoaXMuZG9TeW5jKG5vZGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHMxO1xuICAgICAgICAgICAgICB9KS5jYWxsKF90aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICB9O1xuICAgICAgICB9KSh0aGlzKSkub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMudXRpbCgpLnJlbW92ZUV2ZW50KHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciB8fCB3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgIGlmICh0aGlzLmludGVydmFsICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIGlmIChNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb1N5bmModGhpcy5lbGVtZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5kb1N5bmMgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB2YXIgYm94LCBqLCBsZW4sIHJlZiwgcmVzdWx0cztcbiAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcbiAgICAgICAgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSAxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUgfHwgZWxlbWVudDtcbiAgICAgIHJlZiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRoaXMuY29uZmlnLmJveENsYXNzKTtcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBib3ggPSByZWZbal07XG4gICAgICAgIGlmIChpbmRleE9mLmNhbGwodGhpcy5hbGwsIGJveCkgPCAwKSB7XG4gICAgICAgICAgdGhpcy5ib3hlcy5wdXNoKGJveCk7XG4gICAgICAgICAgdGhpcy5hbGwucHVzaChib3gpO1xuICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWQgfHwgdGhpcy5kaXNhYmxlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U3R5bGUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLnNjcm9sbGVkID0gdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHRoaXMuYXBwbHlTdHlsZShib3gpO1xuICAgICAgYm94LmNsYXNzTmFtZSA9IGJveC5jbGFzc05hbWUgKyBcIiBcIiArIHRoaXMuY29uZmlnLmFuaW1hdGVDbGFzcztcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5jYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuY29uZmlnLmNhbGxiYWNrKGJveCk7XG4gICAgICB9XG4gICAgICB0aGlzLnV0aWwoKS5lbWl0RXZlbnQoYm94LCB0aGlzLndvd0V2ZW50KTtcbiAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KGJveCwgJ2FuaW1hdGlvbmVuZCcsIHRoaXMucmVzZXRBbmltYXRpb24pO1xuICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQoYm94LCAnb2FuaW1hdGlvbmVuZCcsIHRoaXMucmVzZXRBbmltYXRpb24pO1xuICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQoYm94LCAnd2Via2l0QW5pbWF0aW9uRW5kJywgdGhpcy5yZXNldEFuaW1hdGlvbik7XG4gICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChib3gsICdNU0FuaW1hdGlvbkVuZCcsIHRoaXMucmVzZXRBbmltYXRpb24pO1xuICAgICAgcmV0dXJuIGJveDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5hcHBseVN0eWxlID0gZnVuY3Rpb24oYm94LCBoaWRkZW4pIHtcbiAgICAgIHZhciBkZWxheSwgZHVyYXRpb24sIGl0ZXJhdGlvbjtcbiAgICAgIGR1cmF0aW9uID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctZHVyYXRpb24nKTtcbiAgICAgIGRlbGF5ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctZGVsYXknKTtcbiAgICAgIGl0ZXJhdGlvbiA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd293LWl0ZXJhdGlvbicpO1xuICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5jdXN0b21TdHlsZShib3gsIGhpZGRlbiwgZHVyYXRpb24sIGRlbGF5LCBpdGVyYXRpb24pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmFuaW1hdGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScgaW4gd2luZG93KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pKCk7XG5cbiAgICBXT1cucHJvdG90eXBlLnJlc2V0U3R5bGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3gsIGosIGxlbiwgcmVmLCByZXN1bHRzO1xuICAgICAgcmVmID0gdGhpcy5ib3hlcztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBib3ggPSByZWZbal07XG4gICAgICAgIHJlc3VsdHMucHVzaChib3guc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5yZXNldEFuaW1hdGlvbiA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgdGFyZ2V0O1xuICAgICAgaWYgKGV2ZW50LnR5cGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdhbmltYXRpb25lbmQnKSA+PSAwKSB7XG4gICAgICAgIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50O1xuICAgICAgICByZXR1cm4gdGFyZ2V0LmNsYXNzTmFtZSA9IHRhcmdldC5jbGFzc05hbWUucmVwbGFjZSh0aGlzLmNvbmZpZy5hbmltYXRlQ2xhc3MsICcnKS50cmltKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuY3VzdG9tU3R5bGUgPSBmdW5jdGlvbihib3gsIGhpZGRlbiwgZHVyYXRpb24sIGRlbGF5LCBpdGVyYXRpb24pIHtcbiAgICAgIGlmIChoaWRkZW4pIHtcbiAgICAgICAgdGhpcy5jYWNoZUFuaW1hdGlvbk5hbWUoYm94KTtcbiAgICAgIH1cbiAgICAgIGJveC5zdHlsZS52aXNpYmlsaXR5ID0gaGlkZGVuID8gJ2hpZGRlbicgOiAndmlzaWJsZSc7XG4gICAgICBpZiAoZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IGR1cmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGRlbGF5KSB7XG4gICAgICAgIHRoaXMudmVuZG9yU2V0KGJveC5zdHlsZSwge1xuICAgICAgICAgIGFuaW1hdGlvbkRlbGF5OiBkZWxheVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVyYXRpb24pIHtcbiAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgICAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6IGl0ZXJhdGlvblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmVuZG9yU2V0KGJveC5zdHlsZSwge1xuICAgICAgICBhbmltYXRpb25OYW1lOiBoaWRkZW4gPyAnbm9uZScgOiB0aGlzLmNhY2hlZEFuaW1hdGlvbk5hbWUoYm94KVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYm94O1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnZlbmRvcnMgPSBbXCJtb3pcIiwgXCJ3ZWJraXRcIl07XG5cbiAgICBXT1cucHJvdG90eXBlLnZlbmRvclNldCA9IGZ1bmN0aW9uKGVsZW0sIHByb3BlcnRpZXMpIHtcbiAgICAgIHZhciBuYW1lLCByZXN1bHRzLCB2YWx1ZSwgdmVuZG9yO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChuYW1lIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgdmFsdWUgPSBwcm9wZXJ0aWVzW25hbWVdO1xuICAgICAgICBlbGVtW1wiXCIgKyBuYW1lXSA9IHZhbHVlO1xuICAgICAgICByZXN1bHRzLnB1c2goKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0czE7XG4gICAgICAgICAgcmVmID0gdGhpcy52ZW5kb3JzO1xuICAgICAgICAgIHJlc3VsdHMxID0gW107XG4gICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICB2ZW5kb3IgPSByZWZbal07XG4gICAgICAgICAgICByZXN1bHRzMS5wdXNoKGVsZW1bXCJcIiArIHZlbmRvciArIChuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpKSArIChuYW1lLnN1YnN0cigxKSldID0gdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0czE7XG4gICAgICAgIH0pLmNhbGwodGhpcykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yQ1NTID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydHkpIHtcbiAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0LCBzdHlsZSwgdmVuZG9yO1xuICAgICAgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW0pO1xuICAgICAgcmVzdWx0ID0gc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZShwcm9wZXJ0eSk7XG4gICAgICByZWYgPSB0aGlzLnZlbmRvcnM7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgdmVuZG9yID0gcmVmW2pdO1xuICAgICAgICByZXN1bHQgPSByZXN1bHQgfHwgc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZShcIi1cIiArIHZlbmRvciArIFwiLVwiICsgcHJvcGVydHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5hbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICB2YXIgYW5pbWF0aW9uTmFtZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWUgPSB0aGlzLnZlbmRvckNTUyhib3gsICdhbmltYXRpb24tbmFtZScpLmNzc1RleHQ7XG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgYW5pbWF0aW9uTmFtZSA9IGdldENvbXB1dGVkU3R5bGUoYm94KS5nZXRQcm9wZXJ0eVZhbHVlKCdhbmltYXRpb24tbmFtZScpO1xuICAgICAgfVxuICAgICAgaWYgKGFuaW1hdGlvbk5hbWUgPT09ICdub25lJykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYW5pbWF0aW9uTmFtZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5jYWNoZUFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5zZXQoYm94LCB0aGlzLmFuaW1hdGlvbk5hbWUoYm94KSk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuY2FjaGVkQW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLmdldChib3gpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnNjcm9sbGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zY3JvbGxDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveDtcbiAgICAgIGlmICh0aGlzLnNjcm9sbGVkKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ib3hlcyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaiwgbGVuLCByZWYsIHJlc3VsdHM7XG4gICAgICAgICAgcmVmID0gdGhpcy5ib3hlcztcbiAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBib3ggPSByZWZbal07XG4gICAgICAgICAgICBpZiAoIShib3gpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKGJveCkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zaG93KGJveCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGJveCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoISh0aGlzLmJveGVzLmxlbmd0aCB8fCB0aGlzLmNvbmZpZy5saXZlKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLm9mZnNldFRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIHZhciB0b3A7XG4gICAgICB3aGlsZSAoZWxlbWVudC5vZmZzZXRUb3AgPT09IHZvaWQgMCkge1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgICAgdG9wID0gZWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50KSB7XG4gICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b3A7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuaXNWaXNpYmxlID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICB2YXIgYm90dG9tLCBvZmZzZXQsIHRvcCwgdmlld0JvdHRvbSwgdmlld1RvcDtcbiAgICAgIG9mZnNldCA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd293LW9mZnNldCcpIHx8IHRoaXMuY29uZmlnLm9mZnNldDtcbiAgICAgIHZpZXdUb3AgPSAodGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyICYmIHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3ApIHx8IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgIHZpZXdCb3R0b20gPSB2aWV3VG9wICsgTWF0aC5taW4odGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCwgdGhpcy51dGlsKCkuaW5uZXJIZWlnaHQoKSkgLSBvZmZzZXQ7XG4gICAgICB0b3AgPSB0aGlzLm9mZnNldFRvcChib3gpO1xuICAgICAgYm90dG9tID0gdG9wICsgYm94LmNsaWVudEhlaWdodDtcbiAgICAgIHJldHVybiB0b3AgPD0gdmlld0JvdHRvbSAmJiBib3R0b20gPj0gdmlld1RvcDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS51dGlsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdXRpbCAhPSBudWxsID8gdGhpcy5fdXRpbCA6IHRoaXMuX3V0aWwgPSBuZXcgVXRpbCgpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmRpc2FibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuY29uZmlnLm1vYmlsZSAmJiB0aGlzLnV0aWwoKS5pc01vYmlsZShuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdPVztcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
